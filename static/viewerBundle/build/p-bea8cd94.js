import{r as registerInstance,h,H as Host,c as createEvent,g as getElement}from"./p-c1445dc6.js";const AttributeTable$1=class{constructor(e){registerInstance(this,e)}render(){return h(Host,null,h("h2",null,"Welcome to TokenScript Viewer"),h("p",null,"TokenScript Viewer is an easy way to run TokenScripts in your browser if you don't have a TokenScript compatible wallet.",h("br",null),"If you want to try TokenScripts in your wallet, you can download ",h("a",{href:"https://alphawallet.com/",target:"_blank"},"AlphaWallet")," for Android and iOS."),h("h3",null,"What is TokenScript?"),h("p",null,"TokenScript is a framework for providing rich, embedded & secure token utility for blockchain & attestation tokens.",h("br",null),"Simply put, it's a new way of writing DApps which provides UX & security benefits for users by cryptographically tying the frontend to the smart contract or attestation issuer.",h("br",null)),h("p",null,"For more information please visit ",h("a",{href:"https://www.tokenscript.org/",target:"_blank"},"https://www.tokenscript.org/")))}};const showTransactionNotification=async(e,t)=>{switch(e.status){case"submitted":await t.emit({type:"info",title:"Transaction submitted",description:h("span",null,"Processing TX, please wait.. ",h("br",null),"TX Number: "+e.txNumber)});break;case"confirmed":await t.emit({type:"success",title:"Transaction confirmed",description:h("span",null,"TX "+e.txNumber+" confirmed!",h("br",null),e.txLink?h("a",{href:e.txLink,target:"_blank"},"View On Block Scanner"):"")});break}};const handleTransactionError=(e,t)=>{let r=e.message;const n=r.match(/reverted with reason string '(.*)'/);if(n){r=n[1]}else{const e=r.match(/Details: (.*)\\n/);if(e){r=e[1]}else{const e=/"message": "(.*)"/g;let t;const n=[];while(t=e.exec(r)){if(n.indexOf(t[1])===-1)n.push(t[1])}if(n.length)r=n.join("\n")}}t.emit({type:"error",title:"Transaction Error",description:r})};const actionBarCss=".jid-action-bar{display:flex;padding:20px 20px 20px 22px;gap:8px;max-width:650px;margin:0 auto;position:relative}.jid-overflow-btn{flex-grow:0;color:#FFF;border:#333;background:#333}.jid-transfer-btn{flex-grow:1;border:1px solid #333;background:#D2FF00}.overflow-heading{font-size:18px;font-weight:700;text-align:center;margin-bottom:32px}.overflow-buttons{display:flex;flex-direction:column;gap:16px}loading-spinner{text-align:center}";const ActionBar=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.engine=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.actionsEnabled=undefined;this.cardButtons=undefined}async initTokenScript(){this.loadCardButtons();this.tokenScript.on("TOKENS_UPDATED",(()=>{this.cardButtons=undefined;this.loadCardButtons()}))}componentDidLoad(){if(this.tokenScript)this.initTokenScript()}async loadCardButtons(){const e=[];const t=this.tokenScript.getCards();for(let[r,n]of t.entries()){let t=n.label;if(t==="Unnamed Card")t=n.type==="token"?"Token Info":n.type+" Card";try{const i=await n.isEnabledOrReason();if(i===false)continue;e.push(h("button",{class:"jid-btn "+this.getCardButtonClass(n,r),onClick:()=>this.showCard(n),disabled:i!==true,title:i!==true?i:t},t))}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e}getCardButtonClass(e,t){switch(e.buttonClass){case"featured":return"btn-featured";case"primary":return"btn-primary";case"secondary":return"jid-btn-secondary";default:return e.type==="token"||t===0?"btn-primary":"jid-btn-secondary"}}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}actionsAvailable(){if(!this.actionsEnabled){this.showToast.emit({type:"error",title:"Action is not available now",description:"Please try again later"});return false}return true}render(){return h("div",{class:"jid-action-bar"},this.tokenScript?[h("button",{class:"jid-btn jid-overflow-btn",onClick:()=>{if(!this.actionsAvailable())return;this.overflowDialog.openDialog()}},h("img",{alt:"more actions",src:"/assets/icon/joyid/arrow-square-down.png"})," More"),h("action-overflow-modal",{ref:e=>this.overflowDialog=e},h("h2",{class:"overflow-heading"},"More actions"),h("div",{class:"overflow-buttons"},this.cardButtons?this.cardButtons:h("loading-spinner",{color:"#595959"})))]:"",h("button",{class:"jid-btn jid-transfer-btn",onClick:()=>{if(!this.actionsAvailable())return;this.transferDialog.openDialog()}},"Transfer"),h("transfer-dialog",{engine:this.engine,tokenDetails:this.tokenDetails,ref:e=>this.transferDialog=e}))}static get watchers(){return{tokenScript:["initTokenScript"]}}};ActionBar.style=actionBarCss;const actionOverflowModalCss="";const ActionOverflowModal=class{constructor(e){registerInstance(this,e)}async openDialog(){await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}render(){return h("popover-dialog",{ref:e=>this.dialog=e,dialogStyles:{maxWidth:"380px"}},h("slot",null))}};ActionOverflowModal.style=actionOverflowModalCss;var ChainID;(function(e){e[e["ETHEREUM"]=1]="ETHEREUM";e[e["POLYGON"]=137]="POLYGON";e[e["ARBITRUM"]=42161]="ARBITRUM";e[e["OPTIMISM"]=10]="OPTIMISM";e[e["BSC"]=56]="BSC";e[e["BSC_TESTNET"]=97]="BSC_TESTNET";e[e["GOERLI"]=5]="GOERLI";e[e["SEPOLIA"]=11155111]="SEPOLIA";e[e["KOVAN"]=42]="KOVAN";e[e["MUMBAI"]=80001]="MUMBAI";e[e["AVALANCH"]=43114]="AVALANCH";e[e["FANTOM"]=250]="FANTOM";e[e["KLAYTN"]=8217]="KLAYTN";e[e["BAOBAB"]=1001]="BAOBAB";e[e["HARDHAT_LOCALHOST"]=31337]="HARDHAT_LOCALHOST"})(ChainID||(ChainID={}));const CHAIN_MAP={[ChainID.ETHEREUM]:"eth",[ChainID.POLYGON]:"polygon",[ChainID.ARBITRUM]:"arbitrum",[ChainID.OPTIMISM]:"optimism",[ChainID.GOERLI]:"goerli",[ChainID.SEPOLIA]:"sepolia",[ChainID.KOVAN]:"kovan",[ChainID.BSC]:"bsc",[ChainID.MUMBAI]:"mumbai",[ChainID.AVALANCH]:"avalanche",[ChainID.FANTOM]:"fantom",[ChainID.KLAYTN]:"cypress",[ChainID.BAOBAB]:"baobab",[ChainID.HARDHAT_LOCALHOST]:"hardhat-localhost"};const CHAIN_NAME_MAP={[ChainID.ETHEREUM]:"Ethereum Mainnet",[ChainID.GOERLI]:"Goerli (Ethereum Testnet)",[ChainID.SEPOLIA]:"Sepolia (Ethereum Testnet)",[ChainID.POLYGON]:"Polygon",[ChainID.MUMBAI]:"Mumbai (Polygon Testnet)",[ChainID.ARBITRUM]:"Arbitrum",[ChainID.OPTIMISM]:"Optimism",[ChainID.BSC]:"Binance Smart Chain",[ChainID.AVALANCH]:"Avalanche",[ChainID.FANTOM]:"Fantom",[ChainID.KLAYTN]:"Cypress (Klaytn Mainnet)",[ChainID.BAOBAB]:"Baobab (Klaytn Testnet)",[ChainID.HARDHAT_LOCALHOST]:"Hardhat Localhost (EVM Test Network)"};const CHAIN_CONFIG={[ChainID.ETHEREUM]:{rpc:"https://mainnet.infura.io/v3/3ca8f1ba91f84e1f97c99f6218fe3743",explorer:"https://etherscan.com/tx/"},[ChainID.GOERLI]:{rpc:"https://eth-goerli.g.alchemy.com/v2/yVhq9zPJorAWsw-F87fEabSUl7cCU6z4",explorer:"https://goerli.etherscan.io/tx/"},[ChainID.SEPOLIA]:{rpc:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",explorer:"https://sepolia.etherscan.io/tx/"},[ChainID.POLYGON]:{rpc:"https://polygon-mainnet.infura.io/v3/3ca8f1ba91f84e1f97c99f6218fe3743",explorer:"https://polygonscan.com/tx/"},[ChainID.MUMBAI]:{rpc:"https://polygon-mumbai.g.alchemy.com/v2/rVI6pOV4irVsrw20cJxc1fxK_1cSeiY0",explorer:"https://mumbai.polygonscan.com/tx/"},[ChainID.BSC]:{rpc:"https://bsc-dataseed.binance.org/",explorer:"https://bscscan.com/tx/"},[ChainID.BSC_TESTNET]:{rpc:"https://data-seed-prebsc-1-s1.binance.org:8545",explorer:"https://testnet.bscscan.com/tx/"},[ChainID.AVALANCH]:{rpc:"https://api.avax.network/ext/bc/C/rpc",explorer:"https://cchain.explorer.avax.network/tx/"},[ChainID.FANTOM]:{rpc:"https://rpc.fantom.network/",explorer:"https://ftmscan.com/tx/"},[ChainID.ARBITRUM]:{rpc:"https://arb1.arbitrum.io/rpc",explorer:"https://arbiscan.io/tx/"},[ChainID.OPTIMISM]:{rpc:"https://mainnet.optimism.io",explorer:"https://optimistic.etherscan.io/tx/"},[ChainID.KLAYTN]:{rpc:"https://public-node-api.klaytnapi.com/v1/cypress",explorer:"https://scope.klaytn.com/tx/"},[ChainID.BAOBAB]:{rpc:"https://public-node-api.klaytnapi.com/v1/baobab",explorer:"https://baobab.scope.klaytn.com/tx/"},[ChainID.HARDHAT_LOCALHOST]:{rpc:"http://127.0.0.1:8545/",explorer:""}};const ERC721_ABI_JSON=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"approved",type:"address"},{indexed:true,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"operator",type:"address"},{indexed:false,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"_fromTokenId",type:"uint256"},{indexed:false,internalType:"uint256",name:"_toTokenId",type:"uint256"}],name:"BatchMetadataUpdate",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"MetadataUpdate",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:true,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"contractURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const ERC20_ABI_JSON=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"ECDSAInvalidSignature",type:"error"},{inputs:[{internalType:"uint256",name:"length",type:"uint256"}],name:"ECDSAInvalidSignatureLength",type:"error"},{inputs:[{internalType:"bytes32",name:"s",type:"bytes32"}],name:"ECDSAInvalidSignatureS",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"allowance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientAllowance",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"balance",type:"uint256"},{internalType:"uint256",name:"needed",type:"uint256"}],name:"ERC20InsufficientBalance",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC20InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC20InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC20InvalidSender",type:"error"},{inputs:[{internalType:"address",name:"spender",type:"address"}],name:"ERC20InvalidSpender",type:"error"},{inputs:[{internalType:"uint256",name:"deadline",type:"uint256"}],name:"ERC2612ExpiredSignature",type:"error"},{inputs:[{internalType:"address",name:"signer",type:"address"},{internalType:"address",name:"owner",type:"address"}],name:"ERC2612InvalidSigner",type:"error"},{inputs:[],name:"EnforcedPause",type:"error"},{inputs:[],name:"ExpectedPause",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"currentNonce",type:"uint256"}],name:"InvalidAccountNonce",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[],name:"EIP712DomainChanged",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:false,inputs:[{indexed:false,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"value",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"burnFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"burnFromSmartCat",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{internalType:"bytes1",name:"fields",type:"bytes1"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"version",type:"string"},{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"verifyingContract",type:"address"},{internalType:"bytes32",name:"salt",type:"bytes32"},{internalType:"uint256[]",name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_smartCatContract",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mintFromSmartCat",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_smartCatContract",type:"address"}],name:"setSmartCatContract",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}];const addSelectorCss=".source-container>button{display:block;margin:8px 0;width:100%;height:56px;border-radius:10px;border:1px solid rgba(157, 157, 157, 1);font-size:16px;background:#FFFEFE}.header{display:flex;align-items:center}.header>button{min-width:30px;height:40px;font-size:18px;font-weight:bold;background:none;padding-bottom:5px}.header>h4{margin:0}.form-container{display:flex;flex-direction:column;justify-content:space-between;height:240px}.form-container>button{height:55px}";const AddSelector=class{constructor(e){registerInstance(this,e);this.onFormSubmit=undefined;this.type=undefined}async openDialog(){this.type=null;await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}async submitForm(){const e=document.getElementById("add-form");if(!e.checkValidity())return;switch(this.type){case"resolve":const e=document.getElementById("contract-field").value;const t=parseInt(document.getElementById("chain-field").value);this.onFormSubmit("resolve",{tsId:t+"-"+e});break;case"url":const r=document.getElementById("url-field").value;this.onFormSubmit("url",{tsId:r});break;case"file":const n=await document.getElementById("file-field").getFile();this.onFormSubmit("file",{xml:n});break}}getTypeLabel(){return this.type.substring(0,1).toUpperCase()+this.type.substring(1)}render(){return h("popover-dialog",{ref:e=>this.dialog=e},h("div",null,!this.type?h("div",null,h("h3",null,"Add Token From"),h("div",{class:"source-container"},h("button",{class:"btn",onClick:()=>this.type="resolve"},"Contract Script"),h("button",{class:"btn",onClick:()=>this.type="url"},"URL"),h("button",{class:"btn",onClick:()=>this.type="file"},"XML File"))):""),h("div",null,this.type?h("div",{class:"form-view"},h("div",{class:"header"},h("button",{class:"btn",onClick:()=>{this.type=null}},"<"),h("h4",null,this.getTypeLabel())),h("form",{id:"add-form",class:"form-container",onSubmit:e=>{e.preventDefault();this.submitForm()}},this.type==="resolve"?h("div",null,h("input-field",{id:"contract-field",name:"contract",label:"Contract Address",type:"text",required:true,pattern:"^0x[a-fA-F0-9]{40}$"}),h("select-field",{id:"chain-field",name:"chain",label:"Chain",options:Object.entries(CHAIN_NAME_MAP).map((e=>({value:e[0],label:e[1]})))})):"",this.type==="url"?h("div",null,h("input-field",{id:"url-field",name:"url",label:"TokenScript URL",type:"url",required:true})):"",this.type==="file"?h("div",null,h("input-field",{id:"file-field",name:"file",label:"TokenScript XML",type:"file",required:true})):"",h("button",{class:"btn btn-primary"},"Load"))):""))}};AddSelector.style=addSelectorCss;var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function createCommonjsModule$2(e,t,r){return r={path:t,exports:{},require:function(e,t){return commonjsRequire$2()}},e(r,r.exports),r.exports}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:true});Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}));return t}function commonjsRequire$2(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}const _nodeResolve_empty={};const _nodeResolve_empty$1=Object.freeze({__proto__:null,default:_nodeResolve_empty});const require$$3=getAugmentedNamespace(_nodeResolve_empty$1);var bn$3=createCommonjsModule$2((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$3.Buffer}}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,n,i){if(typeof t==="number"){return this._initNumber(t,n,i)}if(typeof t==="object"){return this._initArray(t,n,i)}if(n==="hex"){n=16}r(n===(n|0)&&n>=2&&n<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(n===16){this._parseHex(t,s,i)}else{this._parseBase(t,n,s);if(i==="le"){this._initArray(this.toArray(),n,i)}}}};i.prototype._initNumber=function e(t,n,i){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),n,i)};i.prototype._initArray=function e(t,n,i){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this._strip()};function a(e,t){var n=e.charCodeAt(t);if(n>=48&&n<=57){return n-48}else if(n>=65&&n<=70){return n-55}else if(n>=97&&n<=102){return n-87}else{r(false,"Invalid character in "+e)}}function o(e,t,r){var n=a(e,r);if(r-1>=t){n|=a(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var f;if(n==="be"){for(i=t.length-1;i>=r;i-=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(i=c%2===0?r+1:r;i<t.length;i+=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this._strip()};function f(e,t,n,i){var s=0;var a=0;var o=Math.min(e.length,n);for(var f=t;f<o;f++){var c=e.charCodeAt(f)-48;s*=i;if(c>=49){a=c-49+10}else if(c>=17){a=c-17+10}else{a=c}r(c>=0&&a<i,"Invalid character");s+=a}return s}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=t.length-n;var o=a%i;var c=Math.min(a,a-o)+n;var u=0;for(var l=n;l<c;l+=i){u=f(t,l,l+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var h=1;u=f(t,l,t.length,r);for(l=0;l<o;l++){h*=r}this.imuln(h);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this._strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};function c(e,t){e.words=t.words;e.length=t.length;e.negative=t.negative;e.red=t.red}i.prototype._move=function e(t){c(t,this)};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype._strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){i.prototype.inspect=u}}else{i.prototype.inspect=u}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,n){t=t||10;n=n|0||1;var i;if(t===16||t==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;s+=2;if(s>=26){s-=26;o--}if(a!==0||o!==this.length-1){i=l[6-c.length]+c+i}else{i=c+i}}if(a!==0){i=a.toString(16)+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(t===(t|0)&&t>=2&&t<=36){var u=h[t];var p=d[t];i="";var y=this.clone();y.negative=0;while(!y.isZero()){var m=y.modrn(p).toString(t);y=y.idivn(p);if(!y.isZero()){i=l[u-m.length]+m+i}else{i=m+i}}if(this.isZero()){i="0"+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}r(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16,2)};if(s){i.prototype.toBuffer=function e(t,r){return this.toArrayLike(s,t,r)}}i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};var p=function e(t,r){if(t.allocUnsafe){return t.allocUnsafe(r)}return new t(r)};i.prototype.toArrayLike=function e(t,n,i){this._strip();var s=this.byteLength();var a=i||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");var o=p(t,a);var f=n==="le"?"LE":"BE";this["_toArrayLike"+f](o,s);return o};i.prototype._toArrayLikeLE=function e(t,r){var n=0;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n++]=o&255;if(n<t.length){t[n++]=o>>8&255}if(n<t.length){t[n++]=o>>16&255}if(a===6){if(n<t.length){t[n++]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n<t.length){t[n++]=i;while(n<t.length){t[n++]=0}}};i.prototype._toArrayLikeBE=function e(t,r){var n=t.length-1;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n--]=o&255;if(n>=0){t[n--]=o>>8&255}if(n>=0){t[n--]=o>>16&255}if(a===6){if(n>=0){t[n--]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n>=0){t[n--]=i;while(n>=0){t[n--]=0}}};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function y(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=e.words[n]>>>i&1}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this._strip()};i.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this._strip()};i.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this._strip()};i.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var n=Math.ceil(t/26)|0;var i=t%26;this._expand(n);if(i>0){n--}for(var s=0;s<n;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this._strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,n){r(typeof t==="number"&&t>=0);var i=t/26|0;var s=t%26;this._expand(i+1);if(n){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this._strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=t}else{i=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this._strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var s=t.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var l=f&67108863;var h=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;i=e.words[p]|0;s=t.words[d]|0;a=i*s+l;u+=a/67108864|0;l=a&67108863}r.words[c]=l|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r._strip()}var g=function e(t,r,n){var i=t.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var l=i[0]|0;var h=l&8191;var d=l>>>13;var p=i[1]|0;var y=p&8191;var m=p>>>13;var g=i[2]|0;var b=g&8191;var v=g>>>13;var w=i[3]|0;var A=w&8191;var E=w>>>13;var _=i[4]|0;var S=_&8191;var $=_>>>13;var T=i[5]|0;var C=T&8191;var P=T>>>13;var x=i[6]|0;var I=x&8191;var k=x>>>13;var N=i[7]|0;var R=N&8191;var M=N>>>13;var O=i[8]|0;var B=O&8191;var D=O>>>13;var U=i[9]|0;var L=U&8191;var F=U>>>13;var j=s[0]|0;var H=j&8191;var K=j>>>13;var G=s[1]|0;var V=G&8191;var z=G>>>13;var W=s[2]|0;var X=W&8191;var Y=W>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ne=re&8191;var ie=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var le=s[8]|0;var he=le&8191;var de=le>>>13;var pe=s[9]|0;var ye=pe&8191;var me=pe>>>13;n.negative=t.negative^r.negative;n.length=19;f=Math.imul(h,H);c=Math.imul(h,K);c=c+Math.imul(d,H)|0;u=Math.imul(d,K);var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(y,H);c=Math.imul(y,K);c=c+Math.imul(m,H)|0;u=Math.imul(m,K);f=f+Math.imul(h,V)|0;c=c+Math.imul(h,z)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,z)|0;var be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(be>>>26)|0;be&=67108863;f=Math.imul(b,H);c=Math.imul(b,K);c=c+Math.imul(v,H)|0;u=Math.imul(v,K);f=f+Math.imul(y,V)|0;c=c+Math.imul(y,z)|0;c=c+Math.imul(m,V)|0;u=u+Math.imul(m,z)|0;f=f+Math.imul(h,X)|0;c=c+Math.imul(h,Y)|0;c=c+Math.imul(d,X)|0;u=u+Math.imul(d,Y)|0;var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(A,H);c=Math.imul(A,K);c=c+Math.imul(E,H)|0;u=Math.imul(E,K);f=f+Math.imul(b,V)|0;c=c+Math.imul(b,z)|0;c=c+Math.imul(v,V)|0;u=u+Math.imul(v,z)|0;f=f+Math.imul(y,X)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(m,X)|0;u=u+Math.imul(m,Y)|0;f=f+Math.imul(h,q)|0;c=c+Math.imul(h,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(S,H);c=Math.imul(S,K);c=c+Math.imul($,H)|0;u=Math.imul($,K);f=f+Math.imul(A,V)|0;c=c+Math.imul(A,z)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,z)|0;f=f+Math.imul(b,X)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(v,X)|0;u=u+Math.imul(v,Y)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(C,H);c=Math.imul(C,K);c=c+Math.imul(P,H)|0;u=Math.imul(P,K);f=f+Math.imul(S,V)|0;c=c+Math.imul(S,z)|0;c=c+Math.imul($,V)|0;u=u+Math.imul($,z)|0;f=f+Math.imul(A,X)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,X)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(v,q)|0;u=u+Math.imul(v,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(d,ne)|0;u=u+Math.imul(d,ie)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(I,H);c=Math.imul(I,K);c=c+Math.imul(k,H)|0;u=Math.imul(k,K);f=f+Math.imul(C,V)|0;c=c+Math.imul(C,z)|0;c=c+Math.imul(P,V)|0;u=u+Math.imul(P,z)|0;f=f+Math.imul(S,X)|0;c=c+Math.imul(S,Y)|0;c=c+Math.imul($,X)|0;u=u+Math.imul($,Y)|0;f=f+Math.imul(A,q)|0;c=c+Math.imul(A,Q)|0;c=c+Math.imul(E,q)|0;u=u+Math.imul(E,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;f=f+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(m,ne)|0;u=u+Math.imul(m,ie)|0;f=f+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(R,H);c=Math.imul(R,K);c=c+Math.imul(M,H)|0;u=Math.imul(M,K);f=f+Math.imul(I,V)|0;c=c+Math.imul(I,z)|0;c=c+Math.imul(k,V)|0;u=u+Math.imul(k,z)|0;f=f+Math.imul(C,X)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(P,X)|0;u=u+Math.imul(P,Y)|0;f=f+Math.imul(S,q)|0;c=c+Math.imul(S,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(A,ee)|0;c=c+Math.imul(A,te)|0;c=c+Math.imul(E,ee)|0;u=u+Math.imul(E,te)|0;f=f+Math.imul(b,ne)|0;c=c+Math.imul(b,ie)|0;c=c+Math.imul(v,ne)|0;u=u+Math.imul(v,ie)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(h,ce)|0;c=c+Math.imul(h,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(B,H);c=Math.imul(B,K);c=c+Math.imul(D,H)|0;u=Math.imul(D,K);f=f+Math.imul(R,V)|0;c=c+Math.imul(R,z)|0;c=c+Math.imul(M,V)|0;u=u+Math.imul(M,z)|0;f=f+Math.imul(I,X)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(k,X)|0;u=u+Math.imul(k,Y)|0;f=f+Math.imul(C,q)|0;c=c+Math.imul(C,Q)|0;c=c+Math.imul(P,q)|0;u=u+Math.imul(P,Q)|0;f=f+Math.imul(S,ee)|0;c=c+Math.imul(S,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(A,ne)|0;c=c+Math.imul(A,ie)|0;c=c+Math.imul(E,ne)|0;u=u+Math.imul(E,ie)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(v,ae)|0;u=u+Math.imul(v,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(h,he)|0;c=c+Math.imul(h,de)|0;c=c+Math.imul(d,he)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(L,H);c=Math.imul(L,K);c=c+Math.imul(F,H)|0;u=Math.imul(F,K);f=f+Math.imul(B,V)|0;c=c+Math.imul(B,z)|0;c=c+Math.imul(D,V)|0;u=u+Math.imul(D,z)|0;f=f+Math.imul(R,X)|0;c=c+Math.imul(R,Y)|0;c=c+Math.imul(M,X)|0;u=u+Math.imul(M,Y)|0;f=f+Math.imul(I,q)|0;c=c+Math.imul(I,Q)|0;c=c+Math.imul(k,q)|0;u=u+Math.imul(k,Q)|0;f=f+Math.imul(C,ee)|0;c=c+Math.imul(C,te)|0;c=c+Math.imul(P,ee)|0;u=u+Math.imul(P,te)|0;f=f+Math.imul(S,ne)|0;c=c+Math.imul(S,ie)|0;c=c+Math.imul($,ne)|0;u=u+Math.imul($,ie)|0;f=f+Math.imul(A,ae)|0;c=c+Math.imul(A,oe)|0;c=c+Math.imul(E,ae)|0;u=u+Math.imul(E,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(v,ce)|0;u=u+Math.imul(v,ue)|0;f=f+Math.imul(y,he)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(m,he)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(h,ye)|0;c=c+Math.imul(h,me)|0;c=c+Math.imul(d,ye)|0;u=u+Math.imul(d,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(L,V);c=Math.imul(L,z);c=c+Math.imul(F,V)|0;u=Math.imul(F,z);f=f+Math.imul(B,X)|0;c=c+Math.imul(B,Y)|0;c=c+Math.imul(D,X)|0;u=u+Math.imul(D,Y)|0;f=f+Math.imul(R,q)|0;c=c+Math.imul(R,Q)|0;c=c+Math.imul(M,q)|0;u=u+Math.imul(M,Q)|0;f=f+Math.imul(I,ee)|0;c=c+Math.imul(I,te)|0;c=c+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;f=f+Math.imul(C,ne)|0;c=c+Math.imul(C,ie)|0;c=c+Math.imul(P,ne)|0;u=u+Math.imul(P,ie)|0;f=f+Math.imul(S,ae)|0;c=c+Math.imul(S,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(A,ce)|0;c=c+Math.imul(A,ue)|0;c=c+Math.imul(E,ce)|0;u=u+Math.imul(E,ue)|0;f=f+Math.imul(b,he)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(v,he)|0;u=u+Math.imul(v,de)|0;f=f+Math.imul(y,ye)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(m,ye)|0;u=u+Math.imul(m,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(L,X);c=Math.imul(L,Y);c=c+Math.imul(F,X)|0;u=Math.imul(F,Y);f=f+Math.imul(B,q)|0;c=c+Math.imul(B,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(R,ee)|0;c=c+Math.imul(R,te)|0;c=c+Math.imul(M,ee)|0;u=u+Math.imul(M,te)|0;f=f+Math.imul(I,ne)|0;c=c+Math.imul(I,ie)|0;c=c+Math.imul(k,ne)|0;u=u+Math.imul(k,ie)|0;f=f+Math.imul(C,ae)|0;c=c+Math.imul(C,oe)|0;c=c+Math.imul(P,ae)|0;u=u+Math.imul(P,oe)|0;f=f+Math.imul(S,ce)|0;c=c+Math.imul(S,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(A,he)|0;c=c+Math.imul(A,de)|0;c=c+Math.imul(E,he)|0;u=u+Math.imul(E,de)|0;f=f+Math.imul(b,ye)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(v,ye)|0;u=u+Math.imul(v,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(L,q);c=Math.imul(L,Q);c=c+Math.imul(F,q)|0;u=Math.imul(F,Q);f=f+Math.imul(B,ee)|0;c=c+Math.imul(B,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(R,ne)|0;c=c+Math.imul(R,ie)|0;c=c+Math.imul(M,ne)|0;u=u+Math.imul(M,ie)|0;f=f+Math.imul(I,ae)|0;c=c+Math.imul(I,oe)|0;c=c+Math.imul(k,ae)|0;u=u+Math.imul(k,oe)|0;f=f+Math.imul(C,ce)|0;c=c+Math.imul(C,ue)|0;c=c+Math.imul(P,ce)|0;u=u+Math.imul(P,ue)|0;f=f+Math.imul(S,he)|0;c=c+Math.imul(S,de)|0;c=c+Math.imul($,he)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(A,ye)|0;c=c+Math.imul(A,me)|0;c=c+Math.imul(E,ye)|0;u=u+Math.imul(E,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(L,ee);c=Math.imul(L,te);c=c+Math.imul(F,ee)|0;u=Math.imul(F,te);f=f+Math.imul(B,ne)|0;c=c+Math.imul(B,ie)|0;c=c+Math.imul(D,ne)|0;u=u+Math.imul(D,ie)|0;f=f+Math.imul(R,ae)|0;c=c+Math.imul(R,oe)|0;c=c+Math.imul(M,ae)|0;u=u+Math.imul(M,oe)|0;f=f+Math.imul(I,ce)|0;c=c+Math.imul(I,ue)|0;c=c+Math.imul(k,ce)|0;u=u+Math.imul(k,ue)|0;f=f+Math.imul(C,he)|0;c=c+Math.imul(C,de)|0;c=c+Math.imul(P,he)|0;u=u+Math.imul(P,de)|0;f=f+Math.imul(S,ye)|0;c=c+Math.imul(S,me)|0;c=c+Math.imul($,ye)|0;u=u+Math.imul($,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(L,ne);c=Math.imul(L,ie);c=c+Math.imul(F,ne)|0;u=Math.imul(F,ie);f=f+Math.imul(B,ae)|0;c=c+Math.imul(B,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(R,ce)|0;c=c+Math.imul(R,ue)|0;c=c+Math.imul(M,ce)|0;u=u+Math.imul(M,ue)|0;f=f+Math.imul(I,he)|0;c=c+Math.imul(I,de)|0;c=c+Math.imul(k,he)|0;u=u+Math.imul(k,de)|0;f=f+Math.imul(C,ye)|0;c=c+Math.imul(C,me)|0;c=c+Math.imul(P,ye)|0;u=u+Math.imul(P,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(L,ae);c=Math.imul(L,oe);c=c+Math.imul(F,ae)|0;u=Math.imul(F,oe);f=f+Math.imul(B,ce)|0;c=c+Math.imul(B,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(R,he)|0;c=c+Math.imul(R,de)|0;c=c+Math.imul(M,he)|0;u=u+Math.imul(M,de)|0;f=f+Math.imul(I,ye)|0;c=c+Math.imul(I,me)|0;c=c+Math.imul(k,ye)|0;u=u+Math.imul(k,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(L,ce);c=Math.imul(L,ue);c=c+Math.imul(F,ce)|0;u=Math.imul(F,ue);f=f+Math.imul(B,he)|0;c=c+Math.imul(B,de)|0;c=c+Math.imul(D,he)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(R,ye)|0;c=c+Math.imul(R,me)|0;c=c+Math.imul(M,ye)|0;u=u+Math.imul(M,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(L,he);c=Math.imul(L,de);c=c+Math.imul(F,he)|0;u=Math.imul(F,de);f=f+Math.imul(B,ye)|0;c=c+Math.imul(B,me)|0;c=c+Math.imul(D,ye)|0;u=u+Math.imul(D,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(L,ye);c=Math.imul(L,me);c=c+Math.imul(F,ye)|0;u=Math.imul(F,me);var Oe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;a[0]=ge;a[1]=be;a[2]=ve;a[3]=we;a[4]=Ae;a[5]=Ee;a[6]=_e;a[7]=Se;a[8]=$e;a[9]=Te;a[10]=Ce;a[11]=Pe;a[12]=xe;a[13]=Ie;a[14]=ke;a[15]=Ne;a[16]=Re;a[17]=Me;a[18]=Oe;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){g=m}function b(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var l=e.words[u]|0;var h=t.words[c]|0;var d=l*h;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r._strip()}function v(e,t,r){return b(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=g(this,t,r)}else if(i<63){n=m(this,t,r)}else if(i<1024){n=b(this,t,r)}else{n=v(this,t,r)}return n};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return v(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){var n=t<0;if(n)t=-t;r(typeof t==="number");r(t<67108864);var i=0;for(var s=0;s<this.length;s++){var a=(this.words[s]|0)*t;var o=(a&67108863)+(i&67108863);i>>=26;i+=a/67108864|0;i+=o>>>26;this.words[s]=o&67108863}if(i!==0){this.words[s]=i;this.length++}return n?this.ineg():this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=y(t);if(r.length===0)return new i(1);var n=this;for(var s=0;s<r.length;s++,n=n.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=n.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;n=n.mul(a)}}return n};i.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=67108863>>>26-n<<26-n;var a;if(n!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<n;this.words[a]=c|o;o=f>>>26-n}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this._strip()};i.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,n,i){r(typeof t==="number"&&t>=0);var s;if(n){s=(n-n%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=s);u--){var h=this.words[u]|0;this.words[u]=l<<26-a|h>>>a;l=h&f}if(c&&l!==0){c.words[c.length++]=l}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};i.prototype.ishrn=function e(t,n,i){r(this.negative===0);return this.iushrn(t,n,i)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};i.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(n!==0){i++}this.length=Math.min(i,this.length);if(n!==0){var s=67108863^67108863>>>n<<n;this.words[this.length-1]&=s}return this._strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var n=0;n<this.length&&this.words[n]<0;n++){this.words[n]+=67108864;this.words[n+1]-=1}}return this._strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,n,i){var s=t.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+i]|0)+f;var c=(t.words[a]|0)*n;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this._strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this._strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);s.iushln(n);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new i(null);u.length=c+1;u.words=new Array(u.length);for(var l=0;l<u.length;l++){u.words[l]=0}}var h=s.clone()._ishlnsubmul(a,1,c);if(h.negative===0){s=h;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u._strip()}s._strip();if(r!=="div"&&n!==0){s.iushrn(n)}return{div:u||null,mod:s}};i.prototype.divmod=function e(t,n,s){r(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,n);if(n!=="mod"){a=f.div.neg()}if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),n);if(n!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),n);if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(n==="div"){return{div:this.divn(t.words[0]),mod:null}}if(n==="mod"){return{div:null,mod:new i(this.modrn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}}return this._wordDiv(t,n)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var s=t.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modrn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=(1<<26)%t;var s=0;for(var a=this.length-1;a>=0;a--){s=(i*s+(this.words[a]|0))%t}return n?-s:s};i.prototype.modn=function e(t){return this.modrn(t)};i.prototype.idivn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=0;for(var s=this.length-1;s>=0;s--){var a=(this.words[s]|0)+i*67108864;this.words[s]=a/t|0;i=a%t}this._strip();return n?this.ineg():this};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=new i(0);var c=new i(1);var u=0;while(n.isEven()&&s.isEven()){n.iushrn(1);s.iushrn(1);++u}var l=s.clone();var h=n.clone();while(!n.isZero()){for(var d=0,p=1;(n.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){n.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(l);o.isub(h)}a.iushrn(1);o.iushrn(1)}}for(var y=0,m=1;(s.words[0]&m)===0&&y<26;++y,m<<=1);if(y>0){s.iushrn(y);while(y-- >0){if(f.isOdd()||c.isOdd()){f.iadd(l);c.isub(h)}f.iushrn(1);c.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(f);o.isub(c)}else{s.isub(n);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};i.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=s.clone();while(n.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(n.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var l=0,h=1;(s.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){s.iushrn(l);while(l-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(o)}else{s.isub(n);o.isub(a)}}var d;if(n.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){r(typeof t==="number");var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var n=t<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this._strip();var i;if(this.length>1){i=1}else{if(n){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;i=s===t?0:s<t?-1:1}if(this.negative!==0)return-i|0;return i};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=t.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new T(t)};i.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}A.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};A.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};A.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};A.prototype.imulK=function e(t){return t.imul(this.k)};function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(E,A);E.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var s=0;s<i;s++){r.words[s]=t.words[s]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};E.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function _(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(_,A);function S(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(S,A);function $(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,A);$.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var s=i&67108863;i>>>=26;t.words[n]=s;r=i}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(w[t])return w[t];var e;if(t==="k256"){e=new E}else if(t==="p224"){e=new _}else if(t==="p192"){e=new S}else if(t==="p25519"){e=new $}else{throw new Error("Unknown prime "+t)}w[t]=e;return e};function T(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}T.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};T.prototype._verify2=function e(t,n){r((t.negative|n.negative)===0,"red works only with positives");r(t.red&&t.red===n.red,"red works only with red numbers")};T.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);c(t,t.umod(this.m)._forceRed(this));return t};T.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};T.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};T.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};T.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};T.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};T.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};T.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};T.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};T.prototype.isqr=function e(t){return this.imul(t,t.clone())};T.prototype.sqr=function e(t){return this.mul(t,t)};T.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var n=this.m.andln(3);r(n%2===1);if(n===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new i(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var l=this.m.bitLength();l=new i(2*l*l).toRed(this);while(this.pow(l,u).cmp(c)!==0){l.redIAdd(c)}var h=this.pow(l,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var y=o;while(p.cmp(f)!==0){var m=p;for(var g=0;m.cmp(f)!==0;g++){m=m.redSqr()}r(g<y);var b=this.pow(h,new i(1).iushln(y-g-1));d=d.redMul(b);h=b.redSqr();p=p.redMul(h);y=g}return d};T.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};T.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var s=new Array(1<<n);s[0]=new i(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var l=r.words[a];for(var h=u-1;h>=0;h--){var d=l>>h&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||h!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};T.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};T.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new C(t)};function C(e){T.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}n(C,T);C.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};C.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};C.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};C.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var s=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};C.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));const version$Q="logger/5.7.0";let _permanentCensorErrors$1=false;let _censorErrors$1=false;const LogLevels$1={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel$1=LogLevels$1["default"];let _globalLogger$1=null;function _checkNormalize$1(){try{const e=[];["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test".normalize(t)!=="test"){throw new Error("bad normalize")}}catch(r){e.push(t)}}));if(e.length){throw new Error("missing "+e.join(", "))}if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769)){throw new Error("broken implementation")}}catch(e){return e.message}return null}const _normalizeError$1=_checkNormalize$1();var LogLevel$1;(function(e){e["DEBUG"]="DEBUG";e["INFO"]="INFO";e["WARNING"]="WARNING";e["ERROR"]="ERROR";e["OFF"]="OFF"})(LogLevel$1||(LogLevel$1={}));var ErrorCode$1;(function(e){e["UNKNOWN_ERROR"]="UNKNOWN_ERROR";e["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED";e["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION";e["NETWORK_ERROR"]="NETWORK_ERROR";e["SERVER_ERROR"]="SERVER_ERROR";e["TIMEOUT"]="TIMEOUT";e["BUFFER_OVERRUN"]="BUFFER_OVERRUN";e["NUMERIC_FAULT"]="NUMERIC_FAULT";e["MISSING_NEW"]="MISSING_NEW";e["INVALID_ARGUMENT"]="INVALID_ARGUMENT";e["MISSING_ARGUMENT"]="MISSING_ARGUMENT";e["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT";e["CALL_EXCEPTION"]="CALL_EXCEPTION";e["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS";e["NONCE_EXPIRED"]="NONCE_EXPIRED";e["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED";e["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT";e["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED";e["ACTION_REJECTED"]="ACTION_REJECTED"})(ErrorCode$1||(ErrorCode$1={}));const HEX$1="0123456789abcdef";class Logger$1{constructor(e){Object.defineProperty(this,"version",{enumerable:true,value:e,writable:false})}_log(e,t){const r=e.toLowerCase();if(LogLevels$1[r]==null){this.throwArgumentError("invalid log level name","logLevel",e)}if(_logLevel$1>LogLevels$1[r]){return}console.log.apply(console,t)}debug(...e){this._log(Logger$1.levels.DEBUG,e)}info(...e){this._log(Logger$1.levels.INFO,e)}warn(...e){this._log(Logger$1.levels.WARNING,e)}makeError(e,t,r){if(_censorErrors$1){return this.makeError("censored error",t,{})}if(!t){t=Logger$1.errors.UNKNOWN_ERROR}if(!r){r={}}const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++){r+=HEX$1[t[e]>>4];r+=HEX$1[t[e]&15]}n.push(e+"=Uint8Array(0x"+r+")")}else{n.push(e+"="+JSON.stringify(t))}}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}));n.push(`code=${t}`);n.push(`version=${this.version}`);const i=e;let s="";switch(t){case ErrorCode$1.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case ErrorCode$1.CALL_EXCEPTION:case ErrorCode$1.INSUFFICIENT_FUNDS:case ErrorCode$1.MISSING_NEW:case ErrorCode$1.NONCE_EXPIRED:case ErrorCode$1.REPLACEMENT_UNDERPRICED:case ErrorCode$1.TRANSACTION_REPLACED:case ErrorCode$1.UNPREDICTABLE_GAS_LIMIT:s=t;break}if(s){e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"}if(n.length){e+=" ("+n.join(", ")+")"}const a=new Error(e);a.reason=i;a.code=t;Object.keys(r).forEach((function(e){a[e]=r[e]}));return a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Logger$1.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){if(!!e){return}this.throwError(t,r,n)}assertArgument(e,t,r,n){if(!!e){return}this.throwArgumentError(t,r,n)}checkNormalize(e){if(_normalizeError$1){this.throwError("platform missing String.prototype.normalize",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError$1})}}checkSafeUint53(e,t){if(typeof e!=="number"){return}if(t==null){t="value not safe"}if(e<0||e>=9007199254740991){this.throwError(t,Logger$1.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e})}if(e%1){this.throwError(t,Logger$1.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e})}}checkArgumentCount(e,t,r){if(r){r=": "+r}else{r=""}if(e<t){this.throwError("missing argument"+r,Logger$1.errors.MISSING_ARGUMENT,{count:e,expectedCount:t})}if(e>t){this.throwError("too many arguments"+r,Logger$1.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}}checkNew(e,t){if(e===Object||e==null){this.throwError("missing new",Logger$1.errors.MISSING_NEW,{name:t.name})}}checkAbstract(e,t){if(e===t){this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Logger$1.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"})}else if(e===Object||e==null){this.throwError("missing new",Logger$1.errors.MISSING_NEW,{name:t.name})}}static globalLogger(){if(!_globalLogger$1){_globalLogger$1=new Logger$1(version$Q)}return _globalLogger$1}static setCensorship(e,t){if(!e&&t){this.globalLogger().throwError("cannot permanently disable censorship",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}if(_permanentCensorErrors$1){if(!e){return}this.globalLogger().throwError("error censorship permanent",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors$1=!!e;_permanentCensorErrors$1=!!t}static setLogLevel(e){const t=LogLevels$1[e.toLowerCase()];if(t==null){Logger$1.globalLogger().warn("invalid log level - "+e);return}_logLevel$1=t}static from(e){return new Logger$1(e)}}Logger$1.errors=ErrorCode$1;Logger$1.levels=LogLevel$1;const lib_esm$G=Object.freeze({__proto__:null,get LogLevel(){return LogLevel$1},get ErrorCode(){return ErrorCode$1},Logger:Logger$1});const version$P="bytes/5.7.0";const logger$1r=new Logger$1(version$P);function isHexable$1(e){return!!e.toHexString}function addSlice$1(e){if(e.slice){return e}e.slice=function(){const t=Array.prototype.slice.call(arguments);return addSlice$1(new Uint8Array(Array.prototype.slice.apply(e,t)))};return e}function isBytesLike$1(e){return isHexString$1(e)&&!(e.length%2)||isBytes$1(e)}function isInteger$1(e){return typeof e==="number"&&e==e&&e%1===0}function isBytes$1(e){if(e==null){return false}if(e.constructor===Uint8Array){return true}if(typeof e==="string"){return false}if(!isInteger$1(e.length)||e.length<0){return false}for(let t=0;t<e.length;t++){const r=e[t];if(!isInteger$1(r)||r<0||r>=256){return false}}return true}function arrayify$2(e,t){if(!t){t={}}if(typeof e==="number"){logger$1r.checkSafeUint53(e,"invalid arrayify value");const t=[];while(e){t.unshift(e&255);e=parseInt(String(e/256))}if(t.length===0){t.push(0)}return addSlice$1(new Uint8Array(t))}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable$1(e)){e=e.toHexString()}if(isHexString$1(e)){let r=e.substring(2);if(r.length%2){if(t.hexPad==="left"){r="0"+r}else if(t.hexPad==="right"){r+="0"}else{logger$1r.throwArgumentError("hex data is odd-length","value",e)}}const n=[];for(let e=0;e<r.length;e+=2){n.push(parseInt(r.substring(e,e+2),16))}return addSlice$1(new Uint8Array(n))}if(isBytes$1(e)){return addSlice$1(new Uint8Array(e))}return logger$1r.throwArgumentError("invalid arrayify value","value",e)}function concat$4(e){const t=e.map((e=>arrayify$2(e)));const r=t.reduce(((e,t)=>e+t.length),0);const n=new Uint8Array(r);t.reduce(((e,t)=>{n.set(t,e);return e+t.length}),0);return addSlice$1(n)}function stripZeros$1(e){let t=arrayify$2(e);if(t.length===0){return t}let r=0;while(r<t.length&&t[r]===0){r++}if(r){t=t.slice(r)}return t}function zeroPad$1(e,t){e=arrayify$2(e);if(e.length>t){logger$1r.throwArgumentError("value out of range","value",arguments[0])}const r=new Uint8Array(t);r.set(e,t-e.length);return addSlice$1(r)}function isHexString$1(e,t){if(typeof e!=="string"||!e.match(/^0x[0-9A-Fa-f]*$/)){return false}if(t&&e.length!==2+2*t){return false}return true}const HexCharacters$1="0123456789abcdef";function hexlify$1(e,t){if(!t){t={}}if(typeof e==="number"){logger$1r.checkSafeUint53(e,"invalid hexlify value");let t="";while(e){t=HexCharacters$1[e&15]+t;e=Math.floor(e/16)}if(t.length){if(t.length%2){t="0"+t}return"0x"+t}return"0x00"}if(typeof e==="bigint"){e=e.toString(16);if(e.length%2){return"0x0"+e}return"0x"+e}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable$1(e)){return e.toHexString()}if(isHexString$1(e)){if(e.length%2){if(t.hexPad==="left"){e="0x0"+e.substring(2)}else if(t.hexPad==="right"){e+="0"}else{logger$1r.throwArgumentError("hex data is odd-length","value",e)}}return e.toLowerCase()}if(isBytes$1(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=HexCharacters$1[(n&240)>>4]+HexCharacters$1[n&15]}return t}return logger$1r.throwArgumentError("invalid hexlify value","value",e)}function hexDataLength$1(e){if(typeof e!=="string"){e=hexlify$1(e)}else if(!isHexString$1(e)||e.length%2){return null}return(e.length-2)/2}function hexDataSlice$1(e,t,r){if(typeof e!=="string"){e=hexlify$1(e)}else if(!isHexString$1(e)||e.length%2){logger$1r.throwArgumentError("invalid hexData","value",e)}t=2+2*t;if(r!=null){return"0x"+e.substring(t,2+2*r)}return"0x"+e.substring(t)}function hexConcat$1(e){let t="0x";e.forEach((e=>{t+=hexlify$1(e).substring(2)}));return t}function hexValue$1(e){const t=hexStripZeros$1(hexlify$1(e,{hexPad:"left"}));if(t==="0x"){return"0x0"}return t}function hexStripZeros$1(e){if(typeof e!=="string"){e=hexlify$1(e)}if(!isHexString$1(e)){logger$1r.throwArgumentError("invalid hex string","value",e)}e=e.substring(2);let t=0;while(t<e.length&&e[t]==="0"){t++}return"0x"+e.substring(t)}function hexZeroPad$1(e,t){if(typeof e!=="string"){e=hexlify$1(e)}else if(!isHexString$1(e)){logger$1r.throwArgumentError("invalid hex string","value",e)}if(e.length>2*t+2){logger$1r.throwArgumentError("value out of range","value",arguments[1])}while(e.length<2*t+2){e="0x0"+e.substring(2)}return e}function splitSignature$1(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike$1(e)){let r=arrayify$2(e);if(r.length===64){t.v=27+(r[32]>>7);r[32]&=127;t.r=hexlify$1(r.slice(0,32));t.s=hexlify$1(r.slice(32,64))}else if(r.length===65){t.r=hexlify$1(r.slice(0,32));t.s=hexlify$1(r.slice(32,64));t.v=r[64]}else{logger$1r.throwArgumentError("invalid signature string","signature",e)}if(t.v<27){if(t.v===0||t.v===1){t.v+=27}else{logger$1r.throwArgumentError("signature invalid v byte","signature",e)}}t.recoveryParam=1-t.v%2;if(t.recoveryParam){r[32]|=128}t._vs=hexlify$1(r.slice(32,64))}else{t.r=e.r;t.s=e.s;t.v=e.v;t.recoveryParam=e.recoveryParam;t._vs=e._vs;if(t._vs!=null){const r=zeroPad$1(arrayify$2(t._vs),32);t._vs=hexlify$1(r);const n=r[0]>=128?1:0;if(t.recoveryParam==null){t.recoveryParam=n}else if(t.recoveryParam!==n){logger$1r.throwArgumentError("signature recoveryParam mismatch _vs","signature",e)}r[0]&=127;const i=hexlify$1(r);if(t.s==null){t.s=i}else if(t.s!==i){logger$1r.throwArgumentError("signature v mismatch _vs","signature",e)}}if(t.recoveryParam==null){if(t.v==null){logger$1r.throwArgumentError("signature missing v and recoveryParam","signature",e)}else if(t.v===0||t.v===1){t.recoveryParam=t.v}else{t.recoveryParam=1-t.v%2}}else{if(t.v==null){t.v=27+t.recoveryParam}else{const r=t.v===0||t.v===1?t.v:1-t.v%2;if(t.recoveryParam!==r){logger$1r.throwArgumentError("signature recoveryParam mismatch v","signature",e)}}}if(t.r==null||!isHexString$1(t.r)){logger$1r.throwArgumentError("signature missing or invalid r","signature",e)}else{t.r=hexZeroPad$1(t.r,32)}if(t.s==null||!isHexString$1(t.s)){logger$1r.throwArgumentError("signature missing or invalid s","signature",e)}else{t.s=hexZeroPad$1(t.s,32)}const r=arrayify$2(t.s);if(r[0]>=128){logger$1r.throwArgumentError("signature s out of range","signature",e)}if(t.recoveryParam){r[0]|=128}const n=hexlify$1(r);if(t._vs){if(!isHexString$1(t._vs)){logger$1r.throwArgumentError("signature invalid _vs","signature",e)}t._vs=hexZeroPad$1(t._vs,32)}if(t._vs==null){t._vs=n}else if(t._vs!==n){logger$1r.throwArgumentError("signature _vs mismatch v and s","signature",e)}}t.yParityAndS=t._vs;t.compact=t.r+t.yParityAndS.substring(2);return t}function joinSignature$1(e){e=splitSignature$1(e);return hexlify$1(concat$4([e.r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}const lib_esm$F=Object.freeze({__proto__:null,isBytesLike:isBytesLike$1,isBytes:isBytes$1,arrayify:arrayify$2,concat:concat$4,stripZeros:stripZeros$1,zeroPad:zeroPad$1,isHexString:isHexString$1,hexlify:hexlify$1,hexDataLength:hexDataLength$1,hexDataSlice:hexDataSlice$1,hexConcat:hexConcat$1,hexValue:hexValue$1,hexStripZeros:hexStripZeros$1,hexZeroPad:hexZeroPad$1,splitSignature:splitSignature$1,joinSignature:joinSignature$1});const version$O="bignumber/5.7.0";var BN$1=bn$3.BN;const logger$1q=new Logger$1(version$O);const _constructorGuard$9={};const MAX_SAFE$1=9007199254740991;function isBigNumberish$1(e){return e!=null&&(BigNumber$2.isBigNumber(e)||typeof e==="number"&&e%1===0||typeof e==="string"&&!!e.match(/^-?[0-9]+$/)||isHexString$1(e)||typeof e==="bigint"||isBytes$1(e))}let _warnedToStringRadix$1=false;class BigNumber$2{constructor(e,t){if(e!==_constructorGuard$9){logger$1q.throwError("cannot call constructor directly; use BigNumber.from",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"})}this._hex=t;this._isBigNumber=true;Object.freeze(this)}fromTwos(e){return toBigNumber$1(toBN$1(this).fromTwos(e))}toTwos(e){return toBigNumber$1(toBN$1(this).toTwos(e))}abs(){if(this._hex[0]==="-"){return BigNumber$2.from(this._hex.substring(1))}return this}add(e){return toBigNumber$1(toBN$1(this).add(toBN$1(e)))}sub(e){return toBigNumber$1(toBN$1(this).sub(toBN$1(e)))}div(e){const t=BigNumber$2.from(e);if(t.isZero()){throwFault$3("division-by-zero","div")}return toBigNumber$1(toBN$1(this).div(toBN$1(e)))}mul(e){return toBigNumber$1(toBN$1(this).mul(toBN$1(e)))}mod(e){const t=toBN$1(e);if(t.isNeg()){throwFault$3("division-by-zero","mod")}return toBigNumber$1(toBN$1(this).umod(t))}pow(e){const t=toBN$1(e);if(t.isNeg()){throwFault$3("negative-power","pow")}return toBigNumber$1(toBN$1(this).pow(t))}and(e){const t=toBN$1(e);if(this.isNegative()||t.isNeg()){throwFault$3("unbound-bitwise-result","and")}return toBigNumber$1(toBN$1(this).and(t))}or(e){const t=toBN$1(e);if(this.isNegative()||t.isNeg()){throwFault$3("unbound-bitwise-result","or")}return toBigNumber$1(toBN$1(this).or(t))}xor(e){const t=toBN$1(e);if(this.isNegative()||t.isNeg()){throwFault$3("unbound-bitwise-result","xor")}return toBigNumber$1(toBN$1(this).xor(t))}mask(e){if(this.isNegative()||e<0){throwFault$3("negative-width","mask")}return toBigNumber$1(toBN$1(this).maskn(e))}shl(e){if(this.isNegative()||e<0){throwFault$3("negative-width","shl")}return toBigNumber$1(toBN$1(this).shln(e))}shr(e){if(this.isNegative()||e<0){throwFault$3("negative-width","shr")}return toBigNumber$1(toBN$1(this).shrn(e))}eq(e){return toBN$1(this).eq(toBN$1(e))}lt(e){return toBN$1(this).lt(toBN$1(e))}lte(e){return toBN$1(this).lte(toBN$1(e))}gt(e){return toBN$1(this).gt(toBN$1(e))}gte(e){return toBN$1(this).gte(toBN$1(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN$1(this).isZero()}toNumber(){try{return toBN$1(this).toNumber()}catch(e){throwFault$3("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return logger$1q.throwError("this platform does not support BigInt",Logger$1.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){if(arguments.length>0){if(arguments[0]===10){if(!_warnedToStringRadix$1){_warnedToStringRadix$1=true;logger$1q.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")}}else if(arguments[0]===16){logger$1q.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger$1.errors.UNEXPECTED_ARGUMENT,{})}else{logger$1q.throwError("BigNumber.toString does not accept parameters",Logger$1.errors.UNEXPECTED_ARGUMENT,{})}}return toBN$1(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber$2){return e}if(typeof e==="string"){if(e.match(/^-?0x[0-9a-f]+$/i)){return new BigNumber$2(_constructorGuard$9,toHex$4(e))}if(e.match(/^-?[0-9]+$/)){return new BigNumber$2(_constructorGuard$9,toHex$4(new BN$1(e)))}return logger$1q.throwArgumentError("invalid BigNumber string","value",e)}if(typeof e==="number"){if(e%1){throwFault$3("underflow","BigNumber.from",e)}if(e>=MAX_SAFE$1||e<=-MAX_SAFE$1){throwFault$3("overflow","BigNumber.from",e)}return BigNumber$2.from(String(e))}const t=e;if(typeof t==="bigint"){return BigNumber$2.from(t.toString())}if(isBytes$1(t)){return BigNumber$2.from(hexlify$1(t))}if(t){if(t.toHexString){const e=t.toHexString();if(typeof e==="string"){return BigNumber$2.from(e)}}else{let e=t._hex;if(e==null&&t.type==="BigNumber"){e=t.hex}if(typeof e==="string"){if(isHexString$1(e)||e[0]==="-"&&isHexString$1(e.substring(1))){return BigNumber$2.from(e)}}}}return logger$1q.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex$4(e){if(typeof e!=="string"){return toHex$4(e.toString(16))}if(e[0]==="-"){e=e.substring(1);if(e[0]==="-"){logger$1q.throwArgumentError("invalid hex","value",e)}e=toHex$4(e);if(e==="0x00"){return e}return"-"+e}if(e.substring(0,2)!=="0x"){e="0x"+e}if(e==="0x"){return"0x00"}if(e.length%2){e="0x0"+e.substring(2)}while(e.length>4&&e.substring(0,4)==="0x00"){e="0x"+e.substring(4)}return e}function toBigNumber$1(e){return BigNumber$2.from(toHex$4(e))}function toBN$1(e){const t=BigNumber$2.from(e).toHexString();if(t[0]==="-"){return new BN$1("-"+t.substring(3),16)}return new BN$1(t.substring(2),16)}function throwFault$3(e,t,r){const n={fault:e,operation:t};if(r!=null){n.value=r}return logger$1q.throwError(e,Logger$1.errors.NUMERIC_FAULT,n)}function _base36To16$1(e){return new BN$1(e,36).toString(16)}function _base16To36$1(e){return new BN$1(e,16).toString(36)}const logger$1p=new Logger$1(version$O);const _constructorGuard$8={};const Zero$5=BigNumber$2.from(0);const NegativeOne$5=BigNumber$2.from(-1);function throwFault$2(e,t,r,n){const i={fault:t,operation:r};if(n!==undefined){i.value=n}return logger$1p.throwError(e,Logger$1.errors.NUMERIC_FAULT,i)}let zeros$1="0";while(zeros$1.length<256){zeros$1+=zeros$1}function getMultiplier$1(e){if(typeof e!=="number"){try{e=BigNumber$2.from(e).toNumber()}catch(e){}}if(typeof e==="number"&&e>=0&&e<=256&&!(e%1)){return"1"+zeros$1.substring(0,e)}return logger$1p.throwArgumentError("invalid decimal size","decimals",e)}function formatFixed$1(e,t){if(t==null){t=0}const r=getMultiplier$1(t);e=BigNumber$2.from(e);const n=e.lt(Zero$5);if(n){e=e.mul(NegativeOne$5)}let i=e.mod(r).toString();while(i.length<r.length-1){i="0"+i}i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=e.div(r).toString();if(r.length===1){e=s}else{e=s+"."+i}if(n){e="-"+e}return e}function parseFixed$1(e,t){if(t==null){t=0}const r=getMultiplier$1(t);if(typeof e!=="string"||!e.match(/^-?[0-9.]+$/)){logger$1p.throwArgumentError("invalid decimal value","value",e)}const n=e.substring(0,1)==="-";if(n){e=e.substring(1)}if(e==="."){logger$1p.throwArgumentError("missing value","value",e)}const i=e.split(".");if(i.length>2){logger$1p.throwArgumentError("too many decimal points","value",e)}let s=i[0],a=i[1];if(!s){s="0"}if(!a){a="0"}while(a[a.length-1]==="0"){a=a.substring(0,a.length-1)}if(a.length>r.length-1){throwFault$2("fractional component exceeds decimals","underflow","parseFixed")}if(a===""){a="0"}while(a.length<r.length-1){a+="0"}const o=BigNumber$2.from(s);const f=BigNumber$2.from(a);let c=o.mul(r).add(f);if(n){c=c.mul(NegativeOne$5)}return c}class FixedFormat$1{constructor(e,t,r,n){if(e!==_constructorGuard$8){logger$1p.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.signed=t;this.width=r;this.decimals=n;this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n);this._multiplier=getMultiplier$1(n);Object.freeze(this)}static from(e){if(e instanceof FixedFormat$1){return e}if(typeof e==="number"){e=`fixed128x${e}`}let t=true;let r=128;let n=18;if(typeof e==="string"){if(e==="fixed");else if(e==="ufixed"){t=false}else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);if(!i){logger$1p.throwArgumentError("invalid fixed format","format",e)}t=i[1]!=="u";r=parseInt(i[2]);n=parseInt(i[3])}}else if(e){const i=(t,r,n)=>{if(e[t]==null){return n}if(typeof e[t]!==r){logger$1p.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t])}return e[t]};t=i("signed","boolean",t);r=i("width","number",r);n=i("decimals","number",n)}if(r%8){logger$1p.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r)}if(n>80){logger$1p.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n)}return new FixedFormat$1(_constructorGuard$8,t,r,n)}}class FixedNumber$1{constructor(e,t,r,n){if(e!==_constructorGuard$8){logger$1p.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.format=n;this._hex=t;this._value=r;this._isFixedNumber=true;Object.freeze(this)}_checkFormat(e){if(this.format.name!==e.format.name){logger$1p.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}}addUnsafe(e){this._checkFormat(e);const t=parseFixed$1(this._value,this.format.decimals);const r=parseFixed$1(e._value,e.format.decimals);return FixedNumber$1.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=parseFixed$1(this._value,this.format.decimals);const r=parseFixed$1(e._value,e.format.decimals);return FixedNumber$1.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=parseFixed$1(this._value,this.format.decimals);const r=parseFixed$1(e._value,e.format.decimals);return FixedNumber$1.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=parseFixed$1(this._value,this.format.decimals);const r=parseFixed$1(e._value,e.format.decimals);return FixedNumber$1.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");if(e.length===1){e.push("0")}let t=FixedNumber$1.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);if(this.isNegative()&&r){t=t.subUnsafe(ONE$1.toFormat(t.format))}return t}ceiling(){const e=this.toString().split(".");if(e.length===1){e.push("0")}let t=FixedNumber$1.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);if(!this.isNegative()&&r){t=t.addUnsafe(ONE$1.toFormat(t.format))}return t}round(e){if(e==null){e=0}const t=this.toString().split(".");if(t.length===1){t.push("0")}if(e<0||e>80||e%1){logger$1p.throwArgumentError("invalid decimal count","decimals",e)}if(t[1].length<=e){return this}const r=FixedNumber$1.from("1"+zeros$1.substring(0,e),this.format);const n=BUMP$1.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null){return this._hex}if(e%8){logger$1p.throwArgumentError("invalid byte width","width",e)}const t=BigNumber$2.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return hexZeroPad$1(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return FixedNumber$1.fromString(this._value,e)}static fromValue(e,t,r){if(r==null&&t!=null&&!isBigNumberish$1(t)){r=t;t=null}if(t==null){t=0}if(r==null){r="fixed"}return FixedNumber$1.fromString(formatFixed$1(e,t),FixedFormat$1.from(r))}static fromString(e,t){if(t==null){t="fixed"}const r=FixedFormat$1.from(t);const n=parseFixed$1(e,r.decimals);if(!r.signed&&n.lt(Zero$5)){throwFault$2("unsigned value cannot be negative","overflow","value",e)}let i=null;if(r.signed){i=n.toTwos(r.width).toHexString()}else{i=n.toHexString();i=hexZeroPad$1(i,r.width/8)}const s=formatFixed$1(n,r.decimals);return new FixedNumber$1(_constructorGuard$8,i,s,r)}static fromBytes(e,t){if(t==null){t="fixed"}const r=FixedFormat$1.from(t);if(arrayify$2(e).length>r.width/8){throw new Error("overflow")}let n=BigNumber$2.from(e);if(r.signed){n=n.fromTwos(r.width)}const i=n.toTwos((r.signed?0:1)+r.width).toHexString();const s=formatFixed$1(n,r.decimals);return new FixedNumber$1(_constructorGuard$8,i,s,r)}static from(e,t){if(typeof e==="string"){return FixedNumber$1.fromString(e,t)}if(isBytes$1(e)){return FixedNumber$1.fromBytes(e,t)}try{return FixedNumber$1.fromValue(e,0,t)}catch(e){if(e.code!==Logger$1.errors.INVALID_ARGUMENT){throw e}}return logger$1p.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const ONE$1=FixedNumber$1.from(1);const BUMP$1=FixedNumber$1.from("0.5");const version$N="properties/5.7.0";var __awaiter$x=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$1o=new Logger$1(version$N);function defineReadOnly$1(e,t,r){Object.defineProperty(e,t,{enumerable:true,value:r,writable:false})}function getStatic$1(e,t){for(let r=0;r<32;r++){if(e[t]){return e[t]}if(!e.prototype||typeof e.prototype!=="object"){break}e=Object.getPrototypeOf(e.prototype).constructor}return null}function resolveProperties$1(e){return __awaiter$x(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));const r=yield Promise.all(t);return r.reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}))}function checkProperties$1(e,t){if(!e||typeof e!=="object"){logger$1o.throwArgumentError("invalid object","object",e)}Object.keys(e).forEach((r=>{if(!t[r]){logger$1o.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}}))}function shallowCopy$1(e){const t={};for(const r in e){t[r]=e[r]}return t}const opaque$1={bigint:true,boolean:true,function:true,number:true,string:true};function _isFrozen$1(e){if(e===undefined||e===null||opaque$1[typeof e]){return true}if(Array.isArray(e)||typeof e==="object"){if(!Object.isFrozen(e)){return false}const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!_isFrozen$1(n)){return false}}return true}return logger$1o.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function _deepCopy$1(e){if(_isFrozen$1(e)){return e}if(Array.isArray(e)){return Object.freeze(e.map((e=>deepCopy$1(e))))}if(typeof e==="object"){const t={};for(const r in e){const n=e[r];if(n===undefined){continue}defineReadOnly$1(t,r,deepCopy$1(n))}return t}return logger$1o.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function deepCopy$1(e){return _deepCopy$1(e)}class Description$1{constructor(e){for(const t in e){this[t]=deepCopy$1(e[t])}}}const lib_esm$E=Object.freeze({__proto__:null,defineReadOnly:defineReadOnly$1,getStatic:getStatic$1,resolveProperties:resolveProperties$1,checkProperties:checkProperties$1,shallowCopy:shallowCopy$1,deepCopy:deepCopy$1,Description:Description$1});const version$M="abi/5.7.0";const logger$1n=new Logger$1(version$M);const _constructorGuard$7={};let ModifiersBytes$1={calldata:true,memory:true,storage:true};let ModifiersNest$1={calldata:true,memory:true};function checkModifier$1(e,t){if(e==="bytes"||e==="string"){if(ModifiersBytes$1[t]){return true}}else if(e==="address"){if(t==="payable"){return true}}else if(e.indexOf("[")>=0||e==="tuple"){if(ModifiersNest$1[t]){return true}}if(ModifiersBytes$1[t]||t==="payable"){logger$1n.throwArgumentError("invalid modifier","name",t)}return false}function parseParamType$1(e,t){let r=e;function n(t){logger$1n.throwArgumentError(`unexpected character at position ${t}`,"param",e)}e=e.replace(/\s/g," ");function i(e){let r={type:"",name:"",parent:e,state:{allowType:true}};if(t){r.indexed=false}return r}let s={type:"",name:"",state:{allowType:true}};let a=s;for(let r=0;r<e.length;r++){let s=e[r];switch(s){case"(":if(a.state.allowType&&a.type===""){a.type="tuple"}else if(!a.state.allowParams){n(r)}a.state.allowType=false;a.type=verifyType$1(a.type);a.components=[i(a)];a=a.components[0];break;case")":delete a.state;if(a.name==="indexed"){if(!t){n(r)}a.indexed=true;a.name=""}if(checkModifier$1(a.type,a.name)){a.name=""}a.type=verifyType$1(a.type);let e=a;a=a.parent;if(!a){n(r)}delete e.parent;a.state.allowParams=false;a.state.allowName=true;a.state.allowArray=true;break;case",":delete a.state;if(a.name==="indexed"){if(!t){n(r)}a.indexed=true;a.name=""}if(checkModifier$1(a.type,a.name)){a.name=""}a.type=verifyType$1(a.type);let o=i(a.parent);a.parent.components.push(o);delete a.parent;a=o;break;case" ":if(a.state.allowType){if(a.type!==""){a.type=verifyType$1(a.type);delete a.state.allowType;a.state.allowName=true;a.state.allowParams=true}}if(a.state.allowName){if(a.name!==""){if(a.name==="indexed"){if(!t){n(r)}if(a.indexed){n(r)}a.indexed=true;a.name=""}else if(checkModifier$1(a.type,a.name)){a.name=""}else{a.state.allowName=false}}}break;case"[":if(!a.state.allowArray){n(r)}a.type+=s;a.state.allowArray=false;a.state.allowName=false;a.state.readArray=true;break;case"]":if(!a.state.readArray){n(r)}a.type+=s;a.state.readArray=false;a.state.allowArray=true;a.state.allowName=true;break;default:if(a.state.allowType){a.type+=s;a.state.allowParams=true;a.state.allowArray=true}else if(a.state.allowName){a.name+=s;delete a.state.allowArray}else if(a.state.readArray){a.type+=s}else{n(r)}}}if(a.parent){logger$1n.throwArgumentError("unexpected eof","param",e)}delete s.state;if(a.name==="indexed"){if(!t){n(r.length-7)}if(a.indexed){n(r.length-7)}a.indexed=true;a.name=""}else if(checkModifier$1(a.type,a.name)){a.name=""}s.type=verifyType$1(s.type);return s}function populate$1(e,t){for(let r in t){defineReadOnly$1(e,r,t[r])}}const FormatTypes$1=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"});const paramTypeArray$1=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType$1{constructor(e,t){if(e!==_constructorGuard$7){logger$1n.throwError("use fromString",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"})}populate$1(this,t);let r=this.type.match(paramTypeArray$1);if(r){populate$1(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ParamType$1.fromObject({type:r[1],components:this.components}),baseType:"array"})}else{populate$1(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type})}this._isParamType=true;Object.freeze(this)}format(e){if(!e){e=FormatTypes$1.sighash}if(!FormatTypes$1[e]){logger$1n.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes$1.json){let t={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||undefined};if(typeof this.indexed==="boolean"){t.indexed=this.indexed}if(this.components){t.components=this.components.map((t=>JSON.parse(t.format(e))))}return JSON.stringify(t)}let t="";if(this.baseType==="array"){t+=this.arrayChildren.format(e);t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"}else{if(this.baseType==="tuple"){if(e!==FormatTypes$1.sighash){t+=this.type}t+="("+this.components.map((t=>t.format(e))).join(e===FormatTypes$1.full?", ":",")+")"}else{t+=this.type}}if(e!==FormatTypes$1.sighash){if(this.indexed===true){t+=" indexed"}if(e===FormatTypes$1.full&&this.name){t+=" "+this.name}}return t}static from(e,t){if(typeof e==="string"){return ParamType$1.fromString(e,t)}return ParamType$1.fromObject(e)}static fromObject(e){if(ParamType$1.isParamType(e)){return e}return new ParamType$1(_constructorGuard$7,{name:e.name||null,type:verifyType$1(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ParamType$1.fromObject):null})}static fromString(e,t){function r(e){return ParamType$1.fromObject({name:e.name,type:e.type,indexed:e.indexed,components:e.components})}return r(parseParamType$1(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function parseParams$1(e,t){return splitNesting$1(e).map((e=>ParamType$1.fromString(e,t)))}class Fragment$1{constructor(e,t){if(e!==_constructorGuard$7){logger$1n.throwError("use a static from method",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"})}populate$1(this,t);this._isFragment=true;Object.freeze(this)}static from(e){if(Fragment$1.isFragment(e)){return e}if(typeof e==="string"){return Fragment$1.fromString(e)}return Fragment$1.fromObject(e)}static fromObject(e){if(Fragment$1.isFragment(e)){return e}switch(e.type){case"function":return FunctionFragment$1.fromObject(e);case"event":return EventFragment$1.fromObject(e);case"constructor":return ConstructorFragment$1.fromObject(e);case"error":return ErrorFragment$1.fromObject(e);case"fallback":case"receive":return null}return logger$1n.throwArgumentError("invalid fragment object","value",e)}static fromString(e){e=e.replace(/\s/g," ");e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ");e=e.trim();if(e.split(" ")[0]==="event"){return EventFragment$1.fromString(e.substring(5).trim())}else if(e.split(" ")[0]==="function"){return FunctionFragment$1.fromString(e.substring(8).trim())}else if(e.split("(")[0].trim()==="constructor"){return ConstructorFragment$1.fromString(e.trim())}else if(e.split(" ")[0]==="error"){return ErrorFragment$1.fromString(e.substring(5).trim())}return logger$1n.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class EventFragment$1 extends Fragment$1{format(e){if(!e){e=FormatTypes$1.sighash}if(!FormatTypes$1[e]){logger$1n.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes$1.json){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes$1.sighash){t+="event "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes$1.full?", ":",")+") ";if(e!==FormatTypes$1.sighash){if(this.anonymous){t+="anonymous "}}return t.trim()}static from(e){if(typeof e==="string"){return EventFragment$1.fromString(e)}return EventFragment$1.fromObject(e)}static fromObject(e){if(EventFragment$1.isEventFragment(e)){return e}if(e.type!=="event"){logger$1n.throwArgumentError("invalid event object","value",e)}const t={name:verifyIdentifier$1(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ParamType$1.fromObject):[],type:"event"};return new EventFragment$1(_constructorGuard$7,t)}static fromString(e){let t=e.match(regexParen$1);if(!t){logger$1n.throwArgumentError("invalid event string","value",e)}let r=false;t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":r=true;break;case"":break;default:logger$1n.warn("unknown modifier: "+e)}}));return EventFragment$1.fromObject({name:t[1].trim(),anonymous:r,inputs:parseParams$1(t[2],true),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function parseGas$1(e,t){t.gas=null;let r=e.split("@");if(r.length!==1){if(r.length>2){logger$1n.throwArgumentError("invalid human-readable ABI signature","value",e)}if(!r[1].match(/^[0-9]+$/)){logger$1n.throwArgumentError("invalid human-readable ABI signature gas","value",e)}t.gas=BigNumber$2.from(r[1]);return r[0]}return e}function parseModifiers$1(e,t){t.constant=false;t.payable=false;t.stateMutability="nonpayable";e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=true;break;case"payable":t.payable=true;t.stateMutability="payable";break;case"nonpayable":t.payable=false;t.stateMutability="nonpayable";break;case"pure":t.constant=true;t.stateMutability="pure";break;case"view":t.constant=true;t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function verifyState$1(e){let t={constant:false,payable:true,stateMutability:"payable"};if(e.stateMutability!=null){t.stateMutability=e.stateMutability;t.constant=t.stateMutability==="view"||t.stateMutability==="pure";if(e.constant!=null){if(!!e.constant!==t.constant){logger$1n.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e)}}t.payable=t.stateMutability==="payable";if(e.payable!=null){if(!!e.payable!==t.payable){logger$1n.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)}}}else if(e.payable!=null){t.payable=!!e.payable;if(e.constant==null&&!t.payable&&e.type!=="constructor"){logger$1n.throwArgumentError("unable to determine stateMutability","value",e)}t.constant=!!e.constant;if(t.constant){t.stateMutability="view"}else{t.stateMutability=t.payable?"payable":"nonpayable"}if(t.payable&&t.constant){logger$1n.throwArgumentError("cannot have constant payable function","value",e)}}else if(e.constant!=null){t.constant=!!e.constant;t.payable=!t.constant;t.stateMutability=t.constant?"view":"payable"}else if(e.type!=="constructor"){logger$1n.throwArgumentError("unable to determine stateMutability","value",e)}return t}class ConstructorFragment$1 extends Fragment$1{format(e){if(!e){e=FormatTypes$1.sighash}if(!FormatTypes$1[e]){logger$1n.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes$1.json){return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}if(e===FormatTypes$1.sighash){logger$1n.throwError("cannot format a constructor for sighash",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"})}let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes$1.full?", ":",")+") ";if(this.stateMutability&&this.stateMutability!=="nonpayable"){t+=this.stateMutability+" "}return t.trim()}static from(e){if(typeof e==="string"){return ConstructorFragment$1.fromString(e)}return ConstructorFragment$1.fromObject(e)}static fromObject(e){if(ConstructorFragment$1.isConstructorFragment(e)){return e}if(e.type!=="constructor"){logger$1n.throwArgumentError("invalid constructor object","value",e)}let t=verifyState$1(e);if(t.constant){logger$1n.throwArgumentError("constructor cannot be constant","value",e)}const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ParamType$1.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$2.from(e.gas):null};return new ConstructorFragment$1(_constructorGuard$7,r)}static fromString(e){let t={type:"constructor"};e=parseGas$1(e,t);let r=e.match(regexParen$1);if(!r||r[1].trim()!=="constructor"){logger$1n.throwArgumentError("invalid constructor string","value",e)}t.inputs=parseParams$1(r[2].trim(),false);parseModifiers$1(r[3].trim(),t);return ConstructorFragment$1.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class FunctionFragment$1 extends ConstructorFragment$1{format(e){if(!e){e=FormatTypes$1.sighash}if(!FormatTypes$1[e]){logger$1n.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes$1.json){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes$1.sighash){t+="function "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes$1.full?", ":",")+") ";if(e!==FormatTypes$1.sighash){if(this.stateMutability){if(this.stateMutability!=="nonpayable"){t+=this.stateMutability+" "}}else if(this.constant){t+="view "}if(this.outputs&&this.outputs.length){t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "}if(this.gas!=null){t+="@"+this.gas.toString()+" "}}return t.trim()}static from(e){if(typeof e==="string"){return FunctionFragment$1.fromString(e)}return FunctionFragment$1.fromObject(e)}static fromObject(e){if(FunctionFragment$1.isFunctionFragment(e)){return e}if(e.type!=="function"){logger$1n.throwArgumentError("invalid function object","value",e)}let t=verifyState$1(e);const r={type:e.type,name:verifyIdentifier$1(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(ParamType$1.fromObject):[],outputs:e.outputs?e.outputs.map(ParamType$1.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$2.from(e.gas):null};return new FunctionFragment$1(_constructorGuard$7,r)}static fromString(e){let t={type:"function"};e=parseGas$1(e,t);let r=e.split(" returns ");if(r.length>2){logger$1n.throwArgumentError("invalid function string","value",e)}let n=r[0].match(regexParen$1);if(!n){logger$1n.throwArgumentError("invalid function signature","value",e)}t.name=n[1].trim();if(t.name){verifyIdentifier$1(t.name)}t.inputs=parseParams$1(n[2],false);parseModifiers$1(n[3].trim(),t);if(r.length>1){let n=r[1].match(regexParen$1);if(n[1].trim()!=""||n[3].trim()!=""){logger$1n.throwArgumentError("unexpected tokens","value",e)}t.outputs=parseParams$1(n[2],false)}else{t.outputs=[]}return FunctionFragment$1.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function checkForbidden$1(e){const t=e.format();if(t==="Error(string)"||t==="Panic(uint256)"){logger$1n.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e)}return e}class ErrorFragment$1 extends Fragment$1{format(e){if(!e){e=FormatTypes$1.sighash}if(!FormatTypes$1[e]){logger$1n.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes$1.json){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes$1.sighash){t+="error "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes$1.full?", ":",")+") ";return t.trim()}static from(e){if(typeof e==="string"){return ErrorFragment$1.fromString(e)}return ErrorFragment$1.fromObject(e)}static fromObject(e){if(ErrorFragment$1.isErrorFragment(e)){return e}if(e.type!=="error"){logger$1n.throwArgumentError("invalid error object","value",e)}const t={type:e.type,name:verifyIdentifier$1(e.name),inputs:e.inputs?e.inputs.map(ParamType$1.fromObject):[]};return checkForbidden$1(new ErrorFragment$1(_constructorGuard$7,t))}static fromString(e){let t={type:"error"};let r=e.match(regexParen$1);if(!r){logger$1n.throwArgumentError("invalid error signature","value",e)}t.name=r[1].trim();if(t.name){verifyIdentifier$1(t.name)}t.inputs=parseParams$1(r[2],false);return checkForbidden$1(ErrorFragment$1.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function verifyType$1(e){if(e.match(/^uint($|[^1-9])/)){e="uint256"+e.substring(4)}else if(e.match(/^int($|[^1-9])/)){e="int256"+e.substring(3)}return e}const regexIdentifier$1=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function verifyIdentifier$1(e){if(!e||!e.match(regexIdentifier$1)){logger$1n.throwArgumentError(`invalid identifier "${e}"`,"value",e)}return e}const regexParen$1=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function splitNesting$1(e){e=e.trim();let t=[];let r="";let n=0;for(let i=0;i<e.length;i++){let s=e[i];if(s===","&&n===0){t.push(r);r=""}else{r+=s;if(s==="("){n++}else if(s===")"){n--;if(n===-1){logger$1n.throwArgumentError("unbalanced parenthesis","value",e)}}}}if(r){t.push(r)}return t}const logger$1m=new Logger$1(version$M);function checkResultErrors$1(e){const t=[];const r=function(e,n){if(!Array.isArray(n)){return}for(let i in n){const s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};r([],e);return t}class Coder$1{constructor(e,t,r,n){this.name=e;this.type=t;this.localName=r;this.dynamic=n}_throwError(e,t){logger$1m.throwArgumentError(e,this.localName,t)}}class Writer$2{constructor(e){defineReadOnly$1(this,"wordSize",e||32);this._data=[];this._dataLength=0;this._padding=new Uint8Array(e)}get data(){return hexConcat$1(this._data)}get length(){return this._dataLength}_writeData(e){this._data.push(e);this._dataLength+=e.length;return e.length}appendWriter(e){return this._writeData(concat$4(e._data))}writeBytes(e){let t=arrayify$2(e);const r=t.length%this.wordSize;if(r){t=concat$4([t,this._padding.slice(r)])}return this._writeData(t)}_getValue(e){let t=arrayify$2(BigNumber$2.from(e));if(t.length>this.wordSize){logger$1m.throwError("value out-of-bounds",Logger$1.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length})}if(t.length%this.wordSize){t=concat$4([this._padding.slice(t.length%this.wordSize),t])}return t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;this._data.push(this._padding);this._dataLength+=this.wordSize;return t=>{this._data[e]=this._getValue(t)}}}class Reader$2{constructor(e,t,r,n){defineReadOnly$1(this,"_data",arrayify$2(e));defineReadOnly$1(this,"wordSize",t||32);defineReadOnly$1(this,"_coerceFunc",r);defineReadOnly$1(this,"allowLoose",n);this._offset=0}get data(){return hexlify$1(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");if(r&&parseInt(r[1])<=48){t=t.toNumber()}return t}coerce(e,t){if(this._coerceFunc){return this._coerceFunc(e,t)}return Reader$2.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;if(this._offset+n>this._data.length){if(this.allowLoose&&r&&this._offset+t<=this._data.length){n=t}else{logger$1m.throwError("data out-of-bounds",Logger$1.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})}}return this._data.slice(this._offset,this._offset+n)}subReader(e){return new Reader$2(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);this._offset+=r.length;return r.slice(0,e)}readValue(){return BigNumber$2.from(this.readBytes(this.wordSize))}}const global$1=typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout;var cachedClearTimeout=defaultClearTimeout;if(typeof global$1.setTimeout==="function"){cachedSetTimeout=setTimeout}if(typeof global$1.clearTimeout==="function"){cachedClearTimeout=clearTimeout}function runTimeout(e){if(cachedSetTimeout===setTimeout){return setTimeout(e,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(e,0)}try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout){return clearTimeout(e)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(e)}try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var e=runTimeout(cleanUpNextTick);draining=true;var t=queue.length;while(t){currentQueue=queue;queue=[];while(++queueIndex<t){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;t=queue.length}currentQueue=null;draining=false;runClearTimeout(e)}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}queue.push(new Item(e,t));if(queue.length===1&&!draining){runTimeout(drainQueue)}}function Item(e,t){this.fun=e;this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser";var platform="browser";var browser=true;var env={};var argv=[];var version$L="";var versions={};var release={};var config={};function noop$2(){}var on=noop$2;var addListener=noop$2;var once=noop$2;var off=noop$2;var removeListener=noop$2;var removeAllListeners=noop$2;var emit=noop$2;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{};var performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=performanceNow.call(performance$1)*.001;var r=Math.floor(t);var n=Math.floor(t%1*1e9);if(e){r=r-e[0];n=n-e[1];if(n<0){r--;n+=1e9}}return[r,n]}var startTime=new Date;function uptime(){var e=new Date;var t=e-startTime;return t/1e3}var browser$1={nextTick,title,browser,env,argv,version:version$L,versions,on,addListener,once,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform,release,config,uptime};var sha3$2=createCommonjsModule$2((function(e){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
(function(){var t="input is invalid type";var r="finalize already called";var n=typeof window==="object";var i=n?window:{};if(i.JS_SHA3_NO_WINDOW){n=false}var s=!n&&typeof self==="object";var a=!i.JS_SHA3_NO_NODE_JS&&typeof browser$1==="object"&&browser$1.versions&&browser$1.versions.node;if(a){i=commonjsGlobal}else if(s){i=self}var o=!i.JS_SHA3_NO_COMMON_JS&&"object"==="object"&&e.exports;var f=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var c="0123456789abcdef".split("");var u=[31,7936,2031616,520093696];var l=[4,1024,262144,67108864];var h=[1,256,65536,16777216];var d=[6,1536,393216,100663296];var p=[0,8,16,24];var y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var m=[224,256,384,512];var g=[128,256];var b=["hex","buffer","arrayBuffer","array","digest"];var v={128:168,256:136};if(i.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(f&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return typeof e==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var w=function(e,t,r){return function(n){return new U(e,t,e).update(n)[r]()}};var A=function(e,t,r){return function(n,i){return new U(e,t,i).update(n)[r]()}};var E=function(e,t,r){return function(t,n,i,s){return I["cshake"+e].update(t,n,i,s)[r]()}};var _=function(e,t,r){return function(t,n,i,s){return I["kmac"+e].update(t,n,i,s)[r]()}};var S=function(e,t,r,n){for(var i=0;i<b.length;++i){var s=b[i];e[s]=t(r,n,s)}return e};var $=function(e,t){var r=w(e,t,"hex");r.create=function(){return new U(e,t,e)};r.update=function(e){return r.create().update(e)};return S(r,w,e,t)};var T=function(e,t){var r=A(e,t,"hex");r.create=function(r){return new U(e,t,r)};r.update=function(e,t){return r.create(t).update(e)};return S(r,A,e,t)};var C=function(e,t){var r=v[e];var n=E(e,t,"hex");n.create=function(n,i,s){if(!i&&!s){return I["shake"+e].create(n)}else{return new U(e,t,n).bytepad([i,s],r)}};n.update=function(e,t,r,i){return n.create(t,r,i).update(e)};return S(n,E,e,t)};var P=function(e,t){var r=v[e];var n=_(e,t,"hex");n.create=function(n,i,s){return new L(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)};n.update=function(e,t,r,i){return n.create(e,r,i).update(t)};return S(n,_,e,t)};var x=[{name:"keccak",padding:h,bits:m,createMethod:$},{name:"sha3",padding:d,bits:m,createMethod:$},{name:"shake",padding:u,bits:g,createMethod:T},{name:"cshake",padding:l,bits:g,createMethod:C},{name:"kmac",padding:l,bits:g,createMethod:P}];var I={},k=[];for(var N=0;N<x.length;++N){var R=x[N];var M=R.bits;for(var O=0;O<M.length;++O){var B=R.name+"_"+M[O];k.push(B);I[B]=R.createMethod(M[O],R.padding);if(R.name!=="sha3"){var D=R.name+M[O];k.push(D);I[D]=I[B]}}}function U(e,t,r){this.blocks=[];this.s=[];this.padding=t;this.outputBits=r;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(e<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=r>>5;this.extraBytes=(r&31)>>3;for(var n=0;n<50;++n){this.s[n]=0}}U.prototype.update=function(e){if(this.finalized){throw new Error(r)}var n,i=typeof e;if(i!=="string"){if(i==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}n=true}var s=this.blocks,a=this.byteCount,o=e.length,c=this.blockCount,u=0,l=this.s,h,d;while(u<o){if(this.reset){this.reset=false;s[0]=this.block;for(h=1;h<c+1;++h){s[h]=0}}if(n){for(h=this.start;u<o&&h<a;++u){s[h>>2]|=e[u]<<p[h++&3]}}else{for(h=this.start;u<o&&h<a;++u){d=e.charCodeAt(u);if(d<128){s[h>>2]|=d<<p[h++&3]}else if(d<2048){s[h>>2]|=(192|d>>6)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else if(d<55296||d>=57344){s[h>>2]|=(224|d>>12)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else{d=65536+((d&1023)<<10|e.charCodeAt(++u)&1023);s[h>>2]|=(240|d>>18)<<p[h++&3];s[h>>2]|=(128|d>>12&63)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}}}this.lastByteIndex=h;if(h>=a){this.start=h-a;this.block=s[c];for(h=0;h<c;++h){l[h]^=s[h]}F(l);this.reset=true}else{this.start=h}}return this};U.prototype.encode=function(e,t){var r=e&255,n=1;var i=[r];e=e>>8;r=e&255;while(r>0){i.unshift(r);e=e>>8;r=e&255;++n}if(t){i.push(n)}else{i.unshift(n)}this.update(i);return i.length};U.prototype.encodeString=function(e){var r,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}r=true}var i=0,s=e.length;if(r){i=s}else{for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128){i+=1}else if(o<2048){i+=2}else if(o<55296||o>=57344){i+=3}else{o=65536+((o&1023)<<10|e.charCodeAt(++a)&1023);i+=4}}}i+=this.encode(i*8);this.update(e);return i};U.prototype.bytepad=function(e,t){var r=this.encode(t);for(var n=0;n<e.length;++n){r+=this.encodeString(e[n])}var i=t-r%t;var s=[];s.length=i;this.update(s);return this};U.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;e[t>>2]|=this.padding[t&3];if(this.lastByteIndex===this.byteCount){e[0]=e[r];for(t=1;t<r+1;++t){e[t]=0}}e[r-1]|=2147483648;for(t=0;t<r;++t){n[t]^=e[t]}F(n)};U.prototype.toString=U.prototype.hex=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a="",o;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=t[i];a+=c[o>>4&15]+c[o&15]+c[o>>12&15]+c[o>>8&15]+c[o>>20&15]+c[o>>16&15]+c[o>>28&15]+c[o>>24&15]}if(s%e===0){F(t);i=0}}if(n){o=t[i];a+=c[o>>4&15]+c[o&15];if(n>1){a+=c[o>>12&15]+c[o>>8&15]}if(n>2){a+=c[o>>20&15]+c[o>>16&15]}}return a};U.prototype.arrayBuffer=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=this.outputBits>>3;var o;if(n){o=new ArrayBuffer(r+1<<2)}else{o=new ArrayBuffer(a)}var f=new Uint32Array(o);while(s<r){for(i=0;i<e&&s<r;++i,++s){f[s]=t[i]}if(s%e===0){F(t)}}if(n){f[i]=t[i];o=o.slice(0,a)}return o};U.prototype.buffer=U.prototype.arrayBuffer;U.prototype.digest=U.prototype.array=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=[],o,f;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=s<<2;f=t[i];a[o]=f&255;a[o+1]=f>>8&255;a[o+2]=f>>16&255;a[o+3]=f>>24&255}if(s%e===0){F(t)}}if(n){o=s<<2;f=t[i];a[o]=f&255;if(n>1){a[o+1]=f>>8&255}if(n>2){a[o+2]=f>>16&255}}return a};function L(e,t,r){U.call(this,e,t,r)}L.prototype=new U;L.prototype.finalize=function(){this.encode(this.outputBits,true);return U.prototype.finalize.call(this)};var F=function(e){var t,r,n,i,s,a,o,f,c,u,l,h,d,p,m,g,b,v,w,A,E,_,S,$,T,C,P,x,I,k,N,R,M,O,B,D,U,L,F,j,H,K,G,V,z,W,X,Y,J,q,Q,Z,ee,te,re,ne,ie,se,ae,oe,fe,ce,ue;for(n=0;n<48;n+=2){i=e[0]^e[10]^e[20]^e[30]^e[40];s=e[1]^e[11]^e[21]^e[31]^e[41];a=e[2]^e[12]^e[22]^e[32]^e[42];o=e[3]^e[13]^e[23]^e[33]^e[43];f=e[4]^e[14]^e[24]^e[34]^e[44];c=e[5]^e[15]^e[25]^e[35]^e[45];u=e[6]^e[16]^e[26]^e[36]^e[46];l=e[7]^e[17]^e[27]^e[37]^e[47];h=e[8]^e[18]^e[28]^e[38]^e[48];d=e[9]^e[19]^e[29]^e[39]^e[49];t=h^(a<<1|o>>>31);r=d^(o<<1|a>>>31);e[0]^=t;e[1]^=r;e[10]^=t;e[11]^=r;e[20]^=t;e[21]^=r;e[30]^=t;e[31]^=r;e[40]^=t;e[41]^=r;t=i^(f<<1|c>>>31);r=s^(c<<1|f>>>31);e[2]^=t;e[3]^=r;e[12]^=t;e[13]^=r;e[22]^=t;e[23]^=r;e[32]^=t;e[33]^=r;e[42]^=t;e[43]^=r;t=a^(u<<1|l>>>31);r=o^(l<<1|u>>>31);e[4]^=t;e[5]^=r;e[14]^=t;e[15]^=r;e[24]^=t;e[25]^=r;e[34]^=t;e[35]^=r;e[44]^=t;e[45]^=r;t=f^(h<<1|d>>>31);r=c^(d<<1|h>>>31);e[6]^=t;e[7]^=r;e[16]^=t;e[17]^=r;e[26]^=t;e[27]^=r;e[36]^=t;e[37]^=r;e[46]^=t;e[47]^=r;t=u^(i<<1|s>>>31);r=l^(s<<1|i>>>31);e[8]^=t;e[9]^=r;e[18]^=t;e[19]^=r;e[28]^=t;e[29]^=r;e[38]^=t;e[39]^=r;e[48]^=t;e[49]^=r;p=e[0];m=e[1];W=e[11]<<4|e[10]>>>28;X=e[10]<<4|e[11]>>>28;x=e[20]<<3|e[21]>>>29;I=e[21]<<3|e[20]>>>29;oe=e[31]<<9|e[30]>>>23;fe=e[30]<<9|e[31]>>>23;K=e[40]<<18|e[41]>>>14;G=e[41]<<18|e[40]>>>14;O=e[2]<<1|e[3]>>>31;B=e[3]<<1|e[2]>>>31;g=e[13]<<12|e[12]>>>20;b=e[12]<<12|e[13]>>>20;Y=e[22]<<10|e[23]>>>22;J=e[23]<<10|e[22]>>>22;k=e[33]<<13|e[32]>>>19;N=e[32]<<13|e[33]>>>19;ce=e[42]<<2|e[43]>>>30;ue=e[43]<<2|e[42]>>>30;te=e[5]<<30|e[4]>>>2;re=e[4]<<30|e[5]>>>2;D=e[14]<<6|e[15]>>>26;U=e[15]<<6|e[14]>>>26;v=e[25]<<11|e[24]>>>21;w=e[24]<<11|e[25]>>>21;q=e[34]<<15|e[35]>>>17;Q=e[35]<<15|e[34]>>>17;R=e[45]<<29|e[44]>>>3;M=e[44]<<29|e[45]>>>3;$=e[6]<<28|e[7]>>>4;T=e[7]<<28|e[6]>>>4;ne=e[17]<<23|e[16]>>>9;ie=e[16]<<23|e[17]>>>9;L=e[26]<<25|e[27]>>>7;F=e[27]<<25|e[26]>>>7;A=e[36]<<21|e[37]>>>11;E=e[37]<<21|e[36]>>>11;Z=e[47]<<24|e[46]>>>8;ee=e[46]<<24|e[47]>>>8;V=e[8]<<27|e[9]>>>5;z=e[9]<<27|e[8]>>>5;C=e[18]<<20|e[19]>>>12;P=e[19]<<20|e[18]>>>12;se=e[29]<<7|e[28]>>>25;ae=e[28]<<7|e[29]>>>25;j=e[38]<<8|e[39]>>>24;H=e[39]<<8|e[38]>>>24;_=e[48]<<14|e[49]>>>18;S=e[49]<<14|e[48]>>>18;e[0]=p^~g&v;e[1]=m^~b&w;e[10]=$^~C&x;e[11]=T^~P&I;e[20]=O^~D&L;e[21]=B^~U&F;e[30]=V^~W&Y;e[31]=z^~X&J;e[40]=te^~ne&se;e[41]=re^~ie&ae;e[2]=g^~v&A;e[3]=b^~w&E;e[12]=C^~x&k;e[13]=P^~I&N;e[22]=D^~L&j;e[23]=U^~F&H;e[32]=W^~Y&q;e[33]=X^~J&Q;e[42]=ne^~se&oe;e[43]=ie^~ae&fe;e[4]=v^~A&_;e[5]=w^~E&S;e[14]=x^~k&R;e[15]=I^~N&M;e[24]=L^~j&K;e[25]=F^~H&G;e[34]=Y^~q&Z;e[35]=J^~Q&ee;e[44]=se^~oe&ce;e[45]=ae^~fe&ue;e[6]=A^~_&p;e[7]=E^~S&m;e[16]=k^~R&$;e[17]=N^~M&T;e[26]=j^~K&O;e[27]=H^~G&B;e[36]=q^~Z&V;e[37]=Q^~ee&z;e[46]=oe^~ce&te;e[47]=fe^~ue&re;e[8]=_^~p&g;e[9]=S^~m&b;e[18]=R^~$&C;e[19]=M^~T&P;e[28]=K^~O&D;e[29]=G^~B&U;e[38]=Z^~V&W;e[39]=ee^~z&X;e[48]=ce^~te&ne;e[49]=ue^~re&ie;e[0]^=y[n];e[1]^=y[n+1]}};if(o){e.exports=I}else{for(N=0;N<k.length;++N){i[k[N]]=I[k[N]]}}})()}));function keccak256$3(e){return"0x"+sha3$2.keccak_256(arrayify$2(e))}const lib_esm$D=Object.freeze({__proto__:null,keccak256:keccak256$3});const version$K="rlp/5.7.0";const logger$1l=new Logger$1(version$K);function arrayifyInteger$1(e){const t=[];while(e){t.unshift(e&255);e>>=8}return t}function unarrayifyInteger$1(e,t,r){let n=0;for(let i=0;i<r;i++){n=n*256+e[t+i]}return n}function _encode$1(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){t=t.concat(_encode$1(e))}));if(t.length<=55){t.unshift(192+t.length);return t}const r=arrayifyInteger$1(t.length);r.unshift(247+r.length);return r.concat(t)}if(!isBytesLike$1(e)){logger$1l.throwArgumentError("RLP object must be BytesLike","object",e)}const t=Array.prototype.slice.call(arrayify$2(e));if(t.length===1&&t[0]<=127){return t}else if(t.length<=55){t.unshift(128+t.length);return t}const r=arrayifyInteger$1(t.length);r.unshift(183+r.length);return r.concat(t)}function encode$b(e){return hexlify$1(_encode$1(e))}function _decodeChildren$1(e,t,r,n){const i=[];while(r<t+1+n){const s=_decode$1(e,r);i.push(s.result);r+=s.consumed;if(r>t+1+n){logger$1l.throwError("child data too short",Logger$1.errors.BUFFER_OVERRUN,{})}}return{consumed:1+n,result:i}}function _decode$1(e,t){if(e.length===0){logger$1l.throwError("data too short",Logger$1.errors.BUFFER_OVERRUN,{})}if(e[t]>=248){const r=e[t]-247;if(t+1+r>e.length){logger$1l.throwError("data short segment too short",Logger$1.errors.BUFFER_OVERRUN,{})}const n=unarrayifyInteger$1(e,t+1,r);if(t+1+r+n>e.length){logger$1l.throwError("data long segment too short",Logger$1.errors.BUFFER_OVERRUN,{})}return _decodeChildren$1(e,t,t+1+r,r+n)}else if(e[t]>=192){const r=e[t]-192;if(t+1+r>e.length){logger$1l.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{})}return _decodeChildren$1(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;if(t+1+r>e.length){logger$1l.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{})}const n=unarrayifyInteger$1(e,t+1,r);if(t+1+r+n>e.length){logger$1l.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{})}const i=hexlify$1(e.slice(t+1+r,t+1+r+n));return{consumed:1+r+n,result:i}}else if(e[t]>=128){const r=e[t]-128;if(t+1+r>e.length){logger$1l.throwError("data too short",Logger$1.errors.BUFFER_OVERRUN,{})}const n=hexlify$1(e.slice(t+1,t+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:hexlify$1(e[t])}}function decode$a(e){const t=arrayify$2(e);const r=_decode$1(t,0);if(r.consumed!==t.length){logger$1l.throwArgumentError("invalid rlp data","data",e)}return r.result}const lib_esm$C=Object.freeze({__proto__:null,encode:encode$b,decode:decode$a});const version$J="address/5.7.0";const logger$1k=new Logger$1(version$J);function getChecksumAddress$1(e){if(!isHexString$1(e,20)){logger$1k.throwArgumentError("invalid address","address",e)}e=e.toLowerCase();const t=e.substring(2).split("");const r=new Uint8Array(40);for(let e=0;e<40;e++){r[e]=t[e].charCodeAt(0)}const n=arrayify$2(keccak256$3(r));for(let e=0;e<40;e+=2){if(n[e>>1]>>4>=8){t[e]=t[e].toUpperCase()}if((n[e>>1]&15)>=8){t[e+1]=t[e+1].toUpperCase()}}return"0x"+t.join("")}const MAX_SAFE_INTEGER$1=9007199254740991;function log10$1(e){if(Math.log10){return Math.log10(e)}return Math.log(e)/Math.LN10}const ibanLookup$1={};for(let e=0;e<10;e++){ibanLookup$1[String(e)]=String(e)}for(let e=0;e<26;e++){ibanLookup$1[String.fromCharCode(65+e)]=String(10+e)}const safeDigits$1=Math.floor(log10$1(MAX_SAFE_INTEGER$1));function ibanChecksum$1(e){e=e.toUpperCase();e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>ibanLookup$1[e])).join("");while(t.length>=safeDigits$1){let e=t.substring(0,safeDigits$1);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2){r="0"+r}return r}function getAddress$1(e){let t=null;if(typeof e!=="string"){logger$1k.throwArgumentError("invalid address","address",e)}if(e.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(e.substring(0,2)!=="0x"){e="0x"+e}t=getChecksumAddress$1(e);if(e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e){logger$1k.throwArgumentError("bad address checksum","address",e)}}else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(e.substring(2,4)!==ibanChecksum$1(e)){logger$1k.throwArgumentError("bad icap checksum","address",e)}t=_base36To16$1(e.substring(4));while(t.length<40){t="0"+t}t=getChecksumAddress$1("0x"+t)}else{logger$1k.throwArgumentError("invalid address","address",e)}return t}function isAddress$1(e){try{getAddress$1(e);return true}catch(e){}return false}function getIcapAddress$1(e){let t=_base16To36$1(getAddress$1(e).substring(2)).toUpperCase();while(t.length<30){t="0"+t}return"XE"+ibanChecksum$1("XE00"+t)+t}function getContractAddress$1(e){let t=null;try{t=getAddress$1(e.from)}catch(t){logger$1k.throwArgumentError("missing from address","transaction",e)}const r=stripZeros$1(arrayify$2(BigNumber$2.from(e.nonce).toHexString()));return getAddress$1(hexDataSlice$1(keccak256$3(encode$b([t,r])),12))}function getCreate2Address$1(e,t,r){if(hexDataLength$1(t)!==32){logger$1k.throwArgumentError("salt must be 32 bytes","salt",t)}if(hexDataLength$1(r)!==32){logger$1k.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r)}return getAddress$1(hexDataSlice$1(keccak256$3(concat$4(["0xff",getAddress$1(e),t,r])),12))}const lib_esm$B=Object.freeze({__proto__:null,getAddress:getAddress$1,isAddress:isAddress$1,getIcapAddress:getIcapAddress$1,getContractAddress:getContractAddress$1,getCreate2Address:getCreate2Address$1});class AddressCoder$1 extends Coder$1{constructor(e){super("address","address",e,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=getAddress$1(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return getAddress$1(hexZeroPad$1(e.readValue().toHexString(),20))}}class AnonymousCoder$1 extends Coder$1{constructor(e){super(e.name,e.type,undefined,e.dynamic);this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const logger$1j=new Logger$1(version$M);function pack$3(e,t,r){let n=null;if(Array.isArray(r)){n=r}else if(r&&typeof r==="object"){let e={};n=t.map((t=>{const n=t.localName;if(!n){logger$1j.throwError("cannot encode object for signature with missing names",Logger$1.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r})}if(e[n]){logger$1j.throwError("cannot encode object for signature with duplicate names",Logger$1.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r})}e[n]=true;return r[n]}))}else{logger$1j.throwArgumentError("invalid tuple value","tuple",r)}if(t.length!==n.length){logger$1j.throwArgumentError("types/value length mismatch","tuple",r)}let i=new Writer$2(e.wordSize);let s=new Writer$2(e.wordSize);let a=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push((e=>{n(e+t)}))}else{e.encode(i,r)}}));a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);o+=e.appendWriter(s);return o}function unpack$1(e,t){let r=[];let n=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readValue();let s=n.subReader(r.toNumber());try{i=t.decode(s)}catch(e){if(e.code===Logger$1.errors.BUFFER_OVERRUN){throw e}i=e;i.baseType=t.name;i.name=t.localName;i.type=t.type}}else{try{i=t.decode(e)}catch(e){if(e.code===Logger$1.errors.BUFFER_OVERRUN){throw e}i=e;i.baseType=t.name;i.name=t.localName;i.type=t.type}}if(i!=undefined){r.push(i)}}));const i=t.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});t.forEach(((e,t)=>{let n=e.localName;if(!n||i[n]!==1){return}if(n==="length"){n="_length"}if(r[n]!=null){return}const s=r[t];if(s instanceof Error){Object.defineProperty(r,n,{enumerable:true,get:()=>{throw s}})}else{r[n]=s}}));for(let e=0;e<r.length;e++){const t=r[e];if(t instanceof Error){Object.defineProperty(r,e,{enumerable:true,get:()=>{throw t}})}}return Object.freeze(r)}class ArrayCoder$1 extends Coder$1{constructor(e,t,r){const n=e.type+"["+(t>=0?t:"")+"]";const i=t===-1||e.dynamic;super("array",n,r,i);this.coder=e;this.length=t}defaultValue(){const e=this.coder.defaultValue();const t=[];for(let r=0;r<this.length;r++){t.push(e)}return t}encode(e,t){if(!Array.isArray(t)){this._throwError("expected array value",t)}let r=this.length;if(r===-1){r=t.length;e.writeValue(t.length)}logger$1j.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++){n.push(this.coder)}return pack$3(e,n,t)}decode(e){let t=this.length;if(t===-1){t=e.readValue().toNumber();if(t*32>e._data.length){logger$1j.throwError("insufficient data length",Logger$1.errors.BUFFER_OVERRUN,{length:e._data.length,count:t})}}let r=[];for(let e=0;e<t;e++){r.push(new AnonymousCoder$1(this.coder))}return e.coerce(this.name,unpack$1(e,r))}}class BooleanCoder$1 extends Coder$1{constructor(e){super("bool","bool",e,false)}defaultValue(){return false}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class DynamicBytesCoder$1 extends Coder$1{constructor(e,t){super(e,e,t,true)}defaultValue(){return"0x"}encode(e,t){t=arrayify$2(t);let r=e.writeValue(t.length);r+=e.writeBytes(t);return r}decode(e){return e.readBytes(e.readValue().toNumber(),true)}}class BytesCoder$1 extends DynamicBytesCoder$1{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,hexlify$1(super.decode(e)))}}class FixedBytesCoder$1 extends Coder$1{constructor(e,t){let r="bytes"+String(e);super(r,r,t,false);this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=arrayify$2(t);if(r.length!==this.size){this._throwError("incorrect data length",t)}return e.writeBytes(r)}decode(e){return e.coerce(this.name,hexlify$1(e.readBytes(this.size)))}}class NullCoder$1 extends Coder$1{constructor(e){super("null","",e,false)}defaultValue(){return null}encode(e,t){if(t!=null){this._throwError("not null",t)}return e.writeBytes([])}decode(e){e.readBytes(0);return e.coerce(this.name,null)}}const AddressZero$1="0x0000000000000000000000000000000000000000";const NegativeOne$4=BigNumber$2.from(-1);const Zero$4=BigNumber$2.from(0);const One$3=BigNumber$2.from(1);const Two$1=BigNumber$2.from(2);const WeiPerEther$1=BigNumber$2.from("1000000000000000000");const MaxUint256$3=BigNumber$2.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const MinInt256$1=BigNumber$2.from("-0x8000000000000000000000000000000000000000000000000000000000000000");const MaxInt256$1=BigNumber$2.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const HashZero$1="0x0000000000000000000000000000000000000000000000000000000000000000";const EtherSymbol$1="Ξ";const index$7=Object.freeze({__proto__:null,AddressZero:AddressZero$1,NegativeOne:NegativeOne$4,Zero:Zero$4,One:One$3,Two:Two$1,WeiPerEther:WeiPerEther$1,MaxUint256:MaxUint256$3,MinInt256:MinInt256$1,MaxInt256:MaxInt256$1,HashZero:HashZero$1,EtherSymbol:EtherSymbol$1});class NumberCoder$1 extends Coder$1{constructor(e,t,r){const n=(t?"int":"uint")+e*8;super(n,n,r,false);this.size=e;this.signed=t}defaultValue(){return 0}encode(e,t){let r=BigNumber$2.from(t);let n=MaxUint256$3.mask(e.wordSize*8);if(this.signed){let e=n.mask(this.size*8-1);if(r.gt(e)||r.lt(e.add(One$3).mul(NegativeOne$4))){this._throwError("value out-of-bounds",t)}}else if(r.lt(Zero$4)||r.gt(n.mask(this.size*8))){this._throwError("value out-of-bounds",t)}r=r.toTwos(this.size*8).mask(this.size*8);if(this.signed){r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)}return e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);if(this.signed){t=t.fromTwos(this.size*8)}return e.coerce(this.name,t)}}const version$I="strings/5.7.0";const logger$1i=new Logger$1(version$I);var UnicodeNormalizationForm$1;(function(e){e["current"]="";e["NFC"]="NFC";e["NFD"]="NFD";e["NFKC"]="NFKC";e["NFKD"]="NFKD"})(UnicodeNormalizationForm$1||(UnicodeNormalizationForm$1={}));var Utf8ErrorReason$1;(function(e){e["UNEXPECTED_CONTINUE"]="unexpected continuation byte";e["BAD_PREFIX"]="bad codepoint prefix";e["OVERRUN"]="string overrun";e["MISSING_CONTINUE"]="missing continuation byte";e["OUT_OF_RANGE"]="out of UTF-8 range";e["UTF16_SURROGATE"]="UTF-16 surrogate";e["OVERLONG"]="overlong representation"})(Utf8ErrorReason$1||(Utf8ErrorReason$1={}));function errorFunc$1(e,t,r,n,i){return logger$1i.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function ignoreFunc$1(e,t,r,n,i){if(e===Utf8ErrorReason$1.BAD_PREFIX||e===Utf8ErrorReason$1.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length;n++){if(r[n]>>6!==2){break}e++}return e}if(e===Utf8ErrorReason$1.OVERRUN){return r.length-t-1}return 0}function replaceFunc$1(e,t,r,n,i){if(e===Utf8ErrorReason$1.OVERLONG){n.push(i);return 0}n.push(65533);return ignoreFunc$1(e,t,r)}const Utf8ErrorFuncs$1=Object.freeze({error:errorFunc$1,ignore:ignoreFunc$1,replace:replaceFunc$1});function getUtf8CodePoints$1(e,t){if(t==null){t=Utf8ErrorFuncs$1.error}e=arrayify$2(e);const r=[];let n=0;while(n<e.length){const i=e[n++];if(i>>7===0){r.push(i);continue}let s=null;let a=null;if((i&224)===192){s=1;a=127}else if((i&240)===224){s=2;a=2047}else if((i&248)===240){s=3;a=65535}else{if((i&192)===128){n+=t(Utf8ErrorReason$1.UNEXPECTED_CONTINUE,n-1,e,r)}else{n+=t(Utf8ErrorReason$1.BAD_PREFIX,n-1,e,r)}continue}if(n-1+s>=e.length){n+=t(Utf8ErrorReason$1.OVERRUN,n-1,e,r);continue}let o=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[n];if((i&192)!=128){n+=t(Utf8ErrorReason$1.MISSING_CONTINUE,n,e,r);o=null;break}o=o<<6|i&63;n++}if(o===null){continue}if(o>1114111){n+=t(Utf8ErrorReason$1.OUT_OF_RANGE,n-1-s,e,r,o);continue}if(o>=55296&&o<=57343){n+=t(Utf8ErrorReason$1.UTF16_SURROGATE,n-1-s,e,r,o);continue}if(o<=a){n+=t(Utf8ErrorReason$1.OVERLONG,n-1-s,e,r,o);continue}r.push(o)}return r}function toUtf8Bytes$1(e,t=UnicodeNormalizationForm$1.current){if(t!=UnicodeNormalizationForm$1.current){logger$1i.checkNormalize();e=e.normalize(t)}let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128){r.push(n)}else if(n<2048){r.push(n>>6|192);r.push(n&63|128)}else if((n&64512)==55296){t++;const i=e.charCodeAt(t);if(t>=e.length||(i&64512)!==56320){throw new Error("invalid utf-8 string")}const s=65536+((n&1023)<<10)+(i&1023);r.push(s>>18|240);r.push(s>>12&63|128);r.push(s>>6&63|128);r.push(s&63|128)}else{r.push(n>>12|224);r.push(n>>6&63|128);r.push(n&63|128)}}return arrayify$2(r)}function escapeChar$1(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function _toEscapedUtf8String$1(e,t){return'"'+getUtf8CodePoints$1(e,t).map((e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127){return String.fromCharCode(e)}}if(e<=65535){return escapeChar$1(e)}e-=65536;return escapeChar$1((e>>10&1023)+55296)+escapeChar$1((e&1023)+56320)})).join("")+'"'}function _toUtf8String$1(e){return e.map((e=>{if(e<=65535){return String.fromCharCode(e)}e-=65536;return String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320)})).join("")}function toUtf8String$1(e,t){return _toUtf8String$1(getUtf8CodePoints$1(e,t))}function toUtf8CodePoints$1(e,t=UnicodeNormalizationForm$1.current){return getUtf8CodePoints$1(toUtf8Bytes$1(e,t))}function formatBytes32String$1(e){const t=toUtf8Bytes$1(e);if(t.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return hexlify$1(concat$4([t,HashZero$1]).slice(0,32))}function parseBytes32String$1(e){const t=arrayify$2(e);if(t.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(t[31]!==0){throw new Error("invalid bytes32 string - no null terminator")}let r=31;while(t[r-1]===0){r--}return toUtf8String$1(t.slice(0,r))}function bytes2$1(e){if(e.length%4!==0){throw new Error("bad data")}let t=[];for(let r=0;r<e.length;r+=4){t.push(parseInt(e.substring(r,r+4),16))}return t}function createTable$2(e,t){if(!t){t=function(e){return[parseInt(e,16)]}}let r=0;let n={};e.split(",").forEach((e=>{let i=e.split(":");r+=parseInt(i[0],16);n[r]=t(i[1])}));return n}function createRangeTable$1(e){let t=0;return e.split(",").map((e=>{let r=e.split("-");if(r.length===1){r[1]="0"}else if(r[1]===""){r[1]="1"}let n=t+parseInt(r[0],16);t=parseInt(r[1],16);return{l:n,h:t}}))}function matchMap$1(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];r+=i.l;if(e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(e-r)!==-1){continue}return i}}return null}const Table_A_1_ranges$1=createRangeTable$1("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d");const Table_B_1_flags$1="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16)));const Table_B_2_ranges$1=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}];const Table_B_2_lut_abs$1=createTable$2("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3");const Table_B_2_lut_rel$1=createTable$2("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7");const Table_B_2_complex$1=createTable$2("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",bytes2$1);const Table_C_ranges$1=createRangeTable$1("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function flatten$2(e){return e.reduce(((e,t)=>{t.forEach((t=>{e.push(t)}));return e}),[])}function _nameprepTableA1$1(e){return!!matchMap$1(e,Table_A_1_ranges$1)}function _nameprepTableB2$1(e){let t=matchMap$1(e,Table_B_2_ranges$1);if(t){return[e+t.s]}let r=Table_B_2_lut_abs$1[e];if(r){return r}let n=Table_B_2_lut_rel$1[e];if(n){return[e+n[0]]}let i=Table_B_2_complex$1[e];if(i){return i}return null}function _nameprepTableC$1(e){return!!matchMap$1(e,Table_C_ranges$1)}function nameprep$1(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59){return e.toLowerCase()}let t=toUtf8CodePoints$1(e);t=flatten$2(t.map((e=>{if(Table_B_1_flags$1.indexOf(e)>=0){return[]}if(e>=65024&&e<=65039){return[]}let t=_nameprepTableB2$1(e);if(t){return t}return[e]})));t=toUtf8CodePoints$1(_toUtf8String$1(t),UnicodeNormalizationForm$1.NFKC);t.forEach((e=>{if(_nameprepTableC$1(e)){throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}}));t.forEach((e=>{if(_nameprepTableA1$1(e)){throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}}));let r=_toUtf8String$1(t);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-"){throw new Error("invalid hyphen")}return r}const lib_esm$A=Object.freeze({__proto__:null,_toEscapedUtf8String:_toEscapedUtf8String$1,toUtf8Bytes:toUtf8Bytes$1,toUtf8CodePoints:toUtf8CodePoints$1,toUtf8String:toUtf8String$1,Utf8ErrorFuncs:Utf8ErrorFuncs$1,get Utf8ErrorReason(){return Utf8ErrorReason$1},get UnicodeNormalizationForm(){return UnicodeNormalizationForm$1},formatBytes32String:formatBytes32String$1,parseBytes32String:parseBytes32String$1,nameprep:nameprep$1});class StringCoder$1 extends DynamicBytesCoder$1{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes$1(t))}decode(e){return toUtf8String$1(super.decode(e))}}class TupleCoder$1 extends Coder$1{constructor(e,t){let r=false;const n=[];e.forEach((e=>{if(e.dynamic){r=true}n.push(e.type)}));const i="tuple("+n.join(",")+")";super("tuple",i,t,r);this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});this.coders.forEach(((r,n)=>{let i=r.localName;if(!i||t[i]!==1){return}if(i==="length"){i="_length"}if(e[i]!=null){return}e[i]=e[n]}));return Object.freeze(e)}encode(e,t){return pack$3(e,this.coders,t)}decode(e){return e.coerce(this.name,unpack$1(e,this.coders))}}const logger$1h=new Logger$1(version$M);const paramTypeBytes$1=new RegExp(/^bytes([0-9]*)$/);const paramTypeNumber$1=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder$1{constructor(e){defineReadOnly$1(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new AddressCoder$1(e.name);case"bool":return new BooleanCoder$1(e.name);case"string":return new StringCoder$1(e.name);case"bytes":return new BytesCoder$1(e.name);case"array":return new ArrayCoder$1(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new TupleCoder$1((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new NullCoder$1(e.name)}let t=e.type.match(paramTypeNumber$1);if(t){let r=parseInt(t[2]||"256");if(r===0||r>256||r%8!==0){logger$1h.throwArgumentError("invalid "+t[1]+" bit length","param",e)}return new NumberCoder$1(r/8,t[1]==="int",e.name)}t=e.type.match(paramTypeBytes$1);if(t){let r=parseInt(t[1]);if(r===0||r>32){logger$1h.throwArgumentError("invalid bytes length","param",e)}return new FixedBytesCoder$1(r,e.name)}return logger$1h.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Reader$2(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Writer$2(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(ParamType$1.from(e))));const r=new TupleCoder$1(t,"_");return r.defaultValue()}encode(e,t){if(e.length!==t.length){logger$1h.throwError("types/values length mismatch",Logger$1.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}})}const r=e.map((e=>this._getCoder(ParamType$1.from(e))));const n=new TupleCoder$1(r,"_");const i=this._getWriter();n.encode(i,t);return i.data}decode(e,t,r){const n=e.map((e=>this._getCoder(ParamType$1.from(e))));const i=new TupleCoder$1(n,"_");return i.decode(this._getReader(arrayify$2(t),r))}}const defaultAbiCoder$1=new AbiCoder$1;function id$1(e){return keccak256$3(toUtf8Bytes$1(e))}const version$H="hash/5.7.0";function decode$9(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++){t.push(e.charCodeAt(r))}return arrayify$2(t)}function encode$a(e){e=arrayify$2(e);let t="";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return btoa(t)}const lib_esm$z=Object.freeze({__proto__:null,decode:decode$9,encode:encode$a});function flat$2(e,t){if(t==null){t=1}const r=[];const n=r.forEach;const i=function(e,t){n.call(e,(function(e){if(t>0&&Array.isArray(e)){i(e,t-1)}else{r.push(e)}}))};i(e,t);return r}function fromEntries$1(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}function decode_arithmetic$1(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r();let i=1;let s=[0,1];for(let e=1;e<n;e++){s.push(i+=r())}let a=r();let o=t;t+=a;let f=0;let c=0;function u(){if(f==0){c=c<<8|e[t++];f=8}return c>>--f&1}const l=31;const h=Math.pow(2,l);const d=h>>>1;const p=d>>1;const y=h-1;let m=0;for(let e=0;e<l;e++)m=m<<1|u();let g=[];let b=0;let v=h;while(true){let e=Math.floor(((m-b+1)*i-1)/v);let t=0;let r=n;while(r-t>1){let n=t+r>>>1;if(e<s[n]){r=n}else{t=n}}if(t==0)break;g.push(t);let a=b+Math.floor(v*s[t]/i);let o=b+Math.floor(v*s[t+1]/i)-1;while(((a^o)&d)==0){m=m<<1&y|u();a=a<<1&y;o=o<<1&y|1}while(a&~o&p){m=m&d|m<<1&y>>>1|u();a=a<<1^d;o=(o^d)<<1|d|1}b=a;v=1+o-a}let w=n-4;return g.map((t=>{switch(t-w){case 3:return w+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return w+256+(e[o++]<<8|e[o++]);case 1:return w+e[o++];default:return t-1}}))}function read_payload$1(e){let t=0;return()=>e[t++]}function read_compressed_payload$1(e){return read_payload$1(decode_arithmetic$1(e))}function signed$1(e){return e&1?~e>>1:e>>1}function read_counts$1(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}function read_ascending$1(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function read_deltas$1(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=signed$1(t());return r}function read_member_array$1(e,t){let r=read_ascending$1(e(),e);let n=e();let i=read_ascending$1(n,e);let s=read_counts$1(n,e);for(let e=0;e<n;e++){for(let t=0;t<s[e];t++){r.push(i[e]+t)}}return t?r.map((e=>t[e])):r}function read_mapped_map$1(e){let t=[];while(true){let r=e();if(r==0)break;t.push(read_linear_table$1(r,e))}while(true){let r=e()-1;if(r<0)break;t.push(read_replacement_table$1(r,e))}return fromEntries$1(flat$2(t))}function read_zero_terminated_array$1(e){let t=[];while(true){let r=e();if(r==0)break;t.push(r)}return t}function read_transposed$1(e,t,r){let n=Array(e).fill(undefined).map((()=>[]));for(let i=0;i<t;i++){read_deltas$1(e,r).forEach(((e,t)=>n[t].push(e)))}return n}function read_linear_table$1(e,t){let r=1+t();let n=t();let i=read_zero_terminated_array$1(t);let s=read_transposed$1(i.length,1+e,t);return flat$2(s.map(((e,t)=>{const s=e[0],a=e.slice(1);return Array(i[t]).fill(undefined).map(((e,t)=>{let i=t*n;return[s+t*r,a.map((e=>e+i))]}))})))}function read_replacement_table$1(e,t){let r=1+t();let n=read_transposed$1(r,1+e,t);return n.map((e=>[e[0],e.slice(1)]))}function read_emoji_trie$1(e){let t=read_member_array$1(e).sort(((e,t)=>e-t));return r();function r(){let n=[];while(true){let i=read_member_array$1(e,t);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(((e,t)=>t.set.size-e.set.size));let i=e();let s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1;let f=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:f}}}function getData$1(){return read_compressed_payload$1(decode$9("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const r$4=getData$1();const VALID$1=new Set(read_member_array$1(r$4));const IGNORED$1=new Set(read_member_array$1(r$4));const MAPPED$1=read_mapped_map$1(r$4);const EMOJI_ROOT$1=read_emoji_trie$1(r$4);const HYPHEN$1=45;const UNDERSCORE$1=95;function explode_cp$1(e){return toUtf8CodePoints$1(e)}function filter_fe0f$1(e){return e.filter((e=>e!=65039))}function ens_normalize_post_check$1(e){for(let t of e.split(".")){let e=explode_cp$1(t);try{for(let t=e.lastIndexOf(UNDERSCORE$1)-1;t>=0;t--){if(e[t]!==UNDERSCORE$1){throw new Error(`underscore only allowed at start`)}}if(e.length>=4&&e.every((e=>e<128))&&e[2]===HYPHEN$1&&e[3]===HYPHEN$1){throw new Error(`invalid label extension`)}}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function ens_normalize$1(e){return ens_normalize_post_check$1(normalize$1(e,filter_fe0f$1))}function normalize$1(e,t){let r=explode_cp$1(e).reverse();let n=[];while(r.length){let e=consume_emoji_reversed$1(r);if(e){n.push(...t(e));continue}let i=r.pop();if(VALID$1.has(i)){n.push(i);continue}if(IGNORED$1.has(i)){continue}let s=MAPPED$1[i];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return ens_normalize_post_check$1(nfc$1(String.fromCodePoint(...n)))}function nfc$1(e){return e.normalize("NFC")}function consume_emoji_reversed$1(e,t){var r;let n=EMOJI_ROOT$1;let i;let s;let a=[];let o=e.length;if(t)t.length=0;while(o){let f=e[--o];n=(r=n.branches.find((e=>e.set.has(f))))===null||r===void 0?void 0:r.node;if(!n)break;if(n.save){s=f}else if(n.check){if(f===s)break}a.push(f);if(n.fe0f){a.push(65039);if(o>0&&e[o-1]==65039)o--}if(n.valid){i=a.slice();if(n.valid==2)i.splice(1,1);if(t)t.push(...e.slice(o).reverse());e.length=o}}return i}const logger$1g=new Logger$1(version$H);const Zeros$3=new Uint8Array(32);Zeros$3.fill(0);function checkComponent$1(e){if(e.length===0){throw new Error("invalid ENS name; empty component")}return e}function ensNameSplit$1(e){const t=toUtf8Bytes$1(ens_normalize$1(e));const r=[];if(e.length===0){return r}let n=0;for(let e=0;e<t.length;e++){const i=t[e];if(i===46){r.push(checkComponent$1(t.slice(n,e)));n=e+1}}if(n>=t.length){throw new Error("invalid ENS name; empty component")}r.push(checkComponent$1(t.slice(n)));return r}function ensNormalize$1(e){return ensNameSplit$1(e).map((e=>toUtf8String$1(e))).join(".")}function isValidName$1(e){try{return ensNameSplit$1(e).length!==0}catch(e){}return false}function namehash$1(e){if(typeof e!=="string"){logger$1g.throwArgumentError("invalid ENS name; not a string","name",e)}let t=Zeros$3;const r=ensNameSplit$1(e);while(r.length){t=keccak256$3(concat$4([t,keccak256$3(r.pop())]))}return hexlify$1(t)}function dnsEncode$1(e){return hexlify$1(concat$4(ensNameSplit$1(e).map((e=>{if(e.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const t=new Uint8Array(e.length+1);t.set(e,1);t[0]=t.length-1;return t}))))+"00"}const messagePrefix$1="Ethereum Signed Message:\n";function hashMessage$1(e){if(typeof e==="string"){e=toUtf8Bytes$1(e)}return keccak256$3(concat$4([toUtf8Bytes$1(messagePrefix$1),toUtf8Bytes$1(String(e.length)),e]))}var __awaiter$w=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$1f=new Logger$1(version$H);const padding$1=new Uint8Array(32);padding$1.fill(0);const NegativeOne$3=BigNumber$2.from(-1);const Zero$3=BigNumber$2.from(0);const One$2=BigNumber$2.from(1);const MaxUint256$2=BigNumber$2.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight$1(e){const t=arrayify$2(e);const r=t.length%32;if(r){return hexConcat$1([t,padding$1.slice(r)])}return hexlify$1(t)}const hexTrue$1=hexZeroPad$1(One$2.toHexString(),32);const hexFalse$1=hexZeroPad$1(Zero$3.toHexString(),32);const domainFieldTypes$1={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const domainFieldNames$1=["name","version","chainId","verifyingContract","salt"];function checkString$1(e){return function(t){if(typeof t!=="string"){logger$1f.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t)}return t}}const domainChecks$1={name:checkString$1("name"),version:checkString$1("version"),chainId:function(e){try{return BigNumber$2.from(e).toString()}catch(e){}return logger$1f.throwArgumentError(`invalid domain value for "chainId"`,"domain.chainId",e)},verifyingContract:function(e){try{return getAddress$1(e).toLowerCase()}catch(e){}return logger$1f.throwArgumentError(`invalid domain value "verifyingContract"`,"domain.verifyingContract",e)},salt:function(e){try{const t=arrayify$2(e);if(t.length!==32){throw new Error("bad length")}return hexlify$1(t)}catch(e){}return logger$1f.throwArgumentError(`invalid domain value "salt"`,"domain.salt",e)}};function getBaseEncoder$1(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=t[1]==="";const n=parseInt(t[2]||"256");if(n%8!==0||n>256||t[2]&&t[2]!==String(n)){logger$1f.throwArgumentError("invalid numeric width","type",e)}const i=MaxUint256$2.mask(r?n-1:n);const s=r?i.add(One$2).mul(NegativeOne$3):Zero$3;return function(t){const r=BigNumber$2.from(t);if(r.lt(s)||r.gt(i)){logger$1f.throwArgumentError(`value out-of-bounds for ${e}`,"value",t)}return hexZeroPad$1(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);if(r===0||r>32||t[1]!==String(r)){logger$1f.throwArgumentError("invalid bytes width","type",e)}return function(t){const n=arrayify$2(t);if(n.length!==r){logger$1f.throwArgumentError(`invalid length for ${e}`,"value",t)}return hexPadRight$1(t)}}}switch(e){case"address":return function(e){return hexZeroPad$1(getAddress$1(e),32)};case"bool":return function(e){return!e?hexFalse$1:hexTrue$1};case"bytes":return function(e){return keccak256$3(e)};case"string":return function(e){return id$1(e)}}return null}function encodeType$1(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class TypedDataEncoder$1{constructor(e){defineReadOnly$1(this,"types",Object.freeze(deepCopy$1(e)));defineReadOnly$1(this,"_encoderCache",{});defineReadOnly$1(this,"_types",{});const t={};const r={};const n={};Object.keys(e).forEach((e=>{t[e]={};r[e]=[];n[e]={}}));for(const n in e){const i={};e[n].forEach((s=>{if(i[s.name]){logger$1f.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e)}i[s.name]=true;const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];if(a===n){logger$1f.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e)}const o=getBaseEncoder$1(a);if(o){return}if(!r[a]){logger$1f.throwArgumentError(`unknown type ${JSON.stringify(a)}`,"types",e)}r[a].push(n);t[n][a]=true}))}const i=Object.keys(r).filter((e=>r[e].length===0));if(i.length===0){logger$1f.throwArgumentError("missing primary type","types",e)}else if(i.length>1){logger$1f.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e)}defineReadOnly$1(this,"primaryType",i[0]);function s(i,a){if(a[i]){logger$1f.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e)}a[i]=true;Object.keys(t[i]).forEach((e=>{if(!r[e]){return}s(e,a);Object.keys(a).forEach((t=>{n[t][e]=true}))}));delete a[i]}s(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort();this._types[t]=encodeType$1(t,e[t])+r.map((t=>encodeType$1(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];if(!t){t=this._encoderCache[e]=this._getEncoder(e)}return t}_getEncoder(e){{const t=getBaseEncoder$1(e);if(t){return t}}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1];const r=this.getEncoder(e);const n=parseInt(t[3]);return t=>{if(n>=0&&t.length!==n){logger$1f.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t)}let i=t.map(r);if(this._types[e]){i=i.map(keccak256$3)}return keccak256$3(hexConcat$1(i))}}const r=this.types[e];if(r){const t=id$1(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);if(this._types[r]){return keccak256$3(n)}return n}));n.unshift(t);return hexConcat$1(n)}}return logger$1f.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];if(!t){logger$1f.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e)}return t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256$3(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){{const n=getBaseEncoder$1(e);if(n){return r(e,t)}}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1];const i=parseInt(n[3]);if(i>=0&&t.length!==i){logger$1f.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t)}return t.map((t=>this._visit(e,t,r)))}const i=this.types[e];if(i){return i.reduce(((e,{name:n,type:i})=>{e[n]=this._visit(i,t[n],r);return e}),{})}return logger$1f.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new TypedDataEncoder$1(e)}static getPrimaryType(e){return TypedDataEncoder$1.from(e).primaryType}static hashStruct(e,t,r){return TypedDataEncoder$1.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=domainFieldTypes$1[r];if(!n){logger$1f.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e)}t.push({name:r,type:n})}t.sort(((e,t)=>domainFieldNames$1.indexOf(e.name)-domainFieldNames$1.indexOf(t.name)));return TypedDataEncoder$1.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return hexConcat$1(["0x1901",TypedDataEncoder$1.hashDomain(e),TypedDataEncoder$1.from(t).hash(r)])}static hash(e,t,r){return keccak256$3(TypedDataEncoder$1.encode(e,t,r))}static resolveNames(e,t,r,n){return __awaiter$w(this,void 0,void 0,(function*(){e=shallowCopy$1(e);const i={};if(e.verifyingContract&&!isHexString$1(e.verifyingContract,20)){i[e.verifyingContract]="0x"}const s=TypedDataEncoder$1.from(t);s.visit(r,((e,t)=>{if(e==="address"&&!isHexString$1(t,20)){i[t]="0x"}return t}));for(const e in i){i[e]=yield n(e)}if(e.verifyingContract&&i[e.verifyingContract]){e.verifyingContract=i[e.verifyingContract]}r=s.visit(r,((e,t)=>{if(e==="address"&&i[t]){return i[t]}return t}));return{domain:e,value:r}}))}static getPayload(e,t,r){TypedDataEncoder$1.hashDomain(e);const n={};const i=[];domainFieldNames$1.forEach((t=>{const r=e[t];if(r==null){return}n[t]=domainChecks$1[t](r);i.push({name:t,type:domainFieldTypes$1[t]})}));const s=TypedDataEncoder$1.from(t);const a=shallowCopy$1(t);if(a.EIP712Domain){logger$1f.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t)}else{a.EIP712Domain=i}s.encode(r);return{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/)){return hexlify$1(arrayify$2(t))}if(e.match(/^u?int/)){return BigNumber$2.from(t).toString()}switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":if(typeof t!=="string"){logger$1f.throwArgumentError(`invalid string`,"value",t)}return t}return logger$1f.throwArgumentError("unsupported type","type",e)}))}}}const lib_esm$y=Object.freeze({__proto__:null,id:id$1,dnsEncode:dnsEncode$1,namehash:namehash$1,isValidName:isValidName$1,ensNormalize:ensNormalize$1,messagePrefix:messagePrefix$1,hashMessage:hashMessage$1,_TypedDataEncoder:TypedDataEncoder$1});const logger$1e=new Logger$1(version$M);class LogDescription$1 extends Description$1{}class TransactionDescription$1 extends Description$1{}class ErrorDescription$1 extends Description$1{}class Indexed$1 extends Description$1{static isIndexed(e){return!!(e&&e._isIndexed)}}const BuiltinErrors$1={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:true},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wrapAccessError$1(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);r.error=t;return r}class Interface$1{constructor(e){let t=[];if(typeof e==="string"){t=JSON.parse(e)}else{t=e}defineReadOnly$1(this,"fragments",t.map((e=>Fragment$1.from(e))).filter((e=>e!=null)));defineReadOnly$1(this,"_abiCoder",getStatic$1(new.target,"getAbiCoder")());defineReadOnly$1(this,"functions",{});defineReadOnly$1(this,"errors",{});defineReadOnly$1(this,"events",{});defineReadOnly$1(this,"structs",{});this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":if(this.deploy){logger$1e.warn("duplicate definition - constructor");return}defineReadOnly$1(this,"deploy",e);return;case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();if(t[r]){logger$1e.warn("duplicate definition - "+r);return}t[r]=e}));if(!this.deploy){defineReadOnly$1(this,"deploy",ConstructorFragment$1.from({payable:false,type:"constructor"}))}defineReadOnly$1(this,"_isInterface",true)}format(e){if(!e){e=FormatTypes$1.full}if(e===FormatTypes$1.sighash){logger$1e.throwArgumentError("interface does not support formatting sighash","format",e)}const t=this.fragments.map((t=>t.format(e)));if(e===FormatTypes$1.json){return JSON.stringify(t.map((e=>JSON.parse(e))))}return t}static getAbiCoder(){return defaultAbiCoder$1}static getAddress(e){return getAddress$1(e)}static getSighash(e){return hexDataSlice$1(id$1(e.format()),0,4)}static getEventTopic(e){return id$1(e.format())}getFunction(e){if(isHexString$1(e)){for(const t in this.functions){if(e===this.getSighash(t)){return this.functions[t]}}logger$1e.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$1e.throwArgumentError("no matching function","name",t)}else if(r.length>1){logger$1e.throwArgumentError("multiple matching functions","name",t)}return this.functions[r[0]]}const t=this.functions[FunctionFragment$1.fromString(e).format()];if(!t){logger$1e.throwArgumentError("no matching function","signature",e)}return t}getEvent(e){if(isHexString$1(e)){const t=e.toLowerCase();for(const e in this.events){if(t===this.getEventTopic(e)){return this.events[e]}}logger$1e.throwArgumentError("no matching event","topichash",t)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.events).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$1e.throwArgumentError("no matching event","name",t)}else if(r.length>1){logger$1e.throwArgumentError("multiple matching events","name",t)}return this.events[r[0]]}const t=this.events[EventFragment$1.fromString(e).format()];if(!t){logger$1e.throwArgumentError("no matching event","signature",e)}return t}getError(e){if(isHexString$1(e)){const t=getStatic$1(this.constructor,"getSighash");for(const r in this.errors){const n=this.errors[r];if(e===t(n)){return this.errors[r]}}logger$1e.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$1e.throwArgumentError("no matching error","name",t)}else if(r.length>1){logger$1e.throwArgumentError("multiple matching errors","name",t)}return this.errors[r[0]]}const t=this.errors[FunctionFragment$1.fromString(e).format()];if(!t){logger$1e.throwArgumentError("no matching error","signature",e)}return t}getSighash(e){if(typeof e==="string"){try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}}return getStatic$1(this.constructor,"getSighash")(e)}getEventTopic(e){if(typeof e==="string"){e=this.getEvent(e)}return getStatic$1(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e==="string"){e=this.getError(e)}const r=arrayify$2(t);if(hexlify$1(r.slice(0,4))!==this.getSighash(e)){logger$1e.throwArgumentError(`data signature does not match error ${e.name}.`,"data",hexlify$1(r))}return this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){if(typeof e==="string"){e=this.getError(e)}return hexlify$1(concat$4([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){if(typeof e==="string"){e=this.getFunction(e)}const r=arrayify$2(t);if(hexlify$1(r.slice(0,4))!==this.getSighash(e)){logger$1e.throwArgumentError(`data signature does not match function ${e.name}.`,"data",hexlify$1(r))}return this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){if(typeof e==="string"){e=this.getFunction(e)}return hexlify$1(concat$4([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){if(typeof e==="string"){e=this.getFunction(e)}let r=arrayify$2(t);let n=null;let i="";let s=null;let a=null;let o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=hexlify$1(r.slice(0,4));const t=BuiltinErrors$1[e];if(t){s=this._abiCoder.decode(t.inputs,r.slice(4));a=t.name;o=t.signature;if(t.reason){n=s[0]}if(a==="Error"){i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(s[0])}`}else if(a==="Panic"){i=`; VM Exception while processing transaction: reverted with panic code ${s[0]}`}}else{try{const t=this.getError(e);s=this._abiCoder.decode(t.inputs,r.slice(4));a=t.name;o=t.format()}catch(e){}}break}}return logger$1e.throwError("call revert exception"+i,Logger$1.errors.CALL_EXCEPTION,{method:e.format(),data:hexlify$1(t),errorArgs:s,errorName:a,errorSignature:o,reason:n})}encodeFunctionResult(e,t){if(typeof e==="string"){e=this.getFunction(e)}return hexlify$1(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e==="string"){e=this.getEvent(e)}if(t.length>e.inputs.length){logger$1e.throwError("too many arguments for "+e.format(),Logger$1.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t})}let r=[];if(!e.anonymous){r.push(this.getEventTopic(e))}const n=(e,t)=>{if(e.type==="string"){return id$1(t)}else if(e.type==="bytes"){return keccak256$3(hexlify$1(t))}if(e.type==="bool"&&typeof t==="boolean"){t=t?"0x01":"0x00"}if(e.type.match(/^u?int/)){t=BigNumber$2.from(t).toHexString()}if(e.type==="address"){this._abiCoder.encode(["address"],[t])}return hexZeroPad$1(hexlify$1(t),32)};t.forEach(((t,i)=>{let s=e.inputs[i];if(!s.indexed){if(t!=null){logger$1e.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}return}if(t==null){r.push(null)}else if(s.baseType==="array"||s.baseType==="tuple"){logger$1e.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t)}else if(Array.isArray(t)){r.push(t.map((e=>n(s,e))))}else{r.push(n(s,t))}}));while(r.length&&r[r.length-1]===null){r.pop()}return r}encodeEventLog(e,t){if(typeof e==="string"){e=this.getEvent(e)}const r=[];const n=[];const i=[];if(!e.anonymous){r.push(this.getEventTopic(e))}if(t.length!==e.inputs.length){logger$1e.throwArgumentError("event arguments/values mismatch","values",t)}e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed){if(e.type==="string"){r.push(id$1(a))}else if(e.type==="bytes"){r.push(keccak256$3(a))}else if(e.baseType==="tuple"||e.baseType==="array"){throw new Error("not implemented")}else{r.push(this._abiCoder.encode([e.type],[a]))}}else{n.push(e);i.push(a)}}));return{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if(typeof e==="string"){e=this.getEvent(e)}if(r!=null&&!e.anonymous){let t=this.getEventTopic(e);if(!isHexString$1(r[0],32)||r[0].toLowerCase()!==t){logger$1e.throwError("fragment/topic mismatch",Logger$1.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]})}r=r.slice(1)}let n=[];let i=[];let s=[];e.inputs.forEach(((e,t)=>{if(e.indexed){if(e.type==="string"||e.type==="bytes"||e.baseType==="tuple"||e.baseType==="array"){n.push(ParamType$1.fromObject({type:"bytes32",name:e.name}));s.push(true)}else{n.push(e);s.push(false)}}else{i.push(e);s.push(false)}}));let a=r!=null?this._abiCoder.decode(n,concat$4(r)):null;let o=this._abiCoder.decode(i,t,true);let f=[];let c=0,u=0;e.inputs.forEach(((e,t)=>{if(e.indexed){if(a==null){f[t]=new Indexed$1({_isIndexed:true,hash:null})}else if(s[t]){f[t]=new Indexed$1({_isIndexed:true,hash:a[u++]})}else{try{f[t]=a[u++]}catch(e){f[t]=e}}}else{try{f[t]=o[c++]}catch(e){f[t]=e}}if(e.name&&f[e.name]==null){const r=f[t];if(r instanceof Error){Object.defineProperty(f,e.name,{enumerable:true,get:()=>{throw wrapAccessError$1(`property ${JSON.stringify(e.name)}`,r)}})}else{f[e.name]=r}}}));for(let e=0;e<f.length;e++){const t=f[e];if(t instanceof Error){Object.defineProperty(f,e,{enumerable:true,get:()=>{throw wrapAccessError$1(`index ${e}`,t)}})}}return Object.freeze(f)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());if(!t){return null}return new TransactionDescription$1({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:BigNumber$2.from(e.value||"0")})}parseLog(e){let t=this.getEvent(e.topics[0]);if(!t||t.anonymous){return null}return new LogDescription$1({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=hexlify$1(e);let r=this.getError(t.substring(0,10).toLowerCase());if(!r){return null}return new ErrorDescription$1({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)})}static isInterface(e){return!!(e&&e._isInterface)}}const lib_esm$x=Object.freeze({__proto__:null,ConstructorFragment:ConstructorFragment$1,ErrorFragment:ErrorFragment$1,EventFragment:EventFragment$1,Fragment:Fragment$1,FunctionFragment:FunctionFragment$1,ParamType:ParamType$1,FormatTypes:FormatTypes$1,AbiCoder:AbiCoder$1,defaultAbiCoder:defaultAbiCoder$1,Interface:Interface$1,Indexed:Indexed$1,checkResultErrors:checkResultErrors$1,LogDescription:LogDescription$1,TransactionDescription:TransactionDescription$1});const version$G="abstract-provider/5.7.0";var __awaiter$v=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$1d=new Logger$1(version$G);class ForkEvent$1 extends Description$1{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Provider$1{constructor(){logger$1d.checkAbstract(new.target,Provider$1);defineReadOnly$1(this,"_isProvider",true)}getFeeData(){return __awaiter$v(this,void 0,void 0,(function*(){const{block:e,gasPrice:t}=yield resolveProperties$1({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null,i=null;if(e&&e.baseFeePerGas){r=e.baseFeePerGas;i=BigNumber$2.from("1500000000");n=e.baseFeePerGas.mul(2).add(i)}return{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}}))}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const version$F="abstract-signer/5.7.0";var __awaiter$u=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$1c=new Logger$1(version$F);const allowedTransactionKeys$7=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"];const forwardErrors$1=[Logger$1.errors.INSUFFICIENT_FUNDS,Logger$1.errors.NONCE_EXPIRED,Logger$1.errors.REPLACEMENT_UNDERPRICED];class Signer$1{constructor(){logger$1c.checkAbstract(new.target,Signer$1);defineReadOnly$1(this,"_isSigner",true)}getBalance(e){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("getBalance");return yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("getTransactionCount");return yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield resolveProperties$1(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield resolveProperties$1(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e);const r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const e=yield this.provider.getNetwork();return e.chainId}))}getGasPrice(){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("getGasPrice");return yield this.provider.getGasPrice()}))}getFeeData(){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("getFeeData");return yield this.provider.getFeeData()}))}resolveName(e){return __awaiter$u(this,void 0,void 0,(function*(){this._checkProvider("resolveName");return yield this.provider.resolveName(e)}))}checkTransaction(e){for(const t in e){if(allowedTransactionKeys$7.indexOf(t)===-1){logger$1c.throwArgumentError("invalid transaction key: "+t,"transaction",e)}}const t=shallowCopy$1(e);if(t.from==null){t.from=this.getAddress()}else{t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>{if(t[0].toLowerCase()!==t[1].toLowerCase()){logger$1c.throwArgumentError("from address mismatch","transaction",e)}return t[0]}))}return t}populateTransaction(e){return __awaiter$u(this,void 0,void 0,(function*(){const t=yield resolveProperties$1(this.checkTransaction(e));if(t.to!=null){t.to=Promise.resolve(t.to).then((e=>__awaiter$u(this,void 0,void 0,(function*(){if(e==null){return null}const t=yield this.resolveName(e);if(t==null){logger$1c.throwArgumentError("provided ENS name resolves to null","tx.to",e)}return t}))));t.to.catch((e=>{}))}const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)){logger$1c.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e)}else if((t.type===0||t.type===1)&&r){logger$1c.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e)}if((t.type===2||t.type==null)&&(t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)){t.type=2}else if(t.type===0||t.type===1){if(t.gasPrice==null){t.gasPrice=this.getGasPrice()}}else{const e=yield this.getFeeData();if(t.type==null){if(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null){t.type=2;if(t.gasPrice!=null){const e=t.gasPrice;delete t.gasPrice;t.maxFeePerGas=e;t.maxPriorityFeePerGas=e}else{if(t.maxFeePerGas==null){t.maxFeePerGas=e.maxFeePerGas}if(t.maxPriorityFeePerGas==null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}else if(e.gasPrice!=null){if(r){logger$1c.throwError("network does not support EIP-1559",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"})}if(t.gasPrice==null){t.gasPrice=e.gasPrice}t.type=0}else{logger$1c.throwError("failed to get consistent fee data",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}}else if(t.type===2){if(t.maxFeePerGas==null){t.maxFeePerGas=e.maxFeePerGas}if(t.maxPriorityFeePerGas==null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}if(t.nonce==null){t.nonce=this.getTransactionCount("pending")}if(t.gasLimit==null){t.gasLimit=this.estimateGas(t).catch((e=>{if(forwardErrors$1.indexOf(e.code)>=0){throw e}return logger$1c.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger$1.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))}if(t.chainId==null){t.chainId=this.getChainId()}else{t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>{if(t[1]!==0&&t[0]!==t[1]){logger$1c.throwArgumentError("chainId address mismatch","transaction",e)}return t[0]}))}return yield resolveProperties$1(t)}))}_checkProvider(e){if(!this.provider){logger$1c.throwError("missing provider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}static isSigner(e){return!!(e&&e._isSigner)}}class VoidSigner$1 extends Signer$1{constructor(e,t){super();defineReadOnly$1(this,"address",e);defineReadOnly$1(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{logger$1c.throwError(e,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new VoidSigner$1(this.address,e)}}var bn$2=createCommonjsModule$2((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$3.Buffer}}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,n,i){if(typeof t==="number"){return this._initNumber(t,n,i)}if(typeof t==="object"){return this._initArray(t,n,i)}if(n==="hex"){n=16}r(n===(n|0)&&n>=2&&n<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(n===16){this._parseHex(t,s,i)}else{this._parseBase(t,n,s);if(i==="le"){this._initArray(this.toArray(),n,i)}}}};i.prototype._initNumber=function e(t,n,i){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),n,i)};i.prototype._initArray=function e(t,n,i){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this._strip()};function a(e,t){var n=e.charCodeAt(t);if(n>=48&&n<=57){return n-48}else if(n>=65&&n<=70){return n-55}else if(n>=97&&n<=102){return n-87}else{r(false,"Invalid character in "+e)}}function o(e,t,r){var n=a(e,r);if(r-1>=t){n|=a(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var f;if(n==="be"){for(i=t.length-1;i>=r;i-=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(i=c%2===0?r+1:r;i<t.length;i+=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this._strip()};function f(e,t,n,i){var s=0;var a=0;var o=Math.min(e.length,n);for(var f=t;f<o;f++){var c=e.charCodeAt(f)-48;s*=i;if(c>=49){a=c-49+10}else if(c>=17){a=c-17+10}else{a=c}r(c>=0&&a<i,"Invalid character");s+=a}return s}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=t.length-n;var o=a%i;var c=Math.min(a,a-o)+n;var u=0;for(var l=n;l<c;l+=i){u=f(t,l,l+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var h=1;u=f(t,l,t.length,r);for(l=0;l<o;l++){h*=r}this.imuln(h);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this._strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};function c(e,t){e.words=t.words;e.length=t.length;e.negative=t.negative;e.red=t.red}i.prototype._move=function e(t){c(t,this)};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype._strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){i.prototype.inspect=u}}else{i.prototype.inspect=u}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,n){t=t||10;n=n|0||1;var i;if(t===16||t==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;s+=2;if(s>=26){s-=26;o--}if(a!==0||o!==this.length-1){i=l[6-c.length]+c+i}else{i=c+i}}if(a!==0){i=a.toString(16)+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(t===(t|0)&&t>=2&&t<=36){var u=h[t];var p=d[t];i="";var y=this.clone();y.negative=0;while(!y.isZero()){var m=y.modrn(p).toString(t);y=y.idivn(p);if(!y.isZero()){i=l[u-m.length]+m+i}else{i=m+i}}if(this.isZero()){i="0"+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}r(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16,2)};if(s){i.prototype.toBuffer=function e(t,r){return this.toArrayLike(s,t,r)}}i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};var p=function e(t,r){if(t.allocUnsafe){return t.allocUnsafe(r)}return new t(r)};i.prototype.toArrayLike=function e(t,n,i){this._strip();var s=this.byteLength();var a=i||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");var o=p(t,a);var f=n==="le"?"LE":"BE";this["_toArrayLike"+f](o,s);return o};i.prototype._toArrayLikeLE=function e(t,r){var n=0;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n++]=o&255;if(n<t.length){t[n++]=o>>8&255}if(n<t.length){t[n++]=o>>16&255}if(a===6){if(n<t.length){t[n++]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n<t.length){t[n++]=i;while(n<t.length){t[n++]=0}}};i.prototype._toArrayLikeBE=function e(t,r){var n=t.length-1;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n--]=o&255;if(n>=0){t[n--]=o>>8&255}if(n>=0){t[n--]=o>>16&255}if(a===6){if(n>=0){t[n--]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n>=0){t[n--]=i;while(n>=0){t[n--]=0}}};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function y(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=e.words[n]>>>i&1}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this._strip()};i.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this._strip()};i.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this._strip()};i.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var n=Math.ceil(t/26)|0;var i=t%26;this._expand(n);if(i>0){n--}for(var s=0;s<n;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this._strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,n){r(typeof t==="number"&&t>=0);var i=t/26|0;var s=t%26;this._expand(i+1);if(n){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this._strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=t}else{i=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this._strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var s=t.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var l=f&67108863;var h=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;i=e.words[p]|0;s=t.words[d]|0;a=i*s+l;u+=a/67108864|0;l=a&67108863}r.words[c]=l|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r._strip()}var g=function e(t,r,n){var i=t.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var l=i[0]|0;var h=l&8191;var d=l>>>13;var p=i[1]|0;var y=p&8191;var m=p>>>13;var g=i[2]|0;var b=g&8191;var v=g>>>13;var w=i[3]|0;var A=w&8191;var E=w>>>13;var _=i[4]|0;var S=_&8191;var $=_>>>13;var T=i[5]|0;var C=T&8191;var P=T>>>13;var x=i[6]|0;var I=x&8191;var k=x>>>13;var N=i[7]|0;var R=N&8191;var M=N>>>13;var O=i[8]|0;var B=O&8191;var D=O>>>13;var U=i[9]|0;var L=U&8191;var F=U>>>13;var j=s[0]|0;var H=j&8191;var K=j>>>13;var G=s[1]|0;var V=G&8191;var z=G>>>13;var W=s[2]|0;var X=W&8191;var Y=W>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ne=re&8191;var ie=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var le=s[8]|0;var he=le&8191;var de=le>>>13;var pe=s[9]|0;var ye=pe&8191;var me=pe>>>13;n.negative=t.negative^r.negative;n.length=19;f=Math.imul(h,H);c=Math.imul(h,K);c=c+Math.imul(d,H)|0;u=Math.imul(d,K);var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(y,H);c=Math.imul(y,K);c=c+Math.imul(m,H)|0;u=Math.imul(m,K);f=f+Math.imul(h,V)|0;c=c+Math.imul(h,z)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,z)|0;var be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(be>>>26)|0;be&=67108863;f=Math.imul(b,H);c=Math.imul(b,K);c=c+Math.imul(v,H)|0;u=Math.imul(v,K);f=f+Math.imul(y,V)|0;c=c+Math.imul(y,z)|0;c=c+Math.imul(m,V)|0;u=u+Math.imul(m,z)|0;f=f+Math.imul(h,X)|0;c=c+Math.imul(h,Y)|0;c=c+Math.imul(d,X)|0;u=u+Math.imul(d,Y)|0;var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(A,H);c=Math.imul(A,K);c=c+Math.imul(E,H)|0;u=Math.imul(E,K);f=f+Math.imul(b,V)|0;c=c+Math.imul(b,z)|0;c=c+Math.imul(v,V)|0;u=u+Math.imul(v,z)|0;f=f+Math.imul(y,X)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(m,X)|0;u=u+Math.imul(m,Y)|0;f=f+Math.imul(h,q)|0;c=c+Math.imul(h,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(S,H);c=Math.imul(S,K);c=c+Math.imul($,H)|0;u=Math.imul($,K);f=f+Math.imul(A,V)|0;c=c+Math.imul(A,z)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,z)|0;f=f+Math.imul(b,X)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(v,X)|0;u=u+Math.imul(v,Y)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(C,H);c=Math.imul(C,K);c=c+Math.imul(P,H)|0;u=Math.imul(P,K);f=f+Math.imul(S,V)|0;c=c+Math.imul(S,z)|0;c=c+Math.imul($,V)|0;u=u+Math.imul($,z)|0;f=f+Math.imul(A,X)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,X)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(v,q)|0;u=u+Math.imul(v,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(d,ne)|0;u=u+Math.imul(d,ie)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(I,H);c=Math.imul(I,K);c=c+Math.imul(k,H)|0;u=Math.imul(k,K);f=f+Math.imul(C,V)|0;c=c+Math.imul(C,z)|0;c=c+Math.imul(P,V)|0;u=u+Math.imul(P,z)|0;f=f+Math.imul(S,X)|0;c=c+Math.imul(S,Y)|0;c=c+Math.imul($,X)|0;u=u+Math.imul($,Y)|0;f=f+Math.imul(A,q)|0;c=c+Math.imul(A,Q)|0;c=c+Math.imul(E,q)|0;u=u+Math.imul(E,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;f=f+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(m,ne)|0;u=u+Math.imul(m,ie)|0;f=f+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(R,H);c=Math.imul(R,K);c=c+Math.imul(M,H)|0;u=Math.imul(M,K);f=f+Math.imul(I,V)|0;c=c+Math.imul(I,z)|0;c=c+Math.imul(k,V)|0;u=u+Math.imul(k,z)|0;f=f+Math.imul(C,X)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(P,X)|0;u=u+Math.imul(P,Y)|0;f=f+Math.imul(S,q)|0;c=c+Math.imul(S,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(A,ee)|0;c=c+Math.imul(A,te)|0;c=c+Math.imul(E,ee)|0;u=u+Math.imul(E,te)|0;f=f+Math.imul(b,ne)|0;c=c+Math.imul(b,ie)|0;c=c+Math.imul(v,ne)|0;u=u+Math.imul(v,ie)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(h,ce)|0;c=c+Math.imul(h,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(B,H);c=Math.imul(B,K);c=c+Math.imul(D,H)|0;u=Math.imul(D,K);f=f+Math.imul(R,V)|0;c=c+Math.imul(R,z)|0;c=c+Math.imul(M,V)|0;u=u+Math.imul(M,z)|0;f=f+Math.imul(I,X)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(k,X)|0;u=u+Math.imul(k,Y)|0;f=f+Math.imul(C,q)|0;c=c+Math.imul(C,Q)|0;c=c+Math.imul(P,q)|0;u=u+Math.imul(P,Q)|0;f=f+Math.imul(S,ee)|0;c=c+Math.imul(S,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(A,ne)|0;c=c+Math.imul(A,ie)|0;c=c+Math.imul(E,ne)|0;u=u+Math.imul(E,ie)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(v,ae)|0;u=u+Math.imul(v,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(h,he)|0;c=c+Math.imul(h,de)|0;c=c+Math.imul(d,he)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(L,H);c=Math.imul(L,K);c=c+Math.imul(F,H)|0;u=Math.imul(F,K);f=f+Math.imul(B,V)|0;c=c+Math.imul(B,z)|0;c=c+Math.imul(D,V)|0;u=u+Math.imul(D,z)|0;f=f+Math.imul(R,X)|0;c=c+Math.imul(R,Y)|0;c=c+Math.imul(M,X)|0;u=u+Math.imul(M,Y)|0;f=f+Math.imul(I,q)|0;c=c+Math.imul(I,Q)|0;c=c+Math.imul(k,q)|0;u=u+Math.imul(k,Q)|0;f=f+Math.imul(C,ee)|0;c=c+Math.imul(C,te)|0;c=c+Math.imul(P,ee)|0;u=u+Math.imul(P,te)|0;f=f+Math.imul(S,ne)|0;c=c+Math.imul(S,ie)|0;c=c+Math.imul($,ne)|0;u=u+Math.imul($,ie)|0;f=f+Math.imul(A,ae)|0;c=c+Math.imul(A,oe)|0;c=c+Math.imul(E,ae)|0;u=u+Math.imul(E,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(v,ce)|0;u=u+Math.imul(v,ue)|0;f=f+Math.imul(y,he)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(m,he)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(h,ye)|0;c=c+Math.imul(h,me)|0;c=c+Math.imul(d,ye)|0;u=u+Math.imul(d,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(L,V);c=Math.imul(L,z);c=c+Math.imul(F,V)|0;u=Math.imul(F,z);f=f+Math.imul(B,X)|0;c=c+Math.imul(B,Y)|0;c=c+Math.imul(D,X)|0;u=u+Math.imul(D,Y)|0;f=f+Math.imul(R,q)|0;c=c+Math.imul(R,Q)|0;c=c+Math.imul(M,q)|0;u=u+Math.imul(M,Q)|0;f=f+Math.imul(I,ee)|0;c=c+Math.imul(I,te)|0;c=c+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;f=f+Math.imul(C,ne)|0;c=c+Math.imul(C,ie)|0;c=c+Math.imul(P,ne)|0;u=u+Math.imul(P,ie)|0;f=f+Math.imul(S,ae)|0;c=c+Math.imul(S,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(A,ce)|0;c=c+Math.imul(A,ue)|0;c=c+Math.imul(E,ce)|0;u=u+Math.imul(E,ue)|0;f=f+Math.imul(b,he)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(v,he)|0;u=u+Math.imul(v,de)|0;f=f+Math.imul(y,ye)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(m,ye)|0;u=u+Math.imul(m,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(L,X);c=Math.imul(L,Y);c=c+Math.imul(F,X)|0;u=Math.imul(F,Y);f=f+Math.imul(B,q)|0;c=c+Math.imul(B,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(R,ee)|0;c=c+Math.imul(R,te)|0;c=c+Math.imul(M,ee)|0;u=u+Math.imul(M,te)|0;f=f+Math.imul(I,ne)|0;c=c+Math.imul(I,ie)|0;c=c+Math.imul(k,ne)|0;u=u+Math.imul(k,ie)|0;f=f+Math.imul(C,ae)|0;c=c+Math.imul(C,oe)|0;c=c+Math.imul(P,ae)|0;u=u+Math.imul(P,oe)|0;f=f+Math.imul(S,ce)|0;c=c+Math.imul(S,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(A,he)|0;c=c+Math.imul(A,de)|0;c=c+Math.imul(E,he)|0;u=u+Math.imul(E,de)|0;f=f+Math.imul(b,ye)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(v,ye)|0;u=u+Math.imul(v,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(L,q);c=Math.imul(L,Q);c=c+Math.imul(F,q)|0;u=Math.imul(F,Q);f=f+Math.imul(B,ee)|0;c=c+Math.imul(B,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(R,ne)|0;c=c+Math.imul(R,ie)|0;c=c+Math.imul(M,ne)|0;u=u+Math.imul(M,ie)|0;f=f+Math.imul(I,ae)|0;c=c+Math.imul(I,oe)|0;c=c+Math.imul(k,ae)|0;u=u+Math.imul(k,oe)|0;f=f+Math.imul(C,ce)|0;c=c+Math.imul(C,ue)|0;c=c+Math.imul(P,ce)|0;u=u+Math.imul(P,ue)|0;f=f+Math.imul(S,he)|0;c=c+Math.imul(S,de)|0;c=c+Math.imul($,he)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(A,ye)|0;c=c+Math.imul(A,me)|0;c=c+Math.imul(E,ye)|0;u=u+Math.imul(E,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(L,ee);c=Math.imul(L,te);c=c+Math.imul(F,ee)|0;u=Math.imul(F,te);f=f+Math.imul(B,ne)|0;c=c+Math.imul(B,ie)|0;c=c+Math.imul(D,ne)|0;u=u+Math.imul(D,ie)|0;f=f+Math.imul(R,ae)|0;c=c+Math.imul(R,oe)|0;c=c+Math.imul(M,ae)|0;u=u+Math.imul(M,oe)|0;f=f+Math.imul(I,ce)|0;c=c+Math.imul(I,ue)|0;c=c+Math.imul(k,ce)|0;u=u+Math.imul(k,ue)|0;f=f+Math.imul(C,he)|0;c=c+Math.imul(C,de)|0;c=c+Math.imul(P,he)|0;u=u+Math.imul(P,de)|0;f=f+Math.imul(S,ye)|0;c=c+Math.imul(S,me)|0;c=c+Math.imul($,ye)|0;u=u+Math.imul($,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(L,ne);c=Math.imul(L,ie);c=c+Math.imul(F,ne)|0;u=Math.imul(F,ie);f=f+Math.imul(B,ae)|0;c=c+Math.imul(B,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(R,ce)|0;c=c+Math.imul(R,ue)|0;c=c+Math.imul(M,ce)|0;u=u+Math.imul(M,ue)|0;f=f+Math.imul(I,he)|0;c=c+Math.imul(I,de)|0;c=c+Math.imul(k,he)|0;u=u+Math.imul(k,de)|0;f=f+Math.imul(C,ye)|0;c=c+Math.imul(C,me)|0;c=c+Math.imul(P,ye)|0;u=u+Math.imul(P,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(L,ae);c=Math.imul(L,oe);c=c+Math.imul(F,ae)|0;u=Math.imul(F,oe);f=f+Math.imul(B,ce)|0;c=c+Math.imul(B,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(R,he)|0;c=c+Math.imul(R,de)|0;c=c+Math.imul(M,he)|0;u=u+Math.imul(M,de)|0;f=f+Math.imul(I,ye)|0;c=c+Math.imul(I,me)|0;c=c+Math.imul(k,ye)|0;u=u+Math.imul(k,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(L,ce);c=Math.imul(L,ue);c=c+Math.imul(F,ce)|0;u=Math.imul(F,ue);f=f+Math.imul(B,he)|0;c=c+Math.imul(B,de)|0;c=c+Math.imul(D,he)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(R,ye)|0;c=c+Math.imul(R,me)|0;c=c+Math.imul(M,ye)|0;u=u+Math.imul(M,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(L,he);c=Math.imul(L,de);c=c+Math.imul(F,he)|0;u=Math.imul(F,de);f=f+Math.imul(B,ye)|0;c=c+Math.imul(B,me)|0;c=c+Math.imul(D,ye)|0;u=u+Math.imul(D,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(L,ye);c=Math.imul(L,me);c=c+Math.imul(F,ye)|0;u=Math.imul(F,me);var Oe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;a[0]=ge;a[1]=be;a[2]=ve;a[3]=we;a[4]=Ae;a[5]=Ee;a[6]=_e;a[7]=Se;a[8]=$e;a[9]=Te;a[10]=Ce;a[11]=Pe;a[12]=xe;a[13]=Ie;a[14]=ke;a[15]=Ne;a[16]=Re;a[17]=Me;a[18]=Oe;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){g=m}function b(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var l=e.words[u]|0;var h=t.words[c]|0;var d=l*h;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r._strip()}function v(e,t,r){return b(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=g(this,t,r)}else if(i<63){n=m(this,t,r)}else if(i<1024){n=b(this,t,r)}else{n=v(this,t,r)}return n};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return v(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){var n=t<0;if(n)t=-t;r(typeof t==="number");r(t<67108864);var i=0;for(var s=0;s<this.length;s++){var a=(this.words[s]|0)*t;var o=(a&67108863)+(i&67108863);i>>=26;i+=a/67108864|0;i+=o>>>26;this.words[s]=o&67108863}if(i!==0){this.words[s]=i;this.length++}return n?this.ineg():this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=y(t);if(r.length===0)return new i(1);var n=this;for(var s=0;s<r.length;s++,n=n.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=n.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;n=n.mul(a)}}return n};i.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=67108863>>>26-n<<26-n;var a;if(n!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<n;this.words[a]=c|o;o=f>>>26-n}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this._strip()};i.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,n,i){r(typeof t==="number"&&t>=0);var s;if(n){s=(n-n%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=s);u--){var h=this.words[u]|0;this.words[u]=l<<26-a|h>>>a;l=h&f}if(c&&l!==0){c.words[c.length++]=l}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};i.prototype.ishrn=function e(t,n,i){r(this.negative===0);return this.iushrn(t,n,i)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};i.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(n!==0){i++}this.length=Math.min(i,this.length);if(n!==0){var s=67108863^67108863>>>n<<n;this.words[this.length-1]&=s}return this._strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var n=0;n<this.length&&this.words[n]<0;n++){this.words[n]+=67108864;this.words[n+1]-=1}}return this._strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,n,i){var s=t.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+i]|0)+f;var c=(t.words[a]|0)*n;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this._strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this._strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);s.iushln(n);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new i(null);u.length=c+1;u.words=new Array(u.length);for(var l=0;l<u.length;l++){u.words[l]=0}}var h=s.clone()._ishlnsubmul(a,1,c);if(h.negative===0){s=h;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u._strip()}s._strip();if(r!=="div"&&n!==0){s.iushrn(n)}return{div:u||null,mod:s}};i.prototype.divmod=function e(t,n,s){r(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,n);if(n!=="mod"){a=f.div.neg()}if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),n);if(n!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),n);if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(n==="div"){return{div:this.divn(t.words[0]),mod:null}}if(n==="mod"){return{div:null,mod:new i(this.modrn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}}return this._wordDiv(t,n)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var s=t.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modrn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=(1<<26)%t;var s=0;for(var a=this.length-1;a>=0;a--){s=(i*s+(this.words[a]|0))%t}return n?-s:s};i.prototype.modn=function e(t){return this.modrn(t)};i.prototype.idivn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=0;for(var s=this.length-1;s>=0;s--){var a=(this.words[s]|0)+i*67108864;this.words[s]=a/t|0;i=a%t}this._strip();return n?this.ineg():this};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=new i(0);var c=new i(1);var u=0;while(n.isEven()&&s.isEven()){n.iushrn(1);s.iushrn(1);++u}var l=s.clone();var h=n.clone();while(!n.isZero()){for(var d=0,p=1;(n.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){n.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(l);o.isub(h)}a.iushrn(1);o.iushrn(1)}}for(var y=0,m=1;(s.words[0]&m)===0&&y<26;++y,m<<=1);if(y>0){s.iushrn(y);while(y-- >0){if(f.isOdd()||c.isOdd()){f.iadd(l);c.isub(h)}f.iushrn(1);c.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(f);o.isub(c)}else{s.isub(n);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};i.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=s.clone();while(n.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(n.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var l=0,h=1;(s.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){s.iushrn(l);while(l-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(o)}else{s.isub(n);o.isub(a)}}var d;if(n.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){r(typeof t==="number");var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var n=t<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this._strip();var i;if(this.length>1){i=1}else{if(n){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;i=s===t?0:s<t?-1:1}if(this.negative!==0)return-i|0;return i};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=t.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new T(t)};i.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}A.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};A.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};A.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};A.prototype.imulK=function e(t){return t.imul(this.k)};function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(E,A);E.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var s=0;s<i;s++){r.words[s]=t.words[s]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};E.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function _(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(_,A);function S(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(S,A);function $(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,A);$.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var s=i&67108863;i>>>=26;t.words[n]=s;r=i}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(w[t])return w[t];var e;if(t==="k256"){e=new E}else if(t==="p224"){e=new _}else if(t==="p192"){e=new S}else if(t==="p25519"){e=new $}else{throw new Error("Unknown prime "+t)}w[t]=e;return e};function T(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}T.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};T.prototype._verify2=function e(t,n){r((t.negative|n.negative)===0,"red works only with positives");r(t.red&&t.red===n.red,"red works only with red numbers")};T.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);c(t,t.umod(this.m)._forceRed(this));return t};T.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};T.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};T.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};T.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};T.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};T.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};T.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};T.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};T.prototype.isqr=function e(t){return this.imul(t,t.clone())};T.prototype.sqr=function e(t){return this.mul(t,t)};T.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var n=this.m.andln(3);r(n%2===1);if(n===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new i(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var l=this.m.bitLength();l=new i(2*l*l).toRed(this);while(this.pow(l,u).cmp(c)!==0){l.redIAdd(c)}var h=this.pow(l,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var y=o;while(p.cmp(f)!==0){var m=p;for(var g=0;m.cmp(f)!==0;g++){m=m.redSqr()}r(g<y);var b=this.pow(h,new i(1).iushln(y-g-1));d=d.redMul(b);h=b.redSqr();p=p.redMul(h);y=g}return d};T.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};T.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var s=new Array(1<<n);s[0]=new i(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var l=r.words[a];for(var h=u-1;h>=0;h--){var d=l>>h&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||h!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};T.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};T.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new C(t)};function C(e){T.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}n(C,T);C.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};C.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};C.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};C.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var s=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};C.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));var minimalisticAssert$3=assert$d;function assert$d(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$d.equal=function e(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var inherits_browser$3=createCommonjsModule$2((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}}));var inherits_1$1=inherits_browser$3;function isSurrogatePair$1(e,t){if((e.charCodeAt(t)&64512)!==55296){return false}if(t<0||t+1>=e.length){return false}return(e.charCodeAt(t+1)&64512)===56320}function toArray$1(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e==="string"){if(!t){var n=0;for(var i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if(isSurrogatePair$1(e,i)){s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023);r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}}else if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}}else{for(i=0;i<e.length;i++)r[i]=e[i]|0}return r}var toArray_1$1=toArray$1;function toHex$3(e){var t="";for(var r=0;r<e.length;r++)t+=zero2$1(e[r].toString(16));return t}var toHex_1$1=toHex$3;function htonl$1(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}var htonl_1$1=htonl$1;function toHex32$1(e,t){var r="";for(var n=0;n<e.length;n++){var i=e[n];if(t==="little")i=htonl$1(i);r+=zero8$1(i.toString(16))}return r}var toHex32_1$1=toHex32$1;function zero2$1(e){if(e.length===1)return"0"+e;else return e}var zero2_1$1=zero2$1;function zero8$1(e){if(e.length===7)return"0"+e;else if(e.length===6)return"00"+e;else if(e.length===5)return"000"+e;else if(e.length===4)return"0000"+e;else if(e.length===3)return"00000"+e;else if(e.length===2)return"000000"+e;else if(e.length===1)return"0000000"+e;else return e}var zero8_1$1=zero8$1;function join32$1(e,t,r,n){var i=r-t;minimalisticAssert$3(i%4===0);var s=new Array(i/4);for(var a=0,o=t;a<s.length;a++,o+=4){var f;if(n==="big")f=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3];else f=e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o];s[a]=f>>>0}return s}var join32_1$1=join32$1;function split32$1(e,t){var r=new Array(e.length*4);for(var n=0,i=0;n<e.length;n++,i+=4){var s=e[n];if(t==="big"){r[i]=s>>>24;r[i+1]=s>>>16&255;r[i+2]=s>>>8&255;r[i+3]=s&255}else{r[i+3]=s>>>24;r[i+2]=s>>>16&255;r[i+1]=s>>>8&255;r[i]=s&255}}return r}var split32_1$1=split32$1;function rotr32$3(e,t){return e>>>t|e<<32-t}var rotr32_1$1=rotr32$3;function rotl32$5(e,t){return e<<t|e>>>32-t}var rotl32_1$1=rotl32$5;function sum32$7(e,t){return e+t>>>0}var sum32_1$1=sum32$7;function sum32_3$3(e,t,r){return e+t+r>>>0}var sum32_3_1$1=sum32_3$3;function sum32_4$5(e,t,r,n){return e+t+r+n>>>0}var sum32_4_1$1=sum32_4$5;function sum32_5$5(e,t,r,n,i){return e+t+r+n+i>>>0}var sum32_5_1$1=sum32_5$5;function sum64$3(e,t,r,n){var i=e[t];var s=e[t+1];var a=n+s>>>0;var o=(a<n?1:0)+r+i;e[t]=o>>>0;e[t+1]=a}var sum64_1$1=sum64$3;function sum64_hi$3(e,t,r,n){var i=t+n>>>0;var s=(i<t?1:0)+e+r;return s>>>0}var sum64_hi_1$1=sum64_hi$3;function sum64_lo$3(e,t,r,n){var i=t+n;return i>>>0}var sum64_lo_1$1=sum64_lo$3;function sum64_4_hi$3(e,t,r,n,i,s,a,o){var f=0;var c=t;c=c+n>>>0;f+=c<t?1:0;c=c+s>>>0;f+=c<s?1:0;c=c+o>>>0;f+=c<o?1:0;var u=e+r+i+a+f;return u>>>0}var sum64_4_hi_1$1=sum64_4_hi$3;function sum64_4_lo$3(e,t,r,n,i,s,a,o){var f=t+n+s+o;return f>>>0}var sum64_4_lo_1$1=sum64_4_lo$3;function sum64_5_hi$3(e,t,r,n,i,s,a,o,f,c){var u=0;var l=t;l=l+n>>>0;u+=l<t?1:0;l=l+s>>>0;u+=l<s?1:0;l=l+o>>>0;u+=l<o?1:0;l=l+c>>>0;u+=l<c?1:0;var h=e+r+i+a+f+u;return h>>>0}var sum64_5_hi_1$1=sum64_5_hi$3;function sum64_5_lo$3(e,t,r,n,i,s,a,o,f,c){var u=t+n+s+o+c;return u>>>0}var sum64_5_lo_1$1=sum64_5_lo$3;function rotr64_hi$3(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}var rotr64_hi_1$1=rotr64_hi$3;function rotr64_lo$3(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}var rotr64_lo_1$1=rotr64_lo$3;function shr64_hi$3(e,t,r){return e>>>r}var shr64_hi_1$1=shr64_hi$3;function shr64_lo$3(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}var shr64_lo_1$1=shr64_lo$3;var utils$9={inherits:inherits_1$1,toArray:toArray_1$1,toHex:toHex_1$1,htonl:htonl_1$1,toHex32:toHex32_1$1,zero2:zero2_1$1,zero8:zero8_1$1,join32:join32_1$1,split32:split32_1$1,rotr32:rotr32_1$1,rotl32:rotl32_1$1,sum32:sum32_1$1,sum32_3:sum32_3_1$1,sum32_4:sum32_4_1$1,sum32_5:sum32_5_1$1,sum64:sum64_1$1,sum64_hi:sum64_hi_1$1,sum64_lo:sum64_lo_1$1,sum64_4_hi:sum64_4_hi_1$1,sum64_4_lo:sum64_4_lo_1$1,sum64_5_hi:sum64_5_hi_1$1,sum64_5_lo:sum64_5_lo_1$1,rotr64_hi:rotr64_hi_1$1,rotr64_lo:rotr64_lo_1$1,shr64_hi:shr64_hi_1$1,shr64_lo:shr64_lo_1$1};function BlockHash$9(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}var BlockHash_1$1=BlockHash$9;BlockHash$9.prototype.update=function e(t,r){t=utils$9.toArray(t,r);if(!this.pending)this.pending=t;else this.pending=this.pending.concat(t);this.pendingTotal+=t.length;if(this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length);if(this.pending.length===0)this.pending=null;t=utils$9.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this};BlockHash$9.prototype.digest=function e(t){this.update(this._pad());minimalisticAssert$3(this.pending===null);return this._digest(t)};BlockHash$9.prototype._pad=function e(){var t=this.pendingTotal;var r=this._delta8;var n=r-(t+this.padLength)%r;var i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;t<<=3;if(this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=t>>>24&255;i[s++]=t>>>16&255;i[s++]=t>>>8&255;i[s++]=t&255}else{i[s++]=t&255;i[s++]=t>>>8&255;i[s++]=t>>>16&255;i[s++]=t>>>24&255;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;for(a=8;a<this.padLength;a++)i[s++]=0}return i};var common$4={BlockHash:BlockHash_1$1};var rotr32$2=utils$9.rotr32;function ft_1$3(e,t,r,n){if(e===0)return ch32$3(t,r,n);if(e===1||e===3)return p32$1(t,r,n);if(e===2)return maj32$3(t,r,n)}var ft_1_1$1=ft_1$3;function ch32$3(e,t,r){return e&t^~e&r}var ch32_1$1=ch32$3;function maj32$3(e,t,r){return e&t^e&r^t&r}var maj32_1$1=maj32$3;function p32$1(e,t,r){return e^t^r}var p32_1$1=p32$1;function s0_256$3(e){return rotr32$2(e,2)^rotr32$2(e,13)^rotr32$2(e,22)}var s0_256_1$1=s0_256$3;function s1_256$3(e){return rotr32$2(e,6)^rotr32$2(e,11)^rotr32$2(e,25)}var s1_256_1$1=s1_256$3;function g0_256$3(e){return rotr32$2(e,7)^rotr32$2(e,18)^e>>>3}var g0_256_1$1=g0_256$3;function g1_256$3(e){return rotr32$2(e,17)^rotr32$2(e,19)^e>>>10}var g1_256_1$1=g1_256$3;var common$3={ft_1:ft_1_1$1,ch32:ch32_1$1,maj32:maj32_1$1,p32:p32_1$1,s0_256:s0_256_1$1,s1_256:s1_256_1$1,g0_256:g0_256_1$1,g1_256:g1_256_1$1};var rotl32$4=utils$9.rotl32;var sum32$6=utils$9.sum32;var sum32_5$4=utils$9.sum32_5;var ft_1$2=common$3.ft_1;var BlockHash$8=common$4.BlockHash;var sha1_K$1=[1518500249,1859775393,2400959708,3395469782];function SHA1$3(){if(!(this instanceof SHA1$3))return new SHA1$3;BlockHash$8.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils$9.inherits(SHA1$3,BlockHash$8);var _1$1=SHA1$3;SHA1$3.blockSize=512;SHA1$3.outSize=160;SHA1$3.hmacStrength=80;SHA1$3.padLength=64;SHA1$3.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=rotl32$4(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20);var l=sum32_5$4(rotl32$4(s,5),ft_1$2(u,a,o,f),c,n[i],sha1_K$1[u]);c=f;f=o;o=rotl32$4(a,30);a=s;s=l}this.h[0]=sum32$6(this.h[0],s);this.h[1]=sum32$6(this.h[1],a);this.h[2]=sum32$6(this.h[2],o);this.h[3]=sum32$6(this.h[3],f);this.h[4]=sum32$6(this.h[4],c)};SHA1$3.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h,"big");else return utils$9.split32(this.h,"big")};var sum32$5=utils$9.sum32;var sum32_4$4=utils$9.sum32_4;var sum32_5$3=utils$9.sum32_5;var ch32$2=common$3.ch32;var maj32$2=common$3.maj32;var s0_256$2=common$3.s0_256;var s1_256$2=common$3.s1_256;var g0_256$2=common$3.g0_256;var g1_256$2=common$3.g1_256;var BlockHash$7=common$4.BlockHash;var sha256_K$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$3(){if(!(this instanceof SHA256$3))return new SHA256$3;BlockHash$7.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K$1;this.W=new Array(64)}utils$9.inherits(SHA256$3,BlockHash$7);var _256$1=SHA256$3;SHA256$3.blockSize=512;SHA256$3.outSize=256;SHA256$3.hmacStrength=192;SHA256$3.padLength=64;SHA256$3.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=sum32_4$4(g1_256$2(n[i-2]),n[i-7],g0_256$2(n[i-15]),n[i-16]);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];var u=this.h[5];var l=this.h[6];var h=this.h[7];minimalisticAssert$3(this.k.length===n.length);for(i=0;i<n.length;i++){var d=sum32_5$3(h,s1_256$2(c),ch32$2(c,u,l),this.k[i],n[i]);var p=sum32$5(s0_256$2(s),maj32$2(s,a,o));h=l;l=u;u=c;c=sum32$5(f,d);f=o;o=a;a=s;s=sum32$5(d,p)}this.h[0]=sum32$5(this.h[0],s);this.h[1]=sum32$5(this.h[1],a);this.h[2]=sum32$5(this.h[2],o);this.h[3]=sum32$5(this.h[3],f);this.h[4]=sum32$5(this.h[4],c);this.h[5]=sum32$5(this.h[5],u);this.h[6]=sum32$5(this.h[6],l);this.h[7]=sum32$5(this.h[7],h)};SHA256$3.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h,"big");else return utils$9.split32(this.h,"big")};function SHA224$2(){if(!(this instanceof SHA224$2))return new SHA224$2;_256$1.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$9.inherits(SHA224$2,_256$1);var _224$1=SHA224$2;SHA224$2.blockSize=512;SHA224$2.outSize=224;SHA224$2.hmacStrength=192;SHA224$2.padLength=64;SHA224$2.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h.slice(0,7),"big");else return utils$9.split32(this.h.slice(0,7),"big")};var rotr64_hi$2=utils$9.rotr64_hi;var rotr64_lo$2=utils$9.rotr64_lo;var shr64_hi$2=utils$9.shr64_hi;var shr64_lo$2=utils$9.shr64_lo;var sum64$2=utils$9.sum64;var sum64_hi$2=utils$9.sum64_hi;var sum64_lo$2=utils$9.sum64_lo;var sum64_4_hi$2=utils$9.sum64_4_hi;var sum64_4_lo$2=utils$9.sum64_4_lo;var sum64_5_hi$2=utils$9.sum64_5_hi;var sum64_5_lo$2=utils$9.sum64_5_lo;var BlockHash$6=common$4.BlockHash;var sha512_K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$3(){if(!(this instanceof SHA512$3))return new SHA512$3;BlockHash$6.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K$1;this.W=new Array(160)}utils$9.inherits(SHA512$3,BlockHash$6);var _512$1=SHA512$3;SHA512$3.blockSize=1024;SHA512$3.outSize=512;SHA512$3.hmacStrength=192;SHA512$3.padLength=128;SHA512$3.prototype._prepareBlock=function e(t,r){var n=this.W;for(var i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var s=g1_512_hi$1(n[i-4],n[i-3]);var a=g1_512_lo$1(n[i-4],n[i-3]);var o=n[i-14];var f=n[i-13];var c=g0_512_hi$1(n[i-30],n[i-29]);var u=g0_512_lo$1(n[i-30],n[i-29]);var l=n[i-32];var h=n[i-31];n[i]=sum64_4_hi$2(s,a,o,f,c,u,l,h);n[i+1]=sum64_4_lo$2(s,a,o,f,c,u,l,h)}};SHA512$3.prototype._update=function e(t,r){this._prepareBlock(t,r);var n=this.W;var i=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=this.h[5];var u=this.h[6];var l=this.h[7];var h=this.h[8];var d=this.h[9];var p=this.h[10];var y=this.h[11];var m=this.h[12];var g=this.h[13];var b=this.h[14];var v=this.h[15];minimalisticAssert$3(this.k.length===n.length);for(var w=0;w<n.length;w+=2){var A=b;var E=v;var _=s1_512_hi$1(h,d);var S=s1_512_lo$1(h,d);var $=ch64_hi$1(h,d,p,y,m);var T=ch64_lo$1(h,d,p,y,m,g);var C=this.k[w];var P=this.k[w+1];var x=n[w];var I=n[w+1];var k=sum64_5_hi$2(A,E,_,S,$,T,C,P,x,I);var N=sum64_5_lo$2(A,E,_,S,$,T,C,P,x,I);A=s0_512_hi$1(i,s);E=s0_512_lo$1(i,s);_=maj64_hi$1(i,s,a,o,f);S=maj64_lo$1(i,s,a,o,f,c);var R=sum64_hi$2(A,E,_,S);var M=sum64_lo$2(A,E,_,S);b=m;v=g;m=p;g=y;p=h;y=d;h=sum64_hi$2(u,l,k,N);d=sum64_lo$2(l,l,k,N);u=f;l=c;f=a;c=o;a=i;o=s;i=sum64_hi$2(k,N,R,M);s=sum64_lo$2(k,N,R,M)}sum64$2(this.h,0,i,s);sum64$2(this.h,2,a,o);sum64$2(this.h,4,f,c);sum64$2(this.h,6,u,l);sum64$2(this.h,8,h,d);sum64$2(this.h,10,p,y);sum64$2(this.h,12,m,g);sum64$2(this.h,14,b,v)};SHA512$3.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h,"big");else return utils$9.split32(this.h,"big")};function ch64_hi$1(e,t,r,n,i){var s=e&r^~e&i;if(s<0)s+=4294967296;return s}function ch64_lo$1(e,t,r,n,i,s){var a=t&n^~t&s;if(a<0)a+=4294967296;return a}function maj64_hi$1(e,t,r,n,i){var s=e&r^e&i^r&i;if(s<0)s+=4294967296;return s}function maj64_lo$1(e,t,r,n,i,s){var a=t&n^t&s^n&s;if(a<0)a+=4294967296;return a}function s0_512_hi$1(e,t){var r=rotr64_hi$2(e,t,28);var n=rotr64_hi$2(t,e,2);var i=rotr64_hi$2(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s0_512_lo$1(e,t){var r=rotr64_lo$2(e,t,28);var n=rotr64_lo$2(t,e,2);var i=rotr64_lo$2(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_hi$1(e,t){var r=rotr64_hi$2(e,t,14);var n=rotr64_hi$2(e,t,18);var i=rotr64_hi$2(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_lo$1(e,t){var r=rotr64_lo$2(e,t,14);var n=rotr64_lo$2(e,t,18);var i=rotr64_lo$2(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_hi$1(e,t){var r=rotr64_hi$2(e,t,1);var n=rotr64_hi$2(e,t,8);var i=shr64_hi$2(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_lo$1(e,t){var r=rotr64_lo$2(e,t,1);var n=rotr64_lo$2(e,t,8);var i=shr64_lo$2(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_hi$1(e,t){var r=rotr64_hi$2(e,t,19);var n=rotr64_hi$2(t,e,29);var i=shr64_hi$2(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_lo$1(e,t){var r=rotr64_lo$2(e,t,19);var n=rotr64_lo$2(t,e,29);var i=shr64_lo$2(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function SHA384$3(){if(!(this instanceof SHA384$3))return new SHA384$3;_512$1.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$9.inherits(SHA384$3,_512$1);var _384$1=SHA384$3;SHA384$3.blockSize=1024;SHA384$3.outSize=384;SHA384$3.hmacStrength=192;SHA384$3.padLength=128;SHA384$3.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h.slice(0,12),"big");else return utils$9.split32(this.h.slice(0,12),"big")};var sha1$2=_1$1;var sha224$1=_224$1;var sha256$5=_256$1;var sha384$1=_384$1;var sha512$3=_512$1;var sha$2={sha1:sha1$2,sha224:sha224$1,sha256:sha256$5,sha384:sha384$1,sha512:sha512$3};var rotl32$3=utils$9.rotl32;var sum32$4=utils$9.sum32;var sum32_3$2=utils$9.sum32_3;var sum32_4$3=utils$9.sum32_4;var BlockHash$5=common$4.BlockHash;function RIPEMD160$1(){if(!(this instanceof RIPEMD160$1))return new RIPEMD160$1;BlockHash$5.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils$9.inherits(RIPEMD160$1,BlockHash$5);var ripemd160$3=RIPEMD160$1;RIPEMD160$1.blockSize=512;RIPEMD160$1.outSize=160;RIPEMD160$1.hmacStrength=192;RIPEMD160$1.padLength=64;RIPEMD160$1.prototype._update=function e(t,r){var n=this.h[0];var i=this.h[1];var s=this.h[2];var a=this.h[3];var o=this.h[4];var f=n;var c=i;var u=s;var l=a;var h=o;for(var d=0;d<80;d++){var p=sum32$4(rotl32$3(sum32_4$3(n,f$1(d,i,s,a),t[r$3[d]+r],K$1(d)),s$1[d]),o);n=o;o=a;a=rotl32$3(s,10);s=i;i=p;p=sum32$4(rotl32$3(sum32_4$3(f,f$1(79-d,c,u,l),t[rh$1[d]+r],Kh$1(d)),sh$1[d]),h);f=h;h=l;l=rotl32$3(u,10);u=c;c=p}p=sum32_3$2(this.h[1],s,l);this.h[1]=sum32_3$2(this.h[2],a,h);this.h[2]=sum32_3$2(this.h[3],o,f);this.h[3]=sum32_3$2(this.h[4],n,c);this.h[4]=sum32_3$2(this.h[0],i,u);this.h[0]=p};RIPEMD160$1.prototype._digest=function e(t){if(t==="hex")return utils$9.toHex32(this.h,"little");else return utils$9.split32(this.h,"little")};function f$1(e,t,r,n){if(e<=15)return t^r^n;else if(e<=31)return t&r|~t&n;else if(e<=47)return(t|~r)^n;else if(e<=63)return t&n|r&~n;else return t^(r|~n)}function K$1(e){if(e<=15)return 0;else if(e<=31)return 1518500249;else if(e<=47)return 1859775393;else if(e<=63)return 2400959708;else return 2840853838}function Kh$1(e){if(e<=15)return 1352829926;else if(e<=31)return 1548603684;else if(e<=47)return 1836072691;else if(e<=63)return 2053994217;else return 0}var r$3=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh$1=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh$1=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var ripemd$1={ripemd160:ripemd160$3};function Hmac$2(e,t,r){if(!(this instanceof Hmac$2))return new Hmac$2(e,t,r);this.Hash=e;this.blockSize=e.blockSize/8;this.outSize=e.outSize/8;this.inner=null;this.outer=null;this._init(utils$9.toArray(t,r))}var hmac$1=Hmac$2;Hmac$2.prototype._init=function e(t){if(t.length>this.blockSize)t=(new this.Hash).update(t).digest();minimalisticAssert$3(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;this.inner=(new this.Hash).update(t);for(r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)};Hmac$2.prototype.update=function e(t,r){this.inner.update(t,r);return this};Hmac$2.prototype.digest=function e(t){this.outer.update(this.inner.digest());return this.outer.digest(t)};var hash_1$3=createCommonjsModule$2((function(e,t){var r=t;r.utils=utils$9;r.common=common$4;r.sha=sha$2;r.ripemd=ripemd$1;r.hmac=hmac$1;r.sha1=r.sha.sha1;r.sha256=r.sha.sha256;r.sha224=r.sha.sha224;r.sha384=r.sha.sha384;r.sha512=r.sha.sha512;r.ripemd160=r.ripemd.ripemd160}));function createCommonjsModule$1(e,t,r){return r={path:t,exports:{},require:function(e,t){return commonjsRequire$1()}},e(r,r.exports),r.exports}function commonjsRequire$1(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert$2=assert$c;function assert$c(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$c.equal=function e(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var utils_1$3=createCommonjsModule$1((function(e,t){var r=t;function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var n=0;n<e.length;n++)r[n]=e[n]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else{for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=n;function i(e){if(e.length===1)return"0"+e;else return e}r.zero2=i;function s(e){var t="";for(var r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toHex=s;r.encode=function e(t,r){if(r==="hex")return s(t);else return t}}));var utils_1$1$2=createCommonjsModule$1((function(e,t){var r=t;r.assert=minimalisticAssert$2;r.toArray=utils_1$3.toArray;r.zero2=utils_1$3.zero2;r.toHex=utils_1$3.toHex;r.encode=utils_1$3.encode;function n(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);var i=1<<t+1;var s=e.clone();for(var a=0;a<n.length;a++){var o;var f=s.andln(i-1);if(s.isOdd()){if(f>(i>>1)-1)o=(i>>1)-f;else o=f;s.isubn(o)}else{o=0}n[a]=o;s.iushrn(1)}return n}r.getNAF=n;function i(e,t){var r=[[],[]];e=e.clone();t=t.clone();var n=0;var i=0;var s;while(e.cmpn(-n)>0||t.cmpn(-i)>0){var a=e.andln(3)+n&3;var o=t.andln(3)+i&3;if(a===3)a=-1;if(o===3)o=-1;var f;if((a&1)===0){f=0}else{s=e.andln(7)+n&7;if((s===3||s===5)&&o===2)f=-a;else f=a}r[0].push(f);var c;if((o&1)===0){c=0}else{s=t.andln(7)+i&7;if((s===3||s===5)&&a===2)c=-o;else c=o}r[1].push(c);if(2*n===f+1)n=1-n;if(2*i===c+1)i=1-i;e.iushrn(1);t.iushrn(1)}return r}r.getJSF=i;function s(e,t,r){var n="_"+t;e.prototype[t]=function e(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}r.cachedProperty=s;function a(e){return typeof e==="string"?r.toArray(e,"hex"):e}r.parseBytes=a;function o(e){return new bn$2(e,"hex","le")}r.intFromLE=o}));var getNAF$2=utils_1$1$2.getNAF;var getJSF$2=utils_1$1$2.getJSF;var assert$1$2=utils_1$1$2.assert;function BaseCurve$2(e,t){this.type=e;this.p=new bn$2(t.p,16);this.red=t.prime?bn$2.red(t.prime):bn$2.mont(this.p);this.zero=new bn$2(0).toRed(this.red);this.one=new bn$2(1).toRed(this.red);this.two=new bn$2(2).toRed(this.red);this.n=t.n&&new bn$2(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$6=BaseCurve$2;BaseCurve$2.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve$2.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve$2.prototype._fixedNafMul=function e(t,r){assert$1$2(t.precomputed);var n=t._getDoubles();var i=getNAF$2(r,1,this._bitLength);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];var o;var f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}var u=this.jpoint(null,null,null);var l=this.jpoint(null,null,null);for(var h=s;h>0;h--){for(o=0;o<a.length;o++){f=a[o];if(f===h)l=l.mixedAdd(n.points[o]);else if(f===-h)l=l.mixedAdd(n.points[o].neg())}u=u.add(l)}return u.toP()};BaseCurve$2.prototype._wnafMul=function e(t,r){var n=4;var i=t._getNAFPoints(n);n=i.wnd;var s=i.points;var a=getNAF$2(r,n,this._bitLength);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0)c++;o=o.dblp(c);if(f<0)break;var u=a[f];assert$1$2(u!==0);if(t.type==="affine"){if(u>0)o=o.mixedAdd(s[u-1>>1]);else o=o.mixedAdd(s[-u-1>>1].neg())}else{if(u>0)o=o.add(s[u-1>>1]);else o=o.add(s[-u-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve$2.prototype._wnafMulAdd=function e(t,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;var u;var l;var h;for(u=0;u<i;u++){h=r[u];var d=h._getNAFPoints(t);a[u]=d.wnd;o[u]=d.points}for(u=i-1;u>=1;u-=2){var p=u-1;var y=u;if(a[p]!==1||a[y]!==1){f[p]=getNAF$2(n[p],a[p],this._bitLength);f[y]=getNAF$2(n[y],a[y],this._bitLength);c=Math.max(f[p].length,c);c=Math.max(f[y].length,c);continue}var m=[r[p],null,null,r[y]];if(r[p].y.cmp(r[y].y)===0){m[1]=r[p].add(r[y]);m[2]=r[p].toJ().mixedAdd(r[y].neg())}else if(r[p].y.cmp(r[y].y.redNeg())===0){m[1]=r[p].toJ().mixedAdd(r[y]);m[2]=r[p].add(r[y].neg())}else{m[1]=r[p].toJ().mixedAdd(r[y]);m[2]=r[p].toJ().mixedAdd(r[y].neg())}var g=[-3,-1,-5,-7,0,7,5,1,3];var b=getJSF$2(n[p],n[y]);c=Math.max(b[0].length,c);f[p]=new Array(c);f[y]=new Array(c);for(l=0;l<c;l++){var v=b[0][l]|0;var w=b[1][l]|0;f[p][l]=g[(v+1)*3+(w+1)];f[y][l]=0;o[p]=m}}var A=this.jpoint(null,null,null);var E=this._wnafT4;for(u=c;u>=0;u--){var _=0;while(u>=0){var S=true;for(l=0;l<i;l++){E[l]=f[l][u]|0;if(E[l]!==0)S=false}if(!S)break;_++;u--}if(u>=0)_++;A=A.dblp(_);if(u<0)break;for(l=0;l<i;l++){var $=E[l];if($===0)continue;else if($>0)h=o[l][$-1>>1];else if($<0)h=o[l][-$-1>>1].neg();if(h.type==="affine")A=A.mixedAdd(h);else A=A.add(h)}}for(u=0;u<i;u++)o[u]=null;if(s)return A;else return A.toP()};function BasePoint$2(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve$2.BasePoint=BasePoint$2;BasePoint$2.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint$2.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve$2.prototype.decodePoint=function e(t,r){t=utils_1$1$2.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){if(t[0]===6)assert$1$2(t[t.length-1]%2===0);else if(t[0]===7)assert$1$2(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n){return this.pointFromX(t.slice(1,1+n),t[0]===3)}throw new Error("Unknown point format")};BasePoint$2.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint$2.prototype._encode=function e(t){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};BasePoint$2.prototype.encode=function e(t,r){return utils_1$1$2.encode(this._encode(r),t)};BasePoint$2.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint$2.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint$2.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)i=i.dbl();n.push(i)}return{step:t,points:n}};BasePoint$2.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<t)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};BasePoint$2.prototype._getBeta=function e(){return null};BasePoint$2.prototype.dblp=function e(t){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r};var inherits_browser$2=createCommonjsModule$1((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}}));var assert$2$2=utils_1$1$2.assert;function ShortCurve$2(e){base$6.call(this,"short",e);this.a=new bn$2(e.a,16).toRed(this.red);this.b=new bn$2(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits_browser$2(ShortCurve$2,base$6);var short_1$2=ShortCurve$2;ShortCurve$2.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(t.beta){r=new bn$2(t.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(t.lambda){n=new bn$2(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];assert$2$2(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new bn$2(e.a,16),b:new bn$2(e.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};ShortCurve$2.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:bn$2.mont(t);var n=new bn$2(2).toRed(r).redInvm();var i=n.redNeg();var s=new bn$2(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};ShortCurve$2.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=t;var i=this.n.clone();var s=new bn$2(1);var a=new bn$2(0);var o=new bn$2(0);var f=new bn$2(1);var c;var u;var l;var h;var d;var p;var y;var m=0;var g;var b;while(n.cmpn(0)!==0){var v=i.div(n);g=i.sub(v.mul(n));b=o.sub(v.mul(s));var w=f.sub(v.mul(a));if(!l&&g.cmp(r)<0){c=y.neg();u=s;l=g.neg();h=b}else if(l&&++m===2){break}y=g;i=n;n=g;o=s;s=b;f=a;a=w}d=g.neg();p=b;var A=l.sqr().add(h.sqr());var E=d.sqr().add(p.sqr());if(E.cmp(A)>=0){d=c;p=u}if(l.negative){l=l.neg();h=h.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:l,b:h},{a:d,b:p}]};ShortCurve$2.prototype._endoSplit=function e(t){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(t).divRound(this.n);var a=n.b.neg().mul(t).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var l=t.sub(o).sub(f);var h=c.add(u).neg();return{k1:l,k2:h}};ShortCurve$2.prototype.pointFromX=function e(t,r){t=new bn$2(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(t,i)};ShortCurve$2.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var n=t.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ShortCurve$2.prototype._endoWnafMulAdd=function e(t,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var l=0;l<a*2;l++){i[l]=null;s[l]=null}return u};function Point$4(e,t,r,n){base$6.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new bn$2(t,16);this.y=new bn$2(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits_browser$2(Point$4,base$6.BasePoint);ShortCurve$2.prototype.point=function e(t,r,n){return new Point$4(this,t,r,n)};ShortCurve$2.prototype.pointFromJSON=function e(t,r){return Point$4.fromJSON(this,t,r)};Point$4.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve;var i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r};Point$4.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$4.fromJSON=function e(t,r,n){if(typeof r==="string")r=JSON.parse(r);var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(e){return t.point(e[0],e[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};Point$4.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function e(){return this.inf};Point$4.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(t.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Point$4.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=t.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$4.prototype.getX=function e(){return this.x.fromRed()};Point$4.prototype.getY=function e(){return this.y.fromRed()};Point$4.prototype.mul=function e(t){t=new bn$2(t,16);if(this.isInfinity())return this;else if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$4.prototype.mulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};Point$4.prototype.jmulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};Point$4.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$4.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed;var i=function(e){return e.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Point$4.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint$2(e,t,r,n){base$6.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn$2(0)}else{this.x=new bn$2(t,16);this.y=new bn$2(r,16);this.z=new bn$2(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits_browser$2(JPoint$2,base$6.BasePoint);ShortCurve$2.prototype.jpoint=function e(t,r,n){return new JPoint$2(this,t,r,n)};JPoint$2.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};JPoint$2.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$2.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=t.x.redMul(n);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var l=u.redMul(f);var h=i.redMul(u);var d=c.redSqr().redIAdd(l).redISub(h).redISub(h);var p=c.redMul(h.redISub(d)).redISub(a.redMul(l));var y=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,y)};JPoint$2.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var l=n.redMul(c);var h=f.redSqr().redIAdd(u).redISub(l).redISub(l);var d=f.redMul(l.redISub(h)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(h,d,p)};JPoint$2.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(r=0;r<t;r++){var l=a.redSqr();var h=u.redSqr();var d=h.redSqr();var p=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c));var y=a.redMul(h);var m=p.redSqr().redISub(y.redAdd(y));var g=y.redISub(m);var b=p.redMul(g);b=b.redIAdd(b).redISub(d);var v=u.redMul(f);if(r+1<t)c=c.redMul(d);a=m;f=v;u=b}return this.curve.jpoint(a,u.redMul(s),f)};JPoint$2.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint$2.prototype._zeroDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.x.redSqr();var h=this.y.redSqr();var d=h.redSqr();var p=this.x.redAdd(h).redSqr().redISub(l).redISub(d);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l);var m=y.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);t=m.redISub(p).redISub(p);r=y.redMul(p.redISub(t)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};JPoint$2.prototype._threeDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.z.redSqr();var h=this.y.redSqr();var d=this.x.redMul(h);var p=this.x.redSub(l).redMul(this.x.redAdd(l));p=p.redAdd(p).redIAdd(p);var y=d.redIAdd(d);y=y.redIAdd(y);var m=y.redAdd(y);t=p.redSqr().redISub(m);n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=p.redMul(y.redISub(t)).redISub(g)}return this.curve.jpoint(t,r,n)};JPoint$2.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var l=f.redSqr().redISub(u.redAdd(u));var h=u.redISub(l);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(h).redISub(d);var y=n.redAdd(n).redMul(i);return this.curve.jpoint(l,p,y)};JPoint$2.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var l=r.redMul(u);l=l.redIAdd(l);l=l.redIAdd(l);var h=this.x.redMul(f).redISub(l);h=h.redIAdd(h);h=h.redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(h,d,p)};JPoint$2.prototype.mul=function e(t,r){t=new bn$2(t,r);return this.curve._wnafMul(this,t)};JPoint$2.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};JPoint$2.prototype.eqXToP=function e(t){var r=this.z.redSqr();var n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=t.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};JPoint$2.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$2.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};var curve_1$2=createCommonjsModule$1((function(e,t){var r=t;r.base=base$6;r.short=short_1$2;r.mont=null;r.edwards=null}));var curves_1$2=createCommonjsModule$1((function(e,t){var r=t;var n=utils_1$1$2.assert;function i(e){if(e.type==="short")this.curve=new curve_1$2.short(e);else if(e.type==="edwards")this.curve=new curve_1$2.edwards(e);else this.curve=new curve_1$2.mont(e);this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;n(this.g.validate(),"Invalid curve");n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(e,t){Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function(){var n=new i(t);Object.defineProperty(r,e,{configurable:true,enumerable:true,value:n});return n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1$3.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1$3.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1$3.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1$3.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1$3.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$3.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$3.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch(e){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function HmacDRBG$2(e){if(!(this instanceof HmacDRBG$2))return new HmacDRBG$2(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils_1$3.toArray(e.entropy,e.entropyEnc||"hex");var r=utils_1$3.toArray(e.nonce,e.nonceEnc||"hex");var n=utils_1$3.toArray(e.pers,e.persEnc||"hex");minimalisticAssert$2(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,n)}var hmacDrbg$2=HmacDRBG$2;HmacDRBG$2.prototype._init=function e(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG$2.prototype._hmac=function e(){return new hash_1$3.hmac(this.hash,this.K)};HmacDRBG$2.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG$2.prototype.reseed=function e(t,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}t=utils_1$3.toArray(t,r);n=utils_1$3.toArray(n,i);minimalisticAssert$2(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(n||[]));this._reseed=1};HmacDRBG$2.prototype.generate=function e(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=utils_1$3.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(n);this._reseed++;return utils_1$3.encode(a,r)};var assert$3$2=utils_1$1$2.assert;function KeyPair$3(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$3=KeyPair$3;KeyPair$3.fromPublic=function e(t,r,n){if(r instanceof KeyPair$3)return r;return new KeyPair$3(t,{pub:r,pubEnc:n})};KeyPair$3.fromPrivate=function e(t,r,n){if(r instanceof KeyPair$3)return r;return new KeyPair$3(t,{priv:r,privEnc:n})};KeyPair$3.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$3.prototype.getPublic=function e(t,r){if(typeof t==="string"){r=t;t=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!r)return this.pub;return this.pub.encode(r,t)};KeyPair$3.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$3.prototype._importPrivate=function e(t,r){this.priv=new bn$2(t,r||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$3$2(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$3$2(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$3.prototype.derive=function e(t){if(!t.validate()){assert$3$2(t.validate(),"public point not validated")}return t.mul(this.priv).getX()};KeyPair$3.prototype.sign=function e(t,r,n){return this.ec.sign(t,this,r,n)};KeyPair$3.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$3.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$2=utils_1$1$2.assert;function Signature$4(e,t){if(e instanceof Signature$4)return e;if(this._importDER(e,t))return;assert$4$2(e.r&&e.s,"Signature without r or s");this.r=new bn$2(e.r,16);this.s=new bn$2(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$3=Signature$4;function Position$2(){this.place=0}function getLength$2(e,t){var r=e[t.place++];if(!(r&128)){return r}var n=r&15;if(n===0||n>4){return false}var i=0;for(var s=0,a=t.place;s<n;s++,a++){i<<=8;i|=e[a];i>>>=0}if(i<=127){return false}t.place=a;return i}function rmPadding$2(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$4.prototype._importDER=function e(t,r){t=utils_1$1$2.toArray(t,r);var n=new Position$2;if(t[n.place++]!==48){return false}var i=getLength$2(t,n);if(i===false){return false}if(i+n.place!==t.length){return false}if(t[n.place++]!==2){return false}var s=getLength$2(t,n);if(s===false){return false}var a=t.slice(n.place,s+n.place);n.place+=s;if(t[n.place++]!==2){return false}var o=getLength$2(t,n);if(o===false){return false}if(t.length!==o+n.place){return false}var f=t.slice(n.place,o+n.place);if(a[0]===0){if(a[1]&128){a=a.slice(1)}else{return false}}if(f[0]===0){if(f[1]&128){f=f.slice(1)}else{return false}}this.r=new bn$2(a);this.s=new bn$2(f);this.recoveryParam=null;return true};function constructLength$2(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$4.prototype.toDER=function e(t){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=rmPadding$2(r);n=rmPadding$2(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];constructLength$2(i,r.length);i=i.concat(r);i.push(2);constructLength$2(i,n.length);var s=i.concat(n);var a=[48];constructLength$2(a,s.length);a=a.concat(s);return utils_1$1$2.encode(a,t)};var rand$1=function(){throw new Error("unsupported")};var assert$5$2=utils_1$1$2.assert;function EC$2(e){if(!(this instanceof EC$2))return new EC$2(e);if(typeof e==="string"){assert$5$2(Object.prototype.hasOwnProperty.call(curves_1$2,e),"Unknown curve "+e);e=curves_1$2[e]}if(e instanceof curves_1$2.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec$2=EC$2;EC$2.prototype.keyPair=function e(t){return new key$3(this,t)};EC$2.prototype.keyFromPrivate=function e(t,r){return key$3.fromPrivate(this,t,r)};EC$2.prototype.keyFromPublic=function e(t,r){return key$3.fromPublic(this,t,r)};EC$2.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg$2({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||rand$1(),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});var n=this.n.byteLength();var i=this.n.sub(new bn$2(2));for(;;){var s=new bn$2(r.generate(n));if(s.cmp(i)>0)continue;s.iaddn(1);return this.keyFromPrivate(s)}};EC$2.prototype._truncateToN=function e(t,r){var n=t.byteLength()*8-this.n.bitLength();if(n>0)t=t.ushrn(n);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC$2.prototype.sign=function e(t,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);t=this._truncateToN(new bn$2(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new hmacDrbg$2({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new bn$2(1));for(var u=0;;u++){var l=i.k?i.k(u):new bn$2(f.generate(this.n.byteLength()));l=this._truncateToN(l,true);if(l.cmpn(1)<=0||l.cmp(c)>=0)continue;var h=this.g.mul(l);if(h.isInfinity())continue;var d=h.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var y=l.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));y=y.umod(this.n);if(y.cmpn(0)===0)continue;var m=(h.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(i.canonical&&y.cmp(this.nh)>0){y=this.n.sub(y);m^=1}return new signature$3({r:p,s:y,recoveryParam:m})}};EC$2.prototype.verify=function e(t,r,n,i){t=this._truncateToN(new bn$2(t,16));n=this.keyFromPublic(n,i);r=new signature$3(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);var u;if(!this.curve._maxwellTrick){u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC$2.prototype.recoverPubKey=function(e,t,r,n){assert$5$2((3&r)===r,"The recovery param is more than two bits");t=new signature$3(t,n);var i=this.n;var s=new bn$2(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(i);var l=i.sub(s).mul(u).umod(i);var h=o.mul(u).umod(i);return this.g.mulAdd(l,a,h)};EC$2.prototype.getKeyRecoveryParam=function(e,t,r,n){t=new signature$3(t,n);if(t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var elliptic_1$2=createCommonjsModule$1((function(e,t){var r=t;r.version={version:"6.5.4"}.version;r.utils=utils_1$1$2;r.rand=function(){throw new Error("unsupported")};r.curve=curve_1$2;r.curves=curves_1$2;r.ec=ec$2;r.eddsa=null}));var EC$1$2=elliptic_1$2.ec;const version$E="signing-key/5.7.0";const logger$1b=new Logger$1(version$E);let _curve$1=null;function getCurve$1(){if(!_curve$1){_curve$1=new EC$1$2("secp256k1")}return _curve$1}class SigningKey$1{constructor(e){defineReadOnly$1(this,"curve","secp256k1");defineReadOnly$1(this,"privateKey",hexlify$1(e));if(hexDataLength$1(this.privateKey)!==32){logger$1b.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]")}const t=getCurve$1().keyFromPrivate(arrayify$2(this.privateKey));defineReadOnly$1(this,"publicKey","0x"+t.getPublic(false,"hex"));defineReadOnly$1(this,"compressedPublicKey","0x"+t.getPublic(true,"hex"));defineReadOnly$1(this,"_isSigningKey",true)}_addPoint(e){const t=getCurve$1().keyFromPublic(arrayify$2(this.publicKey));const r=getCurve$1().keyFromPublic(arrayify$2(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=getCurve$1().keyFromPrivate(arrayify$2(this.privateKey));const r=arrayify$2(e);if(r.length!==32){logger$1b.throwArgumentError("bad digest length","digest",e)}const n=t.sign(r,{canonical:true});return splitSignature$1({recoveryParam:n.recoveryParam,r:hexZeroPad$1("0x"+n.r.toString(16),32),s:hexZeroPad$1("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=getCurve$1().keyFromPrivate(arrayify$2(this.privateKey));const r=getCurve$1().keyFromPublic(arrayify$2(computePublicKey$1(e)));return hexZeroPad$1("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey$1(e,t){const r=splitSignature$1(t);const n={r:arrayify$2(r.r),s:arrayify$2(r.s)};return"0x"+getCurve$1().recoverPubKey(arrayify$2(e),n,r.recoveryParam).encode("hex",false)}function computePublicKey$1(e,t){const r=arrayify$2(e);if(r.length===32){const e=new SigningKey$1(r);if(t){return"0x"+getCurve$1().keyFromPrivate(r).getPublic(true,"hex")}return e.publicKey}else if(r.length===33){if(t){return hexlify$1(r)}return"0x"+getCurve$1().keyFromPublic(r).getPublic(false,"hex")}else if(r.length===65){if(!t){return hexlify$1(r)}return"0x"+getCurve$1().keyFromPublic(r).getPublic(true,"hex")}return logger$1b.throwArgumentError("invalid public or private key","key","[REDACTED]")}const lib_esm$w=Object.freeze({__proto__:null,SigningKey:SigningKey$1,recoverPublicKey:recoverPublicKey$1,computePublicKey:computePublicKey$1});const version$D="transactions/5.7.0";const logger$1a=new Logger$1(version$D);var TransactionTypes$1;(function(e){e[e["legacy"]=0]="legacy";e[e["eip2930"]=1]="eip2930";e[e["eip1559"]=2]="eip1559"})(TransactionTypes$1||(TransactionTypes$1={}));function handleAddress$1(e){if(e==="0x"){return null}return getAddress$1(e)}function handleNumber$1(e){if(e==="0x"){return Zero$4}return BigNumber$2.from(e)}const transactionFields$1=[{name:"nonce",maxLength:32,numeric:true},{name:"gasPrice",maxLength:32,numeric:true},{name:"gasLimit",maxLength:32,numeric:true},{name:"to",length:20},{name:"value",maxLength:32,numeric:true},{name:"data"}];const allowedTransactionKeys$6={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,type:true,value:true};function computeAddress$1(e){const t=computePublicKey$1(e);return getAddress$1(hexDataSlice$1(keccak256$3(hexDataSlice$1(t,1)),12))}function recoverAddress$1(e,t){return computeAddress$1(recoverPublicKey$1(arrayify$2(e),t))}function formatNumber$1(e,t){const r=stripZeros$1(BigNumber$2.from(e).toHexString());if(r.length>32){logger$1a.throwArgumentError("invalid length for "+t,"transaction:"+t,e)}return r}function accessSetify$1(e,t){return{address:getAddress$1(e),storageKeys:(t||[]).map(((t,r)=>{if(hexDataLength$1(t)!==32){logger$1a.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t)}return t.toLowerCase()}))}}function accessListify$1(e){if(Array.isArray(e)){return e.map(((e,t)=>{if(Array.isArray(e)){if(e.length>2){logger$1a.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e)}return accessSetify$1(e[0],e[1])}return accessSetify$1(e.address,e.storageKeys)}))}const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>{e[t]=true;return e}),{});return accessSetify$1(t,Object.keys(r).sort())}));t.sort(((e,t)=>e.address.localeCompare(t.address)));return t}function formatAccessList$1(e){return accessListify$1(e).map((e=>[e.address,e.storageKeys]))}function _serializeEip1559$1(e,t){if(e.gasPrice!=null){const t=BigNumber$2.from(e.gasPrice);const r=BigNumber$2.from(e.maxFeePerGas||0);if(!t.eq(r)){logger$1a.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}}const r=[formatNumber$1(e.chainId||0,"chainId"),formatNumber$1(e.nonce||0,"nonce"),formatNumber$1(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber$1(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber$1(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress$1(e.to):"0x",formatNumber$1(e.value||0,"value"),e.data||"0x",formatAccessList$1(e.accessList||[])];if(t){const e=splitSignature$1(t);r.push(formatNumber$1(e.recoveryParam,"recoveryParam"));r.push(stripZeros$1(e.r));r.push(stripZeros$1(e.s))}return hexConcat$1(["0x02",encode$b(r)])}function _serializeEip2930$1(e,t){const r=[formatNumber$1(e.chainId||0,"chainId"),formatNumber$1(e.nonce||0,"nonce"),formatNumber$1(e.gasPrice||0,"gasPrice"),formatNumber$1(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress$1(e.to):"0x",formatNumber$1(e.value||0,"value"),e.data||"0x",formatAccessList$1(e.accessList||[])];if(t){const e=splitSignature$1(t);r.push(formatNumber$1(e.recoveryParam,"recoveryParam"));r.push(stripZeros$1(e.r));r.push(stripZeros$1(e.s))}return hexConcat$1(["0x01",encode$b(r)])}function _serialize$1(e,t){checkProperties$1(e,allowedTransactionKeys$6);const r=[];transactionFields$1.forEach((function(t){let n=e[t.name]||[];const i={};if(t.numeric){i.hexPad="left"}n=arrayify$2(hexlify$1(n,i));if(t.length&&n.length!==t.length&&n.length>0){logger$1a.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}if(t.maxLength){n=stripZeros$1(n);if(n.length>t.maxLength){logger$1a.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}}r.push(hexlify$1(n))}));let n=0;if(e.chainId!=null){n=e.chainId;if(typeof n!=="number"){logger$1a.throwArgumentError("invalid transaction.chainId","transaction",e)}}else if(t&&!isBytesLike$1(t)&&t.v>28){n=Math.floor((t.v-35)/2)}if(n!==0){r.push(hexlify$1(n));r.push("0x");r.push("0x")}if(!t){return encode$b(r)}const i=splitSignature$1(t);let s=27+i.recoveryParam;if(n!==0){r.pop();r.pop();r.pop();s+=n*2+8;if(i.v>28&&i.v!==s){logger$1a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}}else if(i.v!==s){logger$1a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}r.push(hexlify$1(s));r.push(stripZeros$1(arrayify$2(i.r)));r.push(stripZeros$1(arrayify$2(i.s)));return encode$b(r)}function serialize$5(e,t){if(e.type==null||e.type===0){if(e.accessList!=null){logger$1a.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e)}return _serialize$1(e,t)}switch(e.type){case 1:return _serializeEip2930$1(e,t);case 2:return _serializeEip1559$1(e,t)}return logger$1a.throwError(`unsupported transaction type: ${e.type}`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function _parseEipSignature$1(e,t,r){try{const r=handleNumber$1(t[0]).toNumber();if(r!==0&&r!==1){throw new Error("bad recid")}e.v=r}catch(e){logger$1a.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=hexZeroPad$1(t[1],32);e.s=hexZeroPad$1(t[2],32);try{const t=keccak256$3(r(e));e.from=recoverAddress$1(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function _parseEip1559$1(e){const t=decode$a(e.slice(1));if(t.length!==9&&t.length!==12){logger$1a.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify$1(e))}const r=handleNumber$1(t[2]);const n=handleNumber$1(t[3]);const i={type:2,chainId:handleNumber$1(t[0]).toNumber(),nonce:handleNumber$1(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:handleNumber$1(t[4]),to:handleAddress$1(t[5]),value:handleNumber$1(t[6]),data:t[7],accessList:accessListify$1(t[8])};if(t.length===9){return i}i.hash=keccak256$3(e);_parseEipSignature$1(i,t.slice(9),_serializeEip1559$1);return i}function _parseEip2930$1(e){const t=decode$a(e.slice(1));if(t.length!==8&&t.length!==11){logger$1a.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify$1(e))}const r={type:1,chainId:handleNumber$1(t[0]).toNumber(),nonce:handleNumber$1(t[1]).toNumber(),gasPrice:handleNumber$1(t[2]),gasLimit:handleNumber$1(t[3]),to:handleAddress$1(t[4]),value:handleNumber$1(t[5]),data:t[6],accessList:accessListify$1(t[7])};if(t.length===8){return r}r.hash=keccak256$3(e);_parseEipSignature$1(r,t.slice(8),_serializeEip2930$1);return r}function _parse$1(e){const t=decode$a(e);if(t.length!==9&&t.length!==6){logger$1a.throwArgumentError("invalid raw transaction","rawTransaction",e)}const r={nonce:handleNumber$1(t[0]).toNumber(),gasPrice:handleNumber$1(t[1]),gasLimit:handleNumber$1(t[2]),to:handleAddress$1(t[3]),value:handleNumber$1(t[4]),data:t[5],chainId:0};if(t.length===6){return r}try{r.v=BigNumber$2.from(t[6]).toNumber()}catch(e){return r}r.r=hexZeroPad$1(t[7],32);r.s=hexZeroPad$1(t[8],32);if(BigNumber$2.from(r.r).isZero()&&BigNumber$2.from(r.s).isZero()){r.chainId=r.v;r.v=0}else{r.chainId=Math.floor((r.v-35)/2);if(r.chainId<0){r.chainId=0}let n=r.v-27;const i=t.slice(0,6);if(r.chainId!==0){i.push(hexlify$1(r.chainId));i.push("0x");i.push("0x");n-=r.chainId*2+8}const s=keccak256$3(encode$b(i));try{r.from=recoverAddress$1(s,{r:hexlify$1(r.r),s:hexlify$1(r.s),recoveryParam:n})}catch(e){}r.hash=keccak256$3(e)}r.type=null;return r}function parse$1(e){const t=arrayify$2(e);if(t[0]>127){return _parse$1(t)}switch(t[0]){case 1:return _parseEip2930$1(t);case 2:return _parseEip1559$1(t)}return logger$1a.throwError(`unsupported transaction type: ${t[0]}`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}const lib_esm$v=Object.freeze({__proto__:null,get TransactionTypes(){return TransactionTypes$1},computeAddress:computeAddress$1,recoverAddress:recoverAddress$1,accessListify:accessListify$1,serialize:serialize$5,parse:parse$1});const version$C="contracts/5.7.0";var __awaiter$t=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$19=new Logger$1(version$C);const allowedTransactionKeys$5={chainId:true,data:true,from:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true,customData:true,ccipReadEnabled:true};function resolveName$1(e,t){return __awaiter$t(this,void 0,void 0,(function*(){const r=yield t;if(typeof r!=="string"){logger$19.throwArgumentError("invalid address or ENS name","name",r)}try{return getAddress$1(r)}catch(e){}if(!e){logger$19.throwError("a provider or signer is needed to resolve ENS names",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"})}const n=yield e.resolveName(r);if(n==null){logger$19.throwArgumentError("resolver or addr is not configured for ENS name","name",r)}return n}))}function resolveAddresses$1(e,t,r){return __awaiter$t(this,void 0,void 0,(function*(){if(Array.isArray(r)){return yield Promise.all(r.map(((r,n)=>resolveAddresses$1(e,Array.isArray(t)?t[n]:t[r.name],r))))}if(r.type==="address"){return yield resolveName$1(e,t)}if(r.type==="tuple"){return yield resolveAddresses$1(e,t,r.components)}if(r.baseType==="array"){if(!Array.isArray(t)){return Promise.reject(logger$19.makeError("invalid value for array",Logger$1.errors.INVALID_ARGUMENT,{argument:"value",value:t}))}return yield Promise.all(t.map((t=>resolveAddresses$1(e,t,r.arrayChildren))))}return t}))}function populateTransaction$1(e,t,r){return __awaiter$t(this,void 0,void 0,(function*(){let n={};if(r.length===t.inputs.length+1&&typeof r[r.length-1]==="object"){n=shallowCopy$1(r.pop())}logger$19.checkArgumentCount(r.length,t.inputs.length,"passed to contract");if(e.signer){if(n.from){n.from=resolveProperties$1({override:resolveName$1(e.signer,n.from),signer:e.signer.getAddress()}).then((e=>__awaiter$t(this,void 0,void 0,(function*(){if(getAddress$1(e.signer)!==e.override){logger$19.throwError("Contract with a Signer cannot override from",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"})}return e.override}))))}else{n.from=e.signer.getAddress()}}else if(n.from){n.from=resolveName$1(e.provider,n.from)}const i=yield resolveProperties$1({args:resolveAddresses$1(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:resolveProperties$1(n)||{}});const s=e.interface.encodeFunctionData(t,i.args);const a={data:s,to:i.address};const o=i.overrides;if(o.nonce!=null){a.nonce=BigNumber$2.from(o.nonce).toNumber()}if(o.gasLimit!=null){a.gasLimit=BigNumber$2.from(o.gasLimit)}if(o.gasPrice!=null){a.gasPrice=BigNumber$2.from(o.gasPrice)}if(o.maxFeePerGas!=null){a.maxFeePerGas=BigNumber$2.from(o.maxFeePerGas)}if(o.maxPriorityFeePerGas!=null){a.maxPriorityFeePerGas=BigNumber$2.from(o.maxPriorityFeePerGas)}if(o.from!=null){a.from=o.from}if(o.type!=null){a.type=o.type}if(o.accessList!=null){a.accessList=accessListify$1(o.accessList)}if(a.gasLimit==null&&t.gas!=null){let e=21e3;const r=arrayify$2(s);for(let t=0;t<r.length;t++){e+=4;if(r[t]){e+=64}}a.gasLimit=BigNumber$2.from(t.gas).add(e)}if(o.value){const e=BigNumber$2.from(o.value);if(!e.isZero()&&!t.payable){logger$19.throwError("non-payable method cannot override value",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value})}a.value=e}if(o.customData){a.customData=shallowCopy$1(o.customData)}if(o.ccipReadEnabled){a.ccipReadEnabled=!!o.ccipReadEnabled}delete n.nonce;delete n.gasLimit;delete n.gasPrice;delete n.from;delete n.value;delete n.type;delete n.accessList;delete n.maxFeePerGas;delete n.maxPriorityFeePerGas;delete n.customData;delete n.ccipReadEnabled;const f=Object.keys(n).filter((e=>n[e]!=null));if(f.length){logger$19.throwError(`cannot override ${f.map((e=>JSON.stringify(e))).join(",")}`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:f})}return a}))}function buildPopulate$1(e,t){return function(...r){return populateTransaction$1(e,t,r)}}function buildEstimate$1(e,t){const r=e.signer||e.provider;return function(...n){return __awaiter$t(this,void 0,void 0,(function*(){if(!r){logger$19.throwError("estimate require a provider or signer",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"})}const i=yield populateTransaction$1(e,t,n);return yield r.estimateGas(i)}))}}function addContractWait$1(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then((t=>{t.events=t.logs.map((r=>{let n=deepCopy$1(r);let i=null;try{i=e.interface.parseLog(r)}catch(e){}if(i){n.args=i.args;n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r);n.event=i.name;n.eventSignature=i.signature}n.removeListener=()=>e.provider;n.getBlock=()=>e.provider.getBlock(t.blockHash);n.getTransaction=()=>e.provider.getTransaction(t.transactionHash);n.getTransactionReceipt=()=>Promise.resolve(t);return n}));return t}))}function buildCall$1(e,t,r){const n=e.signer||e.provider;return function(...i){return __awaiter$t(this,void 0,void 0,(function*(){let s=undefined;if(i.length===t.inputs.length+1&&typeof i[i.length-1]==="object"){const e=shallowCopy$1(i.pop());if(e.blockTag!=null){s=yield e.blockTag}delete e.blockTag;i.push(e)}if(e.deployTransaction!=null){yield e._deployed(s)}const a=yield populateTransaction$1(e,t,i);const o=yield n.call(a,s);try{let n=e.interface.decodeFunctionResult(t,o);if(r&&t.outputs.length===1){n=n[0]}return n}catch(t){if(t.code===Logger$1.errors.CALL_EXCEPTION){t.address=e.address;t.args=i;t.transaction=a}throw t}}))}}function buildSend$1(e,t){return function(...r){return __awaiter$t(this,void 0,void 0,(function*(){if(!e.signer){logger$19.throwError("sending a transaction requires a signer",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}if(e.deployTransaction!=null){yield e._deployed()}const n=yield populateTransaction$1(e,t,r);const i=yield e.signer.sendTransaction(n);addContractWait$1(e,i);return i}))}}function buildDefault$1(e,t,r){if(t.constant){return buildCall$1(e,t,r)}return buildSend$1(e,t)}function getEventTag$3(e){if(e.address&&(e.topics==null||e.topics.length===0)){return"*"}return(e.address||"*")+"@"+(e.topics?e.topics.map((e=>{if(Array.isArray(e)){return e.join("|")}return e})).join(":"):"")}class RunningEvent$1{constructor(e,t){defineReadOnly$1(this,"tag",e);defineReadOnly$1(this,"filter",t);this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=false;this._listeners=this._listeners.filter((r=>{if(t||r.listener!==e){return true}t=true;return false}))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();this._listeners=this._listeners.filter((t=>{const r=e.slice();setTimeout((()=>{t.listener.apply(this,r)}),0);return!t.once}));return t}prepareEvent(e){}getEmit(e){return[e]}}class ErrorRunningEvent$1 extends RunningEvent$1{constructor(){super("error",null)}}class FragmentRunningEvent$1 extends RunningEvent$1{constructor(e,t,r,n){const i={address:e};let s=t.getEventTopic(r);if(n){if(s!==n[0]){logger$19.throwArgumentError("topic mismatch","topics",n)}i.topics=n.slice()}else{i.topics=[s]}super(getEventTag$3(i),i);defineReadOnly$1(this,"address",e);defineReadOnly$1(this,"interface",t);defineReadOnly$1(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e);e.event=this.fragment.name;e.eventSignature=this.fragment.format();e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null;e.decodeError=t}}getEmit(e){const t=checkResultErrors$1(e.args);if(t.length){throw t[0].error}const r=(e.args||[]).slice();r.push(e);return r}}class WildcardRunningEvent$1 extends RunningEvent$1{constructor(e,t){super("*",{address:e});defineReadOnly$1(this,"address",e);defineReadOnly$1(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name;e.eventSignature=t.signature;e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r);e.args=t.args}catch(e){}}}class BaseContract$1{constructor(e,t,r){defineReadOnly$1(this,"interface",getStatic$1(new.target,"getInterface")(t));if(r==null){defineReadOnly$1(this,"provider",null);defineReadOnly$1(this,"signer",null)}else if(Signer$1.isSigner(r)){defineReadOnly$1(this,"provider",r.provider||null);defineReadOnly$1(this,"signer",r)}else if(Provider$1.isProvider(r)){defineReadOnly$1(this,"provider",r);defineReadOnly$1(this,"signer",null)}else{logger$19.throwArgumentError("invalid signer or provider","signerOrProvider",r)}defineReadOnly$1(this,"callStatic",{});defineReadOnly$1(this,"estimateGas",{});defineReadOnly$1(this,"functions",{});defineReadOnly$1(this,"populateTransaction",{});defineReadOnly$1(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const r=this.interface.events[t];defineReadOnly$1(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)})));if(!e[r.name]){e[r.name]=[]}e[r.name].push(t)}));Object.keys(e).forEach((t=>{const r=e[t];if(r.length===1){defineReadOnly$1(this.filters,t,this.filters[r[0]])}else{logger$19.warn(`Duplicate definition of ${t} (${r.join(", ")})`)}}))}defineReadOnly$1(this,"_runningEvents",{});defineReadOnly$1(this,"_wrappedEmits",{});if(e==null){logger$19.throwArgumentError("invalid contract address or ENS name","addressOrName",e)}defineReadOnly$1(this,"address",e);if(this.provider){defineReadOnly$1(this,"resolvedAddress",resolveName$1(this.provider,e))}else{try{defineReadOnly$1(this,"resolvedAddress",Promise.resolve(getAddress$1(e)))}catch(e){logger$19.throwError("provider is required to use ENS name as contract address",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}}this.resolvedAddress.catch((e=>{}));const n={};const i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e]){logger$19.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);return}i[e]=true;{const r=t.name;if(!n[`%${r}`]){n[`%${r}`]=[]}n[`%${r}`].push(e)}if(this[e]==null){defineReadOnly$1(this,e,buildDefault$1(this,t,true))}if(this.functions[e]==null){defineReadOnly$1(this.functions,e,buildDefault$1(this,t,false))}if(this.callStatic[e]==null){defineReadOnly$1(this.callStatic,e,buildCall$1(this,t,true))}if(this.populateTransaction[e]==null){defineReadOnly$1(this.populateTransaction,e,buildPopulate$1(this,t))}if(this.estimateGas[e]==null){defineReadOnly$1(this.estimateGas,e,buildEstimate$1(this,t))}}));Object.keys(n).forEach((e=>{const t=n[e];if(t.length>1){return}e=e.substring(1);const r=t[0];try{if(this[e]==null){defineReadOnly$1(this,e,this[r])}}catch(e){}if(this.functions[e]==null){defineReadOnly$1(this.functions,e,this.functions[r])}if(this.callStatic[e]==null){defineReadOnly$1(this.callStatic,e,this.callStatic[r])}if(this.populateTransaction[e]==null){defineReadOnly$1(this.populateTransaction,e,this.populateTransaction[r])}if(this.estimateGas[e]==null){defineReadOnly$1(this.estimateGas,e,this.estimateGas[r])}}))}static getContractAddress(e){return getContractAddress$1(e)}static getInterface(e){if(Interface$1.isInterface(e)){return e}return new Interface$1(e)}deployed(){return this._deployed()}_deployed(e){if(!this._deployedPromise){if(this.deployTransaction){this._deployedPromise=this.deployTransaction.wait().then((()=>this))}else{this._deployedPromise=this.provider.getCode(this.address,e).then((e=>{if(e==="0x"){logger$19.throwError("contract not deployed",Logger$1.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"})}return this}))}}return this._deployedPromise}fallback(e){if(!this.signer){logger$19.throwError("sending a transactions require a signer",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"})}const t=shallowCopy$1(e||{});["from","to"].forEach((function(e){if(t[e]==null){return}logger$19.throwError("cannot override "+e,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:e})}));t.to=this.resolvedAddress;return this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){if(typeof e==="string"){e=new VoidSigner$1(e,this.provider)}const t=new this.constructor(this.address,this.interface,e);if(this.deployTransaction){defineReadOnly$1(t,"deployTransaction",this.deployTransaction)}return t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Indexed$1.isIndexed(e)}_normalizeRunningEvent(e){if(this._runningEvents[e.tag]){return this._runningEvents[e.tag]}return e}_getRunningEvent(e){if(typeof e==="string"){if(e==="error"){return this._normalizeRunningEvent(new ErrorRunningEvent$1)}if(e==="event"){return this._normalizeRunningEvent(new RunningEvent$1("event",null))}if(e==="*"){return this._normalizeRunningEvent(new WildcardRunningEvent$1(this.address,this.interface))}const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new FragmentRunningEvent$1(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if(typeof t!=="string"){throw new Error("invalid topic")}const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new FragmentRunningEvent$1(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new RunningEvent$1(getEventTag$3(t),t))}return this._normalizeRunningEvent(new WildcardRunningEvent$1(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];if(t&&e.filter){this.provider.off(e.filter,t);delete this._wrappedEmits[e.tag]}}}_wrapEvent(e,t,r){const n=deepCopy$1(t);n.removeListener=()=>{if(!r){return}e.removeListener(r);this._checkRunningEvents(e)};n.getBlock=()=>this.provider.getBlock(t.blockHash);n.getTransaction=()=>this.provider.getTransaction(t.transactionHash);n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash);e.prepareEvent(n);return n}_addEventListener(e,t,r){if(!this.provider){logger$19.throwError("events require a provider or a signer with a provider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"once"})}e.addListener(t,r);this._runningEvents[e.tag]=e;if(!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(n.decodeError==null){try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}}if(e.filter!=null){this.emit("event",n)}if(n.decodeError!=null){this.emit("error",n.decodeError,n)}};this._wrappedEmits[e.tag]=r;if(e.filter!=null){this.provider.on(e.filter,r)}}}queryFilter(e,t,r){const n=this._getRunningEvent(e);const i=shallowCopy$1(n.filter);if(typeof t==="string"&&isHexString$1(t,32)){if(r!=null){logger$19.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r)}i.blockHash=t}else{i.fromBlock=t!=null?t:0;i.toBlock=r!=null?r:"latest"}return this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(n,e,null)))))}on(e,t){this._addEventListener(this._getRunningEvent(e),t,false);return this}once(e,t){this._addEventListener(this._getRunningEvent(e),t,true);return this}emit(e,...t){if(!this.provider){return false}const r=this._getRunningEvent(e);const n=r.run(t)>0;this._checkRunningEvents(r);return n}listenerCount(e){if(!this.provider){return 0}if(e==null){return Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0)}return this._getRunningEvent(e).listenerCount()}listeners(e){if(!this.provider){return[]}if(e==null){const e=[];for(let t in this._runningEvents){this._runningEvents[t].listeners().forEach((t=>{e.push(t)}))}return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider){return this}if(e==null){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners();this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);t.removeAllListeners();this._checkRunningEvents(t);return this}off(e,t){if(!this.provider){return this}const r=this._getRunningEvent(e);r.removeListener(t);this._checkRunningEvents(r);return this}removeListener(e,t){return this.off(e,t)}}class Contract$2 extends BaseContract$1{}class ContractFactory$1{constructor(e,t,r){let n=null;if(typeof t==="string"){n=t}else if(isBytes$1(t)){n=hexlify$1(t)}else if(t&&typeof t.object==="string"){n=t.object}else{n="!"}if(n.substring(0,2)!=="0x"){n="0x"+n}if(!isHexString$1(n)||n.length%2){logger$19.throwArgumentError("invalid bytecode","bytecode",t)}if(r&&!Signer$1.isSigner(r)){logger$19.throwArgumentError("invalid signer","signer",r)}defineReadOnly$1(this,"bytecode",n);defineReadOnly$1(this,"interface",getStatic$1(new.target,"getInterface")(e));defineReadOnly$1(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]==="object"){t=shallowCopy$1(e.pop());for(const e in t){if(!allowedTransactionKeys$5[e]){throw new Error("unknown transaction override "+e)}}}["data","from","to"].forEach((e=>{if(t[e]==null){return}logger$19.throwError("cannot override "+e,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:e})}));if(t.value){const e=BigNumber$2.from(t.value);if(!e.isZero()&&!this.interface.deploy.payable){logger$19.throwError("non-payable constructor cannot override value",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})}}logger$19.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");t.data=hexlify$1(concat$4([this.bytecode,this.interface.encodeDeploy(e)]));return t}deploy(...e){return __awaiter$t(this,void 0,void 0,(function*(){let t={};if(e.length===this.interface.deploy.inputs.length+1){t=e.pop()}logger$19.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield resolveAddresses$1(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r);const i=yield this.signer.sendTransaction(n);const s=getStatic$1(this.constructor,"getContractAddress")(i);const a=getStatic$1(this.constructor,"getContract")(s,this.interface,this.signer);addContractWait$1(a,i);defineReadOnly$1(a,"deployTransaction",i);return a}))}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){if(e==null){logger$19.throwError("missing compiler output",Logger$1.errors.MISSING_ARGUMENT,{argument:"compilerOutput"})}if(typeof e==="string"){e=JSON.parse(e)}const r=e.abi;let n=null;if(e.bytecode){n=e.bytecode}else if(e.evm&&e.evm.bytecode){n=e.evm.bytecode}return new this(r,n,t)}static getInterface(e){return Contract$2.getInterface(e)}static getContractAddress(e){return getContractAddress$1(e)}static getContract(e,t,r){return new Contract$2(e,t,r)}}class BaseX$1{constructor(e){defineReadOnly$1(this,"alphabet",e);defineReadOnly$1(this,"base",e.length);defineReadOnly$1(this,"_alphabetMap",{});defineReadOnly$1(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++){this._alphabetMap[e.charAt(t)]=t}}encode(e){let t=arrayify$2(e);if(t.length===0){return""}let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e){n+=r[e]<<8;r[e]=n%this.base;n=n/this.base|0}while(n>0){r.push(n%this.base);n=n/this.base|0}}let n="";for(let e=0;t[e]===0&&e<t.length-1;++e){n+=this._leader}for(let e=r.length-1;e>=0;--e){n+=this.alphabet[r[e]]}return n}decode(e){if(typeof e!=="string"){throw new TypeError("Expected String")}let t=[];if(e.length===0){return new Uint8Array(t)}t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(n===undefined){throw new Error("Non-base"+this.base+" character")}let i=n;for(let e=0;e<t.length;++e){i+=t[e]*this.base;t[e]=i&255;i>>=8}while(i>0){t.push(i&255);i>>=8}}for(let r=0;e[r]===this._leader&&r<e.length-1;++r){t.push(0)}return arrayify$2(new Uint8Array(t.reverse()))}}const Base32$1=new BaseX$1("abcdefghijklmnopqrstuvwxyz234567");const Base58$1=new BaseX$1("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const lib_esm$u=Object.freeze({__proto__:null,BaseX:BaseX$1,Base32:Base32$1,Base58:Base58$1});var SupportedAlgorithm$1;(function(e){e["sha256"]="sha256";e["sha512"]="sha512"})(SupportedAlgorithm$1||(SupportedAlgorithm$1={}));const version$B="sha2/5.7.0";const logger$18=new Logger$1(version$B);function ripemd160$2(e){return"0x"+hash_1$3.ripemd160().update(arrayify$2(e)).digest("hex")}function sha256$4(e){return"0x"+hash_1$3.sha256().update(arrayify$2(e)).digest("hex")}function sha512$2(e){return"0x"+hash_1$3.sha512().update(arrayify$2(e)).digest("hex")}function computeHmac$1(e,t,r){if(!SupportedAlgorithm$1[e]){logger$18.throwError("unsupported algorithm "+e,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e})}return"0x"+hash_1$3.hmac(hash_1$3[e],arrayify$2(t)).update(arrayify$2(r)).digest("hex")}const lib_esm$t=Object.freeze({__proto__:null,computeHmac:computeHmac$1,ripemd160:ripemd160$2,sha256:sha256$4,sha512:sha512$2,get SupportedAlgorithm(){return SupportedAlgorithm$1}});function pbkdf2$3(e,t,r,n,i){e=arrayify$2(e);t=arrayify$2(t);let s;let a=1;const o=new Uint8Array(n);const f=new Uint8Array(t.length+4);f.set(t);let c;let u;for(let l=1;l<=a;l++){f[t.length]=l>>24&255;f[t.length+1]=l>>16&255;f[t.length+2]=l>>8&255;f[t.length+3]=l&255;let h=arrayify$2(computeHmac$1(i,e,f));if(!s){s=h.length;u=new Uint8Array(s);a=Math.ceil(n/s);c=n-(a-1)*s}u.set(h);for(let t=1;t<r;t++){h=arrayify$2(computeHmac$1(i,e,h));for(let e=0;e<s;e++)u[e]^=h[e]}const d=(l-1)*s;const p=l===a?c:s;o.set(arrayify$2(u).slice(0,p),d)}return hexlify$1(o)}const version$A="wordlists/5.7.0";const logger$17=new Logger$1(version$A);class Wordlist$1{constructor(e){logger$17.checkAbstract(new.target,Wordlist$1);defineReadOnly$1(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n)){return"0x"}t.push(n)}return id$1(t.join("\n")+"\n")}static register(e,t){}}const words$1="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist$1=null;function loadWords$1(e){if(wordlist$1!=null){return}wordlist$1=words$1.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ");if(Wordlist$1.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"){wordlist$1=null;throw new Error("BIP39 Wordlist for en (English) FAILED")}}class LangEn$1 extends Wordlist$1{constructor(){super("en")}getWord(e){loadWords$1(this);return wordlist$1[e]}getWordIndex(e){loadWords$1(this);return wordlist$1.indexOf(e)}}const langEn$1=new LangEn$1;Wordlist$1.register(langEn$1);const wordlists$1={en:langEn$1};const version$z="hdnode/5.7.0";const logger$16=new Logger$1(version$z);const N$1=BigNumber$2.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const MasterSecret$1=toUtf8Bytes$1("Bitcoin seed");const HardenedBit$1=2147483648;function getUpperMask$1(e){return(1<<e)-1<<8-e}function getLowerMask$1(e){return(1<<e)-1}function bytes32$1(e){return hexZeroPad$1(hexlify$1(e),32)}function base58check$1(e){return Base58$1.encode(concat$4([e,hexDataSlice$1(sha256$4(sha256$4(e)),0,4)]))}function getWordlist$1(e){if(e==null){return wordlists$1["en"]}if(typeof e==="string"){const t=wordlists$1[e];if(t==null){logger$16.throwArgumentError("unknown locale","wordlist",e)}return t}return e}const _constructorGuard$6={};const defaultPath$1="m/44'/60'/0'/0/0";class HDNode$1{constructor(e,t,r,n,i,s,a,o){if(e!==_constructorGuard$6){throw new Error("HDNode constructor cannot be called directly")}if(t){const e=new SigningKey$1(t);defineReadOnly$1(this,"privateKey",e.privateKey);defineReadOnly$1(this,"publicKey",e.compressedPublicKey)}else{defineReadOnly$1(this,"privateKey",null);defineReadOnly$1(this,"publicKey",hexlify$1(r))}defineReadOnly$1(this,"parentFingerprint",n);defineReadOnly$1(this,"fingerprint",hexDataSlice$1(ripemd160$2(sha256$4(this.publicKey)),0,4));defineReadOnly$1(this,"address",computeAddress$1(this.publicKey));defineReadOnly$1(this,"chainCode",i);defineReadOnly$1(this,"index",s);defineReadOnly$1(this,"depth",a);if(o==null){defineReadOnly$1(this,"mnemonic",null);defineReadOnly$1(this,"path",null)}else if(typeof o==="string"){defineReadOnly$1(this,"mnemonic",null);defineReadOnly$1(this,"path",o)}else{defineReadOnly$1(this,"mnemonic",o);defineReadOnly$1(this,"path",o.path)}}get extendedKey(){if(this.depth>=256){throw new Error("Depth too large!")}return base58check$1(concat$4([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify$1(this.depth),this.parentFingerprint,hexZeroPad$1(hexlify$1(this.index),4),this.chainCode,this.privateKey!=null?concat$4(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode$1(_constructorGuard$6,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295){throw new Error("invalid index - "+String(e))}let t=this.path;if(t){t+="/"+(e&~HardenedBit$1)}const r=new Uint8Array(37);if(e&HardenedBit$1){if(!this.privateKey){throw new Error("cannot derive child of neutered node")}r.set(arrayify$2(this.privateKey),1);if(t){t+="'"}}else{r.set(arrayify$2(this.publicKey))}for(let t=24;t>=0;t-=8){r[33+(t>>3)]=e>>24-t&255}const n=arrayify$2(computeHmac$1(SupportedAlgorithm$1.sha512,this.chainCode,r));const i=n.slice(0,32);const s=n.slice(32);let a=null;let o=null;if(this.privateKey){a=bytes32$1(BigNumber$2.from(i).add(this.privateKey).mod(N$1))}else{const e=new SigningKey$1(hexlify$1(i));o=e._addPoint(this.publicKey)}let f=t;const c=this.mnemonic;if(c){f=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})}return new HDNode$1(_constructorGuard$6,a,o,this.fingerprint,bytes32$1(s),e,this.depth+1,f)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0){throw new Error("invalid path - "+e)}if(t[0]==="m"){t.shift()}let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=HardenedBit$1){throw new Error("invalid path index - "+n)}r=r._derive(HardenedBit$1+e)}else if(n.match(/^[0-9]+$/)){const e=parseInt(n);if(e>=HardenedBit$1){throw new Error("invalid path index - "+n)}r=r._derive(e)}else{throw new Error("invalid path component - "+n)}}return r}static _fromSeed(e,t){const r=arrayify$2(e);if(r.length<16||r.length>64){throw new Error("invalid seed")}const n=arrayify$2(computeHmac$1(SupportedAlgorithm$1.sha512,MasterSecret$1,r));return new HDNode$1(_constructorGuard$6,bytes32$1(n.slice(0,32)),null,"0x00000000",bytes32$1(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){r=getWordlist$1(r);e=entropyToMnemonic$1(mnemonicToEntropy$1(e,r),r);return HDNode$1._fromSeed(mnemonicToSeed$1(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return HDNode$1._fromSeed(e,null)}static fromExtendedKey(e){const t=Base58$1.decode(e);if(t.length!==82||base58check$1(t.slice(0,78))!==e){logger$16.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}const r=t[4];const n=hexlify$1(t.slice(5,9));const i=parseInt(hexlify$1(t.slice(9,13)).substring(2),16);const s=hexlify$1(t.slice(13,45));const a=t.slice(45,78);switch(hexlify$1(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode$1(_constructorGuard$6,null,hexlify$1(a),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0){break}return new HDNode$1(_constructorGuard$6,hexlify$1(a.slice(1)),null,n,s,i,r,null)}return logger$16.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed$1(e,t){if(!t){t=""}const r=toUtf8Bytes$1("mnemonic"+t,UnicodeNormalizationForm$1.NFKD);return pbkdf2$3(toUtf8Bytes$1(e,UnicodeNormalizationForm$1.NFKD),r,2048,64,"sha512")}function mnemonicToEntropy$1(e,t){t=getWordlist$1(t);logger$16.checkNormalize();const r=t.split(e);if(r.length%3!==0){throw new Error("invalid mnemonic")}const n=arrayify$2(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));if(s===-1){throw new Error("invalid mnemonic")}for(let e=0;e<11;e++){if(s&1<<10-e){n[i>>3]|=1<<7-i%8}i++}}const s=32*r.length/3;const a=r.length/3;const o=getUpperMask$1(a);const f=arrayify$2(sha256$4(n.slice(0,s/8)))[0]&o;if(f!==(n[n.length-1]&o)){throw new Error("invalid checksum")}return hexlify$1(n.slice(0,s/8))}function entropyToMnemonic$1(e,t){t=getWordlist$1(t);e=arrayify$2(e);if(e.length%4!==0||e.length<16||e.length>32){throw new Error("invalid entropy")}const r=[0];let n=11;for(let t=0;t<e.length;t++){if(n>8){r[r.length-1]<<=8;r[r.length-1]|=e[t];n-=8}else{r[r.length-1]<<=n;r[r.length-1]|=e[t]>>8-n;r.push(e[t]&getLowerMask$1(8-n));n+=3}}const i=e.length/4;const s=arrayify$2(sha256$4(e))[0]&getUpperMask$1(i);r[r.length-1]<<=i;r[r.length-1]|=s>>8-i;return t.join(r.map((e=>t.getWord(e))))}function isValidMnemonic$1(e,t){try{mnemonicToEntropy$1(e,t);return true}catch(e){}return false}function getAccountPath$1(e){if(typeof e!=="number"||e<0||e>=HardenedBit$1||e%1){logger$16.throwArgumentError("invalid account index","index",e)}return`m/44'/60'/${e}'/0/0`}const lib_esm$s=Object.freeze({__proto__:null,defaultPath:defaultPath$1,HDNode:HDNode$1,mnemonicToSeed:mnemonicToSeed$1,mnemonicToEntropy:mnemonicToEntropy$1,entropyToMnemonic:entropyToMnemonic$1,isValidMnemonic:isValidMnemonic$1,getAccountPath:getAccountPath$1});const version$y="random/5.7.0";const logger$15=new Logger$1(version$y);function getGlobal$1(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global$1!=="undefined"){return global$1}throw new Error("unable to locate global object")}const anyGlobal$1=getGlobal$1();let crypto$6=anyGlobal$1.crypto||anyGlobal$1.msCrypto;if(!crypto$6||!crypto$6.getRandomValues){logger$15.warn("WARNING: Missing strong random number source");crypto$6={getRandomValues:function(e){return logger$15.throwError("no secure random source avaialble",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}}}function randomBytes$1(e){if(e<=0||e>1024||e%1||e!=e){logger$15.throwArgumentError("invalid length","length",e)}const t=new Uint8Array(e);crypto$6.getRandomValues(t);return arrayify$2(t)}function shuffled$1(e){e=e.slice();for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));const n=e[t];e[t]=e[r];e[r]=n}return e}const lib_esm$r=Object.freeze({__proto__:null,randomBytes:randomBytes$1,shuffled:shuffled$1});var aesJs$1=createCommonjsModule$2((function(e,t){(function(t){function r(e){return parseInt(e)===e}function n(e){if(!r(e.length)){return false}for(var t=0;t<e.length;t++){if(!r(e[t])||e[t]<0||e[t]>255){return false}}return true}function i(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&e.name==="Uint8Array"){if(t){if(e.slice){e=e.slice()}else{e=Array.prototype.slice.call(e)}}return e}if(Array.isArray(e)){if(!n(e)){throw new Error("Array contains invalid value: "+e)}return new Uint8Array(e)}if(r(e.length)&&n(e)){return new Uint8Array(e)}throw new Error("unsupported array-like object")}function s(e){return new Uint8Array(e)}function a(e,t,r,n,i){if(n!=null||i!=null){if(e.slice){e=e.slice(n,i)}else{e=Array.prototype.slice.call(e,n,i)}}t.set(e,r)}var o=function(){function e(e){var t=[],r=0;e=encodeURI(e);while(r<e.length){var n=e.charCodeAt(r++);if(n===37){t.push(parseInt(e.substr(r,2),16));r+=2}else{t.push(n)}}return i(t)}function t(e){var t=[],r=0;while(r<e.length){var n=e[r];if(n<128){t.push(String.fromCharCode(n));r++}else if(n>191&&n<224){t.push(String.fromCharCode((n&31)<<6|e[r+1]&63));r+=2}else{t.push(String.fromCharCode((n&15)<<12|(e[r+1]&63)<<6|e[r+2]&63));r+=3}}return t.join("")}return{toBytes:e,fromBytes:t}}();var f=function(){function e(e){var t=[];for(var r=0;r<e.length;r+=2){t.push(parseInt(e.substr(r,2),16))}return t}var t="0123456789abcdef";function r(e){var r=[];for(var n=0;n<e.length;n++){var i=e[n];r.push(t[(i&240)>>4]+t[i&15])}return r.join("")}return{toBytes:e,fromBytes:r}}();var c={16:10,24:12,32:14};var u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];var l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var h=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];var d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];var p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];var y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];var m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];var g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];var b=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];var v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];var w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];var A=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];var E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];var _=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];var S=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function $(e){var t=[];for(var r=0;r<e.length;r+=4){t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return t}var T=function(e){if(!(this instanceof T)){throw Error("AES must be instanitated with `new`")}Object.defineProperty(this,"key",{value:i(e,true)});this._prepare()};T.prototype._prepare=function(){var e=c[this.key.length];if(e==null){throw new Error("invalid key size (must be 16, 24 or 32 bytes)")}this._Ke=[];this._Kd=[];for(var t=0;t<=e;t++){this._Ke.push([0,0,0,0]);this._Kd.push([0,0,0,0])}var r=(e+1)*4;var n=this.key.length/4;var i=$(this.key);var s;for(var t=0;t<n;t++){s=t>>2;this._Ke[s][t%4]=i[t];this._Kd[e-s][t%4]=i[t]}var a=0;var o=n,f;while(o<r){f=i[n-1];i[0]^=l[f>>16&255]<<24^l[f>>8&255]<<16^l[f&255]<<8^l[f>>24&255]^u[a]<<24;a+=1;if(n!=8){for(var t=1;t<n;t++){i[t]^=i[t-1]}}else{for(var t=1;t<n/2;t++){i[t]^=i[t-1]}f=i[n/2-1];i[n/2]^=l[f&255]^l[f>>8&255]<<8^l[f>>16&255]<<16^l[f>>24&255]<<24;for(var t=n/2+1;t<n;t++){i[t]^=i[t-1]}}var t=0,h,d;while(t<n&&o<r){h=o>>2;d=o%4;this._Ke[h][d]=i[t];this._Kd[e-h][d]=i[t++];o++}}for(var h=1;h<e;h++){for(var d=0;d<4;d++){f=this._Kd[h][d];this._Kd[h][d]=A[f>>24&255]^E[f>>16&255]^_[f>>8&255]^S[f&255]}}};T.prototype.encrypt=function(e){if(e.length!=16){throw new Error("invalid plaintext size (must be 16 bytes)")}var t=this._Ke.length-1;var r=[0,0,0,0];var n=$(e);for(var i=0;i<4;i++){n[i]^=this._Ke[0][i]}for(var a=1;a<t;a++){for(var i=0;i<4;i++){r[i]=d[n[i]>>24&255]^p[n[(i+1)%4]>>16&255]^y[n[(i+2)%4]>>8&255]^m[n[(i+3)%4]&255]^this._Ke[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Ke[t][i];o[4*i]=(l[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(l[n[(i+1)%4]>>16&255]^f>>16)&255;o[4*i+2]=(l[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(l[n[(i+3)%4]&255]^f)&255}return o};T.prototype.decrypt=function(e){if(e.length!=16){throw new Error("invalid ciphertext size (must be 16 bytes)")}var t=this._Kd.length-1;var r=[0,0,0,0];var n=$(e);for(var i=0;i<4;i++){n[i]^=this._Kd[0][i]}for(var a=1;a<t;a++){for(var i=0;i<4;i++){r[i]=g[n[i]>>24&255]^b[n[(i+3)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^w[n[(i+1)%4]&255]^this._Kd[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Kd[t][i];o[4*i]=(h[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(h[n[(i+3)%4]>>16&255]^f>>16)&255;o[4*i+2]=(h[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(h[n[(i+1)%4]&255]^f)&255}return o};var C=function(e){if(!(this instanceof C)){throw Error("AES must be instanitated with `new`")}this.description="Electronic Code Block";this.name="ecb";this._aes=new T(e)};C.prototype.encrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.encrypt(r);a(r,t,n)}return t};C.prototype.decrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.decrypt(r);a(r,t,n)}return t};var P=function(e,t){if(!(this instanceof P)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Block Chaining";this.name="cbc";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastCipherblock=i(t,true);this._aes=new T(e)};P.prototype.encrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var o=0;o<16;o++){r[o]^=this._lastCipherblock[o]}this._lastCipherblock=this._aes.encrypt(r);a(this._lastCipherblock,t,n)}return t};P.prototype.decrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.decrypt(r);for(var o=0;o<16;o++){t[n+o]=r[o]^this._lastCipherblock[o]}a(e,this._lastCipherblock,0,n,n+16)}return t};var x=function(e,t,r){if(!(this instanceof x)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Feedback";this.name="cfb";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 size)")}if(!r){r=1}this.segmentSize=r;this._shiftRegister=i(t,true);this._aes=new T(e)};x.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid plaintext size (must be segmentSize bytes)")}var t=i(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){t[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};x.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid ciphertext size (must be segmentSize bytes)")}var t=i(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){t[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};var I=function(e,t){if(!(this instanceof I)){throw Error("AES must be instanitated with `new`")}this.description="Output Feedback";this.name="ofb";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastPrecipher=i(t,true);this._lastPrecipherIndex=16;this._aes=new T(e)};I.prototype.encrypt=function(e){var t=i(e,true);for(var r=0;r<t.length;r++){if(this._lastPrecipherIndex===16){this._lastPrecipher=this._aes.encrypt(this._lastPrecipher);this._lastPrecipherIndex=0}t[r]^=this._lastPrecipher[this._lastPrecipherIndex++]}return t};I.prototype.decrypt=I.prototype.encrypt;var k=function(e){if(!(this instanceof k)){throw Error("Counter must be instanitated with `new`")}if(e!==0&&!e){e=1}if(typeof e==="number"){this._counter=s(16);this.setValue(e)}else{this.setBytes(e)}};k.prototype.setValue=function(e){if(typeof e!=="number"||parseInt(e)!=e){throw new Error("invalid counter value (must be an integer)")}for(var t=15;t>=0;--t){this._counter[t]=e%256;e=e>>8}};k.prototype.setBytes=function(e){e=i(e,true);if(e.length!=16){throw new Error("invalid counter bytes size (must be 16 bytes)")}this._counter=e};k.prototype.increment=function(){for(var e=15;e>=0;e--){if(this._counter[e]===255){this._counter[e]=0}else{this._counter[e]++;break}}};var N=function(e,t){if(!(this instanceof N)){throw Error("AES must be instanitated with `new`")}this.description="Counter";this.name="ctr";if(!(t instanceof k)){t=new k(t)}this._counter=t;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new T(e)};N.prototype.encrypt=function(e){var t=i(e,true);for(var r=0;r<t.length;r++){if(this._remainingCounterIndex===16){this._remainingCounter=this._aes.encrypt(this._counter._counter);this._remainingCounterIndex=0;this._counter.increment()}t[r]^=this._remainingCounter[this._remainingCounterIndex++]}return t};N.prototype.decrypt=N.prototype.encrypt;function R(e){e=i(e,true);var t=16-e.length%16;var r=s(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++){r[n]=t}return r}function M(e){e=i(e,true);if(e.length<16){throw new Error("PKCS#7 invalid length")}var t=e[e.length-1];if(t>16){throw new Error("PKCS#7 padding byte out of range")}var r=e.length-t;for(var n=0;n<t;n++){if(e[r+n]!==t){throw new Error("PKCS#7 invalid padding byte")}}var o=s(r);a(e,o,0,0,r);return o}var O={AES:T,Counter:k,ModeOfOperation:{ecb:C,cbc:P,cfb:x,ofb:I,ctr:N},utils:{hex:f,utf8:o},padding:{pkcs7:{pad:R,strip:M}},_arrayTest:{coerceArray:i,createArray:s,copyArray:a}};{e.exports=O}})()}));const version$x="json-wallets/5.7.0";function looseArrayify$1(e){if(typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}return arrayify$2(e)}function zpad$1(e,t){e=String(e);while(e.length<t){e="0"+e}return e}function getPassword$1(e){if(typeof e==="string"){return toUtf8Bytes$1(e,UnicodeNormalizationForm$1.NFKC)}return arrayify$2(e)}function searchPath$1(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r){if(i.toLowerCase()===n[e]){t=r[i];break}}if(t===null){return null}r=t}return r}function uuidV4$1(e){const t=arrayify$2(e);t[6]=t[6]&15|64;t[8]=t[8]&63|128;const r=hexlify$1(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const logger$14=new Logger$1(version$x);class CrowdsaleAccount$1 extends Description$1{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$3(e,t){const r=JSON.parse(e);t=getPassword$1(t);const n=getAddress$1(searchPath$1(r,"ethaddr"));const i=looseArrayify$1(searchPath$1(r,"encseed"));if(!i||i.length%16!==0){logger$14.throwArgumentError("invalid encseed","json",e)}const s=arrayify$2(pbkdf2$3(t,t,2e3,32,"sha256")).slice(0,16);const a=i.slice(0,16);const o=i.slice(16);const f=new aesJs$1.ModeOfOperation.cbc(s,a);const c=aesJs$1.padding.pkcs7.strip(arrayify$2(f.decrypt(o)));let u="";for(let e=0;e<c.length;e++){u+=String.fromCharCode(c[e])}const l=toUtf8Bytes$1(u);const h=keccak256$3(l);return new CrowdsaleAccount$1({_isCrowdsaleAccount:true,address:n,privateKey:h})}function isCrowdsaleWallet$1(e){let t=null;try{t=JSON.parse(e)}catch(e){return false}return t.encseed&&t.ethaddr}function isKeystoreWallet$1(e){let t=null;try{t=JSON.parse(e)}catch(e){return false}if(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3){return false}return true}function getJsonWalletAddress$1(e){if(isCrowdsaleWallet$1(e)){try{return getAddress$1(JSON.parse(e).ethaddr)}catch(e){return null}}if(isKeystoreWallet$1(e)){try{return getAddress$1(JSON.parse(e).address)}catch(e){return null}}return null}var scrypt$1=createCommonjsModule$2((function(e,t){(function(t){const r=2147483647;function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762;let a=1359893119,o=2600822924,f=528734635,c=1541459225;const u=new Uint32Array(64);function l(e){let l=0,h=e.length;while(h>=64){let d=r,p=n,y=i,m=s,g=a,b=o,v=f,w=c,A,E,_,S,$;for(E=0;E<16;E++){_=l+E*4;u[E]=(e[_]&255)<<24|(e[_+1]&255)<<16|(e[_+2]&255)<<8|e[_+3]&255}for(E=16;E<64;E++){A=u[E-2];S=(A>>>17|A<<32-17)^(A>>>19|A<<32-19)^A>>>10;A=u[E-15];$=(A>>>7|A<<32-7)^(A>>>18|A<<32-18)^A>>>3;u[E]=(S+u[E-7]|0)+($+u[E-16]|0)|0}for(E=0;E<64;E++){S=(((g>>>6|g<<32-6)^(g>>>11|g<<32-11)^(g>>>25|g<<32-25))+(g&b^~g&v)|0)+(w+(t[E]+u[E]|0)|0)|0;$=((d>>>2|d<<32-2)^(d>>>13|d<<32-13)^(d>>>22|d<<32-22))+(d&p^d&y^p&y)|0;w=v;v=b;b=g;g=m+S|0;m=y;y=p;p=d;d=S+$|0}r=r+d|0;n=n+p|0;i=i+y|0;s=s+m|0;a=a+g|0;o=o+b|0;f=f+v|0;c=c+w|0;l+=64;h-=64}}l(e);let h,d=e.length%64,p=e.length/536870912|0,y=e.length<<3,m=d<56?56:120,g=e.slice(e.length-d,e.length);g.push(128);for(h=d+1;h<m;h++){g.push(0)}g.push(p>>>24&255);g.push(p>>>16&255);g.push(p>>>8&255);g.push(p>>>0&255);g.push(y>>>24&255);g.push(y>>>16&255);g.push(y>>>8&255);g.push(y>>>0&255);l(g);return[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(e,t,r){e=e.length<=64?e:n(e);const i=64+t.length+4;const s=new Array(i);const a=new Array(64);let o;let f=[];for(o=0;o<64;o++){s[o]=54}for(o=0;o<e.length;o++){s[o]^=e[o]}for(o=0;o<t.length;o++){s[64+o]=t[o]}for(o=i-4;o<i;o++){s[o]=0}for(o=0;o<64;o++)a[o]=92;for(o=0;o<e.length;o++)a[o]^=e[o];function c(){for(let e=i-1;e>=i-4;e--){s[e]++;if(s[e]<=255)return;s[e]=0}}while(r>=32){c();f=f.concat(n(a.concat(n(s))));r-=32}if(r>0){c();f=f.concat(n(a.concat(n(s))).slice(0,r))}return f}function s(e,t,r,n,i){let s;c(e,(2*r-1)*16,i,0,16);for(s=0;s<2*r;s++){f(e,s*16,i,16);o(i,n);c(i,0,e,t+s*16,16)}for(s=0;s<r;s++){c(e,t+s*2*16,e,s*16,16)}for(s=0;s<r;s++){c(e,t+(s*2+1)*16,e,(s+r)*16,16)}}function a(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2){t[4]^=a(t[0]+t[12],7);t[8]^=a(t[4]+t[0],9);t[12]^=a(t[8]+t[4],13);t[0]^=a(t[12]+t[8],18);t[9]^=a(t[5]+t[1],7);t[13]^=a(t[9]+t[5],9);t[1]^=a(t[13]+t[9],13);t[5]^=a(t[1]+t[13],18);t[14]^=a(t[10]+t[6],7);t[2]^=a(t[14]+t[10],9);t[6]^=a(t[2]+t[14],13);t[10]^=a(t[6]+t[2],18);t[3]^=a(t[15]+t[11],7);t[7]^=a(t[3]+t[15],9);t[11]^=a(t[7]+t[3],13);t[15]^=a(t[11]+t[7],18);t[1]^=a(t[0]+t[3],7);t[2]^=a(t[1]+t[0],9);t[3]^=a(t[2]+t[1],13);t[0]^=a(t[3]+t[2],18);t[6]^=a(t[5]+t[4],7);t[7]^=a(t[6]+t[5],9);t[4]^=a(t[7]+t[6],13);t[5]^=a(t[4]+t[7],18);t[11]^=a(t[10]+t[9],7);t[8]^=a(t[11]+t[10],9);t[9]^=a(t[8]+t[11],13);t[10]^=a(t[9]+t[8],18);t[12]^=a(t[15]+t[14],7);t[13]^=a(t[12]+t[15],9);t[14]^=a(t[13]+t[12],13);t[15]^=a(t[14]+t[13],18)}for(let r=0;r<16;++r){e[r]+=t[r]}}function f(e,t,r,n){for(let i=0;i<n;i++){r[i]^=e[t+i]}}function c(e,t,r,n,i){while(i--){r[n++]=e[t++]}}function u(e){if(!e||typeof e.length!=="number"){return false}for(let t=0;t<e.length;t++){const r=e[t];if(typeof r!=="number"||r%1||r<0||r>=256){return false}}return true}function l(e,t){if(typeof e!=="number"||e%1){throw new Error("invalid "+t)}return e}function h(e,t,n,a,o,h,d){n=l(n,"N");a=l(a,"r");o=l(o,"p");h=l(h,"dkLen");if(n===0||(n&n-1)!==0){throw new Error("N must be power of 2")}if(n>r/128/a){throw new Error("N too large")}if(a>r/128/o){throw new Error("r too large")}if(!u(e)){throw new Error("password must be an array or buffer")}e=Array.prototype.slice.call(e);if(!u(t)){throw new Error("salt must be an array or buffer")}t=Array.prototype.slice.call(t);let p=i(e,t,o*128*a);const y=new Uint32Array(o*32*a);for(let e=0;e<y.length;e++){const t=e*4;y[e]=(p[t+3]&255)<<24|(p[t+2]&255)<<16|(p[t+1]&255)<<8|(p[t+0]&255)<<0}const m=new Uint32Array(64*a);const g=new Uint32Array(32*a*n);const b=32*a;const v=new Uint32Array(16);const w=new Uint32Array(16);const A=o*n*2;let E=0;let _=null;let S=false;let $=0;let T=0,C;let P;const x=d?parseInt(1e3/a):4294967295;const I=typeof setImmediate!=="undefined"?setImmediate:setTimeout;const k=function(){if(S){return d(new Error("cancelled"),E/A)}let t;switch($){case 0:P=T*32*a;c(y,P,m,0,b);$=1;C=0;case 1:t=n-C;if(t>x){t=x}for(let e=0;e<t;e++){c(m,0,g,(C+e)*b,b);s(m,b,a,v,w)}C+=t;E+=t;if(d){const e=parseInt(1e3*E/A);if(e!==_){S=d(null,E/A);if(S){break}_=e}}if(C<n){break}C=0;$=2;case 2:t=n-C;if(t>x){t=x}for(let e=0;e<t;e++){const e=(2*a-1)*16;const t=m[e]&n-1;f(g,t*b,m,b);s(m,b,a,v,w)}C+=t;E+=t;if(d){const e=parseInt(1e3*E/A);if(e!==_){S=d(null,E/A);if(S){break}_=e}}if(C<n){break}c(m,0,y,P,b);T++;if(T<o){$=0;break}p=[];for(let e=0;e<y.length;e++){p.push(y[e]>>0&255);p.push(y[e]>>8&255);p.push(y[e]>>16&255);p.push(y[e]>>24&255)}const r=i(e,p,h);if(d){d(null,1,r)}return r}if(d){I(k)}};if(!d){while(true){const e=k();if(e!=undefined){return e}}}k()}const d={scrypt:function(e,t,r,n,i,s,a){return new Promise((function(o,f){let c=0;if(a){a(0)}h(e,t,r,n,i,s,(function(e,t,r){if(e){f(e)}else if(r){if(a&&c!==1){a(1)}o(new Uint8Array(r))}else if(a&&t!==c){c=t;return a(t)}}))}))},syncScrypt:function(e,t,r,n,i,s){return new Uint8Array(h(e,t,r,n,i,s))}};{e.exports=d}})()}));var __awaiter$s=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$13=new Logger$1(version$x);function hasMnemonic$3(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}class KeystoreAccount$1 extends Description$1{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt$1(e,t,r){const n=searchPath$1(e,"crypto/cipher");if(n==="aes-128-ctr"){const n=looseArrayify$1(searchPath$1(e,"crypto/cipherparams/iv"));const i=new aesJs$1.Counter(n);const s=new aesJs$1.ModeOfOperation.ctr(t,i);return arrayify$2(s.decrypt(r))}return null}function _getAccount$1(e,t){const r=looseArrayify$1(searchPath$1(e,"crypto/ciphertext"));const n=hexlify$1(keccak256$3(concat$4([t.slice(16,32),r]))).substring(2);if(n!==searchPath$1(e,"crypto/mac").toLowerCase()){throw new Error("invalid password")}const i=_decrypt$1(e,t.slice(0,16),r);if(!i){logger$13.throwError("unsupported cipher",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"})}const s=t.slice(32,64);const a=computeAddress$1(i);if(e.address){let t=e.address.toLowerCase();if(t.substring(0,2)!=="0x"){t="0x"+t}if(getAddress$1(t)!==a){throw new Error("address mismatch")}}const o={_isKeystoreAccount:true,address:a,privateKey:hexlify$1(i)};if(searchPath$1(e,"x-ethers/version")==="0.1"){const t=looseArrayify$1(searchPath$1(e,"x-ethers/mnemonicCiphertext"));const r=looseArrayify$1(searchPath$1(e,"x-ethers/mnemonicCounter"));const n=new aesJs$1.Counter(r);const i=new aesJs$1.ModeOfOperation.ctr(s,n);const a=searchPath$1(e,"x-ethers/path")||defaultPath$1;const f=searchPath$1(e,"x-ethers/locale")||"en";const c=arrayify$2(i.decrypt(t));try{const e=entropyToMnemonic$1(c,f);const t=HDNode$1.fromMnemonic(e,null,f).derivePath(a);if(t.privateKey!=o.privateKey){throw new Error("mnemonic mismatch")}o.mnemonic=t.mnemonic}catch(e){if(e.code!==Logger$1.errors.INVALID_ARGUMENT||e.argument!=="wordlist"){throw e}}}return new KeystoreAccount$1(o)}function pbkdf2Sync$1(e,t,r,n,i){return arrayify$2(pbkdf2$3(e,t,r,n,i))}function pbkdf2$2(e,t,r,n,i){return Promise.resolve(pbkdf2Sync$1(e,t,r,n,i))}function _computeKdfKey$1(e,t,r,n,i){const s=getPassword$1(t);const a=searchPath$1(e,"crypto/kdf");if(a&&typeof a==="string"){const t=function(e,t){return logger$13.throwArgumentError("invalid key-derivation function parameters",e,t)};if(a.toLowerCase()==="scrypt"){const r=looseArrayify$1(searchPath$1(e,"crypto/kdfparams/salt"));const o=parseInt(searchPath$1(e,"crypto/kdfparams/n"));const f=parseInt(searchPath$1(e,"crypto/kdfparams/r"));const c=parseInt(searchPath$1(e,"crypto/kdfparams/p"));if(!o||!f||!c){t("kdf",a)}if((o&o-1)!==0){t("N",o)}const u=parseInt(searchPath$1(e,"crypto/kdfparams/dklen"));if(u!==32){t("dklen",u)}return n(s,r,o,f,c,64,i)}else if(a.toLowerCase()==="pbkdf2"){const n=looseArrayify$1(searchPath$1(e,"crypto/kdfparams/salt"));let i=null;const a=searchPath$1(e,"crypto/kdfparams/prf");if(a==="hmac-sha256"){i="sha256"}else if(a==="hmac-sha512"){i="sha512"}else{t("prf",a)}const o=parseInt(searchPath$1(e,"crypto/kdfparams/c"));const f=parseInt(searchPath$1(e,"crypto/kdfparams/dklen"));if(f!==32){t("dklen",f)}return r(s,n,o,f,i)}}return logger$13.throwArgumentError("unsupported key-derivation function","kdf",a)}function decryptSync$1(e,t){const r=JSON.parse(e);const n=_computeKdfKey$1(r,t,pbkdf2Sync$1,scrypt$1.syncScrypt);return _getAccount$1(r,n)}function decrypt$2(e,t,r){return __awaiter$s(this,void 0,void 0,(function*(){const n=JSON.parse(e);const i=yield _computeKdfKey$1(n,t,pbkdf2$2,scrypt$1.scrypt,r);return _getAccount$1(n,i)}))}function encrypt$1(e,t,r,n){try{if(getAddress$1(e.address)!==computeAddress$1(e.privateKey)){throw new Error("address/privateKey mismatch")}if(hasMnemonic$3(e)){const t=e.mnemonic;const r=HDNode$1.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||defaultPath$1);if(r.privateKey!=e.privateKey){throw new Error("mnemonic mismatch")}}}catch(e){return Promise.reject(e)}if(typeof r==="function"&&!n){n=r;r={}}if(!r){r={}}const i=arrayify$2(e.privateKey);const s=getPassword$1(t);let a=null;let o=null;let f=null;if(hasMnemonic$3(e)){const t=e.mnemonic;a=arrayify$2(mnemonicToEntropy$1(t.phrase,t.locale||"en"));o=t.path||defaultPath$1;f=t.locale||"en"}let c=r.client;if(!c){c="ethers.js"}let u=null;if(r.salt){u=arrayify$2(r.salt)}else{u=randomBytes$1(32)}let l=null;if(r.iv){l=arrayify$2(r.iv);if(l.length!==16){throw new Error("invalid iv")}}else{l=randomBytes$1(16)}let h=null;if(r.uuid){h=arrayify$2(r.uuid);if(h.length!==16){throw new Error("invalid uuid")}}else{h=randomBytes$1(16)}let d=1<<17,p=8,y=1;if(r.scrypt){if(r.scrypt.N){d=r.scrypt.N}if(r.scrypt.r){p=r.scrypt.r}if(r.scrypt.p){y=r.scrypt.p}}return scrypt$1.scrypt(s,u,d,p,y,64,n).then((t=>{t=arrayify$2(t);const r=t.slice(0,16);const n=t.slice(16,32);const s=t.slice(32,64);const m=new aesJs$1.Counter(l);const g=new aesJs$1.ModeOfOperation.ctr(r,m);const b=arrayify$2(g.encrypt(i));const v=keccak256$3(concat$4([n,b]));const w={address:e.address.substring(2).toLowerCase(),id:uuidV4$1(h),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify$1(l).substring(2)},ciphertext:hexlify$1(b).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify$1(u).substring(2),n:d,dklen:32,p:y,r:p},mac:v.substring(2)}};if(a){const e=randomBytes$1(16);const t=new aesJs$1.Counter(e);const r=new aesJs$1.ModeOfOperation.ctr(s,t);const n=arrayify$2(r.encrypt(a));const i=new Date;const u=i.getUTCFullYear()+"-"+zpad$1(i.getUTCMonth()+1,2)+"-"+zpad$1(i.getUTCDate(),2)+"T"+zpad$1(i.getUTCHours(),2)+"-"+zpad$1(i.getUTCMinutes(),2)+"-"+zpad$1(i.getUTCSeconds(),2)+".0Z";w["x-ethers"]={client:c,gethFilename:"UTC--"+u+"--"+w.address,mnemonicCounter:hexlify$1(e).substring(2),mnemonicCiphertext:hexlify$1(n).substring(2),path:o,locale:f,version:"0.1"}}return JSON.stringify(w)}))}function decryptJsonWallet$1(e,t,r){if(isCrowdsaleWallet$1(e)){if(r){r(0)}const n=decrypt$3(e,t);if(r){r(1)}return Promise.resolve(n)}if(isKeystoreWallet$1(e)){return decrypt$2(e,t,r)}return Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync$1(e,t){if(isCrowdsaleWallet$1(e)){return decrypt$3(e,t)}if(isKeystoreWallet$1(e)){return decryptSync$1(e,t)}throw new Error("invalid JSON wallet")}const lib_esm$q=Object.freeze({__proto__:null,decryptCrowdsale:decrypt$3,decryptKeystore:decrypt$2,decryptKeystoreSync:decryptSync$1,encryptKeystore:encrypt$1,isCrowdsaleWallet:isCrowdsaleWallet$1,isKeystoreWallet:isKeystoreWallet$1,getJsonWalletAddress:getJsonWalletAddress$1,decryptJsonWallet:decryptJsonWallet$1,decryptJsonWalletSync:decryptJsonWalletSync$1});const version$w="wallet/5.7.0";var __awaiter$r=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$12=new Logger$1(version$w);function isAccount$1(e){return e!=null&&isHexString$1(e.privateKey,32)&&e.address!=null}function hasMnemonic$2(e){const t=e.mnemonic;return t&&t.phrase}class Wallet$1 extends Signer$1{constructor(e,t){super();if(isAccount$1(e)){const t=new SigningKey$1(e.privateKey);defineReadOnly$1(this,"_signingKey",(()=>t));defineReadOnly$1(this,"address",computeAddress$1(this.publicKey));if(this.address!==getAddress$1(e.address)){logger$12.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]")}if(hasMnemonic$2(e)){const t=e.mnemonic;defineReadOnly$1(this,"_mnemonic",(()=>({phrase:t.phrase,path:t.path||defaultPath$1,locale:t.locale||"en"})));const r=this.mnemonic;const n=HDNode$1.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path);if(computeAddress$1(n.privateKey)!==this.address){logger$12.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}}else{defineReadOnly$1(this,"_mnemonic",(()=>null))}}else{if(SigningKey$1.isSigningKey(e)){if(e.curve!=="secp256k1"){logger$12.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]")}defineReadOnly$1(this,"_signingKey",(()=>e))}else{if(typeof e==="string"){if(e.match(/^[0-9a-f]*$/i)&&e.length===64){e="0x"+e}}const t=new SigningKey$1(e);defineReadOnly$1(this,"_signingKey",(()=>t))}defineReadOnly$1(this,"_mnemonic",(()=>null));defineReadOnly$1(this,"address",computeAddress$1(this.publicKey))}if(t&&!Provider$1.isProvider(t)){logger$12.throwArgumentError("invalid provider","provider",t)}defineReadOnly$1(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet$1(this,e)}signTransaction(e){return resolveProperties$1(e).then((t=>{if(t.from!=null){if(getAddress$1(t.from)!==this.address){logger$12.throwArgumentError("transaction from address mismatch","transaction.from",e.from)}delete t.from}const r=this._signingKey().signDigest(keccak256$3(serialize$5(t)));return serialize$5(t,r)}))}signMessage(e){return __awaiter$r(this,void 0,void 0,(function*(){return joinSignature$1(this._signingKey().signDigest(hashMessage$1(e)))}))}_signTypedData(e,t,r){return __awaiter$r(this,void 0,void 0,(function*(){const n=yield TypedDataEncoder$1.resolveNames(e,t,r,(e=>{if(this.provider==null){logger$12.throwError("cannot resolve ENS names without a provider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e})}return this.provider.resolveName(e)}));return joinSignature$1(this._signingKey().signDigest(TypedDataEncoder$1.hash(n.domain,t,n.value)))}))}encrypt(e,t,r){if(typeof t==="function"&&!r){r=t;t={}}if(r&&typeof r!=="function"){throw new Error("invalid callback")}if(!t){t={}}return encrypt$1(this,e,t,r)}static createRandom(e){let t=randomBytes$1(16);if(!e){e={}}if(e.extraEntropy){t=arrayify$2(hexDataSlice$1(keccak256$3(concat$4([t,e.extraEntropy])),0,16))}const r=entropyToMnemonic$1(t,e.locale);return Wallet$1.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return decryptJsonWallet$1(e,t,r).then((e=>new Wallet$1(e)))}static fromEncryptedJsonSync(e,t){return new Wallet$1(decryptJsonWalletSync$1(e,t))}static fromMnemonic(e,t,r){if(!t){t=defaultPath$1}return new Wallet$1(HDNode$1.fromMnemonic(e,null,r).derivePath(t))}}function verifyMessage$1(e,t){return recoverAddress$1(hashMessage$1(e),t)}function verifyTypedData$1(e,t,r,n){return recoverAddress$1(TypedDataEncoder$1.hash(e,t,r),n)}const lib_esm$p=Object.freeze({__proto__:null,Wallet:Wallet$1,verifyMessage:verifyMessage$1,verifyTypedData:verifyTypedData$1});const version$v="networks/5.7.1";const logger$11=new Logger$1(version$v);function isRenetworkable$1(e){return e&&typeof e.renetwork==="function"}function ethDefaultProvider$1(e){const t=function(t,r){if(r==null){r={}}const n=[];if(t.InfuraProvider&&r.infura!=="-"){try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}}if(t.EtherscanProvider&&r.etherscan!=="-"){try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}}if(t.AlchemyProvider&&r.alchemy!=="-"){try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}}if(t.PocketProvider&&r.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new t.PocketProvider(e,r.pocket);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(e){}}if(t.CloudflareProvider&&r.cloudflare!=="-"){try{n.push(new t.CloudflareProvider(e))}catch(e){}}if(t.AnkrProvider&&r.ankr!=="-"){try{const i=["ropsten"];const s=new t.AnkrProvider(e,r.ankr);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(e){}}if(n.length===0){return null}if(t.FallbackProvider){let i=1;if(r.quorum!=null){i=r.quorum}else if(e==="homestead"){i=2}return new t.FallbackProvider(n,i)}return n[0]};t.renetwork=function(e){return ethDefaultProvider$1(e)};return t}function etcDefaultProvider$1(e,t){const r=function(r,n){if(r.JsonRpcProvider){return new r.JsonRpcProvider(e,t)}return null};r.renetwork=function(t){return etcDefaultProvider$1(e,t)};return r}const homestead$1={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider$1("homestead")};const ropsten$1={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider$1("ropsten")};const classicMordor$1={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider$1("https://www.ethercluster.com/mordor","classicMordor")};const networks$1={unspecified:{chainId:0,name:"unspecified"},homestead:homestead$1,mainnet:homestead$1,morden:{chainId:2,name:"morden"},ropsten:ropsten$1,testnet:ropsten$1,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider$1("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider$1("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider$1("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider$1("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider$1("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:classicMordor$1,classicTestnet:classicMordor$1,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider$1("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider$1("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider$1("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork$1(e){if(e==null){return null}if(typeof e==="number"){for(const t in networks$1){const r=networks$1[t];if(r.chainId===e){return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}}return{chainId:e,name:"unknown"}}if(typeof e==="string"){const t=networks$1[e];if(t==null){return null}return{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=networks$1[e.name];if(!t){if(typeof e.chainId!=="number"){logger$11.throwArgumentError("invalid network chainId","network",e)}return e}if(e.chainId!==0&&e.chainId!==t.chainId){logger$11.throwArgumentError("network chainId mismatch","network",e)}let r=e._defaultProvider||null;if(r==null&&t._defaultProvider){if(isRenetworkable$1(t._defaultProvider)){r=t._defaultProvider.renetwork(e)}else{r=t._defaultProvider}}return{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}const version$u="web/5.7.1";var __awaiter$q=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};function getUrl$1(e,t){return __awaiter$q(this,void 0,void 0,(function*(){if(t==null){t={}}const r={method:t.method||"GET",headers:t.headers||{},body:t.body||undefined};if(t.skipFetchSetup!==true){r.mode="cors";r.cache="no-cache";r.credentials="same-origin";r.redirect="follow";r.referrer="client"}if(t.fetchOptions!=null){const e=t.fetchOptions;if(e.mode){r.mode=e.mode}if(e.cache){r.cache=e.cache}if(e.credentials){r.credentials=e.credentials}if(e.redirect){r.redirect=e.redirect}if(e.referrer){r.referrer=e.referrer}}const n=yield fetch(e,r);const i=yield n.arrayBuffer();const s={};if(n.headers.forEach){n.headers.forEach(((e,t)=>{s[t.toLowerCase()]=e}))}else{n.headers.keys().forEach((e=>{s[e.toLowerCase()]=n.headers.get(e)}))}return{headers:s,statusCode:n.status,statusMessage:n.statusText,body:arrayify$2(new Uint8Array(i))}}))}var __awaiter$p=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$10=new Logger$1(version$u);function staller$1(e){return new Promise((t=>{setTimeout(t,e)}))}function bodyify$1(e,t){if(e==null){return null}if(typeof e==="string"){return e}if(isBytesLike$1(e)){if(t&&(t.split("/")[0]==="text"||t.split(";")[0].trim()==="application/json")){try{return toUtf8String$1(e)}catch(e){}}return hexlify$1(e)}return e}function unpercent$1(e){return toUtf8Bytes$1(e.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))}function _fetchData$1(e,t,r){const n=typeof e==="object"&&e.throttleLimit!=null?e.throttleLimit:12;logger$10.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof e==="object"?e.throttleCallback:null;const s=typeof e==="object"&&typeof e.throttleSlotInterval==="number"?e.throttleSlotInterval:100;logger$10.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof e==="object"?!!e.errorPassThrough:false;const o={};let f=null;const c={method:"GET"};let u=false;let l=2*60*1e3;if(typeof e==="string"){f=e}else if(typeof e==="object"){if(e==null||e.url==null){logger$10.throwArgumentError("missing URL","connection.url",e)}f=e.url;if(typeof e.timeout==="number"&&e.timeout>0){l=e.timeout}if(e.headers){for(const t in e.headers){o[t.toLowerCase()]={key:t,value:String(e.headers[t])};if(["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0){u=true}}}c.allowGzip=!!e.allowGzip;if(e.user!=null&&e.password!=null){if(f.substring(0,6)!=="https:"&&e.allowInsecureAuthentication!==true){logger$10.throwError("basic authentication requires a secure https url",Logger$1.errors.INVALID_ARGUMENT,{argument:"url",url:f,user:e.user,password:"[REDACTED]"})}const t=e.user+":"+e.password;o["authorization"]={key:"Authorization",value:"Basic "+encode$a(toUtf8Bytes$1(t))}}if(e.skipFetchSetup!=null){c.skipFetchSetup=!!e.skipFetchSetup}if(e.fetchOptions!=null){c.fetchOptions=shallowCopy$1(e.fetchOptions)}}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const d=f?f.match(h):null;if(d){try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?decode$9(d[3]):unpercent$1(d[3])};let t=e.body;if(r){t=r(e.body,e)}return Promise.resolve(t)}catch(e){logger$10.throwError("processing response error",Logger$1.errors.SERVER_ERROR,{body:bodyify$1(d[1],d[2]),error:e,requestBody:null,requestMethod:"GET",url:f})}}if(t){c.method="POST";c.body=t;if(o["content-type"]==null){o["content-type"]={key:"Content-Type",value:"application/octet-stream"}}if(o["content-length"]==null){o["content-length"]={key:"Content-Length",value:String(t.length)}}}const p={};Object.keys(o).forEach((e=>{const t=o[e];p[t.key]=t.value}));c.headers=p;const y=function(){let e=null;const t=new Promise((function(t,r){if(l){e=setTimeout((()=>{if(e==null){return}e=null;r(logger$10.makeError("timeout",Logger$1.errors.TIMEOUT,{requestBody:bodyify$1(c.body,p["content-type"]),requestMethod:c.method,timeout:l,url:f}))}),l)}}));const r=function(){if(e==null){return}clearTimeout(e);e=null};return{promise:t,cancel:r}}();const m=function(){return __awaiter$p(this,void 0,void 0,(function*(){for(let e=0;e<n;e++){let t=null;try{t=yield getUrl$1(f,c);if(e<n){if(t.statusCode===301||t.statusCode===302){const e=t.headers.location||"";if(c.method==="GET"&&e.match(/^https:/)){f=t.headers.location;continue}}else if(t.statusCode===429){let r=true;if(i){r=yield i(e,f)}if(r){let r=0;const n=t.headers["retry-after"];if(typeof n==="string"&&n.match(/^[1-9][0-9]*$/)){r=parseInt(n)*1e3}else{r=s*parseInt(String(Math.random()*Math.pow(2,e)))}yield staller$1(r);continue}}}}catch(e){t=e.response;if(t==null){y.cancel();logger$10.throwError("missing response",Logger$1.errors.SERVER_ERROR,{requestBody:bodyify$1(c.body,p["content-type"]),requestMethod:c.method,serverError:e,url:f})}}let o=t.body;if(u&&t.statusCode===304){o=null}else if(!a&&(t.statusCode<200||t.statusCode>=300)){y.cancel();logger$10.throwError("bad response",Logger$1.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:bodyify$1(o,t.headers?t.headers["content-type"]:null),requestBody:bodyify$1(c.body,p["content-type"]),requestMethod:c.method,url:f})}if(r){try{const e=yield r(o,t);y.cancel();return e}catch(r){if(r.throttleRetry&&e<n){let t=true;if(i){t=yield i(e,f)}if(t){const t=s*parseInt(String(Math.random()*Math.pow(2,e)));yield staller$1(t);continue}}y.cancel();logger$10.throwError("processing response error",Logger$1.errors.SERVER_ERROR,{body:bodyify$1(o,t.headers?t.headers["content-type"]:null),error:r,requestBody:bodyify$1(c.body,p["content-type"]),requestMethod:c.method,url:f})}}y.cancel();return o}return logger$10.throwError("failed response",Logger$1.errors.SERVER_ERROR,{requestBody:bodyify$1(c.body,p["content-type"]),requestMethod:c.method,url:f})}))}();return Promise.race([y.promise,m])}function fetchJson$1(e,t,r){let n=(e,t)=>{let n=null;if(e!=null){try{n=JSON.parse(toUtf8String$1(e))}catch(t){logger$10.throwError("invalid JSON",Logger$1.errors.SERVER_ERROR,{body:e,error:t})}}if(r){n=r(n,t)}return n};let i=null;if(t!=null){i=toUtf8Bytes$1(t);const r=typeof e==="string"?{url:e}:shallowCopy$1(e);if(r.headers){const e=Object.keys(r.headers).filter((e=>e.toLowerCase()==="content-type")).length!==0;if(!e){r.headers=shallowCopy$1(r.headers);r.headers["content-type"]="application/json"}}else{r.headers={"content-type":"application/json"}}e=r}return _fetchData$1(e,i,n)}function poll$1(e,t){if(!t){t={}}t=shallowCopy$1(t);if(t.floor==null){t.floor=0}if(t.ceiling==null){t.ceiling=1e4}if(t.interval==null){t.interval=250}return new Promise((function(r,n){let i=null;let s=false;const a=()=>{if(s){return false}s=true;if(i){clearTimeout(i)}return true};if(t.timeout){i=setTimeout((()=>{if(a()){n(new Error("timeout"))}}),t.timeout)}const o=t.retryLimit;let f=0;function c(){return e().then((function(e){if(e!==undefined){if(a()){r(e)}}else if(t.oncePoll){t.oncePoll.once("poll",c)}else if(t.onceBlock){t.onceBlock.once("block",c)}else if(!s){f++;if(f>o){if(a()){n(new Error("retry limit reached"))}return}let e=t.interval*parseInt(String(Math.random()*Math.pow(2,f)));if(e<t.floor){e=t.floor}if(e>t.ceiling){e=t.ceiling}setTimeout(c,e)}return null}),(function(e){if(a()){n(e)}}))}c()}))}const lib_esm$o=Object.freeze({__proto__:null,_fetchData:_fetchData$1,fetchJson:fetchJson$1,poll:poll$1});var ALPHABET$1="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var ALPHABET_MAP$1={};for(var z$1=0;z$1<ALPHABET$1.length;z$1++){var x$1=ALPHABET$1.charAt(z$1);if(ALPHABET_MAP$1[x$1]!==undefined)throw new TypeError(x$1+" is ambiguous");ALPHABET_MAP$1[x$1]=z$1}function polymodStep$1(e){var t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function prefixChk$1(e){var t=1;for(var r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=polymodStep$1(t)^n>>5}t=polymodStep$1(t);for(r=0;r<e.length;++r){var i=e.charCodeAt(r);t=polymodStep$1(t)^i&31}return t}function encode$9(e,t,r){r=r||90;if(e.length+7+t.length>r)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var n=prefixChk$1(e);if(typeof n==="string")throw new Error(n);var i=e+"1";for(var s=0;s<t.length;++s){var a=t[s];if(a>>5!==0)throw new Error("Non 5-bit word");n=polymodStep$1(n)^a;i+=ALPHABET$1.charAt(a)}for(s=0;s<6;++s){n=polymodStep$1(n)}n^=1;for(s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=ALPHABET$1.charAt(o)}return i}function __decode$1(e,t){t=t||90;if(e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase();var n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;e=r;var i=e.lastIndexOf("1");if(i===-1)return"No separator character for "+e;if(i===0)return"Missing prefix for "+e;var s=e.slice(0,i);var a=e.slice(i+1);if(a.length<6)return"Data too short";var o=prefixChk$1(s);if(typeof o==="string")return o;var f=[];for(var c=0;c<a.length;++c){var u=a.charAt(c);var l=ALPHABET_MAP$1[u];if(l===undefined)return"Unknown character "+u;o=polymodStep$1(o)^l;if(c+6>=a.length)continue;f.push(l)}if(o!==1)return"Invalid checksum for "+e;return{prefix:s,words:f}}function decodeUnsafe$1(){var e=__decode$1.apply(null,arguments);if(typeof e==="object")return e}function decode$8(e){var t=__decode$1.apply(null,arguments);if(typeof t==="object")return t;throw new Error(t)}function convert$1(e,t,r,n){var i=0;var s=0;var a=(1<<r)-1;var o=[];for(var f=0;f<e.length;++f){i=i<<t|e[f];s+=t;while(s>=r){s-=r;o.push(i>>s&a)}}if(n){if(s>0){o.push(i<<r-s&a)}}else{if(s>=t)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function toWordsUnsafe$1(e){var t=convert$1(e,8,5,true);if(Array.isArray(t))return t}function toWords$1(e){var t=convert$1(e,8,5,true);if(Array.isArray(t))return t;throw new Error(t)}function fromWordsUnsafe$1(e){var t=convert$1(e,5,8,false);if(Array.isArray(t))return t}function fromWords$1(e){var t=convert$1(e,5,8,false);if(Array.isArray(t))return t;throw new Error(t)}var bech32$1={decodeUnsafe:decodeUnsafe$1,decode:decode$8,encode:encode$9,toWordsUnsafe:toWordsUnsafe$1,toWords:toWords$1,fromWordsUnsafe:fromWordsUnsafe$1,fromWords:fromWords$1};const version$t="providers/5.7.2";const logger$$=new Logger$1(version$t);class Formatter$1{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={};const t=this.address.bind(this);const r=this.bigNumber.bind(this);const n=this.blockTag.bind(this);const i=this.data.bind(this);const s=this.hash.bind(this);const a=this.hex.bind(this);const o=this.number.bind(this);const f=this.type.bind(this);const c=e=>this.data(e,true);e.transaction={hash:s,type:f,accessList:Formatter$1.allowNull(this.accessList.bind(this),null),blockHash:Formatter$1.allowNull(s,null),blockNumber:Formatter$1.allowNull(o,null),transactionIndex:Formatter$1.allowNull(o,null),confirmations:Formatter$1.allowNull(o,null),from:t,gasPrice:Formatter$1.allowNull(r),maxPriorityFeePerGas:Formatter$1.allowNull(r),maxFeePerGas:Formatter$1.allowNull(r),gasLimit:r,to:Formatter$1.allowNull(t,null),value:r,nonce:o,data:i,r:Formatter$1.allowNull(this.uint256),s:Formatter$1.allowNull(this.uint256),v:Formatter$1.allowNull(o),creates:Formatter$1.allowNull(t,null),raw:Formatter$1.allowNull(i)};e.transactionRequest={from:Formatter$1.allowNull(t),nonce:Formatter$1.allowNull(o),gasLimit:Formatter$1.allowNull(r),gasPrice:Formatter$1.allowNull(r),maxPriorityFeePerGas:Formatter$1.allowNull(r),maxFeePerGas:Formatter$1.allowNull(r),to:Formatter$1.allowNull(t),value:Formatter$1.allowNull(r),data:Formatter$1.allowNull(c),type:Formatter$1.allowNull(o),accessList:Formatter$1.allowNull(this.accessList.bind(this),null)};e.receiptLog={transactionIndex:o,blockNumber:o,transactionHash:s,address:t,topics:Formatter$1.arrayOf(s),data:i,logIndex:o,blockHash:s};e.receipt={to:Formatter$1.allowNull(this.address,null),from:Formatter$1.allowNull(this.address,null),contractAddress:Formatter$1.allowNull(t,null),transactionIndex:o,root:Formatter$1.allowNull(a),gasUsed:r,logsBloom:Formatter$1.allowNull(i),blockHash:s,transactionHash:s,logs:Formatter$1.arrayOf(this.receiptLog.bind(this)),blockNumber:o,confirmations:Formatter$1.allowNull(o,null),cumulativeGasUsed:r,effectiveGasPrice:Formatter$1.allowNull(r),status:Formatter$1.allowNull(o),type:f};e.block={hash:Formatter$1.allowNull(s),parentHash:s,number:o,timestamp:o,nonce:Formatter$1.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Formatter$1.allowNull(t),extraData:i,transactions:Formatter$1.allowNull(Formatter$1.arrayOf(s)),baseFeePerGas:Formatter$1.allowNull(r)};e.blockWithTransactions=shallowCopy$1(e.block);e.blockWithTransactions.transactions=Formatter$1.allowNull(Formatter$1.arrayOf(this.transactionResponse.bind(this)));e.filter={fromBlock:Formatter$1.allowNull(n,undefined),toBlock:Formatter$1.allowNull(n,undefined),blockHash:Formatter$1.allowNull(s,undefined),address:Formatter$1.allowNull(t,undefined),topics:Formatter$1.allowNull(this.topics.bind(this),undefined)};e.filterLog={blockNumber:Formatter$1.allowNull(o),blockHash:Formatter$1.allowNull(s),transactionIndex:o,removed:Formatter$1.allowNull(this.boolean.bind(this)),address:t,data:Formatter$1.allowFalsish(i,"0x"),topics:Formatter$1.arrayOf(s),transactionHash:s,logIndex:o};return e}accessList(e){return accessListify$1(e||[])}number(e){if(e==="0x"){return 0}return BigNumber$2.from(e).toNumber()}type(e){if(e==="0x"||e==null){return 0}return BigNumber$2.from(e).toNumber()}bigNumber(e){return BigNumber$2.from(e)}boolean(e){if(typeof e==="boolean"){return e}if(typeof e==="string"){e=e.toLowerCase();if(e==="true"){return true}if(e==="false"){return false}}throw new Error("invalid boolean - "+e)}hex(e,t){if(typeof e==="string"){if(!t&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexString$1(e)){return e.toLowerCase()}}return logger$$.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0){throw new Error("invalid data; odd-length - "+e)}return r}address(e){return getAddress$1(e)}callAddress(e){if(!isHexString$1(e,32)){return null}const t=getAddress$1(hexDataSlice$1(e,12));return t===AddressZero$1?null:t}contractAddress(e){return getContractAddress$1(e)}blockTag(e){if(e==null){return"latest"}if(e==="earliest"){return"0x0"}switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e==="number"||isHexString$1(e)){return hexValue$1(e)}throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);if(hexDataLength$1(r)!==32){return logger$$.throwArgumentError("invalid hash","value",e)}return r}difficulty(e){if(e==null){return null}const t=BigNumber$2.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!isHexString$1(e)){throw new Error("invalid uint256")}return hexZeroPad$1(e,32)}_block(e,t){if(e.author!=null&&e.miner==null){e.miner=e.author}const r=e._difficulty!=null?e._difficulty:e.difficulty;const n=Formatter$1.check(t,e);n._difficulty=r==null?null:BigNumber$2.from(r);return n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter$1.check(this.formats.transactionRequest,e)}transactionResponse(e){if(e.gas!=null&&e.gasLimit==null){e.gasLimit=e.gas}if(e.to&&BigNumber$2.from(e.to).isZero()){e.to="0x0000000000000000000000000000000000000000"}if(e.input!=null&&e.data==null){e.data=e.input}if(e.to==null&&e.creates==null){e.creates=this.contractAddress(e)}if((e.type===1||e.type===2)&&e.accessList==null){e.accessList=[]}const t=Formatter$1.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;if(isHexString$1(r)){r=BigNumber$2.from(r).toNumber()}t.chainId=r}else{let r=e.networkId;if(r==null&&t.v==null){r=e.chainId}if(isHexString$1(r)){r=BigNumber$2.from(r).toNumber()}if(typeof r!=="number"&&t.v!=null){r=(t.v-35)/2;if(r<0){r=0}r=parseInt(r)}if(typeof r!=="number"){r=0}t.chainId=r}if(t.blockHash&&t.blockHash.replace(/0/g,"")==="x"){t.blockHash=null}return t}transaction(e){return parse$1(e)}receiptLog(e){return Formatter$1.check(this.formats.receiptLog,e)}receipt(e){const t=Formatter$1.check(this.formats.receipt,e);if(t.root!=null){if(t.root.length<=4){const e=BigNumber$2.from(t.root).toNumber();if(e===0||e===1){if(t.status!=null&&t.status!==e){logger$$.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status})}t.status=e;delete t.root}else{logger$$.throwArgumentError("invalid alt-root-status","value.root",t.root)}}else if(t.root.length!==66){logger$$.throwArgumentError("invalid root hash","value.root",t.root)}}if(t.status!=null){t.byzantium=true}return t}topics(e){if(Array.isArray(e)){return e.map((e=>this.topics(e)))}else if(e!=null){return this.hash(e,true)}return null}filter(e){return Formatter$1.check(this.formats.filter,e)}filterLog(e){return Formatter$1.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e){try{const i=e[n](t[n]);if(i!==undefined){r[n]=i}}catch(e){e.checkKey=n;e.checkValue=t[n];throw e}}return r}static allowNull(e,t){return function(r){if(r==null){return t}return e(r)}}static allowFalsish(e,t){return function(r){if(!r){return t}return e(r)}}static arrayOf(e){return function(t){if(!Array.isArray(t)){throw new Error("not an array")}const r=[];t.forEach((function(t){r.push(e(t))}));return r}}}function isCommunityResourcable$1(e){return e&&typeof e.isCommunityResource==="function"}function isCommunityResource$1(e){return isCommunityResourcable$1(e)&&e.isCommunityResource()}let throttleMessage$1=false;function showThrottleMessage$1(){if(throttleMessage$1){return}throttleMessage$1=true;console.log("========= NOTICE =========");console.log("Request-Rate Exceeded  (this message will not be repeated)");console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.io/api-keys/");console.log("==========================")}var __awaiter$o=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$_=new Logger$1(version$t);const MAX_CCIP_REDIRECTS$1=10;function checkTopic$1(e){if(e==null){return"null"}if(hexDataLength$1(e)!==32){logger$_.throwArgumentError("invalid topic","topic",e)}return e.toLowerCase()}function serializeTopics$1(e){e=e.slice();while(e.length>0&&e[e.length-1]==null){e.pop()}return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[checkTopic$1(e)]=true}));const r=Object.keys(t);r.sort();return r.join("|")}else{return checkTopic$1(e)}})).join("&")}function deserializeTopics$1(e){if(e===""){return[]}return e.split(/&/g).map((e=>{if(e===""){return[]}const t=e.split("|").map((e=>e==="null"?null:e));return t.length===1?t[0]:t}))}function getEventTag$2(e){if(typeof e==="string"){e=e.toLowerCase();if(hexDataLength$1(e)===32){return"tx:"+e}if(e.indexOf(":")===-1){return e}}else if(Array.isArray(e)){return"filter:*:"+serializeTopics$1(e)}else if(ForkEvent$1.isForkEvent(e)){logger$_.warn("not implemented");throw new Error("not implemented")}else if(e&&typeof e==="object"){return"filter:"+(e.address||"*")+":"+serializeTopics$1(e.topics||[])}throw new Error("invalid event - "+e)}function getTime$1(){return(new Date).getTime()}function stall$3(e){return new Promise((t=>{setTimeout(t,e)}))}const PollableEvents$1=["block","network","pending","poll"];class Event$2{constructor(e,t,r){defineReadOnly$1(this,"tag",e);defineReadOnly$1(this,"listener",t);defineReadOnly$1(this,"once",r);this._lastBlockNumber=-2;this._inflight=false}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");if(e[0]!=="tx"){return null}return e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter"){return null}const t=e[1];const r=deserializeTopics$1(e[2]);const n={};if(r.length>0){n.topics=r}if(t&&t!=="*"){n.address=t}return n}pollable(){return this.tag.indexOf(":")>=0||PollableEvents$1.indexOf(this.tag)>=0}}const coinInfos$1={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify$1(e){return hexZeroPad$1(BigNumber$2.from(e).toHexString(),32)}function base58Encode$1(e){return Base58$1.encode(concat$4([e,hexDataSlice$1(sha256$4(sha256$4(e)),0,4)]))}const matcherIpfs$1=new RegExp("^(ipfs)://(.*)$","i");const matchers$1=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs$1,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString$1(e,t){try{return toUtf8String$1(_parseBytes$1(e,t))}catch(e){}return null}function _parseBytes$1(e,t){if(e==="0x"){return null}const r=BigNumber$2.from(hexDataSlice$1(e,t,t+32)).toNumber();const n=BigNumber$2.from(hexDataSlice$1(e,r,r+32)).toNumber();return hexDataSlice$1(e,r+32,r+32+n)}function getIpfsLink$1(e){if(e.match(/^ipfs:\/\/ipfs\//i)){e=e.substring(12)}else if(e.match(/^ipfs:\/\//i)){e=e.substring(7)}else{logger$_.throwArgumentError("unsupported IPFS format","link",e)}return`https://gateway.ipfs.io/ipfs/${e}`}function numPad$1(e){const t=arrayify$2(e);if(t.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(t,32-t.length);return r}function bytesPad$1(e){if(e.length%32===0){return e}const t=new Uint8Array(Math.ceil(e.length/32)*32);t.set(e);return t}function encodeBytes$1(e){const t=[];let r=0;for(let n=0;n<e.length;n++){t.push(null);r+=32}for(let n=0;n<e.length;n++){const i=arrayify$2(e[n]);t[n]=numPad$1(r);t.push(numPad$1(i.length));t.push(bytesPad$1(i));r+=32+Math.ceil(i.length/32)*32}return hexConcat$1(t)}class Resolver$1{constructor(e,t,r,n){defineReadOnly$1(this,"provider",e);defineReadOnly$1(this,"name",r);defineReadOnly$1(this,"address",e.formatter.address(t));defineReadOnly$1(this,"_resolvedAddress",n)}supportsWildcard(){if(!this._supportsEip2544){this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>BigNumber$2.from(e).eq(1))).catch((e=>{if(e.code===Logger$1.errors.CALL_EXCEPTION){return false}this._supportsEip2544=null;throw e}))}return this._supportsEip2544}_fetch(e,t){return __awaiter$o(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:true,data:hexConcat$1([e,namehash$1(this.name),t||"0x"])};let n=false;if(yield this.supportsWildcard()){n=true;r.data=hexConcat$1(["0x9061b923",encodeBytes$1([dnsEncode$1(this.name),r.data])])}try{let e=yield this.provider.call(r);if(arrayify$2(e).length%32===4){logger$_.throwError("resolver threw error",Logger$1.errors.CALL_EXCEPTION,{transaction:r,data:e})}if(n){e=_parseBytes$1(e,0)}return e}catch(e){if(e.code===Logger$1.errors.CALL_EXCEPTION){return null}throw e}}))}_fetchBytes(e,t){return __awaiter$o(this,void 0,void 0,(function*(){const r=yield this._fetch(e,t);if(r!=null){return _parseBytes$1(r,0)}return null}))}_getAddress(e,t){const r=coinInfos$1[String(e)];if(r==null){logger$_.throwError(`unsupported coin type: ${e}`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`})}if(r.ilk==="eth"){return this.provider.formatter.address(t)}const n=arrayify$2(t);if(r.p2pkh!=null){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode$1(concat$4([[r.p2pkh],"0x"+e[2]]))}}}if(r.p2sh!=null){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode$1(concat$4([[r.p2sh],"0x"+e[2]]))}}}if(r.prefix!=null){const e=n[1];let t=n[0];if(t===0){if(e!==20&&e!==32){t=-1}}else{t=-1}if(t>=0&&n.length===2+e&&e>=1&&e<=75){const e=bech32$1.toWords(n.slice(2));e.unshift(t);return bech32$1.encode(r.prefix,e)}}return null}getAddress(e){return __awaiter$o(this,void 0,void 0,(function*(){if(e==null){e=60}if(e===60){try{const e=yield this._fetch("0x3b3b57de");if(e==="0x"||e===HashZero$1){return null}return this.provider.formatter.callAddress(e)}catch(e){if(e.code===Logger$1.errors.CALL_EXCEPTION){return null}throw e}}const t=yield this._fetchBytes("0xf1cb7e06",bytes32ify$1(e));if(t==null||t==="0x"){return null}const r=this._getAddress(e,t);if(r==null){logger$_.throwError(`invalid or unsupported coin data`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t})}return r}))}getAvatar(){return __awaiter$o(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null){return null}for(let r=0;r<matchers$1.length;r++){const n=t.match(matchers$1[r]);if(n==null){continue}const i=n[1].toLowerCase();switch(i){case"https":e.push({type:"url",content:t});return{linkage:e,url:t};case"data":e.push({type:"data",content:t});return{linkage:e,url:t};case"ipfs":e.push({type:"ipfs",content:t});return{linkage:e,url:getIpfsLink$1(t)};case"erc721":case"erc1155":{const r=i==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress());const a=(n[2]||"").split("/");if(a.length!==2){return null}const o=yield this.provider.formatter.address(a[0]);const f=hexZeroPad$1(BigNumber$2.from(a[1]).toHexString(),32);if(i==="erc721"){const t=this.provider.formatter.callAddress(yield this.provider.call({to:o,data:hexConcat$1(["0x6352211e",f])}));if(s!==t){return null}e.push({type:"owner",content:t})}else if(i==="erc1155"){const t=BigNumber$2.from(yield this.provider.call({to:o,data:hexConcat$1(["0x00fdd58e",hexZeroPad$1(s,32),f])}));if(t.isZero()){return null}e.push({type:"balance",content:t.toString()})}const c={to:this.provider.formatter.address(a[0]),data:hexConcat$1([r,f])};let u=_parseString$1(yield this.provider.call(c),0);if(u==null){return null}e.push({type:"metadata-url-base",content:u});if(i==="erc1155"){u=u.replace("{id}",f.substring(2));e.push({type:"metadata-url-expanded",content:u})}if(u.match(/^ipfs:/i)){u=getIpfsLink$1(u)}e.push({type:"metadata-url",content:u});const l=yield fetchJson$1(u);if(!l){return null}e.push({type:"metadata",content:JSON.stringify(l)});let h=l.image;if(typeof h!=="string"){return null}if(h.match(/^(https:\/\/|data:)/i));else{const t=h.match(matcherIpfs$1);if(t==null){return null}e.push({type:"url-ipfs",content:h});h=getIpfsLink$1(h)}e.push({type:"url",content:h});return{linkage:e,url:h}}}}}catch(e){}return null}))}getContentHash(){return __awaiter$o(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x"){return null}const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===e*2){return"ipfs://"+Base58$1.encode("0x"+t[1])}}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===e*2){return"ipns://"+Base58$1.encode("0x"+r[1])}}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n){if(n[1].length===32*2){return"bzz://"+n[1]}}const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i){if(i[1].length===34*2){const e={"=":"","+":"-","/":"_"};const t=encode$a("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]));return"sia://"+t}}return logger$_.throwError(`invalid or unsupported content hash data`,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return __awaiter$o(this,void 0,void 0,(function*(){let t=toUtf8Bytes$1(e);t=concat$4([bytes32ify$1(64),bytes32ify$1(t.length),t]);if(t.length%32!==0){t=concat$4([t,hexZeroPad$1("0x",32-e.length%32)])}const r=yield this._fetchBytes("0x59d1d43c",hexlify$1(t));if(r==null||r==="0x"){return null}return toUtf8String$1(r)}))}}let defaultFormatter$1=null;let nextPollId$1=1;class BaseProvider$1 extends Provider$1{constructor(e){super();this._events=[];this._emitted={block:-2};this.disableCcipRead=false;this.formatter=new.target.getFormatter();defineReadOnly$1(this,"anyNetwork",e==="any");if(this.anyNetwork){e=this.detectNetwork()}if(e instanceof Promise){this._networkPromise=e;e.catch((e=>{}));this._ready().catch((e=>{}))}else{const t=getStatic$1(new.target,"getNetwork")(e);if(t){defineReadOnly$1(this,"_network",t);this.emit("network",t,null)}else{logger$_.throwArgumentError("invalid network","network",e)}}this._maxInternalBlockNumber=-1024;this._lastBlockNumber=-2;this._maxFilterBlockRange=10;this._pollingInterval=4e3;this._fastQueryDate=0}_ready(){return __awaiter$o(this,void 0,void 0,(function*(){if(this._network==null){let e=null;if(this._networkPromise){try{e=yield this._networkPromise}catch(e){}}if(e==null){e=yield this.detectNetwork()}if(!e){logger$_.throwError("no network detected",Logger$1.errors.UNKNOWN_ERROR,{})}if(this._network==null){if(this.anyNetwork){this._network=e}else{defineReadOnly$1(this,"_network",e)}this.emit("network",e,null)}}return this._network}))}get ready(){return poll$1((()=>this._ready().then((e=>e),(e=>{if(e.code===Logger$1.errors.NETWORK_ERROR&&e.event==="noNetwork"){return undefined}throw e}))))}static getFormatter(){if(defaultFormatter$1==null){defaultFormatter$1=new Formatter$1}return defaultFormatter$1}static getNetwork(e){return getNetwork$1(e==null?"homestead":e)}ccipReadFetch(e,t,r){return __awaiter$o(this,void 0,void 0,(function*(){if(this.disableCcipRead||r.length===0){return null}const n=e.to.toLowerCase();const i=t.toLowerCase();const s=[];for(let e=0;e<r.length;e++){const t=r[e];const a=t.replace("{sender}",n).replace("{data}",i);const o=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n});const f=yield fetchJson$1({url:a,errorPassThrough:true},o,((e,t)=>{e.status=t.statusCode;return e}));if(f.data){return f.data}const c=f.message||"unknown error";if(f.status>=400&&f.status<500){return logger$_.throwError(`response not found during CCIP fetch: ${c}`,Logger$1.errors.SERVER_ERROR,{url:t,errorMessage:c})}s.push(c)}return logger$_.throwError(`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,Logger$1.errors.SERVER_ERROR,{urls:r,errorMessages:s})}))}_getInternalBlockNumber(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this._ready();if(e>0){while(this._internalBlockNumber){const t=this._internalBlockNumber;try{const r=yield t;if(getTime$1()-r.respTime<=e){return r.blockNumber}break}catch(e){if(this._internalBlockNumber===t){break}}}}const t=getTime$1();const r=resolveProperties$1({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n){if(this._internalBlockNumber===r){this._internalBlockNumber=null}throw n}const i=getTime$1();e=BigNumber$2.from(e).toNumber();if(e<this._maxInternalBlockNumber){e=this._maxInternalBlockNumber}this._maxInternalBlockNumber=e;this._setFastBlockNumber(e);return{blockNumber:e,reqTime:t,respTime:i}}));this._internalBlockNumber=r;r.catch((e=>{if(this._internalBlockNumber===r){this._internalBlockNumber=null}}));return(yield r).blockNumber}))}poll(){return __awaiter$o(this,void 0,void 0,(function*(){const e=nextPollId$1++;const t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){this.emit("error",e);return}this._setFastBlockNumber(r);this.emit("poll",e,r);if(r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2){this._emitted.block=r-1}if(Math.abs(this._emitted.block-r)>1e3){logger$_.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`);this.emit("error",logger$_.makeError("network block skew detected",Logger$1.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block}));this.emit("block",r)}else{for(let e=this._emitted.block+1;e<=r;e++){this.emit("block",e)}}if(this._emitted.block!==r){this._emitted.block=r;Object.keys(this._emitted).forEach((e=>{if(e==="block"){return}const t=this._emitted[e];if(t==="pending"){return}if(r-t>12){delete this._emitted[e]}}))}if(this._lastBlockNumber===-2){this._lastBlockNumber=r-1}this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>{if(!e||e.blockNumber==null){return null}this._emitted["t:"+r]=e.blockNumber;this.emit(r,e);return null})).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":{if(!e._inflight){e._inflight=true;if(e._lastBlockNumber===-2){e._lastBlockNumber=r-1}const n=e.filter;n.fromBlock=e._lastBlockNumber+1;n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;if(i>n.fromBlock){n.fromBlock=i}if(n.fromBlock<0){n.fromBlock=0}const s=this.getLogs(n).then((t=>{e._inflight=false;if(t.length===0){return}t.forEach((t=>{if(t.blockNumber>e._lastBlockNumber){e._lastBlockNumber=t.blockNumber}this._emitted["b:"+t.blockHash]=t.blockNumber;this._emitted["t:"+t.transactionHash]=t.blockNumber;this.emit(n,t)}))})).catch((t=>{this.emit("error",t);e._inflight=false}));t.push(s)}break}}}));this._lastBlockNumber=r;Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}));return}))}resetEventsBlock(e){this._lastBlockNumber=e-1;if(this.polling){this.poll()}}get network(){return this._network}detectNetwork(){return __awaiter$o(this,void 0,void 0,(function*(){return logger$_.throwError("provider does not support network detection",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return __awaiter$o(this,void 0,void 0,(function*(){const e=yield this._ready();const t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork){this._network=t;this._lastBlockNumber=-2;this._fastBlockNumber=null;this._fastBlockNumberPromise=null;this._fastQueryDate=0;this._emitted.block=-2;this._maxInternalBlockNumber=-1024;this._internalBlockNumber=null;this.emit("network",t,e);yield stall$3(0);return this._network}const r=logger$_.makeError("underlying network changed",Logger$1.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});this.emit("error",r);throw r}return e}))}get blockNumber(){this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{}));return this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){if(e&&!this._poller){this._poller=setInterval((()=>{this.poll()}),this.pollingInterval);if(!this._bootstrapPoll){this._bootstrapPoll=setTimeout((()=>{this.poll();this._bootstrapPoll=setTimeout((()=>{if(!this._poller){this.poll()}this._bootstrapPoll=null}),this.pollingInterval)}),0)}}else if(!e&&this._poller){clearInterval(this._poller);this._poller=null}}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!=="number"||e<=0||parseInt(String(e))!=e){throw new Error("invalid polling interval")}this._pollingInterval=e;if(this._poller){clearInterval(this._poller);this._poller=setInterval((()=>{this.poll()}),this._pollingInterval)}}_getFastBlockNumber(){const e=getTime$1();if(e-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=e;this._fastBlockNumberPromise=this.getBlockNumber().then((e=>{if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e}return this._fastBlockNumber}))}return this._fastBlockNumberPromise}_setFastBlockNumber(e){if(this._fastBlockNumber!=null&&e<this._fastBlockNumber){return}this._fastQueryDate=getTime$1();if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e;this._fastBlockNumberPromise=Promise.resolve(e)}}waitForTransaction(e,t,r){return __awaiter$o(this,void 0,void 0,(function*(){return this._waitForTransaction(e,t==null?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return __awaiter$o(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);if((i?i.confirmations:0)>=t){return i}return new Promise(((i,s)=>{const a=[];let o=false;const f=function(){if(o){return true}o=true;a.forEach((e=>{e()}));return false};const c=e=>{if(e.confirmations<t){return}if(f()){return}i(e)};this.on(e,c);a.push((()=>{this.removeListener(e,c)}));if(n){let r=n.startBlock;let i=null;const c=a=>__awaiter$o(this,void 0,void 0,(function*(){if(o){return}yield stall$3(1e3);this.getTransactionCount(n.from).then((u=>__awaiter$o(this,void 0,void 0,(function*(){if(o){return}if(u<=n.nonce){r=a}else{{const t=yield this.getTransaction(e);if(t&&t.blockNumber!=null){return}}if(i==null){i=r-3;if(i<n.startBlock){i=n.startBlock}}while(i<=a){if(o){return}const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const a=r.transactions[i];if(a.hash===e){return}if(a.from===n.from&&a.nonce===n.nonce){if(o){return}const r=yield this.waitForTransaction(a.hash,t);if(f()){return}let i="replaced";if(a.data===n.data&&a.to===n.to&&a.value.eq(n.value)){i="repriced"}else if(a.data==="0x"&&a.from===a.to&&a.value.isZero()){i="cancelled"}s(logger$_.makeError("transaction was replaced",Logger$1.errors.TRANSACTION_REPLACED,{cancelled:i==="replaced"||i==="cancelled",reason:i,replacement:this._wrapTransaction(a),hash:e,receipt:r}));return}}i++}}if(o){return}this.once("block",c)}))),(e=>{if(o){return}this.once("block",c)}))}));if(o){return}this.once("block",c);a.push((()=>{this.removeListener("block",c)}))}if(typeof r==="number"&&r>0){const e=setTimeout((()=>{if(f()){return}s(logger$_.makeError("timeout exceeded",Logger$1.errors.TIMEOUT,{timeout:r}))}),r);if(e.unref){e.unref()}a.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return __awaiter$o(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return BigNumber$2.from(e)}catch(t){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties$1({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getBalance",r);try{return BigNumber$2.from(n)}catch(e){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}}))}getTransactionCount(e,t){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties$1({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getTransactionCount",r);try{return BigNumber$2.from(n).toNumber()}catch(e){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}}))}getCode(e,t){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties$1({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getCode",r);try{return hexlify$1(n)}catch(e){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}}))}getStorageAt(e,t,r){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield resolveProperties$1({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>hexValue$1(e)))});const i=yield this.perform("getStorageAt",n);try{return hexlify$1(i)}catch(e){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}}))}_wrapTransaction(e,t,r){if(t!=null&&hexDataLength$1(t)!==32){throw new Error("invalid response - sendTransaction")}const n=e;if(t!=null&&e.hash!==t){logger$_.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger$1.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t})}n.wait=(t,n)=>__awaiter$o(this,void 0,void 0,(function*(){if(t==null){t=1}if(n==null){n=0}let i=undefined;if(t!==0&&r!=null){i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}}const s=yield this._waitForTransaction(e.hash,t,n,i);if(s==null&&t===0){return null}this._emitted["t:"+e.hash]=s.blockNumber;if(s.status===0){logger$_.throwError("transaction failed",Logger$1.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:s})}return s}));return n}sendTransaction(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>hexlify$1(e)));const r=this.formatter.transaction(e);if(r.confirmations==null){r.confirmations=0}const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){e.transaction=r;e.transactionHash=r.hash;throw e}}))}_getTransactionRequest(e){return __awaiter$o(this,void 0,void 0,(function*(){const t=yield e;const r={};["from","to"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null))}));["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?BigNumber$2.from(e):null))}));["type"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e!=null?e:null))}));if(t.accessList){r.accessList=this.formatter.accessList(t.accessList)}["data"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?hexlify$1(e):null))}));return this.formatter.transactionRequest(yield resolveProperties$1(r))}))}_getFilter(e){return __awaiter$o(this,void 0,void 0,(function*(){e=yield e;const t={};if(e.address!=null){t.address=this._getAddress(e.address)}["blockHash","topics"].forEach((r=>{if(e[r]==null){return}t[r]=e[r]}));["fromBlock","toBlock"].forEach((r=>{if(e[r]==null){return}t[r]=this._getBlockTag(e[r])}));return this.formatter.filter(yield resolveProperties$1(t))}))}_call(e,t,r){return __awaiter$o(this,void 0,void 0,(function*(){if(r>=MAX_CCIP_REDIRECTS$1){logger$_.throwError("CCIP read exceeded maximum redirections",Logger$1.errors.SERVER_ERROR,{redirects:r,transaction:e})}const n=e.to;const i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&n!=null&&i.substring(0,10)==="0x556f1830"&&hexDataLength$1(i)%32===4){try{const s=hexDataSlice$1(i,4);const a=hexDataSlice$1(s,0,32);if(!BigNumber$2.from(a).eq(n)){logger$_.throwError("CCIP Read sender did not match",Logger$1.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const o=[];const f=BigNumber$2.from(hexDataSlice$1(s,32,64)).toNumber();const c=BigNumber$2.from(hexDataSlice$1(s,f,f+32)).toNumber();const u=hexDataSlice$1(s,f+32);for(let t=0;t<c;t++){const r=_parseString$1(u,t*32);if(r==null){logger$_.throwError("CCIP Read contained corrupt URL string",Logger$1.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}o.push(r)}const l=_parseBytes$1(s,64);if(!BigNumber$2.from(hexDataSlice$1(s,100,128)).isZero()){logger$_.throwError("CCIP Read callback selector included junk",Logger$1.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const h=hexDataSlice$1(s,96,100);const d=_parseBytes$1(s,128);const p=yield this.ccipReadFetch(e,l,o);if(p==null){logger$_.throwError("CCIP Read disabled or provided no URLs",Logger$1.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const y={to:n,data:hexConcat$1([h,encodeBytes$1([p,d])])};return this._call(y,t,r+1)}catch(e){if(e.code===Logger$1.errors.SERVER_ERROR){throw e}}}try{return hexlify$1(i)}catch(r){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}}))}call(e,t){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties$1({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield resolveProperties$1({transaction:this._getTransactionRequest(e)});const r=yield this.perform("estimateGas",t);try{return BigNumber$2.from(r)}catch(e){return logger$_.throwError("bad result from backend",Logger$1.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}}))}_getAddress(e){return __awaiter$o(this,void 0,void 0,(function*(){e=yield e;if(typeof e!=="string"){logger$_.throwArgumentError("invalid address or ENS name","name",e)}const t=yield this.resolveName(e);if(t==null){logger$_.throwError("ENS name not configured",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`})}return t}))}_getBlock(e,t){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;let r=-128;const n={includeTransactions:!!t};if(isHexString$1(e,32)){n.blockHash=e}else{try{n.blockTag=yield this._getBlockTag(e);if(isHexString$1(n.blockTag)){r=parseInt(n.blockTag.substring(2),16)}}catch(t){logger$_.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}}return poll$1((()=>__awaiter$o(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(e==null){if(n.blockHash!=null){if(this._emitted["b:"+n.blockHash]==null){return null}}if(n.blockTag!=null){if(r>this._emitted.block){return null}}return undefined}if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){if(t==null){t=yield this._getInternalBlockNumber(100+2*this.pollingInterval)}let e=t-n.blockNumber+1;if(e<=0){e=1}n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);r.transactions=r.transactions.map((e=>this._wrapTransaction(e)));return r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,false)}getBlockWithTransactions(e){return this._getBlock(e,true)}getTransaction(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return poll$1((()=>__awaiter$o(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}const n=this.formatter.transactionResponse(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return poll$1((()=>__awaiter$o(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}if(r.blockHash==null){return undefined}const n=this.formatter.receipt(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(e){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield resolveProperties$1({filter:this._getFilter(e)});const r=yield this.perform("getLogs",t);r.forEach((e=>{if(e.removed==null){e.removed=false}}));return Formatter$1.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return __awaiter$o(this,void 0,void 0,(function*(){yield this.getNetwork();return this.perform("getEtherPrice",{})}))}_getBlockTag(e){return __awaiter$o(this,void 0,void 0,(function*(){e=yield e;if(typeof e==="number"&&e<0){if(e%1){logger$_.throwArgumentError("invalid BlockTag","blockTag",e)}let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);t+=e;if(t<0){t=0}return this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return __awaiter$o(this,void 0,void 0,(function*(){let t=e;while(true){if(t===""||t==="."){return null}if(e!=="eth"&&t==="eth"){return null}const r=yield this._getResolver(t,"getResolver");if(r!=null){const n=new Resolver$1(this,r,e);if(t!==e&&!(yield n.supportsWildcard())){return null}return n}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return __awaiter$o(this,void 0,void 0,(function*(){if(t==null){t="ENS"}const r=yield this.getNetwork();if(!r.ensAddress){logger$_.throwError("network does not support ENS",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name})}try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+namehash$1(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null}))}resolveName(e){return __awaiter$o(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(isHexString$1(e)){throw t}}if(typeof e!=="string"){logger$_.throwArgumentError("invalid ENS name","name",e)}const t=yield this.getResolver(e);if(!t){return null}return yield t.getAddress()}))}lookupAddress(e){return __awaiter$o(this,void 0,void 0,(function*(){e=yield e;e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse";const r=yield this._getResolver(t,"lookupAddress");if(r==null){return null}const n=_parseString$1(yield this.call({to:r,data:"0x691f3431"+namehash$1(t).substring(2)}),0);const i=yield this.resolveName(n);if(i!=e){return null}return n}))}getAvatar(e){return __awaiter$o(this,void 0,void 0,(function*(){let t=null;if(isHexString$1(e)){const r=this.formatter.address(e);const n=r.substring(2).toLowerCase()+".addr.reverse";const i=yield this._getResolver(n,"getAvatar");if(!i){return null}t=new Resolver$1(this,i,n);try{const e=yield t.getAvatar();if(e){return e.url}}catch(e){if(e.code!==Logger$1.errors.CALL_EXCEPTION){throw e}}try{const e=_parseString$1(yield this.call({to:i,data:"0x691f3431"+namehash$1(n).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==Logger$1.errors.CALL_EXCEPTION){throw e}return null}}else{t=yield this.getResolver(e);if(!t){return null}}const r=yield t.getAvatar();if(r==null){return null}return r.url}))}perform(e,t){return logger$_.throwError(e+" not implemented",Logger$1.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new Event$2(getEventTag$2(e),t,r);this._events.push(n);this._startEvent(n);return this}on(e,t){return this._addEventListener(e,t,false)}once(e,t){return this._addEventListener(e,t,true)}emit(e,...t){let r=false;let n=[];let i=getEventTag$2(e);this._events=this._events.filter((e=>{if(e.tag!==i){return true}setTimeout((()=>{e.listener.apply(this,t)}),0);r=true;if(e.once){n.push(e);return false}return true}));n.forEach((e=>{this._stopEvent(e)}));return r}listenerCount(e){if(!e){return this._events.length}let t=getEventTag$2(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(e==null){return this._events.map((e=>e.listener))}let t=getEventTag$2(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(t==null){return this.removeAllListeners(e)}const r=[];let n=false;let i=getEventTag$2(e);this._events=this._events.filter((e=>{if(e.tag!==i||e.listener!=t){return true}if(n){return true}n=true;r.push(e);return false}));r.forEach((e=>{this._stopEvent(e)}));return this}removeAllListeners(e){let t=[];if(e==null){t=this._events;this._events=[]}else{const r=getEventTag$2(e);this._events=this._events.filter((e=>{if(e.tag!==r){return true}t.push(e);return false}))}t.forEach((e=>{this._stopEvent(e)}));return this}}var __awaiter$n=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$Z=new Logger$1(version$t);const errorGas$1=["call","estimateGas"];function spelunk$1(e,t){if(e==null){return null}if(typeof e.message==="string"&&e.message.match("reverted")){const r=isHexString$1(e.data)?e.data:null;if(!t||r){return{message:e.message,data:r}}}if(typeof e==="object"){for(const r in e){const n=spelunk$1(e[r],t);if(n){return n}}return null}if(typeof e==="string"){try{return spelunk$1(JSON.parse(e),t)}catch(e){}}return null}function checkError$3(e,t,r){const n=r.transaction||r.signedTransaction;if(e==="call"){const e=spelunk$1(t,true);if(e){return e.data}logger$Z.throwError("missing revert data in call exception; Transaction reverted without a reason string",Logger$1.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if(e==="estimateGas"){let r=spelunk$1(t.body,false);if(r==null){r=spelunk$1(t,false)}if(r){logger$Z.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger$1.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}}let i=t.message;if(t.code===Logger$1.errors.SERVER_ERROR&&t.error&&typeof t.error.message==="string"){i=t.error.message}else if(typeof t.body==="string"){i=t.body}else if(typeof t.responseText==="string"){i=t.responseText}i=(i||"").toLowerCase();if(i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)){logger$Z.throwError("insufficient funds for intrinsic transaction cost",Logger$1.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n})}if(i.match(/nonce (is )?too low/i)){logger$Z.throwError("nonce has already been used",Logger$1.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n})}if(i.match(/replacement transaction underpriced|transaction gas price.*too low/i)){logger$Z.throwError("replacement fee too low",Logger$1.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n})}if(i.match(/only replay-protected/i)){logger$Z.throwError("legacy pre-eip-155 transactions not supported",Logger$1.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n})}if(errorGas$1.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)){logger$Z.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger$1.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n})}throw t}function timer$1(e){return new Promise((function(t){setTimeout(t,e)}))}function getResult$3(e){if(e.error){const t=new Error(e.error.message);t.code=e.error.code;t.data=e.error.data;throw t}return e.result}function getLowerCase$1(e){if(e){return e.toLowerCase()}return e}const _constructorGuard$5={};class JsonRpcSigner$1 extends Signer$1{constructor(e,t,r){super();if(e!==_constructorGuard$5){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}defineReadOnly$1(this,"provider",t);if(r==null){r=0}if(typeof r==="string"){defineReadOnly$1(this,"_address",this.provider.formatter.address(r));defineReadOnly$1(this,"_index",null)}else if(typeof r==="number"){defineReadOnly$1(this,"_index",r);defineReadOnly$1(this,"_address",null)}else{logger$Z.throwArgumentError("invalid address or index","addressOrIndex",r)}}connect(e){return logger$Z.throwError("cannot alter JSON-RPC Signer connection",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner$1(_constructorGuard$5,this.provider,this._address||this._index)}getAddress(){if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then((e=>{if(e.length<=this._index){logger$Z.throwError("unknown account #"+this._index,Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}return this.provider.formatter.address(e[this._index])}))}sendUncheckedTransaction(e){e=shallowCopy$1(e);const t=this.getAddress().then((e=>{if(e){e=e.toLowerCase()}return e}));if(e.gasLimit==null){const r=shallowCopy$1(e);r.from=t;e.gasLimit=this.provider.estimateGas(r)}if(e.to!=null){e.to=Promise.resolve(e.to).then((e=>__awaiter$n(this,void 0,void 0,(function*(){if(e==null){return null}const t=yield this.provider.resolveName(e);if(t==null){logger$Z.throwArgumentError("provided ENS name resolves to null","tx.to",e)}return t}))))}return resolveProperties$1({tx:resolveProperties$1(e),sender:t}).then((({tx:t,sender:r})=>{if(t.from!=null){if(t.from.toLowerCase()!==r){logger$Z.throwArgumentError("from address mismatch","transaction",e)}}else{t.from=r}const n=this.provider.constructor.hexlifyTransaction(t,{from:true});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>{if(typeof e.message==="string"&&e.message.match(/user denied/i)){logger$Z.throwError("user rejected transaction",Logger$1.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t})}return checkError$3("sendTransaction",e,n)}))}))}signTransaction(e){return logger$Z.throwError("signing transactions is unsupported",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return __awaiter$n(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);const r=yield this.sendUncheckedTransaction(e);try{return yield poll$1((()=>__awaiter$n(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(e===null){return undefined}return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){e.transactionHash=r;throw e}}))}signMessage(e){return __awaiter$n(this,void 0,void 0,(function*(){const t=typeof e==="string"?toUtf8Bytes$1(e):e;const r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[hexlify$1(t),r.toLowerCase()])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){logger$Z.throwError("user rejected signing",Logger$1.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e})}throw t}}))}_legacySignMessage(e){return __awaiter$n(this,void 0,void 0,(function*(){const t=typeof e==="string"?toUtf8Bytes$1(e):e;const r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),hexlify$1(t)])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){logger$Z.throwError("user rejected signing",Logger$1.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e})}throw t}}))}_signTypedData(e,t,r){return __awaiter$n(this,void 0,void 0,(function*(){const n=yield TypedDataEncoder$1.resolveNames(e,t,r,(e=>this.provider.resolveName(e)));const i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(TypedDataEncoder$1.getPayload(n.domain,t,n.value))])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){logger$Z.throwError("user rejected signing",Logger$1.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}})}throw e}}))}unlock(e){return __awaiter$n(this,void 0,void 0,(function*(){const t=this.provider;const r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class UncheckedJsonRpcSigner$1 extends JsonRpcSigner$1{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const allowedTransactionKeys$4={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true};class JsonRpcProvider$1 extends BaseProvider$1{constructor(e,t){let r=t;if(r==null){r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))}super(r);if(!e){e=getStatic$1(this.constructor,"defaultUrl")()}if(typeof e==="string"){defineReadOnly$1(this,"connection",Object.freeze({url:e}))}else{defineReadOnly$1(this,"connection",Object.freeze(shallowCopy$1(e)))}this._nextId=42}get _cache(){if(this._eventLoopCache==null){this._eventLoopCache={}}return this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){if(!this._cache["detectNetwork"]){this._cache["detectNetwork"]=this._uncachedDetectNetwork();setTimeout((()=>{this._cache["detectNetwork"]=null}),0)}return this._cache["detectNetwork"]}_uncachedDetectNetwork(){return __awaiter$n(this,void 0,void 0,(function*(){yield timer$1(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(e!=null){const t=getStatic$1(this.constructor,"getNetwork");try{return t(BigNumber$2.from(e).toNumber())}catch(t){return logger$Z.throwError("could not detect network",Logger$1.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return logger$Z.throwError("could not detect network",Logger$1.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new JsonRpcSigner$1(_constructorGuard$5,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy$1(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e]){return this._cache[e]}const i=fetchJson$1(this.connection,JSON.stringify(r),getResult$3).then((e=>{this.emit("debug",{action:"response",request:r,response:e,provider:this});return e}),(e=>{this.emit("debug",{action:"response",error:e,request:r,provider:this});throw e}));if(n){this._cache[e]=i;setTimeout((()=>{this._cache[e]=null}),0)}return i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase$1(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase$1(t.address),t.blockTag]];case"getCode":return["eth_getCode",[getLowerCase$1(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase$1(t.address),hexZeroPad$1(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":if(t.blockTag){return["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]}else if(t.blockHash){return["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]}return null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":{const e=getStatic$1(this.constructor,"hexlifyTransaction");return["eth_call",[e(t.transaction,{from:true}),t.blockTag]]}case"estimateGas":{const e=getStatic$1(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[e(t.transaction,{from:true})]]}case"getLogs":if(t.filter&&t.filter.address!=null){t.filter.address=getLowerCase$1(t.filter.address)}return["eth_getLogs",[t.filter]]}return null}perform(e,t){return __awaiter$n(this,void 0,void 0,(function*(){if(e==="call"||e==="estimateGas"){const e=t.transaction;if(e&&e.type!=null&&BigNumber$2.from(e.type).isZero()){if(e.maxFeePerGas==null&&e.maxPriorityFeePerGas==null){const r=yield this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){t=shallowCopy$1(t);t.transaction=shallowCopy$1(e);delete t.transaction.type}}}}const r=this.prepareRequest(e,t);if(r==null){logger$Z.throwError(e+" not implemented",Logger$1.errors.NOT_IMPLEMENTED,{operation:e})}try{return yield this.send(r[0],r[1])}catch(r){return checkError$3(e,r,t)}}))}_startEvent(e){if(e.tag==="pending"){this._startPending()}super._startEvent(e)}_startPending(){if(this._pendingFilter!=null){return}const e=this;const t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t;t.then((function(r){function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t){return null}let n=Promise.resolve();r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending";n=n.then((function(){return e.getTransaction(t).then((function(t){e.emit("pending",t);return null}))}))}));return n.then((function(){return timer$1(1e3)}))})).then((function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}setTimeout((function(){n()}),0);return null})).catch((e=>{}))}n();return r})).catch((e=>{}))}_stopEvent(e){if(e.tag==="pending"&&this.listenerCount("pending")===0){this._pendingFilter=null}super._stopEvent(e)}static hexlifyTransaction(e,t){const r=shallowCopy$1(allowedTransactionKeys$4);if(t){for(const e in t){if(t[e]){r[e]=true}}}checkProperties$1(e,r);const n={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(e[t]==null){return}const r=hexValue$1(BigNumber$2.from(e[t]));if(t==="gasLimit"){t="gas"}n[t]=r}));["from","to","data"].forEach((function(t){if(e[t]==null){return}n[t]=hexlify$1(e[t])}));if(e.accessList){n["accessList"]=accessListify$1(e.accessList)}return n}}let WS$1=null;try{WS$1=WebSocket;if(WS$1==null){throw new Error("inject please")}}catch(e){const t=new Logger$1(version$t);WS$1=function(){t.throwError("WebSockets not supported in this environment",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var __awaiter$m=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$Y=new Logger$1(version$t);let NextId$1=1;class WebSocketProvider$1 extends JsonRpcProvider$1{constructor(e,t){if(t==="any"){logger$Y.throwError("WebSocketProvider does not support 'any' network yet",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"network:any"})}if(typeof e==="string"){super(e,t)}else{super("_websocket",t)}this._pollingInterval=-1;this._wsReady=false;if(typeof e==="string"){defineReadOnly$1(this,"_websocket",new WS$1(this.connection.url))}else{defineReadOnly$1(this,"_websocket",e)}defineReadOnly$1(this,"_requests",{});defineReadOnly$1(this,"_subs",{});defineReadOnly$1(this,"_subIds",{});defineReadOnly$1(this,"_detectNetwork",super.detectNetwork());this.websocket.onopen=()=>{this._wsReady=true;Object.keys(this._requests).forEach((e=>{this.websocket.send(this._requests[e].payload)}))};this.websocket.onmessage=e=>{const t=e.data;const r=JSON.parse(t);if(r.id!=null){const e=String(r.id);const n=this._requests[e];delete this._requests[e];if(r.result!==undefined){n.callback(null,r.result);this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this})}else{let e=null;if(r.error){e=new Error(r.error.message||"unknown error");defineReadOnly$1(e,"code",r.error.code||null);defineReadOnly$1(e,"response",t)}else{e=new Error("unknown error")}n.callback(e,undefined);this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if(r.method==="eth_subscription"){const e=this._subs[r.params.subscription];if(e){e.processFunc(r.params.result)}}else{console.warn("this should not happen")}};const r=setInterval((()=>{this.emit("poll")}),1e3);if(r.unref){r.unref()}}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){logger$Y.throwError("cannot reset events block on WebSocketProvider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){logger$Y.throwError("cannot set polling interval on WebSocketProvider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return __awaiter$m(this,void 0,void 0,(function*(){return null}))}set polling(e){if(!e){return}logger$Y.throwError("cannot set polling on WebSocketProvider",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=NextId$1++;return new Promise(((n,i)=>{function s(e,t){if(e){return i(e)}return n(t)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this});this._requests[String(r)]={callback:s,payload:a};if(this._wsReady){this.websocket.send(a)}}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return __awaiter$m(this,void 0,void 0,(function*(){let n=this._subIds[e];if(n==null){n=Promise.all(t).then((e=>this.send("eth_subscribe",e)));this._subIds[e]=n}const i=yield n;this._subs[i]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=BigNumber$2.from(e.number).toNumber();this._emitted.block=t;this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{if(t.removed==null){t.removed=false}this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{if(!e){return}this.emit(t,e)}))};t(e);this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>e.type==="tx")).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter((e=>e.type==="tx")).length){return}t="tx"}else if(this.listenerCount(e.event)){return}const r=this._subIds[t];if(!r){return}delete this._subIds[t];r.then((e=>{if(!this._subs[e]){return}delete this._subs[e];this.send("eth_unsubscribe",[e])}))}destroy(){return __awaiter$m(this,void 0,void 0,(function*(){if(this.websocket.readyState===WS$1.CONNECTING){yield new Promise((e=>{this.websocket.onopen=function(){e(true)};this.websocket.onerror=function(){e(false)}}))}this.websocket.close(1e3)}))}}var __awaiter$l=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$X=new Logger$1(version$t);class StaticJsonRpcProvider$1 extends JsonRpcProvider$1{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return __awaiter$l(this,void 0,void 0,(function*(){let t=this.network;if(t==null){t=yield e.detectNetwork.call(this);if(!t){logger$X.throwError("no network detected",Logger$1.errors.UNKNOWN_ERROR,{})}if(this._network==null){defineReadOnly$1(this,"_network",t);this.emit("network",t,null)}}return t}))}}class UrlJsonRpcProvider$1 extends StaticJsonRpcProvider$1{constructor(e,t){logger$X.checkAbstract(new.target,UrlJsonRpcProvider$1);e=getStatic$1(new.target,"getNetwork")(e);t=getStatic$1(new.target,"getApiKey")(t);const r=getStatic$1(new.target,"getUrl")(e,t);super(r,e);if(typeof t==="string"){defineReadOnly$1(this,"apiKey",t)}else if(t!=null){Object.keys(t).forEach((e=>{defineReadOnly$1(this,e,t[e])}))}}_startPending(){logger$X.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return false}getSigner(e){return logger$X.throwError("API provider does not support signing",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return logger$X.throwError("not implemented; sub-classes must override getUrl",Logger$1.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const logger$W=new Logger$1(version$t);const defaultApiKey$5="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class AlchemyWebSocketProvider$1 extends WebSocketProvider$1{constructor(e,t){const r=new AlchemyProvider$1(e,t);const n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network);defineReadOnly$1(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===defaultApiKey$5}}class AlchemyProvider$1 extends UrlJsonRpcProvider$1{static getWebSocketProvider(e,t){return new AlchemyWebSocketProvider$1(e,t)}static getApiKey(e){if(e==null){return defaultApiKey$5}if(e&&typeof e!=="string"){logger$W.throwArgumentError("invalid apiKey","apiKey",e)}return e}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:logger$W.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:true,url:"https:/"+"/"+r+t,throttleCallback:(e,r)=>{if(t===defaultApiKey$5){showThrottleMessage$1()}return Promise.resolve(true)}}}isCommunityResource(){return this.apiKey===defaultApiKey$5}}const logger$V=new Logger$1(version$t);const defaultApiKey$4="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function getHost$1(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return logger$V.throwArgumentError("unsupported network","name",e)}class AnkrProvider$1 extends UrlJsonRpcProvider$1{isCommunityResource(){return this.apiKey===defaultApiKey$4}static getApiKey(e){if(e==null){return defaultApiKey$4}return e}static getUrl(e,t){if(t==null){t=defaultApiKey$4}const r={allowGzip:true,url:"https://"+getHost$1(e.name)+t,throttleCallback:(e,r)=>{if(t.apiKey===defaultApiKey$4){showThrottleMessage$1()}return Promise.resolve(true)}};if(t.projectSecret!=null){r.user="";r.password=t.projectSecret}return r}}var __awaiter$k=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$U=new Logger$1(version$t);class CloudflareProvider$1 extends UrlJsonRpcProvider$1{static getApiKey(e){if(e!=null){logger$U.throwArgumentError("apiKey not supported for cloudflare","apiKey",e)}return null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:logger$U.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$k(this,void 0,void 0,(function*(){if(e==="getBlockNumber"){const e=yield r.perform.call(this,"getBlock",{blockTag:"latest"});return e.number}return r.perform.call(this,e,t)}))}}var __awaiter$j=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$T=new Logger$1(version$t);function getTransactionPostData$1(e){const t={};for(let r in e){if(e[r]==null){continue}let n=e[r];if(r==="type"&&n===0){continue}if({type:true,gasLimit:true,gasPrice:true,maxFeePerGs:true,maxPriorityFeePerGas:true,nonce:true,value:true}[r]){n=hexValue$1(hexlify$1(n))}else if(r==="accessList"){n="["+accessListify$1(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]"}else{n=hexlify$1(n)}t[r]=n}return t}function getResult$2(e){if(e.status==0&&(e.message==="No records found"||e.message==="No transactions found")){return e.result}if(e.status!=1||typeof e.message!=="string"||!e.message.match(/^OK/)){const t=new Error("invalid response");t.result=JSON.stringify(e);if((e.result||"").toLowerCase().indexOf("rate limit")>=0){t.throttleRetry=true}throw t}return e.result}function getJsonResult$1(e){if(e&&e.status==0&&e.message=="NOTOK"&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");t.result=JSON.stringify(e);t.throttleRetry=true;throw t}if(e.jsonrpc!="2.0"){const t=new Error("invalid response");t.result=JSON.stringify(e);throw t}if(e.error){const t=new Error(e.error.message||"unknown error");if(e.error.code){t.code=e.error.code}if(e.error.data){t.data=e.error.data}throw t}return e.result}function checkLogTag$1(e){if(e==="pending"){throw new Error("pending not supported")}if(e==="latest"){return e}return parseInt(e.substring(2),16)}function checkError$2(e,t,r){if(e==="call"&&t.code===Logger$1.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r){r="0x"+r.replace(/^.*0x/i,"")}if(isHexString$1(r)){return r}logger$T.throwError("missing revert data in call exception",Logger$1.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;if(t.code===Logger$1.errors.SERVER_ERROR){if(t.error&&typeof t.error.message==="string"){n=t.error.message}else if(typeof t.body==="string"){n=t.body}else if(typeof t.responseText==="string"){n=t.responseText}}n=(n||"").toLowerCase();if(n.match(/insufficient funds/)){logger$T.throwError("insufficient funds for intrinsic transaction cost",Logger$1.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r})}if(n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)){logger$T.throwError("nonce has already been used",Logger$1.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r})}if(n.match(/another transaction with same nonce/)){logger$T.throwError("replacement fee too low",Logger$1.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r})}if(n.match(/execution failed due to an exception|execution reverted/)){logger$T.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger$1.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r})}throw t}class EtherscanProvider$1 extends BaseProvider$1{constructor(e,t){super(e);defineReadOnly$1(this,"baseUrl",this.getBaseUrl());defineReadOnly$1(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return logger$T.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];if(n!=null){e+=`&${r}=${n}`}return e}),"");const n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){t.module=e;t.apikey=this.apiKey;return t}fetch(e,t,r){return __awaiter$j(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(e,t);const i=r?this.getPostData(e,t):null;const s=e==="proxy"?getJsonResult$1:getResult$2;this.emit("debug",{action:"request",request:n,provider:this});const a={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>{if(this.isCommunityResource()){showThrottleMessage$1()}return Promise.resolve(true)}};let o=null;if(i){a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"};o=Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&")}const f=yield fetchJson$1(a,o,s||getJsonResult$1);this.emit("debug",{action:"response",request:n,response:deepCopy$1(f),provider:this});return f}))}detectNetwork(){return __awaiter$j(this,void 0,void 0,(function*(){return this.network}))}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$j(this,void 0,void 0,(function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},true).catch((e=>checkError$2("sendTransaction",e,t.signedTransaction)));case"getBlock":if(t.blockTag){return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"})}throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}const e=getTransactionPostData$1(t.transaction);e.module="proxy";e.action="eth_call";try{return yield this.fetch("proxy",e,true)}catch(e){return checkError$2("call",e,t.transaction)}}case"estimateGas":{const e=getTransactionPostData$1(t.transaction);e.module="proxy";e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,true)}catch(e){return checkError$2("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock){e.fromBlock=checkLogTag$1(t.filter.fromBlock)}if(t.filter.toBlock){e.toBlock=checkLogTag$1(t.filter.toBlock)}if(t.filter.address){e.address=t.filter.address}if(t.filter.topics&&t.filter.topics.length>0){if(t.filter.topics.length>1){logger$T.throwError("unsupported topic count",Logger$1.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics})}if(t.filter.topics.length===1){const r=t.filter.topics[0];if(typeof r!=="string"||r.length!==66){logger$T.throwError("unsupported topic format",Logger$1.errors.UNSUPPORTED_OPERATION,{topic0:r})}e.topic0=r}}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(t.blockHash!=null){continue}if(n[t.blockNumber]==null){const e=yield this.getBlock(t.blockNumber);if(e){n[t.blockNumber]=e.hash}}t.blockHash=n[t.blockNumber]}return r}case"getEtherPrice":if(this.network.name!=="homestead"){return 0}return parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)}))}getHistory(e,t,r){return __awaiter$j(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:t==null?0:t,endblock:r==null?99999999:r,sort:"asc"};const i=yield this.fetch("account",n);return i.map((e=>{["contractAddress","to"].forEach((function(t){if(e[t]==""){delete e[t]}}));if(e.creates==null&&e.contractAddress!=null){e.creates=e.contractAddress}const t=this.formatter.transactionResponse(e);if(e.timeStamp){t.timestamp=parseInt(e.timeStamp)}return t}))}))}isCommunityResource(){return this.apiKey==null}}var __awaiter$i=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$S=new Logger$1(version$t);function now$1(){return(new Date).getTime()}function checkNetworks$1(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(n==null){return null}if(t){if(!(t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||t.ensAddress==null&&n.ensAddress==null))){logger$S.throwArgumentError("provider mismatch","networks",e)}}else{t=n}}return t}function median$1(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2){return e[r]}const n=e[r-1],i=e[r];if(t!=null&&Math.abs(n-i)>t){return null}return(n+i)/2}function serialize$4(e){if(e===null){return"null"}else if(typeof e==="number"||typeof e==="boolean"){return JSON.stringify(e)}else if(typeof e==="string"){return e}else if(BigNumber$2.isBigNumber(e)){return e.toString()}else if(Array.isArray(e)){return JSON.stringify(e.map((e=>serialize$4(e))))}else if(typeof e==="object"){const t=Object.keys(e);t.sort();return"{"+t.map((t=>{let r=e[t];if(typeof r==="function"){r="[function]"}else{r=serialize$4(r)}return JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let nextRid$1=1;function stall$2(e){let t=null;let r=null;let n=new Promise((n=>{t=function(){if(r){clearTimeout(r);r=null}n()};r=setTimeout(t,e)}));const i=e=>{n=n.then(e);return n};function s(){return n}return{cancel:t,getPromise:s,wait:i}}const ForwardErrors$1=[Logger$1.errors.CALL_EXCEPTION,Logger$1.errors.INSUFFICIENT_FUNDS,Logger$1.errors.NONCE_EXPIRED,Logger$1.errors.REPLACEMENT_UNDERPRICED,Logger$1.errors.UNPREDICTABLE_GAS_LIMIT];const ForwardProperties$1=["address","args","errorArgs","errorSignature","method","transaction"];function exposeDebugConfig$1(e,t){const r={weight:e.weight};Object.defineProperty(r,"provider",{get:()=>e.provider});if(e.start){r.start=e.start}if(t){r.duration=t-e.start}if(e.done){if(e.error){r.error=e.error}else{r.result=e.result||null}}return r}function normalizedTally$1(e,t){return function(r){const n={};r.forEach((t=>{const r=e(t.result);if(!n[r]){n[r]={count:0,result:t.result}}n[r].count++}));const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t){return r.result}}return undefined}}function getProcessFunc$1(e,t,r){let n=serialize$4;switch(t){case"getBlockNumber":return function(t){const r=t.map((e=>e.result));let n=median$1(t.map((e=>e.result)),2);if(n==null){return undefined}n=Math.ceil(n);if(r.indexOf(n+1)>=0){n++}if(n>=e._highestBlockNumber){e._highestBlockNumber=n}return e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map((e=>e.result));t.sort();return t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return median$1(e.map((e=>e.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){if(e==null){return null}e=shallowCopy$1(e);e.confirmations=-1;return serialize$4(e)};break;case"getBlock":if(r.includeTransactions){n=function(e){if(e==null){return null}e=shallowCopy$1(e);e.transactions=e.transactions.map((e=>{e=shallowCopy$1(e);e.confirmations=-1;return e}));return serialize$4(e)}}else{n=function(e){if(e==null){return null}return serialize$4(e)}}break;default:throw new Error("unknown method: "+t)}return normalizedTally$1(n,e.quorum)}function waitForSync$1(e,t){return __awaiter$i(this,void 0,void 0,(function*(){const r=e.provider;if(r.blockNumber!=null&&r.blockNumber>=t||t===-1){return r}return poll$1((()=>new Promise(((n,i)=>{setTimeout((function(){if(r.blockNumber>=t){return n(r)}if(e.cancelled){return n(null)}return n(undefined)}),0)}))),{oncePoll:r})}))}function getRunner$1(e,t,r,n){return __awaiter$i(this,void 0,void 0,(function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice){return i.getEtherPrice()}break;case"getBalance":case"getTransactionCount":case"getCode":if(n.blockTag&&isHexString$1(n.blockTag)){i=yield waitForSync$1(e,t)}return i[r](n.address,n.blockTag||"latest");case"getStorageAt":if(n.blockTag&&isHexString$1(n.blockTag)){i=yield waitForSync$1(e,t)}return i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":if(n.blockTag&&isHexString$1(n.blockTag)){i=yield waitForSync$1(e,t)}return i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":if(n.blockTag&&isHexString$1(n.blockTag)){i=yield waitForSync$1(e,t)}if(r==="call"&&n.blockTag){return i[r](n.transaction,n.blockTag)}return i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;if(r.fromBlock&&isHexString$1(r.fromBlock)||r.toBlock&&isHexString$1(r.toBlock)){i=yield waitForSync$1(e,t)}return i.getLogs(r)}}return logger$S.throwError("unknown method error",Logger$1.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class FallbackProvider$1 extends BaseProvider$1{constructor(e,t){if(e.length===0){logger$S.throwArgumentError("missing providers","providers",e)}const r=e.map(((e,t)=>{if(Provider$1.isProvider(e)){const t=isCommunityResource$1(e)?2e3:750;const r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=shallowCopy$1(e);if(r.priority==null){r.priority=1}if(r.stallTimeout==null){r.stallTimeout=isCommunityResource$1(e)?2e3:750}if(r.weight==null){r.weight=1}const n=r.weight;if(n%1||n>512||n<1){logger$S.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n)}return Object.freeze(r)}));const n=r.reduce(((e,t)=>e+t.weight),0);if(t==null){t=n/2}else if(t>n){logger$S.throwArgumentError("quorum will always fail; larger than total weight","quorum",t)}let i=checkNetworks$1(r.map((e=>e.provider.network)));if(i==null){i=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then(e,t)}),0)}))}super(i);defineReadOnly$1(this,"providerConfigs",Object.freeze(r));defineReadOnly$1(this,"quorum",t);this._highestBlockNumber=-1}detectNetwork(){return __awaiter$i(this,void 0,void 0,(function*(){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.getNetwork())));return checkNetworks$1(e)}))}perform(e,t){return __awaiter$i(this,void 0,void 0,(function*(){if(e==="sendTransaction"){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.sendTransaction(t.signedTransaction).then((e=>e.hash),(e=>e)))));for(let t=0;t<e.length;t++){const r=e[t];if(typeof r==="string"){return r}}throw e[0]}if(this._highestBlockNumber===-1&&e!=="getBlockNumber"){yield this.getBlockNumber()}const r=getProcessFunc$1(this,e,t);const n=shuffled$1(this.providerConfigs.map(shallowCopy$1));n.sort(((e,t)=>e.priority-t.priority));const i=this._highestBlockNumber;let s=0;let a=true;while(true){const o=now$1();let f=n.filter((e=>e.runner&&o-e.start<e.stallTimeout)).reduce(((e,t)=>e+t.weight),0);while(f<this.quorum&&s<n.length){const r=n[s++];const a=nextRid$1++;r.start=now$1();r.staller=stall$2(r.stallTimeout);r.staller.wait((()=>{r.staller=null}));r.runner=getRunner$1(r,i,e,t).then((n=>{r.done=true;r.result=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig$1(r,now$1()),request:{method:e,params:deepCopy$1(t)},provider:this})}}),(n=>{r.done=true;r.error=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig$1(r,now$1()),request:{method:e,params:deepCopy$1(t)},provider:this})}}));if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig$1(r,null),request:{method:e,params:deepCopy$1(t)},provider:this})}f+=r.weight}const c=[];n.forEach((e=>{if(e.done||!e.runner){return}c.push(e.runner);if(e.staller){c.push(e.staller.getPromise())}}));if(c.length){yield Promise.race(c)}const u=n.filter((e=>e.done&&e.error==null));if(u.length>=this.quorum){const e=r(u);if(e!==undefined){n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));return e}if(!a){yield stall$2(100).getPromise()}a=false}const l=n.reduce(((e,t)=>{if(!t.done||t.error==null){return e}const r=t.error.code;if(ForwardErrors$1.indexOf(r)>=0){if(!e[r]){e[r]={error:t.error,weight:0}}e[r].weight+=t.weight}return e}),{});Object.keys(l).forEach((e=>{const t=l[e];if(t.weight<this.quorum){return}n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));const r=t.error;const i={};ForwardProperties$1.forEach((e=>{if(r[e]==null){return}i[e]=r[e]}));logger$S.throwError(r.reason||r.message,e,i)}));if(n.filter((e=>!e.done)).length===0){break}}n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));return logger$S.throwError("failed to meet quorum",Logger$1.errors.SERVER_ERROR,{method:e,params:t,results:n.map((e=>exposeDebugConfig$1(e))),provider:this})}))}}const IpcProvider$1=null;const logger$R=new Logger$1(version$t);const defaultProjectId$1="84842078b09946638c03157f83405213";class InfuraWebSocketProvider$1 extends WebSocketProvider$1{constructor(e,t){const r=new InfuraProvider$1(e,t);const n=r.connection;if(n.password){logger$R.throwError("INFURA WebSocket project secrets unsupported",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"})}const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,e);defineReadOnly$1(this,"apiKey",r.projectId);defineReadOnly$1(this,"projectId",r.projectId);defineReadOnly$1(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===defaultProjectId$1}}class InfuraProvider$1 extends UrlJsonRpcProvider$1{static getWebSocketProvider(e,t){return new InfuraWebSocketProvider$1(e,t)}static getApiKey(e){const t={apiKey:defaultProjectId$1,projectId:defaultProjectId$1,projectSecret:null};if(e==null){return t}if(typeof e==="string"){t.projectId=e}else if(e.projectSecret!=null){logger$R.assertArgument(typeof e.projectId==="string","projectSecret requires a projectId","projectId",e.projectId);logger$R.assertArgument(typeof e.projectSecret==="string","invalid projectSecret","projectSecret","[REDACTED]");t.projectId=e.projectId;t.projectSecret=e.projectSecret}else if(e.projectId){t.projectId=e.projectId}t.apiKey=t.projectId;return t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:logger$R.throwError("unsupported network",Logger$1.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:true,url:"https:/"+"/"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>{if(t.projectId===defaultProjectId$1){showThrottleMessage$1()}return Promise.resolve(true)}};if(t.projectSecret!=null){n.user="";n.password=t.projectSecret}return n}isCommunityResource(){return this.projectId===defaultProjectId$1}}class JsonRpcBatchProvider$1 extends JsonRpcProvider$1{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};if(this._pendingBatch==null){this._pendingBatch=[]}const n={request:r,resolve:null,reject:null};const i=new Promise(((e,t)=>{n.resolve=e;n.reject=t}));this._pendingBatch.push(n);if(!this._pendingBatchAggregator){this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null;this._pendingBatchAggregator=null;const t=e.map((e=>e.request));this.emit("debug",{action:"requestBatch",request:deepCopy$1(t),provider:this});return fetchJson$1(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this});e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code;t.data=n.error.data;e.reject(t)}else{e.resolve(n.result)}}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this});e.forEach((e=>{e.reject(r)}))}))}),10)}return i}}const logger$Q=new Logger$1(version$t);const defaultApiKey$3="ETHERS_JS_SHARED";class NodesmithProvider$1 extends UrlJsonRpcProvider$1{static getApiKey(e){if(e&&typeof e!=="string"){logger$Q.throwArgumentError("invalid apiKey","apiKey",e)}return e||defaultApiKey$3}static getUrl(e,t){logger$Q.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:logger$Q.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const logger$P=new Logger$1(version$t);const defaultApplicationId$1="62e1ad51b37b8e00394bda3b";class PocketProvider$1 extends UrlJsonRpcProvider$1{static getApiKey(e){const t={applicationId:null,loadBalancer:true,applicationSecretKey:null};if(e==null){t.applicationId=defaultApplicationId$1}else if(typeof e==="string"){t.applicationId=e}else if(e.applicationSecretKey!=null){t.applicationId=e.applicationId;t.applicationSecretKey=e.applicationSecretKey}else if(e.applicationId){t.applicationId=e.applicationId}else{logger$P.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e)}return t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:logger$P.throwError("unsupported network",Logger$1.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n=`https://${r}/v1/lb/${t.applicationId}`;const i={headers:{},url:n};if(t.applicationSecretKey!=null){i.user="";i.password=t.applicationSecretKey}return i}isCommunityResource(){return this.applicationId===defaultApplicationId$1}}const logger$O=new Logger$1(version$t);let _nextId$2=1;function buildWeb3LegacyFetcher$1(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:_nextId$2++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:deepCopy$1(i),provider:this});t(i,((t,s)=>{if(t){this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this});return n(t)}this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this});if(s.error){const e=new Error(s.error.message);e.code=s.error.code;e.data=s.error.data;return n(e)}e(s.result)}))}))}}function buildEip1193Fetcher$1(e){return function(t,r){if(r==null){r=[]}const n={method:t,params:r};this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:deepCopy$1(n),provider:this});return e.request(n).then((e=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this});return e}),(e=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this});throw e}))}}class Web3Provider$1 extends JsonRpcProvider$1{constructor(e,t){if(e==null){logger$O.throwArgumentError("missing provider","provider",e)}let r=null;let n=null;let i=null;if(typeof e==="function"){r="unknown:";n=e}else{r=e.host||e.path||"";if(!r&&e.isMetaMask){r="metamask"}i=e;if(e.request){if(r===""){r="eip-1193:"}n=buildEip1193Fetcher$1(e)}else if(e.sendAsync){n=buildWeb3LegacyFetcher$1(e,e.sendAsync.bind(e))}else if(e.send){n=buildWeb3LegacyFetcher$1(e,e.send.bind(e))}else{logger$O.throwArgumentError("unsupported provider","provider",e)}if(!r){r="unknown:"}}super(r,t);defineReadOnly$1(this,"jsonRpcFetchFunc",n);defineReadOnly$1(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const logger$N=new Logger$1(version$t);function getDefaultProvider$1(e,t){if(e==null){e="homestead"}if(typeof e==="string"){const t=e.match(/^(ws|http)s?:/i);if(t){switch(t[1].toLowerCase()){case"http":case"https":return new JsonRpcProvider$1(e);case"ws":case"wss":return new WebSocketProvider$1(e);default:logger$N.throwArgumentError("unsupported URL scheme","network",e)}}}const r=getNetwork$1(e);if(!r||!r._defaultProvider){logger$N.throwError("unsupported getDefaultProvider network",Logger$1.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e})}return r._defaultProvider({FallbackProvider:FallbackProvider$1,AlchemyProvider:AlchemyProvider$1,AnkrProvider:AnkrProvider$1,CloudflareProvider:CloudflareProvider$1,EtherscanProvider:EtherscanProvider$1,InfuraProvider:InfuraProvider$1,JsonRpcProvider:JsonRpcProvider$1,NodesmithProvider:NodesmithProvider$1,PocketProvider:PocketProvider$1,Web3Provider:Web3Provider$1,IpcProvider:IpcProvider$1},t)}const index$6=Object.freeze({__proto__:null,Provider:Provider$1,BaseProvider:BaseProvider$1,Resolver:Resolver$1,UrlJsonRpcProvider:UrlJsonRpcProvider$1,FallbackProvider:FallbackProvider$1,AlchemyProvider:AlchemyProvider$1,AlchemyWebSocketProvider:AlchemyWebSocketProvider$1,AnkrProvider:AnkrProvider$1,CloudflareProvider:CloudflareProvider$1,EtherscanProvider:EtherscanProvider$1,InfuraProvider:InfuraProvider$1,InfuraWebSocketProvider:InfuraWebSocketProvider$1,JsonRpcProvider:JsonRpcProvider$1,JsonRpcBatchProvider:JsonRpcBatchProvider$1,NodesmithProvider:NodesmithProvider$1,PocketProvider:PocketProvider$1,StaticJsonRpcProvider:StaticJsonRpcProvider$1,Web3Provider:Web3Provider$1,WebSocketProvider:WebSocketProvider$1,IpcProvider:IpcProvider$1,JsonRpcSigner:JsonRpcSigner$1,getDefaultProvider:getDefaultProvider$1,getNetwork:getNetwork$1,isCommunityResource:isCommunityResource$1,isCommunityResourcable:isCommunityResourcable$1,showThrottleMessage:showThrottleMessage$1,Formatter:Formatter$1});const version$s="solidity/5.7.0";const regexBytes$1=new RegExp("^bytes([0-9]+)$");const regexNumber$1=new RegExp("^(u?int)([0-9]*)$");const regexArray$1=new RegExp("^(.*)\\[([0-9]*)\\]$");const Zeros$2="0000000000000000000000000000000000000000000000000000000000000000";const logger$M=new Logger$1(version$s);function _pack$1(e,t,r){switch(e){case"address":if(r){return zeroPad$1(t,32)}return arrayify$2(t);case"string":return toUtf8Bytes$1(t);case"bytes":return arrayify$2(t);case"bool":t=t?"0x01":"0x00";if(r){return zeroPad$1(t,32)}return arrayify$2(t)}let n=e.match(regexNumber$1);if(n){let i=parseInt(n[2]||"256");if(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256){logger$M.throwArgumentError("invalid number type","type",e)}if(r){i=256}t=BigNumber$2.from(t).toTwos(i);return zeroPad$1(t,i/8)}n=e.match(regexBytes$1);if(n){const i=parseInt(n[1]);if(String(i)!==n[1]||i===0||i>32){logger$M.throwArgumentError("invalid bytes type","type",e)}if(arrayify$2(t).byteLength!==i){logger$M.throwArgumentError(`invalid value for ${e}`,"value",t)}if(r){return arrayify$2((t+Zeros$2).substring(0,66))}return t}n=e.match(regexArray$1);if(n&&Array.isArray(t)){const r=n[1];const i=parseInt(n[2]||String(t.length));if(i!=t.length){logger$M.throwArgumentError(`invalid array length for ${e}`,"value",t)}const s=[];t.forEach((function(e){s.push(_pack$1(r,e,true))}));return concat$4(s)}return logger$M.throwArgumentError("invalid type","type",e)}function pack$2(e,t){if(e.length!=t.length){logger$M.throwArgumentError("wrong number of values; expected ${ types.length }","values",t)}const r=[];e.forEach((function(e,n){r.push(_pack$1(e,t[n]))}));return hexlify$1(concat$4(r))}function keccak256$2(e,t){return keccak256$3(pack$2(e,t))}function sha256$3(e,t){return sha256$4(pack$2(e,t))}const lib_esm$n=Object.freeze({__proto__:null,pack:pack$2,keccak256:keccak256$2,sha256:sha256$3});const version$r="units/5.7.0";const logger$L=new Logger$1(version$r);const names$5=["wei","kwei","mwei","gwei","szabo","finney","ether"];function commify$1(e){const t=String(e).split(".");if(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||e==="."||e==="-."){logger$L.throwArgumentError("invalid value","value",e)}let r=t[0];let n="";if(r.substring(0,1)==="-"){n="-";r=r.substring(1)}while(r.substring(0,1)==="0"){r=r.substring(1)}if(r===""){r="0"}let i="";if(t.length===2){i="."+(t[1]||"0")}while(i.length>2&&i[i.length-1]==="0"){i=i.substring(0,i.length-1)}const s=[];while(r.length){if(r.length<=3){s.unshift(r);break}else{const e=r.length-3;s.unshift(r.substring(e));r=r.substring(0,e)}}return n+s.join(",")+i}function formatUnits$1(e,t){if(typeof t==="string"){const e=names$5.indexOf(t);if(e!==-1){t=3*e}}return formatFixed$1(e,t!=null?t:18)}function parseUnits$1(e,t){if(typeof e!=="string"){logger$L.throwArgumentError("value must be a string","value",e)}if(typeof t==="string"){const e=names$5.indexOf(t);if(e!==-1){t=3*e}}return parseFixed$1(e,t!=null?t:18)}function formatEther$1(e){return formatUnits$1(e,18)}function parseEther$1(e){return parseUnits$1(e,18)}const lib_esm$m=Object.freeze({__proto__:null,commify:commify$1,formatUnits:formatUnits$1,parseUnits:parseUnits$1,formatEther:formatEther$1,parseEther:parseEther$1});const utils$8=Object.freeze({__proto__:null,AbiCoder:AbiCoder$1,defaultAbiCoder:defaultAbiCoder$1,Fragment:Fragment$1,ConstructorFragment:ConstructorFragment$1,ErrorFragment:ErrorFragment$1,EventFragment:EventFragment$1,FunctionFragment:FunctionFragment$1,ParamType:ParamType$1,FormatTypes:FormatTypes$1,checkResultErrors:checkResultErrors$1,Logger:Logger$1,RLP:lib_esm$C,_fetchData:_fetchData$1,fetchJson:fetchJson$1,poll:poll$1,checkProperties:checkProperties$1,deepCopy:deepCopy$1,defineReadOnly:defineReadOnly$1,getStatic:getStatic$1,resolveProperties:resolveProperties$1,shallowCopy:shallowCopy$1,arrayify:arrayify$2,concat:concat$4,stripZeros:stripZeros$1,zeroPad:zeroPad$1,isBytes:isBytes$1,isBytesLike:isBytesLike$1,defaultPath:defaultPath$1,HDNode:HDNode$1,SigningKey:SigningKey$1,Interface:Interface$1,LogDescription:LogDescription$1,TransactionDescription:TransactionDescription$1,base58:Base58$1,base64:lib_esm$z,hexlify:hexlify$1,isHexString:isHexString$1,hexConcat:hexConcat$1,hexStripZeros:hexStripZeros$1,hexValue:hexValue$1,hexZeroPad:hexZeroPad$1,hexDataLength:hexDataLength$1,hexDataSlice:hexDataSlice$1,nameprep:nameprep$1,_toEscapedUtf8String:_toEscapedUtf8String$1,toUtf8Bytes:toUtf8Bytes$1,toUtf8CodePoints:toUtf8CodePoints$1,toUtf8String:toUtf8String$1,Utf8ErrorFuncs:Utf8ErrorFuncs$1,formatBytes32String:formatBytes32String$1,parseBytes32String:parseBytes32String$1,dnsEncode:dnsEncode$1,hashMessage:hashMessage$1,namehash:namehash$1,isValidName:isValidName$1,id:id$1,_TypedDataEncoder:TypedDataEncoder$1,getAddress:getAddress$1,getIcapAddress:getIcapAddress$1,getContractAddress:getContractAddress$1,getCreate2Address:getCreate2Address$1,isAddress:isAddress$1,formatEther:formatEther$1,parseEther:parseEther$1,formatUnits:formatUnits$1,parseUnits:parseUnits$1,commify:commify$1,computeHmac:computeHmac$1,keccak256:keccak256$3,ripemd160:ripemd160$2,sha256:sha256$4,sha512:sha512$2,randomBytes:randomBytes$1,shuffled:shuffled$1,solidityPack:pack$2,solidityKeccak256:keccak256$2,soliditySha256:sha256$3,splitSignature:splitSignature$1,joinSignature:joinSignature$1,accessListify:accessListify$1,parseTransaction:parse$1,serializeTransaction:serialize$5,get TransactionTypes(){return TransactionTypes$1},getJsonWalletAddress:getJsonWalletAddress$1,computeAddress:computeAddress$1,recoverAddress:recoverAddress$1,computePublicKey:computePublicKey$1,recoverPublicKey:recoverPublicKey$1,verifyMessage:verifyMessage$1,verifyTypedData:verifyTypedData$1,getAccountPath:getAccountPath$1,mnemonicToEntropy:mnemonicToEntropy$1,entropyToMnemonic:entropyToMnemonic$1,isValidMnemonic:isValidMnemonic$1,mnemonicToSeed:mnemonicToSeed$1,get SupportedAlgorithm(){return SupportedAlgorithm$1},get UnicodeNormalizationForm(){return UnicodeNormalizationForm$1},get Utf8ErrorReason(){return Utf8ErrorReason$1},Indexed:Indexed$1});const version$q="ethers/5.7.2";const logger$K=new Logger$1(version$q);const ethers$1=Object.freeze({__proto__:null,Signer:Signer$1,Wallet:Wallet$1,VoidSigner:VoidSigner$1,getDefaultProvider:getDefaultProvider$1,providers:index$6,BaseContract:BaseContract$1,Contract:Contract$2,ContractFactory:ContractFactory$1,BigNumber:BigNumber$2,FixedNumber:FixedNumber$1,constants:index$7,get errors(){return ErrorCode$1},logger:logger$K,utils:utils$8,wordlists:wordlists$1,version:version$q,Wordlist:Wordlist$1});try{const e=window;if(e._ethers==null){e._ethers=ethers$1}}catch(e){}var SupportedWalletProviders;(function(e){e["MetaMask"]="MetaMask";e["WalletConnect"]="WalletConnect";e["WalletConnectV2"]="WalletConnectV2";e["Torus"]="Torus"})(SupportedWalletProviders||(SupportedWalletProviders={}));class Web3WalletProviderObj{constructor(e){this.walletOptions=e;this.connections={};this.walletChangeListeners=[]}setWalletSelectorCallback(e){this.selectorCallback=e}registerWalletChangeListener(e){this.walletChangeListeners.push(e)}removeWalletChangeListener(e){for(const[t,r]of this.walletChangeListeners.entries()){if(r===e){this.walletChangeListeners.slice(t,1);break}}}emitWalletChangeEvent(e){console.log("Wallet change event emitted!",e);for(const t of this.walletChangeListeners){t(e)}}isWalletConnected(){return this.getConnectedWalletData("evm").length>0}async getWallet(e=false){if(this.getConnectedWalletData("evm").length===0){if(!e)return null;return new Promise((async(e,t)=>{try{const t=await this.selectorCallback();await this.connectWith(t);e(this.getConnectedWalletData("evm")[0])}catch(e){t(e)}}))}return this.getConnectedWalletData("evm")[0]}async disconnectWallet(){await this.deleteConnections();this.emitWalletChangeEvent()}async switchWallet(){return new Promise((async(e,t)=>{try{const t=await this.selectorCallback();await this.connectWith(t);e(this.getConnectedWalletData("evm")[0])}catch(e){t(e)}}))}saveConnections(){let e={};for(let t in this.connections){let r=this.connections[t.toLowerCase()];e[t]={address:r.address,chainId:r.chainId,providerType:r.providerType,blockchain:r.blockchain}}localStorage.setItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY,JSON.stringify(e))}emitSavedConnection(e){this.emitWalletChangeEvent(this.connections[e])}async deleteConnections(){this.connections={};let e=localStorage.getItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);if(e){let t=JSON.parse(e);if(t){for(let e in t){let r=t[e].providerType;switch(r){case"WalletConnectV2":{let e=await import("./p-1f1b1e11.js");let t=await e.getWalletConnectV2ProviderInstance();if(t.session){t.disconnect().then((()=>{})).catch((e=>{localStorage.removeItem("wc@2:client:0.3//session")}))}}break}}}}localStorage.removeItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);sessionStorage.removeItem("CURRENT_USER")}async loadConnections(){let e=localStorage.getItem(Web3WalletProviderObj.LOCAL_STORAGE_KEY);if(!e)return;let t=JSON.parse(e);if(!t)return;for(let e in t){let r=t[e];try{await this.connectWith(r.providerType,true)}catch(r){delete t[e];this.saveConnections()}}}async connectWith(e,t=false){if(!e)throw new Error("Please provide a Wallet type to connect with.");if(!this[e])throw new Error("Wallet type not found");let r=await this[e](t);if(!r)throw new Error("Wallet didn't connect");this.saveConnections();this.emitWalletChangeEvent(Object.values(this.connections)[0]);return r}async signMessage(e,t){let r=this.getWalletProvider(e);let n=r.getSigner(e);return await n.signMessage(t)}getConnectionByAddress(e){return this.connections[e.toLowerCase()]}getWalletProvider(e){e=e.toLowerCase();let t=this.getConnectionByAddress(e);if(!t)throw new Error("Connection not found for address");if(!t.provider)throw new Error("Wallet provider not found for address");return t.provider}getConnectedWalletData(e){return Object.values(this.connections).filter((t=>t.blockchain===e))}registerNewWalletAddress(e,t,r,n,i){this.connections={};this.connections[e.toLowerCase()]={address:e,chainId:t,providerType:r,provider:n,blockchain:i,ethers:ethers$1};n.provider.on("accountsChanged",(t=>{if(Object.keys(this.connections).length===0)return;if(!t||t.length===0){this.disconnectWallet();return}if(e===t[0])return;this.connections[t[0].toLowerCase()]=this.connections[e.toLowerCase()];e=t[0].toLowerCase();this.connections[e].address=e;this.saveConnections();this.emitWalletChangeEvent(Object.values(this.connections)[0])}));n.provider.on("chainChanged",(t=>{this.registerNewWalletAddress(e,t,r,n,"evm");this.saveConnections()}));n.provider.on("disconnect",(e=>{if((e===null||e===void 0?void 0:e.message)&&e.message.indexOf("MetaMask: Disconnected from chain")>-1)return;this.disconnectWallet()}))}async registerEvmProvider(e,t){const r=await e.listAccounts();const n=(await e.detectNetwork()).chainId;if(r.length===0){throw new Error("No accounts found via wallet-connect.")}let i=r[0];this.registerNewWalletAddress(i,n,t,e,"evm");return i}async MetaMask(e){if(typeof window.ethereum!=="undefined"){await window.ethereum.enable();const e=new Web3Provider$1(window.ethereum,"any");return this.registerEvmProvider(e,SupportedWalletProviders.MetaMask)}else{throw new Error("MetaMask is not available. Please check the extension is supported and active.")}}async WalletConnectV2(e){const t=await import("./p-1f1b1e11.js");const r=await t.getWalletConnectV2ProviderInstance();let n;r.on("display_uri",(async e=>{n=(await import("./p-db42400a.js").then((function(e){return e.i}))).default;n.open(e,(()=>{}))}));r.on("session_delete",(({id:e,topic:t})=>{}));let i=this.walletOptions;return new Promise(((s,a)=>{var o,f,c,u;if(e&&!r.session){a("Not connected")}else{let e;if(r.session){e=r.enable()}else{e=r.connect({chains:[1],optionalChains:(f=(o=i===null||i===void 0?void 0:i.walletConnectV2)===null||o===void 0?void 0:o.chains)!==null&&f!==void 0?f:t.WC_V2_DEFAULT_CHAINS,rpcMap:(u=(c=i===null||i===void 0?void 0:i.walletConnectV2)===null||c===void 0?void 0:c.rpcMap)!==null&&u!==void 0?u:t.WC_DEFAULT_RPC_MAP})}e.then((()=>{n===null||n===void 0?void 0:n.close();const e=new Web3Provider$1(r,"any");s(this.registerEvmProvider(e,SupportedWalletProviders.WalletConnectV2))})).catch((e=>{n===null||n===void 0?void 0:n.close();a(e)}))}}))}async Torus(e){const t=await import("./p-ae42bd86.js");const r=await t.getTorusProviderInstance();await r.init();await r.login();const n=new Web3Provider$1(r.provider,"any");return this.registerEvmProvider(n,SupportedWalletProviders.Torus)}}Web3WalletProviderObj.LOCAL_STORAGE_KEY="ts-wallet-connections";const Web3WalletProvider=new Web3WalletProviderObj;const Web3WalletProvider$1=Object.freeze({__proto__:null,get SupportedWalletProviders(){return SupportedWalletProviders},Web3WalletProvider});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign$1=function(){__assign$1=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return __assign$1.apply(this,arguments)};function __spreadArray$2(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))}var _global=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:global;var keys=Object.keys;var isArray$1=Array.isArray;if(typeof Promise!=="undefined"&&!_global.Promise){_global.Promise=Promise}function extend(e,t){if(typeof t!=="object")return e;keys(t).forEach((function(r){e[r]=t[r]}));return e}var getProto=Object.getPrototypeOf;var _hasOwn={}.hasOwnProperty;function hasOwn(e,t){return _hasOwn.call(e,t)}function props(e,t){if(typeof t==="function")t=t(getProto(e));(typeof Reflect==="undefined"?keys:Reflect.ownKeys)(t).forEach((function(r){setProp(e,r,t[r])}))}var defineProperty$2=Object.defineProperty;function setProp(e,t,r,n){defineProperty$2(e,t,extend(r&&hasOwn(r,"get")&&typeof r.get==="function"?{get:r.get,set:r.set,configurable:true}:{value:r,configurable:true,writable:true},n))}function derive(e){return{from:function(t){e.prototype=Object.create(t.prototype);setProp(e.prototype,"constructor",e);return{extend:props.bind(null,e.prototype)}}}}var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;function getPropertyDescriptor(e,t){var r=getOwnPropertyDescriptor(e,t);var n;return r||(n=getProto(e))&&getPropertyDescriptor(n,t)}var _slice=[].slice;function slice(e,t,r){return _slice.call(e,t,r)}function override(e,t){return t(e)}function assert$b(e){if(!e)throw new Error("Assertion Failed")}function asap$1(e){if(_global.setImmediate)setImmediate(e);else setTimeout(e,0)}function arrayToObject(e,t){return e.reduce((function(e,r,n){var i=t(r,n);if(i)e[i[0]]=i[1];return e}),{})}function tryCatch(e,t,r){try{e.apply(null,r)}catch(e){t&&t(e)}}function getByKeyPath(e,t){if(hasOwn(e,t))return e[t];if(!t)return e;if(typeof t!=="string"){var r=[];for(var n=0,i=t.length;n<i;++n){var s=getByKeyPath(e,t[n]);r.push(s)}return r}var a=t.indexOf(".");if(a!==-1){var o=e[t.substr(0,a)];return o===undefined?undefined:getByKeyPath(o,t.substr(a+1))}return undefined}function setByKeyPath(e,t,r){if(!e||t===undefined)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof t!=="string"&&"length"in t){assert$b(typeof r!=="string"&&"length"in r);for(var n=0,i=t.length;n<i;++n){setByKeyPath(e,t[n],r[n])}}else{var s=t.indexOf(".");if(s!==-1){var a=t.substr(0,s);var o=t.substr(s+1);if(o==="")if(r===undefined){if(isArray$1(e)&&!isNaN(parseInt(a)))e.splice(a,1);else delete e[a]}else e[a]=r;else{var f=e[a];if(!f||!hasOwn(e,a))f=e[a]={};setByKeyPath(f,o,r)}}else{if(r===undefined){if(isArray$1(e)&&!isNaN(parseInt(t)))e.splice(t,1);else delete e[t]}else e[t]=r}}}function delByKeyPath(e,t){if(typeof t==="string")setByKeyPath(e,t,undefined);else if("length"in t)[].map.call(t,(function(t){setByKeyPath(e,t,undefined)}))}function shallowClone$1(e){var t={};for(var r in e){if(hasOwn(e,r))t[r]=e[r]}return t}var concat$3=[].concat;function flatten$1(e){return concat$3.apply([],e)}var intrinsicTypeNames="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(flatten$1([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return _global[e]}));var intrinsicTypes=intrinsicTypeNames.map((function(e){return _global[e]}));arrayToObject(intrinsicTypeNames,(function(e){return[e,true]}));var circularRefs=null;function deepClone$1(e){circularRefs=typeof WeakMap!=="undefined"&&new WeakMap;var t=innerDeepClone(e);circularRefs=null;return t}function innerDeepClone(e){if(!e||typeof e!=="object")return e;var t=circularRefs&&circularRefs.get(e);if(t)return t;if(isArray$1(e)){t=[];circularRefs&&circularRefs.set(e,t);for(var r=0,n=e.length;r<n;++r){t.push(innerDeepClone(e[r]))}}else if(intrinsicTypes.indexOf(e.constructor)>=0){t=e}else{var i=getProto(e);t=i===Object.prototype?{}:Object.create(i);circularRefs&&circularRefs.set(e,t);for(var s in e){if(hasOwn(e,s)){t[s]=innerDeepClone(e[s])}}}return t}var toString$4={}.toString;function toStringTag(e){return toString$4.call(e).slice(8,-1)}var iteratorSymbol=typeof Symbol!=="undefined"?Symbol.iterator:"@@iterator";var getIteratorOf=typeof iteratorSymbol==="symbol"?function(e){var t;return e!=null&&(t=e[iteratorSymbol])&&t.apply(e)}:function(){return null};var NO_CHAR_ARRAY={};function getArrayOf(e){var t,r,n,i;if(arguments.length===1){if(isArray$1(e))return e.slice();if(this===NO_CHAR_ARRAY&&typeof e==="string")return[e];if(i=getIteratorOf(e)){r=[];while(n=i.next(),!n.done)r.push(n.value);return r}if(e==null)return[e];t=e.length;if(typeof t==="number"){r=new Array(t);while(t--)r[t]=e[t];return r}return[e]}t=arguments.length;r=new Array(t);while(t--)r[t]=arguments[t];return r}var isAsyncFunction=typeof Symbol!=="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return false};var debug=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function setDebug(e,t){debug=e;libraryFilter=t}var libraryFilter=function(){return true};var NEEDS_THROW_FOR_STACK=!new Error("").stack;function getErrorWithStack(){if(NEEDS_THROW_FOR_STACK)try{throw new Error}catch(e){return e}return new Error}function prettyStack(e,t){var r=e.stack;if(!r)return"";t=t||0;if(r.indexOf(e.name)===0)t+=(e.name+e.message).split("\n").length;return r.split("\n").slice(t).filter(libraryFilter).map((function(e){return"\n"+e})).join("")}var dexieErrorNames=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var idbDomErrorNames=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];var errorList=dexieErrorNames.concat(idbDomErrorNames);var defaultTexts={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function DexieError(e,t){this._e=getErrorWithStack();this.name=e;this.message=t}derive(DexieError).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+prettyStack(this._e,2))}},toString:function(){return this.name+": "+this.message}});function getMultiErrorMessage(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,r){return r.indexOf(e)===t})).join("\n")}function ModifyError(e,t,r,n){this._e=getErrorWithStack();this.failures=t;this.failedKeys=n;this.successCount=r;this.message=getMultiErrorMessage(e,t)}derive(ModifyError).from(DexieError);function BulkError(e,t){this._e=getErrorWithStack();this.name="BulkError";this.failures=Object.keys(t).map((function(e){return t[e]}));this.failuresByPos=t;this.message=getMultiErrorMessage(e,t)}derive(BulkError).from(DexieError);var errnames=errorList.reduce((function(e,t){return e[t]=t+"Error",e}),{});var BaseException=DexieError;var exceptions=errorList.reduce((function(e,t){var r=t+"Error";function n(e,n){this._e=getErrorWithStack();this.name=r;if(!e){this.message=defaultTexts[t]||r;this.inner=null}else if(typeof e==="string"){this.message=""+e+(!n?"":"\n "+n);this.inner=n||null}else if(typeof e==="object"){this.message=e.name+" "+e.message;this.inner=e}}derive(n).from(BaseException);e[t]=n;return e}),{});exceptions.Syntax=SyntaxError;exceptions.Type=TypeError;exceptions.Range=RangeError;var exceptionMap=idbDomErrorNames.reduce((function(e,t){e[t+"Error"]=exceptions[t];return e}),{});function mapError(e,t){if(!e||e instanceof DexieError||e instanceof TypeError||e instanceof SyntaxError||!e.name||!exceptionMap[e.name])return e;var r=new exceptionMap[e.name](t||e.message,e);if("stack"in e){setProp(r,"stack",{get:function(){return this.inner.stack}})}return r}var fullNameExceptions=errorList.reduce((function(e,t){if(["Syntax","Type","Range"].indexOf(t)===-1)e[t+"Error"]=exceptions[t];return e}),{});fullNameExceptions.ModifyError=ModifyError;fullNameExceptions.DexieError=DexieError;fullNameExceptions.BulkError=BulkError;function nop(){}function mirror(e){return e}function pureFunctionChain(e,t){if(e==null||e===mirror)return t;return function(r){return t(e(r))}}function callBoth(e,t){return function(){e.apply(this,arguments);t.apply(this,arguments)}}function hookCreatingChain(e,t){if(e===nop)return t;return function(){var r=e.apply(this,arguments);if(r!==undefined)arguments[0]=r;var n=this.onsuccess,i=this.onerror;this.onsuccess=null;this.onerror=null;var s=t.apply(this,arguments);if(n)this.onsuccess=this.onsuccess?callBoth(n,this.onsuccess):n;if(i)this.onerror=this.onerror?callBoth(i,this.onerror):i;return s!==undefined?s:r}}function hookDeletingChain(e,t){if(e===nop)return t;return function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null;t.apply(this,arguments);if(r)this.onsuccess=this.onsuccess?callBoth(r,this.onsuccess):r;if(n)this.onerror=this.onerror?callBoth(n,this.onerror):n}}function hookUpdatingChain(e,t){if(e===nop)return t;return function(r){var n=e.apply(this,arguments);extend(r,n);var i=this.onsuccess,s=this.onerror;this.onsuccess=null;this.onerror=null;var a=t.apply(this,arguments);if(i)this.onsuccess=this.onsuccess?callBoth(i,this.onsuccess):i;if(s)this.onerror=this.onerror?callBoth(s,this.onerror):s;return n===undefined?a===undefined?undefined:a:extend(n,a)}}function reverseStoppableEventChain(e,t){if(e===nop)return t;return function(){if(t.apply(this,arguments)===false)return false;return e.apply(this,arguments)}}function promisableChain(e,t){if(e===nop)return t;return function(){var r=e.apply(this,arguments);if(r&&typeof r.then==="function"){var n=this,i=arguments.length,s=new Array(i);while(i--)s[i]=arguments[i];return r.then((function(){return t.apply(n,s)}))}return t.apply(this,arguments)}}var INTERNAL={};var LONG_STACKS_CLIP_LIMIT=100,MAX_LONG_STACKS=20,ZONE_ECHO_LIMIT=100,_a$1$2=typeof Promise==="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[e,getProto(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,getProto(t),e]}(),resolvedNativePromise=_a$1$2[0],nativePromiseProto=_a$1$2[1],resolvedGlobalPromise=_a$1$2[2],nativePromiseThen=nativePromiseProto&&nativePromiseProto.then;var NativePromise=resolvedNativePromise&&resolvedNativePromise.constructor;var patchGlobalPromise=!!resolvedGlobalPromise;var stack_being_generated=false;var schedulePhysicalTick=resolvedGlobalPromise?function(){resolvedGlobalPromise.then(physicalTick)}:_global.setImmediate?setImmediate.bind(null,physicalTick):_global.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){physicalTick();e=null})).observe(e,{attributes:true});e.setAttribute("i","1")}:function(){setTimeout(physicalTick,0)};var asap=function(e,t){microtickQueue.push([e,t]);if(needsNewPhysicalTick){schedulePhysicalTick();needsNewPhysicalTick=false}};var isOutsideMicroTick=true,needsNewPhysicalTick=true,unhandledErrors=[],rejectingErrors=[],currentFulfiller=null,rejectionMapper=mirror;var globalPSD={id:"global",global:true,ref:0,unhandleds:[],onunhandled:globalError,pgp:false,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{globalError(e[0],e[1])}catch(e){}}))}};var PSD=globalPSD;var microtickQueue=[];var numScheduledCalls=0;var tickFinalizers=[];function DexiePromise(e){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=nop;this._lib=false;var t=this._PSD=PSD;if(debug){this._stackHolder=getErrorWithStack();this._prev=null;this._numPrev=0}if(typeof e!=="function"){if(e!==INTERNAL)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];if(this._state===false)handleRejection(this,this._value);return}this._state=null;this._value=null;++t.ref;executePromiseTask(this,e)}var thenProp={get:function(){var e=PSD,t=totalEchoes;function r(r,n){var i=this;var s=!e.global&&(e!==PSD||t!==totalEchoes);var a=s&&!decrementExpectedAwaits();var o=new DexiePromise((function(t,o){propagateToListener(i,new Listener(nativeAwaitCompatibleWrap(r,e,s,a),nativeAwaitCompatibleWrap(n,e,s,a),t,o,e))}));debug&&linkToPreviousPromise(o,this);return o}r.prototype=INTERNAL;return r},set:function(e){setProp(this,"then",e&&e.prototype===INTERNAL?thenProp:{get:function(){return e},set:thenProp.set})}};props(DexiePromise.prototype,{then:thenProp,_then:function(e,t){propagateToListener(this,new Listener(null,null,e,t,PSD))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t==="function"?this.then(null,(function(e){return e instanceof t?r(e):PromiseReject(e)})):this.then(null,(function(e){return e&&e.name===t?r(e):PromiseReject(e)}))},finally:function(e){return this.then((function(t){e();return t}),(function(t){e();return PromiseReject(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{stack_being_generated=true;var e=getStack(this,[],MAX_LONG_STACKS);var t=e.join("\nFrom previous: ");if(this._state!==null)this._stack=t;return t}finally{stack_being_generated=false}}},timeout:function(e,t){var r=this;return e<Infinity?new DexiePromise((function(n,i){var s=setTimeout((function(){return i(new exceptions.Timeout(t))}),e);r.then(n,i).finally(clearTimeout.bind(null,s))})):this}});if(typeof Symbol!=="undefined"&&Symbol.toStringTag)setProp(DexiePromise.prototype,Symbol.toStringTag,"Dexie.Promise");globalPSD.env=snapShot();function Listener(e,t,r,n,i){this.onFulfilled=typeof e==="function"?e:null;this.onRejected=typeof t==="function"?t:null;this.resolve=r;this.reject=n;this.psd=i}props(DexiePromise,{all:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){if(e.length===0)t([]);var n=e.length;e.forEach((function(i,s){return DexiePromise.resolve(i).then((function(r){e[s]=r;if(!--n)t(e)}),r)}))}))},resolve:function(e){if(e instanceof DexiePromise)return e;if(e&&typeof e.then==="function")return new DexiePromise((function(t,r){e.then(t,r)}));var t=new DexiePromise(INTERNAL,true,e);linkToPreviousPromise(t,currentFulfiller);return t},reject:PromiseReject,race:function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){e.map((function(e){return DexiePromise.resolve(e).then(t,r)}))}))},PSD:{get:function(){return PSD},set:function(e){return PSD=e}},totalEchoes:{get:function(){return totalEchoes}},newPSD:newScope,usePSD,scheduler:{get:function(){return asap},set:function(e){asap=e}},rejectionMapper:{get:function(){return rejectionMapper},set:function(e){rejectionMapper=e}},follow:function(e,t){return new DexiePromise((function(r,n){return newScope((function(t,r){var n=PSD;n.unhandleds=[];n.onunhandled=r;n.finalize=callBoth((function(){var e=this;run_at_end_of_this_or_next_physical_tick((function(){e.unhandleds.length===0?t():r(e.unhandleds[0])}))}),n.finalize);e()}),t,r,n)}))}});if(NativePromise){if(NativePromise.allSettled)setProp(DexiePromise,"allSettled",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t){if(e.length===0)t([]);var r=e.length;var n=new Array(r);e.forEach((function(e,i){return DexiePromise.resolve(e).then((function(e){return n[i]={status:"fulfilled",value:e}}),(function(e){return n[i]={status:"rejected",reason:e}})).then((function(){return--r||t(n)}))}))}))}));if(NativePromise.any&&typeof AggregateError!=="undefined")setProp(DexiePromise,"any",(function(){var e=getArrayOf.apply(null,arguments).map(onPossibleParallellAsync);return new DexiePromise((function(t,r){if(e.length===0)r(new AggregateError([]));var n=e.length;var i=new Array(n);e.forEach((function(e,s){return DexiePromise.resolve(e).then((function(e){return t(e)}),(function(e){i[s]=e;if(!--n)r(new AggregateError(i))}))}))}))}))}function executePromiseTask(e,t){try{t((function(t){if(e._state!==null)return;if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&beginMicroTickScope();if(t&&typeof t.then==="function"){executePromiseTask(e,(function(e,r){t instanceof DexiePromise?t._then(e,r):t.then(e,r)}))}else{e._state=true;e._value=t;propagateAllListeners(e)}if(r)endMicroTickScope()}),handleRejection.bind(null,e))}catch(t){handleRejection(e,t)}}function handleRejection(e,t){rejectingErrors.push(t);if(e._state!==null)return;var r=e._lib&&beginMicroTickScope();t=rejectionMapper(t);e._state=false;e._value=t;debug&&t!==null&&typeof t==="object"&&!t._promise&&tryCatch((function(){var r=getPropertyDescriptor(t,"stack");t._promise=e;setProp(t,"stack",{get:function(){return stack_being_generated?r&&(r.get?r.get.apply(t):r.value):e.stack}})}));addPossiblyUnhandledError(e);propagateAllListeners(e);if(r)endMicroTickScope()}function propagateAllListeners(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r){propagateToListener(e,t[r])}var i=e._PSD;--i.ref||i.finalize();if(numScheduledCalls===0){++numScheduledCalls;asap((function(){if(--numScheduledCalls===0)finalizePhysicalTick()}),[])}}function propagateToListener(e,t){if(e._state===null){e._listeners.push(t);return}var r=e._state?t.onFulfilled:t.onRejected;if(r===null){return(e._state?t.resolve:t.reject)(e._value)}++t.psd.ref;++numScheduledCalls;asap(callListener,[r,e,t])}function callListener(e,t,r){try{currentFulfiller=t;var n,i=t._value;if(t._state){n=e(i)}else{if(rejectingErrors.length)rejectingErrors=[];n=e(i);if(rejectingErrors.indexOf(i)===-1)markErrorAsHandled(t)}r.resolve(n)}catch(e){r.reject(e)}finally{currentFulfiller=null;if(--numScheduledCalls===0)finalizePhysicalTick();--r.psd.ref||r.psd.finalize()}}function getStack(e,t,r){if(t.length===r)return t;var n="";if(e._state===false){var i=e._value,s,a;if(i!=null){s=i.name||"Error";a=i.message||i;n=prettyStack(i,0)}else{s=i;a=""}t.push(s+(a?": "+a:"")+n)}if(debug){n=prettyStack(e._stackHolder,2);if(n&&t.indexOf(n)===-1)t.push(n);if(e._prev)getStack(e._prev,t,r)}return t}function linkToPreviousPromise(e,t){var r=t?t._numPrev+1:0;if(r<LONG_STACKS_CLIP_LIMIT){e._prev=t;e._numPrev=r}}function physicalTick(){beginMicroTickScope()&&endMicroTickScope()}function beginMicroTickScope(){var e=isOutsideMicroTick;isOutsideMicroTick=false;needsNewPhysicalTick=false;return e}function endMicroTickScope(){var e,t,r;do{while(microtickQueue.length>0){e=microtickQueue;microtickQueue=[];r=e.length;for(t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}}while(microtickQueue.length>0);isOutsideMicroTick=true;needsNewPhysicalTick=true}function finalizePhysicalTick(){var e=unhandledErrors;unhandledErrors=[];e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));var t=tickFinalizers.slice(0);var r=t.length;while(r)t[--r]()}function run_at_end_of_this_or_next_physical_tick(e){function t(){e();tickFinalizers.splice(tickFinalizers.indexOf(t),1)}tickFinalizers.push(t);++numScheduledCalls;asap((function(){if(--numScheduledCalls===0)finalizePhysicalTick()}),[])}function addPossiblyUnhandledError(e){if(!unhandledErrors.some((function(t){return t._value===e._value})))unhandledErrors.push(e)}function markErrorAsHandled(e){var t=unhandledErrors.length;while(t)if(unhandledErrors[--t]._value===e._value){unhandledErrors.splice(t,1);return}}function PromiseReject(e){return new DexiePromise(INTERNAL,false,e)}function wrap(e,t){var r=PSD;return function(){var n=beginMicroTickScope(),i=PSD;try{switchToZone(r,true);return e.apply(this,arguments)}catch(e){t&&t(e)}finally{switchToZone(i,false);if(n)endMicroTickScope()}}}var task={awaits:0,echoes:0,id:0};var taskCounter=0;var zoneStack=[];var zoneEchoes=0;var totalEchoes=0;var zone_id_counter=0;function newScope(e,t,r,n){var i=PSD,s=Object.create(i);s.parent=i;s.ref=0;s.global=false;s.id=++zone_id_counter;var a=globalPSD.env;s.env=patchGlobalPromise?{Promise:DexiePromise,PromiseProp:{value:DexiePromise,configurable:true,writable:true},all:DexiePromise.all,race:DexiePromise.race,allSettled:DexiePromise.allSettled,any:DexiePromise.any,resolve:DexiePromise.resolve,reject:DexiePromise.reject,nthen:getPatchedPromiseThen(a.nthen,s),gthen:getPatchedPromiseThen(a.gthen,s)}:{};if(t)extend(s,t);++i.ref;s.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=usePSD(s,e,r,n);if(s.ref===0)s.finalize();return o}function incrementExpectedAwaits(){if(!task.id)task.id=++taskCounter;++task.awaits;task.echoes+=ZONE_ECHO_LIMIT;return task.id}function decrementExpectedAwaits(){if(!task.awaits)return false;if(--task.awaits===0)task.id=0;task.echoes=task.awaits*ZONE_ECHO_LIMIT;return true}if((""+nativePromiseThen).indexOf("[native code]")===-1){incrementExpectedAwaits=decrementExpectedAwaits=nop}function onPossibleParallellAsync(e){if(task.echoes&&e&&e.constructor===NativePromise){incrementExpectedAwaits();return e.then((function(e){decrementExpectedAwaits();return e}),(function(e){decrementExpectedAwaits();return rejection(e)}))}return e}function zoneEnterEcho(e){++totalEchoes;if(!task.echoes||--task.echoes===0){task.echoes=task.id=0}zoneStack.push(PSD);switchToZone(e,true)}function zoneLeaveEcho(){var e=zoneStack[zoneStack.length-1];zoneStack.pop();switchToZone(e,false)}function switchToZone(e,t){var r=PSD;if(t?task.echoes&&(!zoneEchoes++||e!==PSD):zoneEchoes&&(!--zoneEchoes||e!==PSD)){enqueueNativeMicroTask(t?zoneEnterEcho.bind(null,e):zoneLeaveEcho)}if(e===PSD)return;PSD=e;if(r===globalPSD)globalPSD.env=snapShot();if(patchGlobalPromise){var n=globalPSD.env.Promise;var i=e.env;nativePromiseProto.then=i.nthen;n.prototype.then=i.gthen;if(r.global||e.global){Object.defineProperty(_global,"Promise",i.PromiseProp);n.all=i.all;n.race=i.race;n.resolve=i.resolve;n.reject=i.reject;if(i.allSettled)n.allSettled=i.allSettled;if(i.any)n.any=i.any}}}function snapShot(){var e=_global.Promise;return patchGlobalPromise?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(_global,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:nativePromiseProto.then,gthen:e.prototype.then}:{}}function usePSD(e,t,r,n,i){var s=PSD;try{switchToZone(e,true);return t(r,n,i)}finally{switchToZone(s,false)}}function enqueueNativeMicroTask(e){nativePromiseThen.call(resolvedNativePromise,e)}function nativeAwaitCompatibleWrap(e,t,r,n){return typeof e!=="function"?e:function(){var i=PSD;if(r)incrementExpectedAwaits();switchToZone(t,true);try{return e.apply(this,arguments)}finally{switchToZone(i,false);if(n)enqueueNativeMicroTask(decrementExpectedAwaits)}}}function getPatchedPromiseThen(e,t){return function(r,n){return e.call(this,nativeAwaitCompatibleWrap(r,t),nativeAwaitCompatibleWrap(n,t))}}var UNHANDLEDREJECTION="unhandledrejection";function globalError(e,t){var r;try{r=t.onuncatched(e)}catch(e){}if(r!==false)try{var n,i={promise:t,reason:e};if(_global.document&&document.createEvent){n=document.createEvent("Event");n.initEvent(UNHANDLEDREJECTION,true,true);extend(n,i)}else if(_global.CustomEvent){n=new CustomEvent(UNHANDLEDREJECTION,{detail:i});extend(n,i)}if(n&&_global.dispatchEvent){dispatchEvent(n);if(!_global.PromiseRejectionEvent&&_global.onunhandledrejection)try{_global.onunhandledrejection(n)}catch(e){}}if(debug&&n&&!n.defaultPrevented){console.warn("Unhandled rejection: "+(e.stack||e))}}catch(e){}}var rejection=DexiePromise.reject;function tempTransaction(e,t,r,n){if(!e.idbdb||!e._state.openComplete&&(!PSD.letThrough&&!e._vip)){if(e._state.openComplete){return rejection(new exceptions.DatabaseClosed(e._state.dbOpenError))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return rejection(new exceptions.DatabaseClosed);e.open().catch(nop)}return e._state.dbReadyPromise.then((function(){return tempTransaction(e,t,r,n)}))}else{var i=e._createTransaction(t,r,e._dbSchema);try{i.create();e._state.PR1398_maxLoop=3}catch(i){if(i.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return tempTransaction(e,t,r,n)}))}return rejection(i)}return i._promise(t,(function(e,t){return newScope((function(){PSD.trans=i;return n(e,t,i)}))})).then((function(e){return i._completion.then((function(){return e}))}))}}var DEXIE_VERSION="3.2.3";var maxString=String.fromCharCode(65535);var minKey=-Infinity;var INVALID_KEY_ARGUMENT="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.";var STRING_EXPECTED="String expected.";var connections=[];var isIEOrEdge=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent);var hasIEDeleteObjectStoreBug=isIEOrEdge;var hangsOnDeleteLargeKeyRange=isIEOrEdge;var dexieStackFrameFilter=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};var DBNAMES_DB="__dbnames";var READONLY="readonly";var READWRITE="readwrite";function combine$1(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var AnyRange={type:3,lower:-Infinity,lowerOpen:false,upper:[[]],upperOpen:false};function workaroundForUndefinedPrimKey(e){return typeof e==="string"&&!/\./.test(e)?function(t){if(t[e]===undefined&&e in t){t=deepClone$1(t);delete t[e]}return t}:function(e){return e}}var Table=function(){function e(){}e.prototype._trans=function(e,t,r){var n=this._tx||PSD.trans;var i=this.name;function s(e,r,n){if(!n.schema[i])throw new exceptions.NotFound("Table "+i+" not part of transaction");return t(n.idbtrans,n)}var a=beginMicroTickScope();try{return n&&n.db===this.db?n===PSD.trans?n._promise(e,s,r):newScope((function(){return n._promise(e,s,r)}),{trans:n,transless:PSD.transless||PSD}):tempTransaction(this.db,e,[this.name],s)}finally{if(a)endMicroTickScope()}};e.prototype.get=function(e,t){var r=this;if(e&&e.constructor===Object)return this.where(e).first(t);return this._trans("readonly",(function(t){return r.core.get({trans:t,key:e}).then((function(e){return r.hook.reading.fire(e)}))})).then(t)};e.prototype.where=function(e){if(typeof e==="string")return new this.db.WhereClause(this,e);if(isArray$1(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=keys(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(r&&this.db._maxKey!==maxString)return this.where(r.name).equals(r.keyPath.map((function(t){return e[t]})));if(!r&&debug)console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+t.join("+")+"]"));var n=this.schema.idxByName;var i=this.db._deps.indexedDB;function s(e,t){try{return i.cmp(e,t)===0}catch(e){return false}}var a=t.reduce((function(t,r){var i=t[0],a=t[1];var o=n[r];var f=e[r];return[i||o,i||!o?combine$1(a,o&&o.multi?function(e){var t=getByKeyPath(e,r);return isArray$1(t)&&t.some((function(e){return s(f,e)}))}:function(e){return s(f,getByKeyPath(e,r))}):a]}),[null,null]),o=a[0],f=a[1];return o?this.where(o.name).equals(e[o.keyPath]).filter(f):r?this.filter(f):this.where(t).equals("")};e.prototype.filter=function(e){return this.toCollection().and(e)};e.prototype.count=function(e){return this.toCollection().count(e)};e.prototype.offset=function(e){return this.toCollection().offset(e)};e.prototype.limit=function(e){return this.toCollection().limit(e)};e.prototype.each=function(e){return this.toCollection().each(e)};e.prototype.toArray=function(e){return this.toCollection().toArray(e)};e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,isArray$1(e)?"["+e.join("+")+"]":e))};e.prototype.reverse=function(){return this.toCollection().reverse()};e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var r=Object.create(e.prototype);for(var n in t)if(hasOwn(t,n))try{r[n]=t[n]}catch(e){}return r};if(this.schema.readHook){this.hook.reading.unsubscribe(this.schema.readHook)}this.schema.readHook=t;this.hook("reading",t);return e};e.prototype.defineClass=function(){function e(e){extend(this,e)}return this.mapToClass(e)};e.prototype.add=function(e,t){var r=this;var n=this.schema.primKey,i=n.auto,s=n.keyPath;var a=e;if(s&&i){a=workaroundForUndefinedPrimKey(s)(e)}return this._trans("readwrite",(function(e){return r.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[a]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{setByKeyPath(e,s,t)}catch(e){}}return t}))};e.prototype.update=function(e,t){if(typeof e==="object"&&!isArray$1(e)){var r=getByKeyPath(e,this.schema.primKey.keyPath);if(r===undefined)return rejection(new exceptions.InvalidArgument("Given object does not contain its primary key"));try{if(typeof t!=="function"){keys(t).forEach((function(r){setByKeyPath(e,r,t[r])}))}else{t(e,{value:e,primKey:r})}}catch(e){}return this.where(":id").equals(r).modify(t)}else{return this.where(":id").equals(e).modify(t)}};e.prototype.put=function(e,t){var r=this;var n=this.schema.primKey,i=n.auto,s=n.keyPath;var a=e;if(s&&i){a=workaroundForUndefinedPrimKey(s)(e)}return this._trans("readwrite",(function(e){return r.core.mutate({trans:e,type:"put",values:[a],keys:t!=null?[t]:null})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):e.lastResult})).then((function(t){if(s){try{setByKeyPath(e,s,t)}catch(e){}}return t}))};e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):undefined}))};e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:AnyRange})})).then((function(e){return e.numFailures?DexiePromise.reject(e.failures[0]):undefined}))};e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(r){return t.core.getMany({keys:e,trans:r}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))};e.prototype.bulkAdd=function(e,t,r){var n=this;var i=Array.isArray(t)?t:undefined;r=r||(i?undefined:t);var s=r?r.allKeys:undefined;return this._trans("readwrite",(function(t){var r=n.schema.primKey,a=r.auto,o=r.keyPath;if(o&&i)throw new exceptions.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length;var c=o&&a?e.map(workaroundForUndefinedPrimKey(o)):e;return n.core.mutate({trans:t,type:"add",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,r=e.results,i=e.lastResult,a=e.failures;var o=s?r:i;if(t===0)return o;throw new BulkError(n.name+".bulkAdd(): "+t+" of "+f+" operations failed",a)}))}))};e.prototype.bulkPut=function(e,t,r){var n=this;var i=Array.isArray(t)?t:undefined;r=r||(i?undefined:t);var s=r?r.allKeys:undefined;return this._trans("readwrite",(function(t){var r=n.schema.primKey,a=r.auto,o=r.keyPath;if(o&&i)throw new exceptions.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new exceptions.InvalidArgument("Arguments objects and keys must have the same length");var f=e.length;var c=o&&a?e.map(workaroundForUndefinedPrimKey(o)):e;return n.core.mutate({trans:t,type:"put",keys:i,values:c,wantResults:s}).then((function(e){var t=e.numFailures,r=e.results,i=e.lastResult,a=e.failures;var o=s?r:i;if(t===0)return o;throw new BulkError(n.name+".bulkPut(): "+t+" of "+f+" operations failed",a)}))}))};e.prototype.bulkDelete=function(e){var t=this;var r=e.length;return this._trans("readwrite",(function(r){return t.core.mutate({trans:r,type:"delete",keys:e})})).then((function(e){var n=e.numFailures,i=e.lastResult,s=e.failures;if(n===0)return i;throw new BulkError(t.name+".bulkDelete(): "+n+" of "+r+" operations failed",s)}))};return e}();function Events(e){var t={};var r=function(r,n){if(n){var i=arguments.length,s=new Array(i-1);while(--i)s[i-1]=arguments[i];t[r].subscribe.apply(null,s);return e}else if(typeof r==="string"){return t[r]}};r.addEventType=s;for(var n=1,i=arguments.length;n<i;++n){s(arguments[n])}return r;function s(e,n,i){if(typeof e==="object")return a(e);if(!n)n=reverseStoppableEventChain;if(!i)i=nop;var s={subscribers:[],fire:i,subscribe:function(e){if(s.subscribers.indexOf(e)===-1){s.subscribers.push(e);s.fire=n(s.fire,e)}},unsubscribe:function(e){s.subscribers=s.subscribers.filter((function(t){return t!==e}));s.fire=s.subscribers.reduce(n,i)}};t[e]=r[e]=s;return s}function a(e){keys(e).forEach((function(t){var r=e[t];if(isArray$1(r)){s(t,e[t][0],e[t][1])}else if(r==="asap"){var n=s(t,mirror,(function e(){var t=arguments.length,r=new Array(t);while(t--)r[t]=arguments[t];n.subscribers.forEach((function(e){asap$1((function t(){e.apply(null,r)}))}))}))}else throw new exceptions.InvalidArgument("Invalid event config")}))}}function makeClassConstructor(e,t){derive(t).from({prototype:e});return t}function createTableConstructor(e){return makeClassConstructor(Table.prototype,(function t(r,n,i){this.db=e;this._tx=i;this.name=r;this.schema=n;this.hook=e._allTables[r]?e._allTables[r].hook:Events(null,{creating:[hookCreatingChain,nop],reading:[pureFunctionChain,mirror],updating:[hookUpdatingChain,nop],deleting:[hookDeletingChain,nop]})}))}function isPlainKeyRange(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function addFilter(e,t){e.filter=combine$1(e.filter,t)}function addReplayFilter(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return combine$1(n(),t())}:t;e.justLimit=r&&!n}function addMatchFilter(e,t){e.isMatch=combine$1(e.isMatch,t)}function getIndexOrStore(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new exceptions.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function openCursor(e,t,r){var n=getIndexOrStore(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function iter(e,t,r,n){var i=e.replayFilter?combine$1(e.filter,e.replayFilter()):e.filter;if(!e.or){return iterate(openCursor(e,n,r),combine$1(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}else{var s={};var a=function(e,r,n){if(!i||i(r,n,(function(e){return r.stop(e)}),(function(e){return r.fail(e)}))){var a=r.primaryKey;var o=""+a;if(o==="[object ArrayBuffer]")o=""+new Uint8Array(a);if(!hasOwn(s,o)){s[o]=true;t(e,r,n)}}};return Promise.all([e.or._iterate(a,r),iterate(openCursor(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}}function iterate(e,t,r,n){var i=n?function(e,t,i){return r(n(e),t,i)}:r;var s=wrap(i);return e.then((function(e){if(e){return e.start((function(){var r=function(){return e.continue()};if(!t||t(e,(function(e){return r=e}),(function(t){e.stop(t);r=nop}),(function(t){e.fail(t);r=nop})))s(e.value,e,(function(e){return r=e}));r()}))}}))}function cmp(e,t){try{var r=type(e);var n=type(t);if(r!==n){if(r==="Array")return 1;if(n==="Array")return-1;if(r==="binary")return 1;if(n==="binary")return-1;if(r==="string")return 1;if(n==="string")return-1;if(r==="Date")return 1;if(n!=="Date")return NaN;return-1}switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":{return compareUint8Arrays(getUint8Array(e),getUint8Array(t))}case"Array":return compareArrays(e,t)}}catch(e){}return NaN}function compareArrays(e,t){var r=e.length;var n=t.length;var i=r<n?r:n;for(var s=0;s<i;++s){var a=cmp(e[s],t[s]);if(a!==0)return a}return r===n?0:r<n?-1:1}function compareUint8Arrays(e,t){var r=e.length;var n=t.length;var i=r<n?r:n;for(var s=0;s<i;++s){if(e[s]!==t[s])return e[s]<t[s]?-1:1}return r===n?0:r<n?-1:1}function type(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var r=toStringTag(e);return r==="ArrayBuffer"?"binary":r}function getUint8Array(e){if(e instanceof Uint8Array)return e;if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return new Uint8Array(e)}var Collection$1=function(){function e(){}e.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,rejection.bind(null,r.error)):r.table._trans("readonly",e).then(t)};e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,rejection.bind(null,t.error)):t.table._trans("readwrite",e,"locked")};e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=combine$1(t.algorithm,e)};e.prototype._iterate=function(e,t){return iter(this._ctx,e,t,this._ctx.table.core)};e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);if(e)extend(r,e);t._ctx=r;return t};e.prototype.raw=function(){this._ctx.valueMapper=null;return this};e.prototype.each=function(e){var t=this._ctx;return this._read((function(r){return iter(t,e,r,t.table.core)}))};e.prototype.count=function(e){var t=this;return this._read((function(e){var r=t._ctx;var n=r.table.core;if(isPlainKeyRange(r,true)){return n.count({trans:e,query:{index:getIndexOrStore(r,n.schema),range:r.range}}).then((function(e){return Math.min(e,r.limit)}))}else{var i=0;return iter(r,(function(){++i;return false}),e,n).then((function(){return i}))}})).then(e)};e.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],i=r.length-1;function s(e,t){if(t)return s(e[r[t]],t-1);return e[n]}var a=this._ctx.dir==="next"?1:-1;function o(e,t){var r=s(e,i),n=s(t,i);return r<n?-a:r>n?a:0}return this.toArray((function(e){return e.sort(o)})).then(t)};e.prototype.toArray=function(e){var t=this;return this._read((function(e){var r=t._ctx;if(r.dir==="next"&&isPlainKeyRange(r,true)&&r.limit>0){var n=r.valueMapper;var i=getIndexOrStore(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:true,query:{index:i,range:r.range}}).then((function(e){var t=e.result;return n?t.map(n):t}))}else{var s=[];return iter(r,(function(e){return s.push(e)}),e,r.table.core).then((function(){return s}))}}),e)};e.prototype.offset=function(e){var t=this._ctx;if(e<=0)return this;t.offset+=e;if(isPlainKeyRange(t)){addReplayFilter(t,(function(){var t=e;return function(e,r){if(t===0)return true;if(t===1){--t;return false}r((function(){e.advance(t);t=0}));return false}}))}else{addReplayFilter(t,(function(){var t=e;return function(){return--t<0}}))}return this};e.prototype.limit=function(e){this._ctx.limit=Math.min(this._ctx.limit,e);addReplayFilter(this._ctx,(function(){var t=e;return function(e,r,n){if(--t<=0)r(n);return t>=0}}),true);return this};e.prototype.until=function(e,t){addFilter(this._ctx,(function(r,n,i){if(e(r.value)){n(i);return t}else{return true}}));return this};e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)};e.prototype.last=function(e){return this.reverse().first(e)};e.prototype.filter=function(e){addFilter(this._ctx,(function(t){return e(t.value)}));addMatchFilter(this._ctx,e);return this};e.prototype.and=function(e){return this.filter(e)};e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)};e.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";if(this._ondirectionchange)this._ondirectionchange(this._ctx.dir);return this};e.prototype.desc=function(){return this.reverse()};e.prototype.eachKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,r){e(r.key,r)}))};e.prototype.eachUniqueKey=function(e){this._ctx.unique="unique";return this.eachKey(e)};e.prototype.eachPrimaryKey=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;return this.each((function(t,r){e(r.primaryKey,r)}))};e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.key)})).then((function(){return r})).then(e)};e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&isPlainKeyRange(t,true)&&t.limit>0){return this._read((function(e){var r=getIndexOrStore(t,t.table.core.schema);return t.table.core.query({trans:e,values:false,limit:t.limit,query:{index:r,range:t.range}})})).then((function(e){var t=e.result;return t})).then(e)}t.keysOnly=!t.isMatch;var r=[];return this.each((function(e,t){r.push(t.primaryKey)})).then((function(){return r})).then(e)};e.prototype.uniqueKeys=function(e){this._ctx.unique="unique";return this.keys(e)};e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)};e.prototype.lastKey=function(e){return this.reverse().firstKey(e)};e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};addFilter(this._ctx,(function(e){var t=e.primaryKey.toString();var n=hasOwn(r,t);r[t]=true;return!n}));return this};e.prototype.modify=function(e){var t=this;var r=this._ctx;return this._write((function(n){var i;if(typeof e==="function"){i=e}else{var s=keys(e);var a=s.length;i=function(t){var r=false;for(var n=0;n<a;++n){var i=s[n],o=e[i];if(getByKeyPath(t,i)!==o){setByKeyPath(t,i,o);r=true}}return r}}var o=r.table.core;var f=o.schema.primaryKey,c=f.outbound,u=f.extractKey;var l=t.db._options.modifyChunkSize||200;var h=[];var d=0;var p=[];var y=function(e,t){var r=t.failures,n=t.numFailures;d+=e-n;for(var i=0,s=keys(r);i<s.length;i++){var a=s[i];h.push(r[a])}};return t.clone().primaryKeys().then((function(t){var s=function(a){var f=Math.min(l,t.length-a);return o.getMany({trans:n,keys:t.slice(a,a+f),cache:"immutable"}).then((function(h){var d=[];var p=[];var m=c?[]:null;var g=[];for(var b=0;b<f;++b){var v=h[b];var w={value:deepClone$1(v),primKey:t[a+b]};if(i.call(w,w.value,w)!==false){if(w.value==null){g.push(t[a+b])}else if(!c&&cmp(u(v),u(w.value))!==0){g.push(t[a+b]);d.push(w.value)}else{p.push(w.value);if(c)m.push(t[a+b])}}}var A=isPlainKeyRange(r)&&r.limit===Infinity&&(typeof e!=="function"||e===deleteCallback)&&{index:r.index,range:r.range};return Promise.resolve(d.length>0&&o.mutate({trans:n,type:"add",values:d}).then((function(e){for(var t in e.failures){g.splice(parseInt(t),1)}y(d.length,e)}))).then((function(){return(p.length>0||A&&typeof e==="object")&&o.mutate({trans:n,type:"put",keys:m,values:p,criteria:A,changeSpec:typeof e!=="function"&&e}).then((function(e){return y(p.length,e)}))})).then((function(){return(g.length>0||A&&e===deleteCallback)&&o.mutate({trans:n,type:"delete",keys:g,criteria:A}).then((function(e){return y(g.length,e)}))})).then((function(){return t.length>a+f&&s(a+l)}))}))};return s(0).then((function(){if(h.length>0)throw new ModifyError("Error modifying one or more objects",h,d,p);return t.length}))}))}))};e.prototype.delete=function(){var e=this._ctx,t=e.range;if(isPlainKeyRange(e)&&(e.isPrimKey&&!hangsOnDeleteLargeKeyRange||t.type===3)){return this._write((function(r){var n=e.table.core.schema.primaryKey;var i=t;return e.table.core.count({trans:r,query:{index:n,range:i}}).then((function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:i}).then((function(e){var r=e.failures;var n=e.numFailures;if(n)throw new ModifyError("Could not delete some values",Object.keys(r).map((function(e){return r[e]})),t-n);return t-n}))}))}))}return this.modify(deleteCallback)};return e}();var deleteCallback=function(e,t){return t.value=null};function createCollectionConstructor(e){return makeClassConstructor(Collection$1.prototype,(function t(r,n){this.db=e;var i=AnyRange,s=null;if(n)try{i=n()}catch(e){s=e}var a=r._ctx;var o=a.table;var f=o.hook.reading.fire;this._ctx={table:o,index:a.index,isPrimKey:!a.index||o.schema.primKey.keyPath&&a.index===o.schema.primKey.name,range:i,keysOnly:false,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:true,isMatch:null,offset:0,limit:Infinity,error:s,or:a.or,valueMapper:f!==mirror?f:null}}))}function simpleCompare(e,t){return e<t?-1:e===t?0:1}function simpleCompareReverse(e,t){return e>t?-1:e===t?0:1}function fail(e,t,r){var n=e instanceof WhereClause?new e.Collection(e):e;n._ctx.error=r?new r(t):new TypeError(t);return n}function emptyCollection(e){return new e.Collection(e,(function(){return rangeEqual("")})).limit(0)}function upperFactory(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function lowerFactory(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function nextCasing(e,t,r,n,i,s){var a=Math.min(e.length,n.length);var o=-1;for(var f=0;f<a;++f){var c=t[f];if(c!==n[f]){if(i(e[f],r[f])<0)return e.substr(0,f)+r[f]+r.substr(f+1);if(i(e[f],n[f])<0)return e.substr(0,f)+n[f]+r.substr(f+1);if(o>=0)return e.substr(0,o)+t[o]+r.substr(o+1);return null}if(i(e[f],c)<0)o=f}if(a<n.length&&s==="next")return e+r.substr(e.length);if(a<e.length&&s==="prev")return e.substr(0,r.length);return o<0?null:e.substr(0,o)+n[o]+r.substr(o+1)}function addIgnoreCaseAlgorithm(e,t,r,n){var i,s,a,o,f,c,u,l=r.length;if(!r.every((function(e){return typeof e==="string"}))){return fail(e,STRING_EXPECTED)}function h(e){i=upperFactory(e);s=lowerFactory(e);a=e==="next"?simpleCompare:simpleCompareReverse;var t=r.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));o=t.map((function(e){return e.upper}));f=t.map((function(e){return e.lower}));c=e;u=e==="next"?"":n}h("next");var d=new e.Collection(e,(function(){return createRange(o[0],f[l-1]+n)}));d._ondirectionchange=function(e){h(e)};var p=0;d._addAlgorithm((function(e,r,n){var i=e.key;if(typeof i!=="string")return false;var h=s(i);if(t(h,f,p)){return true}else{var d=null;for(var y=p;y<l;++y){var m=nextCasing(i,h,o[y],f[y],a,c);if(m===null&&d===null)p=y+1;else if(d===null||a(d,m)>0){d=m}}if(d!==null){r((function(){e.continue(d+u)}))}else{r(n)}return false}}));return d}function createRange(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function rangeEqual(e){return{type:1,lower:e,upper:e}}var WhereClause=function(){function e(){}Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:false,configurable:true});e.prototype.between=function(e,t,r,n){r=r!==false;n=n===true;try{if(this._cmp(e,t)>0||this._cmp(e,t)===0&&(r||n)&&!(r&&n))return emptyCollection(this);return new this.Collection(this,(function(){return createRange(e,t,!r,!n)}))}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}};e.prototype.equals=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return rangeEqual(e)}))};e.prototype.above=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(e,undefined,true)}))};e.prototype.aboveOrEqual=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(e,undefined,false)}))};e.prototype.below=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(undefined,e,false,true)}))};e.prototype.belowOrEqual=function(e){if(e==null)return fail(this,INVALID_KEY_ARGUMENT);return new this.Collection(this,(function(){return createRange(undefined,e)}))};e.prototype.startsWith=function(e){if(typeof e!=="string")return fail(this,STRING_EXPECTED);return this.between(e,e+maxString,true,true)};e.prototype.startsWithIgnoreCase=function(e){if(e==="")return this.startsWith(e);return addIgnoreCaseAlgorithm(this,(function(e,t){return e.indexOf(t[0])===0}),[e],maxString)};e.prototype.equalsIgnoreCase=function(e){return addIgnoreCaseAlgorithm(this,(function(e,t){return e===t[0]}),[e],"")};e.prototype.anyOfIgnoreCase=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(function(e,t){return t.indexOf(e)!==-1}),e,"")};e.prototype.startsWithAnyOfIgnoreCase=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return emptyCollection(this);return addIgnoreCaseAlgorithm(this,(function(e,t){return t.some((function(t){return e.indexOf(t)===0}))}),e,maxString)};e.prototype.anyOf=function(){var e=this;var t=getArrayOf.apply(NO_CHAR_ARRAY,arguments);var r=this._cmp;try{t.sort(r)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}if(t.length===0)return emptyCollection(this);var n=new this.Collection(this,(function(){return createRange(t[0],t[t.length-1])}));n._ondirectionchange=function(n){r=n==="next"?e._ascending:e._descending;t.sort(r)};var i=0;n._addAlgorithm((function(e,n,s){var a=e.key;while(r(a,t[i])>0){++i;if(i===t.length){n(s);return false}}if(r(a,t[i])===0){return true}else{n((function(){e.continue(t[i])}));return false}}));return n};e.prototype.notEqual=function(e){return this.inAnyRange([[minKey,e],[e,this.db._maxKey]],{includeLowers:false,includeUppers:false})};e.prototype.noneOf=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[minKey,t]]}),null);t.push([e[e.length-1],this.db._maxKey]);return this.inAnyRange(t,{includeLowers:false,includeUppers:false})};e.prototype.inAnyRange=function(e,t){var r=this;var n=this._cmp,i=this._ascending,s=this._descending,a=this._min,o=this._max;if(e.length===0)return emptyCollection(this);if(!e.every((function(e){return e[0]!==undefined&&e[1]!==undefined&&i(e[0],e[1])<=0}))){return fail(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",exceptions.InvalidArgument)}var f=!t||t.includeLowers!==false;var c=t&&t.includeUppers===true;function u(e,t){var r=0,i=e.length;for(;r<i;++r){var s=e[r];if(n(t[0],s[1])<0&&n(t[1],s[0])>0){s[0]=a(s[0],t[0]);s[1]=o(s[1],t[1]);break}}if(r===i)e.push(t);return e}var l=i;function h(e,t){return l(e[0],t[0])}var d;try{d=e.reduce(u,[]);d.sort(h)}catch(e){return fail(this,INVALID_KEY_ARGUMENT)}var p=0;var y=c?function(e){return i(e,d[p][1])>0}:function(e){return i(e,d[p][1])>=0};var m=f?function(e){return s(e,d[p][0])>0}:function(e){return s(e,d[p][0])>=0};function g(e){return!y(e)&&!m(e)}var b=y;var v=new this.Collection(this,(function(){return createRange(d[0][0],d[d.length-1][1],!f,!c)}));v._ondirectionchange=function(e){if(e==="next"){b=y;l=i}else{b=m;l=s}d.sort(h)};v._addAlgorithm((function(e,t,n){var s=e.key;while(b(s)){++p;if(p===d.length){t(n);return false}}if(g(s)){return true}else if(r._cmp(s,d[p][1])===0||r._cmp(s,d[p][0])===0){return false}else{t((function(){if(l===i)e.continue(d[p][0]);else e.continue(d[p][1])}));return false}}));return v};e.prototype.startsWithAnyOf=function(){var e=getArrayOf.apply(NO_CHAR_ARRAY,arguments);if(!e.every((function(e){return typeof e==="string"}))){return fail(this,"startsWithAnyOf() only works with strings")}if(e.length===0)return emptyCollection(this);return this.inAnyRange(e.map((function(e){return[e,e+maxString]})))};return e}();function createWhereClauseConstructor(e){return makeClassConstructor(WhereClause.prototype,(function t(r,n,i){this.db=e;this._ctx={table:r,index:n===":id"?null:n,or:i};var s=e._deps.indexedDB;if(!s)throw new exceptions.MissingAPI;this._cmp=this._ascending=s.cmp.bind(s);this._descending=function(e,t){return s.cmp(t,e)};this._max=function(e,t){return s.cmp(e,t)>0?e:t};this._min=function(e,t){return s.cmp(e,t)<0?e:t};this._IDBKeyRange=e._deps.IDBKeyRange}))}function eventRejectHandler(e){return wrap((function(t){preventDefault(t);e(t.target.error);return false}))}function preventDefault(e){if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault()}var DEXIE_STORAGE_MUTATED_EVENT_NAME="storagemutated";var STORAGE_MUTATED_DOM_EVENT_NAME="x-storagemutated-1";var globalEvents=Events(null,DEXIE_STORAGE_MUTATED_EVENT_NAME);var Transaction$1=function(){function e(){}e.prototype._lock=function(){assert$b(!PSD.global);++this._reculock;if(this._reculock===1&&!PSD.global)PSD.lockOwnerFor=this;return this};e.prototype._unlock=function(){assert$b(!PSD.global);if(--this._reculock===0){if(!PSD.global)PSD.lockOwnerFor=null;while(this._blockedFuncs.length>0&&!this._locked()){var e=this._blockedFuncs.shift();try{usePSD(e[1],e[0])}catch(e){}}}return this};e.prototype._locked=function(){return this._reculock&&PSD.lockOwnerFor!==this};e.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb;var n=this.db._state.dbOpenError;assert$b(!this.idbtrans);if(!e&&!r){switch(n&&n.name){case"DatabaseClosedError":throw new exceptions.DatabaseClosed(n);case"MissingAPIError":throw new exceptions.MissingAPI(n.message,n);default:throw new exceptions.OpenFailed(n)}}if(!this.active)throw new exceptions.TransactionInactive;assert$b(this._completion._state===null);e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));e.onerror=wrap((function(r){preventDefault(r);t._reject(e.error)}));e.onabort=wrap((function(r){preventDefault(r);t.active&&t._reject(new exceptions.Abort(e.error));t.active=false;t.on("abort").fire(r)}));e.oncomplete=wrap((function(){t.active=false;t._resolve();if("mutatedParts"in e){globalEvents.storagemutated.fire(e["mutatedParts"])}}));return this};e.prototype._promise=function(e,t,r){var n=this;if(e==="readwrite"&&this.mode!=="readwrite")return rejection(new exceptions.ReadOnly("Transaction is readonly"));if(!this.active)return rejection(new exceptions.TransactionInactive);if(this._locked()){return new DexiePromise((function(i,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(i,s)},PSD])}))}else if(r){return newScope((function(){var e=new DexiePromise((function(e,r){n._lock();var i=t(e,r,n);if(i&&i.then)i.then(e,r)}));e.finally((function(){return n._unlock()}));e._lib=true;return e}))}else{var i=new DexiePromise((function(e,r){var i=t(e,r,n);if(i&&i.then)i.then(e,r)}));i._lib=true;return i}};e.prototype._root=function(){return this.parent?this.parent._root():this};e.prototype.waitFor=function(e){var t=this._root();var r=DexiePromise.resolve(e);if(t._waitingFor){t._waitingFor=t._waitingFor.then((function(){return r}))}else{t._waitingFor=r;t._waitingQueue=[];var n=t.idbtrans.objectStore(t.storeNames[0]);(function e(){++t._spinCount;while(t._waitingQueue.length)t._waitingQueue.shift()();if(t._waitingFor)n.get(-Infinity).onsuccess=e})()}var i=t._waitingFor;return new DexiePromise((function(e,n){r.then((function(r){return t._waitingQueue.push(wrap(e.bind(null,r)))}),(function(e){return t._waitingQueue.push(wrap(n.bind(null,e)))})).finally((function(){if(t._waitingFor===i){t._waitingFor=null}}))}))};e.prototype.abort=function(){if(this.active){this.active=false;if(this.idbtrans)this.idbtrans.abort();this._reject(new exceptions.Abort)}};e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(hasOwn(t,e))return t[e];var r=this.schema[e];if(!r){throw new exceptions.NotFound("Table "+e+" not part of transaction")}var n=new this.db.Table(e,r,this);n.core=this.db.core.table(e);t[e]=n;return n};return e}();function createTransactionConstructor(e){return makeClassConstructor(Transaction$1.prototype,(function t(r,n,i,s,a){var o=this;this.db=e;this.mode=r;this.storeNames=n;this.schema=i;this.chromeTransactionDurability=s;this.idbtrans=null;this.on=Events(this,"complete","error","abort");this.parent=a||null;this.active=true;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new DexiePromise((function(e,t){o._resolve=e;o._reject=t}));this._completion.then((function(){o.active=false;o.on.complete.fire()}),(function(e){var t=o.active;o.active=false;o.on.error.fire(e);o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort();return rejection(e)}))}))}function createIndexSpec(e,t,r,n,i,s,a){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:s,src:(r&&!a?"&":"")+(n?"*":"")+(i?"++":"")+nameFromKeyPath(t)}}function nameFromKeyPath(e){return typeof e==="string"?e:e?"["+[].join.call(e,"+")+"]":""}function createTableSchema(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:arrayToObject(r,(function(e){return[e.name,e]}))}}function safariMultiStoreFix(e){return e.length===1?e[0]:e}var getMaxKey=function(e){try{e.only([[]]);getMaxKey=function(){return[[]]};return[[]]}catch(e){getMaxKey=function(){return maxString};return maxString}};function getKeyExtractor(e){if(e==null){return function(){return undefined}}else if(typeof e==="string"){return getSinglePathKeyExtractor(e)}else{return function(t){return getByKeyPath(t,e)}}}function getSinglePathKeyExtractor(e){var t=e.split(".");if(t.length===1){return function(t){return t[e]}}else{return function(t){return getByKeyPath(t,e)}}}function arrayify$1(e){return[].slice.call(e)}var _id_counter=0;function getKeyPathAlias(e){return e==null?":id":typeof e==="string"?e:"["+e.join("+")+"]"}function createDBCore(e,t,r){function n(e,t){var r=arrayify$1(e.objectStoreNames);return{schema:{name:e.name,tables:r.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,r=e.autoIncrement;var n=isArray$1(t);var i=t==null;var s={};var a={name:e.name,primaryKey:{name:null,isPrimaryKey:true,outbound:i,compound:n,keyPath:t,autoIncrement:r,unique:true,extractKey:getKeyExtractor(t)},indexes:arrayify$1(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,r=e.unique,n=e.multiEntry,i=e.keyPath;var a=isArray$1(i);var o={name:t,compound:a,keyPath:i,unique:r,multiEntry:n,extractKey:getKeyExtractor(i)};s[getKeyPathAlias(i)]=o;return o})),getIndexByKeyPath:function(e){return s[getKeyPathAlias(e)]}};s[":id"]=a.primaryKey;if(t!=null){s[getKeyPathAlias(t)]=a.primaryKey}return a}))},hasGetAll:r.length>0&&"getAll"in t.objectStore(r[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,i=e.lowerOpen,s=e.upperOpen;var a=r===undefined?n===undefined?null:t.upperBound(n,!!s):n===undefined?t.lowerBound(r,!!i):t.bound(r,n,!!i,!!s);return a}function s(e){var t=e.name;function r(e){var r=e.trans,n=e.type,s=e.keys,a=e.values,o=e.range;return new Promise((function(e,f){e=wrap(e);var c=r.objectStore(t);var u=c.keyPath==null;var l=n==="put"||n==="add";if(!l&&n!=="delete"&&n!=="deleteRange")throw new Error("Invalid operation type: "+n);var h=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length){throw new Error("Given keys array must have same length as given values array.")}if(h===0)return e({numFailures:0,failures:{},results:[],lastResult:undefined});var d;var p=[];var y=[];var m=0;var g=function(e){++m;preventDefault(e)};if(n==="deleteRange"){if(o.type===4)return e({numFailures:m,failures:y,results:[],lastResult:undefined});if(o.type===3)p.push(d=c.clear());else p.push(d=c.delete(i(o)))}else{var b=l?u?[a,s]:[a,null]:[s,null],v=b[0],w=b[1];if(l){for(var A=0;A<h;++A){p.push(d=w&&w[A]!==undefined?c[n](v[A],w[A]):c[n](v[A]));d.onerror=g}}else{for(var A=0;A<h;++A){p.push(d=c[n](v[A]));d.onerror=g}}}var E=function(t){var r=t.target.result;p.forEach((function(e,t){return e.error!=null&&(y[t]=e.error)}));e({numFailures:m,failures:y,results:n==="delete"?s:p.map((function(e){return e.result})),lastResult:r})};d.onerror=function(e){g(e);E(e)};d.onsuccess=E}))}function n(e){var r=e.trans,n=e.values,s=e.query,a=e.reverse,o=e.unique;return new Promise((function(e,f){e=wrap(e);var c=s.index,u=s.range;var l=r.objectStore(t);var h=c.isPrimaryKey?l:l.index(c.name);var d=a?o?"prevunique":"prev":o?"nextunique":"next";var p=n||!("openKeyCursor"in h)?h.openCursor(i(u),d):h.openKeyCursor(i(u),d);p.onerror=eventRejectHandler(f);p.onsuccess=wrap((function(t){var n=p.result;if(!n){e(null);return}n.___id=++_id_counter;n.done=false;var i=n.continue.bind(n);var s=n.continuePrimaryKey;if(s)s=s.bind(n);var a=n.advance.bind(n);var o=function(){throw new Error("Cursor not started")};var c=function(){throw new Error("Cursor not stopped")};n.trans=r;n.stop=n.continue=n.continuePrimaryKey=n.advance=o;n.fail=wrap(f);n.next=function(){var e=this;var t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))};n.start=function(e){var t=new Promise((function(e,t){e=wrap(e);p.onerror=eventRejectHandler(t);n.fail=t;n.stop=function(t){n.stop=n.continue=n.continuePrimaryKey=n.advance=c;e(t)}}));var r=function(){if(p.result){try{e()}catch(e){n.fail(e)}}else{n.done=true;n.start=function(){throw new Error("Cursor behind last entry")};n.stop()}};p.onsuccess=wrap((function(e){p.onsuccess=r;r()}));n.continue=i;n.continuePrimaryKey=s;n.advance=a;r();return t};e(n)}),f)}))}function s(e){return function(r){return new Promise((function(n,s){n=wrap(n);var a=r.trans,o=r.values,f=r.limit,c=r.query;var u=f===Infinity?undefined:f;var l=c.index,h=c.range;var d=a.objectStore(t);var p=l.isPrimaryKey?d:d.index(l.name);var y=i(h);if(f===0)return n({result:[]});if(e){var m=o?p.getAll(y,u):p.getAllKeys(y,u);m.onsuccess=function(e){return n({result:e.target.result})};m.onerror=eventRejectHandler(s)}else{var g=0;var b=o||!("openKeyCursor"in p)?p.openCursor(y):p.openKeyCursor(y);var v=[];b.onsuccess=function(e){var t=b.result;if(!t)return n({result:v});v.push(o?t.value:t.primaryKey);if(++g===f)return n({result:v});t.continue()};b.onerror=eventRejectHandler(s)}}))}}return{name:t,schema:e,mutate:r,getMany:function(e){var r=e.trans,n=e.keys;return new Promise((function(e,i){e=wrap(e);var s=r.objectStore(t);var a=n.length;var o=new Array(a);var f=0;var c=0;var u;var l=function(t){var r=t.target;if((o[r._pos]=r.result)!=null);if(++c===f)e(o)};var h=eventRejectHandler(i);for(var d=0;d<a;++d){var p=n[d];if(p!=null){u=s.get(n[d]);u._pos=d;u.onsuccess=l;u.onerror=h;++f}}if(f===0)e(o)}))},get:function(e){var r=e.trans,n=e.key;return new Promise((function(e,i){e=wrap(e);var s=r.objectStore(t);var a=s.get(n);a.onsuccess=function(t){return e(t.target.result)};a.onerror=eventRejectHandler(i)}))},query:s(f),openCursor:n,count:function(e){var r=e.query,n=e.trans;var s=r.index,a=r.range;return new Promise((function(e,r){var o=n.objectStore(t);var f=s.isPrimaryKey?o:o.index(s.name);var c=i(a);var u=c?f.count(c):f.count();u.onsuccess=wrap((function(t){return e(t.target.result)}));u.onerror=eventRejectHandler(r)}))}}}var a=n(e,r),o=a.schema,f=a.hasGetAll;var c=o.tables.map((function(e){return s(e)}));var u={};c.forEach((function(e){return u[e.name]=e}));return{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=u[e];if(!t)throw new Error("Table '"+e+"' not found");return u[e]},MIN_KEY:-Infinity,MAX_KEY:getMaxKey(t),schema:o}}function createMiddlewareStack(e,t){return t.reduce((function(e,t){var r=t.create;return __assign$1(__assign$1({},e),r(e))}),e)}function createMiddlewareStacks(e,t,r,n){var i=r.IDBKeyRange;var s=createMiddlewareStack(createDBCore(t,i,n),e.dbcore);return{dbcore:s}}function generateMiddlewareStacks(e,t){var r=e._novip;var n=t.db;var i=createMiddlewareStacks(r._middlewares,n,r._deps,t);r.core=i.dbcore;r.tables.forEach((function(e){var t=e.name;if(r.core.schema.tables.some((function(e){return e.name===t}))){e.core=r.core.table(t);if(r[t]instanceof r.Table){r[t].core=e.core}}}))}function setApiOnPlace(e,t,r,n){var i=e._novip;r.forEach((function(e){var r=n[e];t.forEach((function(t){var n=getPropertyDescriptor(t,e);if(!n||"value"in n&&n.value===undefined){if(t===i.Transaction.prototype||t instanceof i.Transaction){setProp(t,e,{get:function(){return this.table(e)},set:function(t){defineProperty$2(this,e,{value:t,writable:true,configurable:true,enumerable:true})}})}else{t[e]=new i.Table(e,r)}}}))}))}function removeTablesApi(e,t){var r=e._novip;t.forEach((function(e){for(var t in e){if(e[t]instanceof r.Table)delete e[t]}}))}function lowerVersionFirst(e,t){return e._cfg.version-t._cfg.version}function runUpgraders(e,t,r,n){var i=e._dbSchema;var s=e._createTransaction("readwrite",e._storeNames,i);s.create(r);s._completion.catch(n);var a=s._reject.bind(s);var o=PSD.transless||PSD;newScope((function(){PSD.trans=s;PSD.transless=o;if(t===0){keys(i).forEach((function(e){createTable$1(r,e,i[e].primKey,i[e].indexes)}));generateMiddlewareStacks(e,r);DexiePromise.follow((function(){return e.on.populate.fire(s)})).catch(a)}else updateTablesAndIndexes(e,t,s,r).catch(a)}))}function updateTablesAndIndexes(e,t,r,n){var i=e._novip;var s=[];var a=i._versions;var o=i._dbSchema=buildGlobalSchema(i,i.idbdb,n);var f=false;var c=a.filter((function(e){return e._cfg.version>=t}));c.forEach((function(e){s.push((function(){var s=o;var a=e._cfg.dbschema;adjustToExistingIndexNames(i,s,n);adjustToExistingIndexNames(i,a,n);o=i._dbSchema=a;var c=getSchemaDiff(s,a);c.add.forEach((function(e){createTable$1(n,e[0],e[1].primKey,e[1].indexes)}));c.change.forEach((function(e){if(e.recreate){throw new exceptions.Upgrade("Not yet support for changing primary key")}else{var t=n.objectStore(e.name);e.add.forEach((function(e){return addIndex(t,e)}));e.change.forEach((function(e){t.deleteIndex(e.name);addIndex(t,e)}));e.del.forEach((function(e){return t.deleteIndex(e)}))}}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>t){generateMiddlewareStacks(i,n);r._memoizedTables={};f=true;var l=shallowClone$1(a);c.del.forEach((function(e){l[e]=s[e]}));removeTablesApi(i,[i.Transaction.prototype]);setApiOnPlace(i,[i.Transaction.prototype],keys(l),l);r.schema=l;var h=isAsyncFunction(u);if(h){incrementExpectedAwaits()}var d;var p=DexiePromise.follow((function(){d=u(r);if(d){if(h){var e=decrementExpectedAwaits.bind(null,null);d.then(e,e)}}}));return d&&typeof d.then==="function"?DexiePromise.resolve(d):p.then((function(){return d}))}}));s.push((function(t){if(!f||!hasIEDeleteObjectStoreBug){var n=e._cfg.dbschema;deleteRemovedTables(n,t)}removeTablesApi(i,[i.Transaction.prototype]);setApiOnPlace(i,[i.Transaction.prototype],i._storeNames,i._dbSchema);r.schema=i._dbSchema}))}));function u(){return s.length?DexiePromise.resolve(s.shift()(r.idbtrans)).then(u):DexiePromise.resolve()}return u().then((function(){createMissingTables(o,n)}))}function getSchemaDiff(e,t){var r={del:[],add:[],change:[]};var n;for(n in e){if(!t[n])r.del.push(n)}for(n in t){var i=e[n],s=t[n];if(!i){r.add.push([n,s])}else{var a={name:n,def:s,recreate:false,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!==""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!isIEOrEdge){a.recreate=true;r.change.push(a)}else{var o=i.idxByName;var f=s.idxByName;var c=void 0;for(c in o){if(!f[c])a.del.push(c)}for(c in f){var u=o[c],l=f[c];if(!u)a.add.push(l);else if(u.src!==l.src)a.change.push(l)}if(a.del.length>0||a.add.length>0||a.change.length>0){r.change.push(a)}}}}return r}function createTable$1(e,t,r,n){var i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});n.forEach((function(e){return addIndex(i,e)}));return i}function createMissingTables(e,t){keys(e).forEach((function(r){if(!t.db.objectStoreNames.contains(r)){createTable$1(t,r,e[r].primKey,e[r].indexes)}}))}function deleteRemovedTables(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(r){return e[r]==null&&t.db.deleteObjectStore(r)}))}function addIndex(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function buildGlobalSchema(e,t,r){var n={};var i=slice(t.objectStoreNames,0);i.forEach((function(e){var t=r.objectStore(e);var i=t.keyPath;var s=createIndexSpec(nameFromKeyPath(i),i||"",false,false,!!t.autoIncrement,i&&typeof i!=="string",true);var a=[];for(var o=0;o<t.indexNames.length;++o){var f=t.index(t.indexNames[o]);i=f.keyPath;var c=createIndexSpec(f.name,i,!!f.unique,!!f.multiEntry,false,i&&typeof i!=="string",false);a.push(c)}n[e]=createTableSchema(e,s,a)}));return n}function readGlobalSchema(e,t,r){var n=e._novip;n.verno=t.version/10;var i=n._dbSchema=buildGlobalSchema(n,t,r);n._storeNames=slice(t.objectStoreNames,0);setApiOnPlace(n,[n._allTables],keys(i),i)}function verifyInstalledSchema(e,t){var r=buildGlobalSchema(e,e.idbdb,t);var n=getSchemaDiff(r,e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}function adjustToExistingIndexNames(e,t,r){var n=e._novip;var i=r.db.objectStoreNames;for(var s=0;s<i.length;++s){var a=i[s];var o=r.objectStore(a);n._hasGetAll="getAll"in o;for(var f=0;f<o.indexNames.length;++f){var c=o.indexNames[f];var u=o.index(c).keyPath;var l=typeof u==="string"?u:"["+slice(u).join("+")+"]";if(t[a]){var h=t[a].idxByName[l];if(h){h.name=c;delete t[a].idxByName[l];t[a].idxByName[c]=h}}}}if(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&_global.WorkerGlobalScope&&_global instanceof _global.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604){n._hasGetAll=false}}function parseIndexSyntax(e){return e.split(",").map((function(e,t){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,"");var n=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return createIndexSpec(r,n||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),isArray$1(n),t===0)}))}var Version$2=function(){function e(){}e.prototype._parseStoresSpec=function(e,t){keys(e).forEach((function(r){if(e[r]!==null){var n=parseIndexSyntax(e[r]);var i=n.shift();if(i.multi)throw new exceptions.Schema("Primary key cannot be multi-valued");n.forEach((function(e){if(e.auto)throw new exceptions.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new exceptions.Schema("Index must have a name and cannot be an empty string")}));t[r]=createTableSchema(r,i,n)}}))};e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?extend(this._cfg.storesSource,e):e;var r=t._versions;var n={};var i={};r.forEach((function(e){extend(n,e._cfg.storesSource);i=e._cfg.dbschema={};e._parseStoresSpec(n,i)}));t._dbSchema=i;removeTablesApi(t,[t._allTables,t,t.Transaction.prototype]);setApiOnPlace(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],keys(i),i);t._storeNames=keys(i);return this};e.prototype.upgrade=function(e){this._cfg.contentUpgrade=promisableChain(this._cfg.contentUpgrade||nop,e);return this};return e}();function createVersionConstructor(e){return makeClassConstructor(Version$2.prototype,(function t(r){this.db=e;this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}function getDbNamesTable(e,t){var r=e["_dbNamesDB"];if(!r){r=e["_dbNamesDB"]=new Dexie$1(DBNAMES_DB,{addons:[],indexedDB:e,IDBKeyRange:t});r.version(1).stores({dbnames:"name"})}return r.table("dbnames")}function hasDatabasesNative(e){return e&&typeof e.databases==="function"}function getDatabaseNames(e){var t=e.indexedDB,r=e.IDBKeyRange;return hasDatabasesNative(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==DBNAMES_DB}))})):getDbNamesTable(t,r).toCollection().primaryKeys()}function _onDatabaseCreated(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!hasDatabasesNative(r)&&t!==DBNAMES_DB&&getDbNamesTable(r,n).put({name:t}).catch(nop)}function _onDatabaseDeleted(e,t){var r=e.indexedDB,n=e.IDBKeyRange;!hasDatabasesNative(r)&&t!==DBNAMES_DB&&getDbNamesTable(r,n).delete(t).catch(nop)}function vip(e){return newScope((function(){PSD.letThrough=true;return e()}))}function idbReady(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise((function(e){var r=function(){return indexedDB.databases().finally(e)};t=setInterval(r,100);r()})).finally((function(){return clearInterval(t)}))}function dexieOpen(e){var t=e._state;var r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?rejection(t.dbOpenError):e}));debug&&(t.openCanceller._stackHolder=getErrorWithStack());t.isBeingOpened=true;t.dbOpenError=null;t.openComplete=false;var n=t.openCanceller;function i(){if(t.openCanceller!==n)throw new exceptions.DatabaseClosed("db.open() was cancelled")}var s=t.dbReadyResolve,a=null,o=false;return DexiePromise.race([n,(typeof navigator==="undefined"?DexiePromise.resolve():idbReady()).then((function(){return new DexiePromise((function(n,s){i();if(!r)throw new exceptions.MissingAPI;var f=e.name;var c=t.autoSchema?r.open(f):r.open(f,Math.round(e.verno*10));if(!c)throw new exceptions.MissingAPI;c.onerror=eventRejectHandler(s);c.onblocked=wrap(e._fireOnBlocked);c.onupgradeneeded=wrap((function(n){a=c.transaction;if(t.autoSchema&&!e._options.allowEmptyDB){c.onerror=preventDefault;a.abort();c.result.close();var i=r.deleteDatabase(f);i.onsuccess=i.onerror=wrap((function(){s(new exceptions.NoSuchDatabase("Database "+f+" doesnt exist"))}))}else{a.onerror=eventRejectHandler(s);var u=n.oldVersion>Math.pow(2,62)?0:n.oldVersion;o=u<1;e._novip.idbdb=c.result;runUpgraders(e,u/10,a,s)}}),s);c.onsuccess=wrap((function(){a=null;var r=e._novip.idbdb=c.result;var i=slice(r.objectStoreNames);if(i.length>0)try{var s=r.transaction(safariMultiStoreFix(i),"readonly");if(t.autoSchema)readGlobalSchema(e,r,s);else{adjustToExistingIndexNames(e,e._dbSchema,s);if(!verifyInstalledSchema(e,s)){console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")}}generateMiddlewareStacks(e,s)}catch(e){}connections.push(e);r.onversionchange=wrap((function(r){t.vcFired=true;e.on("versionchange").fire(r)}));r.onclose=wrap((function(t){e.on("close").fire(t)}));if(o)_onDatabaseCreated(e._deps,f);n()}),s)}))}))]).then((function(){i();t.onReadyBeingFired=[];return DexiePromise.resolve(vip((function(){return e.on.ready.fire(e.vip)}))).then((function r(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(promisableChain,nop);t.onReadyBeingFired=[];return DexiePromise.resolve(vip((function(){return n(e.vip)}))).then(r)}}))})).finally((function(){t.onReadyBeingFired=null;t.isBeingOpened=false})).then((function(){return e})).catch((function(r){t.dbOpenError=r;try{a&&a.abort()}catch(e){}if(n===t.openCanceller){e._close()}return rejection(r)})).finally((function(){t.openComplete=true;s()}))}function awaitIterator(e){var t=function(t){return e.next(t)},r=function(t){return e.throw(t)},n=s(t),i=s(r);function s(e){return function(t){var r=e(t),s=r.value;return r.done?s:!s||typeof s.then!=="function"?isArray$1(s)?Promise.all(s).then(n,i):n(s):s.then(n,i)}}return s(t)()}function extractTransactionArgs(e,t,r){var n=arguments.length;if(n<2)throw new exceptions.InvalidArgument("Too few arguments");var i=new Array(n-1);while(--n)i[n-1]=arguments[n];r=i.pop();var s=flatten$1(i);return[e,s,r]}function enterTransactionScope(e,t,r,n,i){return DexiePromise.resolve().then((function(){var s=PSD.transless||PSD;var a=e._createTransaction(t,r,e._dbSchema,n);var o={trans:a,transless:s};if(n){a.idbtrans=n.idbtrans}else{try{a.create();e._state.PR1398_maxLoop=3}catch(n){if(n.name===errnames.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0){console.warn("Dexie: Need to reopen db");e._close();return e.open().then((function(){return enterTransactionScope(e,t,r,null,i)}))}return rejection(n)}}var f=isAsyncFunction(i);if(f){incrementExpectedAwaits()}var c;var u=DexiePromise.follow((function(){c=i.call(a,a);if(c){if(f){var e=decrementExpectedAwaits.bind(null,null);c.then(e,e)}else if(typeof c.next==="function"&&typeof c.throw==="function"){c=awaitIterator(c)}}}),o);return(c&&typeof c.then==="function"?DexiePromise.resolve(c).then((function(e){return a.active?e:rejection(new exceptions.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):u.then((function(){return c}))).then((function(e){if(n)a._resolve();return a._completion.then((function(){return e}))})).catch((function(e){a._reject(e);return rejection(e)}))}))}function pad(e,t,r){var n=isArray$1(e)?e.slice():[e];for(var i=0;i<r;++i)n.push(t);return n}function createVirtualIndexMiddleware(e){return __assign$1(__assign$1({},e),{table:function(t){var r=e.table(t);var n=r.schema;var i={};var s=[];function a(e,t,r){var n=getKeyPathAlias(e);var o=i[n]=i[n]||[];var f=e==null?0:typeof e==="string"?1:e.length;var c=t>0;var u=__assign$1(__assign$1({},r),{isVirtual:c,keyTail:t,keyLength:f,extractKey:getKeyExtractor(e),unique:!c&&r.unique});o.push(u);if(!u.isPrimaryKey){s.push(u)}if(f>1){var l=f===2?e[0]:e.slice(0,f-1);a(l,t+1,r)}o.sort((function(e,t){return e.keyTail-t.keyTail}));return u}var o=a(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[o];for(var f=0,c=n.indexes;f<c.length;f++){var u=c[f];a(u.keyPath,0,u)}function l(e){var t=i[getKeyPathAlias(e)];return t&&t[0]}function h(t,r){return{type:t.type===1?2:t.type,lower:pad(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,r),lowerOpen:true,upper:pad(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,r),upperOpen:true}}function d(e){var t=e.query.index;return t.isVirtual?__assign$1(__assign$1({},e),{query:{index:t,range:h(e.query.range,t.keyTail)}}):e}var p=__assign$1(__assign$1({},r),{schema:__assign$1(__assign$1({},n),{primaryKey:o,indexes:s,getIndexByKeyPath:l}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,s=n.isVirtual,a=n.keyLength;if(!s)return r.openCursor(t);function o(r){function n(n){n!=null?r.continue(pad(n,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?r.continue(r.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):r.continue()}var s=Object.create(r,{continue:{value:n},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(pad(t,e.MAX_KEY,i),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return a===1?e[0]:e.slice(0,a)}},value:{get:function(){return r.value}}});return s}return r.openCursor(d(t)).then((function(e){return e&&o(e)}))}});return p}})}var virtualIndexMiddleware={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:createVirtualIndexMiddleware};function getObjectDiff(e,t,r,n){r=r||{};n=n||"";keys(e).forEach((function(i){if(!hasOwn(t,i)){r[n+i]=undefined}else{var s=e[i],a=t[i];if(typeof s==="object"&&typeof a==="object"&&s&&a){var o=toStringTag(s);var f=toStringTag(a);if(o!==f){r[n+i]=t[i]}else if(o==="Object"){getObjectDiff(s,a,r,n+i+".")}else if(s!==a){r[n+i]=t[i]}}else if(s!==a)r[n+i]=t[i]}}));keys(t).forEach((function(i){if(!hasOwn(e,i)){r[n+i]=t[i]}}));return r}function getEffectiveKeys(e,t){if(t.type==="delete")return t.keys;return t.keys||t.values.map(e.extractKey)}var hooksMiddleware={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return __assign$1(__assign$1({},e),{table:function(t){var r=e.table(t);var n=r.schema.primaryKey;var i=__assign$1(__assign$1({},r),{mutate:function(e){var i=PSD.trans;var s=i.table(t).hook,a=s.deleting,o=s.creating,f=s.updating;switch(e.type){case"add":if(o.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"put":if(o.fire===nop&&f.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"delete":if(a.fire===nop)break;return i._promise("readwrite",(function(){return c(e)}),true);case"deleteRange":if(a.fire===nop)break;return i._promise("readwrite",(function(){return u(e)}),true)}return r.mutate(e);function c(e){var t=PSD.trans;var i=e.keys||getEffectiveKeys(n,e);if(!i)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?__assign$1(__assign$1({},e),{keys:i}):__assign$1({},e);if(e.type!=="delete")e.values=__spreadArray$2([],e.values,true);if(e.keys)e.keys=__spreadArray$2([],e.keys,true);return getExistingValues(r,e,i).then((function(s){var c=i.map((function(r,i){var c=s[i];var u={onerror:null,onsuccess:null};if(e.type==="delete"){a.fire.call(u,r,c,t)}else if(e.type==="add"||c===undefined){var l=o.fire.call(u,r,e.values[i],t);if(r==null&&l!=null){r=l;e.keys[i]=r;if(!n.outbound){setByKeyPath(e.values[i],n.keyPath,r)}}}else{var h=getObjectDiff(c,e.values[i]);var d=f.fire.call(u,h,r,c,t);if(d){var p=e.values[i];Object.keys(d).forEach((function(e){if(hasOwn(p,e)){p[e]=d[e]}else{setByKeyPath(p,e,d[e])}}))}}return u}));return r.mutate(e).then((function(t){var r=t.failures,n=t.results,a=t.numFailures,o=t.lastResult;for(var f=0;f<i.length;++f){var u=n?n[f]:i[f];var l=c[f];if(u==null){l.onerror&&l.onerror(r[f])}else{l.onsuccess&&l.onsuccess(e.type==="put"&&s[f]?e.values[f]:u)}}return{failures:r,results:n,numFailures:a,lastResult:o}})).catch((function(e){c.forEach((function(t){return t.onerror&&t.onerror(e)}));return Promise.reject(e)}))}))}function u(e){return l(e.trans,e.range,1e4)}function l(e,t,i){return r.query({trans:e,values:false,query:{index:n,range:t},limit:i}).then((function(r){var n=r.result;return c({type:"delete",keys:n,trans:e}).then((function(r){if(r.numFailures>0)return Promise.reject(r.failures[0]);if(n.length<i){return{failures:[],numFailures:0,lastResult:undefined}}else{return l(e,__assign$1(__assign$1({},t),{lower:n[n.length-1],lowerOpen:true}),i)}}))}))}}});return i}})}};function getExistingValues(e,t,r){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:r,cache:"immutable"})}function getFromTransactionCache(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;var n=[];for(var i=0,s=0;i<t.keys.length&&s<e.length;++i){if(cmp(t.keys[i],e[s])!==0)continue;n.push(r?deepClone$1(t.values[i]):t.values[i]);++s}return n.length===e.length?n:null}catch(e){return null}}var cacheExistingValuesMiddleware={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var r=e.table(t);return __assign$1(__assign$1({},r),{getMany:function(e){if(!e.cache){return r.getMany(e)}var t=getFromTransactionCache(e.keys,e.trans["_cache"],e.cache==="clone");if(t){return DexiePromise.resolve(t)}return r.getMany(e).then((function(t){e.trans["_cache"]={keys:e.keys,values:e.cache==="clone"?deepClone$1(t):t};return t}))},mutate:function(e){if(e.type!=="add")e.trans["_cache"]=null;return r.mutate(e)}})}}}};var _a$A;function isEmptyRange(e){return!("from"in e)}var RangeSet=function(e,t){if(this){extend(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})}else{var r=new RangeSet;if(e&&"d"in e){extend(r,e)}return r}};props(RangeSet.prototype,(_a$A={add:function(e){mergeRanges(this,e);return this},addKey:function(e){addRange(this,e,e);return this},addKeys:function(e){var t=this;e.forEach((function(e){return addRange(t,e,e)}));return this}},_a$A[iteratorSymbol]=function(){return getRangeSetIterator(this)},_a$A));function addRange(e,t,r){var n=cmp(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(isEmptyRange(e))return extend(e,{from:t,to:r,d:1});var i=e.l;var s=e.r;if(cmp(r,e.from)<0){i?addRange(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null};return rebalance(e)}if(cmp(t,e.to)>0){s?addRange(s,t,r):e.r={from:t,to:r,d:1,l:null,r:null};return rebalance(e)}if(cmp(t,e.from)<0){e.from=t;e.l=null;e.d=s?s.d+1:1}if(cmp(r,e.to)>0){e.to=r;e.r=null;e.d=e.l?e.l.d+1:1}var a=!e.r;if(i&&!e.l){mergeRanges(e,i)}if(s&&a){mergeRanges(e,s)}}function mergeRanges(e,t){function r(e,t){var n=t.from,i=t.to,s=t.l,a=t.r;addRange(e,n,i);if(s)r(e,s);if(a)r(e,a)}if(!isEmptyRange(t))r(e,t)}function rangesOverlap(e,t){var r=getRangeSetIterator(t);var n=r.next();if(n.done)return false;var i=n.value;var s=getRangeSetIterator(e);var a=s.next(i.from);var o=a.value;while(!n.done&&!a.done){if(cmp(o.from,i.to)<=0&&cmp(o.to,i.from)>=0)return true;cmp(i.from,o.from)<0?i=(n=r.next(o.from)).value:o=(a=s.next(i.from)).value}return false}function getRangeSetIterator(e){var t=isEmptyRange(e)?null:{s:0,n:e};return{next:function(e){var r=arguments.length>0;while(t){switch(t.s){case 0:t.s=1;if(r){while(t.n.l&&cmp(e,t.n.from)<0)t={up:t,n:t.n.l,s:1}}else{while(t.n.l)t={up:t,n:t.n.l,s:1}}case 1:t.s=2;if(!r||cmp(e,t.n.to)<=0)return{value:t.n,done:false};case 2:if(t.n.r){t.s=3;t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}}return{done:true}}}}function rebalance(e){var t,r;var n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0);var i=n>1?"r":n<-1?"l":"";if(i){var s=i==="r"?"l":"r";var a=__assign$1({},e);var o=e[i];e.from=o.from;e.to=o.to;e[i]=o[i];a[i]=o[s];e[s]=a;a.d=computeDepth(a)}e.d=computeDepth(e)}function computeDepth(e){var t=e.r,r=e.l;return(t?r?Math.max(t.d,r.d):t.d:r?r.d:0)+1}var observabilityMiddleware={stack:"dbcore",level:0,create:function(e){var t=e.schema.name;var r=new RangeSet(e.MIN_KEY,e.MAX_KEY);return __assign$1(__assign$1({},e),{table:function(n){var i=e.table(n);var s=i.schema;var a=s.primaryKey;var o=a.extractKey,f=a.outbound;var c=__assign$1(__assign$1({},i),{mutate:function(e){var a=e.trans;var o=a.mutatedParts||(a.mutatedParts={});var f=function(e){var r="idb://"+t+"/"+n+"/"+e;return o[r]||(o[r]=new RangeSet)};var c=f("");var u=f(":dels");var l=e.type;var h=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[[],e.values]:[],d=h[0],p=h[1];var y=e.trans["_cache"];return i.mutate(e).then((function(e){if(isArray$1(d)){if(l!=="delete")d=e.results;c.addKeys(d);var t=getFromTransactionCache(d,y);if(!t&&l!=="add"){u.addKeys(d)}if(t||p){trackAffectedIndexes(f,s,t,p)}}else if(d){var n={from:d.lower,to:d.upper};u.add(n);c.add(n)}else{c.add(r);u.add(r);s.indexes.forEach((function(e){return f(e.name).add(r)}))}return e}))}});var u=function(t){var r,n;var i=t.query,s=i.index,a=i.range;return[s,new RangeSet((r=a.lower)!==null&&r!==void 0?r:e.MIN_KEY,(n=a.upper)!==null&&n!==void 0?n:e.MAX_KEY)]};var l={get:function(e){return[a,new RangeSet(e.key)]},getMany:function(e){return[a,(new RangeSet).addKeys(e.keys)]},count:u,query:u,openCursor:u};keys(l).forEach((function(e){c[e]=function(s){var a=PSD.subscr;if(a){var c=function(e){var r="idb://"+t+"/"+n+"/"+e;return a[r]||(a[r]=new RangeSet)};var u=c("");var h=c(":dels");var d=l[e](s),p=d[0],y=d[1];c(p.name||"").add(y);if(!p.isPrimaryKey){if(e==="count"){h.add(r)}else{var m=e==="query"&&f&&s.values&&i.query(__assign$1(__assign$1({},s),{values:false}));return i[e].apply(this,arguments).then((function(t){if(e==="query"){if(f&&s.values){return m.then((function(e){var r=e.result;u.addKeys(r);return t}))}var r=s.values?t.result.map(o):t.result;if(s.values){u.addKeys(r)}else{h.addKeys(r)}}else if(e==="openCursor"){var n=t;var i=s.values;return n&&Object.create(n,{key:{get:function(){h.addKey(n.primaryKey);return n.key}},primaryKey:{get:function(){var e=n.primaryKey;h.addKey(e);return e}},value:{get:function(){i&&u.addKey(n.primaryKey);return n.value}}})}return t}))}}}return i[e].apply(this,arguments)}}));return c}})}};function trackAffectedIndexes(e,t,r,n){function i(t){var i=e(t.name||"");function s(e){return e!=null?t.extractKey(e):null}var a=function(e){return t.multiEntry&&isArray$1(e)?e.forEach((function(e){return i.addKey(e)})):i.addKey(e)};(r||n).forEach((function(e,t){var i=r&&s(r[t]);var o=n&&s(n[t]);if(cmp(i,o)!==0){if(i!=null)a(i);if(o!=null)a(o)}}))}t.indexes.forEach(i)}var Dexie$1=function(){function e(t,r){var n=this;this._middlewares={};this.verno=0;var i=e.dependencies;this._options=r=__assign$1({addons:e.addons,autoOpen:true,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},r);this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var s=r.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var a={dbOpenError:null,isBeingOpened:false,onReadyBeingFired:null,openComplete:false,dbReadyResolve:nop,dbReadyPromise:null,cancelOpen:nop,openCanceller:null,autoSchema:true,PR1398_maxLoop:3};a.dbReadyPromise=new DexiePromise((function(e){a.dbReadyResolve=e}));a.openCanceller=new DexiePromise((function(e,t){a.cancelOpen=t}));this._state=a;this.name=t;this.on=Events(this,"populate","blocked","versionchange","close",{ready:[promisableChain,nop]});this.on.ready.subscribe=override(this.on.ready.subscribe,(function(t){return function(r,i){e.vip((function(){var e=n._state;if(e.openComplete){if(!e.dbOpenError)DexiePromise.resolve().then(r);if(i)t(r)}else if(e.onReadyBeingFired){e.onReadyBeingFired.push(r);if(i)t(r)}else{t(r);var s=n;if(!i)t((function e(){s.on.ready.unsubscribe(r);s.on.ready.unsubscribe(e)}))}}))}}));this.Collection=createCollectionConstructor(this);this.Table=createTableConstructor(this);this.Transaction=createTransactionConstructor(this);this.Version=createVersionConstructor(this);this.WhereClause=createWhereClauseConstructor(this);this.on("versionchange",(function(e){if(e.newVersion>0)console.warn("Another connection wants to upgrade database '"+n.name+"'. Closing db now to resume the upgrade.");else console.warn("Another connection wants to delete database '"+n.name+"'. Closing db now to resume the delete request.");n.close()}));this.on("blocked",(function(e){if(!e.newVersion||e.newVersion<e.oldVersion)console.warn("Dexie.delete('"+n.name+"') was blocked");else console.warn("Upgrade '"+n.name+"' blocked by other connection holding version "+e.oldVersion/10)}));this._maxKey=getMaxKey(r.IDBKeyRange);this._createTransaction=function(e,t,r,i){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,i)};this._fireOnBlocked=function(e){n.on("blocked").fire(e);connections.filter((function(e){return e.name===n.name&&e!==n&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))};this.use(virtualIndexMiddleware);this.use(hooksMiddleware);this.use(observabilityMiddleware);this.use(cacheExistingValuesMiddleware);this.vip=Object.create(this,{_vip:{value:true}});s.forEach((function(e){return e(n)}))}e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new exceptions.Type("Given version is not a positive number");e=Math.round(e*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new exceptions.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions;var r=t.filter((function(t){return t._cfg.version===e}))[0];if(r)return r;r=new this.Version(e);t.push(r);t.sort(lowerVersionFirst);r.stores({});this._state.autoSchema=false;return r};e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||PSD.letThrough||this._vip)?e():new DexiePromise((function(e,r){if(t._state.openComplete){return r(new exceptions.DatabaseClosed(t._state.dbOpenError))}if(!t._state.isBeingOpened){if(!t._options.autoOpen){r(new exceptions.DatabaseClosed);return}t.open().catch(nop)}t._state.dbReadyPromise.then(e,r)})).then(e)};e.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,i=e.name;if(i)this.unuse({stack:t,name:i});var s=this._middlewares[t]||(this._middlewares[t]=[]);s.push({stack:t,create:r,level:n==null?10:n,name:i});s.sort((function(e,t){return e.level-t.level}));return this};e.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;if(t&&this._middlewares[t]){this._middlewares[t]=this._middlewares[t].filter((function(e){return n?e.create!==n:r?e.name!==r:false}))}return this};e.prototype.open=function(){return dexieOpen(this)};e.prototype._close=function(){var e=this._state;var t=connections.indexOf(this);if(t>=0)connections.splice(t,1);if(this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new DexiePromise((function(t){e.dbReadyResolve=t}));e.openCanceller=new DexiePromise((function(t,r){e.cancelOpen=r}))};e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=false;e.dbOpenError=new exceptions.DatabaseClosed;if(e.isBeingOpened)e.cancelOpen(e.dbOpenError)};e.prototype.delete=function(){var e=this;var t=arguments.length>0;var r=this._state;return new DexiePromise((function(n,i){var s=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=wrap((function(){_onDatabaseDeleted(e._deps,e.name);n()}));t.onerror=eventRejectHandler(i);t.onblocked=e._fireOnBlocked};if(t)throw new exceptions.InvalidArgument("Arguments not allowed in db.delete()");if(r.isBeingOpened){r.dbReadyPromise.then(s)}else{s()}}))};e.prototype.backendDB=function(){return this.idbdb};e.prototype.isOpen=function(){return this.idbdb!==null};e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"};e.prototype.hasFailed=function(){return this._state.dbOpenError!==null};e.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return keys(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:false,configurable:true});e.prototype.transaction=function(){var e=extractTransactionArgs.apply(this,arguments);return this._transaction.apply(this,e)};e.prototype._transaction=function(e,t,r){var n=this;var i=PSD.trans;if(!i||i.db!==this||e.indexOf("!")!==-1)i=null;var s=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var a,o;try{o=t.map((function(e){var t=e instanceof n.Table?e.name:e;if(typeof t!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}));if(e=="r"||e===READONLY)a=READONLY;else if(e=="rw"||e==READWRITE)a=READWRITE;else throw new exceptions.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===READONLY&&a===READWRITE){if(s){i=null}else throw new exceptions.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")}if(i){o.forEach((function(e){if(i&&i.storeNames.indexOf(e)===-1){if(s){i=null}else throw new exceptions.SubTransaction("Table "+e+" not included in parent transaction.")}}))}if(s&&i&&!i.active){i=null}}}catch(e){return i?i._promise(null,(function(t,r){r(e)})):rejection(e)}var f=enterTransactionScope.bind(null,this,a,o,i,r);return i?i._promise(a,f,"lock"):PSD.trans?usePSD(PSD.transless,(function(){return n._whenReady(f)})):this._whenReady(f)};e.prototype.table=function(e){if(!hasOwn(this._allTables,e)){throw new exceptions.InvalidTable("Table "+e+" does not exist")}return this._allTables[e]};return e}();var symbolObservable=typeof Symbol!=="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable";var Observable$1=function(){function e(e){this._subscribe=e}e.prototype.subscribe=function(e,t,r){return this._subscribe(!e||typeof e==="function"?{next:e,error:t,complete:r}:e)};e.prototype[symbolObservable]=function(){return this};return e}();function extendObservabilitySet(e,t){keys(t).forEach((function(r){var n=e[r]||(e[r]=new RangeSet);mergeRanges(n,t[r])}));return e}function liveQuery(e){return new Observable$1((function(t){var r=isAsyncFunction(e);function n(t){if(r){incrementExpectedAwaits()}var n=function(){return newScope(e,{subscr:t,trans:null})};var i=PSD.trans?usePSD(PSD.transless,n):n();if(r){i.then(decrementExpectedAwaits,decrementExpectedAwaits)}return i}var i=false;var s={};var a={};var o={get closed(){return i},unsubscribe:function(){i=true;globalEvents.storagemutated.unsubscribe(l)}};t.start&&t.start(o);var f=false,c=false;function u(){return keys(a).some((function(e){return s[e]&&rangesOverlap(s[e],a[e])}))}var l=function(e){extendObservabilitySet(s,e);if(u()){h()}};var h=function(){if(f||i)return;s={};var e={};var r=n(e);if(!c){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,l);c=true}f=true;Promise.resolve(r).then((function(r){f=false;if(i)return;if(u()){h()}else{s={};a=e;t.next&&t.next(r)}}),(function(e){f=false;t.error&&t.error(e);o.unsubscribe()}))};h();return o}))}var domDeps;try{domDeps={indexedDB:_global.indexedDB||_global.mozIndexedDB||_global.webkitIndexedDB||_global.msIndexedDB,IDBKeyRange:_global.IDBKeyRange||_global.webkitIDBKeyRange}}catch(e){domDeps={indexedDB:null,IDBKeyRange:null}}var Dexie=Dexie$1;props(Dexie,__assign$1(__assign$1({},fullNameExceptions),{delete:function(e){var t=new Dexie(e,{addons:[]});return t.delete()},exists:function(e){return new Dexie(e,{addons:[]}).open().then((function(e){e.close();return true})).catch("NoSuchDatabaseError",(function(){return false}))},getDatabaseNames:function(e){try{return getDatabaseNames(Dexie.dependencies).then(e)}catch(e){return rejection(new exceptions.MissingAPI)}},defineClass:function(){function e(e){extend(this,e)}return e},ignoreTransaction:function(e){return PSD.trans?usePSD(PSD.transless,e):e()},vip,async:function(e){return function(){try{var t=awaitIterator(e.apply(this,arguments));if(!t||typeof t.then!=="function")return DexiePromise.resolve(t);return t}catch(e){return rejection(e)}}},spawn:function(e,t,r){try{var n=awaitIterator(e.apply(r,t||[]));if(!n||typeof n.then!=="function")return DexiePromise.resolve(n);return n}catch(e){return rejection(e)}},currentTransaction:{get:function(){return PSD.trans||null}},waitFor:function(e,t){var r=DexiePromise.resolve(typeof e==="function"?Dexie.ignoreTransaction(e):e).timeout(t||6e4);return PSD.trans?PSD.trans.waitFor(r):r},Promise:DexiePromise,debug:{get:function(){return debug},set:function(e){setDebug(e,e==="dexie"?function(){return true}:dexieStackFrameFilter)}},derive,extend,props,override,Events,on:globalEvents,liveQuery,extendObservabilitySet,getByKeyPath,setByKeyPath,delByKeyPath,shallowClone:shallowClone$1,deepClone:deepClone$1,getObjectDiff,cmp,asap:asap$1,minKey,addons:[],connections,errnames,dependencies:domDeps,semVer:DEXIE_VERSION,version:DEXIE_VERSION.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,r){return e+t/Math.pow(10,r*2)}))}));Dexie.maxKey=getMaxKey(Dexie.dependencies.IDBKeyRange);if(typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){if(!propagatingLocally){var t;if(isIEOrEdge){t=document.createEvent("CustomEvent");t.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,true,true,e)}else{t=new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME,{detail:e})}propagatingLocally=true;dispatchEvent(t);propagatingLocally=false}}));addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME,(function(e){var t=e.detail;if(!propagatingLocally){propagateLocally(t)}}))}function propagateLocally(e){var t=propagatingLocally;try{propagatingLocally=true;globalEvents.storagemutated.fire(e)}finally{propagatingLocally=t}}var propagatingLocally=false;if(typeof BroadcastChannel!=="undefined"){var bc_1=new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);if(typeof bc_1.unref==="function"){bc_1.unref()}globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){if(!propagatingLocally){bc_1.postMessage(e)}}));bc_1.onmessage=function(e){if(e.data)propagateLocally(e.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME,(function(e){try{if(!propagatingLocally){if(typeof localStorage!=="undefined"){localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME,JSON.stringify({trig:Math.random(),changedParts:e}))}if(typeof self["clients"]==="object"){__spreadArray$2([],self["clients"].matchAll({includeUncontrolled:true}),true).forEach((function(t){return t.postMessage({type:STORAGE_MUTATED_DOM_EVENT_NAME,changedParts:e})}))}}}catch(e){}}));if(typeof addEventListener!=="undefined"){addEventListener("storage",(function(e){if(e.key===STORAGE_MUTATED_DOM_EVENT_NAME){var t=JSON.parse(e.newValue);if(t)propagateLocally(t.changedParts)}}))}var swContainer=self.document&&navigator.serviceWorker;if(swContainer){swContainer.addEventListener("message",propagateMessageLocally)}}function propagateMessageLocally(e){var t=e.data;if(t&&t.type===STORAGE_MUTATED_DOM_EVENT_NAME){propagateLocally(t.changedParts)}}DexiePromise.rejectionMapper=mapError;setDebug(debug,dexieStackFrameFilter);class TSViewerDb extends Dexie$1{constructor(){super("TSViewer");this.version(4).stores({tokens:`&[chainId+collectionId+ownerAddress], dt`,tokenMeta:`&[chainId+collectionId], dt`,myTokenScripts:`&tokenScriptId`,attestations:`&[collectionId+tokenId]`})}async checkCompatibility(){try{await this.open()}catch(e){console.warn("Dexie database open error, initializing new DB");await this.cloneDatabase(this.name,`${this.name}-backup-${Date.now()}`);await this.delete()}}async cloneDatabase(e,t){const r=new Dexie$1(e);return r.open().then((()=>{const e=new Dexie$1(t);const n=r.tables.reduce(((e,t)=>{e[t.name]=[t.schema.primKey].concat(t.schema.indexes).map((e=>e.src)).join(",");return e}),{});e.version(this.verno).stores(n);return r.tables.reduce(((t,r)=>t.then((()=>r.toArray())).then((t=>e.table(r.name).bulkAdd(t)))),Promise.resolve(1)).then((()=>{r.close();e.close()}))}))}}const dbProvider=new TSViewerDb;async function showToastNotification(e,t,r){const n=document.querySelector(".toast");await n.Toast({title:t,description:r,timeOut:3e4,position:"top-right",type:e})}window.showToastNotification=showToastNotification;const COLLECTION_CACHE_TTL=86400;const TOKEN_CACHE_TTL=3600;const BASE_TOKEN_DISCOVERY_URL="https://api.token-discovery.tokenscript.org";class DiscoveryAdapter{async getTokens(e,t){const r=[];if(!Web3WalletProvider.isWalletConnected()){return[]}const n=await this.getCurrentWalletAddress();for(const i of e){try{let e=t?false:await this.getCachedTokens(i,n);if(!e){e=await this.fetchTokens(i,n);await this.storeCachedTokens(e,n)}r.push(e)}catch(e){await showToastNotification("error","Token Discovery Error",e.message)}}return r}async getCurrentWalletAddress(){return(await Web3WalletProvider.getWallet(true)).address}async getCachedTokens(e,t){const r=await dbProvider.tokens.where({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),ownerAddress:t.toLowerCase()}).first();if(r&&Date.now()<r.dt+TOKEN_CACHE_TTL*1e3)return r.data;return false}async storeCachedTokens(e,t){await dbProvider.tokens.put({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),ownerAddress:t.toLowerCase(),data:e,dt:Date.now()})}async fetchTokens(e,t){var r,n,i,s,a,o,f,c;if(!CHAIN_MAP[e.chainId])throw new Error("Chain ID "+e.chainId+" is not supported for token discovery");const u=CHAIN_MAP[e.chainId];let l=await this.getCollectionMeta(e,u);if(e.chainId===ChainID.HARDHAT_LOCALHOST){e=Object.assign(Object.assign({},e),l);e=await this.fetchOwnerTokensRpc(e,t);return e}const h=await this.fetchOwnerTokens(e,u,t);if(e.tokenType!=="erc20"){const t=[];for(let n of h){t.push({collectionDetails:e,tokenId:n.tokenId,collectionId:e.contractAddress,name:n.title,description:n.description,attributes:(r=n.attributes)!==null&&r!==void 0?r:[],image:n.image,data:n})}e.tokenDetails=t;e.balance=t.length;e.symbol=l===null||l===void 0?void 0:l.symbol;e.decimals=0}else if(h.length>0){e.name=h[0].title;e.balance=(i=(n=h[0].data)===null||n===void 0?void 0:n.balance)!==null&&i!==void 0?i:0;e.symbol=h[0].symbol;e.decimals=(s=h[0].data)===null||s===void 0?void 0:s.decimals}else{e.name=l.title;e.balance=0;e.symbol=l.symbol;e.decimals=l.decimals;return e}if(l===null||l===void 0?void 0:l.image)e.image=l.image;e.symbol=((a=h[0])===null||a===void 0?void 0:a.symbol)?(o=h[0])===null||o===void 0?void 0:o.symbol:(c=(f=h[0])===null||f===void 0?void 0:f.data)===null||c===void 0?void 0:c.symbol;return e}async getCollectionMeta(e,t){let r=await this.getCachedMeta(e);if(!r){if(e.chainId===ChainID.HARDHAT_LOCALHOST){r=await this.fetchTokenMetadataRpc(e)}else{r=await this.fetchTokenMetadata(e,t)}await this.storeCachedMeta(e,r)}return r}async getCachedMeta(e){const t=await dbProvider.tokenMeta.where({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase()}).first();if(t&&Date.now()<t.dt+COLLECTION_CACHE_TTL*1e3)return t.data;return false}async storeCachedMeta(e,t){await dbProvider.tokenMeta.put({chainId:e.chainId,collectionId:e.contractAddress.toLowerCase(),data:t,dt:Date.now()})}async fetchTokenMetadata(e,t){const r=e.tokenType==="erc20"?`/get-fungible-token?collectionAddress=${e.contractAddress}&chain=${t}&blockchain=evm`:`/get-token-collection?smartContract=${e.contractAddress}&chain=${t}&blockchain=evm`;return this.fetchRequest(r)}async fetchOwnerTokens(e,t,r){const n=e.tokenType==="erc20"?`/get-owner-fungible-tokens?collectionAddress=${e.contractAddress}&owner=${r}&chain=${t}&blockchain=evm`:`/get-owner-tokens?smartContract=${e.contractAddress}&chain=${t}&owner=${r}&blockchain=evm`;return this.fetchRequest(n)}async fetchTokenMetadataRpc(e){var t;const r=this.getEthersContractInstance(e.contractAddress,e.chainId,e.tokenType);let n,i,s,a,o;try{n=await r.name()}catch(e){console.log(e);n="Unknown Contract"}try{i=await r.symbol()}catch(e){console.log(e)}try{s=await r.contractURI()}catch(e){console.log(e)}if(s){const e=await(await fetch(s,{headers:{Accept:"text/plain"}})).json();if(e.name||e.title)n=(t=e.name)!==null&&t!==void 0?t:e.title;if(e.description)a=e.description;if(e.image)o=e.image}return{name:n!==null&&n!==void 0?n:"Test collection",symbol:i,description:a!==null&&a!==void 0?a:"",image:o!==null&&o!==void 0?o:""}}async fetchOwnerTokensRpc(e,t){var r,n,i;const s=this.getEthersContractInstance(e.contractAddress,e.chainId,e.tokenType);const a=[];try{if(e.tokenType==="erc20"){e.balance=BigInt(await s.balanceOf(t))}else{let o;try{o=await this.getTokenIdsLogs(s,t)}catch(e){o=await this.getTokenIdsEnumerable(s,t)}for(const t of o){let o={};try{const e=await s.tokenURI(t);o=await(await fetch(e,{headers:{Accept:"text/plain"}})).json()}catch(e){console.warn("Failed to load token metadata:",e)}console.log(o);a.push({collectionId:e.originId,tokenId:t.toString(),name:(r=o.name)!==null&&r!==void 0?r:"Test token #"+t,description:(n=o.description)!==null&&n!==void 0?n:"",image:(i=o.image)!==null&&i!==void 0?i:"",collectionDetails:e})}e.tokenDetails=a;e.balance=a.length}}catch(e){console.error(e)}return e}async getTokenIdsEnumerable(e,t){const r=[];const n=BigInt(await e.balanceOf(t));for(let i=0;i<n;i++){r.push(BigInt(await e.tokenOfOwnerByIndex(t,i)))}return r}async getTokenIdsLogs(e,t){const r=await e.queryFilter(e.filters.Transfer(t,null));const n=await e.queryFilter(e.filters.Transfer(null,t));const i=r.concat(n).sort(((e,t)=>e.blockNumber-t.blockNumber||e.transactionIndex-t.transactionIndex));const s=new Set;for(const{args:{from:e,to:r,tokenId:n}}of i){if(this.addressEqual(r,t)){s.add(n.toString())}else if(this.addressEqual(e,t)){s.delete(n.toString())}}return Array.from(s.values())}addressEqual(e,t){return e.toLowerCase()===t.toLowerCase()}getEthersContractInstance(e,t,r){const n=new JsonRpcProvider$1(CHAIN_CONFIG[t].rpc);return new Contract$2(e,r==="erc20"?ERC20_ABI_JSON:ERC721_ABI_JSON,n)}async fetchRequest(e){const t=await fetch(BASE_TOKEN_DISCOVERY_URL+e);const r=t.status>=200&&t.status<=299;if(!r){throw new Error("Failed to load tokens, please try again shortly: "+t.statusText)}return t.json()}}const getSingleTokenMetadata=async(e,t,r)=>{const n=`/get-token-collection?chain=${CHAIN_MAP[e]}&smartContract=${t}`;const i=`/get-token?chain=${CHAIN_MAP[e]}&collectionAddress=${t}&tokenId=${r}`;const s=await Promise.all([fetch(BASE_TOKEN_DISCOVERY_URL+n),await fetch(BASE_TOKEN_DISCOVERY_URL+i)]);const a=s[0].status>=200&&s[0].status<=299&&(s[1].status>=200&&s[1].status<=299);if(!a){throw new Error("Failed to load token details")}const o=Object.assign({collectionData:await s[0].json()},await s[1].json());return{attributes:o.attributes,collectionDetails:{originId:"",blockChain:"eth",chainId:e,tokenType:o.collectionData.contractType.toLowerCase(),contractAddress:t,name:o.collectionData.title,description:o.collectionData.description,image:o.collectionData.image,balance:o.balance},collectionId:o.collection,description:o.description,image:o.image,name:o.title,tokenId:o.tokenId,balance:o.balance}};const getCardButtonClass=(e,t)=>{switch(e.buttonClass){case"featured":return"btn-featured";case"primary":return"btn-primary";case"secondary":return"btn-secondary";default:return e.type==="token"||t===0?"btn-primary":"btn-secondary"}};var ViewEvent;(function(e){e["TOKENS_UPDATED"]="tokensUpdated";e["GET_USER_INPUT"]="getUserInput";e["EXECUTE_CALLBACK"]="executeCallback";e["ON_CONFIRM"]="onConfirm";e["TRANSACTION_EVENT"]="transactionEvent"})(ViewEvent||(ViewEvent={}));var RequestFromView;(function(e){e["SIGN_PERSONAL_MESSAGE"]="signPersonalMessage";e["PUT_USER_INPUT"]="putUserInput";e["CLOSE"]="close";e["ETH_RPC"]="ethRpc"})(RequestFromView||(RequestFromView={}));class ViewController{constructor(e,t){this.tokenScript=e;this.viewAdapter=t;this.userEntryValues={}}async showOrExecuteCard(e,t){if(!e.view){return e.executeTransaction(t)}this.currentCard=e;this.viewAdapter.viewLoading();await this.viewAdapter.showTokenView(this.currentCard)}async unloadTokenCard(){this.currentCard=null;await this.viewAdapter.unloadTokenView()}getCurrentCard(){return this.currentCard}getUserEntryValue(e,t){var r;if(!((r=this.userEntryValues[t])===null||r===void 0?void 0:r[e]))return undefined;return this.userEntryValues[t][e]}async setUserEntryValues(e){var t;const r=[];let n=false;const i=(t=this.tokenScript.getCurrentTokenContext().selectedTokenId)!==null&&t!==void 0?t:"-1";if(!this.userEntryValues[i])this.userEntryValues[i]={};for(let t in e){if(this.userEntryValues[i][t]&&this.userEntryValues[i][t]===e[t]){continue}if(!this.userEntryValues[i][t]&&e[t]==="")continue;const s=this.findAttribute(t);if(!s&&!n)n=true;console.log("User input '"+t+"' changed ("+this.userEntryValues[i][t]+" -> "+e[t]+")");r.push(t);this.userEntryValues[i][t]=e[t]}if(r.length>0){this.tokenScript.getAttributes().invalidate(r);if(this.currentCard)this.currentCard.getAttributes().invalidate(r);if(n)this.updateCardData()}}findAttribute(e){if(this.tokenScript.getAttributes().hasAttribute(e))return this.tokenScript.getAttributes().getAttribute(e);if(this.currentCard&&this.currentCard.getAttributes().hasAttribute(e))return this.currentCard.getAttributes().getAttribute(e);return null}dispatchViewEvent(e,t,r){return this.viewAdapter.dispatchViewEvent(e,t,r)}dispatchRpcResult(e){return this.viewAdapter.dispatchRpcResult(e)}async updateCardData(){this.viewAdapter.viewLoading();this.viewAdapter.dispatchViewEvent(ViewEvent.TOKENS_UPDATED,await this.currentCard.tokenViewData.getCurrentTokenData(true),this.currentCard.tokenViewData.getViewDataId())}}class AbstractViewBinding{constructor(e){this.view=e;this.iframe=e.querySelector(".tokenscript-frame");this.loader=e.querySelector(".view-loader");this.actionBar=e.querySelector(".action-bar");this.actionBtn=e.querySelector(".action-btn");this.actionBtn.addEventListener("click",this.confirmAction.bind(this));window.addEventListener("message",this.handlePostMessageFromView.bind(this));this.iframe.onload=()=>{this.hideLoader()}}setTokenScript(e){this.tokenScript=e}viewLoading(){this.showLoader()}viewError(e){this.hideLoader()}async showTokenView(e){this.currentCard=e;await AbstractViewBinding.injectContentView(this.iframe,e);this.setupConfirmButton(e)}async unloadTokenView(){this.currentCard=null;this.actionBar.style.display="none";this.iframe.contentWindow.location.replace("data:text/html;base64,PCFET0NUWVBFIGh0bWw+");const e=new URL(document.location.href);e.hash="";history.replaceState(undefined,undefined,e)}showLoader(){this.loader.style.display="flex"}hideLoader(){this.loader.style.display="none"}static async injectContentView(e,t){if(!t.view){e.src="";return}if(t.isUrlView){e.contentWindow.location.replace(t.url)}else{const r=await t.renderViewHtml();const n=new Blob([r],{type:"text/html"});const i=t.urlFragment;const s=URL.createObjectURL(n)+(i?"#"+i:"");e.contentWindow.location.replace(s)}}setupConfirmButton(e){if(e.type=="action"){this.actionBar.style.display="block";this.actionBtn.innerText=e.label}else{this.actionBar.style.display="none"}}getViewBindingJavascript(){return VIEW_BINDING_JAVASCRIPT}postMessageToView(e,t){this.iframe.contentWindow.postMessage({method:e,params:t},"*")}dispatchRpcResult(e){return this.iframe.contentWindow.postMessage(e,"*")}handlePostMessageFromView(e){var t,r;if(!this.iframe)return;if(e.source!==this.iframe.contentWindow){return}if(!((t=e.data)===null||t===void 0?void 0:t.method))return;this.handleMessageFromView(e.data.method,(r=e.data)===null||r===void 0?void 0:r.params)}async handleMessageFromView(e,t){console.log("Request from view: ",e,t);switch(e){case RequestFromView.ETH_RPC:this.currentCard.rpcProxy(t);break;case RequestFromView.SIGN_PERSONAL_MESSAGE:console.log("Event from view: Sign personal message");this.currentCard.signPersonalMessage(t.id,t.data);break;case RequestFromView.PUT_USER_INPUT:await this.tokenScript.getViewController().setUserEntryValues(t);break;case RequestFromView.CLOSE:this.unloadTokenView();break;default:throw new Error("TokenScript view API method: "+e+" is not implemented.")}}async dispatchViewEvent(e,t,r){switch(e){case ViewEvent.TOKENS_UPDATED:const n={currentInstance:t};console.log("ViewEvent.TOKENS_UPDATED");this.postMessageToView(e,{oldTokens:n,updatedTokens:n,cardId:r});this.hideLoader();return;case ViewEvent.EXECUTE_CALLBACK:case ViewEvent.GET_USER_INPUT:case ViewEvent.ON_CONFIRM:this.postMessageToView(e,Object.assign(Object.assign({},t),{id:r}));return}}}const VIEW_BINDING_JAVASCRIPT=`\n\twindow.addEventListener("message", (event) => {\n\n\t\tif (event.origin !== "${document.location.origin}")\n\t\t\treturn;\n\n\t\tconst params = event.data?.params;\n\n\t\tswitch (event.data?.method){\n\t\t\tcase "tokensUpdated":\n\t\t\t\twindow.web3.tokens.dataChanged(params.oldTokens, params.updatedTokens, params.cardId);\n\t\t\t\tbreak;\n\n\t\t\tcase "onConfirm":\n\t\t\t\twindow.onConfirm();\n\t\t\t\tbreak;\n\n\t\t\tcase "executeCallback":\n\t\t\t\twindow.executeCallback(params.id, params.error, params.result);\n\t\t\t\tbreak;\n\n\t\t\tcase "getUserInput":\n\t\t\t\tsendUserInputValues();\n\t\t}\n\t});\n\n\tfunction sendUserInputValues(){\n\n\t\tconst inputs = Array.from(document.querySelectorAll("textarea,input")).filter((elem) => !!elem.id);\n\n\t\tif (!inputs.length)\n\t\t\treturn;\n\n\t\tconst values = Object.fromEntries(inputs.map((elem) => {\n\t\t\treturn [elem.id, elem.value];\n\t\t}));\n\n\t\tpostMessageToEngine("putUserInput", values);\n\t}\n\n\tfunction postMessageToEngine(method, params){\n\t\twindow.parent.postMessage({method, params}, {\n\t\t\ttargetOrigin: "${document.location.origin}"\n\t\t});\n\t}\n\n\twindow.alpha = {\n\t\tsignPersonalMessage: (id, data) => {\n\t\t\tpostMessageToEngine("signPersonalMessage", {id, data});\n\t\t}\n\t};\n\n\twindow.web3.action.setProps = (params) => {\n\t\tpostMessageToEngine("putUserInput", params);\n\t};\n\n\tfunction listenForUserValueChanges(){\n\t\twindow.addEventListener('change', (evt) => {\n\t\t\tif (!evt.target.id) return;\n\t\t\tsendUserInputValues();\n\t\t});\n\t}\n\n\tlistenForUserValueChanges();\n\t/*document.addEventListener("DOMContentLoaded", function() {\n\t\tsendUserInputValues();\n\t});*/\n\n\tconst closing = window.close;\n\twindow.close = function () {\n\t\tpostMessageToEngine("close", undefined);\n\t\tclosing();\n\t};\n`;class ViewBinding$1 extends AbstractViewBinding{constructor(e,t){super(e);this.view=e;this.showToast=t}async showTokenView(e){this.view.style.display="block";await super.showTokenView(e);this.renderAttributesTable()}async unloadTokenView(){this.view.style.display="none";await super.unloadTokenView()}async renderAttributesTable(){const e=this.view.querySelector(".attribute-table");if(!e)return;let t="<tr><th>Attribute</th><th>Value</th></tr>";const r=async(e,t=false)=>`<tr><td>${e.getName()} ${t?"(Card)":"(Global)"}</td><td>${await e.getCurrentValue()}</td></tr>`;for(let e of this.tokenScript.getAttributes()){t+=await r(e)}for(let e of this.currentCard.getAttributes()){t+=await r(e,true)}e.innerHTML=t}async confirmAction(){const e=this.currentCard.getTransaction();this.showLoader();if(e){console.log(e.getTransactionInfo());try{await this.currentCard.executeTransaction((e=>{showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);handleTransactionError(e,this.showToast)}}else{this.postMessageToView(ViewEvent.ON_CONFIRM,{})}this.hideLoader()}async handleMessageFromView(e,t){await super.handleMessageFromView(e,t);if(e===RequestFromView.PUT_USER_INPUT)this.renderAttributesTable()}async dispatchViewEvent(e,t,r){await super.dispatchViewEvent(e,t,r);if(e===ViewEvent.TOKENS_UPDATED)this.renderAttributesTable()}}const alphawalletViewerCss="header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.aw-viewer{max-width:650px;width:100%;height:100vh;margin:0 auto;display:flex;flex-direction:column}.details-container{flex-grow:1}.popover-container{max-height:calc(100dvh - 50px) !important}card-view,.card-container{display:flex !important;flex-direction:column;flex-grow:1}.card-container{max-width:unset !important;margin:0 auto !important;max-height:unset !important;width:100%}card-popover .card-container{max-height:700px !important}card-view .card-container{height:unset !important}.actions{display:flex;flex-direction:column;gap:10px;padding:10px 15px}";const SmartTokenStoreViewer$1=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenScript=undefined;this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.tokenScript.on("TOKENS_UPDATED",(e=>{this.cardButtons=null;this.overflowCardButtons=null;this.infoCard=null;this.loadCards()}),"grid");this.loadCards()}}catch(e){console.warn(e.message)}}async loadCards(){const e=[];const t=[];const r=this.tokenScript.getCards();for(let[n,i]of r.entries()){let r=i.label;if(i.type==="token"&&!this.infoCard){this.infoCard=i;const e=new ViewBinding$1(this.infoCardView,this.showToast);e.setTokenScript(this.tokenScript);const t=this.tokenScript.getViewController(e);t.showOrExecuteCard(this.infoCard,undefined);continue}if(r==="Unnamed Card")r=i.type==="token"?"Token Info":i.type+" Card";try{const s=await i.isEnabledOrReason();if(s===false)continue;const a=h("button",{class:"btn "+getCardButtonClass(i,n),onClick:()=>this.showCard(i),disabled:s!==true,title:s!==true?s:r},r);if(s!==true||e.length>2){t.push(a)}else{e.push(a)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}render(){var e;return h(Host,null,h("div",{class:"aw-viewer"},h("card-view",{ref:e=>this.infoCardView=e}),h("div",{class:"actions"},this.cardButtons?this.cardButtons:h("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((e=this.overflowCardButtons)===null||e===void 0?void 0:e.length)?[h("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h("action-overflow-modal",{ref:e=>this.overflowDialog=e},h("div",{class:"actions"},this.overflowCardButtons))]:"")),h("card-popover",{tokenScript:this.tokenScript}))}};SmartTokenStoreViewer$1.style=alphawalletViewerCss;var ConsoleApiName={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"};var globalConsole=console;var originalConsoleMethods={};Object.keys(ConsoleApiName).forEach((function(e){originalConsoleMethods[e]=globalConsole[e]}));var PREFIX$2="Datadog Browser SDK:";var display={debug:originalConsoleMethods.debug.bind(globalConsole,PREFIX$2),log:originalConsoleMethods.log.bind(globalConsole,PREFIX$2),info:originalConsoleMethods.info.bind(globalConsole,PREFIX$2),warn:originalConsoleMethods.warn.bind(globalConsole,PREFIX$2),error:originalConsoleMethods.error.bind(globalConsole,PREFIX$2)};function catchUserErrors(e,t){return function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}try{return e.apply(void 0,r)}catch(e){display.error(t,e)}}}var ExperimentalFeature;(function(e){e["PAGEHIDE"]="pagehide";e["FEATURE_FLAGS"]="feature_flags";e["RESOURCE_PAGE_STATES"]="resource_page_states";e["COLLECT_FLUSH_REASON"]="collect_flush_reason";e["ZERO_LCP_TELEMETRY"]="zero_lcp_telemetry";e["DISABLE_REPLAY_INLINE_CSS"]="disable_replay_inline_css"})(ExperimentalFeature||(ExperimentalFeature={}));var enabledExperimentalFeatures=new Set;function addExperimentalFeatures(e){e.forEach((function(e){enabledExperimentalFeatures.add(e)}))}function isExperimentalFeatureEnabled(e){return enabledExperimentalFeatures.has(e)}function getExperimentalFeatures(){return enabledExperimentalFeatures}function performDraw(e){return e!==0&&Math.random()*100<=e}function round(e,t){return+e.toFixed(t)}function isPercentage(e){return isNumber(e)&&e>=0&&e<=100}function isNumber(e){return typeof e==="number"}var ONE_SECOND=1e3;var ONE_MINUTE=60*ONE_SECOND;var ONE_HOUR=60*ONE_MINUTE;var ONE_DAY=24*ONE_HOUR;var ONE_YEAR=365*ONE_DAY;function relativeToClocks(e){return{relative:e,timeStamp:getCorrectedTimeStamp(e)}}function getCorrectedTimeStamp(e){var t=dateNow()-performance.now();if(t>getNavigationStart()){return Math.round(addDuration(t,e))}return getTimeStamp(e)}function currentDrift(){return Math.round(dateNow()-addDuration(getNavigationStart(),performance.now()))}function toServerDuration(e){if(!isNumber(e)){return e}return round(e*1e6,0)}function dateNow(){return(new Date).getTime()}function timeStampNow(){return dateNow()}function relativeNow(){return performance.now()}function clocksNow(){return{relative:relativeNow(),timeStamp:timeStampNow()}}function clocksOrigin(){return{relative:0,timeStamp:getNavigationStart()}}function elapsed(e,t){return t-e}function addDuration(e,t){return e+t}function getRelativeTime(e){return e-getNavigationStart()}function getTimeStamp(e){return Math.round(addDuration(getNavigationStart(),e))}function looksLikeRelativeTime(e){return e<ONE_YEAR}var navigationStart;function getNavigationStart(){if(navigationStart===undefined){navigationStart=performance.timing.navigationStart}return navigationStart}var ONE_KIBI_BYTE=1024;var ONE_MEBI_BYTE=1024*ONE_KIBI_BYTE;var HAS_MULTI_BYTES_CHARACTERS=/[^\u0000-\u007F]/;function computeBytesCount(e){if(!HAS_MULTI_BYTES_CHARACTERS.test(e)){return e.length}if(window.TextEncoder!==undefined){return(new TextEncoder).encode(e).length}return new Blob([e]).size}function concatBuffers(e){var t=e.reduce((function(e,t){return e+t.length}),0);var r=new Uint8Array(t);var n=0;for(var i=0,s=e;i<s.length;i++){var a=s[i];r.set(a,n);n+=a.length}return r}function includes(e,t){return e.indexOf(t)!==-1}function arrayFrom(e){if(Array.from){return Array.from(e)}var t=[];if(e instanceof Set){e.forEach((function(e){return t.push(e)}))}else{for(var r=0;r<e.length;r++){t.push(e[r])}}return t}function find(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r)){return n}}return undefined}function findLast(e,t){for(var r=e.length-1;r>=0;r-=1){var n=e[r];if(t(n,r,e)){return n}}return undefined}function forEach(e,t){Array.prototype.forEach.call(e,t)}function objectValues(e){return Object.keys(e).map((function(t){return e[t]}))}function objectEntries(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function startsWith(e,t){return e.slice(0,t.length)===t}function endsWith(e,t){return e.slice(-t.length)===t}function elementMatches(e,t){if(e.matches){return e.matches(t)}if(e.msMatchesSelector){return e.msMatchesSelector(t)}return false}function cssEscape(e){if(window.CSS&&window.CSS.escape){return window.CSS.escape(e)}return e.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,(function(e,t){if(t){if(e==="\0"){return"�"}return"".concat(e.slice(0,-1),"\\").concat(e.charCodeAt(e.length-1).toString(16)," ")}return"\\".concat(e)}))}function assign$3(e){var t=[];for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}t.forEach((function(t){for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){e[r]=t[r]}}}));return e}function shallowClone(e){return assign$3({},e)}function objectHasValue(e,t){return Object.keys(e).some((function(r){return e[r]===t}))}function isEmptyObject(e){return Object.keys(e).length===0}function mapValues(e,t){var r={};for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];r[s]=t(e[s])}return r}function getGlobalObject(){if(typeof globalThis==="object"){return globalThis}Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:true});var e=_dd_temp_;delete Object.prototype._dd_temp_;if(typeof e!=="object"){if(typeof self==="object"){e=self}else if(typeof window==="object"){e=window}else{e={}}}return e}function getZoneJsOriginalValue(e,t){var r=getGlobalObject();var n;if(r.Zone&&typeof r.Zone.__symbol__==="function"){n=e[r.Zone.__symbol__(t)]}if(!n){n=e[t]}return n}var __spreadArray$1=undefined&&undefined.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))};var onMonitorErrorCollected;var debugMode=false;function startMonitorErrorCollection(e){onMonitorErrorCollected=e}function setDebugMode(e){debugMode=e}function monitor(e){return function(){return callMonitored(e,this,arguments)}}function callMonitored(e,t,r){try{return e.apply(t,r)}catch(e){displayIfDebugEnabled(e);if(onMonitorErrorCollected){try{onMonitorErrorCollected(e)}catch(e){displayIfDebugEnabled(e)}}}}function displayIfDebugEnabled(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(debugMode){display.error.apply(display,__spreadArray$1(["[MONITOR]"],e,false))}}function setTimeout$1(e,t){return getZoneJsOriginalValue(getGlobalObject(),"setTimeout")(monitor(e),t)}function clearTimeout$1(e){getZoneJsOriginalValue(getGlobalObject(),"clearTimeout")(e)}function setInterval$1(e,t){return getZoneJsOriginalValue(getGlobalObject(),"setInterval")(monitor(e),t)}function clearInterval$1(e){getZoneJsOriginalValue(getGlobalObject(),"clearInterval")(e)}var Observable=function(){function e(e){this.onFirstSubscribe=e;this.observers=[]}e.prototype.subscribe=function(e){var t=this;if(!this.observers.length&&this.onFirstSubscribe){this.onLastUnsubscribe=this.onFirstSubscribe()||undefined}this.observers.push(e);return{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t}));if(!t.observers.length&&t.onLastUnsubscribe){t.onLastUnsubscribe()}}}};e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))};return e}();function mergeObservables(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=new Observable((function(){var t=e.map((function(e){return e.subscribe((function(e){return r.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return r}function throttle(e,t,r){var n=r&&r.leading!==undefined?r.leading:true;var i=r&&r.trailing!==undefined?r.trailing:true;var s=false;var a;var o;return{throttled:function(){var r=[];for(var f=0;f<arguments.length;f++){r[f]=arguments[f]}if(s){a=r;return}if(n){e.apply(void 0,r)}else{a=r}s=true;o=setTimeout$1((function(){if(i&&a){e.apply(void 0,a)}s=false;a=undefined}),t)},cancel:function(){clearTimeout$1(o);s=false;a=undefined}}}function noop$1(){}function generateUUID(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,generateUUID)}var COMMA_SEPARATED_KEY_VALUE=/([\w-]+)\s*=\s*([^;]+)/g;function findCommaSeparatedValue(e,t){COMMA_SEPARATED_KEY_VALUE.lastIndex=0;while(true){var r=COMMA_SEPARATED_KEY_VALUE.exec(e);if(r){if(r[1]===t){return r[2]}}else{break}}}function findCommaSeparatedValues(e){var t=new Map;COMMA_SEPARATED_KEY_VALUE.lastIndex=0;while(true){var r=COMMA_SEPARATED_KEY_VALUE.exec(e);if(r){t.set(r[1],r[2])}else{break}}return t}function safeTruncate(e,t,r){if(r===void 0){r=""}var n=e.charCodeAt(t-1);var i=n>=55296&&n<=56319;var s=i?t+1:t;if(e.length<=s){return e}return"".concat(e.slice(0,s)).concat(r)}var SESSION_TIME_OUT_DELAY=4*ONE_HOUR;var SESSION_EXPIRATION_DELAY=15*ONE_MINUTE;function isIE(){return detectBrowserCached()===0}function isChromium(){return detectBrowserCached()===1}function isSafari(){return detectBrowserCached()===2}var browserCache;function detectBrowserCached(){return browserCache!==null&&browserCache!==void 0?browserCache:browserCache=detectBrowser()}function detectBrowser(e){var t;if(e===void 0){e=window}var r=e.navigator.userAgent;if(e.chrome||/HeadlessChrome/.test(r)){return 1}if(((t=e.navigator.vendor)===null||t===void 0?void 0:t.indexOf("Apple"))===0||/safari/i.test(r)&&!/chrome|android/i.test(r)){return 2}if(e.document.documentMode){return 0}return 3}function setCookie(e,t,r,n){var i=new Date;i.setTime(i.getTime()+r);var s="expires=".concat(i.toUTCString());var a=n&&n.crossSite?"none":"strict";var o=n&&n.domain?";domain=".concat(n.domain):"";var f=n&&n.secure?";secure":"";var c=n&&n.partitioned?";partitioned":"";document.cookie="".concat(e,"=").concat(t,";").concat(s,";path=/;samesite=").concat(a).concat(o).concat(f).concat(c)}function getCookie(e){return findCommaSeparatedValue(document.cookie,e)}var initCookieParsed;function getInitCookie(e){if(!initCookieParsed){initCookieParsed=findCommaSeparatedValues(document.cookie)}return initCookieParsed.get(e)}function deleteCookie(e,t){setCookie(e,"",0,t)}function areCookiesAuthorized(e){if(document.cookie===undefined||document.cookie===null){return false}try{var t="dd_cookie_test_".concat(generateUUID());var r="test";setCookie(t,r,ONE_MINUTE,e);var n=getCookie(t)===r;deleteCookie(t,e);return n}catch(e){display.error(e);return false}}var getCurrentSiteCache;function getCurrentSite(){if(getCurrentSiteCache===undefined){var e="dd_site_test_".concat(generateUUID());var t="test";var r=window.location.hostname.split(".");var n=r.pop();while(r.length&&!getCookie(e)){n="".concat(r.pop(),".").concat(n);setCookie(e,t,ONE_SECOND,{domain:n})}deleteCookie(e,{domain:n});getCurrentSiteCache=n}return getCurrentSiteCache}var SESSION_STORE_KEY="_dd_s";var SESSION_ENTRY_REGEXP=/^([a-z]+)=([a-z0-9-]+)$/;var SESSION_ENTRY_SEPARATOR="&";function isSessionInExpiredState(e){return isEmptyObject(e)}function expandSessionState(e){e.expire=String(dateNow()+SESSION_EXPIRATION_DELAY)}function toSessionString(e){return objectEntries(e).map((function(e){var t=e[0],r=e[1];return"".concat(t,"=").concat(r)})).join(SESSION_ENTRY_SEPARATOR)}function toSessionState(e){var t={};if(isValidSessionString(e)){e.split(SESSION_ENTRY_SEPARATOR).forEach((function(e){var r=SESSION_ENTRY_REGEXP.exec(e);if(r!==null){var n=r[1],i=r[2];t[n]=i}}))}return t}function isValidSessionString(e){return!!e&&(e.indexOf(SESSION_ENTRY_SEPARATOR)!==-1||SESSION_ENTRY_REGEXP.test(e))}var OLD_SESSION_COOKIE_NAME="_dd";var OLD_RUM_COOKIE_NAME="_dd_r";var OLD_LOGS_COOKIE_NAME="_dd_l";var RUM_SESSION_KEY$1="rum";var LOGS_SESSION_KEY="logs";function tryOldCookiesMigration(e){var t=getInitCookie(SESSION_STORE_KEY);if(!t){var r=getInitCookie(OLD_SESSION_COOKIE_NAME);var n=getInitCookie(OLD_RUM_COOKIE_NAME);var i=getInitCookie(OLD_LOGS_COOKIE_NAME);var s={};if(r){s.id=r}if(i&&/^[01]$/.test(i)){s[LOGS_SESSION_KEY]=i}if(n&&/^[012]$/.test(n)){s[RUM_SESSION_KEY$1]=n}if(!isSessionInExpiredState(s)){expandSessionState(s);e.persistSession(s)}}}function selectCookieStrategy(e){var t=buildCookieOptions(e);return areCookiesAuthorized(t)?{type:"Cookie",cookieOptions:t}:undefined}function initCookieStrategy(e){var t={isLockEnabled:isChromium(),persistSession:persistSessionCookie(e),retrieveSession:retrieveSessionCookie,clearSession:deleteSessionCookie(e)};tryOldCookiesMigration(t);return t}function persistSessionCookie(e){return function(t){setCookie(SESSION_STORE_KEY,toSessionString(t),SESSION_EXPIRATION_DELAY,e)}}function retrieveSessionCookie(){var e=getCookie(SESSION_STORE_KEY);return toSessionState(e)}function deleteSessionCookie(e){return function(){deleteCookie(SESSION_STORE_KEY,e)}}function buildCookieOptions(e){var t={};t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie;t.crossSite=!!e.usePartitionedCrossSiteSessionCookie||!!e.useCrossSiteSessionCookie;t.partitioned=!!e.usePartitionedCrossSiteSessionCookie;if(e.trackSessionAcrossSubdomains){t.domain=getCurrentSite()}return t}var LOCAL_STORAGE_TEST_KEY="_dd_test_";function selectLocalStorageStrategy(){try{var e=generateUUID();var t="".concat(LOCAL_STORAGE_TEST_KEY).concat(e);localStorage.setItem(t,e);var r=localStorage.getItem(t);localStorage.removeItem(t);return e===r?{type:"LocalStorage"}:undefined}catch(e){return undefined}}function initLocalStorageStrategy(){return{isLockEnabled:false,persistSession:persistInLocalStorage,retrieveSession:retrieveSessionFromLocalStorage,clearSession:clearSessionFromLocalStorage}}function persistInLocalStorage(e){localStorage.setItem(SESSION_STORE_KEY,toSessionString(e))}function retrieveSessionFromLocalStorage(){var e=localStorage.getItem(SESSION_STORE_KEY);return toSessionState(e)}function clearSessionFromLocalStorage(){localStorage.removeItem(SESSION_STORE_KEY)}var LOCK_RETRY_DELAY=10;var LOCK_MAX_TRIES=100;var bufferedOperations=[];var ongoingOperations;function processSessionStoreOperations(e,t,r){var n;if(r===void 0){r=0}var i=t.isLockEnabled,s=t.retrieveSession,a=t.persistSession,o=t.clearSession;if(!ongoingOperations){ongoingOperations=e}if(e!==ongoingOperations){bufferedOperations.push(e);return}if(i&&r>=LOCK_MAX_TRIES){next(t);return}var f;var c=s();if(i){if(c.lock){retryLater(e,t,r);return}f=generateUUID();c.lock=f;a(c);c=s();if(c.lock!==f){retryLater(e,t,r);return}}var u=e.process(c);if(i){c=s();if(c.lock!==f){retryLater(e,t,r);return}}if(u){if(isSessionInExpiredState(u)){o()}else{expandSessionState(u);a(u)}}if(i){if(!(u&&isSessionInExpiredState(u))){c=s();if(c.lock!==f){retryLater(e,t,r);return}delete c.lock;a(c);u=c}}(n=e.after)===null||n===void 0?void 0:n.call(e,u||c);next(t)}function retryLater(e,t,r){setTimeout$1((function(){processSessionStoreOperations(e,t,r+1)}),LOCK_RETRY_DELAY)}function next(e){ongoingOperations=undefined;var t=bufferedOperations.shift();if(t){processSessionStoreOperations(t,e)}}var STORAGE_POLL_DELAY=ONE_SECOND;function selectSessionStoreStrategyType(e){var t=selectCookieStrategy(e);if(!t&&e.allowFallbackToLocalStorage){t=selectLocalStorageStrategy()}return t}function startSessionStore(e,t,r){var n=new Observable;var i=new Observable;var s=e.type==="Cookie"?initCookieStrategy(e.cookieOptions):initLocalStorageStrategy();var a=s.clearSession,o=s.retrieveSession;var f=setInterval$1(h,STORAGE_POLL_DELAY);var c=v();function u(){var e;processSessionStoreOperations({process:function(t){var r=d(t);e=p(r);return r},after:function(t){if(e&&!y()){b(t)}c=t}},s)}function l(){processSessionStoreOperations({process:function(e){return y()?d(e):undefined}},s)}function h(){processSessionStoreOperations({process:function(e){return!w(e)?{}:undefined},after:d},s)}function d(e){if(!w(e)){e={}}if(y()){if(m(e)){g()}else{c=e}}return e}function p(e){var n=r(e[t]),i=n.trackingType,s=n.isTracked;e[t]=i;if(s&&!e.id){e.id=generateUUID();e.created=String(dateNow())}return s}function y(){return c[t]!==undefined}function m(e){return c.id!==e.id||c[t]!==e[t]}function g(){c={};i.notify()}function b(e){c=e;n.notify()}function v(){var e=o();if(w(e)){return e}return{}}function w(e){return(e.created===undefined||dateNow()-Number(e.created)<SESSION_TIME_OUT_DELAY)&&(e.expire===undefined||dateNow()<Number(e.expire))}return{expandOrRenewSession:throttle(u,STORAGE_POLL_DELAY).throttled,expandSession:l,getSession:function(){return c},renewObservable:n,expireObservable:i,expire:function(){a();d({})},stop:function(){clearInterval$1(f)}}}function jsonStringify(e,t,r){if(typeof e!=="object"||e===null){return JSON.stringify(e)}var n=detachToJsonMethod(Object.prototype);var i=detachToJsonMethod(Array.prototype);var s=detachToJsonMethod(Object.getPrototypeOf(e));var a=detachToJsonMethod(e);try{return JSON.stringify(e,t,r)}catch(e){return"<error: unable to serialize object>"}finally{n();i();s();a()}}function detachToJsonMethod(e){var t=e;var r=t.toJSON;if(r){delete t.toJSON;return function(){t.toJSON=r}}return noop$1}function normalizeUrl(e){return buildUrl(e,getLocationOrigin()).href}function isValidUrl(e){try{return!!buildUrl(e)}catch(e){return false}}function getPathName(e){var t=buildUrl(e).pathname;return t[0]==="/"?t:"/".concat(t)}function buildUrl(e,t){var r=getSupportedUrl();if(r){try{return t!==undefined?new r(e,t):new r(e)}catch(r){throw new Error("Failed to construct URL: ".concat(String(r)," ").concat(jsonStringify({url:e,base:t})))}}if(t===undefined&&!/:/.test(e)){throw new Error("Invalid URL: '".concat(e,"'"))}var n=document;var i=n.createElement("a");if(t!==undefined){n=document.implementation.createHTMLDocument("");var s=n.createElement("base");s.href=t;n.head.appendChild(s);n.body.appendChild(i)}i.href=e;return i}var originalURL=URL;var isURLSupported;function getSupportedUrl(){if(isURLSupported===undefined){try{var e=new originalURL("http://test/path");isURLSupported=e.href==="http://test/path"}catch(e){isURLSupported=false}}return isURLSupported?originalURL:undefined}function getLocationOrigin(){return getLinkElementOrigin(window.location)}function getLinkElementOrigin(e){if(e.origin&&e.origin!=="null"){return e.origin}var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}var INTAKE_SITE_STAGING="datad0g.com";var INTAKE_SITE_FED_STAGING="dd0g-gov.com";var INTAKE_SITE_US1="datadoghq.com";var INTAKE_SITE_EU1="datadoghq.eu";var INTAKE_SITE_US1_FED="ddog-gov.com";function createEndpointBuilder(e,t,r){var n=createEndpointUrlWithParametersBuilder(e,t);return{build:function(i,s){var a=buildEndpointParameters(e,t,r,i,s);return n(a)},urlPrefix:n(""),trackType:t}}function createEndpointUrlWithParametersBuilder(e,t){var r="/api/v2/".concat(t);var n=e.proxy;if(typeof n==="string"){var i=normalizeUrl(n);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(r,"?").concat(e)))}}if(typeof n==="function"){return function(e){return n({path:r,parameters:e})}}var s=buildEndpointHost(e);return function(e){return"https://".concat(s).concat(r,"?").concat(e)}}function buildEndpointHost(e){var t=e.site,r=t===void 0?INTAKE_SITE_US1:t,n=e.internalAnalyticsSubdomain;if(n&&r===INTAKE_SITE_US1){return"".concat(n,".").concat(INTAKE_SITE_US1)}if(r===INTAKE_SITE_FED_STAGING){return"http-intake.logs.".concat(r)}var i=r.split(".");var s=i.pop();return"browser-intake-".concat(i.join("-"),".").concat(s)}function buildEndpointParameters(e,t,r,n,i){var s=e.clientToken,a=e.internalAnalyticsSubdomain;var o=i.retry,f=i.flushReason,c=i.encoding;var u=["sdk_version:".concat("5.6.0"),"api:".concat(n)].concat(r);if(f&&isExperimentalFeatureEnabled(ExperimentalFeature.COLLECT_FLUSH_REASON)){u.push("flush_reason:".concat(f))}if(o){u.push("retry_count:".concat(o.count),"retry_after:".concat(o.lastFailureStatus))}var l=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(s),"dd-evp-origin-version=".concat(encodeURIComponent("5.6.0")),"dd-evp-origin=browser","dd-request-id=".concat(generateUUID())];if(c){l.push("dd-evp-encoding=".concat(c))}if(t==="rum"){l.push("batch_time=".concat(timeStampNow()))}if(a){l.reverse()}return l.join("&")}var TAG_SIZE_LIMIT=200;function buildTags(e){var t=e.env,r=e.service,n=e.version,i=e.datacenter;var s=[];if(t){s.push(buildTag("env",t))}if(r){s.push(buildTag("service",r))}if(n){s.push(buildTag("version",n))}if(i){s.push(buildTag("datacenter",i))}return s}var FORBIDDEN_CHARACTERS=/[^a-z0-9_:./-]/;function buildTag(e,t){var r=TAG_SIZE_LIMIT-e.length-1;if(t.length>r||FORBIDDEN_CHARACTERS.test(t)){display.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"))}var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function computeTransportConfiguration(e){var t=buildTags(e);var r=computeEndpointBuilders(e,t);var n=objectValues(r).map((function(e){return e.urlPrefix}));var i=computeReplicaConfiguration(e,n,t);return assign$3({isIntakeUrl:function(e){return n.some((function(t){return e.indexOf(t)===0}))},replica:i,site:e.site||INTAKE_SITE_US1},r)}function computeEndpointBuilders(e,t){return{logsEndpointBuilder:createEndpointBuilder(e,"logs",t),rumEndpointBuilder:createEndpointBuilder(e,"rum",t),sessionReplayEndpointBuilder:createEndpointBuilder(e,"replay",t)}}function computeReplicaConfiguration(e,t,r){if(!e.replica){return}var n=assign$3({},e,{site:INTAKE_SITE_US1,clientToken:e.replica.clientToken});var i={logsEndpointBuilder:createEndpointBuilder(n,"logs",r),rumEndpointBuilder:createEndpointBuilder(n,"rum",r)};t.push.apply(t,objectValues(i).map((function(e){return e.urlPrefix})));return assign$3({applicationId:e.replica.applicationId},i)}var DefaultPrivacyLevel={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function validateAndBuildConfiguration(e){var t,r,n;if(!e||!e.clientToken){display.error("Client Token is not configured, we will not send any data.");return}if(e.sessionSampleRate!==undefined&&!isPercentage(e.sessionSampleRate)){display.error("Session Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==undefined&&!isPercentage(e.telemetrySampleRate)){display.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(e.telemetryConfigurationSampleRate!==undefined&&!isPercentage(e.telemetryConfigurationSampleRate)){display.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}if(Array.isArray(e.enableExperimentalFeatures)){addExperimentalFeatures(e.enableExperimentalFeatures.filter((function(e){return objectHasValue(ExperimentalFeature,e)})))}return assign$3({beforeSend:e.beforeSend&&catchUserErrors(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:selectSessionStoreStrategyType(e),sessionSampleRate:(t=e.sessionSampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(r=e.telemetrySampleRate)!==null&&r!==void 0?r:20,telemetryConfigurationSampleRate:(n=e.telemetryConfigurationSampleRate)!==null&&n!==void 0?n:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,batchBytesLimit:16*ONE_KIBI_BYTE,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ONE_SECOND,batchMessagesLimit:50,messageBytesLimit:256*ONE_KIBI_BYTE},computeTransportConfiguration(e))}function serializeConfiguration(e){return{session_sample_rate:e.sessionSampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_partitioned_cross_site_session_cookie:e.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:!!e.proxy,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!e.allowFallbackToLocalStorage,store_contexts_across_pages:!!e.storeContextsAcrossPages,allow_untrusted_events:!!e.allowUntrustedEvents}}function instrumentMethod(e,t,r){var n=e[t];var i=r(n);var s=function(){if(typeof i!=="function"){return undefined}return i.apply(this,arguments)};e[t]=s;return{stop:function(){if(e[t]===s){e[t]=n}else{i=n}}}}function instrumentMethodAndCallOriginal(e,t,r){var n=r.before,i=r.after;return instrumentMethod(e,t,(function(e){return function(){var t=arguments;var r;if(n){callMonitored(n,this,t)}if(typeof e==="function"){r=e.apply(this,t)}if(i){callMonitored(i,this,t)}return r}}))}function instrumentSetter(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n||!n.set||!n.configurable){return{stop:noop$1}}var i=function(e,t){setTimeout$1((function(){r(e,t)}),0)};var s=function(e){n.set.call(this,e);i(this,e)};Object.defineProperty(e,t,{set:s});return{stop:function(){var r;if(((r=Object.getOwnPropertyDescriptor(e,t))===null||r===void 0?void 0:r.set)===s){Object.defineProperty(e,t,n)}else{i=noop$1}}}}var UNKNOWN_FUNCTION="?";function computeStackTrace(e){var t=[];var r=tryToGetString(e,"stack");var n=String(e);if(r&&startsWith(r,n)){r=r.slice(n.length)}if(r){r.split("\n").forEach((function(e){var r=parseChromeLine(e)||parseChromeAnonymousLine(e)||parseWinLine(e)||parseGeckoLine(e);if(r){if(!r.func&&r.line){r.func=UNKNOWN_FUNCTION}t.push(r)}}))}return{message:tryToGetString(e,"message"),name:tryToGetString(e,"name"),stack:t}}var fileUrl="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)";var filePosition="(?::(\\d+))";var CHROME_LINE_RE=new RegExp("^\\s*at (.*?) ?\\(".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"?\\)?\\s*$"),"i");var CHROME_EVAL_RE=new RegExp("\\((\\S*)".concat(filePosition).concat(filePosition,"\\)"));function parseChromeLine(e){var t=CHROME_LINE_RE.exec(e);if(!t){return}var r=t[2]&&t[2].indexOf("native")===0;var n=t[2]&&t[2].indexOf("eval")===0;var i=CHROME_EVAL_RE.exec(t[2]);if(n&&i){t[2]=i[1];t[3]=i[2];t[4]=i[3]}return{args:r?[t[2]]:[],column:t[4]?+t[4]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:t[3]?+t[3]:undefined,url:!r?t[2]:undefined}}var CHROME_ANONYMOUS_FUNCTION_RE=new RegExp("^\\s*at ?".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"??\\s*$"),"i");function parseChromeAnonymousLine(e){var t=CHROME_ANONYMOUS_FUNCTION_RE.exec(e);if(!t){return}return{args:[],column:t[3]?+t[3]:undefined,func:UNKNOWN_FUNCTION,line:t[2]?+t[2]:undefined,url:t[1]}}var WINJS_LINE_RE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseWinLine(e){var t=WINJS_LINE_RE.exec(e);if(!t){return}return{args:[],column:t[4]?+t[4]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:+t[3],url:t[2]}}var GECKO_LINE_RE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i;var GECKO_EVAL_RE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function parseGeckoLine(e){var t=GECKO_LINE_RE.exec(e);if(!t){return}var r=t[3]&&t[3].indexOf(" > eval")>-1;var n=GECKO_EVAL_RE.exec(t[3]);if(r&&n){t[3]=n[1];t[4]=n[2];t[5]=undefined}return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:undefined,func:t[1]||UNKNOWN_FUNCTION,line:t[4]?+t[4]:undefined,url:t[3]}}function tryToGetString(e,t){if(typeof e!=="object"||!e||!(t in e)){return undefined}var r=e[t];return typeof r==="string"?r:undefined}function computeStackTraceFromOnErrorMessage(e,t,r,n){var i=[{url:t,column:n,line:r}];var s=tryToParseMessage(e),a=s.name,o=s.message;return{name:a,message:o,stack:i}}var ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function tryToParseMessage(e){var t;var r;var n;if({}.toString.call(e)==="[object String]"){t=ERROR_TYPES_RE.exec(e),r=t[1],n=t[2]}return{name:r,message:n}}var SANITIZE_DEFAULT_MAX_CHARACTER_COUNT=220*ONE_KIBI_BYTE;var JSON_PATH_ROOT_ELEMENT="$";var KEY_DECORATION_LENGTH=3;function sanitize(e,t){var r;if(t===void 0){t=SANITIZE_DEFAULT_MAX_CHARACTER_COUNT}var n=detachToJsonMethod(Object.prototype);var i=detachToJsonMethod(Array.prototype);var s=[];var a=new WeakMap;var o=sanitizeProcessor(e,JSON_PATH_ROOT_ELEMENT,undefined,s,a);var f=((r=JSON.stringify(o))===null||r===void 0?void 0:r.length)||0;if(f>t){warnOverCharacterLimit(t,"discarded",e);return undefined}while(s.length>0&&f<t){var c=s.shift();var u=0;if(Array.isArray(c.source)){for(var l=0;l<c.source.length;l++){var h=sanitizeProcessor(c.source[l],c.path,l,s,a);if(h!==undefined){f+=JSON.stringify(h).length}else{f+=4}f+=u;u=1;if(f>t){warnOverCharacterLimit(t,"truncated",e);break}c.target[l]=h}}else{for(var l in c.source){if(Object.prototype.hasOwnProperty.call(c.source,l)){var h=sanitizeProcessor(c.source[l],c.path,l,s,a);if(h!==undefined){f+=JSON.stringify(h).length+u+l.length+KEY_DECORATION_LENGTH;u=1}if(f>t){warnOverCharacterLimit(t,"truncated",e);break}c.target[l]=h}}}}n();i();return o}function sanitizeProcessor(e,t,r,n,i){var s=tryToApplyToJSON(e);if(!s||typeof s!=="object"){return sanitizePrimitivesAndFunctions(s)}var a=sanitizeObjects(s);if(a!=="[Object]"&&a!=="[Array]"&&a!=="[Error]"){return a}var o=e;if(i.has(o)){return"[Reference seen at ".concat(i.get(o),"]")}var f=r!==undefined?"".concat(t,".").concat(r):t;var c=Array.isArray(s)?[]:{};i.set(o,f);n.push({source:s,target:c,path:f});return c}function sanitizePrimitivesAndFunctions(e){if(typeof e==="bigint"){return"[BigInt] ".concat(e.toString())}if(typeof e==="function"){return"[Function] ".concat(e.name||"unknown")}if(typeof e==="symbol"){return"[Symbol] ".concat(e.description||e.toString())}return e}function sanitizeObjects(e){try{if(e instanceof Event){return{isTrusted:e.isTrusted}}var t=Object.prototype.toString.call(e);var r=t.match(/\[object (.*)\]/);if(r&&r[1]){return"[".concat(r[1],"]")}}catch(e){}return"[Unserializable]"}function tryToApplyToJSON(e){var t=e;if(t&&typeof t.toJSON==="function"){try{return t.toJSON()}catch(e){}}return e}function warnOverCharacterLimit(e,t,r){display.warn("The data provided has been ".concat(t," as it is over the limit of ").concat(e," characters:"),r)}var NO_ERROR_STACK_PRESENT_MESSAGE="No stack, consider using an instance of Error";function computeRawError(e){var t=e.stackTrace,r=e.originalError,n=e.handlingStack,i=e.startClocks,s=e.nonErrorPrefix,a=e.source,o=e.handling;var f=r instanceof Error;var c=computeMessage(t,f,s,r);var u=hasUsableStack(f,t)?toStackTraceString(t):NO_ERROR_STACK_PRESENT_MESSAGE;var l=f?flattenErrorCauses(r,a):undefined;var h=t===null||t===void 0?void 0:t.name;var d=tryToGetFingerprint(r);return{startClocks:i,source:a,handling:o,handlingStack:n,originalError:r,type:h,message:c,stack:u,causes:l,fingerprint:d}}function computeMessage(e,t,r,n){return(e===null||e===void 0?void 0:e.message)&&(e===null||e===void 0?void 0:e.name)?e.message:!t?"".concat(r," ").concat(jsonStringify(sanitize(n))):"Empty message"}function hasUsableStack(e,t){if(t===undefined){return false}if(e){return true}return t.stack.length>0&&(t.stack.length>1||t.stack[0].url!==undefined)}function tryToGetFingerprint(e){return e instanceof Error&&"dd_fingerprint"in e?String(e.dd_fingerprint):undefined}function toStackTraceString(e){var t=formatErrorMessage(e);e.stack.forEach((function(e){var r=e.func==="?"?"<anonymous>":e.func;var n=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"";var i=e.line?":".concat(e.line):"";var s=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(r).concat(n," @ ").concat(e.url).concat(i).concat(s)}));return t}function formatErrorMessage(e){return"".concat(e.name||"Error",": ").concat(e.message)}function createHandlingStack(){var e=2;var t=new Error;var r;if(!t.stack){try{throw t}catch(e){}}callMonitored((function(){var n=computeStackTrace(t);n.stack=n.stack.slice(e);r=toStackTraceString(n)}));return r}function flattenErrorCauses(e,t){var r=e;var n=[];while((r===null||r===void 0?void 0:r.cause)instanceof Error&&n.length<10){var i=computeStackTrace(r.cause);n.push({message:r.cause.message,source:t,type:i===null||i===void 0?void 0:i.name,stack:i&&toStackTraceString(i)});r=r.cause}return n.length?n:undefined}var ErrorSource={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function trackRuntimeError(e){var t=function(t,r){var n=computeRawError({stackTrace:t,originalError:r,startClocks:clocksNow(),nonErrorPrefix:"Uncaught",source:ErrorSource.SOURCE,handling:"unhandled"});e.notify(n)};var r=instrumentOnError(t).stop;var n=instrumentUnhandledRejection(t).stop;return{stop:function(){r();n()}}}function instrumentOnError(e){return instrumentMethodAndCallOriginal(window,"onerror",{before:function(t,r,n,i,s){var a;if(s instanceof Error){a=computeStackTrace(s)}else{a=computeStackTraceFromOnErrorMessage(t,r,n,i)}e(a,s!==null&&s!==void 0?s:t)}})}function instrumentUnhandledRejection(e){return instrumentMethodAndCallOriginal(window,"onunhandledrejection",{before:function(t){var r=t.reason||"Empty reason";var n=computeStackTrace(r);e(n,r)}})}function makePublicApi(e){var t=assign$3({version:"5.6.0",onReady:function(e){e()}},e);Object.defineProperty(t,"_setDebug",{get:function(){return setDebugMode},enumerable:false});return t}function defineGlobal(e,t,r){var n=e[t];e[t]=r;if(n&&n.q){n.q.forEach((function(e){return catchUserErrors(e,"onReady callback threw an error:")()}))}}var DOM_EVENT;(function(e){e["BEFORE_UNLOAD"]="beforeunload";e["CLICK"]="click";e["DBL_CLICK"]="dblclick";e["KEY_DOWN"]="keydown";e["LOAD"]="load";e["POP_STATE"]="popstate";e["SCROLL"]="scroll";e["TOUCH_START"]="touchstart";e["TOUCH_END"]="touchend";e["TOUCH_MOVE"]="touchmove";e["VISIBILITY_CHANGE"]="visibilitychange";e["PAGE_SHOW"]="pageshow";e["FREEZE"]="freeze";e["RESUME"]="resume";e["DOM_CONTENT_LOADED"]="DOMContentLoaded";e["POINTER_DOWN"]="pointerdown";e["POINTER_UP"]="pointerup";e["POINTER_CANCEL"]="pointercancel";e["HASH_CHANGE"]="hashchange";e["PAGE_HIDE"]="pagehide";e["MOUSE_DOWN"]="mousedown";e["MOUSE_UP"]="mouseup";e["MOUSE_MOVE"]="mousemove";e["FOCUS"]="focus";e["BLUR"]="blur";e["CONTEXT_MENU"]="contextmenu";e["RESIZE"]="resize";e["CHANGE"]="change";e["INPUT"]="input";e["PLAY"]="play";e["PAUSE"]="pause";e["SECURITY_POLICY_VIOLATION"]="securitypolicyviolation";e["SELECTION_CHANGE"]="selectionchange";e["STORAGE"]="storage"})(DOM_EVENT||(DOM_EVENT={}));function addEventListener$1(e,t,r,n,i){return addEventListeners(e,t,[r],n,i)}function addEventListeners(e,t,r,n,i){var s=i===void 0?{}:i,a=s.once,o=s.capture,f=s.passive;var c=monitor((function(t){if(!t.isTrusted&&!t.__ddIsTrusted&&!e.allowUntrustedEvents){return}if(a){h()}n(t)}));var u=f?{capture:o,passive:f}:o;var l=getZoneJsOriginalValue(t,"addEventListener");r.forEach((function(e){return l.call(t,e,c,u)}));function h(){var e=getZoneJsOriginalValue(t,"removeEventListener");r.forEach((function(r){return e.call(t,r,c,u)}))}return{stop:h}}var RawReportType={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function initReportObservable(e,t){var r=[];if(includes(t,RawReportType.cspViolation)){r.push(createCspViolationReportObservable(e))}var n=t.filter((function(e){return e!==RawReportType.cspViolation}));if(n.length){r.push(createReportObservable(n))}return mergeObservables.apply(void 0,r)}function createReportObservable(e){var t=new Observable((function(){if(!window.ReportingObserver){return}var r=monitor((function(e,r){return e.forEach((function(e){t.notify(buildRawReportFromReport(e))}))}));var n=new window.ReportingObserver(r,{types:e,buffered:true});n.observe();return function(){n.disconnect()}}));return t}function createCspViolationReportObservable(e){var t=new Observable((function(){var r=addEventListener$1(e,document,DOM_EVENT.SECURITY_POLICY_VIOLATION,(function(e){t.notify(buildRawReportFromCspViolation(e))})).stop;return r}));return t}function buildRawReportFromReport(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),originalReport:e,stack:buildStack(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}function buildRawReportFromCspViolation(e){var t=RawReportType.cspViolation;var r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:RawReportType.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:buildStack(e.effectiveDirective,e.originalPolicy?"".concat(r,' of the policy "').concat(safeTruncate(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber),originalReport:e}}function buildStack(e,t,r,n,i){return r?toStackTraceString({name:e,message:t,stack:[{func:"?",url:r,line:n!==null&&n!==void 0?n:undefined,column:i!==null&&i!==void 0?i:undefined}]}):undefined}function sendToExtension(e,t){var r=window.__ddBrowserSdkExtensionCallback;if(r){r({type:e,payload:t})}}function getType(e){if(e===null){return"null"}if(Array.isArray(e)){return"array"}return typeof e}function mergeInto(e,t,r){if(r===void 0){r=createCircularReferenceChecker()}if(t===undefined){return e}if(typeof t!=="object"||t===null){return t}else if(t instanceof Date){return new Date(t.getTime())}else if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(r.hasAlreadyBeenSeen(t)){return undefined}else if(Array.isArray(t)){var i=Array.isArray(e)?e:[];for(var s=0;s<t.length;++s){i[s]=mergeInto(i[s],t[s],r)}return i}var a=getType(e)==="object"?e:{};for(var o in t){if(Object.prototype.hasOwnProperty.call(t,o)){a[o]=mergeInto(a[o],t[o],r)}}return a}function deepClone(e){return mergeInto(undefined,e)}function combine(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r;for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s===undefined||s===null){continue}r=mergeInto(r,s)}return r}function createCircularReferenceChecker(){if(typeof WeakSet!=="undefined"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var r=e.has(t);if(!r){e.add(t)}return r}}}var t=[];return{hasAlreadyBeenSeen:function(e){var r=t.indexOf(e)>=0;if(!r){t.push(e)}return r}}}var TelemetryType={log:"log",configuration:"configuration"};var ALLOWED_FRAME_URLS=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"];var TELEMETRY_EXCLUDED_SITES=[INTAKE_SITE_US1_FED];var telemetryConfiguration={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:false,telemetryConfigurationEnabled:false};var onRawTelemetryEventCollected;function startTelemetry(e,t){var r;var n=new Observable;telemetryConfiguration.telemetryEnabled=!includes(TELEMETRY_EXCLUDED_SITES,t.site)&&performDraw(t.telemetrySampleRate);telemetryConfiguration.telemetryConfigurationEnabled=telemetryConfiguration.telemetryEnabled&&performDraw(t.telemetryConfigurationSampleRate);var i=getRuntimeEnvInfo();onRawTelemetryEventCollected=function(t){if(telemetryConfiguration.telemetryEnabled){var r=s(e,t,i);n.notify(r);sendToExtension("telemetry",r)}};startMonitorErrorCollection(addTelemetryError);assign$3(telemetryConfiguration,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0});function s(e,t,n){return combine({type:"telemetry",date:timeStampNow(),service:e,version:"5.6.0",source:"browser",_dd:{format_version:2},telemetry:combine(t,{runtime_env:n}),experimental_features:arrayFrom(getExperimentalFeatures())},r!==undefined?r():{})}return{setContextProvider:function(e){r=e},observable:n,enabled:telemetryConfiguration.telemetryEnabled}}function getRuntimeEnvInfo(){return{is_local_file:window.location.protocol==="file:",is_worker:"WorkerGlobalScope"in self}}function isTelemetryReplicationAllowed(e){return e.site===INTAKE_SITE_STAGING}function addTelemetryDebug(e,t){displayIfDebugEnabled(ConsoleApiName.debug,e,t);addTelemetry(assign$3({type:TelemetryType.log,message:e,status:"debug"},t))}function addTelemetryError(e,t){addTelemetry(assign$3({type:TelemetryType.log,status:"error"},formatError(e),t))}function addTelemetryConfiguration(e){if(telemetryConfiguration.telemetryConfigurationEnabled){addTelemetry({type:TelemetryType.configuration,configuration:e})}}function addTelemetry(e){if(onRawTelemetryEventCollected&&telemetryConfiguration.sentEventCount<telemetryConfiguration.maxEventsPerPage){telemetryConfiguration.sentEventCount+=1;onRawTelemetryEventCollected(e)}}function formatError(e){if(e instanceof Error){var t=computeStackTrace(e);return{error:{kind:t.name,stack:toStackTraceString(scrubCustomerFrames(t))},message:t.message}}return{error:{stack:NO_ERROR_STACK_PRESENT_MESSAGE},message:"".concat("Uncaught"," ").concat(jsonStringify(e))}}function scrubCustomerFrames(e){e.stack=e.stack.filter((function(e){return!e.url||ALLOWED_FRAME_URLS.some((function(t){return startsWith(e.url,t)}))}));return e}var END_OF_TIMES=Infinity;var CLEAR_OLD_VALUES_INTERVAL=ONE_MINUTE;var ValueHistory=function(){function e(e,t){var r=this;this.expireDelay=e;this.maxEntries=t;this.entries=[];this.clearOldValuesInterval=setInterval$1((function(){return r.clearOldValues()}),CLEAR_OLD_VALUES_INTERVAL)}e.prototype.add=function(e,t){var r=this;var n={value:e,startTime:t,endTime:END_OF_TIMES,remove:function(){var e=r.entries.indexOf(n);if(e>=0){r.entries.splice(e,1)}},close:function(e){n.endTime=e}};if(this.maxEntries&&this.entries.length>=this.maxEntries){this.entries.pop()}this.entries.unshift(n);return n};e.prototype.find=function(e){if(e===void 0){e=END_OF_TIMES}for(var t=0,r=this.entries;t<r.length;t++){var n=r[t];if(n.startTime<=e){if(e<=n.endTime){return n.value}break}}};e.prototype.closeActive=function(e){var t=this.entries[0];if(t&&t.endTime===END_OF_TIMES){t.close(e)}};e.prototype.findAll=function(e,t){if(e===void 0){e=END_OF_TIMES}if(t===void 0){t=0}var r=addDuration(e,t);return this.entries.filter((function(t){return t.startTime<=r&&e<=t.endTime})).map((function(e){return e.value}))};e.prototype.reset=function(){this.entries=[]};e.prototype.stop=function(){clearInterval$1(this.clearOldValuesInterval)};e.prototype.clearOldValues=function(){var e=relativeNow()-this.expireDelay;while(this.entries.length>0&&this.entries[this.entries.length-1].endTime<e){this.entries.pop()}};return e}();var VISIBILITY_CHECK_DELAY=ONE_MINUTE;var SESSION_CONTEXT_TIMEOUT_DELAY=SESSION_TIME_OUT_DELAY;function startSessionManager(e,t,r){var n=startSessionStore(e.sessionStoreStrategyType,t,r);var i=new ValueHistory(SESSION_CONTEXT_TIMEOUT_DELAY);n.renewObservable.subscribe((function(){i.add(s(),relativeNow())}));n.expireObservable.subscribe((function(){i.closeActive(relativeNow())}));n.expandOrRenewSession();i.add(s(),clocksOrigin().relative);trackActivity(e,(function(){return n.expandOrRenewSession()}));trackVisibility(e,(function(){return n.expandSession()}));function s(){return{id:n.getSession().id,trackingType:n.getSession()[t]}}return{findActiveSession:function(e){return i.find(e)},renewObservable:n.renewObservable,expireObservable:n.expireObservable,expire:n.expire}}function trackActivity(e,t){addEventListeners(e,window,[DOM_EVENT.CLICK,DOM_EVENT.TOUCH_START,DOM_EVENT.KEY_DOWN,DOM_EVENT.SCROLL],t,{capture:true,passive:true}).stop}function trackVisibility(e,t){var r=function(){if(document.visibilityState==="visible"){t()}};addEventListener$1(e,document,DOM_EVENT.VISIBILITY_CHANGE,r).stop;setInterval$1(r,VISIBILITY_CHECK_DELAY)}function isServerError(e){return e>=500}function tryToClone(e){try{return e.clone()}catch(e){return}}var MAX_ONGOING_BYTES_COUNT=80*ONE_KIBI_BYTE;var MAX_ONGOING_REQUESTS=32;var MAX_QUEUE_BYTES_COUNT=3*ONE_MEBI_BYTE;var MAX_BACKOFF_TIME=ONE_MINUTE;var INITIAL_BACKOFF_TIME=ONE_SECOND;function sendWithRetryStrategy(e,t,r,n,i){if(t.transportStatus===0&&t.queuedPayloads.size()===0&&t.bandwidthMonitor.canHandle(e)){send(e,t,r,{onSuccess:function(){return retryQueuedPayloads(0,t,r,n,i)},onFailure:function(){t.queuedPayloads.enqueue(e);scheduleRetry(t,r,n,i)}})}else{t.queuedPayloads.enqueue(e)}}function scheduleRetry(e,t,r,n){if(e.transportStatus!==2){return}setTimeout$1((function(){var i=e.queuedPayloads.first();send(i,e,t,{onSuccess:function(){e.queuedPayloads.dequeue();e.currentBackoffTime=INITIAL_BACKOFF_TIME;retryQueuedPayloads(1,e,t,r,n)},onFailure:function(){e.currentBackoffTime=Math.min(MAX_BACKOFF_TIME,e.currentBackoffTime*2);scheduleRetry(e,t,r,n)}})}),e.currentBackoffTime)}function send(e,t,r,n){var i=n.onSuccess,s=n.onFailure;t.bandwidthMonitor.add(e);r(e,(function(r){t.bandwidthMonitor.remove(e);if(!shouldRetryRequest(r)){t.transportStatus=0;i()}else{t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2;e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:r.status};s()}}))}function retryQueuedPayloads(e,t,r,n,i){if(e===0&&t.queuedPayloads.isFull()&&!t.queueFullReported){i({message:"Reached max ".concat(n," events size queued for upload: ").concat(MAX_QUEUE_BYTES_COUNT/ONE_MEBI_BYTE,"MiB"),source:ErrorSource.AGENT,startClocks:clocksNow()});t.queueFullReported=true}var s=t.queuedPayloads;t.queuedPayloads=newPayloadQueue();while(s.size()>0){sendWithRetryStrategy(s.dequeue(),t,r,n,i)}}function shouldRetryRequest(e){return e.type!=="opaque"&&(e.status===0&&!navigator.onLine||e.status===408||e.status===429||isServerError(e.status))}function newRetryState(){return{transportStatus:0,currentBackoffTime:INITIAL_BACKOFF_TIME,bandwidthMonitor:newBandwidthMonitor(),queuedPayloads:newPayloadQueue(),queueFullReported:false}}function newPayloadQueue(){var e=[];return{bytesCount:0,enqueue:function(t){if(this.isFull()){return}e.push(t);this.bytesCount+=t.bytesCount},first:function(){return e[0]},dequeue:function(){var t=e.shift();if(t){this.bytesCount-=t.bytesCount}return t},size:function(){return e.length},isFull:function(){return this.bytesCount>=MAX_QUEUE_BYTES_COUNT}}}function newBandwidthMonitor(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return this.ongoingRequestCount===0||this.ongoingByteCount+e.bytesCount<=MAX_ONGOING_BYTES_COUNT&&this.ongoingRequestCount<MAX_ONGOING_REQUESTS},add:function(e){this.ongoingRequestCount+=1;this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1;this.ongoingByteCount-=e.bytesCount}}}function createHttpRequest(e,t,r,n){var i=newRetryState();var s=function(n,i){return fetchKeepAliveStrategy(e,t,r,n,i)};return{send:function(e){sendWithRetryStrategy(e,i,s,t.trackType,n)},sendOnExit:function(n){sendBeaconStrategy(e,t,r,n)}}}function sendBeaconStrategy(e,t,r,n){var i=!!navigator.sendBeacon&&n.bytesCount<r;if(i){try{var s=t.build("beacon",n);var a=navigator.sendBeacon(s,n.data);if(a){return}}catch(e){reportBeaconError(e)}}var o=t.build("xhr",n);sendXHR(e,o,n.data)}var hasReportedBeaconError=false;function reportBeaconError(e){if(!hasReportedBeaconError){hasReportedBeaconError=true;addTelemetryError(e)}}function fetchKeepAliveStrategy(e,t,r,n,i){var s=isKeepAliveSupported()&&n.bytesCount<r;if(s){var a=t.build("fetch",n);fetch(a,{method:"POST",body:n.data,keepalive:true,mode:"cors"}).then(monitor((function(e){return i===null||i===void 0?void 0:i({status:e.status,type:e.type})})),monitor((function(){var r=t.build("xhr",n);sendXHR(e,r,n.data,i)})))}else{var o=t.build("xhr",n);sendXHR(e,o,n.data,i)}}function isKeepAliveSupported(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return false}}function sendXHR(e,t,r,n){var i=new XMLHttpRequest;i.open("POST",t,true);if(r instanceof Blob){i.setRequestHeader("Content-Type",r.type)}addEventListener$1(e,i,"loadend",(function(){n===null||n===void 0?void 0:n({status:i.status})}),{once:true});i.send(r)}function getEventBridge(){var e=getEventBridgeGlobal();if(!e){return}return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r){e.send(JSON.stringify({eventType:t,event:r}))}}}function canUseEventBridge(e){var t;if(e===void 0){e=(t=getGlobalObject().location)===null||t===void 0?void 0:t.hostname}var r=getEventBridge();return!!r&&r.getAllowedWebViewHosts().some((function(t){return e===t||endsWith(e,".".concat(t))}))}function getEventBridgeGlobal(){return getGlobalObject().DatadogEventBridge}var PageExitReason={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function createPageExitObservable(e){var t=new Observable((function(){var r=isExperimentalFeatureEnabled(ExperimentalFeature.PAGEHIDE);var n=addEventListeners(e,window,[DOM_EVENT.VISIBILITY_CHANGE,DOM_EVENT.FREEZE,DOM_EVENT.PAGE_HIDE],(function(e){if(e.type===DOM_EVENT.PAGE_HIDE&&r){t.notify({reason:PageExitReason.PAGEHIDE})}else if(e.type===DOM_EVENT.VISIBILITY_CHANGE&&document.visibilityState==="hidden"){t.notify({reason:PageExitReason.HIDDEN})}else if(e.type===DOM_EVENT.FREEZE){t.notify({reason:PageExitReason.FROZEN})}}),{capture:true}).stop;var i=noop$1;if(!r){i=addEventListener$1(e,window,DOM_EVENT.BEFORE_UNLOAD,(function(){t.notify({reason:PageExitReason.UNLOADING})})).stop}return function(){n();i()}}));return t}function isPageExitReason(e){return includes(objectValues(PageExitReason),e)}var Batch=function(){function e(e,t,r,n){var i=this;this.encoder=e;this.request=t;this.flushController=r;this.messageBytesLimit=n;this.upsertBuffer={};this.flushSubscription=this.flushController.flushObservable.subscribe((function(e){return i.flush(e)}))}e.prototype.add=function(e){this.addOrUpdate(e)};e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)};e.prototype.stop=function(){this.flushSubscription.unsubscribe()};e.prototype.flush=function(e){var t=objectValues(this.upsertBuffer).join("\n");this.upsertBuffer={};var r=isPageExitReason(e.reason);var n=r?this.request.sendOnExit:this.request.send;if(r&&this.encoder.isAsync){var i=this.encoder.finishSync();if(i.outputBytesCount){n(formatPayloadFromEncoder(i,e))}var s=[i.pendingData,t].filter(Boolean).join("\n");if(s){n({data:s,bytesCount:computeBytesCount(s),flushReason:e.reason})}}else{if(t){this.encoder.write(this.encoder.isEmpty?t:"\n".concat(t))}this.encoder.finish((function(t){n(formatPayloadFromEncoder(t,e))}))}};e.prototype.addOrUpdate=function(e,t){var r=jsonStringify(e);var n=this.encoder.estimateEncodedBytesCount(r);if(n>=this.messageBytesLimit){display.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}if(this.hasMessageFor(t)){this.remove(t)}this.push(r,n,t)};e.prototype.push=function(e,t,r){var n=this;this.flushController.notifyBeforeAddMessage(t);if(r!==undefined){this.upsertBuffer[r]=e;this.flushController.notifyAfterAddMessage()}else{this.encoder.write(this.encoder.isEmpty?e:"\n".concat(e),(function(e){n.flushController.notifyAfterAddMessage(e-t)}))}};e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var r=this.encoder.estimateEncodedBytesCount(t);this.flushController.notifyAfterRemoveMessage(r)};e.prototype.hasMessageFor=function(e){return e!==undefined&&this.upsertBuffer[e]!==undefined};return e}();function formatPayloadFromEncoder(e,t){var r;if(typeof e.output==="string"){r=e.output}else{r=new Blob([e.output],{type:"text/plain"})}return{data:r,bytesCount:e.outputBytesCount,encoding:e.encoding,flushReason:t.reason}}function createFlushController(e){var t=e.messagesLimit,r=e.bytesLimit,n=e.durationLimit,i=e.pageExitObservable,s=e.sessionExpireObservable;var a=i.subscribe((function(e){return l(e.reason)}));var o=s.subscribe((function(){return l("session_expire")}));var f=new Observable((function(){return function(){a.unsubscribe();o.unsubscribe()}}));var c=0;var u=0;function l(e){if(u===0){return}var t=u;var r=c;u=0;c=0;p();f.notify({reason:e,messagesCount:t,bytesCount:r})}var h;function d(){if(h===undefined){h=setTimeout$1((function(){l("duration_limit")}),n)}}function p(){clearTimeout$1(h);h=undefined}return{flushObservable:f,get messagesCount(){return u},notifyBeforeAddMessage:function(e){if(c+e>=r){l("bytes_limit")}u+=1;c+=e;d()},notifyAfterAddMessage:function(e){if(e===void 0){e=0}c+=e;if(u>=t){l("messages_limit")}else if(c>=r){l("bytes_limit")}},notifyAfterRemoveMessage:function(e){c-=e;u-=1;if(u===0){p()}}}}function startBatchWithReplica(e,t,r,n,i,s){var a=f(e,t);var o=r&&f(e,r);function f(e,t){var r=t.endpoint,a=t.encoder;return new Batch(a,createHttpRequest(e,r,e.batchBytesLimit,n),createFlushController({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:i,sessionExpireObservable:s}),e.messageBytesLimit)}return{flushObservable:a.flushController.flushObservable,add:function(e,t){if(t===void 0){t=true}a.add(e);if(o&&t){o.add(r.transformMessage?r.transformMessage(e):e)}},upsert:function(e,t){a.upsert(e,t);if(o){o.upsert(r.transformMessage?r.transformMessage(e):e,t)}},stop:function(){a.stop();o===null||o===void 0?void 0:o.stop()}}}function createIdentityEncoder(){var e="";var t=0;return{isAsync:false,get isEmpty(){return!e},write:function(r,n){var i=computeBytesCount(r);t+=i;e+=r;if(n){n(i)}},finish:function(e){e(this.finishSync())},finishSync:function(){var r={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};e="";t=0;return r},estimateEncodedBytesCount:function(e){return e.length}}}var AbstractLifeCycle=function(){function e(){this.callbacks={}}e.prototype.notify=function(e,t){var r=this.callbacks[e];if(r){r.forEach((function(e){return e(t)}))}};e.prototype.subscribe=function(e,t){var r=this;if(!this.callbacks[e]){this.callbacks[e]=[]}this.callbacks[e].push(t);return{unsubscribe:function(){r.callbacks[e]=r.callbacks[e].filter((function(e){return t!==e}))}}};return e}();function createEventRateLimiter(e,t,r){var n=0;var i=false;return{isLimitReached:function(){if(n===0){setTimeout$1((function(){n=0}),ONE_MINUTE)}n+=1;if(n<=t||i){i=false;return false}if(n===t+1){i=true;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:ErrorSource.AGENT,startClocks:clocksNow()})}finally{i=false}}return true}}}function runOnReadyState(e,t,r){if(document.readyState===t||document.readyState==="complete"){r()}else{var n=t==="complete"?DOM_EVENT.LOAD:DOM_EVENT.DOM_CONTENT_LOADED;addEventListener$1(e,window,n,r,{once:true})}}var xhrObservable;var xhrContexts=new WeakMap;function initXhrObservable(e){if(!xhrObservable){xhrObservable=createXhrObservable(e)}return xhrObservable}function createXhrObservable(e){var t=new Observable((function(){var r=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"open",{before:openXhr}).stop;var n=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"send",{before:function(){sendXhr.call(this,e,t)}}).stop;var i=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"abort",{before:abortXhr}).stop;return function(){r();n();i()}}));return t}function openXhr(e,t){xhrContexts.set(this,{state:"open",method:e.toUpperCase(),url:normalizeUrl(String(t))})}function sendXhr(e,t){var r=this;var n=xhrContexts.get(this);if(!n){return}var i=n;i.state="start";i.startClocks=clocksNow();i.isAborted=false;i.xhr=this;var s=false;var a=instrumentMethodAndCallOriginal(this,"onreadystatechange",{before:function(){if(this.readyState===XMLHttpRequest.DONE){o()}}}).stop;var o=function(){f();a();if(s){return}s=true;var e=n;e.state="complete";e.duration=elapsed(i.startClocks.timeStamp,timeStampNow());e.status=r.status;t.notify(shallowClone(e))};var f=addEventListener$1(e,this,"loadend",o).stop;t.notify(i)}function abortXhr(){var e=xhrContexts.get(this);if(e){e.isAborted=true}}var fetchObservable;function initFetchObservable(){if(!fetchObservable){fetchObservable=createFetchObservable()}return fetchObservable}function createFetchObservable(){var e=new Observable((function(){if(!window.fetch){return}var t=instrumentMethod(window,"fetch",(function(t){return function(r,n){var i;var s=callMonitored(beforeSend,null,[e,r,n]);if(s){i=t.call(this,s.input,s.init);callMonitored(afterSend,null,[e,i,s])}else{i=t.call(this,r,n)}return i}})).stop;return t}));return e}function beforeSend(e,t,r){var n=r&&r.method||t instanceof Request&&t.method;var i=n?n.toUpperCase():"GET";var s=t instanceof Request?t.url:normalizeUrl(String(t));var a=clocksNow();var o={state:"start",init:r,input:t,method:i,startClocks:a,url:s};e.notify(o);return o}function afterSend(e,t,r){var n=function(t){var n=r;n.state="resolve";if("stack"in t||t instanceof Error){n.status=0;n.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR;n.error=t}else if("status"in t){n.response=t;n.responseType=t.type;n.status=t.status;n.isAborted=false}e.notify(n)};t.then(monitor(n),monitor(n))}var consoleObservablesByApi={};function initConsoleObservable(e){var t=e.map((function(e){if(!consoleObservablesByApi[e]){consoleObservablesByApi[e]=createConsoleObservable(e)}return consoleObservablesByApi[e]}));return mergeObservables.apply(void 0,t)}function createConsoleObservable(e){var t=new Observable((function(){var r=globalConsole[e];globalConsole[e]=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}r.apply(console,n);var s=createHandlingStack();callMonitored((function(){t.notify(buildConsoleLog(n,e,s))}))};return function(){globalConsole[e]=r}}));return t}function buildConsoleLog(e,t,r){var n=e.map((function(e){return formatConsoleParameters(e)})).join(" ");var i;var s;if(t===ConsoleApiName.error){var a=find(e,(function(e){return e instanceof Error}));i=a?toStackTraceString(computeStackTrace(a)):undefined;s=tryToGetFingerprint(a)}return{api:t,message:n,stack:i,handlingStack:r,fingerprint:s}}function formatConsoleParameters(e){if(typeof e==="string"){return sanitize(e)}if(e instanceof Error){return formatErrorMessage(computeStackTrace(e))}return jsonStringify(sanitize(e),undefined,2)}var BUFFER_LIMIT=500;var BoundedBuffer=function(){function e(){this.buffer=[]}e.prototype.add=function(e){var t=this.buffer.push(e);if(t>BUFFER_LIMIT){this.buffer.splice(0,1)}};e.prototype.drain=function(){this.buffer.forEach((function(e){return e()}));this.buffer.length=0};return e}();var _a$z;var CUSTOMER_DATA_BYTES_LIMIT=3*ONE_KIBI_BYTE;var CustomerDataLabel=(_a$z={},_a$z[0]="feature flag evaluation",_a$z[1]="user",_a$z[2]="global context",_a$z[3]="logger context",_a$z);function warnIfCustomerDataLimitReached(e,t){if(e>CUSTOMER_DATA_BYTES_LIMIT){display.warn("The ".concat(CustomerDataLabel[t]," data exceeds the recommended ").concat(CUSTOMER_DATA_BYTES_LIMIT/ONE_KIBI_BYTE,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning"));return true}return false}var BYTES_COMPUTATION_THROTTLING_DELAY$1=200;function createContextManager(e,t){if(t===void 0){t=computeBytesCount}var r={};var n;var i=false;var s=new Observable;var a=throttle((function(r){n=t(jsonStringify(r));if(!i){i=warnIfCustomerDataLimitReached(n,e)}}),BYTES_COMPUTATION_THROTTLING_DELAY$1).throttled;var o={getBytesCount:function(){return n},getContext:function(){return deepClone(r)},setContext:function(e){if(getType(e)==="object"){r=sanitize(e);a(r)}else{o.clearContext()}s.notify()},setContextProperty:function(e,t){r[e]=sanitize(t);a(r);s.notify()},removeContextProperty:function(e){delete r[e];a(r);s.notify()},clearContext:function(){r={};n=0;s.notify()},changeObservable:s};return o}var CONTEXT_STORE_KEY_PREFIX="_dd_c";var storageListeners=[];function createStoredContextManager(e,t,r,n){if(n===void 0){n=computeBytesCount}var i=buildStorageKey(t,r);var s=createContextManager(r,n);a();storageListeners.push(addEventListener$1(e,window,DOM_EVENT.STORAGE,(function(e){var t=e.key;if(i===t){a()}})));s.changeObservable.subscribe(o);return s;function a(){var e=localStorage.getItem(i);var t=e!==null?JSON.parse(e):{};s.setContext(t)}function o(){localStorage.setItem(i,JSON.stringify(s.getContext()))}}function buildStorageKey(e,t){return"".concat(CONTEXT_STORE_KEY_PREFIX,"_").concat(e,"_").concat(t)}function readBytesFromStream(e,t,r){var n=e.getReader();var i=[];var s=0;a();function a(){n.read().then(monitor((function(e){if(e.done){o();return}if(r.collectStreamBody){i.push(e.value)}s+=e.value.length;if(s>r.bytesLimit){o()}else{a()}})),monitor((function(e){return t(e)})))}function o(){n.cancel().catch(noop$1);var e;var a;if(r.collectStreamBody){var o;if(i.length===1){o=i[0]}else{o=new Uint8Array(s);var f=0;i.forEach((function(e){o.set(e,f);f+=e.length}))}e=o.slice(0,r.bytesLimit);a=o.length>r.bytesLimit}t(undefined,e,a)}}var SYNTHETICS_TEST_ID_COOKIE_NAME="datadog-synthetics-public-id";var SYNTHETICS_RESULT_ID_COOKIE_NAME="datadog-synthetics-result-id";var SYNTHETICS_INJECTS_RUM_COOKIE_NAME="datadog-synthetics-injects-rum";function willSyntheticsInjectRum(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||getInitCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME))}function getSyntheticsTestId(){var e=window._DATADOG_SYNTHETICS_PUBLIC_ID||getInitCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);return typeof e==="string"?e:undefined}function getSyntheticsResultId(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||getInitCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);return typeof e==="string"?e:undefined}function sanitizeUser(e){var t=assign$3({},e);var r=["id","name","email"];r.forEach((function(e){if(e in t){t[e]=String(t[e])}}));return t}function checkUser(e){var t=getType(e)==="object";if(!t){display.error("Unsupported user:",e)}return t}function isMatchOption(e){var t=getType(e);return t==="string"||t==="function"||e instanceof RegExp}function matchList(e,t,r){if(r===void 0){r=false}return e.some((function(e){try{if(typeof e==="function"){return e(t)}else if(e instanceof RegExp){return e.test(t)}else if(typeof e==="string"){return r?startsWith(t,e):e===t}}catch(e){display.error(e)}return false}))}function isTracingOption(e){var t=e;return getType(t)==="object"&&isMatchOption(t.match)&&Array.isArray(t.propagatorTypes)}function clearTracingIfNeeded(e){if(e.status===0&&!e.isAborted){e.traceId=undefined;e.spanId=undefined;e.traceSampled=undefined}}function startTracer(e,t){return{clearTracingIfNeeded,traceFetch:function(r){return injectHeadersIfTracingAllowed(e,r,t,(function(e){var t;if(r.input instanceof Request&&!((t=r.init)===null||t===void 0?void 0:t.headers)){r.input=new Request(r.input);Object.keys(e).forEach((function(t){r.input.headers.append(t,e[t])}))}else{r.init=shallowClone(r.init);var n=[];if(r.init.headers instanceof Headers){r.init.headers.forEach((function(e,t){n.push([t,e])}))}else if(Array.isArray(r.init.headers)){r.init.headers.forEach((function(e){n.push(e)}))}else if(r.init.headers){Object.keys(r.init.headers).forEach((function(e){n.push([e,r.init.headers[e]])}))}r.init.headers=n.concat(objectEntries(e))}}))},traceXhr:function(r,n){return injectHeadersIfTracingAllowed(e,r,t,(function(e){Object.keys(e).forEach((function(t){n.setRequestHeader(t,e[t])}))}))}}}function injectHeadersIfTracingAllowed(e,t,r,n){if(!isTracingSupported()||!r.findTrackedSession()){return}var i=find(e.allowedTracingUrls,(function(e){return matchList([e.match],t.url,true)}));if(!i){return}t.traceId=new TraceIdentifier;t.spanId=new TraceIdentifier;t.traceSampled=!isNumber(e.traceSampleRate)||performDraw(e.traceSampleRate);n(makeTracingHeaders(t.traceId,t.spanId,t.traceSampled,i.propagatorTypes))}function isTracingSupported(){return getCrypto$1()!==undefined}function getCrypto$1(){return window.crypto||window.msCrypto}function makeTracingHeaders(e,t,r,n){var i={};n.forEach((function(n){switch(n){case"datadog":{assign$3(i,{"x-datadog-origin":"rum","x-datadog-parent-id":t.toDecimalString(),"x-datadog-sampling-priority":r?"1":"0","x-datadog-trace-id":e.toDecimalString()});break}case"tracecontext":{assign$3(i,{traceparent:"00-0000000000000000".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-0").concat(r?"1":"0")});break}case"b3":{assign$3(i,{b3:"".concat(e.toPaddedHexadecimalString(),"-").concat(t.toPaddedHexadecimalString(),"-").concat(r?"1":"0")});break}case"b3multi":{assign$3(i,{"X-B3-TraceId":e.toPaddedHexadecimalString(),"X-B3-SpanId":t.toPaddedHexadecimalString(),"X-B3-Sampled":r?"1":"0"});break}}}));return i}var TraceIdentifier=function(){function e(){this.buffer=new Uint8Array(8);getCrypto$1().getRandomValues(this.buffer);this.buffer[0]=this.buffer[0]&127}e.prototype.toString=function(e){var t=this.readInt32(0);var r=this.readInt32(4);var n="";do{var i=t%e*4294967296+r;t=Math.floor(t/e);r=Math.floor(i/e);n=(i%e).toString(e)+n}while(t||r);return n};e.prototype.toDecimalString=function(){return this.toString(10)};e.prototype.toPaddedHexadecimalString=function(){var e=this.toString(16);return Array(17-e.length).join("0")+e};e.prototype.readInt32=function(e){return this.buffer[e]*16777216+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]};return e}();var DEFAULT_PROPAGATOR_TYPES=["tracecontext","datadog"];function validateAndBuildRumConfiguration(e){var t,r;if(!e.applicationId){display.error("Application ID is not configured, no RUM data will be collected.");return}if(e.sessionReplaySampleRate!==undefined&&!isPercentage(e.sessionReplaySampleRate)){display.error("Session Replay Sample Rate should be a number between 0 and 100");return}if(e.traceSampleRate!==undefined&&!isPercentage(e.traceSampleRate)){display.error("Trace Sample Rate should be a number between 0 and 100");return}if(e.excludedActivityUrls!==undefined&&!Array.isArray(e.excludedActivityUrls)){display.error("Excluded Activity Urls should be an array");return}var n=validateAndBuildTracingOptions(e);if(!n){return}var i=validateAndBuildConfiguration(e);if(!i){return}return assign$3({applicationId:e.applicationId,version:e.version,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:(t=e.sessionReplaySampleRate)!==null&&t!==void 0?t:0,startSessionReplayRecordingManually:!!e.startSessionReplayRecordingManually,traceSampleRate:e.traceSampleRate,allowedTracingUrls:n,excludedActivityUrls:(r=e.excludedActivityUrls)!==null&&r!==void 0?r:[],workerUrl:e.workerUrl,compressIntakeRequests:!!e.compressIntakeRequests,trackUserInteractions:!!e.trackUserInteractions,trackViewsManually:!!e.trackViewsManually,trackResources:!!e.trackResources,trackLongTasks:!!e.trackLongTasks,subdomain:e.subdomain,defaultPrivacyLevel:objectHasValue(DefaultPrivacyLevel,e.defaultPrivacyLevel)?e.defaultPrivacyLevel:DefaultPrivacyLevel.MASK,customerDataTelemetrySampleRate:1},i)}function validateAndBuildTracingOptions(e){if(e.allowedTracingUrls!==undefined){if(!Array.isArray(e.allowedTracingUrls)){display.error("Allowed Tracing URLs should be an array");return}if(e.allowedTracingUrls.length!==0&&e.service===undefined){display.error("Service needs to be configured when tracing is enabled");return}var t=[];e.allowedTracingUrls.forEach((function(e){if(isMatchOption(e)){t.push({match:e,propagatorTypes:DEFAULT_PROPAGATOR_TYPES})}else if(isTracingOption(e)){t.push(e)}else{display.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",e)}}));return t}return[]}function getSelectedTracingPropagators(e){var t=new Set;if(Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0){e.allowedTracingUrls.forEach((function(e){if(isMatchOption(e)){DEFAULT_PROPAGATOR_TYPES.forEach((function(e){return t.add(e)}))}else if(getType(e)==="object"&&Array.isArray(e.propagatorTypes)){e.propagatorTypes.forEach((function(e){return t.add(e)}))}}))}return arrayFrom(t)}function serializeRumConfiguration(e){var t=serializeConfiguration(e);return assign$3({session_replay_sample_rate:e.sessionReplaySampleRate,start_session_replay_recording_manually:e.startSessionReplayRecordingManually,trace_sample_rate:e.traceSampleRate,action_name_attribute:e.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(e.allowedTracingUrls)&&e.allowedTracingUrls.length>0,selected_tracing_propagators:getSelectedTracingPropagators(e),default_privacy_level:e.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(e.excludedActivityUrls)&&e.excludedActivityUrls.length>0,use_worker_url:!!e.workerUrl,compress_intake_requests:e.compressIntakeRequests,track_views_manually:e.trackViewsManually,track_user_interactions:e.trackUserInteractions,track_resources:e.trackResources,track_long_task:e.trackLongTasks},t)}function buildCommonContext(e,t,r){return{context:e.getContext(),user:t.getContext(),hasReplay:r.isRecording()?true:undefined}}var RUM_STORAGE_KEY="rum";function makeRumPublicApi(e,t,r){var n=r===void 0?{}:r,i=n.ignoreInitIfSyntheticsWillInjectRum,s=i===void 0?true:i,a=n.startDeflateWorker,o=n.createDeflateEncoder;var f=false;var c=createContextManager(2);var u=createContextManager(1);var l=function(){return undefined};var h=function(){return undefined};var d=noop$1;var p=function(){return undefined};var y=new BoundedBuffer;var m=function(e,t){if(t===void 0){t=timeStampNow()}y.add((function(){return m(e,t)}))};var g=function(e,t){if(t===void 0){t=clocksNow()}y.add((function(){return g(e,t)}))};var b=function(e,r){if(r===void 0){r=buildCommonContext(c,u,t)}y.add((function(){return b(e,r)}))};var v=function(e,r){if(r===void 0){r=buildCommonContext(c,u,t)}y.add((function(){return v(e,r)}))};var w=function(){y.add((function(){return w()}))};var A=function(){y.add((function(){return A()}))};var E=function(e,t){y.add((function(){return E(e,t)}))};var _;function S(e){if(!e){display.error("Missing configuration");return}h=function(){return deepClone(e)};if(s&&willSyntheticsInjectRum()){return}var t=canUseEventBridge();if(t){e=x(e)}if(!P(e)){return}var r=validateAndBuildRumConfiguration(e);if(!r){return}if(!t&&!r.sessionStoreStrategyType){display.warn("No storage available for session. We will not send any data.");return}if(r.compressIntakeRequests&&!t&&a){_=a(r,"Datadog RUM",noop$1);if(!_){return}}if(!r.trackViewsManually){$(e,r)}else{var n=y;y=new BoundedBuffer;g=function(t){$(e,r,t)};n.drain()}f=true}function $(r,n,i){if(r.storeContextsAcrossPages){var s=c.getContext();c=createStoredContextManager(n,RUM_STORAGE_KEY,2);c.setContext(combine(c.getContext(),s));var a=u.getContext();u=createStoredContextManager(n,RUM_STORAGE_KEY,1);u.setContext(combine(u.getContext(),a))}var f=e(r,n,t,c,u,i,_&&o?function(e){return o(n,_,e)}:createIdentityEncoder);p=function(){return t.getSessionReplayLink(n,f.session,f.viewContexts)};w=t.start;A=t.stop;g=f.startView,b=f.addAction,v=f.addError,m=f.addTiming,E=f.addFeatureFlagEvaluation,l=f.getInternalContext,d=f.stopSession;t.onRumStart(f.lifeCycle,n,f.session,f.viewContexts,_);y.drain()}var T=monitor((function(e){var t=typeof e==="object"?e:{name:e};g(t)}));var C=makePublicApi({init:monitor(S),setGlobalContextProperty:monitor((function(e,t){return c.setContextProperty(e,t)})),removeGlobalContextProperty:monitor((function(e){return c.removeContextProperty(e)})),getGlobalContext:monitor((function(){return c.getContext()})),setGlobalContext:monitor((function(e){return c.setContext(e)})),clearGlobalContext:monitor((function(){return c.clearContext()})),getInternalContext:monitor((function(e){return l(e)})),getInitConfiguration:monitor((function(){return h()})),addAction:monitor((function(e,t){b({name:sanitize(e),context:sanitize(t),startClocks:clocksNow(),type:"custom"})})),addError:function(e,t){var r=createHandlingStack();callMonitored((function(){v({error:e,handlingStack:r,context:sanitize(t),startClocks:clocksNow()})}))},addTiming:monitor((function(e,t){m(sanitize(e),t)})),setUser:monitor((function(e){if(checkUser(e)){u.setContext(sanitizeUser(e))}})),getUser:monitor((function(){return u.getContext()})),setUserProperty:monitor((function(e,t){var r;var n=sanitizeUser((r={},r[e]=t,r))[e];u.setContextProperty(e,n)})),removeUserProperty:monitor((function(e){return u.removeContextProperty(e)})),clearUser:monitor((function(){return u.clearContext()})),startView:T,stopSession:monitor((function(){d()})),startSessionReplayRecording:monitor((function(){return w()})),stopSessionReplayRecording:monitor((function(){return A()})),addFeatureFlagEvaluation:monitor((function(e,t){E(sanitize(e),sanitize(t))})),getSessionReplayLink:monitor((function(){return p()}))});return C;function P(e){if(f){if(!e.silentMultipleInit){display.error("DD_RUM is already initialized.")}return false}return true}function x(e){return assign$3({},e,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}}function createDOMMutationObservable(){var e=getMutationObserverConstructor();var t=new Observable((function(){if(!e){return}var r=new e(monitor((function(){return t.notify()})));r.observe(document,{attributes:true,characterData:true,childList:true,subtree:true});return function(){return r.disconnect()}}));return t}function getMutationObserverConstructor(){var e;var t=window;if(t.Zone){e=getZoneJsOriginalValue(t,"MutationObserver");if(t.MutationObserver&&e===t.MutationObserver){var r=new t.MutationObserver(noop$1);var n=getZoneJsOriginalValue(r,"originalInstance");e=n&&n.constructor}}if(!e){e=t.MutationObserver}return e}var FAKE_INITIAL_DOCUMENT="initial_document";var RESOURCE_TYPES=[["document",function(e){return FAKE_INITIAL_DOCUMENT===e}],["xhr",function(e){return"xmlhttprequest"===e}],["fetch",function(e){return"fetch"===e}],["beacon",function(e){return"beacon"===e}],["css",function(e,t){return/\.css$/i.test(t)}],["js",function(e,t){return/\.js$/i.test(t)}],["image",function(e,t){return includes(["image","img","icon"],e)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(t)!==null}],["font",function(e,t){return/\.(woff|eot|woff2|ttf)$/i.exec(t)!==null}],["media",function(e,t){return includes(["audio","video"],e)||/\.(mp3|mp4)$/i.exec(t)!==null}]];function computeResourceKind(e){var t=e.name;if(!isValidUrl(t)){addTelemetryDebug('Failed to construct URL for "'.concat(e.name,'"'));return"other"}var r=getPathName(t);for(var n=0,i=RESOURCE_TYPES;n<i.length;n++){var s=i[n],a=s[0],o=s[1];if(o(e.initiatorType,r)){return a}}return"other"}function areInOrder(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}for(var r=1;r<e.length;r+=1){if(e[r-1]>e[r]){return false}}return true}function isRequestKind(e){return e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch"}function computePerformanceResourceDuration(e){var t=e.duration,r=e.startTime,n=e.responseEnd;if(t===0&&r<n){return toServerDuration(elapsed(r,n))}return toServerDuration(t)}function computePerformanceResourceDetails(e){var t=toValidEntry(e);if(!t){return undefined}var r=t.startTime,n=t.fetchStart,i=t.redirectStart,s=t.redirectEnd,a=t.domainLookupStart,o=t.domainLookupEnd,f=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,l=t.requestStart,h=t.responseStart,d=t.responseEnd;var p={download:formatTiming(r,h,d),first_byte:formatTiming(r,l,h)};if(u!==n){p.connect=formatTiming(r,f,u);if(areInOrder(f,c,u)){p.ssl=formatTiming(r,c,u)}}if(o!==n){p.dns=formatTiming(r,a,o)}if(hasRedirection(e)){p.redirect=formatTiming(r,i,s)}return p}function toValidEntry(e){if(!areInOrder(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){return undefined}if(!hasRedirection(e)){return e}var t=e.redirectStart,r=e.redirectEnd;if(t<e.startTime){t=e.startTime}if(r<e.startTime){r=e.fetchStart}if(!areInOrder(e.startTime,t,r,e.fetchStart)){return undefined}return assign$3({},e,{redirectEnd:r,redirectStart:t})}function hasRedirection(e){return e.fetchStart!==e.startTime}function formatTiming(e,t,r){return{duration:toServerDuration(elapsed(t,r)),start:toServerDuration(elapsed(e,t))}}function computeSize(e){if(e.startTime<e.responseStart){return e.decodedBodySize}return undefined}function isAllowedRequestUrl(e,t){return t&&!e.isIntakeUrl(t)}function isTextNode(e){return e.nodeType===Node.TEXT_NODE}function isCommentNode(e){return e.nodeType===Node.COMMENT_NODE}function isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}function isNodeShadowHost(e){return isElementNode(e)&&Boolean(e.shadowRoot)}function isNodeShadowRoot(e){var t=e;return!!t.host&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&isElementNode(t.host)}function hasChildNodes(e){return e.childNodes.length>0||isNodeShadowHost(e)}function forEachChildNodes(e,t){e.childNodes.forEach(t);if(isNodeShadowHost(e)){t(e.shadowRoot)}}function getParentNode(e){return isNodeShadowRoot(e)?e.host:e.parentNode}var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD=2*ONE_MINUTE;function getDocumentTraceId(e){var t=getDocumentTraceDataFromMeta(e)||getDocumentTraceDataFromComment(e);if(!t||t.traceTime<=dateNow()-INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD){return undefined}return t.traceId}function getDocumentTraceDataFromMeta(e){var t=e.querySelector("meta[name=dd-trace-id]");var r=e.querySelector("meta[name=dd-trace-time]");return createDocumentTraceData(t&&t.content,r&&r.content)}function getDocumentTraceDataFromComment(e){var t=findTraceComment(e);if(!t){return undefined}return createDocumentTraceData(findCommaSeparatedValue(t,"trace-id"),findCommaSeparatedValue(t,"trace-time"))}function createDocumentTraceData(e,t){var r=t&&Number(t);if(!e||!r){return undefined}return{traceId:e,traceTime:r}}function findTraceComment(e){for(var t=0;t<e.childNodes.length;t+=1){var r=getTraceCommentFromNode(e.childNodes[t]);if(r){return r}}if(e.body){for(var t=e.body.childNodes.length-1;t>=0;t-=1){var n=e.body.childNodes[t];var r=getTraceCommentFromNode(n);if(r){return r}if(!isTextNode(n)){break}}}}function getTraceCommentFromNode(e){if(e&&isCommentNode(e)){var t=/^\s*DATADOG;(.*?)\s*$/.exec(e.data);if(t){return t[1]}}}var RumPerformanceEntryType;(function(e){e["EVENT"]="event";e["FIRST_INPUT"]="first-input";e["LARGEST_CONTENTFUL_PAINT"]="largest-contentful-paint";e["LAYOUT_SHIFT"]="layout-shift";e["LONG_TASK"]="longtask";e["NAVIGATION"]="navigation";e["PAINT"]="paint";e["RESOURCE"]="resource"})(RumPerformanceEntryType||(RumPerformanceEntryType={}));function supportPerformanceObject(){return window.performance!==undefined&&"getEntries"in performance}function supportPerformanceTimingEvent(e){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==undefined&&PerformanceObserver.supportedEntryTypes.includes(e)}function startPerformanceCollection(e,t){retrieveInitialDocumentResourceTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}));if(supportPerformanceObject()){var r=performance.getEntries();setTimeout$1((function(){return handleRumPerformanceEntries(e,t,r)}))}if(window.PerformanceObserver){var n=monitor((function(r){return handleRumPerformanceEntries(e,t,r.getEntries())}));var i=[RumPerformanceEntryType.RESOURCE,RumPerformanceEntryType.NAVIGATION,RumPerformanceEntryType.LONG_TASK,RumPerformanceEntryType.PAINT];var s=[RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT,RumPerformanceEntryType.FIRST_INPUT,RumPerformanceEntryType.LAYOUT_SHIFT,RumPerformanceEntryType.EVENT];try{s.forEach((function(e){var t=new window.PerformanceObserver(n);t.observe({type:e,buffered:true,durationThreshold:40})}))}catch(e){i.push.apply(i,s)}var a=new PerformanceObserver(n);a.observe({entryTypes:i});if(supportPerformanceObject()&&"addEventListener"in performance){addEventListener$1(t,performance,"resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}}if(!supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)){retrieveNavigationTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}))}if(!supportPerformanceTimingEvent(RumPerformanceEntryType.FIRST_INPUT)){retrieveFirstInputTiming(t,(function(r){handleRumPerformanceEntries(e,t,[r])}))}}function retrieveInitialDocumentResourceTiming(e,t){runOnReadyState(e,"interactive",(function(){var e;var r={entryType:RumPerformanceEntryType.RESOURCE,initiatorType:FAKE_INITIAL_DOCUMENT,traceId:getDocumentTraceId(document),toJSON:function(){return assign$3({},e,{toJSON:undefined})}};if(supportPerformanceTimingEvent(RumPerformanceEntryType.NAVIGATION)&&performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION).length>0){var n=performance.getEntriesByType(RumPerformanceEntryType.NAVIGATION)[0];e=assign$3(n.toJSON(),r)}else{var i=computeRelativePerformanceTiming();e=assign$3(i,{decodedBodySize:0,duration:i.responseEnd,name:window.location.href,startTime:0},r)}t(e)}))}function retrieveNavigationTiming(e,t){function r(){t(assign$3(computeRelativePerformanceTiming(),{entryType:RumPerformanceEntryType.NAVIGATION}))}runOnReadyState(e,"complete",(function(){setTimeout$1(r)}))}function retrieveFirstInputTiming(e,t){var r=dateNow();var n=false;var i=addEventListeners(e,window,[DOM_EVENT.CLICK,DOM_EVENT.MOUSE_DOWN,DOM_EVENT.KEY_DOWN,DOM_EVENT.TOUCH_START,DOM_EVENT.POINTER_DOWN],(function(t){if(!t.cancelable){return}var r={entryType:RumPerformanceEntryType.FIRST_INPUT,processingStart:relativeNow(),processingEnd:relativeNow(),startTime:t.timeStamp,duration:0,name:""};if(t.type===DOM_EVENT.POINTER_DOWN){s(e,r)}else{a(r)}}),{passive:true,capture:true}).stop;function s(e,t){addEventListeners(e,window,[DOM_EVENT.POINTER_UP,DOM_EVENT.POINTER_CANCEL],(function(e){if(e.type===DOM_EVENT.POINTER_UP){a(t)}}),{once:true})}function a(e){if(!n){n=true;i();var s=e.processingStart-e.startTime;if(s>=0&&s<dateNow()-r){t(e)}}}}function computeRelativePerformanceTiming(){var e={};var t=performance.timing;for(var r in t){if(isNumber(t[r])){var n=r;var i=t[n];e[n]=i===0?0:getRelativeTime(i)}}return e}function handleRumPerformanceEntries(e,t,r){var n=r.filter((function(e){return objectHasValue(RumPerformanceEntryType,e.entryType)}));var i=n.filter((function(e){return!isIncompleteNavigation(e)&&!isForbiddenResource(t,e)}));if(i.length){e.notify(0,i)}}function isIncompleteNavigation(e){return e.entryType===RumPerformanceEntryType.NAVIGATION&&e.loadEventEnd<=0}function isForbiddenResource(e,t){return t.entryType===RumPerformanceEntryType.RESOURCE&&!isAllowedRequestUrl(e,t.name)}function getSyntheticsContext(){var e=getSyntheticsTestId();var t=getSyntheticsResultId();if(e&&t){return{test_id:e,result_id:t,injected:willSyntheticsInjectRum()}}}function getCiTestContext(){var e;var t=(e=window.Cypress)===null||e===void 0?void 0:e.env("traceId");if(typeof t==="string"){return{test_execution_id:t}}}function limitModification(e,t,r){var n=deepClone(e);var i=r(n);objectEntries(t).forEach((function(t){var r=t[0],i=t[1];var s=get$1(n,r);var a=getType(s);if(a===i){set(e,r,sanitize(s))}else if(i==="object"&&(a==="undefined"||a==="null")){set(e,r,{})}}));return i}function get$1(e,t){var r=e;for(var n=0,i=t.split(".");n<i.length;n++){var s=i[n];if(!isValidObjectContaining(r,s)){return}r=r[s]}return r}function set(e,t,r){var n=e;var i=t.split(".");for(var s=0;s<i.length;s+=1){var a=i[s];if(!isValidObject(n)){return}if(s!==i.length-1){n=n[a]}else{n[a]=r}}}function isValidObject(e){return getType(e)==="object"}function isValidObjectContaining(e,t){return isValidObject(e)&&Object.prototype.hasOwnProperty.call(e,t)}var VIEW_MODIFIABLE_FIELD_PATHS={"view.name":"string","view.url":"string","view.referrer":"string"};var USER_CUSTOMIZABLE_FIELD_PATHS={context:"object"};var modifiableFieldPathsByEvent;function startRumAssembly(e,t,r,n,i,s,a,o,f){var c,u;modifiableFieldPathsByEvent=(c={},c["view"]=VIEW_MODIFIABLE_FIELD_PATHS,c["error"]=assign$3({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["resource"]=assign$3({"resource.url":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["action"]=assign$3({"action.target.name":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c["long_task"]=assign$3({},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),c);var l=(u={},u["error"]=createEventRateLimiter("error",e.eventRateLimiterThreshold,f),u["action"]=createEventRateLimiter("action",e.eventRateLimiterThreshold,f),u);var h=getSyntheticsContext();var d=getCiTestContext();t.subscribe(10,(function(f){var c=f.startTime,u=f.rawRumEvent,p=f.domainContext,y=f.savedCommonContext,m=f.customerContext;var g=n.findView(c);var b=i.findUrl(c);var v=r.findTrackedSession(c);if(v&&g&&b){var w=y||o();var A=s.findActionId(c);var E={_dd:{format_version:2,drift:currentDrift(),configuration:{session_sample_rate:round(e.sessionSampleRate,3),session_replay_sample_rate:round(e.sessionReplaySampleRate,3)},browser_sdk_version:canUseEventBridge()?"5.6.0":undefined},application:{id:e.applicationId},date:timeStampNow(),service:g.service||e.service,version:g.version||e.version,source:"browser",session:{id:v.id,type:h?"synthetics":d?"ci_test":"user"},view:{id:g.id,name:g.name,url:b.url,referrer:b.referrer},action:needToAssembleWithAction(u)&&A?{id:A}:undefined,synthetics:h,ci_test:d,display:a.get()};var _=combine(E,u);_.context=combine(w.context,m);if(!("has_replay"in _.session)){_.session.has_replay=w.hasReplay}if(_.type==="view"){_.session.sampled_for_replay=v.sessionReplayAllowed}if(!isEmptyObject(w.user)){_.usr=w.user}if(shouldSend(_,e.beforeSend,p,l)){if(isEmptyObject(_.context)){delete _.context}t.notify(11,_)}}}))}function shouldSend(e,t,r,n){var i;if(t){var s=limitModification(e,modifiableFieldPathsByEvent[e.type],(function(e){return t(e,r)}));if(s===false&&e.type!=="view"){return false}if(s===false){display.warn("Can't dismiss view events using beforeSend!")}}var a=(i=n[e.type])===null||i===void 0?void 0:i.isLimitReached();return!a}function needToAssembleWithAction(e){return["error","resource","long_task"].indexOf(e.type)!==-1}function startInternalContext(e,t,r,n,i){return{get:function(s){var a=r.findView(s);var o=i.findUrl(s);var f=t.findTrackedSession(s);if(f&&a&&o){var c=n.findActionId(s);return{application_id:e,session_id:f.id,user_action:c?{id:c}:undefined,view:{id:a.id,name:a.name,referrer:o.referrer,url:o.url}}}}}}var LifeCycle=AbstractLifeCycle;var VIEW_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startViewContexts(e){var t=new ValueHistory(VIEW_CONTEXT_TIME_OUT_DELAY);e.subscribe(2,(function(e){t.add(r(e),e.startClocks.relative)}));e.subscribe(4,(function(e){var r=e.endClocks;t.closeActive(r.relative)}));e.subscribe(8,(function(){t.reset()}));function r(e){return{service:e.service,version:e.version,id:e.id,name:e.name,startClocks:e.startClocks}}return{findView:function(e){return t.find(e)},stop:function(){t.stop()}}}var nextRequestIndex=1;function startRequestCollection(e,t,r){var n=startTracer(t,r);trackXhr(e,t,n);trackFetch(e,t,n)}function trackXhr(e,t,r){var n=initXhrObservable(t).subscribe((function(n){var i=n;if(!isAllowedRequestUrl(t,i.url)){return}switch(i.state){case"start":r.traceXhr(i,i.xhr);i.requestIndex=getNextRequestIndex();e.notify(5,{requestIndex:i.requestIndex,url:i.url});break;case"complete":r.clearTracingIfNeeded(i);e.notify(6,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"xhr",url:i.url,xhr:i.xhr});break}}));return{stop:function(){return n.unsubscribe()}}}function trackFetch(e,t,r){var n=initFetchObservable().subscribe((function(n){var i=n;if(!isAllowedRequestUrl(t,i.url)){return}switch(i.state){case"start":r.traceFetch(i);i.requestIndex=getNextRequestIndex();e.notify(5,{requestIndex:i.requestIndex,url:i.url});break;case"resolve":waitForResponseToComplete(i,(function(t){r.clearTracingIfNeeded(i);e.notify(6,{duration:t,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:"fetch",url:i.url,response:i.response,init:i.init,input:i.input})}));break}}));return{stop:function(){return n.unsubscribe()}}}function getNextRequestIndex(){var e=nextRequestIndex;nextRequestIndex+=1;return e}function waitForResponseToComplete(e,t){var r=e.response&&tryToClone(e.response);if(!r||!r.body){t(elapsed(e.startClocks.timeStamp,timeStampNow()))}else{readBytesFromStream(r.body,(function(){t(elapsed(e.startClocks.timeStamp,timeStampNow()))}),{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:false})}}function trackEventCounts(e){var t=e.lifeCycle,r=e.isChildEvent,n=e.onChange,i=n===void 0?noop$1:n;var s={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0};var a=t.subscribe(11,(function(e){var t;if(e.type==="view"||!r(e)){return}switch(e.type){case"error":s.errorCount+=1;i();break;case"action":s.actionCount+=1;if(e.action.frustration){s.frustrationCount+=e.action.frustration.type.length}i();break;case"long_task":s.longTaskCount+=1;i();break;case"resource":if(!((t=e._dd)===null||t===void 0?void 0:t.discarded)){s.resourceCount+=1;i()}break}}));return{stop:function(){a.unsubscribe()},eventCounts:s}}var PAGE_ACTIVITY_VALIDATION_DELAY=100;var PAGE_ACTIVITY_END_DELAY=100;function waitPageActivityEnd(e,t,r,n,i){var s=createPageActivityObservable(e,t,r);return doWaitPageActivityEnd(s,n,i)}function doWaitPageActivityEnd(e,t,r){var n;var i=false;var s=setTimeout$1(monitor((function(){return c({hadActivity:false})})),PAGE_ACTIVITY_VALIDATION_DELAY);var a=r!==undefined?setTimeout$1(monitor((function(){return c({hadActivity:true,end:timeStampNow()})})),r):undefined;var o=e.subscribe((function(e){var t=e.isBusy;clearTimeout$1(s);clearTimeout$1(n);var r=timeStampNow();if(!t){n=setTimeout$1(monitor((function(){return c({hadActivity:true,end:r})})),PAGE_ACTIVITY_END_DELAY)}}));var f=function(){i=true;clearTimeout$1(s);clearTimeout$1(n);clearTimeout$1(a);o.unsubscribe()};function c(e){if(i){return}f();t(e)}return{stop:f}}function createPageActivityObservable(e,t,r){var n=new Observable((function(){var i=[];var s;var a=0;i.push(t.subscribe(f),e.subscribe(0,(function(e){if(e.some((function(e){return e.entryType===RumPerformanceEntryType.RESOURCE&&!isExcludedUrl(r,e.name)}))){f()}})),e.subscribe(5,(function(e){if(isExcludedUrl(r,e.url)){return}if(s===undefined){s=e.requestIndex}a+=1;f()})),e.subscribe(6,(function(e){if(isExcludedUrl(r,e.url)||s===undefined||e.requestIndex<s){return}a-=1;f()})));var o=trackWindowOpen(f).stop;return function(){o();i.forEach((function(e){return e.unsubscribe()}))};function f(){n.notify({isBusy:a>0})}}));return n}function isExcludedUrl(e,t){return matchList(e.excludedActivityUrls,t)}function trackWindowOpen(e){return instrumentMethodAndCallOriginal(window,"open",{before:e})}var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE="data-dd-action-name";function getActionNameFromElement(e,t){return getActionNameFromElementProgrammatically(e,DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE)||t&&getActionNameFromElementProgrammatically(e,t)||getActionNameFromElementForStrategies(e,t,priorityStrategies)||getActionNameFromElementForStrategies(e,t,fallbackStrategies)||""}function getActionNameFromElementProgrammatically(e,t){var r;if(supportsElementClosest()){r=e.closest("[".concat(t,"]"))}else{var n=e;while(n){if(n.hasAttribute(t)){r=n;break}n=n.parentElement}}if(!r){return}var i=r.getAttribute(t);return truncate(normalizeWhitespace(i.trim()))}var priorityStrategies=[function(e,t){if(supportsLabelProperty()){if("labels"in e&&e.labels&&e.labels.length>0){return getTextualContent(e.labels[0],t)}}else if(e.id){var r=e.ownerDocument&&find(e.ownerDocument.querySelectorAll("label"),(function(t){return t.htmlFor===e.id}));return r&&getTextualContent(r,t)}},function(e){if(e.nodeName==="INPUT"){var t=e;var r=t.getAttribute("type");if(r==="button"||r==="submit"||r==="reset"){return t.value}}},function(e,t){if(e.nodeName==="BUTTON"||e.nodeName==="LABEL"||e.getAttribute("role")==="button"){return getTextualContent(e,t)}},function(e){return e.getAttribute("aria-label")},function(e,t){var r=e.getAttribute("aria-labelledby");if(r){return r.split(/\s+/).map((function(t){return getElementById(e,t)})).filter((function(e){return Boolean(e)})).map((function(e){return getTextualContent(e,t)})).join(" ")}},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e,t){if("options"in e&&e.options.length>0){return getTextualContent(e.options[0],t)}}];var fallbackStrategies=[function(e,t){return getTextualContent(e,t)}];var MAX_PARENTS_TO_CONSIDER=10;function getActionNameFromElementForStrategies(e,t,r){var n=e;var i=0;while(i<=MAX_PARENTS_TO_CONSIDER&&n&&n.nodeName!=="BODY"&&n.nodeName!=="HTML"&&n.nodeName!=="HEAD"){for(var s=0,a=r;s<a.length;s++){var o=a[s];var f=o(n,t);if(typeof f==="string"){var c=f.trim();if(c){return truncate(normalizeWhitespace(c))}}}if(n.nodeName==="FORM"){break}n=n.parentElement;i+=1}}function normalizeWhitespace(e){return e.replace(/\s+/g," ")}function truncate(e){return e.length>100?"".concat(safeTruncate(e,100)," [...]"):e}function getElementById(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}function getTextualContent(e,t){if(e.isContentEditable){return}if("innerText"in e){var r=e.innerText;var n=function(t){var n=e.querySelectorAll(t);for(var i=0;i<n.length;i+=1){var s=n[i];if("innerText"in s){var a=s.innerText;if(a&&a.trim().length>0){r=r.replace(a,"")}}}};if(!supportsInnerTextScriptAndStyleRemoval()){n("script, style")}n("[".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"]"));if(t){n("[".concat(t,"]"))}return r}return e.textContent}function supportsInnerTextScriptAndStyleRemoval(){return!isIE()}var supportsLabelPropertyResult;function supportsLabelProperty(){if(supportsLabelPropertyResult===undefined){supportsLabelPropertyResult="labels"in HTMLInputElement.prototype}return supportsLabelPropertyResult}var supportsElementClosestResult;function supportsElementClosest(){if(supportsElementClosestResult===undefined){supportsElementClosestResult="closest"in HTMLElement.prototype}return supportsElementClosestResult}var STABLE_ATTRIBUTES=[DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"];var GLOBALLY_UNIQUE_SELECTOR_GETTERS=[getStableAttributeSelector,getIDSelector];var UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS=[getStableAttributeSelector,getClassSelector,getTagNameSelector];function getSelectorFromElement(e,t){var r="";var n=e;while(n&&n.nodeName!=="HTML"){var i=findSelector(n,GLOBALLY_UNIQUE_SELECTOR_GETTERS,isSelectorUniqueGlobally,t,r);if(i){return i}var s=findSelector(n,UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS,isSelectorUniqueAmongSiblings,t,r);r=s||combineSelector(getPositionSelector(n),r);n=n.parentElement}return r}function isGeneratedValue(e){return/[0-9]/.test(e)}function getIDSelector(e){if(e.id&&!isGeneratedValue(e.id)){return"#".concat(cssEscape(e.id))}}function getClassSelector(e){if(e.tagName==="BODY"){return}if(e.classList.length>0){for(var t=0;t<e.classList.length;t+=1){var r=e.classList[t];if(isGeneratedValue(r)){continue}return"".concat(cssEscape(e.tagName),".").concat(cssEscape(r))}}}function getTagNameSelector(e){return cssEscape(e.tagName)}function getStableAttributeSelector(e,t){if(t){var r=a(t);if(r){return r}}for(var n=0,i=STABLE_ATTRIBUTES;n<i.length;n++){var s=i[n];var r=a(s);if(r){return r}}function a(t){if(e.hasAttribute(t)){return"".concat(cssEscape(e.tagName),"[").concat(t,'="').concat(cssEscape(e.getAttribute(t)),'"]')}}}function getPositionSelector(e){var t=e.parentElement.firstElementChild;var r=1;while(t&&t!==e){if(t.tagName===e.tagName){r+=1}t=t.nextElementSibling}return"".concat(cssEscape(e.tagName),":nth-of-type(").concat(r,")")}function findSelector(e,t,r,n,i){for(var s=0,a=t;s<a.length;s++){var o=a[s];var f=o(e,n);if(!f){continue}var c=combineSelector(f,i);if(r(e,c)){return c}}}function isSelectorUniqueGlobally(e,t){return e.ownerDocument.querySelectorAll(t).length===1}function isSelectorUniqueAmongSiblings(e,t){return e.parentElement.querySelectorAll(supportScopeSelector()?combineSelector(":scope",t):t).length===1}function combineSelector(e,t){return t?"".concat(e,">").concat(t):e}var supportScopeSelectorCache;function supportScopeSelector(){if(supportScopeSelectorCache===undefined){try{document.querySelector(":scope");supportScopeSelectorCache=true}catch(e){supportScopeSelectorCache=false}}return supportScopeSelectorCache}var MAX_DURATION_BETWEEN_CLICKS=ONE_SECOND;var MAX_DISTANCE_BETWEEN_CLICKS=100;function createClickChain(e,t){var r=[];var n=0;var i;s(e);function s(e){e.stopObservable.subscribe(a);r.push(e);clearTimeout$1(i);i=setTimeout$1(o,MAX_DURATION_BETWEEN_CLICKS)}function a(){if(n===1&&r.every((function(e){return e.isStopped()}))){n=2;t(r)}}function o(){clearTimeout$1(i);if(n===0){n=1;a()}}return{tryAppend:function(e){if(n!==0){return false}if(r.length>0&&!areEventsSimilar(r[r.length-1].event,e.event)){o();return false}s(e);return true},stop:function(){o()}}}function areEventsSimilar(e,t){return e.target===t.target&&mouseEventDistance(e,t)<=MAX_DISTANCE_BETWEEN_CLICKS&&e.timeStamp-t.timeStamp<=MAX_DURATION_BETWEEN_CLICKS}function mouseEventDistance(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))}function listenActionEvents(e,t){var r=t.onPointerDown,n=t.onPointerUp;var i;var s={selection:false,input:false};var a;var o=[addEventListener$1(e,window,DOM_EVENT.POINTER_DOWN,(function(e){if(isValidPointerEvent(e)){i=isSelectionEmpty();s={selection:false,input:false};a=r(e)}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.SELECTION_CHANGE,(function(){if(!i||!isSelectionEmpty()){s.selection=true}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.POINTER_UP,(function(e){if(isValidPointerEvent(e)&&a){var t=s;n(a,e,(function(){return t}));a=undefined}}),{capture:true}),addEventListener$1(e,window,DOM_EVENT.INPUT,(function(){s.input=true}),{capture:true})];return{stop:function(){o.forEach((function(e){return e.stop()}))}}}function isSelectionEmpty(){var e=window.getSelection();return!e||e.isCollapsed}function isValidPointerEvent(e){return e.target instanceof Element&&e.isPrimary!==false}var MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE=3;function computeFrustration(e,t){if(isRage(e)){t.addFrustration("rage_click");if(e.some(isDead)){t.addFrustration("dead_click")}if(t.hasError){t.addFrustration("error_click")}return{isRage:true}}var r=e.some((function(e){return e.getUserActivity().selection}));e.forEach((function(e){if(e.hasError){e.addFrustration("error_click")}if(isDead(e)&&!r){e.addFrustration("dead_click")}}));return{isRage:false}}function isRage(e){if(e.some((function(e){return e.getUserActivity().selection}))){return false}for(var t=0;t<e.length-(MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1);t+=1){if(e[t+MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1].event.timeStamp-e[t].event.timeStamp<=ONE_SECOND){return true}}return false}var DEAD_CLICK_EXCLUDE_SELECTOR='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),'+"textarea,"+"select,"+"[contenteditable],"+"[contenteditable] *,"+"canvas,"+"a[href],"+"a[href] *";function isDead(e){if(e.hasPageActivity||e.getUserActivity().input){return false}return!elementMatches(e.event.target,DEAD_CLICK_EXCLUDE_SELECTOR)}var CLICK_ACTION_MAX_DURATION=10*ONE_SECOND;var ACTION_CONTEXT_TIME_OUT_DELAY=5*ONE_MINUTE;function trackClickActions(e,t,r){var n=new ValueHistory(ACTION_CONTEXT_TIME_OUT_DELAY);var i=new Observable;var s;e.subscribe(8,(function(){n.reset()}));e.subscribe(4,c);var a=listenActionEvents(r,{onPointerDown:function(n){return processPointerDown(r,e,t,n)},onPointerUp:function(s,a,o){var c=s.clickActionBase,u=s.hadActivityOnPointerDown;return startClickAction(r,e,t,n,i,f,c,a,o,u)}}).stop;var o={findActionId:function(e){return n.findAll(e)}};return{stop:function(){c();i.notify();a()},actionContexts:o};function f(e){if(!s||!s.tryAppend(e)){var t=e.clone();s=createClickChain(e,(function(e){finalizeClicks(e,t)}))}}function c(){if(s){s.stop()}}}function processPointerDown(e,t,r,n){var i=computeClickActionBase(n,e.actionNameAttribute);var s=false;waitPageActivityEnd(t,r,e,(function(e){s=e.hadActivity}),PAGE_ACTIVITY_VALIDATION_DELAY);return{clickActionBase:i,hadActivityOnPointerDown:function(){return s}}}function startClickAction(e,t,r,n,i,s,a,o,f,c){var u=newClick(t,n,f,a,o);s(u);var l=waitPageActivityEnd(t,r,e,(function(e){if(e.hadActivity&&e.end<u.startClocks.timeStamp){u.discard()}else{if(e.hadActivity){u.stop(e.end)}else if(c()){u.stop(u.startClocks.timeStamp)}else{u.stop()}}}),CLICK_ACTION_MAX_DURATION).stop;var h=t.subscribe(4,(function(e){var t=e.endClocks;u.stop(t.timeStamp)}));var d=i.subscribe((function(){u.stop()}));u.stopObservable.subscribe((function(){h.unsubscribe();l();d.unsubscribe()}))}function computeClickActionBase(e,t){var r=e.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(r.width),height:Math.round(r.height),selector:getSelectorFromElement(e.target,t)},position:{x:Math.round(e.clientX-r.left),y:Math.round(e.clientY-r.top)},name:getActionNameFromElement(e.target,t)}}function newClick(e,t,r,n,i){var s=generateUUID();var a=clocksNow();var o=t.add(s,a.relative);var f=trackEventCounts({lifeCycle:e,isChildEvent:function(e){return e.action!==undefined&&(Array.isArray(e.action.id)?includes(e.action.id,s):e.action.id===s)}});var c=0;var u;var l=[];var h=new Observable;function d(e){if(c!==0){return}u=e;c=1;if(u){o.close(getRelativeTime(u))}else{o.remove()}f.stop();h.notify()}return{event:i,stop:d,stopObservable:h,get hasError(){return f.eventCounts.errorCount>0},get hasPageActivity(){return u!==undefined},getUserActivity:r,addFrustration:function(e){l.push(e)},startClocks:a,isStopped:function(){return c===1||c===2},clone:function(){return newClick(e,t,r,n,i)},validate:function(t){d();if(c!==1){return}var r=f.eventCounts,o=r.resourceCount,h=r.errorCount,p=r.longTaskCount;var y=assign$3({type:"click",duration:u&&elapsed(a.timeStamp,u),startClocks:a,id:s,frustrationTypes:l,counts:{resourceCount:o,errorCount:h,longTaskCount:p},events:t!==null&&t!==void 0?t:[i],event:i},n);e.notify(1,y);c=2},discard:function(){d();c=2}}}function finalizeClicks(e,t){var r=computeFrustration(e,t).isRage;if(r){e.forEach((function(e){return e.discard()}));t.stop(timeStampNow());t.validate(e.map((function(e){return e.event})))}else{t.discard();e.forEach((function(e){return e.validate()}))}}function startActionCollection(e,t,r,n){e.subscribe(1,(function(t){return e.notify(10,processAction(t,n))}));var i={findActionId:noop$1};if(r.trackUserInteractions){i=trackClickActions(e,t,r).actionContexts}return{addAction:function(t,r){e.notify(10,assign$3({savedCommonContext:r},processAction(t,n)))},actionContexts:i}}function processAction(e,t){var r=isAutoAction(e)?{action:{id:e.id,loading_time:toServerDuration(e.duration),frustration:{type:e.frustrationTypes},error:{count:e.counts.errorCount},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:undefined;var n=!isAutoAction(e)?e.context:undefined;var i=combine({action:{id:generateUUID(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:"action",view:{in_foreground:t.isInActivePageStateAt(e.startClocks.relative)}},r);return{customerContext:n,rawRumEvent:i,startTime:e.startClocks.relative,domainContext:isAutoAction(e)?{events:e.events}:{}}}function isAutoAction(e){return e.type!=="custom"}function trackConsoleError(e){var t=initConsoleObservable([ConsoleApiName.error]).subscribe((function(t){return e.notify({startClocks:clocksNow(),message:t.message,stack:t.stack,fingerprint:t.fingerprint,source:ErrorSource.CONSOLE,handling:"handled",handlingStack:t.handlingStack})}));return{stop:function(){t.unsubscribe()}}}function trackReportError(e,t){var r=initReportObservable(e,[RawReportType.cspViolation,RawReportType.intervention]).subscribe((function(e){return t.notify({startClocks:clocksNow(),message:e.message,stack:e.stack,type:e.subtype,source:ErrorSource.REPORT,handling:"unhandled",originalError:e.originalReport})}));return{stop:function(){r.unsubscribe()}}}function startErrorCollection(e,t,r,n){var i=new Observable;trackConsoleError(i);trackRuntimeError(i);trackReportError(t,i);i.subscribe((function(t){return e.notify(12,{error:t})}));return doStartErrorCollection(e,r,n)}function doStartErrorCollection(e,t,r){e.subscribe(12,(function(n){var i=n.error,s=n.customerContext,a=n.savedCommonContext;e.notify(10,assign$3({customerContext:s,savedCommonContext:a},processError(i,t,r)))}));return{addError:function(t,r){var n=t.error,i=t.handlingStack,s=t.startClocks,a=t.context;var o=n instanceof Error?computeStackTrace(n):undefined;var f=computeRawError({stackTrace:o,originalError:n,handlingStack:i,startClocks:s,nonErrorPrefix:"Provided",source:ErrorSource.CUSTOM,handling:"handled"});e.notify(12,{customerContext:a,savedCommonContext:r,error:f})}}}function processError(e,t,r){var n={date:e.startClocks.timeStamp,error:{id:generateUUID(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser",fingerprint:e.fingerprint},type:"error",view:{in_foreground:t.isInActivePageStateAt(e.startClocks.relative)}};var i=r.findFeatureFlagEvaluations(e.startClocks.relative);if(i&&!isEmptyObject(i)){n.feature_flags=i}return{rawRumEvent:n,startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}function startLongTaskCollection(e,t,r){e.subscribe(0,(function(n){for(var i=0,s=n;i<s.length;i++){var a=s[i];if(a.entryType!==RumPerformanceEntryType.LONG_TASK){break}var o=r.findTrackedSession(a.startTime);if(!o||!t.trackLongTasks){break}var f=relativeToClocks(a.startTime);var c={date:f.timeStamp,long_task:{id:generateUUID(),duration:toServerDuration(a.duration)},type:"long_task",_dd:{discarded:false}};e.notify(10,{rawRumEvent:c,startTime:f.relative,domainContext:{performanceEntry:a}})}}))}function matchRequestTiming(e){if(!performance||!("getEntriesByName"in performance)){return}var t=performance.getEntriesByName(e.url,"resource");if(!t.length||!("toJSON"in t[0])){return}var r=t.map((function(e){return e.toJSON()})).filter(toValidEntry).filter((function(t){return isBetween(t,e.startClocks.relative,endTime({startTime:e.startClocks.relative,duration:e.duration}))}));if(r.length===1){return r[0]}return}function endTime(e){return addDuration(e.startTime,e.duration)}function isBetween(e,t,r){var n=1;return e.startTime>=t-n&&endTime(e)<=addDuration(r,n)}function startResourceCollection(e,t,r,n){e.subscribe(6,(function(i){var s=processRequest(i,t,r,n);if(s){e.notify(10,s)}}));e.subscribe(0,(function(i){for(var s=0,a=i;s<a.length;s++){var o=a[s];if(o.entryType===RumPerformanceEntryType.RESOURCE&&!isRequestKind(o)){var f=processResourceEntry(o,t,r,n);if(f){e.notify(10,f)}}}}))}function processRequest(e,t,r,n){var i;var s=matchRequestTiming(e);var a=s?relativeToClocks(s.startTime):e.startClocks;var o=shouldIndexResource(t,r,a);var f=computeRequestTracingInfo(e,t);if(!o&&!f){return}var c=e.type==="xhr"?"xhr":"fetch";var u=s?computePerformanceEntryMetrics(s):undefined;var l=computeRequestDuration(n,a,e.duration);var h=computePageStateInfo(n,a,(i=s===null||s===void 0?void 0:s.duration)!==null&&i!==void 0?i:e.duration);var d=combine({date:a.timeStamp,resource:{id:generateUUID(),type:c,duration:l,method:e.method,status_code:e.status,url:e.url},type:"resource",_dd:{discarded:!o}},f,u,h);return{startTime:a.relative,rawRumEvent:d,domainContext:{performanceEntry:s,xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error}}}function processResourceEntry(e,t,r,n){var i=relativeToClocks(e.startTime);var s=shouldIndexResource(t,r,i);var a=computeEntryTracingInfo(e,t);if(!s&&!a){return}var o=computeResourceKind(e);var f=computePerformanceEntryMetrics(e);var c=computePageStateInfo(n,i,e.duration);var u=combine({date:i.timeStamp,resource:{id:generateUUID(),type:o,url:e.name},type:"resource",_dd:{discarded:!s}},a,f,c);return{startTime:i.relative,rawRumEvent:u,domainContext:{performanceEntry:e}}}function shouldIndexResource(e,t,r){return e.trackResources&&t.findTrackedSession(r.relative)}function computePerformanceEntryMetrics(e){return{resource:assign$3({duration:computePerformanceResourceDuration(e),size:computeSize(e)},computePerformanceResourceDetails(e))}}function computeRequestTracingInfo(e,t){var r=e.traceSampled&&e.traceId&&e.spanId;if(!r){return undefined}return{_dd:{span_id:e.spanId.toDecimalString(),trace_id:e.traceId.toDecimalString(),rule_psr:getRulePsr(t)}}}function computeEntryTracingInfo(e,t){var r=e.traceId;if(!r){return undefined}return{_dd:{trace_id:e.traceId,rule_psr:getRulePsr(t)}}}function getRulePsr(e){return isNumber(e.traceSampleRate)?e.traceSampleRate/100:undefined}function computePageStateInfo(e,t,r){if(!isExperimentalFeatureEnabled(ExperimentalFeature.RESOURCE_PAGE_STATES)){return}return{_dd:{page_states:e.findAll(t.relative,r),page_was_discarded:String(document.wasDiscarded)}}}function computeRequestDuration(e,t,r){var n;var i=(n=e.findAll(t.relative,r))===null||n===void 0?void 0:n.some((function(e){return e.state==="frozen"}));return!i?toServerDuration(r):undefined}function trackViewEventCounts(e,t,r){var n=trackEventCounts({lifeCycle:e,isChildEvent:function(e){return e.view.id===t},onChange:r}),i=n.stop,s=n.eventCounts;return{stop:i,eventCounts:s}}var FCP_MAXIMUM_DELAY=10*ONE_MINUTE;function trackFirstContentfulPaint(e,t,r){var n=e.subscribe(0,(function(e){var n=find(e,(function(e){return e.entryType===RumPerformanceEntryType.PAINT&&e.name==="first-contentful-paint"&&e.startTime<t.timeStamp&&e.startTime<FCP_MAXIMUM_DELAY}));if(n){r(n.startTime)}})).unsubscribe;return{stop:n}}function trackFirstInput(e,t,r,n){var i=e.subscribe(0,(function(e){var i=find(e,(function(e){return e.entryType===RumPerformanceEntryType.FIRST_INPUT&&e.startTime<r.timeStamp}));if(i){var s=elapsed(i.startTime,i.processingStart);var a=void 0;if(i.target&&isElementNode(i.target)){a=getSelectorFromElement(i.target,t.actionNameAttribute)}n({delay:s>=0?s:0,time:i.startTime,targetSelector:a})}})).unsubscribe;return{stop:i}}function trackNavigationTimings(e,t){var r=e.subscribe(0,(function(e){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.entryType===RumPerformanceEntryType.NAVIGATION){t({domComplete:i.domComplete,domContentLoaded:i.domContentLoadedEventEnd,domInteractive:i.domInteractive,loadEvent:i.loadEventEnd,firstByte:i.responseStart>=0&&i.responseStart<=relativeNow()?i.responseStart:undefined})}}})).unsubscribe;return{stop:r}}var LCP_MAXIMUM_DELAY=10*ONE_MINUTE;var wrongLcpReported=false;var previousLcp;function trackLargestContentfulPaint(e,t,r,n,i){var s=Infinity;var a=addEventListeners(t,n,[DOM_EVENT.POINTER_DOWN,DOM_EVENT.KEY_DOWN],(function(e){s=e.timeStamp}),{capture:true,once:true}).stop;var o=e.subscribe(0,(function(e){var n=findLast(e,(function(e){return e.entryType===RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT&&e.startTime<s&&e.startTime<r.timeStamp&&e.startTime<LCP_MAXIMUM_DELAY}));if(n){var a=void 0;if(n.element){a=getSelectorFromElement(n.element,t.actionNameAttribute)}if(isExperimentalFeatureEnabled(ExperimentalFeature.ZERO_LCP_TELEMETRY)){monitorLcpEntries(n,e.filter((function(e){return e.entryType===RumPerformanceEntryType.LARGEST_CONTENTFUL_PAINT})))}i({value:n.startTime,targetSelector:a})}})).unsubscribe;return{stop:function(){a();o()}}}function monitorLcpEntries(e,t){if(wrongLcpReported){return}var r=e.startTime===0?"LCP with startTime = 0":previousLcp!==undefined&&e.startTime<previousLcp.startTime?"LCP with startTime < previous LCP":previousLcp!==undefined&&e.size<previousLcp.size?"LCP with size < previous LCP":undefined;if(r){wrongLcpReported=true;addTelemetryDebug(r,{debug:{entry:toSerializableLCP(e),previousLcp,timeOrigin:performance.timeOrigin,now:relativeNow(),lcpEntries:t.map(toSerializableLCP)}})}previousLcp=toSerializableLCP(e)}function toSerializableLCP(e){var t=e.toJSON();delete t.element;return t}function trackFirstHidden(e,t){if(t===void 0){t=window}var r;var n;if(document.visibilityState==="hidden"){r=0}else{r=Infinity;n=addEventListeners(e,t,[DOM_EVENT.PAGE_HIDE,DOM_EVENT.VISIBILITY_CHANGE],(function(e){if(e.type===DOM_EVENT.PAGE_HIDE||document.visibilityState==="hidden"){r=e.timeStamp;n()}}),{capture:true}).stop}return{get timeStamp(){return r},stop:function(){n===null||n===void 0?void 0:n()}}}function trackInitialViewMetrics(e,t,r,n){var i={};var s=trackNavigationTimings(e,(function(e){r(e.loadEvent);i.navigationTimings=e;n()})).stop;var a=trackFirstHidden(t);var o=trackFirstContentfulPaint(e,a,(function(e){i.firstContentfulPaint=e;n()})).stop;var f=trackLargestContentfulPaint(e,t,a,window,(function(e){i.largestContentfulPaint=e;n()})).stop;var c=trackFirstInput(e,t,a,(function(e){i.firstInput=e;n()})).stop;function u(){s();o();f();c();a.stop()}return{stop:u,initialViewMetrics:i}}function trackCumulativeLayoutShift(e,t,r){if(!isLayoutShiftSupported()){return{stop:noop$1}}var n=0;r({value:0});var i=slidingSessionWindow();var s=t.subscribe(0,(function(t){for(var s=0,a=t;s<a.length;s++){var o=a[s];if(o.entryType===RumPerformanceEntryType.LAYOUT_SHIFT&&!o.hadRecentInput){i.update(o);if(i.value()>n){n=i.value();var f=round(n,4);var c=i.largestLayoutShiftTarget();var u=void 0;if(c&&c.isConnected){u=getSelectorFromElement(c,e.actionNameAttribute)}r({value:f,targetSelector:u})}}}})).unsubscribe;return{stop:s}}function slidingSessionWindow(){var e=0;var t;var r;var n=0;var i;var s;return{update:function(a){var o,f;var c=t===undefined||a.startTime-r>=ONE_SECOND||a.startTime-t>=5*ONE_SECOND;if(c){t=r=a.startTime;e=a.value;n=0;i=undefined}else{e+=a.value;r=a.startTime}if(a.value>n){n=a.value;s=a.startTime;if((o=a.sources)===null||o===void 0?void 0:o.length){i=(f=find(a.sources,(function(e){return!!e.node&&isElementNode(e.node)})))===null||f===void 0?void 0:f.node}else{i=undefined}}},value:function(){return e},largestLayoutShiftTarget:function(){return i},largestLayoutShiftTime:function(){return s}}}function isLayoutShiftSupported(){return supportPerformanceTimingEvent(RumPerformanceEntryType.LAYOUT_SHIFT)}var observer;var interactionCountEstimate=0;var minKnownInteractionId=Infinity;var maxKnownInteractionId=0;function initInteractionCountPolyfill(){if("interactionCount"in performance||observer){return}observer=new window.PerformanceObserver(monitor((function(e){e.getEntries().forEach((function(e){var t=e;if(t.interactionId){minKnownInteractionId=Math.min(minKnownInteractionId,t.interactionId);maxKnownInteractionId=Math.max(maxKnownInteractionId,t.interactionId);interactionCountEstimate=(maxKnownInteractionId-minKnownInteractionId)/7+1}}))})));observer.observe({type:"event",buffered:true,durationThreshold:0})}var getInteractionCount=function(){return observer?interactionCountEstimate:window.performance.interactionCount||0};var MAX_INTERACTION_ENTRIES=10;var MAX_INP_VALUE=1*ONE_MINUTE;function trackInteractionToNextPaint(e,t,r,n){if(!isInteractionToNextPaintSupported()){return{getInteractionToNextPaint:function(){return undefined},setViewEnd:noop$1,stop:noop$1}}var i=trackViewInteractionCount(r),s=i.getViewInteractionCount,a=i.stopViewInteractionCount;var o=Infinity;var f=trackLongestInteractions(s);var c=-1;var u;var l=n.subscribe(0,(function(r){for(var n=0,i=r;n<i.length;n++){var s=i[n];if((s.entryType===RumPerformanceEntryType.EVENT||s.entryType===RumPerformanceEntryType.FIRST_INPUT)&&s.interactionId&&s.startTime>=t&&s.startTime<=o){f.process(s)}}var a=f.estimateP98Interaction();if(a){c=a.duration;if(a.target&&isElementNode(a.target)){u=getSelectorFromElement(a.target,e.actionNameAttribute)}else{u=undefined}}})).unsubscribe;return{getInteractionToNextPaint:function(){if(c>=0){return{value:Math.min(c,MAX_INP_VALUE),targetSelector:u}}else if(s()){return{value:0}}},setViewEnd:function(e){o=e;a()},stop:l}}function trackLongestInteractions(e){var t=[];function r(){t.sort((function(e,t){return t.duration-e.duration})).splice(MAX_INTERACTION_ENTRIES)}return{process:function(e){var n=t.findIndex((function(t){return e.interactionId===t.interactionId}));var i=t[t.length-1];if(n!==-1){if(e.duration>t[n].duration){t[n]=e;r()}}else if(t.length<MAX_INTERACTION_ENTRIES||e.duration>i.duration){t.push(e);r()}},estimateP98Interaction:function(){var r=Math.min(t.length-1,Math.floor(e()/50));return t[r]}}}function trackViewInteractionCount(e){initInteractionCountPolyfill();var t=e==="initial_load"?0:getInteractionCount();var r={stopped:false};function n(){return getInteractionCount()-t}return{getViewInteractionCount:function(){if(r.stopped){return r.interactionCount}return n()},stopViewInteractionCount:function(){r={stopped:true,interactionCount:n()}}}}function isInteractionToNextPaintSupported(){return supportPerformanceTimingEvent(RumPerformanceEntryType.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function trackLoadingTime(e,t,r,n,i,s){var a=n==="initial_load";var o=true;var f=[];function c(){if(!o&&!a&&f.length>0){s(Math.max.apply(Math,f))}}var u=waitPageActivityEnd(e,t,r,(function(e){if(o){o=false;if(e.hadActivity){f.push(elapsed(i.timeStamp,e.end))}c()}})).stop;return{stop:u,setLoadEvent:function(e){if(a){a=false;f.push(e);c()}}}}function getScrollX(){var e;var t=window.visualViewport;if(t){e=t.pageLeft-t.offsetLeft}else if(window.scrollX!==undefined){e=window.scrollX}else{e=window.pageXOffset||0}return Math.round(e)}function getScrollY(){var e;var t=window.visualViewport;if(t){e=t.pageTop-t.offsetTop}else if(window.scrollY!==undefined){e=window.scrollY}else{e=window.pageYOffset||0}return Math.round(e)}var viewportObservable;function initViewportObservable(e){if(!viewportObservable){viewportObservable=createViewportObservable(e)}return viewportObservable}function createViewportObservable(e){var t=new Observable((function(){var r=throttle((function(){t.notify(getViewportDimension())}),200).throttled;return addEventListener$1(e,window,DOM_EVENT.RESIZE,r,{capture:true,passive:true}).stop}));return t}function getViewportDimension(){var e=window.visualViewport;if(e){return{width:Number(e.width*e.scale),height:Number(e.height*e.scale)}}return{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var THROTTLE_SCROLL_DURATION=ONE_SECOND;function trackScrollMetrics(e,t,r,n){if(n===void 0){n=createScrollValuesObservable(e)}var i=0;var s=0;var a=0;var o=n.subscribe((function(e){var n=e.scrollDepth,o=e.scrollTop,f=e.scrollHeight;var c=false;if(n>i){i=n;c=true}if(f>s){s=f;var u=relativeNow();a=elapsed(t.relative,u);c=true}if(c){r({maxDepth:Math.min(i,s),maxDepthScrollTop:o,maxScrollHeight:s,maxScrollHeightTime:a})}}));return{stop:function(){return o.unsubscribe()}}}function computeScrollValues(){var e=getScrollY();var t=getViewportDimension().height;var r=Math.round((document.scrollingElement||document.documentElement).scrollHeight);var n=Math.round(t+e);return{scrollHeight:r,scrollDepth:n,scrollTop:e}}function createScrollValuesObservable(e,t){if(t===void 0){t=THROTTLE_SCROLL_DURATION}var r=new Observable((function(){function n(){r.notify(computeScrollValues())}if(window.ResizeObserver){var i=throttle(n,t,{leading:false,trailing:true});var s=document.scrollingElement||document.documentElement;var a=new ResizeObserver(monitor(i.throttled));a.observe(s);var o=addEventListener$1(e,window,DOM_EVENT.SCROLL,i.throttled,{passive:true});return function(){i.cancel();a.unobserve(s);o.stop()}}}));return r}function trackCommonViewMetrics(e,t,r,n,i,s){var a={};var o=trackLoadingTime(e,t,r,i,s,(function(e){a.loadingTime=e;n()})),f=o.stop,c=o.setLoadEvent;var u=trackScrollMetrics(r,s,(function(e){a.scroll=e})).stop;var l=trackCumulativeLayoutShift(r,e,(function(e){a.cumulativeLayoutShift=e;n()})).stop;var h=trackInteractionToNextPaint(r,s.relative,i,e),d=h.stop,p=h.getInteractionToNextPaint,y=h.setViewEnd;return{stop:function(){f();l();u()},stopINPTracking:d,setLoadEvent:c,setViewEnd:y,getCommonViewMetrics:function(){a.interactionToNextPaint=p();return a}}}var THROTTLE_VIEW_UPDATE_PERIOD=3e3;var SESSION_KEEP_ALIVE_INTERVAL=5*ONE_MINUTE;var KEEP_TRACKING_AFTER_VIEW_DELAY=5*ONE_MINUTE;function trackViews(e,t,r,n,i,s,a){var o=new Set;var f=u("initial_load",clocksOrigin(),a);l();var c;if(s){c=h(i)}function u(i,s,a){var f=newView(t,r,n,e,i,s,a);o.add(f);f.stopObservable.subscribe((function(){o.delete(f)}));return f}function l(){t.subscribe(8,(function(){f=u("route_change",undefined,{name:f.name,service:f.service,version:f.version})}));t.subscribe(7,(function(){f.end({sessionIsActive:false})}));t.subscribe(9,(function(e){if(e.reason===PageExitReason.UNLOADING||e.reason===PageExitReason.PAGEHIDE){f.end()}}))}function h(e){return e.subscribe((function(e){var t=e.oldLocation,r=e.newLocation;if(areDifferentLocation(t,r)){f.end();f=u("route_change")}}))}return{addTiming:function(e,t){if(t===void 0){t=timeStampNow()}f.addTiming(e,t)},startView:function(e,t){f.end({endClocks:t});f=u("route_change",t,e)},stop:function(){c===null||c===void 0?void 0:c.unsubscribe();f.end();o.forEach((function(e){return e.stop()}))}}}function newView(e,t,r,n,i,s,a){if(s===void 0){s=clocksNow()}var o=generateUUID();var f=new Observable;var c={};var u=0;var l;var h=shallowClone(n);var d=true;var p;var y;var m;if(a){p=a.name;y=a.service;m=a.version}e.notify(2,{id:o,name:p,startClocks:s,service:y,version:m});var g=throttle(R,THROTTLE_VIEW_UPDATE_PERIOD,{leading:false}),b=g.throttled,v=g.cancel;var w=trackCommonViewMetrics(e,t,r,b,i,s),A=w.setLoadEvent,E=w.setViewEnd,_=w.stop,S=w.stopINPTracking,$=w.getCommonViewMetrics;var T=i==="initial_load"?trackInitialViewMetrics(e,r,A,b):{stop:noop$1,initialViewMetrics:{}},C=T.stop,P=T.initialViewMetrics;var x=trackViewEventCounts(e,o,b),I=x.stop,k=x.eventCounts;var N=setInterval$1(R,SESSION_KEEP_ALIVE_INTERVAL);R();function R(){v();u+=1;var t=l===undefined?timeStampNow():l.timeStamp;e.notify(3,{customTimings:c,documentVersion:u,id:o,name:p,service:y,version:m,loadingType:i,location:h,startClocks:s,commonViewMetrics:$(),initialViewMetrics:P,duration:elapsed(s.timeStamp,t),isActive:l===undefined,sessionIsActive:d,eventCounts:k})}return{name:p,service:y,version:m,stopObservable:f,end:function(t){var r=this;var n,i;if(t===void 0){t={}}if(l){return}l=(n=t.endClocks)!==null&&n!==void 0?n:clocksNow();d=(i=t.sessionIsActive)!==null&&i!==void 0?i:true;e.notify(4,{endClocks:l});clearInterval$1(N);E(l.relative);_();R();setTimeout$1((function(){r.stop()}),KEEP_TRACKING_AFTER_VIEW_DELAY)},stop:function(){C();I();S();f.notify()},addTiming:function(e,t){if(l){return}var r=looksLikeRelativeTime(t)?t:elapsed(s.timeStamp,t);c[sanitizeTiming(e)]=r;b()}}}function sanitizeTiming(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");if(t!==e){display.warn("Invalid timing name: ".concat(e,", sanitized to: ").concat(t))}return t}function areDifferentLocation(e,t){return e.pathname!==t.pathname||!isHashAnAnchor(t.hash)&&getPathFromHash(t.hash)!==getPathFromHash(e.hash)}function isHashAnAnchor(e){var t=e.substring(1);return t!==""&&!!document.getElementById(t)}function getPathFromHash(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function startViewCollection(e,t,r,n,i,s,a,o,f){e.subscribe(3,(function(r){return e.notify(10,processViewUpdate(r,t,s,o,a))}));return trackViews(r,e,n,t,i,!t.trackViewsManually,f)}function processViewUpdate(e,t,r,n,i){var s,a,o,f,c,u,l,h,d,p,y,m,g,b;var v=n.getReplayStats(e.id);var w=r.findFeatureFlagEvaluations(e.startClocks.relative);var A=i.findAll(e.startClocks.relative,e.duration);var E={_dd:{document_version:e.documentVersion,replay_stats:v,page_states:A,configuration:{start_session_replay_recording_manually:t.startSessionReplayRecordingManually}},date:e.startClocks.timeStamp,type:"view",view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:(s=e.commonViewMetrics.cumulativeLayoutShift)===null||s===void 0?void 0:s.value,cumulative_layout_shift_target_selector:(a=e.commonViewMetrics.cumulativeLayoutShift)===null||a===void 0?void 0:a.targetSelector,first_byte:toServerDuration((o=e.initialViewMetrics.navigationTimings)===null||o===void 0?void 0:o.firstByte),dom_complete:toServerDuration((f=e.initialViewMetrics.navigationTimings)===null||f===void 0?void 0:f.domComplete),dom_content_loaded:toServerDuration((c=e.initialViewMetrics.navigationTimings)===null||c===void 0?void 0:c.domContentLoaded),dom_interactive:toServerDuration((u=e.initialViewMetrics.navigationTimings)===null||u===void 0?void 0:u.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:toServerDuration(e.initialViewMetrics.firstContentfulPaint),first_input_delay:toServerDuration((l=e.initialViewMetrics.firstInput)===null||l===void 0?void 0:l.delay),first_input_time:toServerDuration((h=e.initialViewMetrics.firstInput)===null||h===void 0?void 0:h.time),first_input_target_selector:(d=e.initialViewMetrics.firstInput)===null||d===void 0?void 0:d.targetSelector,interaction_to_next_paint:toServerDuration((p=e.commonViewMetrics.interactionToNextPaint)===null||p===void 0?void 0:p.value),interaction_to_next_paint_target_selector:(y=e.commonViewMetrics.interactionToNextPaint)===null||y===void 0?void 0:y.targetSelector,is_active:e.isActive,name:e.name,largest_contentful_paint:toServerDuration((m=e.initialViewMetrics.largestContentfulPaint)===null||m===void 0?void 0:m.value),largest_contentful_paint_target_selector:(g=e.initialViewMetrics.largestContentfulPaint)===null||g===void 0?void 0:g.targetSelector,load_event:toServerDuration((b=e.initialViewMetrics.navigationTimings)===null||b===void 0?void 0:b.loadEvent),loading_time:discardNegativeDuration(toServerDuration(e.commonViewMetrics.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:toServerDuration(e.duration)},feature_flags:w&&!isEmptyObject(w)?w:undefined,display:e.commonViewMetrics.scroll?{scroll:{max_depth:e.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:e.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:e.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:toServerDuration(e.commonViewMetrics.scroll.maxScrollHeightTime)}}:undefined,session:{has_replay:v?true:undefined,is_active:e.sessionIsActive?undefined:false},privacy:{replay_level:t.defaultPrivacyLevel}};if(!isEmptyObject(e.customTimings)){E.view.custom_timings=mapValues(e.customTimings,toServerDuration)}return{rawRumEvent:E,startTime:e.startClocks.relative,domainContext:{location:e.location}}}function discardNegativeDuration(e){return isNumber(e)&&e<0?undefined:e}var RUM_SESSION_KEY="rum";function startRumSessionManager(e,t){var r=startSessionManager(e,RUM_SESSION_KEY,(function(t){return computeSessionState(e,t)}));r.expireObservable.subscribe((function(){t.notify(7)}));r.renewObservable.subscribe((function(){t.notify(8)}));return{findTrackedSession:function(e){var t=r.findActiveSession(e);if(!t||!isTypeTracked(t.trackingType)){return}return{id:t.id,sessionReplayAllowed:t.trackingType==="1"}},expire:r.expire,expireObservable:r.expireObservable}}function startRumSessionManagerStub(){var e={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplayAllowed:false};return{findTrackedSession:function(){return e},expire:noop$1,expireObservable:new Observable}}function computeSessionState(e,t){var r;if(hasValidRumSession(t)){r=t}else if(!performDraw(e.sessionSampleRate)){r="0"}else if(!performDraw(e.sessionReplaySampleRate)){r="2"}else{r="1"}return{trackingType:r,isTracked:isTypeTracked(r)}}function hasValidRumSession(e){return e==="0"||e==="1"||e==="2"}function isTypeTracked(e){return e==="2"||e==="1"}function startRumBatch(e,t,r,n,i,s,a){var o=e.replica;var f=startBatchWithReplica(e,{endpoint:e.rumEndpointBuilder,encoder:a(2)},o&&{endpoint:o.rumEndpointBuilder,transformMessage:function(e){return combine(e,{application:{id:o.applicationId}})},encoder:a(3)},n,i,s);t.subscribe(11,(function(e){if(e.type==="view"){f.upsert(e,e.view.id)}else{f.add(e)}}));r.subscribe((function(t){return f.add(t,isTelemetryReplicationAllowed(e))}));return f}function startRumEventBridge(e){var t=getEventBridge();e.subscribe(11,(function(e){t.send("rum",e)}))}var URL_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startUrlContexts(e,t,r){var n=new ValueHistory(URL_CONTEXT_TIME_OUT_DELAY);var i;e.subscribe(4,(function(e){var t=e.endClocks;n.closeActive(t.relative)}));e.subscribe(2,(function(e){var t=e.startClocks;var s=r.href;n.add(a({url:s,referrer:!i?document.referrer:i}),t.relative);i=s}));var s=t.subscribe((function(e){var t=e.newLocation;var r=n.find();if(r){var i=relativeNow();n.closeActive(i);n.add(a({url:t.href,referrer:r.referrer}),i)}}));function a(e){var t=e.url,r=e.referrer;return{url:t,referrer:r}}return{findUrl:function(e){return n.find(e)},stop:function(){s.unsubscribe();n.stop()}}}function createLocationChangeObservable(e,t){var r=shallowClone(t);var n=new Observable((function(){var t=trackHistory(e,i).stop;var r=trackHash(e,i).stop;return function(){t();r()}}));function i(){if(r.href===t.href){return}var e=shallowClone(t);n.notify({newLocation:e,oldLocation:r});r=e}return n}function trackHistory(e,t){var r=instrumentMethodAndCallOriginal(history,"pushState",{after:t}).stop;var n=instrumentMethodAndCallOriginal(history,"replaceState",{after:t}).stop;var i=addEventListener$1(e,window,DOM_EVENT.POP_STATE,t).stop;return{stop:function(){r();n();i()}}}function trackHash(e,t){return addEventListener$1(e,window,DOM_EVENT.HASH_CHANGE,t)}var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;var BYTES_COMPUTATION_THROTTLING_DELAY=200;function startFeatureFlagContexts(e,t){if(t===void 0){t=computeBytesCount}if(!isExperimentalFeatureEnabled(ExperimentalFeature.FEATURE_FLAGS)){return{findFeatureFlagEvaluations:function(){return undefined},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:noop$1,stop:noop$1}}var r=new ValueHistory(FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY);var n=0;var i=false;e.subscribe(4,(function(e){var t=e.endClocks;r.closeActive(t.relative)}));e.subscribe(2,(function(e){var t=e.startClocks;r.add({},t.relative);n=0}));var s=throttle((function(e){n=t(jsonStringify(e));if(!i){i=warnIfCustomerDataLimitReached(n,0)}}),BYTES_COMPUTATION_THROTTLING_DELAY),a=s.throttled,o=s.cancel;return{findFeatureFlagEvaluations:function(e){return r.find(e)},getFeatureFlagBytesCount:function(){var e=r.find();if(!e){return 0}return n},addFeatureFlagEvaluation:function(e,t){var n=r.find();if(n){n[e]=t;a(n)}},stop:o}}var MEASURES_PERIOD_DURATION=10*ONE_SECOND;var currentPeriodMeasures;var currentBatchMeasures;var batchHasRumEvent;function startCustomerDataTelemetry(e,t,r,n,i,s,a){var o=t.enabled&&performDraw(e.customerDataTelemetrySampleRate);if(!o){return}initCurrentPeriodMeasures();initCurrentBatchMeasures();r.subscribe(11,(function(e){batchHasRumEvent=true;updateMeasure(currentBatchMeasures.globalContextBytes,!isEmptyObject(n.getContext())?n.getBytesCount():0);updateMeasure(currentBatchMeasures.userContextBytes,!isEmptyObject(i.getContext())?i.getBytesCount():0);var t=s.findFeatureFlagEvaluations();var r=includes(["view","error"],e.type)&&t&&!isEmptyObject(t);updateMeasure(currentBatchMeasures.featureFlagBytes,r?s.getFeatureFlagBytesCount():0)}));a.subscribe((function(e){var t=e.bytesCount,r=e.messagesCount;if(!batchHasRumEvent){return}currentPeriodMeasures.batchCount+=1;updateMeasure(currentPeriodMeasures.batchBytesCount,t);updateMeasure(currentPeriodMeasures.batchMessagesCount,r);mergeMeasure(currentPeriodMeasures.globalContextBytes,currentBatchMeasures.globalContextBytes);mergeMeasure(currentPeriodMeasures.userContextBytes,currentBatchMeasures.userContextBytes);mergeMeasure(currentPeriodMeasures.featureFlagBytes,currentBatchMeasures.featureFlagBytes);initCurrentBatchMeasures()}));setInterval$1(sendCurrentPeriodMeasures,MEASURES_PERIOD_DURATION)}function sendCurrentPeriodMeasures(){if(currentPeriodMeasures.batchCount===0){return}addTelemetryDebug("Customer data measures",currentPeriodMeasures);initCurrentPeriodMeasures()}function createMeasure(){return{min:Infinity,max:0,sum:0}}function updateMeasure(e,t){e.sum+=t;e.min=Math.min(e.min,t);e.max=Math.max(e.max,t)}function mergeMeasure(e,t){e.sum+=t.sum;e.min=Math.min(e.min,t.min);e.max=Math.max(e.max,t.max)}function initCurrentPeriodMeasures(){currentPeriodMeasures={batchCount:0,batchBytesCount:createMeasure(),batchMessagesCount:createMeasure(),globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}function initCurrentBatchMeasures(){batchHasRumEvent=false;currentBatchMeasures={globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}var MAX_PAGE_STATE_ENTRIES=4e3;var MAX_PAGE_STATE_ENTRIES_SELECTABLE=500;var PAGE_STATE_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startPageStateHistory(e,t){if(t===void 0){t=MAX_PAGE_STATE_ENTRIES_SELECTABLE}var r=new ValueHistory(PAGE_STATE_CONTEXT_TIME_OUT_DELAY,MAX_PAGE_STATE_ENTRIES);var n;s(getPageState(),relativeNow());var i=addEventListeners(e,window,[DOM_EVENT.PAGE_SHOW,DOM_EVENT.FOCUS,DOM_EVENT.BLUR,DOM_EVENT.VISIBILITY_CHANGE,DOM_EVENT.RESUME,DOM_EVENT.FREEZE,DOM_EVENT.PAGE_HIDE],(function(e){s(computePageState(e),e.timeStamp)}),{capture:true}).stop;function s(e,t){if(t===void 0){t=relativeNow()}if(e===n){return}n=e;r.closeActive(t);r.add({state:n,startTime:t},t)}return{findAll:function(e,n){var i=r.findAll(e,n);if(i.length===0){return}var s=[];var a=Math.max(0,i.length-t);for(var o=i.length-1;o>=a;o--){var f=i[o];var c=elapsed(e,f.startTime);s.push({state:f.state,start:toServerDuration(c)})}return s},isInActivePageStateAt:function(e){var t=r.find(e);return t!==undefined&&t.state==="active"},addPageState:s,stop:function(){i();r.stop()}}}function computePageState(e){if(e.type===DOM_EVENT.FREEZE){return"frozen"}else if(e.type===DOM_EVENT.PAGE_HIDE){return e.persisted?"frozen":"terminated"}return getPageState()}function getPageState(){if(document.visibilityState==="hidden"){return"hidden"}if(document.hasFocus()){return"active"}return"passive"}function startDisplayContext(e){var t=getViewportDimension();var r=initViewportObservable(e).subscribe((function(e){t=e})).unsubscribe;return{get:function(){return{viewport:t}},stop:r}}function startRum(e,t,r,n,i,s,a){var o=[];var f=new LifeCycle;f.subscribe(11,(function(e){return sendToExtension("rum",e)}));var c=startRumTelemetry(t);c.setContextProvider((function(){var e,r;return{application:{id:t.applicationId},session:{id:(e=p.findTrackedSession())===null||e===void 0?void 0:e.id},view:{id:(r=v.findView())===null||r===void 0?void 0:r.id},action:{id:E.findActionId()}}}));var u=function(e){f.notify(12,{error:e});addTelemetryDebug("Error reported to customer",{"error.message":e.message})};var l=startFeatureFlagContexts(f);var h=createPageExitObservable(t);var d=h.subscribe((function(e){f.notify(9,e)}));o.push((function(){return d.unsubscribe()}));var p=!canUseEventBridge()?startRumSessionManager(t,f):startRumSessionManagerStub();if(!canUseEventBridge()){var y=startRumBatch(t,f,c.observable,u,h,p.expireObservable,a);o.push((function(){return y.stop()}));startCustomerDataTelemetry(t,c,f,n,i,l,y.flushObservable)}else{startRumEventBridge(f)}var m=createDOMMutationObservable();var g=createLocationChangeObservable(t,location);var b=startRumEventCollection(f,t,location,p,g,m,(function(){return buildCommonContext(n,i,r)}),u),v=b.viewContexts,w=b.pageStateHistory,A=b.urlContexts,E=b.actionContexts,_=b.addAction,S=b.stop;o.push(S);addTelemetryConfiguration(serializeRumConfiguration(e));startLongTaskCollection(f,t,p);startResourceCollection(f,t,p,w);var $=startViewCollection(f,t,location,m,g,l,w,r,s),T=$.addTiming,C=$.startView,P=$.stop;o.push(P);var x=startErrorCollection(f,t,w,l).addError;startRequestCollection(f,t,p);startPerformanceCollection(f,t);var I=startInternalContext(t.applicationId,p,v,E,A);return{addAction:_,addError:x,addTiming:T,addFeatureFlagEvaluation:l.addFeatureFlagEvaluation,startView:C,lifeCycle:f,viewContexts:v,session:p,stopSession:function(){return p.expire()},getInternalContext:I.get,stop:function(){o.forEach((function(e){return e()}))}}}function startRumTelemetry(e){var t=startTelemetry("browser-rum-sdk",e);if(canUseEventBridge()){var r=getEventBridge();t.observable.subscribe((function(e){return r.send("internal_telemetry",e)}))}return t}function startRumEventCollection(e,t,r,n,i,s,a,o){var f=startViewContexts(e);var c=startUrlContexts(e,i,r);var u=startPageStateHistory(t);var l=startActionCollection(e,s,t,u),h=l.addAction,d=l.actionContexts;var p=startDisplayContext(t);startRumAssembly(t,e,n,f,c,d,p,a,o);return{viewContexts:f,pageStateHistory:u,urlContexts:c,addAction:h,actionContexts:d,stop:function(){p.stop();u.stop();c.stop();f.stop();u.stop()}}}function getSessionReplayUrl(e,t){var r=t.session,n=t.viewContext,i=t.errorType;var s=r?r.id:"no-session-id";var a=[];if(i!==undefined){a.push("error-type=".concat(i))}if(n){a.push("seed=".concat(n.id));a.push("from=".concat(n.startClocks.timeStamp))}var o=getDatadogSiteUrl(e);var f="/rum/replay/sessions/".concat(s);return"".concat(o).concat(f,"?").concat(a.join("&"))}function getDatadogSiteUrl(e){var t=e.site;var r=e.subdomain||getSiteDefaultSubdomain(e);return"https://".concat(r?"".concat(r,"."):"").concat(t)}function getSiteDefaultSubdomain(e){switch(e.site){case INTAKE_SITE_US1:case INTAKE_SITE_EU1:return"app";case INTAKE_SITE_STAGING:return"dd";default:return undefined}}var RecordType={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9};var NodeType={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11};var IncrementalSource={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8};var MouseInteractionType={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9};var MediaInteractionType={Play:0,Pause:1};function assembleIncrementalSnapshot(e,t){return{data:assign$3({source:e},t),type:RecordType.IncrementalSnapshot,timestamp:timeStampNow()}}var NodePrivacyLevel={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:DefaultPrivacyLevel.ALLOW,MASK:DefaultPrivacyLevel.MASK,MASK_USER_INPUT:DefaultPrivacyLevel.MASK_USER_INPUT};var PRIVACY_ATTR_NAME="data-dd-privacy";var PRIVACY_ATTR_VALUE_ALLOW="allow";var PRIVACY_ATTR_VALUE_MASK="mask";var PRIVACY_ATTR_VALUE_MASK_USER_INPUT="mask-user-input";var PRIVACY_ATTR_VALUE_HIDDEN="hidden";var PRIVACY_CLASS_ALLOW="dd-privacy-allow";var PRIVACY_CLASS_MASK="dd-privacy-mask";var PRIVACY_CLASS_MASK_USER_INPUT="dd-privacy-mask-user-input";var PRIVACY_CLASS_HIDDEN="dd-privacy-hidden";var CENSORED_STRING_MARK="***";var CENSORED_IMG_MARK="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";var FORM_PRIVATE_TAG_NAMES={INPUT:true,OUTPUT:true,TEXTAREA:true,SELECT:true,OPTION:true,DATALIST:true,OPTGROUP:true};var MAX_ATTRIBUTE_VALUE_CHAR_LENGTH=1e5;var TEXT_MASKING_CHAR="x";function getNodePrivacyLevel(e,t){var r=getParentNode(e);var n=r?getNodePrivacyLevel(r,t):t;var i=getNodeSelfPrivacyLevel(e);return reducePrivacyLevel(i,n)}function reducePrivacyLevel(e,t){switch(t){case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return t}switch(e){case NodePrivacyLevel.ALLOW:case NodePrivacyLevel.MASK:case NodePrivacyLevel.MASK_USER_INPUT:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return e;default:return t}}function getNodeSelfPrivacyLevel(e){if(!isElementNode(e)){return}var t=e.getAttribute(PRIVACY_ATTR_NAME);if(e.tagName==="BASE"){return NodePrivacyLevel.ALLOW}if(e.tagName==="INPUT"){var r=e;if(r.type==="password"||r.type==="email"||r.type==="tel"){return NodePrivacyLevel.MASK}if(r.type==="hidden"){return NodePrivacyLevel.MASK}var n=r.getAttribute("autocomplete");if(n&&n.indexOf("cc-")===0){return NodePrivacyLevel.MASK}}if(t===PRIVACY_ATTR_VALUE_HIDDEN||e.classList.contains(PRIVACY_CLASS_HIDDEN)){return NodePrivacyLevel.HIDDEN}if(t===PRIVACY_ATTR_VALUE_MASK||e.classList.contains(PRIVACY_CLASS_MASK)){return NodePrivacyLevel.MASK}if(t===PRIVACY_ATTR_VALUE_MASK_USER_INPUT||e.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT)){return NodePrivacyLevel.MASK_USER_INPUT}if(t===PRIVACY_ATTR_VALUE_ALLOW||e.classList.contains(PRIVACY_CLASS_ALLOW)){return NodePrivacyLevel.ALLOW}if(shouldIgnoreElement(e)){return NodePrivacyLevel.IGNORE}}function shouldMaskNode(e,t){switch(t){case NodePrivacyLevel.MASK:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return true;case NodePrivacyLevel.MASK_USER_INPUT:return isTextNode(e)?isFormElement(e.parentNode):isFormElement(e);default:return false}}function isFormElement(e){if(!e||e.nodeType!==e.ELEMENT_NODE){return false}var t=e;if(t.tagName==="INPUT"){switch(t.type){case"button":case"color":case"reset":case"submit":return false}}return!!FORM_PRIVATE_TAG_NAMES[t.tagName]}var censorText=function(e){return e.replace(/\S/g,TEXT_MASKING_CHAR)};function getTextContent(e,t,r){var n;var i=(n=e.parentElement)===null||n===void 0?void 0:n.tagName;var s=e.textContent||"";if(t&&!s.trim()){return}var a=r;var o=i==="SCRIPT";if(o){s=CENSORED_STRING_MARK}else if(a===NodePrivacyLevel.HIDDEN){s=CENSORED_STRING_MARK}else if(shouldMaskNode(e,a)){if(i==="DATALIST"||i==="SELECT"||i==="OPTGROUP"){if(!s.trim()){return}}else if(i==="OPTION"){s=CENSORED_STRING_MARK}else{s=censorText(s)}}return s}function shouldIgnoreElement(e){if(e.nodeName==="SCRIPT"){return true}if(e.nodeName==="LINK"){var t=i("rel");return/preload|prefetch/i.test(t)&&i("as")==="script"||t==="shortcut icon"||t==="icon"}if(e.nodeName==="META"){var r=i("name");var t=i("rel");var n=i("property");return/^msapplication-tile(image|color)$/.test(r)||r==="application-name"||t==="icon"||t==="apple-touch-icon"||t==="shortcut icon"||r==="keywords"||r==="description"||/^(og|twitter|fb):/.test(n)||/^(og|twitter):/.test(r)||r==="pinterest"||r==="robots"||r==="googlebot"||r==="bingbot"||e.hasAttribute("http-equiv")||r==="author"||r==="generator"||r==="framework"||r==="publisher"||r==="progid"||/^article:/.test(n)||/^product:/.test(n)||r==="google-site-verification"||r==="yandex-verification"||r==="csrf-token"||r==="p:domain_verify"||r==="verify-v1"||r==="verification"||r==="shopify-checkout-api-token"}function i(t){return(e.getAttribute(t)||"").toLowerCase()}return false}var serializedNodeIds=new WeakMap;function hasSerializedNode(e){return serializedNodeIds.has(e)}function nodeAndAncestorsHaveSerializedNode(e){var t=e;while(t){if(!hasSerializedNode(t)&&!isNodeShadowRoot(t)){return false}t=getParentNode(t)}return true}function getSerializedNodeId(e){return serializedNodeIds.get(e)}function setSerializedNodeId(e,t){serializedNodeIds.set(e,t)}function getElementInputValue(e,t){var r=e.tagName;var n=e.value;if(shouldMaskNode(e,t)){var i=e.type;if(r==="INPUT"&&(i==="button"||i==="submit"||i==="reset")){return n}else if(!n||r==="OPTION"){return}return CENSORED_STRING_MARK}if(r==="OPTION"||r==="SELECT"){return e.value}if(r!=="INPUT"&&r!=="TEXTAREA"){return}return n}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm;var ABSOLUTE_URL=/^[A-Za-z]+:|^\/\//;var DATA_URI=/^data:.*,/i;function switchToAbsoluteUrl(e,t){return e.replace(URL_IN_CSS_REF,(function(e,r,n,i,s,a){var o=n||s||a;if(!t||!o||ABSOLUTE_URL.test(o)||DATA_URI.test(o)){return e}var f=r||i||"";return"url(".concat(f).concat(makeUrlAbsolute(o,t)).concat(f,")")}))}function makeUrlAbsolute(e,t){try{return buildUrl(e,t).href}catch(t){return e}}var TAG_NAME_REGEX=/[^a-z1-6-_]/;function getValidTagName(e){var t=e.toLowerCase().trim();if(TAG_NAME_REGEX.test(t)){return"div"}return t}function serializeStyleSheets(e){if(e===undefined||e.length===0){return undefined}return e.map((function(e){var t=e.cssRules||e.rules;var r=Array.from(t,(function(e){return e.cssText}));var n={cssRules:r,disabled:e.disabled||undefined,media:e.media.length>0?Array.from(e.media):undefined};return n}))}function serializeAttribute(e,t,r,n){if(t===NodePrivacyLevel.HIDDEN){return null}var i=e.getAttribute(r);if(t===NodePrivacyLevel.MASK&&r!==PRIVACY_ATTR_NAME&&!STABLE_ATTRIBUTES.includes(r)&&r!==n.actionNameAttribute){var s=e.tagName;switch(r){case"title":case"alt":case"placeholder":return CENSORED_STRING_MARK}if(s==="IMG"||s==="SOURCE"){if(r==="src"||r==="srcset"){return CENSORED_IMG_MARK}}if(s==="A"&&r==="href"){return CENSORED_STRING_MARK}if(i&&startsWith(r,"data-")){return CENSORED_STRING_MARK}}if(!i||typeof i!=="string"){return i}if(i.length>MAX_ATTRIBUTE_VALUE_CHAR_LENGTH&&i.slice(0,5)==="data:"){return"data:truncated"}return i}function serializeAttributes(e,t,r){var n;if(t===NodePrivacyLevel.HIDDEN){return{}}var i={};var s=getValidTagName(e.tagName);var a=e.ownerDocument;for(var o=0;o<e.attributes.length;o+=1){var f=e.attributes.item(o);var c=f.name;var u=serializeAttribute(e,t,c,r.configuration);if(u!==null){i[c]=u}}if(e.value&&(s==="textarea"||s==="select"||s==="option"||s==="input")){var l=getElementInputValue(e,t);if(l!==undefined){i.value=l}}if(s==="option"&&t===NodePrivacyLevel.ALLOW){var h=e;if(h.selected){i.selected=h.selected}}if(s==="link"){var d=Array.from(a.styleSheets).find((function(t){return t.href===e.href}));var p=getCssRulesString(d);if(p&&d&&!isExperimentalFeatureEnabled(ExperimentalFeature.DISABLE_REPLAY_INLINE_CSS)){i._cssText=p}}if(s==="style"&&e.sheet){var p=getCssRulesString(e.sheet);if(p){i._cssText=p}}var y=e;if(s==="input"&&(y.type==="radio"||y.type==="checkbox")){if(t===NodePrivacyLevel.ALLOW){i.checked=!!y.checked}else if(shouldMaskNode(y,t)){delete i.checked}}if(s==="audio"||s==="video"){var m=e;i.rr_mediaState=m.paused?"paused":"played"}var g;var b;var v=r.serializationContext;switch(v.status){case 0:g=Math.round(e.scrollTop);b=Math.round(e.scrollLeft);if(g||b){v.elementsScrollPositions.set(e,{scrollTop:g,scrollLeft:b})}break;case 1:if(v.elementsScrollPositions.has(e)){n=v.elementsScrollPositions.get(e),g=n.scrollTop,b=n.scrollLeft}break}if(b){i.rr_scrollLeft=b}if(g){i.rr_scrollTop=g}return i}function getCssRulesString(e){if(!e){return null}var t;try{t=e.rules||e.cssRules}catch(e){}if(!t){return null}var r=Array.from(t,isSafari()?getCssRuleStringForSafari:getCssRuleString).join("");return switchToAbsoluteUrl(r,e.href)}function getCssRuleStringForSafari(e){if(isCSSStyleRule(e)&&e.selectorText.includes(":")){var t=/(\[[\w-]+[^\\])(:[^\]]+\])/g;return e.cssText.replace(t,"$1\\$2")}return getCssRuleString(e)}function getCssRuleString(e){return isCSSImportRule(e)&&getCssRulesString(e.styleSheet)||e.cssText}function isCSSImportRule(e){return"styleSheet"in e}function isCSSStyleRule(e){return"selectorText"in e}function serializeNodeWithId(e,t){var r=serializeNode(e,t);if(!r){return null}var n=getSerializedNodeId(e)||generateNextId();var i=r;i.id=n;setSerializedNodeId(e,n);if(t.serializedNodeIds){t.serializedNodeIds.add(n)}return i}var _nextId$1=1;function generateNextId(){return _nextId$1++}function serializeChildNodes(e,t){var r=[];forEachChildNodes(e,(function(e){var n=serializeNodeWithId(e,t);if(n){r.push(n)}}));return r}function serializeNode(e,t){switch(e.nodeType){case e.DOCUMENT_NODE:return serializeDocumentNode(e,t);case e.DOCUMENT_FRAGMENT_NODE:return serializeDocumentFragmentNode(e,t);case e.DOCUMENT_TYPE_NODE:return serializeDocumentTypeNode(e);case e.ELEMENT_NODE:return serializeElementNode(e,t);case e.TEXT_NODE:return serializeTextNode(e,t);case e.CDATA_SECTION_NODE:return serializeCDataNode()}}function serializeDocumentNode(e,t){return{type:NodeType.Document,childNodes:serializeChildNodes(e,t),adoptedStyleSheets:serializeStyleSheets(e.adoptedStyleSheets)}}function serializeDocumentFragmentNode(e,t){var r=isNodeShadowRoot(e);if(r){t.serializationContext.shadowRootsController.addShadowRoot(e)}return{type:NodeType.DocumentFragment,childNodes:serializeChildNodes(e,t),isShadowRoot:r,adoptedStyleSheets:r?serializeStyleSheets(e.adoptedStyleSheets):undefined}}function serializeDocumentTypeNode(e){return{type:NodeType.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId}}function serializeElementNode(e,t){var r;var n=getValidTagName(e.tagName);var i=isSVGElement(e)||undefined;var s=reducePrivacyLevel(getNodeSelfPrivacyLevel(e),t.parentNodePrivacyLevel);if(s===NodePrivacyLevel.HIDDEN){var a=e.getBoundingClientRect(),o=a.width,f=a.height;return{type:NodeType.Element,tagName:n,attributes:(r={rr_width:"".concat(o,"px"),rr_height:"".concat(f,"px")},r[PRIVACY_ATTR_NAME]=PRIVACY_ATTR_VALUE_HIDDEN,r),childNodes:[],isSVG:i}}if(s===NodePrivacyLevel.IGNORE){return}var c=serializeAttributes(e,s,t);var u=[];if(hasChildNodes(e)&&n!=="style"){var l=void 0;if(t.parentNodePrivacyLevel===s&&t.ignoreWhiteSpace===(n==="head")){l=t}else{l=assign$3({},t,{parentNodePrivacyLevel:s,ignoreWhiteSpace:n==="head"})}u=serializeChildNodes(e,l)}return{type:NodeType.Element,tagName:n,attributes:c,childNodes:u,isSVG:i}}function isSVGElement(e){return e.tagName==="svg"||e instanceof SVGElement}function serializeTextNode(e,t){var r=getTextContent(e,t.ignoreWhiteSpace||false,t.parentNodePrivacyLevel);if(r===undefined){return}return{type:NodeType.Text,textContent:r}}function serializeCDataNode(){return{type:NodeType.CDATA,textContent:""}}function serializeDocument(e,t,r){return serializeNodeWithId(e,{serializationContext:r,parentNodePrivacyLevel:t.defaultPrivacyLevel,configuration:t})}function isTouchEvent(e){return Boolean(e.changedTouches)}function getEventTarget(e){if(e.composed===true&&isNodeShadowHost(e.target)){return e.composedPath()[0]}return e.target}var TOLERANCE=25;function isVisualViewportFactoredIn(e){return Math.abs(e.pageTop-e.offsetTop-window.scrollY)>TOLERANCE||Math.abs(e.pageLeft-e.offsetLeft-window.scrollX)>TOLERANCE}var convertMouseEventToLayoutCoordinates=function(e,t){var r=window.visualViewport;var n={layoutViewportX:e,layoutViewportY:t,visualViewportX:e,visualViewportY:t};if(!r){return n}else if(isVisualViewportFactoredIn(r)){n.layoutViewportX=Math.round(e+r.offsetLeft);n.layoutViewportY=Math.round(t+r.offsetTop)}else{n.visualViewportX=Math.round(e-r.offsetLeft);n.visualViewportY=Math.round(t-r.offsetTop)}return n};var getVisualViewport=function(e){return{scale:e.scale,offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,pageLeft:e.pageLeft,pageTop:e.pageTop,height:e.height,width:e.width}};var MOUSE_MOVE_OBSERVER_THRESHOLD=50;function initMoveObserver(e,t){var r=throttle((function(e){var r=getEventTarget(e);if(hasSerializedNode(r)){var n=tryToComputeCoordinates(e);if(!n){return}var i={id:getSerializedNodeId(r),timeOffset:0,x:n.x,y:n.y};t([i],isTouchEvent(e)?IncrementalSource.TouchMove:IncrementalSource.MouseMove)}}),MOUSE_MOVE_OBSERVER_THRESHOLD,{trailing:false}).throttled;return addEventListeners(e,document,[DOM_EVENT.MOUSE_MOVE,DOM_EVENT.TOUCH_MOVE],r,{capture:true,passive:true}).stop}function tryToComputeCoordinates(e){var t=isTouchEvent(e)?e.changedTouches[0]:e,r=t.clientX,n=t.clientY;if(window.visualViewport){var i=convertMouseEventToLayoutCoordinates(r,n),s=i.visualViewportX,a=i.visualViewportY;r=s;n=a}if(!Number.isFinite(r)||!Number.isFinite(n)){if(e.isTrusted){addTelemetryDebug("mouse/touch event without x/y")}return undefined}return{x:r,y:n}}var SCROLL_OBSERVER_THRESHOLD=100;function initScrollObserver(e,t,r,n){var i=throttle((function(e){var i=getEventTarget(e);if(!i||getNodePrivacyLevel(i,r)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(i)){return}var s=getSerializedNodeId(i);var a=i===document?{scrollTop:getScrollY(),scrollLeft:getScrollX()}:{scrollTop:Math.round(i.scrollTop),scrollLeft:Math.round(i.scrollLeft)};n.set(i,a);t({id:s,x:a.scrollLeft,y:a.scrollTop})}),SCROLL_OBSERVER_THRESHOLD).throttled;return addEventListener$1(e,document,DOM_EVENT.SCROLL,i,{capture:true,passive:true}).stop}var _a$y;var eventTypeToMouseInteraction=(_a$y={},_a$y[DOM_EVENT.POINTER_UP]=MouseInteractionType.MouseUp,_a$y[DOM_EVENT.MOUSE_DOWN]=MouseInteractionType.MouseDown,_a$y[DOM_EVENT.CLICK]=MouseInteractionType.Click,_a$y[DOM_EVENT.CONTEXT_MENU]=MouseInteractionType.ContextMenu,_a$y[DOM_EVENT.DBL_CLICK]=MouseInteractionType.DblClick,_a$y[DOM_EVENT.FOCUS]=MouseInteractionType.Focus,_a$y[DOM_EVENT.BLUR]=MouseInteractionType.Blur,_a$y[DOM_EVENT.TOUCH_START]=MouseInteractionType.TouchStart,_a$y[DOM_EVENT.TOUCH_END]=MouseInteractionType.TouchEnd,_a$y);function initMouseInteractionObserver(e,t,r){var n=function(n){var i=getEventTarget(n);if(getNodePrivacyLevel(i,e.defaultPrivacyLevel)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(i)){return}var s=getSerializedNodeId(i);var a=eventTypeToMouseInteraction[n.type];var o;if(a!==MouseInteractionType.Blur&&a!==MouseInteractionType.Focus){var f=tryToComputeCoordinates(n);if(!f){return}o={id:s,type:a,x:f.x,y:f.y}}else{o={id:s,type:a}}var c=assign$3({id:r.getIdForEvent(n)},assembleIncrementalSnapshot(IncrementalSource.MouseInteraction,o));t(c)};return addEventListeners(e,document,Object.keys(eventTypeToMouseInteraction),n,{capture:true,passive:true}).stop}function initInputObserver(e,t,r){if(r===void 0){r=document}var n=e.defaultPrivacyLevel;var i=new WeakMap;var s=r!==document;var a=addEventListeners(e,r,s?[DOM_EVENT.CHANGE]:[DOM_EVENT.INPUT,DOM_EVENT.CHANGE],(function(e){var t=getEventTarget(e);if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement){c(t)}}),{capture:true,passive:true}).stop;var o;if(!s){var f=[instrumentSetter(HTMLInputElement.prototype,"value",c),instrumentSetter(HTMLInputElement.prototype,"checked",c),instrumentSetter(HTMLSelectElement.prototype,"value",c),instrumentSetter(HTMLTextAreaElement.prototype,"value",c),instrumentSetter(HTMLSelectElement.prototype,"selectedIndex",c)];o=function(){f.forEach((function(e){return e.stop()}))}}else{o=noop$1}return function(){o();a()};function c(e){var t=getNodePrivacyLevel(e,n);if(t===NodePrivacyLevel.HIDDEN){return}var r=e.type;var i;if(r==="radio"||r==="checkbox"){if(shouldMaskNode(e,t)){return}i={isChecked:e.checked}}else{var s=getElementInputValue(e,t);if(s===undefined){return}i={text:s}}u(e,i);var a=e.name;if(r==="radio"&&a&&e.checked){forEach(document.querySelectorAll('input[type="radio"][name="'.concat(cssEscape(a),'"]')),(function(t){if(t!==e){u(t,{isChecked:false})}}))}}function u(e,r){if(!hasSerializedNode(e)){return}var n=i.get(e);if(!n||n.text!==r.text||n.isChecked!==r.isChecked){i.set(e,r);t(assign$3({id:getSerializedNodeId(e)},r))}}}function initStyleSheetObserver(e){function t(e,t){if(e&&hasSerializedNode(e.ownerNode)){t(getSerializedNodeId(e.ownerNode))}}var r=[instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"insertRule",{before:function(r,n){t(this,(function(t){return e({id:t,adds:[{rule:r,index:n}]})}))}}),instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"deleteRule",{before:function(r){t(this,(function(t){return e({id:t,removes:[{index:r}]})}))}})];if(typeof CSSGroupingRule!=="undefined"){n(CSSGroupingRule)}else{n(CSSMediaRule);n(CSSSupportsRule)}function n(n){r.push(instrumentMethodAndCallOriginal(n.prototype,"insertRule",{before:function(r,n){var i=this;t(this.parentStyleSheet,(function(t){var s=getPathToNestedCSSRule(i);if(s){s.push(n||0);e({id:t,adds:[{rule:r,index:s}]})}}))}}),instrumentMethodAndCallOriginal(n.prototype,"deleteRule",{before:function(r){var n=this;t(this.parentStyleSheet,(function(t){var i=getPathToNestedCSSRule(n);if(i){i.push(r);e({id:t,removes:[{index:i}]})}}))}}))}return function(){return r.forEach((function(e){return e.stop()}))}}function getPathToNestedCSSRule(e){var t=[];var r=e;while(r.parentRule){var n=Array.from(r.parentRule.cssRules);var i=n.indexOf(r);t.unshift(i);r=r.parentRule}if(!r.parentStyleSheet){return}var s=Array.from(r.parentStyleSheet.cssRules);var a=s.indexOf(r);t.unshift(a);return t}function initMediaInteractionObserver(e,t,r){return addEventListeners(e,document,[DOM_EVENT.PLAY,DOM_EVENT.PAUSE],(function(e){var n=getEventTarget(e);if(!n||getNodePrivacyLevel(n,r)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(n)){return}t({id:getSerializedNodeId(n),type:e.type===DOM_EVENT.PLAY?MediaInteractionType.Play:MediaInteractionType.Pause})}),{capture:true,passive:true}).stop}function initFrustrationObserver(e,t,r){return e.subscribe(10,(function(e){var n,i,s;if(e.rawRumEvent.type==="action"&&e.rawRumEvent.action.type==="click"&&((i=(n=e.rawRumEvent.action.frustration)===null||n===void 0?void 0:n.type)===null||i===void 0?void 0:i.length)&&"events"in e.domainContext&&((s=e.domainContext.events)===null||s===void 0?void 0:s.length)){t({timestamp:e.rawRumEvent.date,type:RecordType.FrustrationRecord,data:{frustrationTypes:e.rawRumEvent.action.frustration.type,recordIds:e.domainContext.events.map((function(e){return r.getIdForEvent(e)}))}})}})).unsubscribe}var VISUAL_VIEWPORT_OBSERVER_THRESHOLD=200;function initViewportResizeObserver(e,t){return initViewportObservable(e).subscribe(t).unsubscribe}function initVisualViewportResizeObserver(e,t){var r=window.visualViewport;if(!r){return noop$1}var n=throttle((function(){t(getVisualViewport(r))}),VISUAL_VIEWPORT_OBSERVER_THRESHOLD,{trailing:false}),i=n.throttled,s=n.cancel;var a=addEventListeners(e,r,[DOM_EVENT.RESIZE,DOM_EVENT.SCROLL],i,{capture:true,passive:true}).stop;return function e(){a();s()}}var MUTATION_PROCESS_MAX_DELAY=100;function createMutationBatch(e){var t=noop$1;var r=[];function n(){t();e(r);r=[]}return{addMutations:function(e){if(r.length===0){t=requestIdleCallback(n,{timeout:MUTATION_PROCESS_MAX_DELAY})}r.push.apply(r,e)},flush:n,stop:function(){t()}}}function requestIdleCallback(e,t){if(window.requestIdleCallback&&window.cancelIdleCallback){var r=window.requestIdleCallback(monitor(e),t);return function(){return window.cancelIdleCallback(r)}}var n=window.requestAnimationFrame(monitor(e));return function(){return window.cancelAnimationFrame(n)}}function initMutationObserver(e,t,r,n){var i=getMutationObserverConstructor();if(!i){return{stop:noop$1,flush:noop$1}}var s=createMutationBatch((function(n){processMutations(n.concat(a.takeRecords()),e,t,r)}));var a=new i(monitor(s.addMutations));a.observe(n,{attributeOldValue:true,attributes:true,characterData:true,characterDataOldValue:true,childList:true,subtree:true});return{stop:function(){a.disconnect();s.stop()},flush:function(){s.flush()}}}function processMutations(e,t,r,n){e.filter((function(e){return e.type==="childList"})).forEach((function(e){e.removedNodes.forEach((function(e){traverseRemovedShadowDom(e,n.removeShadowRoot)}))}));var i=e.filter((function(e){return e.target.isConnected&&nodeAndAncestorsHaveSerializedNode(e.target)&&getNodePrivacyLevel(e.target,r.defaultPrivacyLevel)!==NodePrivacyLevel.HIDDEN}));var s=processChildListMutations(i.filter((function(e){return e.type==="childList"})),r,n),a=s.adds,o=s.removes,f=s.hasBeenSerialized;var c=processCharacterDataMutations(i.filter((function(e){return e.type==="characterData"&&!f(e.target)})),r);var u=processAttributesMutations(i.filter((function(e){return e.type==="attributes"&&!f(e.target)})),r);if(!c.length&&!u.length&&!o.length&&!a.length){return}t({adds:a,removes:o,texts:c,attributes:u})}function processChildListMutations(e,t,r){var n=new Set;var i=new Map;var s=function(e){e.addedNodes.forEach((function(e){n.add(e)}));e.removedNodes.forEach((function(t){if(!n.has(t)){i.set(t,e.target)}n.delete(t)}))};for(var a=0,o=e;a<o.length;a++){var f=o[a];s(f)}var c=Array.from(n);sortAddedAndMovedNodes(c);var u=new Set;var l=[];for(var h=0,d=c;h<d.length;h++){var p=d[h];if(v(p)){continue}var y=getNodePrivacyLevel(p.parentNode,t.defaultPrivacyLevel);if(y===NodePrivacyLevel.HIDDEN||y===NodePrivacyLevel.IGNORE){continue}var m=serializeNodeWithId(p,{serializedNodeIds:u,parentNodePrivacyLevel:y,serializationContext:{status:2,shadowRootsController:r},configuration:t});if(!m){continue}var g=getParentNode(p);l.push({nextId:w(p),parentId:getSerializedNodeId(g),node:m})}var b=[];i.forEach((function(e,t){if(hasSerializedNode(t)){b.push({parentId:getSerializedNodeId(e),id:getSerializedNodeId(t)})}}));return{adds:l,removes:b,hasBeenSerialized:v};function v(e){return hasSerializedNode(e)&&u.has(getSerializedNodeId(e))}function w(e){var t=e.nextSibling;while(t){if(hasSerializedNode(t)){return getSerializedNodeId(t)}t=t.nextSibling}return null}}function processCharacterDataMutations(e,t){var r;var n=[];var i=new Set;var s=e.filter((function(e){if(i.has(e.target)){return false}i.add(e.target);return true}));for(var a=0,o=s;a<o.length;a++){var f=o[a];var c=f.target.textContent;if(c===f.oldValue){continue}var u=getNodePrivacyLevel(getParentNode(f.target),t.defaultPrivacyLevel);if(u===NodePrivacyLevel.HIDDEN||u===NodePrivacyLevel.IGNORE){continue}n.push({id:getSerializedNodeId(f.target),value:(r=getTextContent(f.target,false,u))!==null&&r!==void 0?r:null})}return n}function processAttributesMutations(e,t){var r=[];var n=new Map;var i=e.filter((function(e){var t=n.get(e.target);if(t===null||t===void 0?void 0:t.has(e.attributeName)){return false}if(!t){n.set(e.target,new Set([e.attributeName]))}else{t.add(e.attributeName)}return true}));var s=new Map;for(var a=0,o=i;a<o.length;a++){var f=o[a];var c=f.target.getAttribute(f.attributeName);if(c===f.oldValue){continue}var u=getNodePrivacyLevel(f.target,t.defaultPrivacyLevel);var l=serializeAttribute(f.target,u,f.attributeName,t);var h=void 0;if(f.attributeName==="value"){var d=getElementInputValue(f.target,u);if(d===undefined){continue}h=d}else if(typeof l==="string"){h=l}else{h=null}var p=s.get(f.target);if(!p){p={id:getSerializedNodeId(f.target),attributes:{}};r.push(p);s.set(f.target,p)}p.attributes[f.attributeName]=h}return r}function sortAddedAndMovedNodes(e){e.sort((function(e,t){var r=e.compareDocumentPosition(t);if(r&Node.DOCUMENT_POSITION_CONTAINED_BY){return-1}else if(r&Node.DOCUMENT_POSITION_CONTAINS){return 1}else if(r&Node.DOCUMENT_POSITION_FOLLOWING){return 1}else if(r&Node.DOCUMENT_POSITION_PRECEDING){return-1}return 0}))}function traverseRemovedShadowDom(e,t){if(isNodeShadowHost(e)){t(e.shadowRoot)}forEachChildNodes(e,(function(e){return traverseRemovedShadowDom(e,t)}))}function initFocusObserver(e,t){return addEventListeners(e,window,[DOM_EVENT.FOCUS,DOM_EVENT.BLUR],(function(){t({has_focus:document.hasFocus()})})).stop}function initRecordIds(){var e=new WeakMap;var t=1;return{getIdForEvent:function(r){if(!e.has(r)){e.set(r,t++)}return e.get(r)}}}function initObservers(e,t){var r=initRecordIds();var n=initMutationObserver(t.mutationCb,t.configuration,t.shadowRootsController,document);var i=initMoveObserver(e,t.mousemoveCb);var s=initMouseInteractionObserver(e,t.mouseInteractionCb,r);var a=initScrollObserver(e,t.scrollCb,t.configuration.defaultPrivacyLevel,t.elementsScrollPositions);var o=initViewportResizeObserver(e,t.viewportResizeCb);var f=initInputObserver(e,t.inputCb);var c=initMediaInteractionObserver(e,t.mediaInteractionCb,t.configuration.defaultPrivacyLevel);var u=initStyleSheetObserver(t.styleSheetCb);var l=initFocusObserver(e,t.focusCb);var h=initVisualViewportResizeObserver(e,t.visualViewportResizeCb);var d=initFrustrationObserver(t.lifeCycle,t.frustrationCb,r);return{flush:function(){n.flush()},stop:function(){n.stop();i();s();a();o();f();c();u();l();h();d()}}}function createElementsScrollPositions(){var e=new WeakMap;return{set:function(t,r){if(t===document&&!document.scrollingElement){return}e.set(t===document?document.scrollingElement:t,r)},get:function(t){return e.get(t)},has:function(t){return e.has(t)}}}var initShadowRootsController=function(e,t){var r=t.mutationCb,n=t.inputCb;var i=new Map;var s={addShadowRoot:function(t){if(i.has(t)){return}var a=initMutationObserver(r,e,s,t),o=a.stop,f=a.flush;var c=initInputObserver(e,n,t);i.set(t,{flush:f,stop:function(){o();c()}})},removeShadowRoot:function(e){var t=i.get(e);if(!t){return}t.stop();i.delete(e)},stop:function(){i.forEach((function(e){var t=e.stop;return t()}))},flush:function(){i.forEach((function(e){var t=e.flush;return t()}))}};return s};function record(e){var t=e.emit,r=e.configuration;if(!t){throw new Error("emit function is required")}var n=createElementsScrollPositions();var i=function(e){t(assembleIncrementalSnapshot(IncrementalSource.Mutation,e))};var s=function(e){return t(assembleIncrementalSnapshot(IncrementalSource.Input,e))};var a=initShadowRootsController(r,{mutationCb:i,inputCb:s});var o=function(e,i){if(e===void 0){e=timeStampNow()}if(i===void 0){i={status:0,elementsScrollPositions:n,shadowRootsController:a}}var s=getViewportDimension(),o=s.width,f=s.height;t({data:{height:f,href:window.location.href,width:o},type:RecordType.Meta,timestamp:e});t({data:{has_focus:document.hasFocus()},type:RecordType.Focus,timestamp:e});t({data:{node:serializeDocument(document,r,i),initialOffset:{left:getScrollX(),top:getScrollY()}},type:RecordType.FullSnapshot,timestamp:e});if(window.visualViewport){t({data:getVisualViewport(window.visualViewport),type:RecordType.VisualViewport,timestamp:e})}};o();var f=initObservers(r,{lifeCycle:e.lifeCycle,configuration:r,elementsScrollPositions:n,inputCb:s,mediaInteractionCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction,e))},mouseInteractionCb:function(e){return t(e)},mousemoveCb:function(e,r){return t(assembleIncrementalSnapshot(r,{positions:e}))},mutationCb:i,scrollCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.Scroll,e))},styleSheetCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule,e))},viewportResizeCb:function(e){return t(assembleIncrementalSnapshot(IncrementalSource.ViewportResize,e))},frustrationCb:function(e){return t(e)},focusCb:function(e){return t({data:e,type:RecordType.Focus,timestamp:timeStampNow()})},visualViewportResizeCb:function(e){t({data:e,type:RecordType.VisualViewport,timestamp:timeStampNow()})},shadowRootsController:a}),c=f.stop,u=f.flush;function l(){a.flush();u()}return{stop:function(){a.stop();c()},takeSubsequentFullSnapshot:function(e){l();o(e,{shadowRootsController:a,status:1,elementsScrollPositions:n})},flushMutations:l,shadowRootsController:a}}function buildReplayPayload(e,t,r){var n=new FormData;n.append("segment",new Blob([e],{type:"application/octet-stream"}),"".concat(t.session.id,"-").concat(t.start));var i=assign$3({raw_segment_size:r,compressed_segment_size:e.byteLength},t);var s=JSON.stringify(i);n.append("event",new Blob([s],{type:"application/json"}));return{data:n,bytesCount:e.byteLength}}var MAX_STATS_HISTORY=10;var statsPerView;function getSegmentsCount(e){return getOrCreateReplayStats(e).segments_count}function addSegment(e){getOrCreateReplayStats(e).segments_count+=1}function addRecord(e){getOrCreateReplayStats(e).records_count+=1}function addWroteData(e,t){getOrCreateReplayStats(e).segments_total_raw_size+=t}function getReplayStats(e){return statsPerView===null||statsPerView===void 0?void 0:statsPerView.get(e)}function getOrCreateReplayStats(e){if(!statsPerView){statsPerView=new Map}var t;if(statsPerView.has(e)){t=statsPerView.get(e)}else{t={records_count:0,segments_count:0,segments_total_raw_size:0};statsPerView.set(e,t);if(statsPerView.size>MAX_STATS_HISTORY){deleteOldestStats()}}return t}function deleteOldestStats(){if(!statsPerView){return}if(statsPerView.keys){statsPerView.delete(statsPerView.keys().next().value)}else{var e=true;statsPerView.forEach((function(t,r){if(e){statsPerView.delete(r);e=false}}))}}var Segment=function(){function e(e,t,r){this.encoder=e;this.encodedBytesCount=0;var n=t.view.id;this.metadata=assign$3({start:Infinity,end:-Infinity,creation_reason:r,records_count:0,has_full_snapshot:false,index_in_view:getSegmentsCount(n),source:"browser"},t);addSegment(n)}e.prototype.addRecord=function(e,t){var r=this;var n;this.metadata.start=Math.min(this.metadata.start,e.timestamp);this.metadata.end=Math.max(this.metadata.end,e.timestamp);this.metadata.records_count+=1;(n=this.metadata).has_full_snapshot||(n.has_full_snapshot=e.type===RecordType.FullSnapshot);sendToExtension("record",{record:e,segment:this.metadata});addRecord(this.metadata.view.id);var i=this.encoder.isEmpty?'{"records":[':",";this.encoder.write(i+JSON.stringify(e),(function(e){r.encodedBytesCount+=e;t(r.encodedBytesCount)}))};e.prototype.flush=function(e){var t=this;if(this.encoder.isEmpty){throw new Error("Empty segment flushed")}this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),"\n"));this.encoder.finish((function(r){addWroteData(t.metadata.view.id,r.rawBytesCount);e(t.metadata,r)}))};return e}();var SEGMENT_DURATION_LIMIT=30*ONE_SECOND;var SEGMENT_BYTES_LIMIT=6e4;function startSegmentCollection(e,t,r,n,i,s){return doStartSegmentCollection(e,(function(){return computeSegmentContext(t.applicationId,r,n)}),i,s)}function doStartSegmentCollection(e,t,r,n){var i={status:0,nextSegmentCreationReason:"init"};var s=e.subscribe(2,(function(){o("view_change")})).unsubscribe;var a=e.subscribe(9,(function(e){o(e.reason)})).unsubscribe;function o(e){if(i.status===1){i.segment.flush((function(t,n){var i=buildReplayPayload(n.output,t,n.rawBytesCount);if(isPageExitReason(e)){r.sendOnExit(i)}else{r.send(i)}}));clearTimeout$1(i.expirationTimeoutId)}if(e!=="stop"){i={status:0,nextSegmentCreationReason:e}}else{i={status:2}}}return{addRecord:function(e){if(i.status===2){return}if(i.status===0){var r=t();if(!r){return}i={status:1,segment:new Segment(n,r,i.nextSegmentCreationReason),expirationTimeoutId:setTimeout$1((function(){o("segment_duration_limit")}),SEGMENT_DURATION_LIMIT)}}i.segment.addRecord(e,(function(e){if(e>SEGMENT_BYTES_LIMIT){o("segment_bytes_limit")}}))},stop:function(){o("stop");s();a()}}}function computeSegmentContext(e,t,r){var n=t.findTrackedSession();var i=r.findView();if(!n||!i){return undefined}return{application:{id:e},session:{id:n.id},view:{id:i.id}}}function startRecording(e,t,r,n,i,s){var a=function(t){e.notify(12,{error:t});addTelemetryDebug("Error reported to customer",{"error.message":t.message})};var o=s||createHttpRequest(t,t.sessionReplayEndpointBuilder,SEGMENT_BYTES_LIMIT,a);var f=startSegmentCollection(e,t,r,n,o,i),c=f.addRecord,u=f.stop;var l=record({emit:c,configuration:t,lifeCycle:e}),h=l.stop,d=l.takeSubsequentFullSnapshot,p=l.flushMutations;var y=e.subscribe(4,(function(){p();c({timestamp:timeStampNow(),type:RecordType.ViewEnd})})).unsubscribe;var m=e.subscribe(2,(function(e){d(e.startClocks.timeStamp)})).unsubscribe;return{stop:function(){y();m();h();u()}}}function isBrowserSupported(){return typeof Array.from==="function"&&typeof CSSSupportsRule==="function"&&typeof URL.createObjectURL==="function"&&"forEach"in NodeList.prototype}function getSessionReplayLink(e,t,r,n){var i=t.findTrackedSession();var s=getErrorType(i,n);var a=r.findView();return getSessionReplayUrl(e,{viewContext:a,errorType:s,session:i})}function getErrorType(e,t){if(!isBrowserSupported()){return"browser-not-supported"}if(!e){return"rum-not-tracked"}if(!e.sessionReplayAllowed){return"incorrect-session-plan"}if(!t){return"replay-not-started"}}function createDeflateEncoder(e,t,r){var n=0;var i=[];var s;var a=0;var o=[];var f=addEventListener$1(e,t,"message",(function(e){var t=e.data;if(t.type!=="wrote"||t.streamId!==r){return}n+=t.additionalBytesCount;i.push(t.result);s=t.trailer;var a=o.shift();if(a&&a.id===t.id){if(a.writeCallback){a.writeCallback(t.result.byteLength)}else if(a.finishCallback){a.finishCallback()}}else{f();addTelemetryDebug("Worker responses received out of order.")}})).stop;function c(){var e=i.length===0?new Uint8Array(0):concatBuffers(i.concat(s));var t={rawBytesCount:n,output:e,outputBytesCount:e.byteLength,encoding:"deflate"};n=0;i=[];return t}function u(){if(a>0){t.postMessage({action:"reset",streamId:r});a=0}}return{isAsync:true,get isEmpty(){return a===0},write:function(e,n){t.postMessage({action:"write",id:a,data:e,streamId:r});o.push({id:a,writeCallback:n,data:e});a+=1},finish:function(e){u();if(!o.length){e(c())}else{o.forEach((function(e){delete e.writeCallback}));o[o.length-1].finishCallback=function(){return e(c())}}},finishSync:function(){u();var e=o.map((function(e){delete e.writeCallback;delete e.finishCallback;return e.data})).join("");return assign$3(c(),{pendingData:e})},estimateEncodedBytesCount:function(e){return e.length/8},stop:function(){f()}}}var INITIALIZATION_TIME_OUT_DELAY=10*ONE_SECOND;function createDeflateWorker(e){return new Worker(e.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"5.6.0"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var state={status:0};function startDeflateWorker(e,t,r,n){if(n===void 0){n=createDeflateWorker}if(state.status===0){doStartDeflateWorker(e,t,n)}switch(state.status){case 1:state.initializationFailureCallbacks.push(r);return state.worker;case 3:return state.worker}}function getDeflateWorkerStatus(){return state.status}function doStartDeflateWorker(e,t,r){if(r===void 0){r=createDeflateWorker}try{var n=r(e);var i=addEventListener$1(e,n,"error",(function(r){onError(e,t,r)})).stop;var s=addEventListener$1(e,n,"message",(function(r){var n=r.data;if(n.type==="errored"){onError(e,t,n.error,n.streamId)}else if(n.type==="initialized"){onInitialized(n.version)}})).stop;n.postMessage({action:"init"});setTimeout$1((function(){return onTimeout(t)}),INITIALIZATION_TIME_OUT_DELAY);var a=function(){i();s()};state={status:1,worker:n,stop:a,initializationFailureCallbacks:[]}}catch(r){onError(e,t,r)}}function onTimeout(e){if(state.status===1){display.error("".concat(e," failed to start: a timeout occurred while initializing the Worker"));state.initializationFailureCallbacks.forEach((function(e){return e()}));state={status:2}}}function onInitialized(e){if(state.status===1){state={status:3,worker:state.worker,stop:state.stop,version:e}}}function onError(e,t,r,n){if(state.status===1||state.status===0){display.error("".concat(t," failed to start: an error occurred while creating the Worker:"),r);if(r instanceof Event||r instanceof Error&&isMessageCspRelated(r.message)){var i=void 0;if(e.workerUrl){i="Please make sure the Worker URL ".concat(e.workerUrl," is correct and CSP is correctly configured.")}else{i="Please make sure CSP is correctly configured."}display.error("".concat(i," See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else{addTelemetryError(r)}if(state.status===1){state.initializationFailureCallbacks.forEach((function(e){return e()}))}state={status:2}}else{addTelemetryError(r,{worker_version:state.status===3&&state.version,stream_id:n})}}function isMessageCspRelated(e){return includes(e,"Content Security Policy")||includes(e,"requires 'TrustedScriptURL'")}function makeRecorderApi(e,t){if(canUseEventBridge()||!isBrowserSupported()){return{start:noop$1,stop:noop$1,getReplayStats:function(){return undefined},onRumStart:noop$1,isRecording:function(){return false},getSessionReplayLink:function(){return undefined}}}var r={status:1};var n=function(){r={status:1}};var i=function(){r={status:0}};return{start:function(){return n()},stop:function(){return i()},getSessionReplayLink:function(e,t,n){return getSessionReplayLink(e,t,n,r.status!==0)},onRumStart:function(s,a,o,f,c){if(a.startSessionReplayRecordingManually){r={status:0}}s.subscribe(7,(function(){if(r.status===2||r.status===3){i();r={status:1}}}));s.subscribe(8,(function(){if(r.status===1){n()}}));n=function(){var n=o.findTrackedSession();if(!n||!n.sessionReplayAllowed){r={status:1};return}if(r.status===2||r.status===3){return}r={status:2};runOnReadyState(a,"interactive",(function(){if(r.status!==2){return}if(!c){c=startDeflateWorker(a,"Datadog Session Replay",(function(){i()}),t);if(!c){r={status:0};return}}var n=e(s,a,o,f,createDeflateEncoder(a,c,1)).stop;r={status:3,stopRecording:n}}))};i=function(){if(r.status===0){return}if(r.status===3){r.stopRecording()}r={status:0}};if(r.status===1){n()}},isRecording:function(){return getDeflateWorkerStatus()===3&&r.status===3},getReplayStats:function(e){return getDeflateWorkerStatus()===3?getReplayStats(e):undefined}}}var recorderApi=makeRecorderApi(startRecording);var datadogRum=makeRumPublicApi(startRum,recorderApi,{startDeflateWorker,createDeflateEncoder});defineGlobal(getGlobalObject(),"DD_RUM",datadogRum);datadogRum.init({applicationId:"75bc6614-e228-47d7-beaa-4f3aabd4cfeb",clientToken:"pubacc9fb48f8ed4c8e23c93f230cf99e36",site:"datadoghq.com",service:"ts_viewer",env:"prod",sessionSampleRate:5,sessionReplaySampleRate:0,trackUserInteractions:true,trackResources:true,trackLongTasks:true,defaultPrivacyLevel:"mask-user-input"});class ScriptURI{constructor(e){this.context=e}async getTokenScriptXml(e){const[t,r]=e.split("-");if(!r||r.indexOf("0x")!==0)throw new Error("Not a ScriptUri ID");let n=await this.context.getScriptUri(t,r);if(!n)throw new Error("ScriptURI is not set on this contract or chain");console.log("Resolved ScriptURI: "+n);if(n==="https://viewer.tokenscript.org/assets/tokenscripts/smart-cat-prod.tsml"){console.log("SmartCat tokenscript detected, using updated version for newer features and better performance");n="/assets/tokenscripts/smart-cat-prod-2024-01.tsml"}else if(n==="https://viewer-staging.tokenscript.org/assets/tokenscripts/smart-cat-mumbai.tsml"){console.log("SmartCat tokenscript detected, using updated version for newer features and better performance");n="/assets/tokenscripts/smart-cat-mumbai-2024-01.tsml"}n=this.context.processIpfsUrl(n);let i=await fetch(n,{cache:"no-store"});if(i.status<200||i.status>299)throw new Error("HTTP Error: "+i.status);return{xml:await i.text(),sourceUrl:n}}}class TokenScriptRepo{async getTokenScriptXml(e){if(!e.match(/^[a-zA-Z0-9]*$/))throw new Error("Not a valid tsId for TokenScript repo");const t=TokenScriptRepo.REPO_URL+e+".tsml";let r=await fetch(t);if(r.status<200||r.status>299)throw new Error("HTTP Error: "+r.status);return{xml:await r.text(),sourceUrl:t}}}TokenScriptRepo.REPO_URL="https://raw.githubusercontent.com/AlphaWallet/TokenScript-Repo/master/aw.app/2020/06/";class Repo{constructor(e){this.context=e}async getTokenScript(e,t=false){let r;if(!this.context.config.noLocalStorage)try{const t=localStorage.getItem("ts-"+e);r=JSON.parse(t)}catch(e){}if(t||!r||!r.xml||Date.now()>r.timestamp+Repo.REPO_TTL*1e3){r=await this.resolveTokenScript(e);r.timestamp=Date.now();this.saveTokenScript(e,r)}return r}async resolveTokenScript(e){for(let t of Repo.REPO_SOURCES){try{return await new t(this.context).getTokenScriptXml(e)}catch(e){console.log("Failed to resolve tokenscript using resolver: "+t.name)}}throw new Error("Could not resolve tokenscript with ID: "+e)}deleteTokenScript(e){if(!this.context.config.noLocalStorage)localStorage.removeItem("ts-"+e)}saveTokenScript(e,t){if(!this.context.config.noLocalStorage)localStorage.setItem("ts-"+e,JSON.stringify(t))}}Repo.REPO_SOURCES=[ScriptURI,TokenScriptRepo];Repo.REPO_TTL=3600;const v1Txt='/*! For license information please see bundle.js.LICENSE.txt */\n(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{dQ:()=>Di,ci:()=>Ri,bytesToNumberBE:()=>Ti,ty:()=>Oi,eV:()=>Ui,n$:()=>Mi,ql:()=>Bi,hexToBytes:()=>xi,tL:()=>Ci,S5:()=>Si,FF:()=>Hi});var r={};t.r(r),t.d(r,{AbiCoder:()=>Cr,AbstractProvider:()=>Wl,AbstractSigner:()=>iu,AlchemyProvider:()=>Pu,AnkrProvider:()=>ku,BaseContract:()=>Jn,BaseWallet:()=>Mh,Block:()=>fn,BrowserProvider:()=>ih,CloudflareProvider:()=>Ru,ConstructorFragment:()=>vr,Contract:()=>zn,ContractEventPayload:()=>Nn,ContractFactory:()=>qn,ContractTransactionReceipt:()=>En,ContractTransactionResponse:()=>vn,ContractUnknownEventPayload:()=>kn,EnsPlugin:()=>Dc,EnsResolver:()=>vl,ErrorDescription:()=>Ur,ErrorFragment:()=>Ar,EtherSymbol:()=>rn,EtherscanPlugin:()=>xu,EtherscanProvider:()=>Cu,EventFragment:()=>Er,EventLog:()=>bn,EventPayload:()=>wn,FallbackFragment:()=>kr,FallbackProvider:()=>eh,FeeData:()=>un,FeeDataNetworkPlugin:()=>Fc,FetchCancelSignal:()=>Rc,FetchRequest:()=>xc,FetchResponse:()=>Tc,FetchUrlFeeDataNetworkPlugin:()=>Lc,FixedNumber:()=>wh,Fragment:()=>yr,FunctionFragment:()=>Nr,GasCostPlugin:()=>Uc,HDNodeVoidWallet:()=>Jf,HDNodeWallet:()=>_f,Indexed:()=>Dr,InfuraProvider:()=>ju,InfuraWebSocketProvider:()=>Hu,Interface:()=>Mr,IpcSocketProvider:()=>ch,JsonRpcApiProvider:()=>yu,JsonRpcProvider:()=>bu,JsonRpcSigner:()=>mu,LangEn:()=>Sh,Log:()=>dn,LogDescription:()=>Sr,MaxInt256:()=>tn,MaxUint256:()=>Xr,MessagePrefix:()=>nn,MinInt256:()=>$r,Mnemonic:()=>Lh,MulticoinProviderPlugin:()=>bl,N:()=>Yr,NamedFragment:()=>wr,Network:()=>Gc,NetworkPlugin:()=>Bc,NonceManager:()=>sh,ParamType:()=>mr,PocketProvider:()=>ah,QuickNodeProvider:()=>Vu,Result:()=>it,Signature:()=>Ei,SigningKey:()=>Eo,SocketBlockSubscriber:()=>Uu,SocketEventSubscriber:()=>Fu,SocketPendingSubscriber:()=>Du,SocketProvider:()=>Lu,SocketSubscriber:()=>Bu,StructFragment:()=>Pr,Transaction:()=>ul,TransactionDescription:()=>Br,TransactionReceipt:()=>pn,TransactionResponse:()=>gn,Typed:()=>me,TypedDataEncoder:()=>dc,UndecodedEventLog:()=>An,UnmanagedSubscriber:()=>Kl,Utf8ErrorFuncs:()=>S,VoidSigner:()=>ou,Wallet:()=>Xf,WebSocketProvider:()=>Mu,WeiPerEther:()=>Zr,Wordlist:()=>Th,WordlistOwl:()=>Oh,WordlistOwlA:()=>$f,ZeroAddress:()=>Wr,ZeroHash:()=>en,accessListify:()=>on,assert:()=>h,assertArgument:()=>f,assertArgumentCount:()=>d,assertNormalize:()=>g,assertPrivate:()=>m,checkResultErrors:()=>ot,computeAddress:()=>Va,computeHmac:()=>ws,concat:()=>N,copyRequest:()=>hn,dataLength:()=>P,dataSlice:()=>R,decodeBase58:()=>yl,decodeBase64:()=>gc,decodeBytes32String:()=>M,decodeRlp:()=>zc,decryptCrowdsaleJson:()=>Yf,decryptKeystoreJson:()=>Cf,decryptKeystoreJsonSync:()=>Tf,defaultPath:()=>Ff,defineProperties:()=>o,dnsEncode:()=>Qa,encodeBase58:()=>ml,encodeBase64:()=>mc,encodeBytes32String:()=>L,encodeRlp:()=>Qr,encryptKeystoreJson:()=>Df,encryptKeystoreJsonSync:()=>Uf,ensNormalize:()=>Ga,formatEther:()=>vh,formatUnits:()=>Ah,fromTwos:()=>Q,getAccountPath:()=>zf,getAddress:()=>ue,getBigInt:()=>_,getBytes:()=>w,getBytesCopy:()=>b,getCreate2Address:()=>Kr,getCreateAddress:()=>Vr,getDefaultProvider:()=>nh,getIcapAddress:()=>he,getIndexedAccountPath:()=>qf,getNumber:()=>W,getUint:()=>J,hashMessage:()=>_a,hexlify:()=>k,id:()=>Ue,isAddress:()=>Jr,isAddressable:()=>_r,isBytesLike:()=>E,isCallException:()=>l,isCrowdsaleJson:()=>Wf,isError:()=>c,isHexString:()=>A,isKeystoreJson:()=>Rf,isValidName:()=>Ha,keccak256:()=>re,lock:()=>fi,makeError:()=>u,mask:()=>K,namehash:()=>ja,parseEther:()=>kh,parseUnits:()=>Eh,pbkdf2:()=>Hs,randomBytes:()=>Ks,recoverAddress:()=>Ka,resolveAddress:()=>qr,resolveProperties:()=>i,ripemd160:()=>Fs,scrypt:()=>ri,scryptSync:()=>ni,sha256:()=>ui,sha512:()=>hi,showThrottleMessage:()=>Sc,solidityPacked:()=>Za,solidityPackedKeccak256:()=>Xa,solidityPackedSha256:()=>$a,stripZerosLeft:()=>I,toBeArray:()=>X,toBeHex:()=>Z,toBigInt:()=>q,toNumber:()=>Y,toQuantity:()=>$,toTwos:()=>V,toUtf8Bytes:()=>U,toUtf8CodePoints:()=>F,toUtf8String:()=>D,uuidV4:()=>Nh,verifyMessage:()=>Ja,verifyTypedData:()=>pc,version:()=>n,wordlists:()=>td,zeroPadBytes:()=>O,zeroPadValue:()=>T});const n="6.10.0";function s(t,e,r){const n=e.split("|").map((t=>t.trim()));for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${r}`,s.value=t,s}async function i(t){const e=Object.keys(t);return(await Promise.all(e.map((e=>Promise.resolve(t[e]))))).reduce(((t,r,n)=>(t[e[n]]=r,t)),{})}function o(t,e,r){for(let n in e){let i=e[n];const o=r?r[n]:null;o&&s(i,o,n),Object.defineProperty(t,n,{enumerable:!0,value:i,writable:!1})}}function a(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(a).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[15&t[n]];return r}if("object"==typeof t&&"function"==typeof t.toJSON)return a(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${a(e)}: ${a(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function c(t,e){return t&&t.code===e}function l(t){return c(t,"CALL_EXCEPTION")}function u(t,e,r){let s,i=t;{const s=[];if(r){if("message"in r||"code"in r||"name"in r)throw new Error(`value will overwrite populated values: ${a(r)}`);for(const t in r){if("shortMessage"===t)continue;const e=r[t];s.push(t+"="+a(e))}}s.push(`code=${e}`),s.push(`version=${n}`),s.length&&(t+=" ("+s.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return o(s,{code:e}),r&&Object.assign(s,r),null==s.shortMessage&&o(s,{shortMessage:i}),s}function h(t,e,r,n){if(!t)throw u(e,r,n)}function f(t,e,r,n){h(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function d(t,e,r){null==r&&(r=""),r&&(r=": "+r),h(t>=e,"missing arguemnt"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),h(t<=e,"too many arguemnts"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const p=["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);function g(t){h(p.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}function m(t,e,r){if(null==r&&(r=""),t!==e){let t=r,e="new";r&&(t+=".",e+=" "+r),h(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}function y(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let r=2;for(let n=0;n<e.length;n++)e[n]=parseInt(t.substring(r,r+2),16),r+=2;return e}f(!1,"invalid BytesLike value",e||"value",t)}function w(t,e){return y(t,e,!1)}function b(t,e){return y(t,e,!0)}function A(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof e&&t.length!==2+2*e||!0===e&&t.length%2!=0)}function E(t){return A(t,!0)||t instanceof Uint8Array}const v="0123456789abcdef";function k(t){const e=w(t);let r="0x";for(let t=0;t<e.length;t++){const n=e[t];r+=v[(240&n)>>4]+v[15&n]}return r}function N(t){return"0x"+t.map((t=>k(t).substring(2))).join("")}function P(t){return A(t,!0)?(t.length-2)/2:w(t).length}function R(t,e,r){const n=w(t);return null!=r&&r>n.length&&h(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),k(n.slice(null==e?0:e,null==r?n.length:r))}function I(t){let e=k(t).substring(2);for(;e.startsWith("00");)e=e.substring(2);return"0x"+e}function x(t,e,r){const n=w(t);h(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),r?s.set(n,e-n.length):s.set(n,0),k(s)}function T(t,e){return x(t,e,!0)}function O(t,e){return x(t,e,!1)}function C(t,e,r,n,s){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return"OVERRUN"===t?r.length-e-1:0}const S=Object.freeze({error:function(t,e,r,n,s){f(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:C,replace:function(t,e,r,n,s){return"OVERLONG"===t?(f("number"==typeof s,"invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),C(t,e,r))}});function B(t,e){null==e&&(e=S.error);const r=w(t,"bytes"),n=[];let s=0;for(;s<r.length;){const t=r[s++];if(t>>7==0){n.push(t);continue}let i=null,o=null;if(192==(224&t))i=1,o=127;else if(224==(240&t))i=2,o=2047;else{if(240!=(248&t)){s+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,r,n);continue}i=3,o=65535}if(s-1+i>=r.length){s+=e("OVERRUN",s-1,r,n);continue}let a=t&(1<<8-i-1)-1;for(let t=0;t<i;t++){let t=r[s];if(128!=(192&t)){s+=e("MISSING_CONTINUE",s,r,n),a=null;break}a=a<<6|63&t,s++}null!==a&&(a>1114111?s+=e("OUT_OF_RANGE",s-1-i,r,n,a):a>=55296&&a<=57343?s+=e("UTF16_SURROGATE",s-1-i,r,n,a):a<=o?s+=e("OVERLONG",s-1-i,r,n,a):n.push(a))}return n}function U(t,e){null!=e&&(g(e),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){e++;const s=t.charCodeAt(e);f(e<t.length&&56320==(64512&s),"invalid surrogate pair","str",t);const i=65536+((1023&n)<<10)+(1023&s);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function D(t,e){return B(t,e).map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}function F(t,e){return B(U(t,e))}function L(t){const e=U(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return O(e,32)}function M(t){const e=w(t,"bytes");if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===e[r-1];)r--;return D(e.slice(0,r))}const G=BigInt(0),H=BigInt(1),j=9007199254740991;function Q(t,e){const r=J(t,"value"),n=BigInt(W(e,"width"));return h(r>>n===G,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-H?-((~r&(H<<n)-H)+H):r}function V(t,e){let r=_(t,"value");const n=BigInt(W(e,"width")),s=H<<n-H;return r<G?(r=-r,h(r<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),(~r&(H<<n)-H)+H):(h(r<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),r)}function K(t,e){const r=J(t,"value"),n=BigInt(W(e,"bits"));return r&(H<<n)-H}function _(t,e){switch(typeof t){case"bigint":return t;case"number":return f(Number.isInteger(t),"underflow",e||"value",t),f(t>=-j&&t<=j,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(r){f(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}f(!1,"invalid BigNumberish value",e||"value",t)}function J(t,e){const r=_(t,e);return h(r>=G,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const z="0123456789abcdef";function q(t){if(t instanceof Uint8Array){let e="0x0";for(const r of t)e+=z[r>>4],e+=z[15&r];return BigInt(e)}return _(t)}function W(t,e){switch(typeof t){case"bigint":return f(t>=-j&&t<=j,"overflow",e||"value",t),Number(t);case"number":return f(Number.isInteger(t),"underflow",e||"value",t),f(t>=-j&&t<=j,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return W(BigInt(t),e)}catch(r){f(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}f(!1,"invalid numeric value",e||"value",t)}function Y(t){return W(q(t))}function Z(t,e){let r=J(t,"value").toString(16);if(null==e)r.length%2&&(r="0"+r);else{const n=W(e,"width");for(h(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<2*n;)r="0"+r}return"0x"+r}function X(t){const e=J(t,"value");if(e===G)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);const n=new Uint8Array(r.length/2);for(let t=0;t<n.length;t++){const e=2*t;n[t]=parseInt(r.substring(e,e+2),16)}return n}function $(t){let e=k(E(t)?t:X(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}const tt=32,et=new Uint8Array(tt),rt=["then"],nt={};function st(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}class it extends Array{#t;constructor(...t){const e=t[0];let r=t[1],n=(t[2]||[]).slice(),s=!0;e!==nt&&(r=t,n=[],s=!1),super(r.length),r.forEach(((t,e)=>{this[e]=t}));const i=n.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(this.#t=Object.freeze(r.map(((t,e)=>{const r=n[e];return null!=r&&1===i.get(r)?r:null}))),s)return Object.freeze(this),new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const r=W(e,"%index");if(r<0||r>=this.length)throw new RangeError("out of result range");const n=t[r];return n instanceof Error&&st(`index ${r}`,n),n}if(rt.indexOf(e)>=0)return Reflect.get(t,e,r);const n=t[e];if(n instanceof Function)return function(...e){return n.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}})}toArray(){const t=[];return this.forEach(((e,r)=>{e instanceof Error&&st(`index ${r}`,e),t.push(e)})),t}toObject(){return this.#t.reduce(((t,e,r)=>(h(null!=e,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),e in t||(t[e]=this.getValue(e)),t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const r=[],n=[];for(let s=t;s<e;s++)r.push(this[s]),n.push(this.#t[s]);return new it(nt,r,n)}filter(t,e){const r=[],n=[];for(let s=0;s<this.length;s++){const i=this[s];i instanceof Error&&st(`index ${s}`,i),t.call(e,i,s,this)&&(r.push(i),n.push(this.#t[s]))}return new it(nt,r,n)}map(t,e){const r=[];for(let n=0;n<this.length;n++){const s=this[n];s instanceof Error&&st(`index ${n}`,s),r.push(t.call(e,s,n,this))}return r}getValue(t){const e=this.#t.indexOf(t);if(-1===e)return;const r=this[e];return r instanceof Error&&st(`property ${JSON.stringify(t)}`,r.error),r}static fromItems(t,e){return new it(nt,t,e)}}function ot(t){const e=[],r=function(t,n){if(Array.isArray(n))for(let s in n){const i=t.slice();i.push(s);try{r(i,n[s])}catch(t){e.push({path:i,error:t})}}};return r([],t),e}function at(t){let e=X(t);return h(e.length<=tt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:tt,offset:e.length}),e.length!==tt&&(e=b(N([et.slice(e.length%tt),e]))),e}class ct{name;type;localName;dynamic;constructor(t,e,r,n){o(this,{name:t,type:e,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){f(!1,t,this.localName,e)}}class lt{#e;#r;constructor(){this.#e=[],this.#r=0}get data(){return N(this.#e)}get length(){return this.#r}#n(t){return this.#e.push(t),this.#r+=t.length,t.length}appendWriter(t){return this.#n(b(t.data))}writeBytes(t){let e=b(t);const r=e.length%tt;return r&&(e=b(N([e,et.slice(r)]))),this.#n(e)}writeValue(t){return this.#n(at(t))}writeUpdatableValue(){const t=this.#e.length;return this.#e.push(et),this.#r+=tt,e=>{this.#e[t]=at(e)}}}class ut{allowLoose;#e;#s;#i;#o;#a;constructor(t,e,r){o(this,{allowLoose:!!e}),this.#e=b(t),this.#i=0,this.#o=null,this.#a=null!=r?r:1024,this.#s=0}get data(){return k(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#s}get bytes(){return new Uint8Array(this.#e)}#c(t){if(this.#o)return this.#o.#c(t);this.#i+=t,h(this.#a<1||this.#i<=this.#a*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#a} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:b(this.#e),offset:this.#s,length:t,info:{bytesRead:this.#i,dataLength:this.dataLength}})}#l(t,e,r){let n=Math.ceil(e/tt)*tt;return this.#s+n>this.#e.length&&(this.allowLoose&&r&&this.#s+e<=this.#e.length?n=e:h(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:b(this.#e),length:this.#e.length,offset:this.#s+n})),this.#e.slice(this.#s,this.#s+n)}subReader(t){const e=new ut(this.#e.slice(this.#s+t),this.allowLoose,this.#a);return e.#o=this,e}readBytes(t,e){let r=this.#l(0,t,!!e);return this.#c(t),this.#s+=r.length,r.slice(0,t)}readValue(){return q(this.readBytes(tt))}readIndex(){return Y(this.readBytes(tt))}}function ht(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function ft(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function dt(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ht(t.outputLen),ht(t.blockLen)}function pt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function gt(t,e){ft(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const mt=BigInt(2**32-1),yt=BigInt(32);function wt(t,e=!1){return e?{h:Number(t&mt),l:Number(t>>yt&mt)}:{h:0|Number(t>>yt&mt),l:0|Number(t&mt)}}function bt(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=wt(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}const At=(t,e,r)=>t<<r|e>>>32-r,Et=(t,e,r)=>e<<r|t>>>32-r,vt=(t,e,r)=>e<<r-32|t>>>64-r,kt=(t,e,r)=>t<<r-32|e>>>64-r,Nt={fromBig:wt,split:bt,toBig:(t,e)=>BigInt(t>>>0)<<yt|BigInt(e>>>0),shrSH:(t,e,r)=>t>>>r,shrSL:(t,e,r)=>t<<32-r|e>>>r,rotrSH:(t,e,r)=>t>>>r|e<<32-r,rotrSL:(t,e,r)=>t<<32-r|e>>>r,rotrBH:(t,e,r)=>t<<64-r|e>>>r-32,rotrBL:(t,e,r)=>t>>>r-32|e<<64-r,rotr32H:(t,e)=>e,rotr32L:(t,e)=>t,rotlSH:At,rotlSL:Et,rotlBH:vt,rotlBL:kt,add:function(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:0|s}},add3L:(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),add3H:(t,e,r,n)=>e+r+n+(t/2**32|0)|0,add4L:(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),add4H:(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,add5H:(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,add5L:(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0)},Pt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Rt=t=>t instanceof Uint8Array,It=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),xt=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Tt=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const Ot=async()=>{};async function Ct(t,e,r){let n=Date.now();for(let s=0;s<t;s++){r(s);const t=Date.now()-n;t>=0&&t<e||(await Ot(),n+=t)}}function St(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}(t)),!Rt(t))throw new Error("expected Uint8Array, got "+typeof t);return t}class Bt{clone(){return this._cloneInto()}}const Ut={}.toString;function Dt(t,e){if(void 0!==e&&"[object Object]"!==Ut.call(e))throw new Error("Options should be object or undefined");return Object.assign(t,e)}function Ft(t){const e=e=>t().update(St(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Lt(t=32){if(Pt&&"function"==typeof Pt.getRandomValues)return Pt.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}const[Mt,Gt,Ht]=[[],[],[]],jt=BigInt(0),Qt=BigInt(1),Vt=BigInt(2),Kt=BigInt(7),_t=BigInt(256),Jt=BigInt(113);for(let t=0,e=Qt,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Mt.push(2*(5*n+r)),Gt.push((t+1)*(t+2)/2%64);let s=jt;for(let t=0;t<7;t++)e=(e<<Qt^(e>>Kt)*Jt)%_t,e&Vt&&(s^=Qt<<(Qt<<BigInt(t))-Qt);Ht.push(s)}const[zt,qt]=bt(Ht,!0),Wt=(t,e,r)=>r>32?vt(t,e,r):At(t,e,r),Yt=(t,e,r)=>r>32?kt(t,e,r):Et(t,e,r);class Zt extends Bt{constructor(t,e,r,n=!1,s=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ht(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=It(this.state)}keccak(){!function(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const n=(e+8)%10,s=(e+2)%10,i=r[s],o=r[s+1],a=Wt(i,o,1)^r[n],c=Yt(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=c}let e=t[2],s=t[3];for(let r=0;r<24;r++){const n=Gt[r],i=Wt(e,s,n),o=Yt(e,s,n),a=Mt[r];e=t[a],s=t[a+1],t[a]=i,t[a+1]=o}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=zt[n],t[1]^=qt[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){pt(this);const{blockLen:e,state:r}=this,n=(t=St(t)).length;for(let s=0;s<n;){const i=Math.min(e-this.pos,n-s);for(let e=0;e<i;e++)r[this.pos++]^=t[s++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,0!=(128&e)&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){pt(this,!1),ft(t),this.finish();const e=this.state,{blockLen:r}=this;for(let n=0,s=t.length;n<s;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,s-n);t.set(e.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ht(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(gt(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:n,rounds:s,enableXOF:i}=this;return t||(t=new Zt(e,r,n,i,s)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=s,t.suffix=r,t.outputLen=n,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Xt=((t,e,r)=>Ft((()=>new Zt(e,t,r))))(1,136,32);let $t=!1;const te=function(t){return Xt(t)};let ee=te;function re(t){const e=w(t,"data");return k(ee(e))}re._=te,re.lock=function(){$t=!0},re.register=function(t){if($t)throw new TypeError("keccak256 is locked");ee=t},Object.freeze(re);const ne=BigInt(0),se=BigInt(36);function ie(t){const e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);const n=w(re(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const oe={};for(let t=0;t<10;t++)oe[String(t)]=String(t);for(let t=0;t<26;t++)oe[String.fromCharCode(65+t)]=String(10+t);const ae=15;function ce(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>oe[t])).join("");for(;e.length>=ae;){let t=e.substring(0,ae);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}const le=function(){const t={};for(let e=0;e<36;e++)t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return t}();function ue(t){if(f("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=ie(t);return f(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){f(t.substring(2,4)===ce(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=ne;for(let r=0;r<t.length;r++)e=e*se+le[t[r]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return ie("0x"+e)}f(!1,"invalid address","address",t)}function he(t){let e=BigInt(ue(t)).toString(36).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+ce("XE00"+e)+e}const fe={};function de(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new me(fe,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function pe(t,e){return new me(fe,`bytes${e||""}`,t,{size:e})}const ge=Symbol.for("_ethers_typed");class me{type;value;#u;_typedSymbol;constructor(t,e,r,n){null==n&&(n=null),m(fe,t,"Typed"),o(this,{_typedSymbol:ge,type:e,value:r}),this.#u=n,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(t,e){return new me(fe,t,e)}static uint8(t){return de(t,8)}static uint16(t){return de(t,16)}static uint24(t){return de(t,24)}static uint32(t){return de(t,32)}static uint40(t){return de(t,40)}static uint48(t){return de(t,48)}static uint56(t){return de(t,56)}static uint64(t){return de(t,64)}static uint72(t){return de(t,72)}static uint80(t){return de(t,80)}static uint88(t){return de(t,88)}static uint96(t){return de(t,96)}static uint104(t){return de(t,104)}static uint112(t){return de(t,112)}static uint120(t){return de(t,120)}static uint128(t){return de(t,128)}static uint136(t){return de(t,136)}static uint144(t){return de(t,144)}static uint152(t){return de(t,152)}static uint160(t){return de(t,160)}static uint168(t){return de(t,168)}static uint176(t){return de(t,176)}static uint184(t){return de(t,184)}static uint192(t){return de(t,192)}static uint200(t){return de(t,200)}static uint208(t){return de(t,208)}static uint216(t){return de(t,216)}static uint224(t){return de(t,224)}static uint232(t){return de(t,232)}static uint240(t){return de(t,240)}static uint248(t){return de(t,248)}static uint256(t){return de(t,256)}static uint(t){return de(t,256)}static int8(t){return de(t,-8)}static int16(t){return de(t,-16)}static int24(t){return de(t,-24)}static int32(t){return de(t,-32)}static int40(t){return de(t,-40)}static int48(t){return de(t,-48)}static int56(t){return de(t,-56)}static int64(t){return de(t,-64)}static int72(t){return de(t,-72)}static int80(t){return de(t,-80)}static int88(t){return de(t,-88)}static int96(t){return de(t,-96)}static int104(t){return de(t,-104)}static int112(t){return de(t,-112)}static int120(t){return de(t,-120)}static int128(t){return de(t,-128)}static int136(t){return de(t,-136)}static int144(t){return de(t,-144)}static int152(t){return de(t,-152)}static int160(t){return de(t,-160)}static int168(t){return de(t,-168)}static int176(t){return de(t,-176)}static int184(t){return de(t,-184)}static int192(t){return de(t,-192)}static int200(t){return de(t,-200)}static int208(t){return de(t,-208)}static int216(t){return de(t,-216)}static int224(t){return de(t,-224)}static int232(t){return de(t,-232)}static int240(t){return de(t,-240)}static int248(t){return de(t,-248)}static int256(t){return de(t,-256)}static int(t){return de(t,-256)}static bytes1(t){return pe(t,1)}static bytes2(t){return pe(t,2)}static bytes3(t){return pe(t,3)}static bytes4(t){return pe(t,4)}static bytes5(t){return pe(t,5)}static bytes6(t){return pe(t,6)}static bytes7(t){return pe(t,7)}static bytes8(t){return pe(t,8)}static bytes9(t){return pe(t,9)}static bytes10(t){return pe(t,10)}static bytes11(t){return pe(t,11)}static bytes12(t){return pe(t,12)}static bytes13(t){return pe(t,13)}static bytes14(t){return pe(t,14)}static bytes15(t){return pe(t,15)}static bytes16(t){return pe(t,16)}static bytes17(t){return pe(t,17)}static bytes18(t){return pe(t,18)}static bytes19(t){return pe(t,19)}static bytes20(t){return pe(t,20)}static bytes21(t){return pe(t,21)}static bytes22(t){return pe(t,22)}static bytes23(t){return pe(t,23)}static bytes24(t){return pe(t,24)}static bytes25(t){return pe(t,25)}static bytes26(t){return pe(t,26)}static bytes27(t){return pe(t,27)}static bytes28(t){return pe(t,28)}static bytes29(t){return pe(t,29)}static bytes30(t){return pe(t,30)}static bytes31(t){return pe(t,31)}static bytes32(t){return pe(t,32)}static address(t){return new me(fe,"address",t)}static bool(t){return new me(fe,"bool",!!t)}static bytes(t){return new me(fe,"bytes",t)}static string(t){return new me(fe,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new me(fe,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===ge}static dereference(t,e){if(me.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class ye extends ct{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=me.dereference(e,"string");try{r=ue(r)}catch(t){return this._throwError(t.message,e)}return t.writeValue(r)}decode(t){return ue(Z(t.readValue(),20))}}class we extends ct{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function be(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map((e=>{const n=e.localName;return h(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),h(!t[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),t[n]=!0,r[n]}))}else f(!1,"invalid tuple value","tuple",r);f(e.length===n.length,"types/value length mismatch","tuple",r);let s=new lt,i=new lt,o=[];e.forEach(((t,e)=>{let r=n[e];if(t.dynamic){let e=i.length;t.encode(i,r);let n=s.writeUpdatableValue();o.push((t=>{n(t+e)}))}else t.encode(s,r)})),o.forEach((t=>{t(s.length)}));let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Ae(t,e){let r=[],n=[],s=t.subReader(0);return e.forEach((e=>{let i=null;if(e.dynamic){let r=t.readIndex(),n=s.subReader(r);try{i=e.decode(n)}catch(t){if(c(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(c(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}if(null==i)throw new Error("investigate");r.push(i),n.push(e.localName||null)})),it.fromItems(r,n)}class Ee extends ct{coder;length;constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),o(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){const r=me.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,t.writeValue(r.length)),d(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let t=0;t<r.length;t++)s.push(this.coder);return be(t,s,r)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),h(e*tt<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*tt,length:t.dataLength}));let r=[];for(let t=0;t<e;t++)r.push(new we(this.coder));return Ae(t,r)}}class ve extends ct{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const r=me.dereference(e,"bool");return t.writeValue(r?1:0)}decode(t){return!!t.readValue()}}class ke extends ct{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=b(e);let r=t.writeValue(e.length);return r+=t.writeBytes(e),r}decode(t){return t.readBytes(t.readIndex(),!0)}}class Ne extends ke{constructor(t){super("bytes",t)}decode(t){return k(super.decode(t))}}class Pe extends ct{size;constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),o(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=b(me.dereference(e,this.type));return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return k(t.readBytes(this.size))}}const Re=new Uint8Array([]);class Ie extends ct{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(Re)}decode(t){return t.readBytes(0),null}}const xe=BigInt(0),Te=BigInt(1),Oe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ce extends ct{size;signed;constructor(t,e,r){const n=(e?"int":"uint")+8*t;super(n,n,r,!1),o(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=_(me.dereference(e,this.type)),n=K(Oe,256);if(this.signed){let t=K(n,8*this.size-1);(r>t||r<-(t+Te))&&this._throwError("value out-of-bounds",e),r=V(r,256)}else(r<xe||r>K(n,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=K(t.readValue(),8*this.size);return this.signed&&(e=Q(e,8*this.size)),e}}class Se extends ke{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,U(me.dereference(e,"string")))}decode(t){return D(super.decode(t))}}class Be extends ct{coders;constructor(t,e){let r=!1;const n=[];t.forEach((t=>{t.dynamic&&(r=!0),n.push(t.type)})),super("tuple","tuple("+n.join(",")+")",e,r),o(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t}),{});return this.coders.forEach(((r,n)=>{let s=r.localName;s&&1===e[s]&&("length"===s&&(s="_length"),null==t[s]&&(t[s]=t[n]))})),Object.freeze(t)}encode(t,e){const r=me.dereference(e,"tuple");return be(t,this.coders,r)}decode(t){return Ae(t,this.coders)}}function Ue(t){return re(U(t))}function De(t){const e=new Set;return t.forEach((t=>e.add(t))),Object.freeze(e)}const Fe=De("external public payable".split(" ")),Le="constant external internal payable private public pure view",Me=De(Le.split(" ")),Ge="constructor error event fallback function receive struct",He=De(Ge.split(" ")),je="calldata memory storage payable indexed",Qe=De(je.split(" ")),Ve=De([Ge,je,"tuple returns",Le].join(" ").split(" ")),Ke={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},_e=new RegExp("^(\\\\s*)"),Je=new RegExp("^([0-9]+)"),ze=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),qe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),We=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class Ye{#s;#h;get offset(){return this.#s}get length(){return this.#h.length-this.#s}constructor(t){this.#s=0,this.#h=t.slice()}clone(){return new Ye(this.#h)}reset(){this.#s=0}#f(t=0,e=0){return new Ye(this.#h.slice(t,e).map((e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t})))))}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t)throw new Error(`expected ${t}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=this.#f(this.#s+1,t.match+1);return this.#s=t.match+1,e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;this.#s<t.match-1;){const t=this.peek().linkNext;e.push(this.#f(this.#s+1,t)),this.#s=t}return this.#s=t.match+1,e}peek(){if(this.#s>=this.#h.length)throw new Error("out-of-bounds");return this.#h[this.#s]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#s++,t}toString(){const t=[];for(let e=this.#s;e<this.#h.length;e++){const r=this.#h[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}}function Ze(t){const e=[],r=e=>{const r=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${r} at ${i}: ${e}`)};let n=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(_e);a&&(i+=a[1].length,o=t.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=Ke[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,"OPEN_PAREN"===l)n.push(e.length-1),s.push(e.length-1);else if("CLOSE_PAREN"==l)0===n.length&&r("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if("COMMA"===l)c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const r=e.pop().text;t=r+t,e[e.length-1].value=W(r)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else if(a=o.match(ze),a){if(c.text=a[1],i+=c.text.length,Ve.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(We)){c.type="TYPE";continue}c.type="ID"}else{if(a=o.match(Je),!a)throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`);c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new Ye(e.map((t=>Object.freeze(t))))}function Xe(t,e){let r=[];for(const n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw new Error(`conflicting types: ${r.join(", ")}`)}function $e(t,e){if(e.peekKeyword(He)){const r=e.pop().text;if(r!==t)throw new Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function tr(t,e){const r=new Set;for(;;){const n=t.peekType("KEYWORD");if(null==n||e&&!e.has(n))break;if(t.pop(),r.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function er(t){let e=tr(t,Me);return Xe(e,De("constant payable nonpayable".split(" "))),Xe(e,De("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function rr(t,e){return t.popParams().map((t=>mr.from(t,e)))}function nr(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return _(t.pop().text);throw new Error("invalid gas")}return null}function sr(t){if(t.length)throw new Error(`unexpected tokens: ${t.toString()}`)}const ir=new RegExp(/^(.*)\\[([0-9]*)\\]$/);function or(t){const e=t.match(We);if(f(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const r=parseInt(e[2]);f(0!==r&&r<=32,"invalid bytes length","type",t)}else if(e[3]){const r=parseInt(e[3]);f(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",t)}return t}const ar={},cr=Symbol.for("_ethers_internal"),lr="_ParamTypeInternal",ur="_ErrorInternal",hr="_EventInternal",fr="_ConstructorInternal",dr="_FallbackInternal",pr="_FunctionInternal",gr="_StructInternal";class mr{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,r,n,s,i,a,c){if(m(t,ar,"ParamType"),Object.defineProperty(this,cr,{value:lr}),i&&(i=Object.freeze(i.slice())),"array"===n){if(null==a||null==c)throw new Error("")}else if(null!=a||null!=c)throw new Error("");if("tuple"===n){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");o(this,{name:e,type:r,baseType:n,indexed:s,components:i,arrayLength:a,arrayChildren:c})}format(t){if(null==t&&(t="sighash"),"json"===t){const e=this.name||"";if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}const r={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map((e=>e.format(t))).join("full"===t?", ":",")+")":e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return t.map((t=>r.arrayChildren.walk(t,e)))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const r=this;return t.map(((t,n)=>r.components[n].walk(t,e)))}return e(this.type,t)}#d(t,e,r,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=e.slice();return i.forEach(((e,n)=>{s.#d(t,e,r,(t=>{i[n]=t}))})),void n(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(e))i=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");i=s.map((t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((e,n)=>{s[n].#d(t,e,r,(t=>{i[n]=t}))})),void n(i)}const s=r(this.type,e);s.then?t.push(async function(){n(await s)}()):n(s)}async walkAsync(t,e){const r=[],n=[t];return this.#d(r,t,e,(t=>{n[0]=t})),r.length&&await Promise.all(r),n[0]}static from(t,e){if(mr.isParamType(t))return t;if("string"==typeof t)try{return mr.from(Ze(t),e)}catch(e){f(!1,"invalid param type","obj",t)}else if(t instanceof Ye){let r="",n="",s=null;tr(t,De(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(n="tuple",s=t.popParams().map((t=>mr.from(t))),r=`tuple(${s.map((t=>t.format())).join(",")})`):(r=or(t.popType("TYPE")),n=r);let i=null,o=null;for(;t.length&&t.peekType("BRACKET");){const e=t.pop();i=new mr(ar,"",r,n,null,s,o,i),o=e.value,r+=e.text,n="array",s=null}let a=null;if(tr(t,Qe).has("indexed")){if(!e)throw new Error("");a=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new mr(ar,c,r,n,a,s,o,i)}const r=t.name;f(!r||"string"==typeof r&&r.match(qe),"invalid name","obj.name",r);let n=t.indexed;null!=n&&(f(e,"parameter cannot be indexed","obj.indexed",t.indexed),n=!!n);let s=t.type,i=s.match(ir);if(i){const e=parseInt(i[2]||"-1"),o=mr.from({type:i[1],components:t.components});return new mr(ar,r||"",s,"array",n,null,e,o)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const e=null!=t.components?t.components.map((t=>mr.from(t))):null;return new mr(ar,r||"",s,"tuple",n,e,null,null)}return s=or(t.type),new mr(ar,r||"",s,s,n,null,null,null)}static isParamType(t){return t&&t[cr]===lr}}class yr{type;inputs;constructor(t,e,r){m(t,ar,"Fragment"),o(this,{type:e,inputs:r=Object.freeze(r.slice())})}static from(t){if("string"==typeof t){try{yr.from(JSON.parse(t))}catch(t){}return yr.from(Ze(t))}if(t instanceof Ye)switch(t.peekKeyword(He)){case"constructor":return vr.from(t);case"error":return Ar.from(t);case"event":return Er.from(t);case"fallback":case"receive":return kr.from(t);case"function":return Nr.from(t);case"struct":return Pr.from(t)}else if("object"==typeof t){switch(t.type){case"constructor":return vr.from(t);case"error":return Ar.from(t);case"event":return Er.from(t);case"fallback":case"receive":return kr.from(t);case"function":return Nr.from(t);case"struct":return Pr.from(t)}h(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}f(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return vr.isFragment(t)}static isError(t){return Ar.isFragment(t)}static isEvent(t){return Er.isFragment(t)}static isFunction(t){return Nr.isFragment(t)}static isStruct(t){return Pr.isFragment(t)}}class wr extends yr{name;constructor(t,e,r,n){super(t,e,n),f("string"==typeof r&&r.match(qe),"invalid identifier","name",r),n=Object.freeze(n.slice()),o(this,{name:r})}}function br(t,e){return"("+e.map((e=>e.format(t))).join("full"===t?", ":",")+")"}class Ar extends wr{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,cr,{value:ur})}get selector(){return Ue(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("error"),e.push(this.name+br(t,this.inputs)),e.join(" ")}static from(t){if(Ar.isFragment(t))return t;if("string"==typeof t)return Ar.from(Ze(t));if(t instanceof Ye){const e=$e("error",t),r=rr(t);return sr(t),new Ar(ar,e,r)}return new Ar(ar,t.name,t.inputs?t.inputs.map(mr.from):[])}static isFragment(t){return t&&t[cr]===ur}}class Er extends wr{anonymous;constructor(t,e,r,n){super(t,"event",e,r),Object.defineProperty(this,cr,{value:hr}),o(this,{anonymous:n})}get topicHash(){return Ue(this.format("sighash"))}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("event"),e.push(this.name+br(t,this.inputs)),"sighash"!==t&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){return e=(e||[]).map((t=>mr.from(t))),new Er(ar,t,e,!1).topicHash}static from(t){if(Er.isFragment(t))return t;if("string"==typeof t)try{return Er.from(Ze(t))}catch(e){f(!1,"invalid event fragment","obj",t)}else if(t instanceof Ye){const e=$e("event",t),r=rr(t,!0),n=!!tr(t,De(["anonymous"])).has("anonymous");return sr(t),new Er(ar,e,r,n)}return new Er(ar,t.name,t.inputs?t.inputs.map((t=>mr.from(t,!0))):[],!!t.anonymous)}static isFragment(t){return t&&t[cr]===hr}}class vr extends yr{payable;gas;constructor(t,e,r,n,s){super(t,e,r),Object.defineProperty(this,cr,{value:fr}),o(this,{payable:n,gas:s})}format(t){if(h(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[`constructor${br(t,this.inputs)}`];return this.payable&&e.push("payable"),null!=this.gas&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(vr.isFragment(t))return t;if("string"==typeof t)try{return vr.from(Ze(t))}catch(e){f(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof Ye){tr(t,De(["constructor"]));const e=rr(t),r=!!tr(t,Fe).has("payable"),n=nr(t);return sr(t),new vr(ar,"constructor",e,r,n)}return new vr(ar,"constructor",t.inputs?t.inputs.map(mr.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[cr]===fr}}class kr extends yr{payable;constructor(t,e,r){super(t,"fallback",e),Object.defineProperty(this,cr,{value:dr}),o(this,{payable:r})}format(t){const e=0===this.inputs.length?"receive":"fallback";if("json"===t){const t=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:t})}return`${e}()${this.payable?" payable":""}`}static from(t){if(kr.isFragment(t))return t;if("string"==typeof t)try{return kr.from(Ze(t))}catch(e){f(!1,"invalid fallback fragment","obj",t)}else if(t instanceof Ye){const e=t.toString();if(f(t.peekKeyword(De(["fallback","receive"])),"type must be fallback or receive","obj",e),"receive"===t.popKeyword(De(["fallback","receive"]))){const e=rr(t);return f(0===e.length,"receive cannot have arguments","obj.inputs",e),tr(t,De(["payable"])),sr(t),new kr(ar,[],!0)}let r=rr(t);r.length?f(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map((t=>t.format("minimal"))).join(", ")):r=[mr.from("bytes")];const n=er(t);if(f("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),tr(t,De(["returns"])).has("returns")){const e=rr(t);f(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map((t=>t.format("minimal"))).join(", "))}return sr(t),new kr(ar,r,"payable"===n)}if("receive"===t.type)return new kr(ar,[],!0);if("fallback"===t.type){const e=[mr.from("bytes")],r="payable"===t.stateMutability;return new kr(ar,e,r)}f(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[cr]===dr}}class Nr extends wr{constant;outputs;stateMutability;payable;gas;constructor(t,e,r,n,s,i){super(t,"function",e,n),Object.defineProperty(this,cr,{value:pr}),o(this,{constant:"view"===r||"pure"===r,gas:i,outputs:s=Object.freeze(s.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return Ue(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("function"),e.push(this.name+br(t,this.inputs)),"sighash"!==t&&("nonpayable"!==this.stateMutability&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(br(t,this.outputs))),null!=this.gas&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){return e=(e||[]).map((t=>mr.from(t))),new Nr(ar,t,"view",e,[],null).selector}static from(t){if(Nr.isFragment(t))return t;if("string"==typeof t)try{return Nr.from(Ze(t))}catch(e){f(!1,"invalid function fragment","obj",t)}else if(t instanceof Ye){const e=$e("function",t),r=rr(t),n=er(t);let s=[];tr(t,De(["returns"])).has("returns")&&(s=rr(t));const i=nr(t);return sr(t),new Nr(ar,e,n,r,s,i)}let e=t.stateMutability;return null==e&&(e="payable","boolean"==typeof t.constant?(e="view",t.constant||(e="payable","boolean"!=typeof t.payable||t.payable||(e="nonpayable"))):"boolean"!=typeof t.payable||t.payable||(e="nonpayable")),new Nr(ar,t.name,e,t.inputs?t.inputs.map(mr.from):[],t.outputs?t.outputs.map(mr.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[cr]===pr}}class Pr extends wr{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,cr,{value:gr})}format(){throw new Error("@TODO")}static from(t){if("string"==typeof t)try{return Pr.from(Ze(t))}catch(e){f(!1,"invalid struct fragment","obj",t)}else if(t instanceof Ye){const e=$e("struct",t),r=rr(t);return sr(t),new Pr(ar,e,r)}return new Pr(ar,t.name,t.inputs?t.inputs.map(mr.from):[])}static isFragment(t){return t&&t[cr]===gr}}const Rr=new Map;Rr.set(0,"GENERIC_PANIC"),Rr.set(1,"ASSERT_FALSE"),Rr.set(17,"OVERFLOW"),Rr.set(18,"DIVIDE_BY_ZERO"),Rr.set(33,"ENUM_RANGE_ERROR"),Rr.set(34,"BAD_STORAGE_DATA"),Rr.set(49,"STACK_UNDERFLOW"),Rr.set(50,"ARRAY_RANGE_ERROR"),Rr.set(65,"OUT_OF_MEMORY"),Rr.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ir=new RegExp(/^bytes([0-9]*)$/),xr=new RegExp(/^(u?int)([0-9]*)$/);let Tr=null,Or=1024;class Cr{#p(t){if(t.isArray())return new Ee(this.#p(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new Be(t.components.map((t=>this.#p(t))),t.name);switch(t.baseType){case"address":return new ye(t.name);case"bool":return new ve(t.name);case"string":return new Se(t.name);case"bytes":return new Ne(t.name);case"":return new Ie(t.name)}let e=t.type.match(xr);if(e){let r=parseInt(e[2]||"256");return f(0!==r&&r<=256&&r%8==0,"invalid "+e[1]+" bit length","param",t),new Ce(r/8,"int"===e[1],t.name)}if(e=t.type.match(Ir),e){let r=parseInt(e[1]);return f(0!==r&&r<=32,"invalid bytes length","param",t),new Pe(r,t.name)}f(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map((t=>this.#p(mr.from(t))));return new Be(e,"_").defaultValue()}encode(t,e){d(e.length,t.length,"types/values length mismatch");const r=t.map((t=>this.#p(mr.from(t)))),n=new Be(r,"_"),s=new lt;return n.encode(s,e),s.data}decode(t,e,r){const n=t.map((t=>this.#p(mr.from(t))));return new Be(n,"_").decode(new ut(e,r,Or))}static _setDefaultMaxInflation(t){f("number"==typeof t&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),Or=t}static defaultAbiCoder(){return null==Tr&&(Tr=new Cr),Tr}static getBuiltinCallException(t,e,r){return function(t,e,r,n){let s="missing revert data",i=null,o=null;if(r){s="execution reverted";const t=w(r);if(r=k(r),0===t.length)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(t.length%32!=4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===k(t.slice(0,4)))try{i=n.decode(["string"],t.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch(t){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===k(t.slice(0,4)))try{const e=Number(n.decode(["uint256"],t.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[e]},i=`Panic due to ${Rr.get(e)||"UNKNOWN"}(${e})`,s+=`: ${i}`}catch(t){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const a={to:e.to?ue(e.to):null,data:e.data||"0x"};return e.from&&(a.from=ue(e.from)),u(s,"CALL_EXCEPTION",{action:t,data:r,reason:i,transaction:a,invocation:null,revert:o})}(t,e,r,Cr.defaultAbiCoder())}}class Sr{fragment;name;signature;topic;args;constructor(t,e,r){const n=t.name,s=t.format();o(this,{fragment:t,name:n,signature:s,topic:e,args:r})}}class Br{fragment;name;args;signature;selector;value;constructor(t,e,r,n){const s=t.name,i=t.format();o(this,{fragment:t,name:s,args:r,signature:i,selector:e,value:n})}}class Ur{fragment;name;args;signature;selector;constructor(t,e,r){const n=t.name,s=t.format();o(this,{fragment:t,name:n,args:r,signature:s,selector:e})}}class Dr{hash;_isIndexed;static isIndexed(t){return!(!t||!t._isIndexed)}constructor(t){o(this,{hash:t,_isIndexed:!0})}}const Fr={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Lr={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Fr[t.toString()]&&(e=Fr[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Mr{fragments;deploy;fallback;receive;#g;#m;#y;#w;constructor(t){let e=[];e="string"==typeof t?JSON.parse(t):t,this.#y=new Map,this.#g=new Map,this.#m=new Map;const r=[];for(const t of e)try{r.push(yr.from(t))}catch(t){console.log("EE",t)}o(this,{fragments:Object.freeze(r)});let n=null,s=!1;this.#w=this.getAbiCoder(),this.fragments.forEach(((t,e)=>{let r;switch(t.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void o(this,{deploy:t});case"fallback":return void(0===t.inputs.length?s=!0:(f(!n||t.payable!==n.payable,"conflicting fallback fragments",`fragments[${e}]`,t),n=t,s=n.payable));case"function":r=this.#y;break;case"event":r=this.#m;break;case"error":r=this.#g;break;default:return}const i=t.format();r.has(i)||r.set(i,t)})),this.deploy||o(this,{deploy:vr.from("constructor()")}),o(this,{fallback:n,receive:s})}format(t){const e=t?"minimal":"full",r=this.fragments.map((t=>t.format(e)));return r}formatJson(){const t=this.fragments.map((t=>t.format("json")));return JSON.stringify(t.map((t=>JSON.parse(t))))}getAbiCoder(){return Cr.defaultAbiCoder()}#b(t,e,r){if(A(t)){const e=t.toLowerCase();for(const t of this.#y.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#y)e.split("(")[0]===t&&n.push(r);if(e){const t=e.length>0?e[e.length-1]:null;let r=e.length,s=!0;me.isTyped(t)&&"overrides"===t.type&&(s=!1,r--);for(let t=n.length-1;t>=0;t--){const e=n[t].inputs.length;e===r||s&&e===r-1||n.splice(t,1)}for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(me.isTyped(e[s])){if(s>=r.length){if("overrides"===e[s].type)continue;n.splice(t,1);break}if(e[s].type!==r[s].baseType){n.splice(t,1);break}}}}if(1===n.length&&e&&e.length!==n[0].inputs.length){const t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&n.splice(0,1)}return 0===n.length?null:(n.length>1&&r&&f(!1,`ambiguous function description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),n[0])}return this.#y.get(Nr.from(t).format())||null}getFunctionName(t){const e=this.#b(t,null,!1);return f(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#b(t,null,!1)}getFunction(t,e){return this.#b(t,e||null,!0)}forEachFunction(t){const e=Array.from(this.#y.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#y.get(n),r)}}#A(t,e,r){if(A(t)){const e=t.toLowerCase();for(const t of this.#m.values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){const n=[];for(const[e,r]of this.#m)e.split("(")[0]===t&&n.push(r);if(e){for(let t=n.length-1;t>=0;t--)n[t].inputs.length<e.length&&n.splice(t,1);for(let t=n.length-1;t>=0;t--){const r=n[t].inputs;for(let s=0;s<e.length;s++)if(me.isTyped(e[s])&&e[s].type!==r[s].baseType){n.splice(t,1);break}}}return 0===n.length?null:(n.length>1&&r&&f(!1,`ambiguous event description (i.e. matches ${n.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),n[0])}return this.#m.get(Er.from(t).format())||null}getEventName(t){const e=this.#A(t,null,!1);return f(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#A(t,null,!1)}getEvent(t,e){return this.#A(t,e||null,!0)}forEachEvent(t){const e=Array.from(this.#m.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#m.get(n),r)}}getError(t,e){if(A(t)){const e=t.toLowerCase();if(Lr[e])return Ar.from(Lr[e].signature);for(const t of this.#g.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const e=[];for(const[r,n]of this.#g)r.split("(")[0]===t&&e.push(n);return 0===e.length?"Error"===t?Ar.from("error Error(string)"):"Panic"===t?Ar.from("error Panic(uint256)"):null:(e.length>1&&f(!1,`ambiguous error description (i.e. ${e.map((t=>JSON.stringify(t.format()))).join(", ")})`,"name",t),e[0])}if("Error(string)"===(t=Ar.from(t).format()))return Ar.from("error Error(string)");if("Panic(uint256)"===t)return Ar.from("error Panic(uint256)");return this.#g.get(t)||null}forEachError(t){const e=Array.from(this.#g.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let r=0;r<e.length;r++){const n=e[r];t(this.#g.get(n),r)}}_decodeParams(t,e){return this.#w.decode(t,e)}_encodeParams(t,e){return this.#w.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);f(e,"unknown error","fragment",t),t=e}return f(R(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,R(e,4))}encodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);f(e,"unknown error","fragment",t),t=e}return N([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return f(R(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,R(e,4))}encodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return N([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}let r="invalid length for result data";const n=b(e);if(n.length%32==0)try{return this.#w.decode(t.outputs,n)}catch(t){r="could not decode result data"}h(!1,r,"BAD_DATA",{value:k(n),info:{method:t.name,signature:t.format()}})}makeError(t,e){const r=w(t,"data"),n=Cr.getBuiltinCallException("call",e,r);if(n.message.startsWith("execution reverted (unknown custom error)")){const t=k(r.slice(0,4)),e=this.getError(t);if(e)try{const t=this.#w.decode(e.inputs,r.slice(4));n.revert={name:e.name,signature:e.format(),args:t},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(t){n.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(e);return s&&(n.invocation={method:s.name,signature:s.signature,args:s.args}),n}encodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);f(e,"unknown function","fragment",t),t=e}return k(this.#w.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}h(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const r=[];t.anonymous||r.push(t.topicHash);const n=(t,e)=>"string"===t.type?Ue(e):"bytes"===t.type?re(k(e)):("bool"===t.type&&"boolean"==typeof e?e=e?"0x01":"0x00":t.type.match(/^u?int/)?e=Z(e):t.type.match(/^bytes/)?e=O(e,32):"address"===t.type&&this.#w.encode(["address"],[e]),T(k(e),32));for(e.forEach(((e,s)=>{const i=t.inputs[s];i.indexed?null==e?r.push(null):"array"===i.baseType||"tuple"===i.baseType?f(!1,"filtering with tuples or arrays not supported","contract."+i.name,e):Array.isArray(e)?r.push(e.map((t=>n(i,t)))):r.push(n(i,e)):f(null==e,"cannot filter non-indexed parameters; must be null","contract."+i.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}const r=[],n=[],s=[];return t.anonymous||r.push(t.topicHash),f(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach(((t,i)=>{const o=e[i];if(t.indexed)if("string"===t.type)r.push(Ue(o));else if("bytes"===t.type)r.push(re(o));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(this.#w.encode([t.type],[o]))}else n.push(t),s.push(o)})),{data:this.#w.encode(n,s),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t){const e=this.getEvent(t);f(e,"unknown event","eventFragment",t),t=e}if(null!=r&&!t.anonymous){const e=t.topicHash;f(A(r[0],32)&&r[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const n=[],s=[],i=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(mr.from({type:"bytes32",name:t.name})),i.push(!0)):(n.push(t),i.push(!1)):(s.push(t),i.push(!1))}));const o=null!=r?this.#w.decode(n,N(r)):null,a=this.#w.decode(s,e,!0),c=[],l=[];let u=0,h=0;return t.inputs.forEach(((t,e)=>{let r=null;if(t.indexed)if(null==o)r=new Dr(null);else if(i[e])r=new Dr(o[h++]);else try{r=o[h++]}catch(t){r=t}else try{r=a[u++]}catch(t){r=t}c.push(r),l.push(t.name||null)})),it.fromItems(c,l)}parseTransaction(t){const e=w(t.data,"tx.data"),r=_(null!=t.value?t.value:0,"tx.value"),n=this.getFunction(k(e.slice(0,4)));if(!n)return null;const s=this.#w.decode(n.inputs,e.slice(4));return new Br(n,n.selector,s,r)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Sr(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=k(t),r=this.getError(R(e,0,4));if(!r)return null;const n=this.#w.decode(r.inputs,R(e,4));return new Ur(r,r.selector,n)}static from(t){return t instanceof Mr?t:"string"==typeof t?new Mr(JSON.parse(t)):"function"==typeof t.format?new Mr(t.format("json")):new Mr(t)}}function Gr(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function Hr(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(Hr(t))})),e.length<=55)return e.unshift(192+e.length),e;const r=Gr(e.length);return r.unshift(247+r.length),r.concat(e)}const e=Array.prototype.slice.call(w(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Gr(e.length);return r.unshift(183+r.length),r.concat(e)}const jr="0123456789abcdef";function Qr(t){let e="0x";for(const r of Hr(t))e+=jr[r>>4],e+=jr[15&r];return e}function Vr(t){const e=ue(t.from);let r=_(t.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,ue(R(re(Qr([e,r])),12))}function Kr(t,e,r){const n=ue(t),s=w(e,"salt"),i=w(r,"initCodeHash");return f(32===s.length,"salt must be 32 bytes","salt",e),f(32===i.length,"initCodeHash must be 32 bytes","initCodeHash",r),ue(R(re(N(["0xff",n,s,i])),12))}function _r(t){return t&&"function"==typeof t.getAddress}function Jr(t){try{return ue(t),!0}catch(t){}return!1}async function zr(t,e){const r=await e;return null!=r&&"0x0000000000000000000000000000000000000000"!==r||(h("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),f(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),ue(r)}function qr(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?ue(t):(h(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),zr(t,e.resolveName(t))):_r(t)?zr(t,t.getAddress()):t&&"function"==typeof t.then?zr(t,t):void f(!1,"unsupported addressable value","target",t)}const Wr="0x0000000000000000000000000000000000000000",Yr=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Zr=BigInt("1000000000000000000"),Xr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),$r=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),tn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),en="0x0000000000000000000000000000000000000000000000000000000000000000",rn="Ξ",nn="Ethereum Signed Message:\\n";function sn(t,e){return{address:ue(t),storageKeys:e.map(((t,e)=>(f(A(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase())))}}function on(t){if(Array.isArray(t))return t.map(((e,r)=>Array.isArray(e)?(f(2===e.length,"invalid slot set",`value[${r}]`,e),sn(e[0],e[1])):(f(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),sn(e.address,e.storageKeys))));f(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map((e=>{const r=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return sn(e,Object.keys(r).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}const an=BigInt(0);function cn(t){return null==t?null:t}function ln(t){return null==t?null:t.toString()}class un{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,r){o(this,{gasPrice:cn(t),maxFeePerGas:cn(e),maxPriorityFeePerGas:cn(r)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:ln(t),maxFeePerGas:ln(e),maxPriorityFeePerGas:ln(r)}}}function hn(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=k(t.data));const r="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const n of r)n in t&&null!=t[n]&&(e[n]=_(t[n],`request.${n}`));const n="type,nonce".split(/,/);for(const r of n)r in t&&null!=t[r]&&(e[r]=W(t[r],`request.${r}`));return t.accessList&&(e.accessList=on(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),e}class fn{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#E;constructor(t,e){this.#E=t.transactions.map((t=>"string"!=typeof t?new gn(t,e):t)),o(this,{provider:e,hash:cn(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,miner:t.miner,extraData:t.extraData,baseFeePerGas:cn(t.baseFeePerGas)})}get transactions(){return this.#E.map((t=>"string"==typeof t?t:t.hash))}get prefetchedTransactions(){const t=this.#E.slice();return 0===t.length?[]:(h("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:n,gasUsed:s,hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}=this;return{_type:"Block",baseFeePerGas:ln(t),difficulty:ln(e),extraData:r,gasLimit:ln(n),gasUsed:ln(s),hash:i,miner:o,nonce:a,number:c,parentHash:l,timestamp:u,transactions:h}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#E.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=this.#E[t];else{const r=t.toLowerCase();for(const t of this.#E){if("string"==typeof t){if(t!==r)continue;e=t;break}if(t.hash!==r){e=t;break}}}if(null==e)throw new Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if("number"==typeof t)return e[t];t=t.toLowerCase();for(const r of e)if(r.hash===t)return r;f(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}class dn{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;const r=Object.freeze(t.topics.slice());o(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:n,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return h(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return h(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return h(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(t=this).transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}};var t}}class pn{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#v;constructor(t,e){this.#v=Object.freeze(t.logs.map((t=>new dn(t,e))));let r=an;null!=t.effectiveGasPrice?r=t.effectiveGasPrice:null!=t.gasPrice&&(r=t.gasPrice),o(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,gasPrice:r,type:t.type,status:t.status,root:t.root})}get logs(){return this.#v}toJSON(){const{to:t,from:e,contractAddress:r,hash:n,index:s,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:r,cumulativeGasUsed:ln(this.cumulativeGasUsed),from:e,gasPrice:ln(this.gasPrice),gasUsed:ln(this.gasUsed),hash:n,index:s,logs:c,logsBloom:a,root:u,status:l,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(null==t)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(null==t)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return yn(this)}reorderedEvent(t){return h(!t||t.isMined(),"unmined \'other\' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),mn(this,t)}}class gn{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#k;constructor(t,e){this.provider=e,this.blockNumber=null!=t.blockNumber?t.blockNumber:null,this.blockHash=null!=t.blockHash?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=null!=t.accessList?t.accessList:null,this.#k=-1}toJSON(){const{blockNumber:t,blockHash:e,index:r,hash:n,type:s,to:i,from:o,nonce:a,data:c,signature:l,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:t,blockHash:e,chainId:ln(this.chainId),data:c,from:o,gasLimit:ln(this.gasLimit),gasPrice:ln(this.gasPrice),hash:n,maxFeePerGas:ln(this.maxFeePerGas),maxPriorityFeePerGas:ln(this.maxPriorityFeePerGas),nonce:a,signature:l,to:i,index:r,type:s,value:ln(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){const e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;const e=this.provider.getBlock(t);if(null==e)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:t,blockNumber:e}=await i({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const r=null==t?1:t,n=null==e?0:e;let s=this.#k,o=-1,a=-1===s;const l=async()=>{if(a)return null;const{blockNumber:t,nonce:e}=await i({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce)return void(s=t);if(a)return null;const n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===o&&(o=s-3,o<this.#k&&(o=this.#k));o<=t;){if(a)return null;const e=await this.provider.getBlock(o,!0);if(null==e)return;for(const t of e)if(t===this.hash)return;for(let n=0;n<e.length;n++){const i=await e.getTransaction(n);if(i.from===this.from&&i.nonce===this.nonce){if(a)return null;const e=await this.provider.getTransactionReceipt(i.hash);if(null==e)return;if(t-e.blockNumber+1<r)return;let n="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?n="repriced":"0x"===i.data&&i.from===i.to&&i.value===an&&(n="cancelled"),h(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:e})}}o++}},f=t=>{if(null==t||0!==t.status)return t;h(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:t.to,from:t.from,data:""},receipt:t})},d=await this.provider.getTransactionReceipt(this.hash);if(0===r)return f(d);if(d){if(await d.confirmations()>=r)return f(d)}else if(await l(),0===r)return null;const p=new Promise(((t,e)=>{const i=[],o=()=>{i.forEach((t=>t()))};if(i.push((()=>{a=!0})),n>0){const t=setTimeout((()=>{o(),e(u("wait for transaction timeout","TIMEOUT"))}),n);i.push((()=>{clearTimeout(t)}))}const h=async n=>{if(await n.confirmations()>=r){o();try{t(f(n))}catch(t){e(t)}}};if(i.push((()=>{this.provider.off(this.hash,h)})),this.provider.on(this.hash,h),s>=0){const t=async()=>{try{await l()}catch(t){if(c(t,"TRANSACTION_REPLACED"))return o(),void e(t)}a||this.provider.once("block",t)};i.push((()=>{this.provider.off("block",t)})),this.provider.once("block",t)}}));return await p}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return h(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),yn(this)}reorderedEvent(t){return h(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),h(!t||t.isMined(),"unmined \'other\' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),mn(this,t)}replaceableTransaction(t){f(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new gn(this,this.provider);return e.#k=t,e}}function mn(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function yn(t){return{orphan:"drop-transaction",tx:t}}class wn{filter;emitter;#N;constructor(t,e,r){this.#N=e,o(this,{emitter:t,filter:r})}async removeListener(){null!=this.#N&&await this.emitter.off(this.filter,this.#N)}}class bn extends dn{interface;fragment;args;constructor(t,e,r){super(t,t.provider),o(this,{args:e.decodeEventLog(r,t.data,t.topics),fragment:r,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class An extends dn{error;constructor(t,e){super(t,t.provider),o(this,{error:e})}}class En extends pn{#P;constructor(t,e,r){super(r,e),this.#P=t}get logs(){return super.logs.map((t=>{const e=t.topics.length?this.#P.getEvent(t.topics[0]):null;if(e)try{return new bn(t,this.#P,e)}catch(e){return new An(t,e)}return t}))}}class vn extends gn{#P;constructor(t,e,r){super(r,e),this.#P=t}async wait(t){const e=await super.wait(t);return null==e?null:new En(this.#P,this.provider,e)}}class kn extends wn{log;constructor(t,e,r,n){super(t,e,r),o(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Nn extends kn{constructor(t,e,r,n,s){super(t,e,r,new bn(s,t.interface,n)),o(this,{args:t.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Pn=BigInt(0);function Rn(t){return t&&"function"==typeof t.call}function In(t){return t&&"function"==typeof t.estimateGas}function xn(t){return t&&"function"==typeof t.resolveName}function Tn(t){return t&&"function"==typeof t.sendTransaction}function On(t){if(null!=t){if(xn(t))return t;if(t.provider)return t.provider}}class Cn{#R;fragment;constructor(t,e,r){if(o(this,{fragment:e}),e.inputs.length<r.length)throw new Error("too many arguments");const n=Sn(t.runner,"resolveName"),s=xn(n)?n:null;this.#R=async function(){const n=await Promise.all(e.inputs.map(((t,e)=>null==r[e]?null:t.walkAsync(r[e],((t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map((t=>qr(t,s)))):qr(e,s):e)))));return t.interface.encodeFilterTopics(e,n)}()}getTopicFilter(){return this.#R}}function Sn(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function Bn(t){return null==t?null:t.provider||null}async function Un(t,e){const r=me.dereference(t,"overrides");f("object"==typeof r,"invalid overrides parameter","overrides",t);const n=hn(r);return f(null==n.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),f(null==n.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Dn(t,e,r){const n=Sn(t,"resolveName"),s=xn(n)?n:null;return await Promise.all(e.map(((t,e)=>t.walkAsync(r[e],((t,e)=>(e=me.dereference(e,t),"address"===t?qr(e,s):e))))))}function Fn(t){const e=async function(e){const r=await Un(e,["data"]);r.to=await t.getAddress(),r.from&&(r.from=await qr(r.from,On(t.runner)));const n=t.interface,s=_(r.value||Pn,"overrides.value")===Pn,i="0x"===(r.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||i||s||f(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e),f(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),f(n.receive||n.fallback&&n.fallback.payable||s,"cannot send value to non-payable fallback","overrides.value",r.value),f(n.fallback||i,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){const n=t.runner;h(Tn(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await n.sendTransaction(await e(r)),i=Bn(t.runner);return new vn(t.interface,i,s)},n=async t=>await r(t);return o(n,{_contract:t,estimateGas:async function(r){const n=Sn(t.runner,"estimateGas");return h(In(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await e(r))},populateTransaction:e,send:r,staticCall:async function(r){const n=Sn(t.runner,"call");h(Rn(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await e(r);try{return await n.call(s)}catch(e){if(l(e)&&e.data)throw t.interface.makeError(e.data,s);throw e}}}),n}const Ln=Symbol.for("_ethersInternal_contract"),Mn=new WeakMap;function Gn(t){return Mn.get(t[Ln])}async function Hn(t,e){let r,n=null;if(Array.isArray(e)){const n=function(e){if(A(e,32))return e;const r=t.interface.getEvent(e);return f(r,"unknown fragment","name",e),r.topicHash};r=e.map((t=>null==t?null:Array.isArray(t)?t.map(n):n(t)))}else"*"===e?r=[null]:"string"==typeof e?A(e,32)?r=[e]:(n=t.interface.getEvent(e),f(n,"unknown fragment","event",e),r=[n.topicHash]):(s=e)&&"object"==typeof s&&"getTopicFilter"in s&&"function"==typeof s.getTopicFilter&&s.fragment?r=await e.getTopicFilter():"fragment"in e?(n=e.fragment,r=[n.topicHash]):f(!1,"unknown event name","event",e);var s;return r=r.map((t=>{if(null==t)return null;if(Array.isArray(t)){const e=Array.from(new Set(t.map((t=>t.toLowerCase()))).values());return 1===e.length?e[0]:(e.sort(),e)}return t.toLowerCase()})),{fragment:n,tag:r.map((t=>null==t?"null":Array.isArray(t)?t.join("|"):t)).join("&"),topics:r}}async function jn(t,e){const{subs:r}=Gn(t);return r.get((await Hn(t,e)).tag)||null}async function Qn(t,e,r){const n=Bn(t.runner);h(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await Hn(t,r),{addr:a,subs:c}=Gn(t);let l=c.get(i);if(!l){const e={address:a||t,topics:o},u=e=>{let n=s;if(null==n)try{n=t.interface.getEvent(e.topics[0])}catch(t){}if(n){const i=n,o=s?t.interface.decodeEventLog(s,e.data,e.topics):[];Kn(t,r,o,(n=>new Nn(t,n,r,i,e)))}else Kn(t,r,[],(n=>new kn(t,n,r,e)))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(n.on(e,u))},stop:async()=>{if(0==h.length)return;let t=h;h=[],await Promise.all(t),n.off(e,u)}},c.set(i,l)}return l}let Vn=Promise.resolve();async function Kn(t,e,r,n){try{await Vn}catch(t){}const s=async function(t,e,r,n){await Vn;const s=await jn(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter((({listener:e,once:s})=>{const i=Array.from(r);n&&i.push(n(s?null:e));try{e.call(t,...i)}catch(t){}return!s})),0===s.listeners.length&&(s.stop(),Gn(t).subs.delete(s.tag)),i>0}(t,e,r,n);return Vn=s,await s}const _n=["then"];class Jn{target;interface;runner;filters;[Ln];fallback;constructor(t,e,r,n){f("string"==typeof t||_r(t),"invalid value for Contract target","target",t),null==r&&(r=null);const s=Mr.from(e);let i;o(this,{target:t,runner:r,interface:s}),Object.defineProperty(this,Ln,{value:{}});let a=null,l=null;if(n){const t=Bn(r);l=new vn(this.interface,t,n)}let h=new Map;if("string"==typeof t)if(A(t))a=t,i=Promise.resolve(t);else{const e=Sn(r,"resolveName");if(!xn(e))throw u("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=e.resolveName(t).then((e=>{if(null==e)throw u("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return Gn(this).addr=e,e}))}else i=t.getAddress().then((t=>{if(null==t)throw new Error("TODO");return Gn(this).addr=t,t}));var d;d={addrPromise:i,addr:a,deployTx:l,subs:h},Mn.set(this[Ln],d);const p=new Proxy({},{get:(t,e,r)=>{if("symbol"==typeof e||_n.indexOf(e)>=0)return Reflect.get(t,e,r);try{return this.getEvent(e)}catch(t){if(!c(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>_n.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))});return o(this,{filters:p}),o(this,{fallback:s.receive||s.fallback?Fn(this):null}),new Proxy(this,{get:(t,e,r)=>{if("symbol"==typeof e||e in t||_n.indexOf(e)>=0)return Reflect.get(t,e,r);try{return t.getFunction(e)}catch(t){if(!c(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>"symbol"==typeof e||e in t||_n.indexOf(e)>=0?Reflect.has(t,e):t.interface.hasFunction(e)})}connect(t){return new Jn(this.target,this.interface,t)}attach(t){return new Jn(t,this.interface,this.runner)}async getAddress(){return await Gn(this).addrPromise}async getDeployedCode(){const t=Bn(this.runner);h(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(null!=await this.getDeployedCode())return this;const e=Bn(this.runner);return h(null!=e,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((t,r)=>{const n=async()=>{try{if(null!=await this.getDeployedCode())return t(this);e.once("block",n)}catch(t){r(t)}};n()}))}deploymentTransaction(){return Gn(this).deployTx}getFunction(t){"string"!=typeof t&&(t=t.format());const e=function(t,e){const r=function(...r){const n=t.interface.getFunction(e,r);return h(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=async function(...e){const n=r(...e);let s={};if(n.inputs.length+1===e.length&&(s=await Un(e.pop()),s.from&&(s.from=await qr(s.from,On(t.runner)))),n.inputs.length!==e.length)throw new Error("internal error: fragment inputs doesn\'t match arguments; should not happen");const o=await Dn(t.runner,n.inputs,e);return Object.assign({},s,await i({to:t.getAddress(),data:t.interface.encodeFunctionData(n,o)}))},s=async function(...t){const e=await c(...t);return 1===e.length?e[0]:e},a=async function(...e){const r=t.runner;h(Tn(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await n(...e)),i=Bn(t.runner);return new vn(t.interface,i,s)},c=async function(...e){const s=Sn(t.runner,"call");h(Rn(s),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await n(...e);let o="0x";try{o=await s.call(i)}catch(e){if(l(e)&&e.data)throw t.interface.makeError(e.data,i);throw e}const a=r(...e);return t.interface.decodeFunctionResult(a,o)},u=async(...t)=>r(...t).constant?await s(...t):await a(...t);return o(u,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:async function(...e){const r=Sn(t.runner,"estimateGas");return h(In(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...e))},populateTransaction:n,send:a,staticCall:s,staticCallResult:c}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getFunction(e);return h(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),u}(this,t);return e}getEvent(t){return"string"!=typeof t&&(t=t.format()),function(t,e){const r=function(...r){const n=t.interface.getEvent(e,r);return h(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=function(...e){return new Cn(t,r(...e),e)};return o(n,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=t.interface.getEvent(e);return h(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),n}(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,r){null==e&&(e=0),null==r&&(r="latest");const{addr:n,addrPromise:s}=Gn(this),i=n||await s,{fragment:o,topics:a}=await Hn(this,t),c={address:i,topics:a,fromBlock:e,toBlock:r},l=Bn(this.runner);return h(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map((t=>{let e=o;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(t){}if(e)try{return new bn(t,this.interface,e)}catch(e){return new An(t,e)}return new dn(t,l)}))}async on(t,e){const r=await Qn(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){const r=await Qn(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await Kn(this,t,e,null)}async listenerCount(t){if(t){const e=await jn(this,t);return e?e.listeners.length:0}const{subs:e}=Gn(this);let r=0;for(const{listeners:t}of e.values())r+=t.length;return r}async listeners(t){if(t){const e=await jn(this,t);return e?e.listeners.map((({listener:t})=>t)):[]}const{subs:e}=Gn(this);let r=[];for(const{listeners:t}of e.values())r=r.concat(t.map((({listener:t})=>t)));return r}async off(t,e){const r=await jn(this,t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return null!=e&&0!==r.listeners.length||(r.stop(),Gn(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){const e=await jn(this,t);if(!e)return this;e.stop(),Gn(this).subs.delete(e.tag)}else{const{subs:t}=Gn(this);for(const{tag:e,stop:r}of t.values())r(),t.delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){return class extends Jn{constructor(e,r=null){super(e,t,r)}}}static from(t,e,r){return null==r&&(r=null),new this(t,e,r)}}class zn extends(function(){return Jn}()){}class qn{interface;bytecode;runner;constructor(t,e,r){const n=Mr.from(t);e instanceof Uint8Array||("object"==typeof e&&(e=e.object),e.startsWith("0x")||(e="0x"+e)),o(this,{bytecode:e=k(w(e)),interface:n,runner:r||null})}attach(t){return new Jn(t,this.interface,this.runner)}async getDeployTransaction(...t){let e={};const r=this.interface.deploy;if(r.inputs.length+1===t.length&&(e=await Un(t.pop())),r.inputs.length!==t.length)throw new Error("incorrect number of arguments to constructor");const n=await Dn(this.runner,r.inputs,t),s=N([this.bytecode,this.interface.encodeDeploy(n)]);return Object.assign({},e,{data:s})}async deploy(...t){const e=await this.getDeployTransaction(...t);h(this.runner&&"function"==typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const r=await this.runner.sendTransaction(e),n=Vr(r);return new Jn(n,this.interface,this.runner,r)}connect(t){return new qn(this.interface,this.bytecode,t)}static fromSolidity(t,e){f(null!=t,"bad compiler output","output",t),"string"==typeof t&&(t=JSON.parse(t));const r=t.abi;let n="";return t.bytecode?n=t.bytecode:t.evm&&t.evm.bytecode&&(n=t.evm.bytecode),new this(r,n,e)}}class Wn extends Bt{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,dt(t);const r=St(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<s.length;t++)s[t]^=54;this.iHash.update(s),this.oHash=t.create();for(let t=0;t<s.length;t++)s[t]^=106;this.oHash.update(s),s.fill(0)}update(t){return pt(this),this.iHash.update(t),this}digestInto(t){pt(this),ft(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:n,destroyed:s,blockLen:i,outputLen:o}=this;return t.finished=n,t.destroyed=s,t.blockLen=i,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Yn=(t,e,r)=>new Wn(t,e).update(r).digest();function Zn(t,e,r,n){const{c:s,dkLen:i,DK:o,PRF:a,PRFSalt:c}=function(t,e,r,n){dt(t);const s=Dt({dkLen:32,asyncTick:10},n),{c:i,dkLen:o,asyncTick:a}=s;if(ht(i),ht(o),ht(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=St(e),l=St(r),u=new Uint8Array(o),h=Yn.create(t,c),f=h._cloneInto().update(l);return{c:i,dkLen:o,asyncTick:a,DK:u,PRF:h,PRFSalt:f}}(t,e,r,n);let l;const u=new Uint8Array(4),h=xt(u),f=new Uint8Array(a.outputLen);for(let t=1,e=0;e<i;t++,e+=a.outputLen){const r=o.subarray(e,e+a.outputLen);h.setInt32(0,t,!1),(l=c._cloneInto(l)).update(u).digestInto(f),r.set(f.subarray(0,r.length));for(let t=1;t<s;t++){a._cloneInto(l).update(f).digestInto(f);for(let t=0;t<r.length;t++)r[t]^=f[t]}}return function(t,e,r,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),r}(a,c,o,l,f)}Yn.create=(t,e)=>new Wn(t,e);class Xn extends Bt{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xt(this.buffer)}update(t){pt(this);const{view:e,buffer:r,blockLen:n}=this,s=(t=St(t)).length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);if(o!==n)r.set(t.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(e,0),this.pos=0);else{const e=xt(t);for(;n<=s-i;i+=n)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){pt(this),gt(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:n,isLE:s}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let t=i;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),c=n?4:0,l=n?0:4;t.setUint32(e+c,o,n),t.setUint32(e+l,a,n)}(r,n-8,BigInt(8*this.length),s),this.process(r,0);const o=xt(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,l[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:n,finished:s,destroyed:i,pos:o}=this;return t.length=n,t.pos=o,t.finished=s,t.destroyed=i,n%e&&t.buffer.set(r),t}}const $n=(t,e,r)=>t&e^~t&r,ts=(t,e,r)=>t&e^t&r^e&r,es=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ns=new Uint32Array(64);class ss extends Xn{constructor(){super(64,32,8,!1),this.A=0|rs[0],this.B=0|rs[1],this.C=0|rs[2],this.D=0|rs[3],this.E=0|rs[4],this.F=0|rs[5],this.G=0|rs[6],this.H=0|rs[7]}get(){const{A:t,B:e,C:r,D:n,E:s,F:i,G:o,H:a}=this;return[t,e,r,n,s,i,o,a]}set(t,e,r,n,s,i,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)ns[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=ns[t-15],r=ns[t-2],n=Tt(e,7)^Tt(e,18)^e>>>3,s=Tt(r,17)^Tt(r,19)^r>>>10;ns[t]=s+ns[t-7]+n+ns[t-16]|0}let{A:r,B:n,C:s,D:i,E:o,F:a,G:c,H:l}=this;for(let t=0;t<64;t++){const e=l+(Tt(o,6)^Tt(o,11)^Tt(o,25))+$n(o,a,c)+es[t]+ns[t]|0,u=(Tt(r,2)^Tt(r,13)^Tt(r,22))+ts(r,n,s)|0;l=c,c=a,a=o,o=i+e|0,i=s,s=n,n=r,r=e+u|0}r=r+this.A|0,n=n+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,n,s,i,o,a,c,l)}roundClean(){ns.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const is=Ft((()=>new ss)),[os,as]=(()=>Nt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))))(),cs=new Uint32Array(80),ls=new Uint32Array(80);class us extends Xn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:n,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,r,n,s,i,o,a,c,l,u,h,f,d,p,g]}set(t,e,r,n,s,i,o,a,c,l,u,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let r=0;r<16;r++,e+=4)cs[r]=t.getUint32(e),ls[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|cs[t-15],r=0|ls[t-15],n=Nt.rotrSH(e,r,1)^Nt.rotrSH(e,r,8)^Nt.shrSH(e,r,7),s=Nt.rotrSL(e,r,1)^Nt.rotrSL(e,r,8)^Nt.shrSL(e,r,7),i=0|cs[t-2],o=0|ls[t-2],a=Nt.rotrSH(i,o,19)^Nt.rotrBH(i,o,61)^Nt.shrSH(i,o,6),c=Nt.rotrSL(i,o,19)^Nt.rotrBL(i,o,61)^Nt.shrSL(i,o,6),l=Nt.add4L(s,c,ls[t-7],ls[t-16]),u=Nt.add4H(l,n,a,cs[t-7],cs[t-16]);cs[t]=0|u,ls[t]=0|l}let{Ah:r,Al:n,Bh:s,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let t=0;t<80;t++){const e=Nt.rotrSH(u,h,14)^Nt.rotrSH(u,h,18)^Nt.rotrBH(u,h,41),w=Nt.rotrSL(u,h,14)^Nt.rotrSL(u,h,18)^Nt.rotrBL(u,h,41),b=u&f^~u&p,A=h&d^~h&g,E=Nt.add5L(y,w,A,as[t],ls[t]),v=Nt.add5H(E,m,e,b,os[t],cs[t]),k=0|E,N=Nt.rotrSH(r,n,28)^Nt.rotrBH(r,n,34)^Nt.rotrBH(r,n,39),P=Nt.rotrSL(r,n,28)^Nt.rotrBL(r,n,34)^Nt.rotrBL(r,n,39),R=r&s^r&o^s&o,I=n&i^n&a^i&a;m=0|p,y=0|g,p=0|f,g=0|d,f=0|u,d=0|h,({h:u,l:h}=Nt.add(0|c,0|l,0|v,0|k)),c=0|o,l=0|a,o=0|s,a=0|i,s=0|r,i=0|n;const x=Nt.add3L(k,P,I);r=Nt.add3H(x,v,N,R),n=0|x}({h:r,l:n}=Nt.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:i}=Nt.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=Nt.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Nt.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Nt.add(0|this.Eh,0|this.El,0|u,0|h)),({h:f,l:d}=Nt.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=Nt.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=Nt.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,s,i,o,a,c,l,u,h,f,d,p,g,m,y)}roundClean(){cs.fill(0),ls.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hs=Ft((()=>new us)),fs=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}(),ds=fs.crypto||fs.msCrypto;function ps(t){switch(t){case"sha256":return is.create();case"sha512":return hs.create()}f(!1,"invalid hashing algorithm name","algorithm",t)}let gs=!1;const ms=function(t,e,r){return function(t,e){const r={sha256:is,sha512:hs}[t];return f(null!=r,"invalid hmac algorithm","algorithm",t),Yn.create(r,e)}(t,e).update(r).digest()};let ys=ms;function ws(t,e,r){const n=w(e,"key"),s=w(r,"data");return k(ys(t,n,s))}ws._=ms,ws.lock=function(){gs=!0},ws.register=function(t){if(gs)throw new Error("computeHmac is locked");ys=t},Object.freeze(ws);const bs=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),As=Uint8Array.from({length:16},((t,e)=>e));let Es=[As],vs=[As.map((t=>(9*t+5)%16))];for(let t=0;t<4;t++)for(let e of[Es,vs])e.push(e[t].map((t=>bs[t])));const ks=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((t=>new Uint8Array(t))),Ns=Es.map(((t,e)=>t.map((t=>ks[e][t])))),Ps=vs.map(((t,e)=>t.map((t=>ks[e][t])))),Rs=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Is=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),xs=(t,e)=>t<<e|t>>>32-e;function Ts(t,e,r,n){return 0===t?e^r^n:1===t?e&r|~e&n:2===t?(e|~r)^n:3===t?e&n|r&~n:e^(r|~n)}const Os=new Uint32Array(16);class Cs extends Xn{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:e,h2:r,h3:n,h4:s}=this;return[t,e,r,n,s]}set(t,e,r,n,s){this.h0=0|t,this.h1=0|e,this.h2=0|r,this.h3=0|n,this.h4=0|s}process(t,e){for(let r=0;r<16;r++,e+=4)Os[r]=t.getUint32(e,!0);let r=0|this.h0,n=r,s=0|this.h1,i=s,o=0|this.h2,a=o,c=0|this.h3,l=c,u=0|this.h4,h=u;for(let t=0;t<5;t++){const e=4-t,f=Rs[t],d=Is[t],p=Es[t],g=vs[t],m=Ns[t],y=Ps[t];for(let e=0;e<16;e++){const n=xs(r+Ts(t,s,o,c)+Os[p[e]]+f,m[e])+u|0;r=u,u=c,c=0|xs(o,10),o=s,s=n}for(let t=0;t<16;t++){const r=xs(n+Ts(e,i,a,l)+Os[g[t]]+d,y[t])+h|0;n=h,h=l,l=0|xs(a,10),a=i,i=r}}this.set(this.h1+o+l|0,this.h2+c+h|0,this.h3+u+n|0,this.h4+r+i|0,this.h0+s+a|0)}roundClean(){Os.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Ss=Ft((()=>new Cs));let Bs=!1;const Us=function(t){return Ss(t)};let Ds=Us;function Fs(t){const e=w(t,"data");return k(Ds(e))}Fs._=Us,Fs.lock=function(){Bs=!0},Fs.register=function(t){if(Bs)throw new TypeError("ripemd160 is locked");Ds=t},Object.freeze(Fs);let Ls=!1;const Ms=function(t,e,r,n,s){return function(t,e,r,n,s){const i={sha256:is,sha512:hs}[s];return f(null!=i,"invalid pbkdf2 algorithm","algorithm",s),Zn(i,t,e,{c:r,dkLen:n})}(t,e,r,n,s)};let Gs=Ms;function Hs(t,e,r,n,s){const i=w(t,"password"),o=w(e,"salt");return k(Gs(i,o,r,n,s))}Hs._=Ms,Hs.lock=function(){Ls=!0},Hs.register=function(t){if(Ls)throw new Error("pbkdf2 is locked");Gs=t},Object.freeze(Hs);let js=!1;const Qs=function(t){return new Uint8Array(function(t){h(null!=ds,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),f(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);const e=new Uint8Array(t);return ds.getRandomValues(e),e}(t))};let Vs=Qs;function Ks(t){return Vs(t)}Ks._=Qs,Ks.lock=function(){js=!0},Ks.register=function(t){if(js)throw new Error("randomBytes is locked");Vs=t},Object.freeze(Ks);const _s=(t,e)=>t<<e|t>>>32-e;function Js(t,e,r,n,s,i){let o=t[e++]^r[n++],a=t[e++]^r[n++],c=t[e++]^r[n++],l=t[e++]^r[n++],u=t[e++]^r[n++],h=t[e++]^r[n++],f=t[e++]^r[n++],d=t[e++]^r[n++],p=t[e++]^r[n++],g=t[e++]^r[n++],m=t[e++]^r[n++],y=t[e++]^r[n++],w=t[e++]^r[n++],b=t[e++]^r[n++],A=t[e++]^r[n++],E=t[e++]^r[n++],v=o,k=a,N=c,P=l,R=u,I=h,x=f,T=d,O=p,C=g,S=m,B=y,U=w,D=b,F=A,L=E;for(let t=0;t<8;t+=2)R^=_s(v+U|0,7),O^=_s(R+v|0,9),U^=_s(O+R|0,13),v^=_s(U+O|0,18),C^=_s(I+k|0,7),D^=_s(C+I|0,9),k^=_s(D+C|0,13),I^=_s(k+D|0,18),F^=_s(S+x|0,7),N^=_s(F+S|0,9),x^=_s(N+F|0,13),S^=_s(x+N|0,18),P^=_s(L+B|0,7),T^=_s(P+L|0,9),B^=_s(T+P|0,13),L^=_s(B+T|0,18),k^=_s(v+P|0,7),N^=_s(k+v|0,9),P^=_s(N+k|0,13),v^=_s(P+N|0,18),x^=_s(I+R|0,7),T^=_s(x+I|0,9),R^=_s(T+x|0,13),I^=_s(R+T|0,18),B^=_s(S+C|0,7),O^=_s(B+S|0,9),C^=_s(O+B|0,13),S^=_s(C+O|0,18),U^=_s(L+F|0,7),D^=_s(U+L|0,9),F^=_s(D+U|0,13),L^=_s(F+D|0,18);s[i++]=o+v|0,s[i++]=a+k|0,s[i++]=c+N|0,s[i++]=l+P|0,s[i++]=u+R|0,s[i++]=h+I|0,s[i++]=f+x|0,s[i++]=d+T|0,s[i++]=p+O|0,s[i++]=g+C|0,s[i++]=m+S|0,s[i++]=y+B|0,s[i++]=w+U|0,s[i++]=b+D|0,s[i++]=A+F|0,s[i++]=E+L|0}function zs(t,e,r,n,s){let i=n+0,o=n+16*s;for(let n=0;n<16;n++)r[o+n]=t[e+16*(2*s-1)+n];for(let n=0;n<s;n++,i+=16,e+=16)Js(r,o,t,e,r,i),n>0&&(o+=16),Js(r,i,t,e+=16,r,o)}function qs(t,e,r){const n=Dt({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:s,r:i,p:o,dkLen:a,asyncTick:c,maxmem:l,onProgress:u}=n;if(ht(s),ht(i),ht(o),ht(a),ht(c),ht(l),void 0!==u&&"function"!=typeof u)throw new Error("progressCb should be function");const h=128*i,f=h/4;if(s<=1||0!=(s&s-1)||s>=2**(h/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/h)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const d=h*(s+o);if(d>l)throw new Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${l} (maxmem)`);const p=Zn(is,t,e,{c:1,dkLen:h*o}),g=It(p),m=It(new Uint8Array(h*s)),y=It(new Uint8Array(h));let w=()=>{};if(u){const t=2*s*o,e=Math.max(Math.floor(t/1e4),1);let r=0;w=()=>{r++,!u||r%e&&r!==t||u(r/t)}}return{N:s,r:i,p:o,dkLen:a,blockSize32:f,V:m,B32:g,B:p,tmp:y,blockMixCb:w,asyncTick:c}}function Ws(t,e,r,n,s){const i=Zn(is,t,r,{c:1,dkLen:e});return r.fill(0),n.fill(0),s.fill(0),i}let Ys=!1,Zs=!1;const Xs=async function(t,e,r,n,s,i,o){return await async function(t,e,r){const{N:n,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:h,blockMixCb:f,asyncTick:d}=qs(t,e,r);for(let t=0;t<i;t++){const e=a*t;for(let t=0;t<a;t++)c[t]=l[e+t];let r=0;await Ct(n-1,d,(()=>{zs(c,r,c,r+=a,s),f()})),zs(c,(n-1)*a,l,e,s),f(),await Ct(n,d,(()=>{const t=l[e+a-16]%n;for(let r=0;r<a;r++)h[r]=l[e+r]^c[t*a+r];zs(h,0,l,e,s),f()}))}return Ws(t,o,u,c,h)}(t,e,{N:r,r:n,p:s,dkLen:i,onProgress:o})},$s=function(t,e,r,n,s,i){return function(t,e,r){const{N:n,r:s,p:i,dkLen:o,blockSize32:a,V:c,B32:l,B:u,tmp:h,blockMixCb:f}=qs(t,e,r);for(let t=0;t<i;t++){const e=a*t;for(let t=0;t<a;t++)c[t]=l[e+t];for(let t=0,e=0;t<n-1;t++)zs(c,e,c,e+=a,s),f();zs(c,(n-1)*a,l,e,s),f();for(let t=0;t<n;t++){const t=l[e+a-16]%n;for(let r=0;r<a;r++)h[r]=l[e+r]^c[t*a+r];zs(h,0,l,e,s),f()}}return Ws(t,o,u,c,h)}(t,e,{N:r,r:n,p:s,dkLen:i})};let ti=Xs,ei=$s;async function ri(t,e,r,n,s,i,o){const a=w(t,"passwd"),c=w(e,"salt");return k(await ti(a,c,r,n,s,i,o))}function ni(t,e,r,n,s,i){const o=w(t,"passwd"),a=w(e,"salt");return k(ei(o,a,r,n,s,i))}ri._=Xs,ri.lock=function(){Zs=!0},ri.register=function(t){if(Zs)throw new Error("scrypt is locked");ti=t},Object.freeze(ri),ni._=$s,ni.lock=function(){Ys=!0},ni.register=function(t){if(Ys)throw new Error("scryptSync is locked");ei=t},Object.freeze(ni);const si=function(t){return ps("sha256").update(t).digest()},ii=function(t){return ps("sha512").update(t).digest()};let oi=si,ai=ii,ci=!1,li=!1;function ui(t){const e=w(t,"data");return k(oi(e))}function hi(t){const e=w(t,"data");return k(ai(e))}function fi(){ws.lock(),re.lock(),Hs.lock(),Ks.lock(),Fs.lock(),ri.lock(),ni.lock(),ui.lock(),hi.lock(),Ks.lock()}ui._=si,ui.lock=function(){ci=!0},ui.register=function(t){if(ci)throw new Error("sha256 is locked");oi=t},Object.freeze(ui),hi._=ii,hi.lock=function(){li=!0},hi.register=function(t){if(li)throw new Error("sha512 is locked");ai=t},Object.freeze(ui);const di=BigInt(0),pi=BigInt(1),gi=BigInt(2),mi=BigInt(27),yi=BigInt(28),wi=BigInt(35),bi={};function Ai(t){return T(X(t),32)}class Ei{#I;#x;#T;#O;get r(){return this.#I}set r(t){f(32===P(t),"invalid r","value",t),this.#I=k(t)}get s(){return this.#x}set s(t){f(32===P(t),"invalid s","value",t);const e=k(t);f(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),this.#x=e}get v(){return this.#T}set v(t){const e=W(t,"value");f(27===e||28===e,"invalid v","v",t),this.#T=e}get networkV(){return this.#O}get legacyChainId(){const t=this.networkV;return null==t?null:Ei.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=w(this.s);return this.yParity&&(t[0]|=128),k(t)}get compactSerialized(){return N([this.r,this.yParityAndS])}get serialized(){return N([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,r,n){m(t,bi,"Signature"),this.#I=e,this.#x=r,this.#T=n,this.#O=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new Ei(bi,this.r,this.s,this.v);return this.networkV&&(t.#O=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=_(t,"v");return e==mi||e==yi?di:(f(e>=wi,"invalid EIP-155 v","v",t),(e-wi)/gi)}static getChainIdV(t,e){return _(t)*gi+BigInt(35+e-27)}static getNormalizedV(t){const e=_(t);return e===di||e===mi?27:e===pi||e===yi?28:(f(e>=wi,"invalid v","v",t),e&pi?27:28)}static from(t){function e(e,r){f(e,r,"signature",t)}if(null==t)return new Ei(bi,en,en,27);if("string"==typeof t){const r=w(t,"signature");if(64===r.length){const t=k(r.slice(0,32)),e=r.slice(32,64),n=128&e[0]?28:27;return e[0]&=127,new Ei(bi,t,k(e),n)}if(65===r.length){const t=k(r.slice(0,32)),n=r.slice(32,64);e(0==(128&n[0]),"non-canonical s");const s=Ei.getNormalizedV(r[64]);return new Ei(bi,t,k(n),s)}e(!1,"invalid raw signature length")}if(t instanceof Ei)return t.clone();const r=t.r;e(null!=r,"missing r");const n=Ai(r),s=function(t,r){if(null!=t)return Ai(t);if(null!=r){e(A(r,32),"invalid yParityAndS");const t=w(r);return t[0]&=127,k(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e(0==(128&w(s)[0]),"non-canonical s");const{networkV:i,v:o}=function(t,r,n){if(null!=t){const e=_(t);return{networkV:e>=wi?e:void 0,v:Ei.getNormalizedV(e)}}if(null!=r)return e(A(r,32),"invalid yParityAndS"),{v:128&w(r)[0]?28:27};if(null!=n){switch(W(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),a=new Ei(bi,n,s,o);return i&&(a.#O=i),e(null==t.yParity||W(t.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}BigInt(0);const vi=BigInt(1),ki=BigInt(2),Ni=t=>t instanceof Uint8Array,Pi=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Ri(t){if(!Ni(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Pi[t[r]];return e}function Ii(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function xi(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){const n=2*e,s=t.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");r[e]=i}return r}function Ti(t){return Ii(Ri(t))}function Oi(t){if(!Ni(t))throw new Error("Uint8Array expected");return Ii(Ri(Uint8Array.from(t).reverse()))}function Ci(t,e){return xi(t.toString(16).padStart(2*e,"0"))}function Si(t,e){return Ci(t,e).reverse()}function Bi(t,e,r){let n;if("string"==typeof e)try{n=xi(e)}catch(r){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else{if(!Ni(e))throw new Error(`${t} must be hex string or Uint8Array`);n=Uint8Array.from(e)}const s=n.length;if("number"==typeof r&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Ui(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Ni(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}const Di=t=>(ki<<BigInt(t-1))-vi,Fi=t=>new Uint8Array(t),Li=t=>Uint8Array.from(t);function Mi(t,e,r){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Fi(t),s=Fi(t),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...t)=>r(s,n,...t),c=(t=Fi())=>{s=a(Li([0]),t),n=a(),0!==t.length&&(s=a(Li([1]),t),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const r=[];for(;t<e;){n=a();const e=n.slice();r.push(e),t+=n.length}return Ui(...r)};return(t,e)=>{let r;for(o(),c(t);!(r=e(l()));)c();return o(),r}}const Gi={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};function Hi(t,e,r={}){const n=(e,r,n)=>{const s=Gi[r];if("function"!=typeof s)throw new Error(`Invalid validator "${r}", expected function`);const i=t[e];if(!(n&&void 0===i||s(i,t)))throw new Error(`Invalid param ${String(e)}=${i} (${typeof i}), expected ${r}`)};for(const[t,r]of Object.entries(e))n(t,r,!1);for(const[t,e]of Object.entries(r))n(t,e,!0);return t}const ji=BigInt(0),Qi=BigInt(1),Vi=BigInt(2),Ki=BigInt(3),_i=BigInt(4),Ji=BigInt(5),zi=BigInt(8);function qi(t,e){const r=t%e;return r>=ji?r:e+r}function Wi(t,e,r){if(r<=ji||e<ji)throw new Error("Expected power/modulo > 0");if(r===Qi)return ji;let n=Qi;for(;e>ji;)e&Qi&&(n=n*t%r),t=t*t%r,e>>=Qi;return n}function Yi(t,e,r){let n=t;for(;e-- >ji;)n*=n,n%=r;return n}function Zi(t,e){if(t===ji||e<=ji)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=qi(t,e),n=e,s=ji,i=Qi,o=Qi,a=ji;for(;r!==ji;){const t=n/r,e=n%r,c=s-o*t,l=i-a*t;n=r,r=e,s=o,i=a,o=c,a=l}if(n!==Qi)throw new Error("invert: does not exist");return qi(s,e)}BigInt(9),BigInt(16);const Xi=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $i(t,e){const r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function to(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function eo(t){const e=to(t);return e+Math.ceil(e/2)}const ro=BigInt(0),no=BigInt(1);function so(t){return Hi(t.Fp,Xi.reduce(((t,e)=>(t[e]="function",t)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Hi(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...$i(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const{bytesToNumberBE:io,hexToBytes:oo}=e,ao={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){const{Err:e}=ao;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");const r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:io(n),l:t.subarray(r+2)}},toSig(t){const{Err:e}=ao,r="string"==typeof t?oo(t):t;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=ao._parseInt(r.subarray(2)),{d:o,l:a}=ao._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{const e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),c=r(o);return`30${r(o+i+4)}02${c}${s}02${a}${n}`}},co=BigInt(0),lo=BigInt(1),uo=(BigInt(2),BigInt(3));function ho(t){const e=function(t){const e=so(t);return Hi(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(t){return qi(t,n)}function a(t){return Zi(t,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=function(t){const e=function(t){const e=so(t);Hi(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{const s=e.toAffine();return Ui(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),s=e.fromBytes||(t=>{const e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function i(t){const{a:n,b:s}=e,i=r.sqr(t),o=r.mul(i,t);return r.add(r.add(o,r.mul(t,n)),s)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(t){return"bigint"==typeof t&&co<t&&t<e.n}function a(t){if(!o(t))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(t){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:s,n:i}=e;if(r&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=Ri(t)),"string"!=typeof t||!r.includes(t.length))throw new Error("Invalid key");t=t.padStart(2*n,"0")}let o;try{o="bigint"==typeof t?t:Ti(Bi("private key",t,n))}catch(e){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof t}`)}return s&&(o=qi(o,i)),a(o),o}const l=new Map;function u(t){if(!(t instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw new Error("x required");if(null==e||!r.isValid(e))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof h)throw new Error("projective point not allowed");const s=t=>r.eql(t,r.ZERO);return s(e)&&s(n)?h.ZERO:new h(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(h.fromAffine)}static fromHex(t){const e=h.fromAffine(s(Bi("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(c(t))}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw new Error("bad point: x or y not FE");const s=r.sqr(n),o=i(t);if(!r.eql(s,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn\'t support isOdd")}equals(t){u(t);const{px:e,py:n,pz:s}=this,{px:i,py:o,pz:a}=t,c=r.eql(r.mul(e,a),r.mul(i,s)),l=r.eql(r.mul(n,a),r.mul(o,s));return c&&l}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,s=r.mul(n,uo),{px:i,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,f=r.mul(i,i),d=r.mul(o,o),p=r.mul(a,a),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,a),u=r.add(u,u),c=r.mul(t,u),l=r.mul(s,p),l=r.add(c,l),c=r.sub(d,l),l=r.add(d,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(s,u),p=r.mul(t,p),g=r.sub(f,p),g=r.mul(t,g),g=r.add(g,u),u=r.add(f,f),f=r.add(u,f),f=r.add(f,p),f=r.mul(f,g),l=r.add(l,f),p=r.mul(o,a),p=r.add(p,p),f=r.mul(p,g),c=r.sub(c,f),u=r.mul(p,d),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(t){u(t);const{px:n,py:s,pz:i}=this,{px:o,py:a,pz:c}=t;let l=r.ZERO,f=r.ZERO,d=r.ZERO;const p=e.a,g=r.mul(e.b,uo);let m=r.mul(n,o),y=r.mul(s,a),w=r.mul(i,c),b=r.add(n,s),A=r.add(o,a);b=r.mul(b,A),A=r.add(m,y),b=r.sub(b,A),A=r.add(n,i);let E=r.add(o,c);return A=r.mul(A,E),E=r.add(m,w),A=r.sub(A,E),E=r.add(s,i),l=r.add(a,c),E=r.mul(E,l),l=r.add(y,w),E=r.sub(E,l),d=r.mul(p,A),l=r.mul(g,w),d=r.add(l,d),l=r.sub(y,d),d=r.add(y,d),f=r.mul(l,d),y=r.add(m,m),y=r.add(y,m),w=r.mul(p,w),A=r.mul(g,A),y=r.add(y,w),w=r.sub(m,w),w=r.mul(p,w),A=r.add(A,w),m=r.mul(y,A),f=r.add(f,m),m=r.mul(E,A),l=r.mul(b,l),l=r.sub(l,m),m=r.mul(b,y),d=r.mul(E,d),d=r.add(d,m),new h(l,f,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return d.wNAFCached(this,l,t,(t=>{const e=r.invertBatch(t.map((t=>t.pz)));return t.map(((t,r)=>t.toAffine(e[r]))).map(h.fromAffine)}))}multiplyUnsafe(t){const n=h.ZERO;if(t===co)return n;if(a(t),t===lo)return this;const{endo:s}=e;if(!s)return d.unsafeLadder(this,t);let{k1neg:i,k1:o,k2neg:c,k2:l}=s.splitScalar(t),u=n,f=n,p=this;for(;o>co||l>co;)o&lo&&(u=u.add(p)),l&lo&&(f=f.add(p)),p=p.double(),o>>=lo,l>>=lo;return i&&(u=u.negate()),c&&(f=f.negate()),f=new h(r.mul(f.px,s.beta),f.py,f.pz),u.add(f)}multiply(t){a(t);let n,s,i=t;const{endo:o}=e;if(o){const{k1neg:t,k1:e,k2neg:a,k2:c}=o.splitScalar(i);let{p:l,f:u}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);l=d.constTimeNegate(t,l),f=d.constTimeNegate(a,f),f=new h(r.mul(f.px,o.beta),f.py,f.pz),n=l.add(f),s=u.add(p)}else{const{p:t,f:e}=this.wNAF(i);n=t,s=e}return h.normalizeZ([n,s])[0]}multiplyAndAddUnsafe(t,e,r){const n=h.BASE,s=(t,e)=>e!==co&&e!==lo&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),i=s(this,e).add(s(t,r));return i.is0()?void 0:i}toAffine(t){const{px:e,py:n,pz:s}=this,i=this.is0();null==t&&(t=i?r.ONE:r.inv(s));const o=r.mul(e,t),a=r.mul(n,t),c=r.mul(s,t);if(i)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:t,isTorsionFree:r}=e;if(t===lo)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:t,clearCofactor:r}=e;return t===lo?this:r?r(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(h,this,t)}toHex(t=!0){return Ri(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const f=e.nBitLength,d=function(t,e){const r=(t,e)=>{const r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,s=e;for(;r>ro;)r&no&&(n=n.add(s)),s=s.double(),r>>=no;return n},precomputeWindow(t,e){const{windows:r,windowSize:s}=n(e),i=[];let o=t,a=o;for(let t=0;t<r;t++){a=o,i.push(a);for(let t=1;t<s;t++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(e,s,i){const{windows:o,windowSize:a}=n(e);let c=t.ZERO,l=t.BASE;const u=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let t=0;t<o;t++){const e=t*a;let n=Number(i&u);i>>=f,n>a&&(n-=h,i+=no);const o=e,d=e+Math.abs(n)-1,p=t%2!=0,g=n<0;0===n?l=l.add(r(p,s[o])):c=c.add(r(g,s[d]))}return{p:c,f:l}},wNAFCached(t,e,r,n){const s=t._WINDOW_SIZE||1;let i=e.get(t);return i||(i=this.precomputeWindow(t,s),1!==s&&e.set(t,n(i))),this.wNAF(s,i,r)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}({...e,toBytes(t,e,n){const s=e.toAffine(),i=r.toBytes(s.x),o=Ui;return n?o(Uint8Array.from([e.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,r.toBytes(s.y))},fromBytes(t){const e=t.length,n=t[0],o=t.subarray(1);if(e!==s||2!==n&&3!==n){if(e===i&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}{const t=Ti(o);if(!(co<(a=t)&&a<r.ORDER))throw new Error("Point is not on curve");const e=u(t);let s=r.sqrt(e);return 1==(1&n)!=((s&lo)===lo)&&(s=r.neg(s)),{x:t,y:s}}var a}}),f=t=>Ri(Ci(t,e.nByteLength));function d(t){return t>n>>lo}const p=(t,e,r)=>Ti(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){const r=e.nByteLength;return t=Bi("compactSignature",t,2*r),new g(p(t,0,r),p(t,r,2*r))}static fromDER(t){const{r:e,s:r}=ao.toSig(Bi("DER",t));return new g(e,r)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){const{r:n,s,recovery:i}=this,l=b(Bi("msgHash",t));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?n+e.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&i)?"02":"03",d=c.fromHex(h+f(u)),p=a(u),g=o(-l*p),m=o(s*p),y=c.BASE.multiplyAndAddUnsafe(d,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return xi(this.toDERHex())}toDERHex(){return ao.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return xi(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const m={isValidPrivateKey(t){try{return l(t),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const t=eo(e.n);return function(t,e,r=!1){const n=t.length,s=to(e),i=eo(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=qi(r?Ti(t):Oi(t),e-Qi)+Qi;return r?Si(o,s):Ci(o,s)}(e.randomBytes(t),e.n)},precompute:(t=8,e=c.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)};function y(t){const e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===s||n===i:r?n===2*s||n===2*i:t instanceof c}const w=e.bits2int||function(t){const r=Ti(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},b=e.bits2int_modN||function(t){return o(w(t))},A=Di(e.nBitLength);function E(t){if("bigint"!=typeof t)throw new Error("bigint expected");if(!(co<=t&&t<A))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Ci(t,e.nByteLength)}const v={lowS:e.lowS,prehash:!1},k={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return c.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(y(t))throw new Error("first arg must be private key");if(!y(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(l(t)).toRawBytes(r)},sign:function(t,n,s=v){const{seed:i,k2sig:u}=function(t,n,s=v){if(["recovered","canonical"].some((t=>t in s)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=e;let{lowS:f,prehash:p,extraEntropy:m}=s;null==f&&(f=!0),t=Bi("msgHash",t),p&&(t=Bi("prehashed msgHash",i(t)));const y=b(t),A=l(n),k=[E(A),E(y)];if(null!=m){const t=!0===m?u(r.BYTES):m;k.push(Bi("extraEntropy",t))}const N=Ui(...k),P=y;return{seed:N,k2sig:function(t){const e=w(t);if(!h(e))return;const r=a(e),n=c.BASE.multiply(e).toAffine(),s=o(n.x);if(s===co)return;const i=o(r*o(P+s*A));if(i===co)return;let l=(n.x===s?0:2)|Number(n.y&lo),u=i;return f&&d(i)&&(u=function(t){return d(t)?o(-t):t}(i),l^=1),new g(s,u,l)}}}(t,n,s),f=e;return Mi(f.hash.outputLen,f.nByteLength,f.hmac)(i,u)},verify:function(t,r,n,s=k){const i=t;if(r=Bi("msgHash",r),n=Bi("publicKey",n),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:u}=s;let h,f;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(t){if(!(t instanceof ao.Err))throw t;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:t,s:e}=i;h=new g(t,e)}}f=c.fromHex(n)}catch(t){if("PARSE"===t.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;u&&(r=e.hash(r));const{r:d,s:p}=h,m=b(r),y=a(p),w=o(m*y),A=o(d*y),E=c.BASE.multiplyAndAddUnsafe(f,w,A)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:c,Signature:g,utils:m}}function fo(t){return{hash:t,hmac:(e,...r)=>Yn(t,e,function(...t){const e=new Uint8Array(t.reduce(((t,e)=>t+e.length),0));let r=0;return t.forEach((t=>{if(!Rt(t))throw new Error("Uint8Array expected");e.set(t,r),r+=t.length})),e}(...r)),randomBytes:Lt}}BigInt(4);const po=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),go=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),mo=BigInt(1),yo=BigInt(2),wo=(t,e)=>(t+e/yo)/e;const bo=function(t,e,r=!1,n={}){if(t<=ji)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=$i(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(t){if(t%_i===Ki){const e=(t+Qi)/_i;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}if(t%zi===Ji){const e=(t-Ji)/zi;return function(t,r){const n=t.mul(r,Vi),s=t.pow(n,e),i=t.mul(r,s),o=t.mul(t.mul(i,Vi),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(t){const e=(t-Qi)/Vi;let r,n,s;for(r=t-Qi,n=0;r%Vi===ji;r/=Vi,n++);for(s=Vi;s<t&&Wi(s,e,t)!==t-Qi;s++);if(1===n){const e=(t+Qi)/_i;return function(t,r){const n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw new Error("Cannot find square root");return n}}const i=(r+Qi)/Vi;return function(t,o){if(t.pow(o,e)===t.neg(t.ONE))throw new Error("Cannot find square root");let a=n,c=t.pow(t.mul(t.ONE,s),r),l=t.pow(o,i),u=t.pow(o,r);for(;!t.eql(u,t.ONE);){if(t.eql(u,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(u);e<a&&!t.eql(r,t.ONE);e++)r=t.sqr(r);const r=t.pow(c,Qi<<BigInt(a-e-1));c=t.sqr(r),l=t.mul(l,r),u=t.mul(u,c),a=e}return l}}(t)}(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Di(s),ZERO:ji,ONE:Qi,create:e=>qi(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return ji<=e&&e<t},is0:t=>t===ji,isOdd:t=>(t&Qi)===Qi,neg:e=>qi(-e,t),eql:(t,e)=>t===e,sqr:e=>qi(e*e,t),add:(e,r)=>qi(e+r,t),sub:(e,r)=>qi(e-r,t),mul:(e,r)=>qi(e*r,t),pow:(t,e)=>function(t,e,r){if(r<ji)throw new Error("Expected power > 0");if(r===ji)return t.ONE;if(r===Qi)return e;let n=t.ONE,s=e;for(;r>ji;)r&Qi&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Qi;return n}(a,t,e),div:(e,r)=>qi(e*Zi(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Zi(e,t),sqrt:n.sqrt||(t=>o(a,t)),invertBatch:t=>function(t,e){const r=new Array(e.length),n=e.reduce(((e,n,s)=>t.is0(n)?e:(r[s]=e,t.mul(e,n))),t.ONE),s=t.inv(n);return e.reduceRight(((e,n,s)=>t.is0(n)?e:(r[s]=t.mul(e,r[s]),t.mul(e,n))),s),r}(a,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>r?Si(t,i):Ci(t,i),fromBytes:t=>{if(t.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${t.length}`);return r?Oi(t):Ti(t)}});return Object.freeze(a)}(po,void 0,void 0,{sqrt:function(t){const e=po,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=Yi(u,r,e)*u%e,f=Yi(h,r,e)*u%e,d=Yi(f,yo,e)*l%e,p=Yi(d,s,e)*d%e,g=Yi(p,i,e)*p%e,m=Yi(g,a,e)*g%e,y=Yi(m,c,e)*m%e,w=Yi(y,a,e)*g%e,b=Yi(w,r,e)*u%e,A=Yi(b,o,e)*p%e,E=Yi(A,n,e)*l%e,v=Yi(E,yo,e);if(!bo.eql(bo.sqr(v),t))throw new Error("Cannot find square root");return v}}),Ao=function(t,e){const r=e=>ho({...t,...fo(e)});return Object.freeze({...r(e),create:r})}({a:BigInt(0),b:BigInt(7),Fp:bo,n:go,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=go,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-mo*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=wo(i*t,e),c=wo(-n*t,e);let l=qi(t-a*r-c*s,e),u=qi(-a*n-c*i,e);const h=l>o,f=u>o;if(h&&(l=e-l),f&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:f,k2:u}}}},is);BigInt(0),Ao.ProjectivePoint;class Eo{#C;constructor(t){f(32===P(t),"invalid private key","privateKey","[REDACTED]"),this.#C=k(t)}get privateKey(){return this.#C}get publicKey(){return Eo.computePublicKey(this.#C)}get compressedPublicKey(){return Eo.computePublicKey(this.#C,!0)}sign(t){f(32===P(t),"invalid digest length","digest",t);const e=Ao.sign(b(t),b(this.#C),{lowS:!0});return Ei.from({r:Z(e.r,32),s:Z(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=Eo.computePublicKey(t);return k(Ao.getSharedSecret(b(this.#C),w(e),!1))}static computePublicKey(t,e){let r=w(t,"key");if(32===r.length)return k(Ao.getPublicKey(r,!!e));if(64===r.length){const t=new Uint8Array(65);t[0]=4,t.set(r,1),r=t}return k(Ao.ProjectivePoint.fromHex(r).toRawBytes(e))}static recoverPublicKey(t,e){f(32===P(t),"invalid digest length","digest",t);const r=Ei.from(e);let n=Ao.Signature.fromCompact(b(N([r.r,r.s])));n=n.addRecoveryBit(r.yParity);const s=n.recoverPublicKey(b(t));return f(null!=s,"invalid signautre for digest","signature",e),"0x"+s.toHex(!1)}static addPoints(t,e,r){const n=Ao.ProjectivePoint.fromHex(Eo.computePublicKey(t).substring(2)),s=Ao.ProjectivePoint.fromHex(Eo.computePublicKey(e).substring(2));return"0x"+n.add(s).toHex(!!r)}}var vo="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const ko=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),No=4;function Po(t){return function(t){let e=0;return()=>t[e++]}(function(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),s=1,i=[0,1];for(let t=1;t<n;t++)i.push(s+=r());let o=r(),a=e;e+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|t[e++],c=8),l>>--c&1}const h=2**31,f=h>>>1,d=h-1;let p=0;for(let t=0;t<31;t++)p=p<<1|u();let g=[],m=0,y=h;for(;;){let t=Math.floor(((p-m+1)*s-1)/y),e=0,r=n;for(;r-e>1;){let n=e+r>>>1;t<i[n]?r=n:e=n}if(0==e)break;g.push(e);let o=m+Math.floor(y*i[e]/s),a=m+Math.floor(y*i[e+1]/s)-1;for(;0==((o^a)&f);)p=p<<1&d|u(),o=o<<1&d,a=a<<1&d|1;for(;o&~a&536870912;)p=p&f|p<<1&d>>>1|u(),o=o<<1^f,a=(a^f)<<1|f|1;m=o,y=1+a-o}let w=n-4;return g.map((e=>{switch(e-w){case 3:return w+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return w+256+(t[a++]<<8|t[a++]);case 1:return w+t[a++];default:return e-1}}))}(function(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((t,r)=>e[t.charCodeAt(0)]=r));let r=t.length,n=new Uint8Array(6*r>>3);for(let s=0,i=0,o=0,a=0;s<r;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}(t)))}function Ro(t){return 1&t?~t>>1:t>>1}function Io(t,e){let r=Array(t);for(let n=0,s=0;n<t;n++)r[n]=s+=Ro(e());return r}function xo(t,e=0){let r=[];for(;;){let n=t(),s=t();if(!s)break;e+=n;for(let t=0;t<s;t++)r.push(e+t);e+=s+1}return r}function To(t){return Co((()=>{let e=xo(t);if(e.length)return e}))}function Oo(t){let e=[];for(;;){let r=t();if(0==r)break;e.push(Bo(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(Uo(r,t))}return e.flat()}function Co(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function So(t,e,r){let n=Array(t).fill().map((()=>[]));for(let s=0;s<e;s++)Io(t,r).forEach(((t,e)=>n[e].push(t)));return n}function Bo(t,e){let r=1+e(),n=e(),s=Co(e);return So(s.length,1+t,e).flatMap(((t,e)=>{let[i,...o]=t;return Array(s[e]).fill().map(((t,e)=>{let s=e*n;return[i+e*r,o.map((t=>t+s))]}))}))}function Uo(t,e){return So(1+e(),1+t,e).map((t=>[t[0],t.slice(1)]))}function Do(t){return`{${function(t){return t.toString(16).toUpperCase().padStart(2,"0")}(t)}}`}function Fo(t){let e=t.length;if(e<4096)return String.fromCodePoint(...t);let r=[];for(let n=0;n<e;)r.push(String.fromCodePoint(...t.slice(n,n+=4096)));return r.join("")}function Lo(t,e){let r=t.length,n=r-e.length;for(let s=0;0==n&&s<r;s++)n=t[s]-e[s];return n}var Mo="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Go=44032,Ho=4352,jo=4449,Qo=4519,Vo=28,Ko=21*Vo,_o=Go+19*Ko,Jo=Ho+19,zo=jo+21,qo=Qo+Vo;function Wo(t){return t>>24&255}function Yo(t){return 16777215&t}let Zo,Xo,$o,ta;function ea(t){return t>=Go&&t<_o}function ra(t,e){if(t>=Ho&&t<Jo&&e>=jo&&e<zo)return Go+(t-Ho)*Ko+(e-jo)*Vo;if(ea(t)&&e>Qo&&e<qo&&(t-Go)%Vo==0)return t+(e-Qo);{let r=ta.get(t);return r&&(r=r.get(e),r)?r:-1}}function na(t){Zo||function(){let t=Po(Mo);Zo=new Map(To(t).flatMap(((t,e)=>t.map((t=>[t,e+1<<24]))))),Xo=new Set(xo(t)),$o=new Map,ta=new Map;for(let[e,r]of Oo(t)){if(!Xo.has(e)&&2==r.length){let[t,n]=r,s=ta.get(t);s||(s=new Map,ta.set(t,s)),s.set(n,e)}$o.set(e,r.reverse())}}();let e=[],r=[],n=!1;function s(t){let r=Zo.get(t);r&&(n=!0,t|=r),e.push(t)}for(let n of t)for(;;){if(n<128)e.push(n);else if(ea(n)){let t=n-Go,e=t%Ko/Vo|0,r=t%Vo;s(Ho+(t/Ko|0)),s(jo+e),r>0&&s(Qo+r)}else{let t=$o.get(n);t?r.push(...t):s(n)}if(!r.length)break;n=r.pop()}if(n&&e.length>1){let t=Wo(e[0]);for(let r=1;r<e.length;r++){let n=Wo(e[r]);if(0==n||t<=n){t=n;continue}let s=r-1;for(;;){let r=e[s+1];if(e[s+1]=e[s],e[s]=r,!s)break;if(t=Wo(e[--s]),t<=n)break}t=Wo(e[r])}}return e}function sa(t){return na(t).map(Yo)}function ia(t){return function(t){let e=[],r=[],n=-1,s=0;for(let i of t){let t=Wo(i),o=Yo(i);if(-1==n)0==t?n=o:e.push(o);else if(s>0&&s>=t)0==t?(e.push(n,...r),r.length=0,n=o):r.push(o),s=t;else{let i=ra(n,o);i>=0?n=i:0==s&&0==t?(e.push(n),n=o):(r.push(o),s=t)}}return n>=0&&e.push(n,...r),e}(na(t))}const oa=45,aa=".",ca=65039,la=1,ua=t=>Array.from(t);function ha(t,e){return t.P.has(e)||t.Q.has(e)}class fa extends Array{get is_emoji(){return!0}}let da,pa,ga,ma,ya,wa,ba,Aa,Ea,va,ka,Na;function Pa(){if(da)return;let t=Po(vo);const e=()=>xo(t),r=()=>new Set(e());da=new Map(Oo(t)),pa=r(),ga=e(),ma=new Set(e().map((t=>ga[t]))),ga=new Set(ga),ya=r(),wa=r();let n=To(t),s=t();const i=()=>new Set(e().flatMap((t=>n[t])).concat(e()));ba=Co((e=>{let r=Co(t).map((t=>t+96));if(r.length){let n=e>=s;return r[0]-=32,r=Fo(r),n&&(r=`Restricted[${r}]`),{N:r,P:i(),Q:i(),M:!t(),R:n}}})),Aa=r(),Ea=new Map;let o=e().concat(ua(Aa)).sort(((t,e)=>t-e));o.forEach(((e,r)=>{let n=t(),s=o[r]=n?o[r-n]:{V:[],M:new Map};s.V.push(e),Aa.has(e)||Ea.set(e,s)}));for(let{V:t,M:e}of new Set(Ea.values())){let r=[];for(let e of t){let t=ba.filter((t=>ha(t,e))),n=r.find((({G:e})=>t.some((t=>e.has(t)))));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(e),t.forEach((t=>n.G.add(t)))}let n=r.flatMap((t=>ua(t.G)));for(let{G:t,V:s}of r){let r=new Set(n.filter((e=>!t.has(e))));for(let t of s)e.set(t,r)}}let a=new Set,c=new Set;const l=t=>a.has(t)?c.add(t):a.add(t);for(let t of ba){for(let e of t.P)l(e);for(let e of t.Q)l(e)}for(let t of a)Ea.has(t)||c.has(t)||Ea.set(t,la);va=new Set(ua(a).concat(ua(sa(a)))),ka=function(t){let e=[],r=xo(t);return function t({S:r,B:n},s,i){if(!(4&r&&i===s[s.length-1])){2&r&&(i=s[s.length-1]),1&r&&e.push(s);for(let e of n)for(let r of e.Q)t(e,[...s,r],i)}}(function e(n){return{S:t(),B:Co((()=>{let n=xo(t).map((t=>r[t]));if(n.length)return e(n)})),Q:n}}([]),[]),e}(t).map((t=>fa.from(t))).sort(Lo),Na=new Map;for(let t of ka){let e=[Na];for(let r of t){let t=e.map((t=>{let e=t.get(r);return e||(e=new Map,t.set(r,e)),e}));r===ca?e.push(...t):e=t}for(let r of e)r.V=t}}function Ra(t){return(Ta(t)?"":`${Ia(xa([t]))} `)+Do(t)}function Ia(t){return`"${t}"‎`}function xa(t,e=Do){let r=[];var n;n=t[0],Pa(),ga.has(n)&&r.push("◌");let s=0,i=t.length;for(let n=0;n<i;n++){let i=t[n];Ta(i)&&(r.push(Fo(t.slice(s,n))),r.push(e(i)),s=n+1)}return r.push(Fo(t.slice(s,i))),r.join("")}function Ta(t){return Pa(),ya.has(t)}function Oa(t,e,r){if(!t)return[];Pa();let n=0;return t.split(aa).map((t=>{let s=function(t){let e=[];for(let r=0,n=t.length;r<n;){let n=t.codePointAt(r);r+=n<65536?1:2,e.push(n)}return e}(t),i={input:s,offset:n};n+=s.length+1;try{let t,n=i.tokens=function(t,e,r){let n=[],s=[];for(t=t.slice().reverse();t.length;){let i=Da(t);if(i)s.length&&(n.push(e(s)),s=[]),n.push(r(i));else{let e=t.pop();if(va.has(e))s.push(e);else{let t=da.get(e);if(t)s.push(...t);else if(!pa.has(e))throw Ca(e)}}}return s.length&&n.push(e(s)),n}(s,e,r),o=n.length;if(!o)throw new Error("empty label");let a=i.output=n.flat();if(function(t){for(let e=t.lastIndexOf(95);e>0;)if(95!==t[--e])throw new Error("underscore allowed only at start")}(a),!(i.emoji=o>1||n[0].is_emoji)&&a.every((t=>t<128)))!function(t){if(t.length>=4&&t[2]==oa&&t[3]==oa)throw new Error(`invalid label extension: "${Fo(t.slice(0,4))}"`)}(a),t="ASCII";else{let e=n.flatMap((t=>t.is_emoji?[]:t));if(e.length){if(ga.has(a[0]))throw Ba("leading combining mark");for(let t=1;t<o;t++){let e=n[t];if(!e.is_emoji&&ga.has(e[0]))throw Ba(`emoji + combining mark: "${Fo(n[t-1])} + ${xa([e[0]])}"`)}!function(t){let e=t[0],r=ko.get(e);if(r)throw Ba(`leading ${r}`);let n=t.length,s=-1;for(let i=1;i<n;i++){e=t[i];let n=ko.get(e);if(n){if(s==i)throw Ba(`${r} + ${n}`);s=i+1,r=n}}if(s==n)throw Ba(`trailing ${r}`)}(a);let r=ua(new Set(e)),[s]=function(t){let e=ba;for(let r of t){let t=e.filter((t=>ha(t,r)));if(!t.length)throw ba.some((t=>ha(t,r)))?Sa(e[0],r):Ca(r);if(e=t,1==t.length)break}return e}(r);!function(t,e){for(let r of e)if(!ha(t,r))throw Sa(t,r);if(t.M){let t=sa(e);for(let e=1,r=t.length;e<r;e++)if(ma.has(t[e])){let n=e+1;for(let s;n<r&&ma.has(s=t[n]);n++)for(let r=e;r<n;r++)if(t[r]==s)throw new Error(`duplicate non-spacing marks: ${Ra(s)}`);if(n-e>No)throw new Error(`excessive non-spacing marks: ${Ia(xa(t.slice(e-1,n)))} (${n-e}/${No})`);e=n}}}(s,e),function(t,e){let r,n=[];for(let t of e){let e=Ea.get(t);if(e===la)return;if(e){let n=e.M.get(t);if(r=r?r.filter((t=>n.has(t))):ua(n),!r.length)return}else n.push(t)}if(r)for(let e of r)if(n.every((t=>ha(e,t))))throw new Error(`whole-script confusable: ${t.N}/${e.N}`)}(s,r),t=s.N}else t="Emoji"}i.type=t}catch(t){i.error=t}return i}))}function Ca(t){return new Error(`disallowed character: ${Ra(t)}`)}function Sa(t,e){let r=Ra(e),n=ba.find((t=>t.P.has(e)));return n&&(r=`${n.N} ${r}`),new Error(`illegal mixture: ${t.N} + ${r}`)}function Ba(t){return new Error(`illegal placement: ${t}`)}function Ua(t){return t.filter((t=>t!=ca))}function Da(t,e){let r,n=Na,s=t.length;for(;s&&(n=n.get(t[--s]),n);){let{V:i}=n;i&&(r=i,e&&e.push(...t.slice(s).reverse()),t.length=s)}return r}const Fa=new Uint8Array(32);function La(t){return f(0!==t.length,"invalid ENS name; empty component","comp",t),t}function Ma(t){const e=U(Ga(t)),r=[];if(0===t.length)return r;let n=0;for(let t=0;t<e.length;t++)46===e[t]&&(r.push(La(e.slice(n,t))),n=t+1);return f(n<e.length,"invalid ENS name; empty component","name",t),r.push(La(e.slice(n))),r}function Ga(t){try{if(0===t.length)throw new Error("empty label");return function(t){return function(t){return t.map((({input:e,error:r,output:n})=>{if(r){let n=r.message;throw new Error(1==t.length?n:`Invalid label ${Ia(xa(e))}: ${n}`)}return Fo(n)})).join(aa)}(Oa(t,ia,Ua))}(t)}catch(e){f(!1,`invalid ENS name (${e.message})`,"name",t)}}function Ha(t){try{return 0!==Ma(t).length}catch(t){}return!1}function ja(t){f("string"==typeof t,"invalid ENS name; not a string","name",t),f(t.length,"invalid ENS name (empty label)","name",t);let e=Fa;const r=Ma(t);for(;r.length;)e=re(N([e,re(r.pop())]));return k(e)}function Qa(t){return k(N(Ma(t).map((t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e}))))+"00"}function Va(t){let e;return e="string"==typeof t?Eo.computePublicKey(t,!1):t.publicKey,ue(re("0x"+e.substring(4)).substring(26))}function Ka(t,e){return Va(Eo.recoverPublicKey(t,e))}function _a(t){return"string"==typeof t&&(t=U(t)),re(N([U(nn),U(String(t.length)),t]))}function Ja(t,e){return Ka(_a(t),e)}Fa.fill(0);const za=new RegExp("^bytes([0-9]+)$"),qa=new RegExp("^(u?int)([0-9]*)$"),Wa=new RegExp("^(.*)\\\\[([0-9]*)\\\\]$");function Ya(t,e,r){switch(t){case"address":return w(r?T(e,32):ue(e));case"string":return U(e);case"bytes":return w(e);case"bool":return e=e?"0x01":"0x00",w(r?T(e,32):e)}let n=t.match(qa);if(n){let s="int"===n[1],i=parseInt(n[2]||"256");return f((!n[2]||n[2]===String(i))&&i%8==0&&0!==i&&i<=256,"invalid number type","type",t),r&&(i=256),s&&(e=V(e,i)),w(T(X(e),i/8))}if(n=t.match(za),n){const s=parseInt(n[1]);return f(String(s)===n[1]&&0!==s&&s<=32,"invalid bytes type","type",t),f(P(e)===s,`invalid value for ${t}`,"value",e),r?w(O(e,32)):e}if(n=t.match(Wa),n&&Array.isArray(e)){const r=n[1];f(parseInt(n[2]||String(e.length))===e.length,`invalid array length for ${t}`,"value",e);const s=[];return e.forEach((function(t){s.push(Ya(r,t,!0))})),w(N(s))}f(!1,"invalid type","type",t)}function Za(t,e){f(t.length===e.length,"wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach((function(t,n){r.push(Ya(t,e[n]))})),k(N(r))}function Xa(t,e){return re(Za(t,e))}function $a(t,e){return ui(Za(t,e))}const tc=new Uint8Array(32);tc.fill(0);const ec=BigInt(-1),rc=BigInt(0),nc=BigInt(1),sc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ic=Z(nc,32),oc=Z(rc,32),ac={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},cc=["name","version","chainId","verifyingContract","salt"];function lc(t){return function(e){return f("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const uc={name:lc("name"),version:lc("version"),chainId:function(t){const e=_(t,"domain.chainId");return f(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):$(e)},verifyingContract:function(t){try{return ue(t).toLowerCase()}catch(t){}f(!1,\'invalid domain value "verifyingContract"\',"domain.verifyingContract",t)},salt:function(t){const e=w(t,"domain.salt");return f(32===e.length,\'invalid domain value "salt"\',"domain.salt",t),k(e)}};function hc(t){{const e=t.match(/^(u?)int(\\d*)$/);if(e){const r=""===e[1],n=parseInt(e[2]||"256");f(n%8==0&&0!==n&&n<=256&&(null==e[2]||e[2]===String(n)),"invalid numeric width","type",t);const s=K(sc,r?n-1:n),i=r?(s+nc)*ec:rc;return function(e){const n=_(e,"value");return f(n>=i&&n<=s,`value out-of-bounds for ${t}`,"value",n),Z(r?V(n,256):n,32)}}}{const e=t.match(/^bytes(\\d+)$/);if(e){const r=parseInt(e[1]);return f(0!==r&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(e){return f(w(e).length===r,`invalid length for ${t}`,"value",e),function(t){const e=w(t),r=e.length%32;return r?N([e,tc.slice(r)]):k(e)}(e)}}}switch(t){case"address":return function(t){return T(ue(t),32)};case"bool":return function(t){return t?ic:oc};case"bytes":return function(t){return re(t)};case"string":return function(t){return Ue(t)}}return null}function fc(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class dc{primaryType;#S;get types(){return JSON.parse(this.#S)}#B;#U;constructor(t){this.#S=JSON.stringify(t),this.#B=new Map,this.#U=new Map;const e=new Map,r=new Map,n=new Map;Object.keys(t).forEach((t=>{e.set(t,new Set),r.set(t,[]),n.set(t,new Set)}));for(const n in t){const s=new Set;for(const i of t[n]){f(!s.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",t),s.add(i.name);const o=i.type.match(/^([^\\x5b]*)(\\x5b|$)/)[1]||null;f(o!==n,`circular type reference to ${JSON.stringify(o)}`,"types",t),hc(o)||(f(r.has(o),`unknown type ${JSON.stringify(o)}`,"types",t),r.get(o).push(n),e.get(n).add(o))}}const s=Array.from(r.keys()).filter((t=>0===r.get(t).length));f(0!==s.length,"missing primary type","types",t),f(1===s.length,`ambiguous primary types or unused types: ${s.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),o(this,{primaryType:s[0]}),function s(i,o){f(!o.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",t),o.add(i);for(const t of e.get(i))if(r.has(t)){s(t,o);for(const e of o)n.get(e).add(t)}o.delete(i)}(this.primaryType,new Set);for(const[e,r]of n){const n=Array.from(r);n.sort(),this.#B.set(e,fc(e,t[e])+n.map((e=>fc(e,t[e]))).join(""))}}getEncoder(t){let e=this.#U.get(t);return e||(e=this.#D(t),this.#U.set(t,e)),e}#D(t){{const e=hc(t);if(e)return e}const e=t.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);if(e){const t=e[1],r=this.getEncoder(t);return n=>{f(!e[3]||parseInt(e[3])===n.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",n);let s=n.map(r);return this.#B.has(t)&&(s=s.map(re)),re(N(s))}}const r=this.types[t];if(r){const e=Ue(this.#B.get(t));return t=>{const n=r.map((({name:e,type:r})=>{const n=this.getEncoder(r)(t[e]);return this.#B.has(r)?re(n):n}));return n.unshift(e),N(n)}}f(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#B.get(t);return f(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return re(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(hc(t))return r(t,e);const n=t.match(/^(.*)(\\x5b(\\d*)\\x5d)$/);if(n)return f(!n[3]||parseInt(n[3])===e.length,`array length mismatch; expected length ${parseInt(n[3])}`,"value",e),e.map((t=>this._visit(n[1],t,r)));const s=this.types[t];if(s)return s.reduce(((t,{name:n,type:s})=>(t[n]=this._visit(s,e[n],r),t)),{});f(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new dc(t)}static getPrimaryType(t){return dc.from(t).primaryType}static hashStruct(t,e,r){return dc.from(e).hashStruct(t,r)}static hashDomain(t){const e=[];for(const r in t){if(null==t[r])continue;const n=ac[r];f(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort(((t,e)=>cc.indexOf(t.name)-cc.indexOf(e.name))),dc.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return N(["0x1901",dc.hashDomain(t),dc.from(e).hash(r)])}static hash(t,e,r){return re(dc.encode(t,e,r))}static async resolveNames(t,e,r,n){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const s={};t.verifyingContract&&!A(t.verifyingContract,20)&&(s[t.verifyingContract]="0x");const i=dc.from(e);i.visit(r,((t,e)=>("address"!==t||A(e,20)||(s[e]="0x"),e)));for(const t in s)s[t]=await n(t);return t.verifyingContract&&s[t.verifyingContract]&&(t.verifyingContract=s[t.verifyingContract]),{domain:t,value:r=i.visit(r,((t,e)=>"address"===t&&s[e]?s[e]:e))}}static getPayload(t,e,r){dc.hashDomain(t);const n={},s=[];cc.forEach((e=>{const r=t[e];null!=r&&(n[e]=uc[e](r),s.push({name:e,type:ac[e]}))}));const i=dc.from(e),o=Object.assign({},e);return f(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=s,i.encode(r),{types:o,domain:n,primaryType:i.primaryType,message:i.visit(r,((t,e)=>{if(t.match(/^bytes(\\d*)/))return k(w(e));if(t.match(/^u?int/))return _(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return f("string"==typeof e,"invalid string","value",e),e}f(!1,"unsupported type","type",t)}))}}}function pc(t,e,r,n){return Ka(dc.hash(t,e,r),n)}function gc(t){t=atob(t);const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return w(e)}function mc(t){const e=w(t);let r="";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return btoa(r)}function yc(t){return async function(t,e){const r=t.url.split(":")[0].toLowerCase();let n;if(h("http"===r||"https"===r,`unsupported protocol ${r}`,"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),h("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),e){const t=new AbortController;n=t.signal,e.addListener((()=>{t.abort()}))}const s={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:n},i=await fetch(t.url,s),o={};i.headers.forEach(((t,e)=>{o[e.toLowerCase()]=t}));const a=await i.arrayBuffer(),c=null==a?null:new Uint8Array(a);return{statusCode:i.status,statusMessage:i.statusText,headers:o,body:c}}}yc();let wc=yc();const bc=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ac=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ec=!1;async function vc(t,e){try{const e=t.match(bc);if(!e)throw new Error("invalid data");return new Tc(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?gc(e[3]):U(e[3].replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16))))))}catch(e){return new Tc(599,"BAD REQUEST (invalid data: URI)",{},null,new xc(t))}}function kc(t){return async function(e,r){try{const r=e.match(Ac);if(!r)throw new Error("invalid link");return new xc(`${t}${r[2]}`)}catch(t){return new Tc(599,"BAD REQUEST (invalid IPFS URI)",{},null,new xc(e))}}}const Nc={data:vc,ipfs:kc("https://gateway.ipfs.io/ipfs/")},Pc=new WeakMap;class Rc{#F;#L;constructor(t){this.#F=[],this.#L=!1,Pc.set(t,(()=>{if(!this.#L){this.#L=!0;for(const t of this.#F)setTimeout((()=>{t()}),0);this.#F=[]}}))}addListener(t){h(!this.#L,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#F.push(t)}get cancelled(){return this.#L}checkSignal(){h(!this.cancelled,"cancelled","CANCELLED",{})}}function Ic(t){if(null==t)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class xc{#M;#G;#H;#j;#Q;#V;#K;#_;#J;#z;#q;#W;#Y;#Z;#X;get url(){return this.#V}set url(t){this.#V=String(t)}get body(){return null==this.#K?null:new Uint8Array(this.#K)}set body(t){if(null==t)this.#K=void 0,this.#_=void 0;else if("string"==typeof t)this.#K=U(t),this.#_="text/plain";else if(t instanceof Uint8Array)this.#K=t,this.#_="application/octet-stream";else{if("object"!=typeof t)throw new Error("invalid body");this.#K=U(JSON.stringify(t)),this.#_="application/json"}}hasBody(){return null!=this.#K}get method(){return this.#j?this.#j:this.hasBody()?"POST":"GET"}set method(t){null==t&&(t=""),this.#j=String(t).toUpperCase()}get headers(){const t=Object.assign({},this.#H);return this.#J&&(t.authorization=`Basic ${mc(U(this.#J))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),null==t["content-type"]&&this.#_&&(t["content-type"]=this.#_),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#H[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#H={}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#J||null}setCredentials(t,e){f(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#J=`${t}:${e}`}get allowGzip(){return this.#G}set allowGzip(t){this.#G=!!t}get allowInsecureAuthentication(){return!!this.#M}set allowInsecureAuthentication(t){this.#M=!!t}get timeout(){return this.#Q}set timeout(t){f(t>=0,"timeout must be non-zero","timeout",t),this.#Q=t}get preflightFunc(){return this.#z||null}set preflightFunc(t){this.#z=t}get processFunc(){return this.#q||null}set processFunc(t){this.#q=t}get retryFunc(){return this.#W||null}set retryFunc(t){this.#W=t}get getUrlFunc(){return this.#X||wc}set getUrlFunc(t){this.#X=t}constructor(t){this.#V=String(t),this.#M=!1,this.#G=!0,this.#H={},this.#j="",this.#Q=3e5,this.#Z={slotInterval:250,maxAttempts:12},this.#X=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#K?k(this.#K):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(this.#Z.slotInterval=t.slotInterval),null!=t.maxAttempts&&(this.#Z.maxAttempts=t.maxAttempts)}async#$(t,e,r,n,s){if(t>=this.#Z.maxAttempts)return s.makeServerError("exceeded maximum retry limit");h(Oc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await function(t){return new Promise((e=>setTimeout(e,t)))}(r);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in Nc){const t=await Nc[o](i.url,Ic(n.#Y));if(t instanceof Tc){let e=t;if(this.processFunc){Ic(n.#Y);try{e=await this.processFunc(i,e)}catch(t){null!=t.throttle&&"number"==typeof t.stall||e.makeServerError("error in post-processing function",t).assertOk()}}return e}i=t}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await this.getUrlFunc(i,Ic(n.#Y));let c=new Tc(a.statusCode,a.statusMessage,a.headers,a.body,n);if(301===c.statusCode||302===c.statusCode){try{const r=c.headers.location||"";return i.redirect(r).#$(t+1,e,0,n,c)}catch(t){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,t))){const r=c.headers["retry-after"];let s=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(s=parseInt(r)),i.clone().#$(t+1,e,s,n,c)}if(this.processFunc){Ic(n.#Y);try{c=await this.processFunc(i,c)}catch(r){null!=r.throttle&&"number"==typeof r.stall||c.makeServerError("error in post-processing function",r).assertOk();let s=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return r.stall>=0&&(s=r.stall),i.clone().#$(t+1,e,s,n,c)}}return c}send(){return h(null==this.#Y,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#Y=new Rc(this),this.#$(0,Oc()+this.timeout,0,this,new Tc(0,"",{},null,this))}cancel(){h(null!=this.#Y,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Pc.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();h("GET"===this.method&&("https"!==e||"http"!==r)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const n=new xc(t);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#H=Object.assign({},this.#H),this.#K&&(n.#K=new Uint8Array(this.#K)),n.#_=this.#_,n}clone(){const t=new xc(this.url);return t.#j=this.#j,this.#K&&(t.#K=this.#K),t.#_=this.#_,t.#H=Object.assign({},this.#H),t.#J=this.#J,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#z=this.#z,t.#q=this.#q,t.#W=this.#W,t.#X=this.#X,t}static lockConfig(){Ec=!0}static getGateway(t){return Nc[t.toLowerCase()]||null}static registerGateway(t,e){if("http"===(t=t.toLowerCase())||"https"===t)throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Ec)throw new Error("gateways locked");Nc[t]=e}static registerGetUrl(t){if(Ec)throw new Error("gateways locked");wc=t}static createGetUrlFunc(t){return yc()}static createDataGateway(){return vc}static createIpfsGatewayFunc(t){return kc(t)}}class Tc{#tt;#et;#H;#K;#rt;#nt;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#K?k(this.#K):"null"}>`}get statusCode(){return this.#tt}get statusMessage(){return this.#et}get headers(){return Object.assign({},this.#H)}get body(){return null==this.#K?null:new Uint8Array(this.#K)}get bodyText(){try{return null==this.#K?"":D(this.#K)}catch(t){h(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){h(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let r=0;return{next:()=>{if(r<e.length){const n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,r,n,s){this.#tt=t,this.#et=e,this.#H=Object.keys(r).reduce(((t,e)=>(t[e.toLowerCase()]=String(r[e]),t)),{}),this.#K=null==n?null:new Uint8Array(n),this.#rt=s||null,this.#nt={message:""}}makeServerError(t,e){let r;r=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const n=new Tc(599,r,this.headers,this.body,this.#rt||void 0);return n.#nt={message:t,error:e},n}throwThrottleError(t,e){null==e?e=-1:f(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const r=new Error(t||"throttling requests");throw o(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=this.#K}get request(){return this.#rt}ok(){return""===this.#nt.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#nt;""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`),h(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e})}}function Oc(){return(new Date).getTime()}const Cc=new Set;function Sc(t){Cc.has(t)||(Cc.add(t),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${t} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}class Bc{name;constructor(t){o(this,{name:t})}clone(){return new Bc(this.name)}}class Uc extends Bc{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){null==t&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);const r={effectiveBlock:t};function n(t,n){let s=(e||{})[t];null==s&&(s=n),f("number"==typeof s,`invalud value for ${t}`,"costs",e),r[t]=s}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),o(this,r)}clone(){return new Uc(this.effectiveBlock,this)}}class Dc extends Bc{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),o(this,{address:t||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==e?1:e})}clone(){return new Dc(this.address,this.targetNetwork)}}class Fc extends Bc{#st;get feeDataFunc(){return this.#st}constructor(t){super("org.ethers.plugins.network.FeeData"),this.#st=t}async getFeeData(t){return await this.#st(t)}clone(){return new Fc(this.#st)}}class Lc extends Bc{#V;#it;get url(){return this.#V}get processFunc(){return this.#it}constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#V=t,this.#it=e}clone(){return this}}const Mc=new Map;class Gc{#ot;#at;#ct;constructor(t,e){this.#ot=t,this.#at=_(e),this.#ct=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#ot}set name(t){this.#ot=t}get chainId(){return this.#at}set chainId(t){this.#at=_(t,"chainId")}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===_(t)}catch(t){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===_(t)}catch(t){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===_(t.chainId)}catch(t){}return!1}return null!=t.name&&this.name===t.name}return!1}get plugins(){return Array.from(this.#ct.values())}attachPlugin(t){if(this.#ct.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#ct.set(t.name,t.clone()),this}getPlugin(t){return this.#ct.get(t)||null}getPlugins(t){return this.plugins.filter((e=>e.name.split("#")[0]===t))}clone(){const t=new Gc(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Uc;let r=e.txBase;if(null==t.to&&(r+=e.txCreate),t.data)for(let n=2;n<t.data.length;n+=2)"00"===t.data.substring(n,n+2)?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){const n=on(t.accessList);for(const t in n)r+=e.txAccessListAddress+e.txAccessListStorageKey*n[t].storageKeys.length}return r}static from(t){if(function(){function t(t,e,r){const n=function(){const n=new Gc(t,e);return null!=r.ensNetwork&&n.attachPlugin(new Dc(null,r.ensNetwork)),n.attachPlugin(new Uc),(r.plugins||[]).forEach((t=>{n.attachPlugin(t)})),n};Gc.register(t,n),Gc.register(e,n),r.altNames&&r.altNames.forEach((t=>{Gc.register(t,n)}))}Qc||(Qc=!0,t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("matic",137,{ensNetwork:1,plugins:[jc("https://gasstation.polygon.technology/v2")]}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[jc("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("xdai",100,{ensNetwork:1}))}(),null==t)return Gc.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const e=Mc.get(t);if(e)return e();if("bigint"==typeof t)return new Gc("unknown",t);f(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){f("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const e=new Gc(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&e.attachPlugin(new Dc(t.ensAddress,t.ensNetwork)),e}f(!1,"invalid network","network",t)}static register(t,e){"number"==typeof t&&(t=BigInt(t));const r=Mc.get(t);r&&f(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),Mc.set(t,e)}}function Hc(t,e){const r=String(t);if(!r.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw new Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let t=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||t++,n[1]=t.toString()}return BigInt(n[0]+n[1])}function jc(t){return new Lc(t,(async(t,e,r)=>{let n;r.setHeader("User-Agent","ethers");try{const[e,s]=await Promise.all([r.send(),t()]);n=e;const i=n.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:Hc(i.maxFee,9),maxPriorityFeePerGas:Hc(i.maxPriorityFee,9)}}catch(t){h(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:t})}}))}let Qc=!1;function Vc(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Kc(t,e,r){let n=0;for(let s=0;s<r;s++)n=256*n+t[e+s];return n}function _c(t,e,r,n){const s=[];for(;r<e+1+n;){const i=Jc(t,r);s.push(i.result),h((r+=i.consumed)<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:s}}function Jc(t,e){h(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const r=e=>{h(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const n=t[e]-247;r(e+1+n);const s=Kc(t,e+1,n);return r(e+1+n+s),_c(t,e,e+1+n,n+s)}if(t[e]>=192){const n=t[e]-192;return r(e+1+n),_c(t,e,e+1,n)}if(t[e]>=184){const n=t[e]-183;r(e+1+n);const s=Kc(t,e+1,n);return r(e+1+n+s),{consumed:1+n+s,result:k(t.slice(e+1+n,e+1+n+s))}}if(t[e]>=128){const n=t[e]-128;return r(e+1+n),{consumed:1+n,result:k(t.slice(e+1,e+1+n))}}return{consumed:1,result:Vc(t[e])}}function zc(t){const e=w(t,"data"),r=Jc(e,0);return f(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}const qc=BigInt(0),Wc=BigInt(2),Yc=BigInt(27),Zc=BigInt(28),Xc=BigInt(35),$c=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function tl(t){return"0x"===t?null:ue(t)}function el(t,e){try{return on(t)}catch(r){f(!1,r.message,e,t)}}function rl(t,e){return"0x"===t?0:W(t,e)}function nl(t,e){if("0x"===t)return qc;const r=_(t,e);return f(r<=$c,"value exceeds uint size",e,r),r}function sl(t,e){const r=_(t,"value"),n=X(r);return f(n.length<=32,"value too large",`tx.${e}`,r),n}function il(t){return on(t).map((t=>[t.address,t.storageKeys]))}function ol(t,e){const r=[sl(t.nonce||0,"nonce"),sl(t.gasPrice||0,"gasPrice"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x"];let n=qc;if(t.chainId!=qc)n=_(t.chainId,"tx.chainId"),f(!e||null==e.networkV||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(n=e)}if(!e)return n!==qc&&(r.push(X(n)),r.push("0x"),r.push("0x")),Qr(r);let s=BigInt(27+e.yParity);return n!==qc?s=Ei.getChainIdV(n,e.v):BigInt(e.v)!==s&&f(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(X(s)),r.push(X(e.r)),r.push(X(e.s)),Qr(r)}function al(t,e){let r;try{if(r=rl(e[0],"yParity"),0!==r&&1!==r)throw new Error("bad yParity")}catch(t){f(!1,"invalid yParity","yParity",e[0])}const n=T(e[1],32),s=T(e[2],32),i=Ei.from({r:n,s,yParity:r});t.signature=i}function cl(t,e){const r=[sl(t.chainId||0,"chainId"),sl(t.nonce||0,"nonce"),sl(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sl(t.maxFeePerGas||0,"maxFeePerGas"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x",il(t.accessList||[])];return e&&(r.push(sl(e.yParity,"yParity")),r.push(X(e.r)),r.push(X(e.s))),N(["0x02",Qr(r)])}function ll(t,e){const r=[sl(t.chainId||0,"chainId"),sl(t.nonce||0,"nonce"),sl(t.gasPrice||0,"gasPrice"),sl(t.gasLimit||0,"gasLimit"),null!=t.to?ue(t.to):"0x",sl(t.value||0,"value"),t.data||"0x",il(t.accessList||[])];return e&&(r.push(sl(e.yParity,"recoveryParam")),r.push(X(e.r)),r.push(X(e.s))),N(["0x01",Qr(r)])}class ul{#lt;#ut;#e;#ht;#ft;#dt;#pt;#gt;#mt;#at;#yt;#wt;get type(){return this.#lt}set type(t){switch(t){case null:this.#lt=null;break;case 0:case"legacy":this.#lt=0;break;case 1:case"berlin":case"eip-2930":this.#lt=1;break;case 2:case"london":case"eip-1559":this.#lt=2;break;default:f(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#ut}set to(t){this.#ut=null==t?null:ue(t)}get nonce(){return this.#ht}set nonce(t){this.#ht=W(t,"value")}get gasLimit(){return this.#ft}set gasLimit(t){this.#ft=_(t)}get gasPrice(){const t=this.#dt;return null!=t||0!==this.type&&1!==this.type?t:qc}set gasPrice(t){this.#dt=null==t?null:_(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#pt;return null==t?2===this.type?qc:null:t}set maxPriorityFeePerGas(t){this.#pt=null==t?null:_(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#gt;return null==t?2===this.type?qc:null:t}set maxFeePerGas(t){this.#gt=null==t?null:_(t,"maxFeePerGas")}get data(){return this.#e}set data(t){this.#e=k(t)}get value(){return this.#mt}set value(t){this.#mt=_(t,"value")}get chainId(){return this.#at}set chainId(t){this.#at=_(t)}get signature(){return this.#yt||null}set signature(t){this.#yt=null==t?null:Ei.from(t)}get accessList(){const t=this.#wt||null;return null==t?1===this.type||2===this.type?[]:null:t}set accessList(t){this.#wt=null==t?null:on(t)}constructor(){this.#lt=null,this.#ut=null,this.#ht=0,this.#ft=BigInt(0),this.#dt=null,this.#pt=null,this.#gt=null,this.#e="0x",this.#mt=BigInt(0),this.#at=BigInt(0),this.#yt=null,this.#wt=null}get hash(){return null==this.signature?null:re(this.serialized)}get unsignedHash(){return re(this.unsignedSerialized)}get from(){return null==this.signature?null:Ka(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:Eo.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(h(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return ol(this,this.signature);case 1:return ll(this,this.signature);case 2:return cl(this,this.signature)}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return ol(this);case 1:return ll(this);case 2:return cl(this)}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&h(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),h(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),h(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const n=[];return null!=this.type?n.push(this.type):e?n.push(2):t?(n.push(1),r||n.push(0)):r?(n.push(1),n.push(2)):(n.push(0),n.push(1),n.push(2)),n.sort(),n}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return ul.from(this)}toJSON(){const t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new ul;if("string"==typeof t){const e=w(t);if(e[0]>=127)return ul.from(function(t){const e=zc(t);f(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const r={type:0,nonce:rl(e[0],"nonce"),gasPrice:nl(e[1],"gasPrice"),gasLimit:nl(e[2],"gasLimit"),to:tl(e[3]),value:nl(e[4],"value"),data:k(e[5]),chainId:qc};if(6===e.length)return r;const n=nl(e[6],"v"),s=nl(e[7],"r"),i=nl(e[8],"s");if(s===qc&&i===qc)r.chainId=n;else{let s=(n-Xc)/Wc;s<qc&&(s=qc),r.chainId=s,f(s!==qc||n===Yc||n===Zc,"non-canonical legacy v","v",e[6]),r.signature=Ei.from({r:T(e[7],32),s:T(e[8],32),v:n}),r.hash=re(t)}return r}(e));switch(e[0]){case 1:return ul.from(function(t){const e=zc(w(t).slice(1));f(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",k(t));const r={type:1,chainId:nl(e[0],"chainId"),nonce:rl(e[1],"nonce"),gasPrice:nl(e[2],"gasPrice"),gasLimit:nl(e[3],"gasLimit"),to:tl(e[4]),value:nl(e[5],"value"),data:k(e[6]),accessList:el(e[7],"accessList")};return 8===e.length||(r.hash=re(t),al(r,e.slice(8))),r}(e));case 2:return ul.from(function(t){const e=zc(w(t).slice(1));f(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",k(t));const r=nl(e[2],"maxPriorityFeePerGas"),n=nl(e[3],"maxFeePerGas"),s={type:2,chainId:nl(e[0],"chainId"),nonce:rl(e[1],"nonce"),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:nl(e[4],"gasLimit"),to:tl(e[5]),value:nl(e[6],"value"),data:k(e[7]),accessList:el(e[8],"accessList")};return 9===e.length||(s.hash=re(t),al(s,e.slice(9))),s}(e))}h(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new ul;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=Ei.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.hash&&(f(e.isSigned(),"unsigned transaction cannot define hash","tx",t),f(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(f(e.isSigned(),"unsigned transaction cannot define from","tx",t),f(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}const hl="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let fl=null;function dl(t){if(null==fl){fl={};for(let t=0;t<hl.length;t++)fl[hl[t]]=BigInt(t)}const e=fl[t];return f(null!=e,"invalid base58 value","letter",t),e}const pl=BigInt(0),gl=BigInt(58);function ml(t){const e=w(t);let r=q(e),n="";for(;r;)n=hl[Number(r%gl)]+n,r/=gl;for(let t=0;t<e.length&&!e[t];t++)n=hl[0]+n;return n}function yl(t){let e=pl;for(let r=0;r<t.length;r++)e*=gl,e+=dl(t[r]);return e}function wl(t){return t.match(/^ipfs:\\/\\/ipfs\\//i)?t=t.substring(12):t.match(/^ipfs:\\/\\//i)?t=t.substring(7):f(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class bl{name;constructor(t){o(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Al=new RegExp("^(ipfs)://(.*)$","i"),El=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Al,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class vl{provider;address;name;#bt;#At;constructor(t,e,r){o(this,{provider:t,address:e,name:r}),this.#bt=null,this.#At=new zn(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return null==this.#bt&&(this.#bt=(async()=>{try{return await this.#At.supportsInterface("0x9061b923")}catch(t){if(c(t,"CALL_EXCEPTION"))return!1;throw this.#bt=null,t}})()),await this.#bt}async#Et(t,e){e=(e||[]).slice();const r=this.#At.interface;e.unshift(ja(this.name));let n=null;await this.supportsWildcard()&&(n=r.getFunction(t),h(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[Qa(this.name),r.encodeFunctionData(n,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const s=await this.#At[t](...e);return n?r.decodeFunctionResult(n,s)[0]:s}catch(t){if(!c(t,"CALL_EXCEPTION"))throw t}return null}async getAddress(t){if(null==t&&(t=60),60===t)try{const t=await this.#Et("addr(bytes32)");return null==t||t===Wr?null:t}catch(t){if(c(t,"CALL_EXCEPTION"))return null;throw t}if(t>=0&&t<2147483648){let e=t+2147483648;const r=await this.#Et("addr(bytes32,uint)",[e]);if(A(r,20))return ue(r)}let e=null;for(const r of this.provider.plugins)if(r instanceof bl&&r.supportsCoinType(t)){e=r;break}if(null==e)return null;const r=await this.#Et("addr(bytes32,uint)",[t]);if(null==r||"0x"===r)return null;const n=await e.decodeAddress(t,r);if(null!=n)return n;h(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){const e=await this.#Et("text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){const t=await this.#Et("contenthash(bytes32)");if(null==t||"0x"===t)return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t="e3010170"===e[1]?"ipfs":"ipns",r=parseInt(e[4],16);if(e[5].length===2*r)return`${t}://${ml("0x"+e[2])}`}const r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;h(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(null==e)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<El.length;r++){const n=e.match(El[r]);if(null==n)continue;const s=n[1].toLowerCase();switch(s){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const r=wl(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:r}),{linkage:t,url:r}}case"erc721":case"erc1155":{const r="erc721"===s?"tokenURI(uint256)":"uri(uint256)";t.push({type:s,value:e});const i=await this.getAddress();if(null==i)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const o=(n[2]||"").split("/");if(2!==o.length)return t.push({type:`!${s}caip`,value:n[2]||""}),{url:null,linkage:t};const a=o[1],c=new zn(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===s){const e=await c.ownerOf(a);if(i!==e)return t.push({type:"!owner",value:e}),{url:null,linkage:t};t.push({type:"owner",value:e})}else if("erc1155"===s){const e=await c.balanceOf(i,a);if(!e)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:e.toString()})}let l=await c[r](a);if(null==l||"0x"===l)return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:l}),"erc1155"===s&&(l=l.replace("{id}",Z(a,32).substring(2)),t.push({type:"metadata-url-expanded",value:l})),l.match(/^ipfs:/i)&&(l=wl(l)),t.push({type:"metadata-url",value:l});let u={};const h=await new xc(l).send();h.assertOk();try{u=h.bodyJson}catch(e){try{t.push({type:"!metadata",value:h.bodyText})}catch(e){const r=h.body;return r&&t.push({type:"!metadata",value:k(r)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!u)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(u)});let f=u.image;if("string"!=typeof f)return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(f.match(/^(https:\\/\\/|data:)/i));else{if(null==f.match(Al))return t.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:f}),f=wl(f)}return t.push({type:"url",value:f}),{linkage:t,url:f}}}}}catch(t){}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return h(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async#vt(t,e){const r=await vl.getEnsAddress(t);try{const n=new zn(r,["function resolver(bytes32) view returns (address)"],t),s=await n.resolver(ja(e),{enableCcipRead:!0});return s===Wr?null:s}catch(t){throw t}return null}static async fromName(t,e){let r=e;for(;;){if(""===r||"."===r)return null;if("eth"!==e&&"eth"===r)return null;const n=await vl.#vt(t,r);if(null!=n){const s=new vl(t,n,e);return r===e||await s.supportsWildcard()?s:null}r=r.split(".").slice(1).join(".")}}}const kl=BigInt(0);function Nl(t,e){return function(r){return null==r?e:t(r)}}function Pl(t){return e=>{if(!Array.isArray(e))throw new Error("not an array");return e.map((e=>t(e)))}}function Rl(t,e){return r=>{const n={};for(const s in t){let i=s;if(e&&s in e&&!(i in r))for(const t of e[s])if(t in r){i=t;break}try{const e=t[s](r[i]);void 0!==e&&(n[s]=e)}catch(t){h(!1,`invalid value for value.${s} (${t instanceof Error?t.message:"not-an-error"})`,"BAD_DATA",{value:r})}}return n}}function Il(t){return f(A(t,!0),"invalid data","value",t),t}function xl(t){return f(A(t,32),"invalid hash","value",t),t}const Tl=Rl({address:ue,blockHash:xl,blockNumber:W,data:Il,index:W,removed:Nl((function(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}f(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}),!1),topics:Pl(xl),transactionHash:xl,transactionIndex:W},{index:["logIndex"]}),Ol=Rl({hash:Nl(xl),parentHash:xl,number:W,timestamp:W,nonce:Nl(Il),difficulty:_,gasLimit:_,gasUsed:_,miner:Nl(ue),extraData:Il,baseFeePerGas:Nl(_)}),Cl=Rl({transactionIndex:W,blockNumber:W,transactionHash:xl,address:ue,topics:Pl(xl),data:Il,index:W,blockHash:xl},{index:["logIndex"]}),Sl=Rl({to:Nl(ue,null),from:Nl(ue,null),contractAddress:Nl(ue,null),index:W,root:Nl(k),gasUsed:_,logsBloom:Nl(Il),blockHash:xl,hash:xl,logs:Pl((function(t){return Cl(t)})),blockNumber:W,cumulativeGasUsed:_,effectiveGasPrice:Nl(_),status:Nl(W),type:Nl(W,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Bl(t){t.to&&_(t.to)===kl&&(t.to="0x0000000000000000000000000000000000000000");const e=Rl({hash:xl,type:t=>"0x"===t||null==t?0:W(t),accessList:Nl(on,null),blockHash:Nl(xl,null),blockNumber:Nl(W,null),transactionIndex:Nl(W,null),from:ue,gasPrice:Nl(_),maxPriorityFeePerGas:Nl(_),maxFeePerGas:Nl(_),gasLimit:_,to:Nl(ue,null),value:_,nonce:W,data:Il,creates:Nl(ue,null),chainId:Nl(_,null)},{data:["input"],gasLimit:["gas"]})(t);if(null==e.to&&null==e.creates&&(e.creates=Vr(e)),1!==t.type&&2!==t.type||null!=t.accessList||(e.accessList=[]),t.signature?e.signature=Ei.from(t.signature):e.signature=Ei.from(t),null==e.chainId){const t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}return e.blockHash&&_(e.blockHash)===kl&&(e.blockHash=null),e}function Ul(t){return JSON.parse(JSON.stringify(t))}class Dl{#kt;#Nt;#Pt;#Rt;constructor(t){this.#kt=t,this.#Nt=null,this.#Pt=4e3,this.#Rt=-2}get pollingInterval(){return this.#Pt}set pollingInterval(t){this.#Pt=t}async#It(){try{const t=await this.#kt.getBlockNumber();if(-2===this.#Rt)return void(this.#Rt=t);if(t!==this.#Rt){for(let e=this.#Rt+1;e<=t;e++){if(null==this.#Nt)return;await this.#kt.emit("block",e)}this.#Rt=t}}catch(t){}null!=this.#Nt&&(this.#Nt=this.#kt._setTimeout(this.#It.bind(this),this.#Pt))}start(){this.#Nt||(this.#Nt=this.#kt._setTimeout(this.#It.bind(this),this.#Pt),this.#It())}stop(){this.#Nt&&(this.#kt._clearTimeout(this.#Nt),this.#Nt=null)}pause(t){this.stop(),t&&(this.#Rt=-2)}resume(){this.start()}}class Fl{#kt;#It;#xt;constructor(t){this.#kt=t,this.#xt=!1,this.#It=t=>{this._poll(t,this.#kt)}}async _poll(t,e){throw new Error("sub-classes must override this")}start(){this.#xt||(this.#xt=!0,this.#It(-2),this.#kt.on("block",this.#It))}stop(){this.#xt&&(this.#xt=!1,this.#kt.off("block",this.#It))}pause(t){this.stop()}resume(){this.start()}}class Ll extends Fl{#Tt;#Ot;constructor(t,e){super(t),this.#Tt=e,this.#Ot=-2}pause(t){t&&(this.#Ot=-2),super.pause(t)}async _poll(t,e){const r=await e.getBlock(this.#Tt);null!=r&&(-2===this.#Ot?this.#Ot=r.number:r.number>this.#Ot&&(e.emit(this.#Tt,r.number),this.#Ot=r.number))}}class Ml extends Fl{#R;constructor(t,e){super(t),this.#R=Ul(e)}async _poll(t,e){throw new Error("@TODO")}}class Gl extends Fl{#Ct;constructor(t,e){super(t),this.#Ct=e}async _poll(t,e){const r=await e.getTransactionReceipt(this.#Ct);r&&e.emit(this.#Ct,r)}}class Hl{#kt;#R;#Nt;#xt;#Rt;constructor(t,e){this.#kt=t,this.#R=Ul(e),this.#Nt=this.#It.bind(this),this.#xt=!1,this.#Rt=-2}async#It(t){if(-2===this.#Rt)return;const e=Ul(this.#R);e.fromBlock=this.#Rt+1,e.toBlock=t;const r=await this.#kt.getLogs(e);if(0!==r.length)for(const t of r)this.#kt.emit(this.#R,t),this.#Rt=t.blockNumber;else this.#Rt<t-60&&(this.#Rt=t-60)}start(){this.#xt||(this.#xt=!0,-2===this.#Rt&&this.#kt.getBlockNumber().then((t=>{this.#Rt=t})),this.#kt.on("block",this.#Nt))}stop(){this.#xt&&(this.#xt=!1,this.#kt.off("block",this.#Nt))}pause(t){this.stop(),t&&(this.#Rt=-2)}resume(){this.start()}}const jl=BigInt(2);function Ql(t){return t&&"function"==typeof t.then}function Vl(t,e){return t+":"+JSON.stringify(e,((t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){const t=Object.keys(e);return t.sort(),t.reduce(((t,r)=>(t[r]=e[r],t)),{})}return e}))}class Kl{name;constructor(t){o(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function _l(t){return(t=Array.from(new Set(t).values())).sort(),t}async function Jl(t,e){if(null==t)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),"string"==typeof t)switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(A(t,32)){const e=t.toLowerCase();return{type:"transaction",tag:Vl("tx",{hash:e}),hash:e}}if(t.orphan){const e=t;return{type:"orphan",tag:Vl("orphan",e),filter:(r=e,JSON.parse(JSON.stringify(r)))}}var r;if(t.address||t.topics){const r=t,n={topics:(r.topics||[]).map((t=>null==t?null:Array.isArray(t)?_l(t.map((t=>t.toLowerCase()))):t.toLowerCase()))};if(r.address){const t=[],s=[],i=r=>{A(r)?t.push(r):s.push((async()=>{t.push(await qr(r,e))})())};Array.isArray(r.address)?r.address.forEach(i):i(r.address),s.length&&await Promise.all(s),n.address=_l(t.map((t=>t.toLowerCase())))}return{filter:n,tag:Vl("event",n),type:"event"}}f(!1,"unknown ProviderEvent","event",t)}function zl(){return(new Date).getTime()}const ql={cacheTimeout:250,pollingInterval:4e3};class Wl{#St;#ct;#Bt;#Ut;#Dt;#Ft;#Lt;#Mt;#Gt;#Ht;#jt;#u;constructor(t,e){if(this.#u=Object.assign({},ql,e||{}),"any"===t)this.#Ft=!0,this.#Dt=null;else if(t){const e=Gc.from(t);this.#Ft=!1,this.#Dt=Promise.resolve(e),setTimeout((()=>{this.emit("network",e,null)}),0)}else this.#Ft=!1,this.#Dt=null;this.#Mt=-1,this.#Lt=new Map,this.#St=new Map,this.#ct=new Map,this.#Bt=null,this.#Ut=!1,this.#Gt=1,this.#Ht=new Map,this.#jt=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#ct.values())}attachPlugin(t){if(this.#ct.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#ct.set(t.name,t.connect(this)),this}getPlugin(t){return this.#ct.get(t)||null}get disableCcipRead(){return this.#jt}set disableCcipRead(t){this.#jt=!!t}async#Qt(t){const e=this.#u.cacheTimeout;if(e<0)return await this._perform(t);const r=Vl(t.method,t);let n=this.#Lt.get(r);return n||(n=this._perform(t),this.#Lt.set(r,n),setTimeout((()=>{this.#Lt.get(r)===n&&this.#Lt.delete(r)}),e)),await n}async ccipReadFetch(t,e,r){if(this.disableCcipRead||0===r.length||null==t.to)return null;const n=t.to.toLowerCase(),s=e.toLowerCase(),i=[];for(let e=0;e<r.length;e++){const o=r[e],a=o.replace("{sender}",n).replace("{data}",s),c=new xc(a);-1===o.indexOf("{data}")&&(c.body={data:s,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:e,urls:r});let l="unknown error";const u=await c.send();try{const t=u.bodyJson;if(t.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:t}),t.data;t.message&&(l=t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:t})}catch(t){}h(u.statusCode<400||u.statusCode>=500,`response not found during CCIP fetch: ${l}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:o,errorMessage:l}}),i.push(l)}h(!1,`error encountered during CCIP fetch: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:i}})}_wrapBlock(t,e){return new fn(function(t){const e=Ol(t);return e.transactions=t.transactions.map((t=>"string"==typeof t?t:Bl(t))),e}(t),this)}_wrapLog(t,e){return new dn(function(t){return Tl(t)}(t),this)}_wrapTransactionReceipt(t,e){return new pn(function(t){return Sl(t)}(t),this)}_wrapTransactionResponse(t,e){return new gn(Bl(t),this)}_detectNetwork(){h(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){h(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=W(await this.#Qt({method:"getBlockNumber"}),"%response");return this.#Mt>=0&&(this.#Mt=t),t}_getAddress(t){return qr(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}return A(t)?A(t,32)?t:$(t):("bigint"==typeof t&&(t=W(t,"blockTag")),"number"==typeof t?t>=0?$(t):this.#Mt>=0?$(this.#Mt+t):this.getBlockNumber().then((e=>$(e+t))):void f(!1,"invalid blockTag","blockTag",t))}_getFilter(t){const e=(t.topics||[]).map((t=>null==t?null:Array.isArray(t)?_l(t.map((t=>t.toLowerCase()))):t.toLowerCase())),r="blockHash"in t?t.blockHash:void 0,n=(t,n,s)=>{let i;switch(t.length){case 0:break;case 1:i=t[0];break;default:t.sort(),i=t}if(r&&(null!=n||null!=s))throw new Error("invalid filter");const o={};return i&&(o.address=i),e.length&&(o.topics=e),n&&(o.fromBlock=n),s&&(o.toBlock=s),r&&(o.blockHash=r),o};let s,i,o=[];if(t.address)if(Array.isArray(t.address))for(const e of t.address)o.push(this._getAddress(e));else o.push(this._getAddress(t.address));return"fromBlock"in t&&(s=this._getBlockTag(t.fromBlock)),"toBlock"in t&&(i=this._getBlockTag(t.toBlock)),o.filter((t=>"string"!=typeof t)).length||null!=s&&"string"!=typeof s||null!=i&&"string"!=typeof i?Promise.all([Promise.all(o),s,i]).then((t=>n(t[0],t[1],t[2]))):n(o,s,i)}_getTransactionRequest(t){const e=hn(t),r=[];if(["to","from"].forEach((t=>{if(null==e[t])return;const n=qr(e[t],this);Ql(n)?r.push(async function(){e[t]=await n}()):e[t]=n})),null!=e.blockTag){const t=this._getBlockTag(e.blockTag);Ql(t)?r.push(async function(){e.blockTag=await t}()):e.blockTag=t}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(null==this.#Dt){const t=(async()=>{try{const t=await this._detectNetwork();return this.emit("network",t,null),t}catch(e){throw this.#Dt===t&&(this.#Dt=null),e}})();return this.#Dt=t,(await t).clone()}const t=this.#Dt,[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(this.#Ft?(this.emit("network",r,e),this.#Dt===t&&(this.#Dt=Promise.resolve(r))):h(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:e,gasPrice:r,priorityFee:n}=await i({_block:this.#Vt("latest",!1),gasPrice:(async()=>{try{return _(await this.#Qt({method:"getGasPrice"}),"%response")}catch(t){}return null})(),priorityFee:(async()=>{try{return _(await this.#Qt({method:"getPriorityFee"}),"%response")}catch(t){}return null})()});let s=null,o=null;const a=this._wrapBlock(e,t);return a&&a.baseFeePerGas&&(o=null!=n?n:BigInt("1000000000"),s=a.baseFeePerGas*jl+o),new un(r,s,o)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const t=new xc(r.url),n=await r.processFunc(e,this,t);return new un(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return Ql(e)&&(e=await e),_(await this.#Qt({method:"estimateGas",transaction:e}),"%response")}async#Kt(t,e,r){h(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const n=hn(t);try{return k(await this._perform({method:"call",transaction:n,blockTag:e}))}catch(t){if(!this.disableCcipRead&&l(t)&&t.data&&r>=0&&"latest"===e&&null!=n.to&&"0x556f1830"===R(t.data,0,4)){const s=t.data,i=await qr(n.to,this);let o;try{o=function(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};h(P(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const r=R(t,0,32);h(R(r,0,12)===R(ru,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=R(r,12);try{const r=[],n=W(R(t,32,64)),s=W(R(t,n,n+32)),i=R(t,n+32);for(let t=0;t<s;t++){const e=Yl(i,32*t);if(null==e)throw new Error("abort");r.push(e)}e.urls=r}catch(t){h(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=Zl(t,64);if(null==r)throw new Error("abort");e.calldata=r}catch(t){h(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}h(R(t,100,128)===R(ru,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=R(t,96,100);try{const r=Zl(t,128);if(null==r)throw new Error("abort");e.extraData=r}catch(t){h(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((t=>e[t])),e}(R(t.data,4))}catch(t){h(!1,t.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:s}})}h(o.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const a=await this.ccipReadFetch(n,o.calldata,o.urls);h(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:t.data,errorArgs:o.errorArgs}});const c={to:i,data:N([o.selector,eu([a,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const t=await this.#Kt(c,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:t}),t}catch(t){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:t}),t}}throw t}}async#_t(t){const{value:e}=await i({network:this.getNetwork(),value:t});return e}async call(t){const{tx:e,blockTag:r}=await i({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#_t(this.#Kt(e,r,t.enableCcipRead?0:-1))}async#Jt(t,e,r){let n=this._getAddress(e),s=this._getBlockTag(r);return"string"==typeof n&&"string"==typeof s||([n,s]=await Promise.all([n,s])),await this.#_t(this.#Qt(Object.assign(t,{address:n,blockTag:s})))}async getBalance(t,e){return _(await this.#Jt({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return W(await this.#Jt({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return k(await this.#Jt({method:"getCode"},t,e))}async getStorage(t,e,r){const n=_(e,"position");return k(await this.#Jt({method:"getStorage",position:n},t,r))}async broadcastTransaction(t){const{blockNumber:e,hash:r,network:n}=await i({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),s=ul.from(t);if(s.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,n).replaceableTransaction(e)}async#Vt(t,e){if(A(t,32))return await this.#Qt({method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return"string"!=typeof r&&(r=await r),await this.#Qt({method:"getBlock",blockTag:r,includeTransactions:e})}async getBlock(t,e){const{network:r,params:n}=await i({network:this.getNetwork(),params:this.#Vt(t,!!e)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(t){const{network:e,params:r}=await i({network:this.getNetwork(),params:this.#Qt({method:"getTransaction",hash:t})});return null==r?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){const{network:e,params:r}=await i({network:this.getNetwork(),params:this.#Qt({method:"getTransactionReceipt",hash:t})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){const e=await this.#Qt({method:"getTransaction",hash:t});if(null==e)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){const{result:e}=await i({network:this.getNetwork(),result:this.#Qt({method:"getTransactionResult",hash:t})});return null==e?null:k(e)}async getLogs(t){let e=this._getFilter(t);Ql(e)&&(e=await e);const{network:r,params:n}=await i({network:this.getNetwork(),params:this.#Qt({method:"getLogs",filter:e})});return n.map((t=>this._wrapLog(t,r)))}_getProvider(t){h(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await vl.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){const e=ja((t=ue(t)).substring(2).toLowerCase()+".addr.reverse");try{const r=await vl.getEnsAddress(this),n=new zn(r,["function resolver(bytes32) view returns (address)"],this),s=await n.resolver(e);if(null==s||s===Wr)return null;const i=new zn(s,["function name(bytes32) view returns (string)"],this),o=await i.name(e);return await this.resolveName(o)!==t?null:o}catch(t){if(c(t,"BAD_DATA")&&"0x"===t.value)return null;if(c(t,"CALL_EXCEPTION"))return null;throw t}return null}async waitForTransaction(t,e,r){const n=null!=e?e:1;return 0===n?this.getTransactionReceipt(t):new Promise((async(e,s)=>{let i=null;const o=async r=>{try{const s=await this.getTransactionReceipt(t);if(null!=s&&r-s.blockNumber+1>=n)return e(s),void(i&&(clearTimeout(i),i=null))}catch(t){console.log("EEE",t)}this.once("block",o)};null!=r&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",o),s(u("timeout","TIMEOUT",{reason:"timeout"})))}),r)),o(await this.getBlockNumber())}))}async waitForBlock(t){h(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=this.#Ht.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#Ht.delete(t))}_setTimeout(t,e){null==e&&(e=0);const r=this.#Gt++,n=()=>{this.#Ht.delete(r),t()};if(this.paused)this.#Ht.set(r,{timer:null,func:n,time:e});else{const t=setTimeout(n,e);this.#Ht.set(r,{timer:t,func:n,time:zl()})}return r}_forEachSubscriber(t){for(const e of this.#St.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Kl(t.type);case"block":{const t=new Dl(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new Ll(this,t.type);case"event":return new Hl(this,t.filter);case"transaction":return new Gl(this,t.hash);case"orphan":return new Ml(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const r of this.#St.values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),null!=this.#Bt&&e.pause(this.#Bt);break}}async#zt(t,e){let r=await Jl(t,this);return"event"===r.type&&e&&e.length>0&&!0===e[0].removed&&(r=await Jl({orphan:"drop-log",log:e[0]},this)),this.#St.get(r.tag)||null}async#qt(t){const e=await Jl(t,this),r=e.tag;let n=this.#St.get(r);return n||(n={subscriber:this._getSubscriber(e),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#St.set(r,n)),n}async on(t,e){const r=await this.#qt(t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Bt&&r.subscriber.pause(this.#Bt)),this}async once(t,e){const r=await this.#qt(t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#Bt&&r.subscriber.pause(this.#Bt)),this}async emit(t,...e){const r=await this.#zt(t,e);if(!r||0===r.listeners.length)return!1;const n=r.listeners.length;return r.listeners=r.listeners.filter((({listener:r,once:n})=>{const s=new wn(this,n?null:r,t);try{r.call(this,...e,s)}catch(t){}return!n})),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#St.delete(r.tag)),n>0}async listenerCount(t){if(t){const e=await this.#zt(t);return e?e.listeners.length:0}let e=0;for(const{listeners:t}of this.#St.values())e+=t.length;return e}async listeners(t){if(t){const e=await this.#zt(t);return e?e.listeners.map((({listener:t})=>t)):[]}let e=[];for(const{listeners:t}of this.#St.values())e=e.concat(t.map((({listener:t})=>t)));return e}async off(t,e){const r=await this.#zt(t);if(!r)return this;if(e){const t=r.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&r.listeners.splice(t,1)}return e&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#St.delete(r.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:r,subscriber:n}=await this.#qt(t);r&&n.stop(),this.#St.delete(e)}else for(const[t,{started:e,subscriber:r}]of this.#St)e&&r.stop(),this.#St.delete(t);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#Ut}destroy(){this.removeAllListeners();for(const t of this.#Ht.keys())this._clearTimeout(t);this.#Ut=!0}get paused(){return null!=this.#Bt}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#Mt=-1,null!=this.#Bt){if(this.#Bt==!!t)return;h(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((e=>e.pause(t))),this.#Bt=!!t;for(const t of this.#Ht.values())t.timer&&clearTimeout(t.timer),t.time=zl()-t.time}resume(){if(null!=this.#Bt){this._forEachSubscriber((t=>t.resume())),this.#Bt=null;for(const t of this.#Ht.values()){let e=t.time;e<0&&(e=0),t.time=zl(),setTimeout(t.func,e)}}}}function Yl(t,e){try{const r=Zl(t,e);if(r)return D(r)}catch(t){}return null}function Zl(t,e){if("0x"===t)return null;try{const r=W(R(t,e,e+32)),n=W(R(t,r,r+32));return R(t,r+32,r+32+n)}catch(t){}return null}function Xl(t){const e=X(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function $l(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}const tu=new Uint8Array([]);function eu(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(tu),r+=32;for(let n=0;n<t.length;n++){const s=w(t[n]);e[n]=Xl(r),e.push(Xl(s.length)),e.push($l(s)),r+=32+32*Math.ceil(s.length/32)}return N(e)}const ru="0x0000000000000000000000000000000000000000000000000000000000000000";function nu(t,e){if(t.provider)return t.provider;h(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function su(t,e){let r=hn(e);if(null!=r.to&&(r.to=qr(r.to,t)),null!=r.from){const e=r.from;r.from=Promise.all([t.getAddress(),qr(e,t)]).then((([t,e])=>(f(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t)))}else r.from=t.getAddress();return await i(r)}class iu{provider;constructor(t){o(this,{provider:t||null})}async getNonce(t){return nu(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await su(this,t)}async populateTransaction(t){const e=nu(this,"populateTransaction"),r=await su(this,t);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));const n=await this.provider.getNetwork();null!=r.chainId?f(_(r.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",t.chainId):r.chainId=n.chainId;const s=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null==r.gasPrice||2!==r.type&&!s?0!==r.type&&1!==r.type||!s||f(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):f(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas)if(0===r.type||1===r.type){const t=await e.getFeeData();h(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==r.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(r.type=2,null!=r.gasPrice){const t=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=t,r.maxPriorityFeePerGas=t}else null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(h(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice),r.type=0):h(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else r.type=2;return await i(r)}async estimateGas(t){return nu(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return nu(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=nu(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=nu(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;const n=ul.from(r);return await e.broadcastTransaction(await this.signTransaction(n))}}class ou extends iu{address;constructor(t,e){super(e),o(this,{address:t})}async getAddress(){return this.address}connect(t){return new ou(this.address,t)}#Wt(t,e){h(!1,`VoidSigner cannot sign ${t}`,"UNSUPPORTED_OPERATION",{operation:e})}async signTransaction(t){this.#Wt("transactions","signTransaction")}async signMessage(t){this.#Wt("messages","signMessage")}async signTypedData(t,e,r){this.#Wt("typed-data","signTypedData")}}class au{#kt;#Yt;#Nt;#xt;#Zt;#Xt;constructor(t){this.#kt=t,this.#Yt=null,this.#Nt=this.#It.bind(this),this.#xt=!1,this.#Zt=null,this.#Xt=!1}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}async#It(t){try{null==this.#Yt&&(this.#Yt=this._subscribe(this.#kt));let t=null;try{t=await this.#Yt}catch(t){if(!c(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==t)return this.#Yt=null,void this.#kt._recoverSubscriber(this,this._recover(this.#kt));const e=await this.#kt.getNetwork();if(this.#Zt||(this.#Zt=e),this.#Zt.chainId!==e.chainId)throw new Error("chaid changed");if(this.#Xt)return;const r=await this.#kt.send("eth_getFilterChanges",[t]);await this._emitResults(this.#kt,r)}catch(t){console.log("@TODO",t)}this.#kt.once("block",this.#Nt)}#$t(){const t=this.#Yt;t&&(this.#Yt=null,t.then((t=>{this.#kt.send("eth_uninstallFilter",[t])})))}start(){this.#xt||(this.#xt=!0,this.#It(-2))}stop(){this.#xt&&(this.#xt=!1,this.#Xt=!0,this.#$t(),this.#kt.off("block",this.#Nt))}pause(t){t&&this.#$t(),this.#kt.off("block",this.#Nt)}resume(){this.start()}}class cu extends au{#te;constructor(t,e){var r;super(t),this.#te=(r=e,JSON.parse(JSON.stringify(r)))}_recover(t){return new Hl(t,this.#te)}async _subscribe(t){return await t.send("eth_newFilter",[this.#te])}async _emitResults(t,e){for(const r of e)t.emit(this.#te,t._wrapLog(r,t._network))}}class lu extends au{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const r of e)t.emit("pending",r)}}const uu="bigint,boolean,function,number,string,symbol".split(/,/g);function hu(t){if(null==t||uu.indexOf(typeof t)>=0)return t;if("function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(hu);if("object"==typeof t)return Object.keys(t).reduce(((e,r)=>(e[r]=t[r],e)),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function fu(t){return new Promise((e=>{setTimeout(e,t)}))}function du(t){return t?t.toLowerCase():t}function pu(t){return t&&"number"==typeof t.pollingInterval}const gu={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class mu extends iu{address;constructor(t,e){super(t),o(this,{address:e=ue(e)})}connect(t){h(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=hu(t),r=[];if(e.from){const n=e.from;r.push((async()=>{const r=await qr(n,this.provider);f(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r})())}else e.from=this.address;if(null==e.gasLimit&&r.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),null!=e.to){const t=e.to;r.push((async()=>{e.to=await qr(t,this.provider)})())}r.length&&await Promise.all(r);const n=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(t){const e=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(t);return await new Promise(((t,n)=>{const s=[1e3,100];let i=0;const o=async()=>{try{const n=await this.provider.getTransaction(r);if(null!=n)return void t(n.replaceableTransaction(e))}catch(t){if(c(t,"CANCELLED")||c(t,"BAD_DATA")||c(t,"NETWORK_ERROR"))return null==t.info&&(t.info={}),t.info.sendTransactionHash=r,void n(t);if(c(t,"INVALID_ARGUMENT")&&(i++,null==t.info&&(t.info={}),t.info.sendTransactionHash=r,i>10))return void n(t);this.provider.emit("error",u("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:t}))}this.provider._setTimeout((()=>{o()}),s.pop()||4e3)};o()}))}async signTransaction(t){const e=hu(t);if(e.from){const r=await qr(e.from,this.provider);f(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r}else e.from=this.address;const r=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[r])}async signMessage(t){const e="string"==typeof t?U(t):t;return await this.provider.send("personal_sign",[k(e),this.address.toLowerCase()])}async signTypedData(t,e,r){const n=hu(r),s=await dc.resolveNames(t,e,n,(async t=>{const e=await qr(t);return f(null!=e,"TypedData does not support null address","value",t),e}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(dc.getPayload(s.domain,e,s.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e="string"==typeof t?U(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),k(e)])}}class yu extends Wl{#u;#ee;#re;#ne;#se;#Zt;#ie;#oe(){if(this.#ne)return;const t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#ne=setTimeout((()=>{this.#ne=null;const t=this.#re;for(this.#re=[];t.length;){const e=[t.shift()];for(;t.length&&e.length!==this.#u.batchMaxCount;)if(e.push(t.shift()),JSON.stringify(e.map((t=>t.payload))).length>this.#u.batchMaxSize){t.unshift(e.pop());break}(async()=>{const t=1===e.length?e[0].payload:e.map((t=>t.payload));this.emit("debug",{action:"sendRpcPayload",payload:t});try{const r=await this._send(t);this.emit("debug",{action:"receiveRpcResult",result:r});for(const{resolve:t,reject:n,payload:s}of e){if(this.destroyed){n(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const e=r.filter((t=>t.id===s.id))[0];if(null!=e)"error"in e?n(this.getRpcError(s,e)):t(e.result);else{const t=u("missing response for request","BAD_DATA",{value:r,info:{payload:s}});this.emit("error",t),n(t)}}}catch(t){this.emit("debug",{action:"receiveRpcError",error:t});for(const{reject:r}of e)r(t)}})()}}),t)}constructor(t,e){super(t,e),this.#ee=1,this.#u=Object.assign({},gu,e||{}),this.#re=[],this.#ne=null,this.#Zt=null,this.#ie=null;{let t=null;const e=new Promise((e=>{t=e}));this.#se={promise:e,resolve:t}}const r=this._getOption("staticNetwork");"boolean"==typeof r?(f(!r||"any"!==t,"staticNetwork cannot be used on special network \'any\'","options",e),r&&null!=t&&(this.#Zt=Gc.from(t))):r&&(f(null==t||r.matches(t),"staticNetwork MUST match network object","options",e),this.#Zt=r)}_getOption(t){return this.#u[t]}get _network(){return h(this.#Zt,"network is not available yet","NETWORK_ERROR"),this.#Zt}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&_(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}const e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t){if(!0!==t)return t;if(this.#Zt)return this.#Zt}return this.#ie?await this.#ie:this.ready?(this.#ie=(async()=>{try{const t=Gc.from(_(await this.send("eth_chainId",[])));return this.#ie=null,t}catch(t){throw this.#ie=null,t}})(),await this.#ie):(this.#ie=(async()=>{const t={id:this.#ee++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let e;this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#ie=null}catch(t){throw this.#ie=null,this.emit("debug",{action:"receiveRpcError",error:t}),t}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return Gc.from(_(e.result));throw this.getRpcError(t,e)})(),await this.#ie)}_start(){null!=this.#se&&null!=this.#se.resolve&&(this.#se.resolve(),this.#se=null,(async()=>{for(;null==this.#Zt&&!this.destroyed;)try{this.#Zt=await this._detectNetwork()}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",u("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await fu(1e3)}this.#oe()})())}async _waitUntilReady(){if(null!=this.#se)return await this.#se.promise}_getSubscriber(t){return"pending"===t.type?new lu(this):"event"===t.type?this._getOption("polling")?new Hl(this,t.filter):new cu(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new Kl("orphan"):super._getSubscriber(t)}get ready(){return null==this.#se}getRpcTransaction(t){const e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((r=>{if(null==t[r])return;let n=r;"gasLimit"===r&&(n="gas"),e[n]=$(_(t[r],`tx.${r}`))})),["from","to","data"].forEach((r=>{null!=t[r]&&(e[r]=k(t[r]))})),t.accessList&&(e.accessList=on(t.accessList)),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[du(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[du(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[du(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[du(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(du):t.filter.address=du(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:r}=t,{error:n}=e;if("eth_estimateGas"===r&&n.message){const e=n.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return u("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:n}})}if("eth_call"===r||"eth_estimateGas"===r){const e=Au(n),s=Cr.getBuiltinCallException("eth_call"===r?"call":"estimateGas",t.params[0],e?e.data:null);return s.info={error:n,payload:t},s}const s=JSON.stringify(function(t){const e=[];return Eu(t,e),e}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return u("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:t,error:n}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){const e=t.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return u("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:n}});if(s.match(/nonce/i)&&s.match(/too low/i))return u("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:n}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return u("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:n}});if(s.match(/only replay-protected/i))return u("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:e,info:{error:n}}})}let i=!!s.match(/the method .* does not exist/i);return i||n&&n.details&&n.details.startsWith("Unauthorized method:")&&(i=!0),i?u("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:n,payload:t}}):u("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const r=this.#ee++,n=new Promise(((n,s)=>{this.#re.push({resolve:n,reject:s,payload:{method:t,params:e,id:r,jsonrpc:"2.0"}})}));return this.#oe(),n}async getSigner(t){null==t&&(t=0);const e=this.send("eth_accounts",[]);if("number"==typeof t){const r=await e;if(t>=r.length)throw new Error("no such account");return new mu(this,r[t])}const{accounts:r}=await i({network:this.getNetwork(),accounts:e});t=ue(t);for(const e of r)if(ue(e)===t)return new mu(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((t=>new mu(this,t)))}destroy(){this.#ne&&(clearTimeout(this.#ne),this.#ne=null);for(const{payload:t,reject:e}of this.#re)e(u("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#re=[],super.destroy()}}class wu extends yu{#ae;constructor(t,e){super(t,e),this.#ae=4e3}_getSubscriber(t){const e=super._getSubscriber(t);return pu(e)&&(e.pollingInterval=this.#ae),e}get pollingInterval(){return this.#ae}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");this.#ae=t,this._forEachSubscriber((t=>{pu(t)&&(t.pollingInterval=this.#ae)}))}}class bu extends wu{#ce;constructor(t,e,r){null==t&&(t="http://localhost:8545"),super(e,r),this.#ce="string"==typeof t?new xc(t):t.clone()}_getConnection(){return this.#ce.clone()}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){const e=this._getConnection();e.body=JSON.stringify(t),e.setHeader("content-type","application/json");const r=await e.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}function Au(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&A(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(const e in t){const r=Au(t[e]);if(r)return r}return null}if("string"==typeof t)try{return Au(JSON.parse(t))}catch(t){}return null}function Eu(t,e){if(null!=t){if("string"==typeof t.message&&e.push(t.message),"object"==typeof t)for(const r in t)Eu(t[r],e);if("string"==typeof t)try{return Eu(JSON.parse(t),e)}catch(t){}}}const vu="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class ku extends bu{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=vu);const n={polling:!0,staticNetwork:r};super(ku.getRequest(r,e),r,n),o(this,{apiKey:e})}_getProvider(t){try{return new ku(t,this.apiKey)}catch(t){}return super._getProvider(t)}static getRequest(t,e){null==e&&(e=vu);const r=new xc(`https://${function(t){switch(t){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"matic":return"rpc.ankr.com/polygon";case"arbitrum":return"rpc.ankr.com/arbitrum"}f(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===vu&&(r.retryFunc=async(t,e,r)=>(Sc("AnkrProvider"),!0)),r}getRpcError(t,e){return"eth_sendRawTransaction"===t.method&&e&&e.error&&"INTERNAL_ERROR: could not replace existing tx"===e.error.message&&(e.error.message="replacement transaction underpriced"),super.getRpcError(t,e)}isCommunityResource(){return this.apiKey===vu}}const Nu="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Pu extends bu{apiKey;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=Nu),super(Pu.getRequest(r,e),r,{staticNetwork:r}),o(this,{apiKey:e})}_getProvider(t){try{return new Pu(t,this.apiKey)}catch(t){}return super._getProvider(t)}async _perform(t){if("getTransactionResult"===t.method){const{trace:e,tx:r}=await i({trace:this.send("trace_transaction",[t.hash]),tx:this.getTransaction(t.hash)});if(null==e||null==r)return null;let n,s=!1;try{n=e[0].result.output,s="Reverted"===e[0].error}catch(t){}if(n)return h(!s,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:n,reason:null,transaction:r,invocation:null,revert:null}),n;h(!1,"could not parse trace result","BAD_DATA",{value:e})}return await super._perform(t)}isCommunityResource(){return this.apiKey===Nu}static getRequest(t,e){null==e&&(e=Nu);const r=new xc(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com"}f(!1,"unsupported network","network",t)}(t.name)}/v2/${e}`);return r.allowGzip=!0,e===Nu&&(r.retryFunc=async(t,e,r)=>(Sc("alchemy"),!0)),r}}class Ru extends bu{constructor(t){null==t&&(t="mainnet");const e=Gc.from(t);f("mainnet"===e.name,"unsupported network","network",t),super("https://cloudflare-eth.com/",e,{staticNetwork:e})}}const Iu="org.ethers.plugins.provider.Etherscan";class xu extends Bc{baseUrl;constructor(t){super(Iu),o(this,{baseUrl:t})}clone(){return new xu(this.baseUrl)}}const Tu=["enableCcipRead"];let Ou=1;class Cu extends Wl{network;apiKey;#le;constructor(t,e){const r=null!=e?e:null;super();const n=Gc.from(t);this.#le=n.getPlugin(Iu),o(this,{apiKey:r,network:n}),this.getBaseUrl()}getBaseUrl(){if(this.#le)return this.#le.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"matic":return"https://api.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io";case"bnb":return"http://api.bscscan.com";case"bnbt":return"http://api-testnet.bscscan.com"}f(!1,"unsupported network","network",this.network)}getUrl(t,e){const r=Object.keys(e).reduce(((t,r)=>{const n=e[r];return null!=n&&(t+=`&${r}=${n}`),t}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.getBaseUrl()}/api?module=${t}${r}${n}`}getPostUrl(){return`${this.getBaseUrl()}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}async detectNetwork(){return this.network}async fetch(t,e,r){const n=Ou++,s=r?this.getPostUrl():this.getUrl(t,e),i=r?this.getPostData(t,e):null;this.emit("debug",{action:"sendRequest",id:n,url:s,payload:i});const o=new xc(s);o.setThrottleParams({slotInterval:1e3}),o.retryFunc=(t,e,r)=>(this.isCommunityResource()&&Sc("Etherscan"),Promise.resolve(!0)),o.processFunc=async(e,r)=>{const s=r.hasBody()?JSON.parse(D(r.body)):{},i=("string"==typeof s.result?s.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===t?s&&0==s.status&&"NOTOK"==s.message&&i&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:s}),r.throwThrottleError(s.result,2e3)):i&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:s.result}),r.throwThrottleError(s.result,2e3)),r},i&&(o.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),o.body=Object.keys(i).map((t=>`${t}=${i[t]}`)).join("&"));const a=await o.send();try{a.assertOk()}catch(t){this.emit("debug",{action:"receiveError",id:n,error:t,reason:"assertOk"}),h(!1,"response error","SERVER_ERROR",{request:o,response:a})}a.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),h(!1,"missing response","SERVER_ERROR",{request:o,response:a}));const c=JSON.parse(D(a.body));return"proxy"===t?("2.0"!=c.jsonrpc&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"invalid JSON-RPC"}),h(!1,"invalid JSON-RPC response (missing jsonrpc=\'2.0\')","SERVER_ERROR",{request:o,response:a,info:{result:c}})),c.error&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"JSON-RPC error"}),h(!1,"error response","SERVER_ERROR",{request:o,response:a,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):0!=c.status||"No records found"!==c.message&&"No transactions found"!==c.message?((1!=c.status||"string"==typeof c.message&&!c.message.match(/^OK/))&&(this.emit("debug",{action:"receiveError",id:n,result:c}),h(!1,"error response","SERVER_ERROR",{request:o,response:a,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result):(this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result)}_getTransactionPostData(t){const e={};for(let r in t){if(Tu.indexOf(r)>=0)continue;if(null==t[r])continue;let n=t[r];"type"===r&&0===n||"blockTag"===r&&"latest"===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?$(n):"accessList"===r?"["+on(n).map((t=>`{address:"${t.address}",storageKeys:["${t.storageKeys.join(\'","\')}"]}`)).join(",")+"]":k(n),e[r]=n)}return e}_checkError(t,e,r){let n="";if(c(e,"SERVER_ERROR")){try{n=e.info.result.error.message}catch(t){}if(!n)try{n=e.info.message}catch(t){}}if("estimateGas"===t.method&&!n.match(/revert/i)&&n.match(/insufficient funds/i)&&h(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.transaction}),("call"===t.method||"estimateGas"===t.method)&&n.match(/execution reverted/i)){let r="";try{r=e.info.result.error.data}catch(e){}const n=Cr.getBuiltinCallException(t.method,t.transaction,r);throw n.info={request:t,error:e},n}if(n&&"broadcastTransaction"===t.method){const e=ul.from(t.signedTransaction);n.match(/replacement/i)&&n.match(/underpriced/i)&&h(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e}),n.match(/insufficient funds/)&&h(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&h(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:e})}throw e}async _detectNetwork(){return this.network}async _perform(t){switch(t.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw new Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>this._checkError(t,e,t.signedTransaction)));case"getBlock":if("blockTag"in t)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});h(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.hash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_call";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}case"estimateGas":{const e=this._getTransactionPostData(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return await this.fetch("proxy",e,!0)}catch(e){return this._checkError(t,e,t.transaction)}}}return super._perform(t)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(t){let e=this._getAddress(t);var r;(r=e)&&"function"==typeof r.then&&(e=await e);try{const t=await this.fetch("contract",{action:"getabi",address:e}),r=JSON.parse(t);return new zn(e,r,this)}catch(t){return null}}isCommunityResource(){return null==this.apiKey}}const Su=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}().WebSocket;class Bu{#kt;#R;get filter(){return JSON.parse(this.#R)}#ue;#he;#fe;constructor(t,e){this.#kt=t,this.#R=JSON.stringify(e),this.#ue=null,this.#he=null,this.#fe=null}start(){this.#ue=this.#kt.send("eth_subscribe",this.filter).then((t=>(this.#kt._register(t,this),t)))}stop(){this.#ue.then((t=>{this.#kt.send("eth_unsubscribe",[t])})),this.#ue=null}pause(t){h(t,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#he=!!t}resume(){this.#he=null}_handleMessage(t){if(null!=this.#ue&&null===this.#he){let e=this.#fe;e=null==e?this._emit(this.#kt,t):e.then((async()=>{await this._emit(this.#kt,t)})),this.#fe=e.then((()=>{this.#fe===e&&(this.#fe=null)}))}}async _emit(t,e){throw new Error("sub-classes must implemente this; _emit")}}class Uu extends Bu{constructor(t){super(t,["newHeads"])}async _emit(t,e){t.emit("block",parseInt(e.number))}}class Du extends Bu{constructor(t){super(t,["newPendingTransactions"])}async _emit(t,e){t.emit("pending",e)}}class Fu extends Bu{#de;get logFilter(){return JSON.parse(this.#de)}constructor(t,e){super(t,["logs",e]),this.#de=JSON.stringify(e)}async _emit(t,e){t.emit(this.logFilter,t._wrapLog(e,t._network))}}class Lu extends yu{#pe;#St;#ge;constructor(t,e){const r=Object.assign({},null!=e?e:{});f(null==r.batchMaxCount||1===r.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",e),r.batchMaxCount=1,null==r.staticNetwork&&(r.staticNetwork=!0),super(t,r),this.#pe=new Map,this.#St=new Map,this.#ge=new Map}_getSubscriber(t){switch(t.type){case"close":return new Kl("close");case"block":return new Uu(this);case"pending":return new Du(this);case"event":return new Fu(this,t.filter);case"orphan":if("drop-log"===t.filter.orphan)return new Kl("drop-log")}return super._getSubscriber(t)}_register(t,e){this.#St.set(t,e);const r=this.#ge.get(t);if(r){for(const t of r)e._handleMessage(t);this.#ge.delete(t)}}async _send(t){f(!Array.isArray(t),"WebSocket does not support batch send","payload",t);const e=new Promise(((e,r)=>{this.#pe.set(t.id,{payload:t,resolve:e,reject:r})}));return await this._waitUntilReady(),await this._write(JSON.stringify(t)),[await e]}async _processMessage(t){const e=JSON.parse(t);if(e&&"object"==typeof e&&"id"in e){const t=this.#pe.get(e.id);if(null==t)return void this.emit("error",u("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:e}));this.#pe.delete(e.id),t.resolve(e)}else{if(!e||"eth_subscription"!==e.method)return void this.emit("error",u("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:e}));{const t=e.params.subscription,r=this.#St.get(t);if(r)r._handleMessage(e.params.result);else{let r=this.#ge.get(t);null==r&&(r=[],this.#ge.set(t,r)),r.push(e.params.result)}}}}async _write(t){throw new Error("sub-classes must override this")}}class Mu extends Lu{#ce;#me;get websocket(){if(null==this.#me)throw new Error("websocket closed");return this.#me}constructor(t,e,r){super(e,r),"string"==typeof t?(this.#ce=()=>new Su(t),this.#me=this.#ce()):"function"==typeof t?(this.#ce=t,this.#me=t()):(this.#ce=null,this.#me=t),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(t){console.log("failed to start WebsocketProvider",t)}},this.websocket.onmessage=t=>{this._processMessage(t.data)}}async _write(t){this.websocket.send(t)}async destroy(){null!=this.#me&&(this.#me.close(),this.#me=null),super.destroy()}}const Gu="84842078b09946638c03157f83405213";class Hu extends Mu{projectId;projectSecret;constructor(t,e){const r=new ju(t,e),n=r._getConnection();h(!n.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),t),o(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===Gu}}class ju extends bu{projectId;projectSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Gc.from(t);null==e&&(e=Gu),null==r&&(r=null),super(ju.getRequest(n,e,r),n,{staticNetwork:n}),o(this,{projectId:e,projectSecret:r})}_getProvider(t){try{return new ju(t,this.projectId,this.projectSecret)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.projectId===Gu}static getWebSocketProvider(t,e){return new Hu(t,e)}static getRequest(t,e,r){null==e&&(e=Gu),null==r&&(r=null);const n=new xc(`https://${function(t){switch(t){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io"}f(!1,"unsupported network","network",t)}(t.name)}/v3/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===Gu&&(n.retryFunc=async(t,e,r)=>(Sc("InfuraProvider"),!0)),n}}const Qu="919b412a057b5e9c9b6dce193c5a60242d6efadb";class Vu extends bu{token;constructor(t,e){null==t&&(t="mainnet");const r=Gc.from(t);null==e&&(e=Qu),super(Vu.getRequest(r,e),r,{staticNetwork:r}),o(this,{token:e})}_getProvider(t){try{return new Vu(t,this.token)}catch(t){}return super._getProvider(t)}isCommunityResource(){return this.token===Qu}static getRequest(t,e){null==e&&(e=Qu);const r=new xc(`https://${function(t){switch(t){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro"}f(!1,"unsupported network","network",t)}(t.name)}/${e}`);return r.allowGzip=!0,e===Qu&&(r.retryFunc=async(t,e,r)=>(Sc("QuickNodeProvider"),!0)),r}}const Ku=BigInt("1"),_u=BigInt("2");function Ju(){return(new Date).getTime()}function zu(t){return JSON.stringify(t,((t,e)=>"bigint"==typeof e?{type:"bigint",value:e.toString()}:e))}const qu={stallTimeout:400,priority:1,weight:1},Wu={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};function Yu(t){if(null==t)return"null";if(Array.isArray(t))return"["+t.map(Yu).join(",")+"]";if("object"==typeof t&&"function"==typeof t.toJSON)return Yu(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":case"number":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{"+e.map((e=>`${JSON.stringify(e)}:${Yu(t[e])}`)).join(",")+"}"}}throw console.log("Could not serialize",t),new Error("Hmm...")}function Zu(t){if("error"in t){const e=t.error;return{tag:Yu(e),value:e}}const e=t.result;return{tag:Yu(e),value:e}}function Xu(t,e){const r=new Map;for(const{value:t,tag:n,weight:s}of e){const e=r.get(n)||{value:t,weight:0};e.weight+=s,r.set(n,e)}let n=null;for(const e of r.values())e.weight>=t&&(!n||e.weight>n.weight)&&(n=e);if(n)return n.value}function $u(t,e){let r=0;const n=new Map;let s=null;const i=[];for(const{value:t,tag:o,weight:a}of e)if(t instanceof Error){const e=n.get(o)||{value:t,weight:0};e.weight+=a,n.set(o,e),(null==s||e.weight>s.weight)&&(s=e)}else i.push(BigInt(t)),r+=a;if(r<t)return s&&s.weight>=t?s.value:void 0;i.sort(((t,e)=>t<e?-1:e>t?1:0));const o=Math.floor(i.length/2);return i.length%2?i[o]:(i[o-1]+i[o]+Ku)/_u}function th(t,e){const r=Xu(t,e);if(void 0!==r)return r;for(const t of e)if(t.value)return t.value}class eh extends Wl{quorum;eventQuorum;eventWorkers;#ye;#we;#be;constructor(t,e,r){super(e,r),this.#ye=t.map((t=>t instanceof Wl?Object.assign({provider:t},qu,Wu):Object.assign({},qu,t,Wu))),this.#we=-2,this.#be=null,r&&null!=r.quorum?this.quorum=r.quorum:this.quorum=Math.ceil(this.#ye.reduce(((t,e)=>t+e.weight),0)/2),this.eventQuorum=1,this.eventWorkers=1,f(this.quorum<=this.#ye.reduce(((t,e)=>t+e.weight),0),"quorum exceed provider wieght","quorum",this.quorum)}get providerConfigs(){return this.#ye.map((t=>{const e=Object.assign({},t);for(const t in e)"_"===t[0]&&delete e[t];return e}))}async _detectNetwork(){return Gc.from(_(await this._perform({method:"chainId"})))}async _translatePerform(t,e){switch(e.method){case"broadcastTransaction":return await t.broadcastTransaction(e.signedTransaction);case"call":return await t.call(Object.assign({},e.transaction,{blockTag:e.blockTag}));case"chainId":return(await t.getNetwork()).chainId;case"estimateGas":return await t.estimateGas(e.transaction);case"getBalance":return await t.getBalance(e.address,e.blockTag);case"getBlock":{const r="blockHash"in e?e.blockHash:e.blockTag;return await t.getBlock(r,e.includeTransactions)}case"getBlockNumber":return await t.getBlockNumber();case"getCode":return await t.getCode(e.address,e.blockTag);case"getGasPrice":return(await t.getFeeData()).gasPrice;case"getPriorityFee":return(await t.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await t.getLogs(e.filter);case"getStorage":return await t.getStorage(e.address,e.position,e.blockTag);case"getTransaction":return await t.getTransaction(e.hash);case"getTransactionCount":return await t.getTransactionCount(e.address,e.blockTag);case"getTransactionReceipt":return await t.getTransactionReceipt(e.hash);case"getTransactionResult":return await t.getTransactionResult(e.hash)}}#Ae(t){const e=Array.from(t).map((t=>t.config)),r=this.#ye.slice();!function(t){for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}}(r),r.sort(((t,e)=>t.priority-e.priority));for(const t of r)if(!t._lastFatalError&&-1===e.indexOf(t))return t;return null}#Ee(t,e){const r=this.#Ae(t);if(null==r)return null;const n={config:r,result:null,didBump:!1,perform:null,staller:null},s=Ju();return n.perform=(async()=>{try{r.requests++;const t=await this._translatePerform(r.provider,e);n.result={result:t}}catch(t){r.errorResponses++,n.result={error:t}}const t=Ju()-s;r._totalTime+=t,r.rollingDuration=.95*r.rollingDuration+.05*t,n.perform=null})(),n.staller=(async()=>{var t;await(t=r.stallTimeout,new Promise((e=>{setTimeout(e,t)}))),n.staller=null})(),t.add(n),n}async#ve(){let t=this.#be;if(!t){const e=[];this.#ye.forEach((t=>{e.push((async()=>{await async function(t,e){for(;(t.blockNumber<0||t.blockNumber<0)&&(t._updateNumber||(t._updateNumber=(async()=>{try{const e=await t.provider.getBlockNumber();e>t.blockNumber&&(t.blockNumber=e)}catch(e){t.blockNumber=-2,t._lastFatalError=e,t._lastFatalErrorTimestamp=Ju()}t._updateNumber=null})()),await t._updateNumber,t.outOfSync++,!t._lastFatalError););}(t),t._lastFatalError||(t._network=await t.provider.getNetwork())})())})),this.#be=t=(async()=>{await Promise.all(e);let t=null;for(const e of this.#ye){if(e._lastFatalError)continue;const r=e._network;null==t?t=r.chainId:r.chainId!==t&&h(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await t}async#ke(t,e){const r=[];for(const e of t)if(null!=e.result){const{tag:t,value:n}=Zu(e.result);r.push({tag:t,value:n,weight:e.config.weight})}if(!(r.reduce(((t,e)=>t+e.weight),0)<this.quorum)){switch(e.method){case"getBlockNumber":{-2===this.#we&&(this.#we=Math.ceil(W($u(this.quorum,this.#ye.filter((t=>!t._lastFatalError)).map((t=>({value:t.blockNumber,tag:W(t.blockNumber).toString(),weight:t.weight})))))));const t=function(t,e){if(1===t)return W($u(t,e),"%internal");const r=new Map,n=(t,e)=>{const n=r.get(t)||{result:t,weight:0};n.weight+=e,r.set(t,n)};for(const{weight:t,value:r}of e){const e=W(r);n(e-1,t),n(e,t),n(e+1,t)}let s,i=0;for(const{weight:e,result:n}of r.values())e>=t&&(e>i||null!=s&&e===i&&n>s)&&(i=e,s=n);return s}(this.quorum,r);if(void 0===t)return;return t>this.#we&&(this.#we=t),this.#we}case"getGasPrice":case"getPriorityFee":case"estimateGas":return $u(this.quorum,r);case"getBlock":return"blockTag"in e&&"pending"===e.blockTag?th(this.quorum,r):Xu(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return Xu(this.quorum,r);case"broadcastTransaction":return th(this.quorum,r)}h(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${zu(e.method)})`})}}async#Ne(t,e){if(0===t.size)throw new Error("no runners?!");const r=[];let n=0;for(const e of t)e.perform&&r.push(e.perform),e.staller?r.push(e.staller):e.didBump||(e.didBump=!0,n++);const s=await this.#ke(t,e);if(void 0!==s){if(s instanceof Error)throw s;return s}for(let r=0;r<n;r++)this.#Ee(t,e);return h(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:Array.from(t).map((t=>zu(t.result)))}}),await Promise.race(r),await this.#Ne(t,e)}async _perform(t){if("broadcastTransaction"===t.method){const e=this.#ye.map((t=>null)),r=this.#ye.map((async({provider:r,weight:n},s)=>{try{const i=await r._perform(t);e[s]=Object.assign(Zu({result:i}),{weight:n})}catch(t){e[s]=Object.assign(Zu({error:t}),{weight:n})}}));for(;;){const t=e.filter((t=>null!=t));for(const{value:e}of t)if(!(e instanceof Error))return e;const n=Xu(this.quorum,e.filter((t=>null!=t)));if(c(n,"INSUFFICIENT_FUNDS"))throw n;const s=r.filter(((t,r)=>null==e[r]));if(0===s.length)break;await Promise.race(s)}const n=th(this.quorum,e);if(h(void 0!==n,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:e.map(zu)}}),n instanceof Error)throw n;return n}await this.#ve();const e=new Set;let r=0;for(;;){const n=this.#Ee(e,t);if(null==n)break;if(r+=n.config.weight,r>=this.quorum)break}const n=await this.#Ne(e,t);for(const t of e)t.perform&&null==t.result&&t.config.lateResponses++;return n}async destroy(){for(const{provider:t}of this.#ye)t.destroy();super.destroy()}}const rh="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");function nh(t,e){null==e&&(e={});const r=t=>"-"!==e[t]&&("string"==typeof e.exclusive?t===e.exclusive:!Array.isArray(e.exclusive)||-1!==e.exclusive.indexOf(t));if("string"==typeof t&&t.match(/^https?:/))return new bu(t);if("string"==typeof t&&t.match(/^wss?:/)||(n=t)&&"function"==typeof n.send&&"function"==typeof n.close)return new Mu(t);var n;let s=null;try{s=Gc.from(t)}catch(t){}const i=[];if(r("publicPolygon")&&s&&"matic"===s.name&&i.push(new bu("https://polygon-rpc.com/",s,{staticNetwork:s})),r("alchemy"))try{i.push(new Pu(t,e.alchemy))}catch(t){}if(r("ankr")&&null!=e.ankr)try{i.push(new ku(t,e.ankr))}catch(t){}if(r("cloudflare"))try{i.push(new Ru(t))}catch(t){}if(r("etherscan"))try{i.push(new Cu(t,e.etherscan))}catch(t){}if(r("infura"))try{let r,n=e.infura;"object"==typeof n&&(r=n.projectSecret,n=n.projectId),i.push(new ju(t,n,r))}catch(t){}if(r("quicknode"))try{let r=e.quicknode;i.push(new Vu(t,r))}catch(t){}if(h(i.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===i.length)return i[0];let o=Math.floor(i.length/2);return o>2&&(o=2),s&&-1!==rh.indexOf(s.name)&&(o=1),e&&e.quorum&&(o=e.quorum),new eh(i,void 0,{quorum:o})}class sh extends iu{signer;#Pe;#Re;constructor(t){super(t.provider),o(this,{signer:t}),this.#Pe=null,this.#Re=0}async getAddress(){return this.signer.getAddress()}connect(t){return new sh(this.signer.connect(t))}async getNonce(t){if("pending"===t){null==this.#Pe&&(this.#Pe=super.getNonce("pending"));const t=this.#Re;return await this.#Pe+t}return super.getNonce(t)}increment(){this.#Re++}reset(){this.#Re=0,this.#Pe=null}async sendTransaction(t){const e=this.getNonce("pending");return this.increment(),(t=await this.signer.populateTransaction(t)).nonce=await e,await this.signer.sendTransaction(t)}signTransaction(t){return this.signer.signTransaction(t)}signMessage(t){return this.signer.signMessage(t)}signTypedData(t,e,r){return this.signer.signTypedData(t,e,r)}}class ih extends wu{#rt;constructor(t,e){super(e,{batchMaxCount:1}),this.#rt=async(e,r)=>{const n={method:e,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{const e=await t.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:e}),e}catch(t){const e=new Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){f(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await this.#rt(t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){switch((e=JSON.parse(JSON.stringify(e))).error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`}return super.getRpcError(t,e)}async hasSigner(t){null==t&&(t=0);const e=await this.send("eth_accounts",[]);return"number"==typeof t?e.length>t:(t=t.toLowerCase(),0!==e.filter((e=>e.toLowerCase()===t)).length)}async getSigner(t){if(null==t&&(t=0),!await this.hasSigner(t))try{await this.#rt("eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(t)}}const oh="62e1ad51b37b8e00394bda3b";class ah extends bu{applicationId;applicationSecret;constructor(t,e,r){null==t&&(t="mainnet");const n=Gc.from(t);null==e&&(e=oh),null==r&&(r=null);const s={staticNetwork:n};super(ah.getRequest(n,e,r),n,s),o(this,{applicationId:e,applicationSecret:r})}_getProvider(t){try{return new ah(t,this.applicationId,this.applicationSecret)}catch(t){}return super._getProvider(t)}static getRequest(t,e,r){null==e&&(e=oh);const n=new xc(`https://${function(t){switch(t){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}f(!1,"unsupported network","network",t)}(t.name)}/v1/lb/${e}`);return n.allowGzip=!0,r&&n.setCredentials("",r),e===oh&&(n.retryFunc=async(t,e,r)=>(Sc("PocketProvider"),!0)),n}isCommunityResource(){return this.applicationId===oh}}const ch=void 0,lh=BigInt(-1),uh=BigInt(0),hh=BigInt(1),fh=BigInt(5),dh={};let ph="0000";for(;ph.length<80;)ph+=ph;function gh(t){let e=ph;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function mh(t,e,r){const n=BigInt(e.width);if(e.signed){const e=hh<<n-hh;h(null==r||t>=-e&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=t>uh?Q(K(t,n),n):-Q(K(-t,n),n)}else{const e=hh<<n;h(null==r||t>=0&&t<e,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:t}),t=(t%e+e)%e&e-hh}return t}function yh(t){"number"==typeof t&&(t=`fixed128x${t}`);let e=!0,r=128,n=18;if("string"==typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);f(s,"invalid fixed format","format",t),e="u"!==s[1],r=parseInt(s[2]),n=parseInt(s[3])}else if(t){const s=t,i=(t,e,r)=>null==s[t]?r:(f(typeof s[t]===e,"invalid fixed format ("+t+" not "+e+")","format."+t,s[t]),s[t]);e=i("signed","boolean",e),r=i("width","number",r),n=i("decimals","number",n)}return f(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),f(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n),{signed:e,width:r,decimals:n,name:(e?"":"u")+"fixed"+String(r)+"x"+String(n)}}class wh{format;#Ie;#xe;#Te;_value;constructor(t,e,r){m(t,dh,"FixedNumber"),this.#xe=e,this.#Ie=r;const n=function(t,e){let r="";t<uh&&(r="-",t*=lh);let n=t.toString();if(0===e)return r+n;for(;n.length<=e;)n=ph+n;const s=n.length-e;for(n=n.substring(0,s)+"."+n.substring(s);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(e,r.decimals);o(this,{format:r.name,_value:n}),this.#Te=gh(r.decimals)}get signed(){return this.#Ie.signed}get width(){return this.#Ie.width}get decimals(){return this.#Ie.decimals}get value(){return this.#xe}#Oe(t){f(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}#Ce(t,e){return t=mh(t,this.#Ie,e),new wh(dh,t,this.#Ie)}#Se(t,e){return this.#Oe(t),this.#Ce(this.#xe+t.#xe,e)}addUnsafe(t){return this.#Se(t)}add(t){return this.#Se(t,"add")}#Be(t,e){return this.#Oe(t),this.#Ce(this.#xe-t.#xe,e)}subUnsafe(t){return this.#Be(t)}sub(t){return this.#Be(t,"sub")}#Ue(t,e){return this.#Oe(t),this.#Ce(this.#xe*t.#xe/this.#Te,e)}mulUnsafe(t){return this.#Ue(t)}mul(t){return this.#Ue(t,"mul")}mulSignal(t){this.#Oe(t);const e=this.#xe*t.#xe;return h(e%this.#Te===uh,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#Ce(e/this.#Te,"mulSignal")}#De(t,e){return h(t.#xe!==uh,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Oe(t),this.#Ce(this.#xe*this.#Te/t.#xe,e)}divUnsafe(t){return this.#De(t)}div(t){return this.#De(t,"div")}divSignal(t){h(t.#xe!==uh,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#Oe(t);const e=this.#xe*this.#Te;return h(e%t.#xe===uh,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#Ce(e/t.#xe,"divSignal")}cmp(t){let e=this.value,r=t.value;const n=this.decimals-t.decimals;return n>0?r*=gh(n):n<0&&(e*=gh(-n)),e<r?-1:e>r?1:0}eq(t){return 0===this.cmp(t)}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=this.#xe;return this.#xe<uh&&(t-=this.#Te-hh),t=this.#xe/this.#Te*this.#Te,this.#Ce(t,"floor")}ceiling(){let t=this.#xe;return this.#xe>uh&&(t+=this.#Te-hh),t=this.#xe/this.#Te*this.#Te,this.#Ce(t,"ceiling")}round(t){if(null==t&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,r=fh*gh(e-1);let n=this.value+r;const s=gh(e);return n=n/s*s,mh(n,this.#Ie,"round"),new wh(dh,n,this.#Ie)}isZero(){return this.#xe===uh}isNegative(){return this.#xe<uh}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return wh.fromString(this.toString(),t)}static fromValue(t,e,r){const n=null==e?0:W(e),s=yh(r);let i=_(t,"value");const o=n-s.decimals;if(o>0){const e=gh(o);h(i%e===uh,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),i/=e}else o<0&&(i*=gh(-o));return mh(i,s,"fromValue"),new wh(dh,i,s)}static fromString(t,e){const r=t.match(/^(-?)([0-9]*)\\.?([0-9]*)$/);f(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",t);const n=yh(e);let s=r[2]||"0",i=r[3]||"";for(;i.length<n.decimals;)i+=ph;h(i.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),i=i.substring(0,n.decimals);const o=BigInt(r[1]+s+i);return mh(o,n,"fromString"),new wh(dh,o,n)}static fromBytes(t,e){let r=q(w(t,"value"));const n=yh(e);return n.signed&&(r=Q(r,n.width)),mh(r,n,"fromBytes"),new wh(dh,r,n)}}const bh=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Ah(t,e){let r=18;if("string"==typeof e){const t=bh.indexOf(e);f(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=W(e,"unit"));return wh.fromValue(t,r,{decimals:r,width:512}).toString()}function Eh(t,e){f("string"==typeof t,"value must be a string","value",t);let r=18;if("string"==typeof e){const t=bh.indexOf(e);f(t>=0,"invalid unit","unit",e),r=3*t}else null!=e&&(r=W(e,"unit"));return wh.fromString(t,{decimals:r,width:512}).value}function vh(t){return Ah(t,18)}function kh(t){return Eh(t,18)}function Nh(t){const e=w(t,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const r=k(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const Ph=" !#$%&\'()*+,-./<=>?@[]^_`{|}~",Rh=/^[a-z]*$/i;function Ih(t,e){let r=97;return t.reduce(((t,n)=>(n===e?r++:n.match(Rh)?t.push(String.fromCharCode(r)+n):(r=97,t.push(n)),t)),[])}function xh(t){return f("0"===t[0],"unsupported auwl data","data",t),function(t,e){for(let r=Ph.length-1;r>=0;r--)t=t.split(Ph[r]).join(e.substring(2*r,2*r+2));const r=[],n=t.replace(/(:|([0-9])|([A-Z][a-z]*))/g,((t,e,n,s)=>{if(n)for(let t=parseInt(n);t>=0;t--)r.push(";");else r.push(e.toLowerCase());return""}));if(n)throw new Error(`leftovers: ${JSON.stringify(n)}`);return Ih(Ih(r,";"),":")}(t.substring(1+2*Ph.length),t.substring(1,1+2*Ph.length))}class Th{locale;constructor(t){o(this,{locale:t})}split(t){return t.toLowerCase().split(/\\s+/g)}join(t){return t.join(" ")}}class Oh extends Th{#e;#Fe;constructor(t,e,r){super(t),this.#e=e,this.#Fe=r,this.#Le=null}get _data(){return this.#e}_decodeWords(){return xh(this.#e)}#Le;#Me(){if(null==this.#Le){const t=this._decodeWords();if(Ue(t.join("\\n")+"\\n")!==this.#Fe)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#Le=t}return this.#Le}getWord(t){const e=this.#Me();return f(t>=0&&t<e.length,`invalid word index: ${t}`,"index",t),e[t]}getWordIndex(t){return this.#Me().indexOf(t)}}let Ch=null;class Sh extends Oh{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU\'0Ce[Cid|CountCu\'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU\'d0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau\'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu\'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU\'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A\'AtEapE{Ee\'EfErryE,I{&IefIldIm}yOi)Oo\'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO\'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur\'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi\'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a\'ErF&\'F(eFyG*eLayLiv M<dMi\'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE\'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea\'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%\'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA\'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu\'Ecu>Erci\'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po\'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L\'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp\'ObeOomOryO=OwUe_tDde[LdOdO\'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R\'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&\'Mu}Pa@Po\'Pro=Pul\'0ChCludeComeC*a\'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&\'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U\'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I\'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R\'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po\'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU\'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa\'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa\'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai\'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL\'Mpk(N^PilPpyR^a\'R.yRpo\'R\'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI\'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu\'G]G*tGul?Je@LaxLea\'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#\'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N\'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN\'tP PplyP*meReRfa)R+Rpri\'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi\'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv \'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS\'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA\'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==Ch&&(Ch=new Sh),Ch}}function Bh(t){return(1<<t)-1<<8-t&255}function Uh(t,e){g("NFKD"),null==e&&(e=Sh.wordlist());const r=e.split(t);f(r.length%3==0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const n=new Uint8Array(Math.ceil(11*r.length/8));let s=0;for(let t=0;t<r.length;t++){let i=e.getWordIndex(r[t].normalize("NFKD"));f(i>=0,`invalid mnemonic word at index ${t}`,"mnemonic","[ REDACTED ]");for(let t=0;t<11;t++)i&1<<10-t&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,o=Bh(r.length/3);return f((w(ui(n.slice(0,i/8)))[0]&o)==(n[n.length-1]&o),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),k(n.slice(0,i/8))}function Dh(t,e){f(t.length%4==0&&t.length>=16&&t.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==e&&(e=Sh.wordlist());const r=[0];let n=11;for(let e=0;e<t.length;e++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[e],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[e]>>8-n,r.push(t[e]&(1<<8-n)-1&255),n+=3);const s=t.length/4,i=parseInt(ui(t).substring(2,4),16)&Bh(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map((t=>e.getWord(t))))}const Fh={};class Lh{phrase;password;wordlist;entropy;constructor(t,e,r,n,s){null==n&&(n=""),null==s&&(s=Sh.wordlist()),m(t,Fh,"Mnemonic"),o(this,{phrase:r,password:n,wordlist:s,entropy:e})}computeSeed(){const t=U("mnemonic"+this.password,"NFKD");return Hs(U(this.phrase,"NFKD"),t,2048,64,"sha512")}static fromPhrase(t,e,r){const n=Uh(t,r);return t=Dh(w(n),r),new Lh(Fh,n,t,e,r)}static fromEntropy(t,e,r){const n=w(t,"entropy"),s=Dh(n,r);return new Lh(Fh,k(n),s,e,r)}static entropyToPhrase(t,e){return Dh(w(t,"entropy"),e)}static phraseToEntropy(t,e){return Uh(t,e)}static isValidMnemonic(t,e){try{return Uh(t,e),!0}catch(t){}return!1}}class Mh extends iu{address;#Ge;constructor(t,e){super(e),f(t&&"function"==typeof t.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#Ge=t,o(this,{address:Va(this.signingKey.publicKey)})}get signingKey(){return this.#Ge}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(t){return new Mh(this.#Ge,t)}async signTransaction(t){const{to:e,from:r}=await i({to:t.to?qr(t.to,this.provider):void 0,from:t.from?qr(t.from,this.provider):void 0});null!=e&&(t.to=e),null!=r&&(t.from=r),null!=t.from&&(f(ue(t.from)===this.address,"transaction from address mismatch","tx.from",t.from),delete t.from);const n=ul.from(t);return n.signature=this.signingKey.sign(n.unsignedHash),n.serialized}async signMessage(t){return this.signMessageSync(t)}signMessageSync(t){return this.signingKey.sign(_a(t)).serialized}async signTypedData(t,e,r){const n=await dc.resolveNames(t,e,r,(async t=>{h(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:t}});const e=await this.provider.resolveName(t);return h(null!=e,"unconfigured ENS name","UNCONFIGURED_NAME",{value:t}),e}));return this.signingKey.sign(dc.hash(n.domain,e,n.value)).serialized}}var Gh,Hh,jh,Qh=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},Vh=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r};const Kh={16:10,24:12,32:14},_h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Jh=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],zh=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],qh=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],Wh=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Yh=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Zh=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],Xh=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],$h=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],tf=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],ef=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],rf=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],nf=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],sf=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],of=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function af(t){const e=[];for(let r=0;r<t.length;r+=4)e.push(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]);return e}class cf{get key(){return Qh(this,Gh,"f").slice()}constructor(t){if(Gh.set(this,void 0),Hh.set(this,void 0),jh.set(this,void 0),!(this instanceof cf))throw Error("AES must be instanitated with `new`");Vh(this,Gh,new Uint8Array(t),"f");const e=Kh[this.key.length];if(null==e)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Vh(this,jh,[],"f"),Vh(this,Hh,[],"f");for(let t=0;t<=e;t++)Qh(this,jh,"f").push([0,0,0,0]),Qh(this,Hh,"f").push([0,0,0,0]);const r=4*(e+1),n=this.key.length/4,s=af(this.key);let i;for(let t=0;t<n;t++)i=t>>2,Qh(this,jh,"f")[i][t%4]=s[t],Qh(this,Hh,"f")[e-i][t%4]=s[t];let o,a=0,c=n;for(;c<r;){if(o=s[n-1],s[0]^=Jh[o>>16&255]<<24^Jh[o>>8&255]<<16^Jh[255&o]<<8^Jh[o>>24&255]^_h[a]<<24,a+=1,8!=n)for(let t=1;t<n;t++)s[t]^=s[t-1];else{for(let t=1;t<n/2;t++)s[t]^=s[t-1];o=s[n/2-1],s[n/2]^=Jh[255&o]^Jh[o>>8&255]<<8^Jh[o>>16&255]<<16^Jh[o>>24&255]<<24;for(let t=n/2+1;t<n;t++)s[t]^=s[t-1]}let t,i,l=0;for(;l<n&&c<r;)t=c>>2,i=c%4,Qh(this,jh,"f")[t][i]=s[l],Qh(this,Hh,"f")[e-t][i]=s[l++],c++}for(let t=1;t<e;t++)for(let e=0;e<4;e++)o=Qh(this,Hh,"f")[t][e],Qh(this,Hh,"f")[t][e]=rf[o>>24&255]^nf[o>>16&255]^sf[o>>8&255]^of[255&o]}encrypt(t){if(16!=t.length)throw new TypeError("invalid plaintext size (must be 16 bytes)");const e=Qh(this,jh,"f").length-1,r=[0,0,0,0];let n=af(t);for(let t=0;t<4;t++)n[t]^=Qh(this,jh,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)r[e]=qh[n[e]>>24&255]^Wh[n[(e+1)%4]>>16&255]^Yh[n[(e+2)%4]>>8&255]^Zh[255&n[(e+3)%4]]^Qh(this,jh,"f")[t][e];n=r.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Qh(this,jh,"f")[e][t],s[4*t]=255&(Jh[n[t]>>24&255]^i>>24),s[4*t+1]=255&(Jh[n[(t+1)%4]>>16&255]^i>>16),s[4*t+2]=255&(Jh[n[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(Jh[255&n[(t+3)%4]]^i);return s}decrypt(t){if(16!=t.length)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const e=Qh(this,Hh,"f").length-1,r=[0,0,0,0];let n=af(t);for(let t=0;t<4;t++)n[t]^=Qh(this,Hh,"f")[0][t];for(let t=1;t<e;t++){for(let e=0;e<4;e++)r[e]=Xh[n[e]>>24&255]^$h[n[(e+3)%4]>>16&255]^tf[n[(e+2)%4]>>8&255]^ef[255&n[(e+1)%4]]^Qh(this,Hh,"f")[t][e];n=r.slice()}const s=new Uint8Array(16);let i=0;for(let t=0;t<4;t++)i=Qh(this,Hh,"f")[e][t],s[4*t]=255&(zh[n[t]>>24&255]^i>>24),s[4*t+1]=255&(zh[n[(t+3)%4]>>16&255]^i>>16),s[4*t+2]=255&(zh[n[(t+2)%4]>>8&255]^i>>8),s[4*t+3]=255&(zh[255&n[(t+1)%4]]^i);return s}}Gh=new WeakMap,Hh=new WeakMap,jh=new WeakMap;class lf{constructor(t,e,r){if(r&&!(this instanceof r))throw new Error(`${t} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new cf(e)},name:{enumerable:!0,value:t}})}}var uf,hf,ff=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r},df=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class pf extends lf{constructor(t,e){if(super("ECC",t,pf),uf.set(this,void 0),hf.set(this,void 0),e){if(e.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");ff(this,uf,new Uint8Array(e),"f")}else ff(this,uf,new Uint8Array(16),"f");ff(this,hf,this.iv,"f")}get iv(){return new Uint8Array(df(this,uf,"f"))}encrypt(t){if(t.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let r=0;r<t.length;r+=16){for(let e=0;e<16;e++)df(this,hf,"f")[e]^=t[r+e];ff(this,hf,this.aes.encrypt(df(this,hf,"f")),"f"),e.set(df(this,hf,"f"),r)}return e}decrypt(t){if(t.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const e=new Uint8Array(t.length);for(let r=0;r<t.length;r+=16){const n=this.aes.decrypt(t.subarray(r,r+16));for(let s=0;s<16;s++)e[r+s]=n[s]^df(this,hf,"f")[s],df(this,hf,"f")[s]=t[r+s]}return e}}uf=new WeakMap,hf=new WeakMap;new WeakMap,new WeakMap,new WeakSet;var gf,mf,yf,wf=function(t,e,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(t,r):s?s.value=r:e.set(t,r),r},bf=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)};class Af extends lf{constructor(t,e){super("CTR",t,Af),gf.set(this,void 0),mf.set(this,void 0),yf.set(this,void 0),wf(this,yf,new Uint8Array(16),"f"),bf(this,yf,"f").fill(0),wf(this,gf,bf(this,yf,"f"),"f"),wf(this,mf,16,"f"),null==e&&(e=1),"number"==typeof e?this.setCounterValue(e):this.setCounterBytes(e)}get counter(){return new Uint8Array(bf(this,yf,"f"))}setCounterValue(t){if(!Number.isInteger(t)||t<0||t>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let e=15;e>=0;--e)bf(this,yf,"f")[e]=t%256,t=Math.floor(t/256)}setCounterBytes(t){if(16!==t.length)throw new TypeError("invalid counter initial Uint8Array value length");bf(this,yf,"f").set(t)}increment(){for(let t=15;t>=0;t--){if(255!==bf(this,yf,"f")[t]){bf(this,yf,"f")[t]++;break}bf(this,yf,"f")[t]=0}}encrypt(t){var e,r;const n=new Uint8Array(t);for(let t=0;t<n.length;t++)16===bf(this,mf,"f")&&(wf(this,gf,this.aes.encrypt(bf(this,yf,"f")),"f"),wf(this,mf,0,"f"),this.increment()),n[t]^=bf(this,gf,"f")[(wf(this,mf,(r=bf(this,mf,"f"),e=r++,r),"f"),e)];return n}decrypt(t){return this.encrypt(t)}}function Ef(t){return"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),b(t)}function vf(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function kf(t){return"string"==typeof t?U(t,"NFKC"):b(t)}function Nf(t,e){const r=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);f(null!=r,"invalid path","path",e);const n=r[1],s=r[3],i="!"===r[4];let o=t;for(const t of n.toLowerCase().split(".")){if(Array.isArray(o)){if(!t.match(/^[0-9]+$/))break;o=o[parseInt(t)]}else if("object"==typeof o){let e=null;for(const r in o)if(r.toLowerCase()===t){e=o[r];break}o=e}else o=null;if(null==o)break}if(f(!i||null!=o,"missing required value","path",n),s&&null!=o){if("int"===s){if("string"==typeof o&&o.match(/^-?[0-9]+$/))return parseInt(o);if(Number.isSafeInteger(o))return o}if("number"===s&&"string"==typeof o&&o.match(/^-?[0-9.]*$/))return parseFloat(o);if("data"===s&&"string"==typeof o)return Ef(o);if("array"===s&&Array.isArray(o))return o;if(s===typeof o)return o;f(!1,`wrong type found for ${s} `,"path",n)}return o}gf=new WeakMap,mf=new WeakMap,yf=new WeakMap,new WeakMap,new WeakMap,new WeakMap;const Pf="m/44\'/60\'/0\'/0/0";function Rf(t){try{const e=JSON.parse(t);if(3===(null!=e.version?parseInt(e.version):0))return!0}catch(t){}return!1}function If(t,e){const r=w(e),n=Nf(t,"crypto.ciphertext:data!");f(k(re(N([r.slice(16,32),n]))).substring(2)===Nf(t,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=function(t,e,r){if("aes-128-ctr"===Nf(t,"crypto.cipher:string")){const n=Nf(t,"crypto.cipherparams.iv:data!");return k(new Af(e,n).decrypt(r))}h(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(t,r.slice(0,16),n),i=Va(s);if(t.address){let e=t.address.toLowerCase();e.startsWith("0x")||(e="0x"+e),f(ue(e)===i,"keystore address/privateKey mismatch","address",t.address)}const o={address:i,privateKey:s};if("0.1"===Nf(t,"x-ethers.version:string")){const e=r.slice(32,64),n=Nf(t,"x-ethers.mnemonicCiphertext:data!"),s=Nf(t,"x-ethers.mnemonicCounter:data!"),i=new Af(e,s);o.mnemonic={path:Nf(t,"x-ethers.path:string")||Pf,locale:Nf(t,"x-ethers.locale:string")||"en",entropy:k(w(i.decrypt(n)))}}return o}function xf(t){const e=Nf(t,"crypto.kdf:string");if(e&&"string"==typeof e){if("scrypt"===e.toLowerCase()){const r=Nf(t,"crypto.kdfparams.salt:data!"),n=Nf(t,"crypto.kdfparams.n:int!"),s=Nf(t,"crypto.kdfparams.r:int!"),i=Nf(t,"crypto.kdfparams.p:int!");f(n>0&&0==(n&n-1),"invalid kdf.N","kdf.N",n),f(s>0&&i>0,"invalid kdf","kdf",e);const o=Nf(t,"crypto.kdfparams.dklen:int!");return f(32===o,"invalid kdf.dklen","kdf.dflen",o),{name:"scrypt",salt:r,N:n,r:s,p:i,dkLen:64}}if("pbkdf2"===e.toLowerCase()){const e=Nf(t,"crypto.kdfparams.salt:data!"),r=Nf(t,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();f("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);const s=Nf(t,"crypto.kdfparams.c:int!"),i=Nf(t,"crypto.kdfparams.dklen:int!");return f(32===i,"invalid kdf.dklen","kdf.dklen",i),{name:"pbkdf2",salt:e,count:s,dkLen:i,algorithm:n}}}f(!1,"unsupported key-derivation function","kdf",e)}function Tf(t,e){const r=JSON.parse(t),n=kf(e),s=xf(r);if("pbkdf2"===s.name){const{salt:t,count:e,dkLen:i,algorithm:o}=s;return If(r,Hs(n,t,e,i,o))}h("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});const{salt:i,N:o,r:a,p:c,dkLen:l}=s;return If(r,ni(n,i,o,a,c,l))}function Of(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}async function Cf(t,e,r){const n=JSON.parse(t),s=kf(e),i=xf(n);if("pbkdf2"===i.name){r&&(r(0),await Of(0));const{salt:t,count:e,dkLen:o,algorithm:a}=i,c=Hs(s,t,e,o,a);return r&&(r(1),await Of(0)),If(n,c)}h("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});const{salt:o,N:a,r:c,p:l,dkLen:u}=i;return If(n,await ri(s,o,a,c,l,u,r))}function Sf(t){const e=null!=t.salt?w(t.salt,"options.salt"):Ks(32);let r=1<<17,n=8,s=1;return t.scrypt&&(t.scrypt.N&&(r=t.scrypt.N),t.scrypt.r&&(n=t.scrypt.r),t.scrypt.p&&(s=t.scrypt.p)),f("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),f("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),f("number"==typeof s&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:r,r:n,p:s}}function Bf(t,e,r,s){const i=w(r.privateKey,"privateKey"),o=null!=s.iv?w(s.iv,"options.iv"):Ks(16);f(16===o.length,"invalid options.iv length","options.iv",s.iv);const a=null!=s.uuid?w(s.uuid,"options.uuid"):Ks(16);f(16===a.length,"invalid options.uuid length","options.uuid",s.iv);const c=t.slice(0,16),l=t.slice(16,32),u=w(new Af(c,o).encrypt(i)),h=re(N([l,u])),d={address:r.address.substring(2).toLowerCase(),id:Nh(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:k(o).substring(2)},ciphertext:k(u).substring(2),kdf:"scrypt",kdfparams:{salt:k(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:h.substring(2)}};if(r.mnemonic){const e=null!=s.client?s.client:`ethers/${n}`,i=r.mnemonic.path||Pf,o=r.mnemonic.locale||"en",a=t.slice(32,64),c=w(r.mnemonic.entropy,"account.mnemonic.entropy"),l=Ks(16),u=w(new Af(a,l).encrypt(c)),h=new Date,f="UTC--"+h.getUTCFullYear()+"-"+vf(h.getUTCMonth()+1,2)+"-"+vf(h.getUTCDate(),2)+"T"+vf(h.getUTCHours(),2)+"-"+vf(h.getUTCMinutes(),2)+"-"+vf(h.getUTCSeconds(),2)+".0Z--"+d.address;d["x-ethers"]={client:e,gethFilename:f,path:i,locale:o,mnemonicCounter:k(l).substring(2),mnemonicCiphertext:k(u).substring(2),version:"0.1"}}return JSON.stringify(d)}function Uf(t,e,r){null==r&&(r={});const n=kf(e),s=Sf(r);return Bf(w(ni(n,s.salt,s.N,s.r,s.p,64)),s,t,r)}async function Df(t,e,r){null==r&&(r={});const n=kf(e),s=Sf(r);return Bf(w(await ri(n,s.salt,s.N,s.r,s.p,64,r.progressCallback)),s,t,r)}const Ff="m/44\'/60\'/0\'/0/0",Lf=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Mf=2147483648,Gf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Hf(t,e){let r="";for(;t;)r="0123456789abcdef"[t%16]+r,t=Math.trunc(t/16);for(;r.length<2*e;)r="0"+r;return"0x"+r}function jf(t){const e=w(t);return ml(N([e,R(ui(ui(e)),0,4)]))}const Qf={};function Vf(t,e,r,n){const s=new Uint8Array(37);t&Mf?(h(null!=n,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(w(n),1)):s.set(w(r));for(let e=24;e>=0;e-=8)s[33+(e>>3)]=t>>24-e&255;const i=w(ws("sha512",e,s));return{IL:i.slice(0,32),IR:i.slice(32)}}function Kf(t,e){const r=e.split("/");f(r.length>0&&("m"===r[0]||t.depth>0),"invalid path","path",e),"m"===r[0]&&r.shift();let n=t;for(let t=0;t<r.length;t++){const e=r[t];if(e.match(/^[0-9]+\'$/)){const r=parseInt(e.substring(0,e.length-1));f(r<Mf,"invalid path index",`path[${t}]`,e),n=n.deriveChild(Mf+r)}else if(e.match(/^[0-9]+$/)){const r=parseInt(e);f(r<Mf,"invalid path index",`path[${t}]`,e),n=n.deriveChild(r)}else f(!1,"invalid path component",`path[${t}]`,e)}return n}class _f extends Mh{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,c,l){super(e,l),m(t,Qf,"HDNodeWallet"),o(this,{publicKey:e.compressedPublicKey}),o(this,{parentFingerprint:r,fingerprint:R(Fs(ui(this.publicKey)),0,4),chainCode:n,path:s,index:i,depth:a}),o(this,{mnemonic:c})}connect(t){return new _f(Qf,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,t)}#He(){const t={address:this.address,privateKey:this.privateKey},e=this.mnemonic;return this.path&&e&&"en"===e.wordlist.locale&&""===e.password&&(t.mnemonic={path:this.path,locale:"en",entropy:e.entropy}),t}async encrypt(t,e){return await Df(this.#He(),t,{progressCallback:e})}encryptSync(t){return Uf(this.#He(),t)}get extendedKey(){return h(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),jf(N(["0x0488ADE4",Hf(this.depth,1),this.parentFingerprint,Hf(this.index,4),this.chainCode,N(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new Jf(Qf,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(t){const e=W(t,"index");f(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(e&~Mf),e&Mf&&(r+="\'"));const{IR:n,IL:s}=Vf(e,this.chainCode,this.publicKey,this.privateKey),i=new Eo(Z((q(s)+BigInt(this.privateKey))%Gf,32));return new _f(Qf,i,this.fingerprint,k(n),r,e,this.depth+1,this.mnemonic,this.provider)}derivePath(t){return Kf(this,t)}static#je(t,e){f(E(t),"invalid seed","seed","[REDACTED]");const r=w(t,"seed");f(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");const n=w(ws("sha512",Lf,r)),s=new Eo(k(n.slice(0,32)));return new _f(Qf,s,"0x00000000",k(n.slice(32)),"m",0,0,e,null)}static fromExtendedKey(t){const e=X(yl(t));f(82===e.length||jf(e.slice(0,78))===t,"invalid extended key","extendedKey","[ REDACTED ]");const r=e[4],n=k(e.slice(5,9)),s=parseInt(k(e.slice(9,13)).substring(2),16),i=k(e.slice(13,45)),o=e.slice(45,78);switch(k(e.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const t=k(o);return new Jf(Qf,Va(t),t,n,i,null,s,r,null)}case"0x0488ade4":case"0x04358394 ":if(0!==o[0])break;return new _f(Qf,new Eo(o.slice(1)),n,i,null,s,r,null,null)}f(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(t,e,r){null==t&&(t=""),null==e&&(e=Ff),null==r&&(r=Sh.wordlist());const n=Lh.fromEntropy(Ks(16),t,r);return _f.#je(n.computeSeed(),n).derivePath(e)}static fromMnemonic(t,e){return e||(e=Ff),_f.#je(t.computeSeed(),t).derivePath(e)}static fromPhrase(t,e,r,n){null==e&&(e=""),null==r&&(r=Ff),null==n&&(n=Sh.wordlist());const s=Lh.fromPhrase(t,e,n);return _f.#je(s.computeSeed(),s).derivePath(r)}static fromSeed(t){return _f.#je(t,null)}}class Jf extends ou{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(t,e,r,n,s,i,a,c,l){super(e,l),m(t,Qf,"HDNodeVoidWallet"),o(this,{publicKey:r}),o(this,{publicKey:r,fingerprint:R(Fs(ui(r)),0,4),parentFingerprint:n,chainCode:s,path:i,index:a,depth:c})}connect(t){return new Jf(Qf,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,t)}get extendedKey(){return h(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),jf(N(["0x0488B21E",Hf(this.depth,1),this.parentFingerprint,Hf(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(t){const e=W(t,"index");f(e<=4294967295,"invalid index","index",e);let r=this.path;r&&(r+="/"+(e&~Mf),e&Mf&&(r+="\'"));const{IR:n,IL:s}=Vf(e,this.chainCode,this.publicKey,null),i=Eo.addPoints(s,this.publicKey,!0),o=Va(i);return new Jf(Qf,o,i,this.fingerprint,k(n),r,e,this.depth+1,this.provider)}derivePath(t){return Kf(this,t)}}function zf(t){const e=W(t,"index");return f(e>=0&&e<Mf,"invalid account index","index",e),`m/44\'/60\'/${e}\'/0/0`}function qf(t){const e=W(t,"index");return f(e>=0&&e<Mf,"invalid account index","index",e),`m/44\'/60\'/0\'/0/${e}`}function Wf(t){try{if(JSON.parse(t).encseed)return!0}catch(t){}return!1}function Yf(t,e){const r=JSON.parse(t),n=kf(e),s=ue(Nf(r,"ethaddr:string!")),i=Ef(Nf(r,"encseed:string!"));f(i&&i.length%16==0,"invalid encseed","json",t);const o=w(Hs(n,n,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),c=i.slice(16),l=function(t){if(t.length<16)throw new TypeError("PKCS#7 invalid length");const e=t[t.length-1];if(e>16)throw new TypeError("PKCS#7 padding byte out of range");const r=t.length-e;for(let n=0;n<e;n++)if(t[r+n]!==e)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(t.subarray(0,r))}(w(new pf(o,a).decrypt(c)));let u="";for(let t=0;t<l.length;t++)u+=String.fromCharCode(l[t]);return{address:s,privateKey:Ue(u)}}function Zf(t){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}class Xf extends Mh{constructor(t,e){"string"!=typeof t||t.startsWith("0x")||(t="0x"+t),super("string"==typeof t?new Eo(t):t,e)}connect(t){return new Xf(this.signingKey,t)}async encrypt(t,e){const r={address:this.address,privateKey:this.privateKey};return await Df(r,t,{progressCallback:e})}encryptSync(t){return Uf({address:this.address,privateKey:this.privateKey},t)}static#Qe(t){if(f(t,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in t&&t.mnemonic&&"en"===t.mnemonic.locale){const e=Lh.fromEntropy(t.mnemonic.entropy),r=_f.fromMnemonic(e,t.mnemonic.path);if(r.address===t.address&&r.privateKey===t.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const e=new Xf(t.privateKey);return f(e.address===t.address,"address/privateKey mismatch","json","[ REDACTED ]"),e}static async fromEncryptedJson(t,e,r){let n=null;return Rf(t)?n=await Cf(t,e,r):Wf(t)&&(r&&(r(0),await Zf(0)),n=Yf(t,e),r&&(r(1),await Zf(0))),Xf.#Qe(n)}static fromEncryptedJsonSync(t,e){let r=null;return Rf(t)?r=Tf(t,e):Wf(t)?r=Yf(t,e):f(!1,"invalid JSON wallet","json","[ REDACTED ]"),Xf.#Qe(r)}static createRandom(t){const e=_f.createRandom();return t?e.connect(t):e}static fromPhrase(t,e){const r=_f.fromPhrase(t);return e?r.connect(e):r}}class $f extends Oh{#Ve;constructor(t,e,r,n){super(t,e,n),this.#Ve=r}get _accent(){return this.#Ve}_decodeWords(){return function(t,e){let r=xh(t).join(",");return e.split(/,/g).forEach((t=>{const n=t.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);f(null!==n,"internal error parsing accents","accents",e);let s=0;const i=function(t,e){const r=(1<<t)-1,n=[];let s=0,i=0,o=0;for(let a=0;a<e.length;a++)for(s=s<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(e[a]),i+=6;i>=t;){const e=s>>i-t;s&=(1<<i-t)-1,i-=t,0===e?o+=r:(n.push(e+o),o=0)}return n}(parseInt(n[3]),n[4]),o=parseInt(n[2]),a=new RegExp(`([${n[1]}])`,"g");r=r.replace(a,((t,e)=>(0==--i[s]&&(e=String.fromCharCode(e.charCodeAt(0),o),s++),e)))})),r.split(",")}(this._data,this._accent)}}const td={en:Sh.wordlist()};class ed extends Error{constructor(t){super(t.message),this.isRpcError=!0,this.code=t.code,this.data=t.data}}class rd{constructor(){this.web3CallBacks={},this.personal={sign:(t,e)=>{const{data:r}=t,{id:n=8888}=t;this.web3CallBacks[n]=e,alpha.signPersonalMessage(n,r)}},this.tokens={data:{currentInstance:{}},dataChanged:(t,e,r)=>{console.log("web3.tokens.data changed.")}},this.action={setProps:function(t){alpha.setValues(JSON.stringify(t))}}}setInstanceData(t){this.tokens.data.currentInstance=t}executeCallback(t,e,r){console.debug("Execute callback: "+t+" "+r),this.web3CallBacks[t](e,r),delete this.web3CallBacks[t]}}window.ethers=r,window.tokenscript=new class extends rd{},window.web3=window.tokenscript,window.ethereum=new class{get isIFrame(){return!0}get currentProvider(){return this}constructor({targetOrigin:t="*",timeoutMilliseconds:e=12e4,eventSource:r=window,eventTarget:n=window.parent}={}){this._isSigner=!0,this.completers={},this.handleEventSourceMessage=t=>{if("*"!==this.targetOrigin&&0!==t.origin.indexOf(this.targetOrigin))return;const e=t.data;if(!e)return;const r=e;if("2.0"===r.jsonrpc&&(console.log("[IFRAME_RPC] response received: ",e),void 0!==r.id&&null!==r.id)){const t=this.completers[""+r.id];t&&("error"in r||"result"in r?t.resolve(r):t.reject(new Error("Response from provider did not have error or result key")),delete this.completers[r.id])}},this.targetOrigin=t,this.timeoutMilliseconds=e,this.eventSource=r,this.eventTarget=n,this.eventSource.addEventListener("message",this.handleEventSourceMessage)}async execute(t,e){const r=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),n={method:"ethRpc",params:Object.assign({jsonrpc:"2.0",id:r,method:t},void 0===e?null:{params:e})},s=new Promise(((t,e)=>this.completers[r]={resolve:t,reject:e}));return this.eventTarget.postMessage(n,this.targetOrigin),console.log("[IFRAME_RPC] request: ",n),setTimeout((()=>{this.completers[r]&&(this.completers[r].reject(new Error(`RPC ID "${r}" timed out after ${this.timeoutMilliseconds} milliseconds`)),delete this.completers[r])}),this.timeoutMilliseconds),s}send(t,e){this.execute(t.method,t.params).then((t=>{"error"in t?e(t.error.code+": "+t.error.message,null):e(null,t.result)}))}async sendAsync(t,e){try{e(null,await this.execute(t.method,t.params))}catch(t){e(t.code+": "+t.message,null)}}async request(t){const e=await this.execute(t.method,t.params);if("error"in e)throw new ed(e.error);return e.result}},window.executeCallback=(t,e,r)=>window.web3.executeCallback(t,e,r)})();';class TokenViewData{constructor(e,t){this.tokenScript=e;this.card=t}async getCurrentTokenData(e=false){const t={};const r=this.tokenScript.getAttributes();for(let n of r){try{t[n.getName()]=await n.getJsonSafeValue(e)}catch(e){console.warn(e)}}const n=this.card.getAttributes();for(let r of n){try{t[r.getName()]=await r.getJsonSafeValue(e)}catch(e){console.warn(e)}}const i=await this.tokenScript.getTokenContextData();return Object.assign(Object.assign({},t),i)}getViewDataId(){var e;if(!this.viewContainerId){this.viewContainerId="token-card-"+((e=this.tokenScript.getCurrentTokenContext())===null||e===void 0?void 0:e.selectedTokenId)}return this.viewContainerId}async getTokenJavascript(){var e;const t=await this.getCurrentTokenData();console.log("Loading view with data:");console.log(t);const r=await this.tokenScript.getEngine().getWalletAdapter();return`\n\n\t\tconst _currentTokenInstance = JSON.parse(String.raw \`${JSON.stringify(t).replace(/`/g,"")}\`);\n\n\t\tconst walletAddress = '${t.ownerAddress}'\n\t\tconst addressHex = "${t.ownerAddress}";\n\t\tconst rpcURL = "${r.getRpcUrl(t.chainId)}";\n\t\tconst chainID = "${t.chainId}";\n\n\t\t// Injected card SDK\n\t\t${v1Txt}\n\n\t\twindow.tokenscript.setInstanceData(_currentTokenInstance);\n\n\t\t// Extra initialisation\n\t\tfunction refresh() {\n\t\t   web3.tokens.dataChanged('test', web3.tokens.data, '${this.getViewDataId()}') //TODO: Cache previous value of token to feed into first arg\n\t\t}\n\n\t\t//window.onload = refresh;\n\n\t\tweb3.eth = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_1 = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_8217 = {\n\t\twalletBalance: 0\n\t\t}\n\n\t\tdocument.addEventListener("DOMContentLoaded", function() {\n\t\t\trefresh();\n\t\t});\n\n\t\t${(e=this.tokenScript.getViewBinding())===null||e===void 0?void 0:e.getViewBindingJavascript()}\n\n\t\t`}}var bn$1=createCommonjsModule$2((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$3.Buffer}}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,n,i){if(typeof t==="number"){return this._initNumber(t,n,i)}if(typeof t==="object"){return this._initArray(t,n,i)}if(n==="hex"){n=16}r(n===(n|0)&&n>=2&&n<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(n===16){this._parseHex(t,s,i)}else{this._parseBase(t,n,s);if(i==="le"){this._initArray(this.toArray(),n,i)}}}};i.prototype._initNumber=function e(t,n,i){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),n,i)};i.prototype._initArray=function e(t,n,i){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this._strip()};function a(e,t){var n=e.charCodeAt(t);if(n>=48&&n<=57){return n-48}else if(n>=65&&n<=70){return n-55}else if(n>=97&&n<=102){return n-87}else{r(false,"Invalid character in "+e)}}function o(e,t,r){var n=a(e,r);if(r-1>=t){n|=a(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var f;if(n==="be"){for(i=t.length-1;i>=r;i-=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(i=c%2===0?r+1:r;i<t.length;i+=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this._strip()};function f(e,t,n,i){var s=0;var a=0;var o=Math.min(e.length,n);for(var f=t;f<o;f++){var c=e.charCodeAt(f)-48;s*=i;if(c>=49){a=c-49+10}else if(c>=17){a=c-17+10}else{a=c}r(c>=0&&a<i,"Invalid character");s+=a}return s}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=t.length-n;var o=a%i;var c=Math.min(a,a-o)+n;var u=0;for(var l=n;l<c;l+=i){u=f(t,l,l+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var h=1;u=f(t,l,t.length,r);for(l=0;l<o;l++){h*=r}this.imuln(h);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this._strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};function c(e,t){e.words=t.words;e.length=t.length;e.negative=t.negative;e.red=t.red}i.prototype._move=function e(t){c(t,this)};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype._strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){i.prototype.inspect=u}}else{i.prototype.inspect=u}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,n){t=t||10;n=n|0||1;var i;if(t===16||t==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;s+=2;if(s>=26){s-=26;o--}if(a!==0||o!==this.length-1){i=l[6-c.length]+c+i}else{i=c+i}}if(a!==0){i=a.toString(16)+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(t===(t|0)&&t>=2&&t<=36){var u=h[t];var p=d[t];i="";var y=this.clone();y.negative=0;while(!y.isZero()){var m=y.modrn(p).toString(t);y=y.idivn(p);if(!y.isZero()){i=l[u-m.length]+m+i}else{i=m+i}}if(this.isZero()){i="0"+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}r(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16,2)};if(s){i.prototype.toBuffer=function e(t,r){return this.toArrayLike(s,t,r)}}i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};var p=function e(t,r){if(t.allocUnsafe){return t.allocUnsafe(r)}return new t(r)};i.prototype.toArrayLike=function e(t,n,i){this._strip();var s=this.byteLength();var a=i||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");var o=p(t,a);var f=n==="le"?"LE":"BE";this["_toArrayLike"+f](o,s);return o};i.prototype._toArrayLikeLE=function e(t,r){var n=0;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n++]=o&255;if(n<t.length){t[n++]=o>>8&255}if(n<t.length){t[n++]=o>>16&255}if(a===6){if(n<t.length){t[n++]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n<t.length){t[n++]=i;while(n<t.length){t[n++]=0}}};i.prototype._toArrayLikeBE=function e(t,r){var n=t.length-1;var i=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|i;t[n--]=o&255;if(n>=0){t[n--]=o>>8&255}if(n>=0){t[n--]=o>>16&255}if(a===6){if(n>=0){t[n--]=o>>24&255}i=0;a=0}else{i=o>>>24;a+=2}}if(n>=0){t[n--]=i;while(n>=0){t[n--]=0}}};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function y(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=e.words[n]>>>i&1}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this._strip()};i.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this._strip()};i.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this._strip()};i.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var n=Math.ceil(t/26)|0;var i=t%26;this._expand(n);if(i>0){n--}for(var s=0;s<n;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this._strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,n){r(typeof t==="number"&&t>=0);var i=t/26|0;var s=t%26;this._expand(i+1);if(n){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this._strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=t}else{i=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this._strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var s=t.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var l=f&67108863;var h=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;i=e.words[p]|0;s=t.words[d]|0;a=i*s+l;u+=a/67108864|0;l=a&67108863}r.words[c]=l|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r._strip()}var g=function e(t,r,n){var i=t.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var l=i[0]|0;var h=l&8191;var d=l>>>13;var p=i[1]|0;var y=p&8191;var m=p>>>13;var g=i[2]|0;var b=g&8191;var v=g>>>13;var w=i[3]|0;var A=w&8191;var E=w>>>13;var _=i[4]|0;var S=_&8191;var $=_>>>13;var T=i[5]|0;var C=T&8191;var P=T>>>13;var x=i[6]|0;var I=x&8191;var k=x>>>13;var N=i[7]|0;var R=N&8191;var M=N>>>13;var O=i[8]|0;var B=O&8191;var D=O>>>13;var U=i[9]|0;var L=U&8191;var F=U>>>13;var j=s[0]|0;var H=j&8191;var K=j>>>13;var G=s[1]|0;var V=G&8191;var z=G>>>13;var W=s[2]|0;var X=W&8191;var Y=W>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ne=re&8191;var ie=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var le=s[8]|0;var he=le&8191;var de=le>>>13;var pe=s[9]|0;var ye=pe&8191;var me=pe>>>13;n.negative=t.negative^r.negative;n.length=19;f=Math.imul(h,H);c=Math.imul(h,K);c=c+Math.imul(d,H)|0;u=Math.imul(d,K);var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(y,H);c=Math.imul(y,K);c=c+Math.imul(m,H)|0;u=Math.imul(m,K);f=f+Math.imul(h,V)|0;c=c+Math.imul(h,z)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,z)|0;var be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(be>>>26)|0;be&=67108863;f=Math.imul(b,H);c=Math.imul(b,K);c=c+Math.imul(v,H)|0;u=Math.imul(v,K);f=f+Math.imul(y,V)|0;c=c+Math.imul(y,z)|0;c=c+Math.imul(m,V)|0;u=u+Math.imul(m,z)|0;f=f+Math.imul(h,X)|0;c=c+Math.imul(h,Y)|0;c=c+Math.imul(d,X)|0;u=u+Math.imul(d,Y)|0;var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(A,H);c=Math.imul(A,K);c=c+Math.imul(E,H)|0;u=Math.imul(E,K);f=f+Math.imul(b,V)|0;c=c+Math.imul(b,z)|0;c=c+Math.imul(v,V)|0;u=u+Math.imul(v,z)|0;f=f+Math.imul(y,X)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(m,X)|0;u=u+Math.imul(m,Y)|0;f=f+Math.imul(h,q)|0;c=c+Math.imul(h,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(S,H);c=Math.imul(S,K);c=c+Math.imul($,H)|0;u=Math.imul($,K);f=f+Math.imul(A,V)|0;c=c+Math.imul(A,z)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,z)|0;f=f+Math.imul(b,X)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(v,X)|0;u=u+Math.imul(v,Y)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(C,H);c=Math.imul(C,K);c=c+Math.imul(P,H)|0;u=Math.imul(P,K);f=f+Math.imul(S,V)|0;c=c+Math.imul(S,z)|0;c=c+Math.imul($,V)|0;u=u+Math.imul($,z)|0;f=f+Math.imul(A,X)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,X)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(v,q)|0;u=u+Math.imul(v,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(d,ne)|0;u=u+Math.imul(d,ie)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(I,H);c=Math.imul(I,K);c=c+Math.imul(k,H)|0;u=Math.imul(k,K);f=f+Math.imul(C,V)|0;c=c+Math.imul(C,z)|0;c=c+Math.imul(P,V)|0;u=u+Math.imul(P,z)|0;f=f+Math.imul(S,X)|0;c=c+Math.imul(S,Y)|0;c=c+Math.imul($,X)|0;u=u+Math.imul($,Y)|0;f=f+Math.imul(A,q)|0;c=c+Math.imul(A,Q)|0;c=c+Math.imul(E,q)|0;u=u+Math.imul(E,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;f=f+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(m,ne)|0;u=u+Math.imul(m,ie)|0;f=f+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(R,H);c=Math.imul(R,K);c=c+Math.imul(M,H)|0;u=Math.imul(M,K);f=f+Math.imul(I,V)|0;c=c+Math.imul(I,z)|0;c=c+Math.imul(k,V)|0;u=u+Math.imul(k,z)|0;f=f+Math.imul(C,X)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(P,X)|0;u=u+Math.imul(P,Y)|0;f=f+Math.imul(S,q)|0;c=c+Math.imul(S,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(A,ee)|0;c=c+Math.imul(A,te)|0;c=c+Math.imul(E,ee)|0;u=u+Math.imul(E,te)|0;f=f+Math.imul(b,ne)|0;c=c+Math.imul(b,ie)|0;c=c+Math.imul(v,ne)|0;u=u+Math.imul(v,ie)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(h,ce)|0;c=c+Math.imul(h,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(B,H);c=Math.imul(B,K);c=c+Math.imul(D,H)|0;u=Math.imul(D,K);f=f+Math.imul(R,V)|0;c=c+Math.imul(R,z)|0;c=c+Math.imul(M,V)|0;u=u+Math.imul(M,z)|0;f=f+Math.imul(I,X)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(k,X)|0;u=u+Math.imul(k,Y)|0;f=f+Math.imul(C,q)|0;c=c+Math.imul(C,Q)|0;c=c+Math.imul(P,q)|0;u=u+Math.imul(P,Q)|0;f=f+Math.imul(S,ee)|0;c=c+Math.imul(S,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(A,ne)|0;c=c+Math.imul(A,ie)|0;c=c+Math.imul(E,ne)|0;u=u+Math.imul(E,ie)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(v,ae)|0;u=u+Math.imul(v,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(h,he)|0;c=c+Math.imul(h,de)|0;c=c+Math.imul(d,he)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(L,H);c=Math.imul(L,K);c=c+Math.imul(F,H)|0;u=Math.imul(F,K);f=f+Math.imul(B,V)|0;c=c+Math.imul(B,z)|0;c=c+Math.imul(D,V)|0;u=u+Math.imul(D,z)|0;f=f+Math.imul(R,X)|0;c=c+Math.imul(R,Y)|0;c=c+Math.imul(M,X)|0;u=u+Math.imul(M,Y)|0;f=f+Math.imul(I,q)|0;c=c+Math.imul(I,Q)|0;c=c+Math.imul(k,q)|0;u=u+Math.imul(k,Q)|0;f=f+Math.imul(C,ee)|0;c=c+Math.imul(C,te)|0;c=c+Math.imul(P,ee)|0;u=u+Math.imul(P,te)|0;f=f+Math.imul(S,ne)|0;c=c+Math.imul(S,ie)|0;c=c+Math.imul($,ne)|0;u=u+Math.imul($,ie)|0;f=f+Math.imul(A,ae)|0;c=c+Math.imul(A,oe)|0;c=c+Math.imul(E,ae)|0;u=u+Math.imul(E,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(v,ce)|0;u=u+Math.imul(v,ue)|0;f=f+Math.imul(y,he)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(m,he)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(h,ye)|0;c=c+Math.imul(h,me)|0;c=c+Math.imul(d,ye)|0;u=u+Math.imul(d,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(L,V);c=Math.imul(L,z);c=c+Math.imul(F,V)|0;u=Math.imul(F,z);f=f+Math.imul(B,X)|0;c=c+Math.imul(B,Y)|0;c=c+Math.imul(D,X)|0;u=u+Math.imul(D,Y)|0;f=f+Math.imul(R,q)|0;c=c+Math.imul(R,Q)|0;c=c+Math.imul(M,q)|0;u=u+Math.imul(M,Q)|0;f=f+Math.imul(I,ee)|0;c=c+Math.imul(I,te)|0;c=c+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;f=f+Math.imul(C,ne)|0;c=c+Math.imul(C,ie)|0;c=c+Math.imul(P,ne)|0;u=u+Math.imul(P,ie)|0;f=f+Math.imul(S,ae)|0;c=c+Math.imul(S,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(A,ce)|0;c=c+Math.imul(A,ue)|0;c=c+Math.imul(E,ce)|0;u=u+Math.imul(E,ue)|0;f=f+Math.imul(b,he)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(v,he)|0;u=u+Math.imul(v,de)|0;f=f+Math.imul(y,ye)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(m,ye)|0;u=u+Math.imul(m,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(L,X);c=Math.imul(L,Y);c=c+Math.imul(F,X)|0;u=Math.imul(F,Y);f=f+Math.imul(B,q)|0;c=c+Math.imul(B,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(R,ee)|0;c=c+Math.imul(R,te)|0;c=c+Math.imul(M,ee)|0;u=u+Math.imul(M,te)|0;f=f+Math.imul(I,ne)|0;c=c+Math.imul(I,ie)|0;c=c+Math.imul(k,ne)|0;u=u+Math.imul(k,ie)|0;f=f+Math.imul(C,ae)|0;c=c+Math.imul(C,oe)|0;c=c+Math.imul(P,ae)|0;u=u+Math.imul(P,oe)|0;f=f+Math.imul(S,ce)|0;c=c+Math.imul(S,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(A,he)|0;c=c+Math.imul(A,de)|0;c=c+Math.imul(E,he)|0;u=u+Math.imul(E,de)|0;f=f+Math.imul(b,ye)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(v,ye)|0;u=u+Math.imul(v,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(L,q);c=Math.imul(L,Q);c=c+Math.imul(F,q)|0;u=Math.imul(F,Q);f=f+Math.imul(B,ee)|0;c=c+Math.imul(B,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(R,ne)|0;c=c+Math.imul(R,ie)|0;c=c+Math.imul(M,ne)|0;u=u+Math.imul(M,ie)|0;f=f+Math.imul(I,ae)|0;c=c+Math.imul(I,oe)|0;c=c+Math.imul(k,ae)|0;u=u+Math.imul(k,oe)|0;f=f+Math.imul(C,ce)|0;c=c+Math.imul(C,ue)|0;c=c+Math.imul(P,ce)|0;u=u+Math.imul(P,ue)|0;f=f+Math.imul(S,he)|0;c=c+Math.imul(S,de)|0;c=c+Math.imul($,he)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(A,ye)|0;c=c+Math.imul(A,me)|0;c=c+Math.imul(E,ye)|0;u=u+Math.imul(E,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(L,ee);c=Math.imul(L,te);c=c+Math.imul(F,ee)|0;u=Math.imul(F,te);f=f+Math.imul(B,ne)|0;c=c+Math.imul(B,ie)|0;c=c+Math.imul(D,ne)|0;u=u+Math.imul(D,ie)|0;f=f+Math.imul(R,ae)|0;c=c+Math.imul(R,oe)|0;c=c+Math.imul(M,ae)|0;u=u+Math.imul(M,oe)|0;f=f+Math.imul(I,ce)|0;c=c+Math.imul(I,ue)|0;c=c+Math.imul(k,ce)|0;u=u+Math.imul(k,ue)|0;f=f+Math.imul(C,he)|0;c=c+Math.imul(C,de)|0;c=c+Math.imul(P,he)|0;u=u+Math.imul(P,de)|0;f=f+Math.imul(S,ye)|0;c=c+Math.imul(S,me)|0;c=c+Math.imul($,ye)|0;u=u+Math.imul($,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(L,ne);c=Math.imul(L,ie);c=c+Math.imul(F,ne)|0;u=Math.imul(F,ie);f=f+Math.imul(B,ae)|0;c=c+Math.imul(B,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(R,ce)|0;c=c+Math.imul(R,ue)|0;c=c+Math.imul(M,ce)|0;u=u+Math.imul(M,ue)|0;f=f+Math.imul(I,he)|0;c=c+Math.imul(I,de)|0;c=c+Math.imul(k,he)|0;u=u+Math.imul(k,de)|0;f=f+Math.imul(C,ye)|0;c=c+Math.imul(C,me)|0;c=c+Math.imul(P,ye)|0;u=u+Math.imul(P,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(L,ae);c=Math.imul(L,oe);c=c+Math.imul(F,ae)|0;u=Math.imul(F,oe);f=f+Math.imul(B,ce)|0;c=c+Math.imul(B,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(R,he)|0;c=c+Math.imul(R,de)|0;c=c+Math.imul(M,he)|0;u=u+Math.imul(M,de)|0;f=f+Math.imul(I,ye)|0;c=c+Math.imul(I,me)|0;c=c+Math.imul(k,ye)|0;u=u+Math.imul(k,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(L,ce);c=Math.imul(L,ue);c=c+Math.imul(F,ce)|0;u=Math.imul(F,ue);f=f+Math.imul(B,he)|0;c=c+Math.imul(B,de)|0;c=c+Math.imul(D,he)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(R,ye)|0;c=c+Math.imul(R,me)|0;c=c+Math.imul(M,ye)|0;u=u+Math.imul(M,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(L,he);c=Math.imul(L,de);c=c+Math.imul(F,he)|0;u=Math.imul(F,de);f=f+Math.imul(B,ye)|0;c=c+Math.imul(B,me)|0;c=c+Math.imul(D,ye)|0;u=u+Math.imul(D,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(L,ye);c=Math.imul(L,me);c=c+Math.imul(F,ye)|0;u=Math.imul(F,me);var Oe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;a[0]=ge;a[1]=be;a[2]=ve;a[3]=we;a[4]=Ae;a[5]=Ee;a[6]=_e;a[7]=Se;a[8]=$e;a[9]=Te;a[10]=Ce;a[11]=Pe;a[12]=xe;a[13]=Ie;a[14]=ke;a[15]=Ne;a[16]=Re;a[17]=Me;a[18]=Oe;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){g=m}function b(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var l=e.words[u]|0;var h=t.words[c]|0;var d=l*h;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r._strip()}function v(e,t,r){return b(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=g(this,t,r)}else if(i<63){n=m(this,t,r)}else if(i<1024){n=b(this,t,r)}else{n=v(this,t,r)}return n};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return v(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){var n=t<0;if(n)t=-t;r(typeof t==="number");r(t<67108864);var i=0;for(var s=0;s<this.length;s++){var a=(this.words[s]|0)*t;var o=(a&67108863)+(i&67108863);i>>=26;i+=a/67108864|0;i+=o>>>26;this.words[s]=o&67108863}if(i!==0){this.words[s]=i;this.length++}return n?this.ineg():this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=y(t);if(r.length===0)return new i(1);var n=this;for(var s=0;s<r.length;s++,n=n.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=n.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;n=n.mul(a)}}return n};i.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=67108863>>>26-n<<26-n;var a;if(n!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<n;this.words[a]=c|o;o=f>>>26-n}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this._strip()};i.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,n,i){r(typeof t==="number"&&t>=0);var s;if(n){s=(n-n%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=s);u--){var h=this.words[u]|0;this.words[u]=l<<26-a|h>>>a;l=h&f}if(c&&l!==0){c.words[c.length++]=l}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};i.prototype.ishrn=function e(t,n,i){r(this.negative===0);return this.iushrn(t,n,i)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};i.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(n!==0){i++}this.length=Math.min(i,this.length);if(n!==0){var s=67108863^67108863>>>n<<n;this.words[this.length-1]&=s}return this._strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var n=0;n<this.length&&this.words[n]<0;n++){this.words[n]+=67108864;this.words[n+1]-=1}}return this._strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,n,i){var s=t.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+i]|0)+f;var c=(t.words[a]|0)*n;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this._strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this._strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);s.iushln(n);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new i(null);u.length=c+1;u.words=new Array(u.length);for(var l=0;l<u.length;l++){u.words[l]=0}}var h=s.clone()._ishlnsubmul(a,1,c);if(h.negative===0){s=h;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u._strip()}s._strip();if(r!=="div"&&n!==0){s.iushrn(n)}return{div:u||null,mod:s}};i.prototype.divmod=function e(t,n,s){r(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,n);if(n!=="mod"){a=f.div.neg()}if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),n);if(n!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),n);if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(n==="div"){return{div:this.divn(t.words[0]),mod:null}}if(n==="mod"){return{div:null,mod:new i(this.modrn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}}return this._wordDiv(t,n)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var s=t.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modrn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=(1<<26)%t;var s=0;for(var a=this.length-1;a>=0;a--){s=(i*s+(this.words[a]|0))%t}return n?-s:s};i.prototype.modn=function e(t){return this.modrn(t)};i.prototype.idivn=function e(t){var n=t<0;if(n)t=-t;r(t<=67108863);var i=0;for(var s=this.length-1;s>=0;s--){var a=(this.words[s]|0)+i*67108864;this.words[s]=a/t|0;i=a%t}this._strip();return n?this.ineg():this};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=new i(0);var c=new i(1);var u=0;while(n.isEven()&&s.isEven()){n.iushrn(1);s.iushrn(1);++u}var l=s.clone();var h=n.clone();while(!n.isZero()){for(var d=0,p=1;(n.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){n.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(l);o.isub(h)}a.iushrn(1);o.iushrn(1)}}for(var y=0,m=1;(s.words[0]&m)===0&&y<26;++y,m<<=1);if(y>0){s.iushrn(y);while(y-- >0){if(f.isOdd()||c.isOdd()){f.iadd(l);c.isub(h)}f.iushrn(1);c.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(f);o.isub(c)}else{s.isub(n);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};i.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=s.clone();while(n.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(n.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var l=0,h=1;(s.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){s.iushrn(l);while(l-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(o)}else{s.isub(n);o.isub(a)}}var d;if(n.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){r(typeof t==="number");var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var n=t<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this._strip();var i;if(this.length>1){i=1}else{if(n){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;i=s===t?0:s<t?-1:1}if(this.negative!==0)return-i|0;return i};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=t.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new T(t)};i.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function A(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}A.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};A.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};A.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};A.prototype.imulK=function e(t){return t.imul(this.k)};function E(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(E,A);E.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var s=0;s<i;s++){r.words[s]=t.words[s]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};E.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function _(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(_,A);function S(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(S,A);function $(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n($,A);$.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var s=i&67108863;i>>>=26;t.words[n]=s;r=i}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(w[t])return w[t];var e;if(t==="k256"){e=new E}else if(t==="p224"){e=new _}else if(t==="p192"){e=new S}else if(t==="p25519"){e=new $}else{throw new Error("Unknown prime "+t)}w[t]=e;return e};function T(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}T.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};T.prototype._verify2=function e(t,n){r((t.negative|n.negative)===0,"red works only with positives");r(t.red&&t.red===n.red,"red works only with red numbers")};T.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);c(t,t.umod(this.m)._forceRed(this));return t};T.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};T.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};T.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};T.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};T.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};T.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};T.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};T.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};T.prototype.isqr=function e(t){return this.imul(t,t.clone())};T.prototype.sqr=function e(t){return this.mul(t,t)};T.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var n=this.m.andln(3);r(n%2===1);if(n===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new i(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var l=this.m.bitLength();l=new i(2*l*l).toRed(this);while(this.pow(l,u).cmp(c)!==0){l.redIAdd(c)}var h=this.pow(l,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var y=o;while(p.cmp(f)!==0){var m=p;for(var g=0;m.cmp(f)!==0;g++){m=m.redSqr()}r(g<y);var b=this.pow(h,new i(1).iushln(y-g-1));d=d.redMul(b);h=b.redSqr();p=p.redMul(h);y=g}return d};T.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};T.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var s=new Array(1<<n);s[0]=new i(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var l=r.words[a];for(var h=u-1;h>=0;h--){var d=l>>h&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||h!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};T.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};T.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new C(t)};function C(e){T.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}n(C,T);C.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};C.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};C.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};C.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var s=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};C.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));const version$p="logger/5.7.0";let _permanentCensorErrors=false;let _censorErrors=false;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels["default"];let _globalLogger=null;function _checkNormalize(){try{const e=[];["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test".normalize(t)!=="test"){throw new Error("bad normalize")}}catch(r){e.push(t)}}));if(e.length){throw new Error("missing "+e.join(", "))}if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769)){throw new Error("broken implementation")}}catch(e){return e.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(e){e["DEBUG"]="DEBUG";e["INFO"]="INFO";e["WARNING"]="WARNING";e["ERROR"]="ERROR";e["OFF"]="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(e){e["UNKNOWN_ERROR"]="UNKNOWN_ERROR";e["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED";e["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION";e["NETWORK_ERROR"]="NETWORK_ERROR";e["SERVER_ERROR"]="SERVER_ERROR";e["TIMEOUT"]="TIMEOUT";e["BUFFER_OVERRUN"]="BUFFER_OVERRUN";e["NUMERIC_FAULT"]="NUMERIC_FAULT";e["MISSING_NEW"]="MISSING_NEW";e["INVALID_ARGUMENT"]="INVALID_ARGUMENT";e["MISSING_ARGUMENT"]="MISSING_ARGUMENT";e["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT";e["CALL_EXCEPTION"]="CALL_EXCEPTION";e["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS";e["NONCE_EXPIRED"]="NONCE_EXPIRED";e["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED";e["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT";e["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED";e["ACTION_REJECTED"]="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:true,value:e,writable:false})}_log(e,t){const r=e.toLowerCase();if(LogLevels[r]==null){this.throwArgumentError("invalid log level name","logLevel",e)}if(_logLevel>LogLevels[r]){return}console.log.apply(console,t)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,t,r){if(_censorErrors){return this.makeError("censored error",t,{})}if(!t){t=Logger.errors.UNKNOWN_ERROR}if(!r){r={}}const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++){r+=HEX[t[e]>>4];r+=HEX[t[e]&15]}n.push(e+"=Uint8Array(0x"+r+")")}else{n.push(e+"="+JSON.stringify(t))}}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}}));n.push(`code=${t}`);n.push(`version=${this.version}`);const i=e;let s="";switch(t){case ErrorCode.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:s=t;break}if(s){e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"}if(n.length){e+=" ("+n.join(", ")+")"}const a=new Error(e);a.reason=i;a.code=t;Object.keys(r).forEach((function(e){a[e]=r[e]}));return a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){if(!!e){return}this.throwError(t,r,n)}assertArgument(e,t,r,n){if(!!e){return}this.throwArgumentError(t,r,n)}checkNormalize(e){if(_normalizeError){this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}}checkSafeUint53(e,t){if(typeof e!=="number"){return}if(t==null){t="value not safe"}if(e<0||e>=9007199254740991){this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e})}if(e%1){this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e})}}checkArgumentCount(e,t,r){if(r){r=": "+r}else{r=""}if(e<t){this.throwError("missing argument"+r,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:t})}if(e>t){this.throwError("too many arguments"+r,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}}checkNew(e,t){if(e===Object||e==null){this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}}checkAbstract(e,t){if(e===t){this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"})}else if(e===Object||e==null){this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}}static globalLogger(){if(!_globalLogger){_globalLogger=new Logger(version$p)}return _globalLogger}static setCensorship(e,t){if(!e&&t){this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}if(_permanentCensorErrors){if(!e){return}this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e;_permanentCensorErrors=!!t}static setLogLevel(e){const t=LogLevels[e.toLowerCase()];if(t==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=t}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const lib_esm$l=Object.freeze({__proto__:null,get LogLevel(){return LogLevel},get ErrorCode(){return ErrorCode},Logger});const version$o="bytes/5.7.0";const logger$J=new Logger(version$o);function isHexable(e){return!!e.toHexString}function addSlice(e){if(e.slice){return e}e.slice=function(){const t=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(e,t)))};return e}function isBytesLike(e){return isHexString(e)&&!(e.length%2)||isBytes(e)}function isInteger(e){return typeof e==="number"&&e==e&&e%1===0}function isBytes(e){if(e==null){return false}if(e.constructor===Uint8Array){return true}if(typeof e==="string"){return false}if(!isInteger(e.length)||e.length<0){return false}for(let t=0;t<e.length;t++){const r=e[t];if(!isInteger(r)||r<0||r>=256){return false}}return true}function arrayify(e,t){if(!t){t={}}if(typeof e==="number"){logger$J.checkSafeUint53(e,"invalid arrayify value");const t=[];while(e){t.unshift(e&255);e=parseInt(String(e/256))}if(t.length===0){t.push(0)}return addSlice(new Uint8Array(t))}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable(e)){e=e.toHexString()}if(isHexString(e)){let r=e.substring(2);if(r.length%2){if(t.hexPad==="left"){r="0"+r}else if(t.hexPad==="right"){r+="0"}else{logger$J.throwArgumentError("hex data is odd-length","value",e)}}const n=[];for(let e=0;e<r.length;e+=2){n.push(parseInt(r.substring(e,e+2),16))}return addSlice(new Uint8Array(n))}if(isBytes(e)){return addSlice(new Uint8Array(e))}return logger$J.throwArgumentError("invalid arrayify value","value",e)}function concat$2(e){const t=e.map((e=>arrayify(e)));const r=t.reduce(((e,t)=>e+t.length),0);const n=new Uint8Array(r);t.reduce(((e,t)=>{n.set(t,e);return e+t.length}),0);return addSlice(n)}function stripZeros(e){let t=arrayify(e);if(t.length===0){return t}let r=0;while(r<t.length&&t[r]===0){r++}if(r){t=t.slice(r)}return t}function zeroPad(e,t){e=arrayify(e);if(e.length>t){logger$J.throwArgumentError("value out of range","value",arguments[0])}const r=new Uint8Array(t);r.set(e,t-e.length);return addSlice(r)}function isHexString(e,t){if(typeof e!=="string"||!e.match(/^0x[0-9A-Fa-f]*$/)){return false}if(t&&e.length!==2+2*t){return false}return true}const HexCharacters="0123456789abcdef";function hexlify(e,t){if(!t){t={}}if(typeof e==="number"){logger$J.checkSafeUint53(e,"invalid hexlify value");let t="";while(e){t=HexCharacters[e&15]+t;e=Math.floor(e/16)}if(t.length){if(t.length%2){t="0"+t}return"0x"+t}return"0x00"}if(typeof e==="bigint"){e=e.toString(16);if(e.length%2){return"0x0"+e}return"0x"+e}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable(e)){return e.toHexString()}if(isHexString(e)){if(e.length%2){if(t.hexPad==="left"){e="0x0"+e.substring(2)}else if(t.hexPad==="right"){e+="0"}else{logger$J.throwArgumentError("hex data is odd-length","value",e)}}return e.toLowerCase()}if(isBytes(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=HexCharacters[(n&240)>>4]+HexCharacters[n&15]}return t}return logger$J.throwArgumentError("invalid hexlify value","value",e)}function hexDataLength(e){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)||e.length%2){return null}return(e.length-2)/2}function hexDataSlice(e,t,r){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)||e.length%2){logger$J.throwArgumentError("invalid hexData","value",e)}t=2+2*t;if(r!=null){return"0x"+e.substring(t,2+2*r)}return"0x"+e.substring(t)}function hexConcat(e){let t="0x";e.forEach((e=>{t+=hexlify(e).substring(2)}));return t}function hexValue(e){const t=hexStripZeros(hexlify(e,{hexPad:"left"}));if(t==="0x"){return"0x0"}return t}function hexStripZeros(e){if(typeof e!=="string"){e=hexlify(e)}if(!isHexString(e)){logger$J.throwArgumentError("invalid hex string","value",e)}e=e.substring(2);let t=0;while(t<e.length&&e[t]==="0"){t++}return"0x"+e.substring(t)}function hexZeroPad(e,t){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)){logger$J.throwArgumentError("invalid hex string","value",e)}if(e.length>2*t+2){logger$J.throwArgumentError("value out of range","value",arguments[1])}while(e.length<2*t+2){e="0x0"+e.substring(2)}return e}function splitSignature(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(e)){let r=arrayify(e);if(r.length===64){t.v=27+(r[32]>>7);r[32]&=127;t.r=hexlify(r.slice(0,32));t.s=hexlify(r.slice(32,64))}else if(r.length===65){t.r=hexlify(r.slice(0,32));t.s=hexlify(r.slice(32,64));t.v=r[64]}else{logger$J.throwArgumentError("invalid signature string","signature",e)}if(t.v<27){if(t.v===0||t.v===1){t.v+=27}else{logger$J.throwArgumentError("signature invalid v byte","signature",e)}}t.recoveryParam=1-t.v%2;if(t.recoveryParam){r[32]|=128}t._vs=hexlify(r.slice(32,64))}else{t.r=e.r;t.s=e.s;t.v=e.v;t.recoveryParam=e.recoveryParam;t._vs=e._vs;if(t._vs!=null){const r=zeroPad(arrayify(t._vs),32);t._vs=hexlify(r);const n=r[0]>=128?1:0;if(t.recoveryParam==null){t.recoveryParam=n}else if(t.recoveryParam!==n){logger$J.throwArgumentError("signature recoveryParam mismatch _vs","signature",e)}r[0]&=127;const i=hexlify(r);if(t.s==null){t.s=i}else if(t.s!==i){logger$J.throwArgumentError("signature v mismatch _vs","signature",e)}}if(t.recoveryParam==null){if(t.v==null){logger$J.throwArgumentError("signature missing v and recoveryParam","signature",e)}else if(t.v===0||t.v===1){t.recoveryParam=t.v}else{t.recoveryParam=1-t.v%2}}else{if(t.v==null){t.v=27+t.recoveryParam}else{const r=t.v===0||t.v===1?t.v:1-t.v%2;if(t.recoveryParam!==r){logger$J.throwArgumentError("signature recoveryParam mismatch v","signature",e)}}}if(t.r==null||!isHexString(t.r)){logger$J.throwArgumentError("signature missing or invalid r","signature",e)}else{t.r=hexZeroPad(t.r,32)}if(t.s==null||!isHexString(t.s)){logger$J.throwArgumentError("signature missing or invalid s","signature",e)}else{t.s=hexZeroPad(t.s,32)}const r=arrayify(t.s);if(r[0]>=128){logger$J.throwArgumentError("signature s out of range","signature",e)}if(t.recoveryParam){r[0]|=128}const n=hexlify(r);if(t._vs){if(!isHexString(t._vs)){logger$J.throwArgumentError("signature invalid _vs","signature",e)}t._vs=hexZeroPad(t._vs,32)}if(t._vs==null){t._vs=n}else if(t._vs!==n){logger$J.throwArgumentError("signature _vs mismatch v and s","signature",e)}}t.yParityAndS=t._vs;t.compact=t.r+t.yParityAndS.substring(2);return t}function joinSignature(e){e=splitSignature(e);return hexlify(concat$2([e.r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}const lib_esm$k=Object.freeze({__proto__:null,isBytesLike,isBytes,arrayify,concat:concat$2,stripZeros,zeroPad,isHexString,hexlify,hexDataLength,hexDataSlice,hexConcat,hexValue,hexStripZeros,hexZeroPad,splitSignature,joinSignature});const version$n="bignumber/5.7.0";var BN=bn$1.BN;const logger$I=new Logger(version$n);const _constructorGuard$4={};const MAX_SAFE=9007199254740991;function isBigNumberish(e){return e!=null&&(BigNumber$1.isBigNumber(e)||typeof e==="number"&&e%1===0||typeof e==="string"&&!!e.match(/^-?[0-9]+$/)||isHexString(e)||typeof e==="bigint"||isBytes(e))}let _warnedToStringRadix=false;class BigNumber$1{constructor(e,t){if(e!==_constructorGuard$4){logger$I.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"})}this._hex=t;this._isBigNumber=true;Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){if(this._hex[0]==="-"){return BigNumber$1.from(this._hex.substring(1))}return this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){const t=BigNumber$1.from(e);if(t.isZero()){throwFault$1("division-by-zero","div")}return toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const t=toBN(e);if(t.isNeg()){throwFault$1("division-by-zero","mod")}return toBigNumber(toBN(this).umod(t))}pow(e){const t=toBN(e);if(t.isNeg()){throwFault$1("negative-power","pow")}return toBigNumber(toBN(this).pow(t))}and(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault$1("unbound-bitwise-result","and")}return toBigNumber(toBN(this).and(t))}or(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault$1("unbound-bitwise-result","or")}return toBigNumber(toBN(this).or(t))}xor(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault$1("unbound-bitwise-result","xor")}return toBigNumber(toBN(this).xor(t))}mask(e){if(this.isNegative()||e<0){throwFault$1("negative-width","mask")}return toBigNumber(toBN(this).maskn(e))}shl(e){if(this.isNegative()||e<0){throwFault$1("negative-width","shl")}return toBigNumber(toBN(this).shln(e))}shr(e){if(this.isNegative()||e<0){throwFault$1("negative-width","shr")}return toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch(e){throwFault$1("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return logger$I.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){if(arguments.length>0){if(arguments[0]===10){if(!_warnedToStringRadix){_warnedToStringRadix=true;logger$I.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")}}else if(arguments[0]===16){logger$I.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{})}else{logger$I.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})}}return toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber$1){return e}if(typeof e==="string"){if(e.match(/^-?0x[0-9a-f]+$/i)){return new BigNumber$1(_constructorGuard$4,toHex$2(e))}if(e.match(/^-?[0-9]+$/)){return new BigNumber$1(_constructorGuard$4,toHex$2(new BN(e)))}return logger$I.throwArgumentError("invalid BigNumber string","value",e)}if(typeof e==="number"){if(e%1){throwFault$1("underflow","BigNumber.from",e)}if(e>=MAX_SAFE||e<=-MAX_SAFE){throwFault$1("overflow","BigNumber.from",e)}return BigNumber$1.from(String(e))}const t=e;if(typeof t==="bigint"){return BigNumber$1.from(t.toString())}if(isBytes(t)){return BigNumber$1.from(hexlify(t))}if(t){if(t.toHexString){const e=t.toHexString();if(typeof e==="string"){return BigNumber$1.from(e)}}else{let e=t._hex;if(e==null&&t.type==="BigNumber"){e=t.hex}if(typeof e==="string"){if(isHexString(e)||e[0]==="-"&&isHexString(e.substring(1))){return BigNumber$1.from(e)}}}}return logger$I.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex$2(e){if(typeof e!=="string"){return toHex$2(e.toString(16))}if(e[0]==="-"){e=e.substring(1);if(e[0]==="-"){logger$I.throwArgumentError("invalid hex","value",e)}e=toHex$2(e);if(e==="0x00"){return e}return"-"+e}if(e.substring(0,2)!=="0x"){e="0x"+e}if(e==="0x"){return"0x00"}if(e.length%2){e="0x0"+e.substring(2)}while(e.length>4&&e.substring(0,4)==="0x00"){e="0x"+e.substring(4)}return e}function toBigNumber(e){return BigNumber$1.from(toHex$2(e))}function toBN(e){const t=BigNumber$1.from(e).toHexString();if(t[0]==="-"){return new BN("-"+t.substring(3),16)}return new BN(t.substring(2),16)}function throwFault$1(e,t,r){const n={fault:e,operation:t};if(r!=null){n.value=r}return logger$I.throwError(e,Logger.errors.NUMERIC_FAULT,n)}function _base36To16(e){return new BN(e,36).toString(16)}function _base16To36(e){return new BN(e,16).toString(36)}const logger$H=new Logger(version$n);const _constructorGuard$3={};const Zero$2=BigNumber$1.from(0);const NegativeOne$2=BigNumber$1.from(-1);function throwFault(e,t,r,n){const i={fault:t,operation:r};if(n!==undefined){i.value=n}return logger$H.throwError(e,Logger.errors.NUMERIC_FAULT,i)}let zeros="0";while(zeros.length<256){zeros+=zeros}function getMultiplier(e){if(typeof e!=="number"){try{e=BigNumber$1.from(e).toNumber()}catch(e){}}if(typeof e==="number"&&e>=0&&e<=256&&!(e%1)){return"1"+zeros.substring(0,e)}return logger$H.throwArgumentError("invalid decimal size","decimals",e)}function formatFixed(e,t){if(t==null){t=0}const r=getMultiplier(t);e=BigNumber$1.from(e);const n=e.lt(Zero$2);if(n){e=e.mul(NegativeOne$2)}let i=e.mod(r).toString();while(i.length<r.length-1){i="0"+i}i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=e.div(r).toString();if(r.length===1){e=s}else{e=s+"."+i}if(n){e="-"+e}return e}function parseFixed(e,t){if(t==null){t=0}const r=getMultiplier(t);if(typeof e!=="string"||!e.match(/^-?[0-9.]+$/)){logger$H.throwArgumentError("invalid decimal value","value",e)}const n=e.substring(0,1)==="-";if(n){e=e.substring(1)}if(e==="."){logger$H.throwArgumentError("missing value","value",e)}const i=e.split(".");if(i.length>2){logger$H.throwArgumentError("too many decimal points","value",e)}let s=i[0],a=i[1];if(!s){s="0"}if(!a){a="0"}while(a[a.length-1]==="0"){a=a.substring(0,a.length-1)}if(a.length>r.length-1){throwFault("fractional component exceeds decimals","underflow","parseFixed")}if(a===""){a="0"}while(a.length<r.length-1){a+="0"}const o=BigNumber$1.from(s);const f=BigNumber$1.from(a);let c=o.mul(r).add(f);if(n){c=c.mul(NegativeOne$2)}return c}class FixedFormat{constructor(e,t,r,n){if(e!==_constructorGuard$3){logger$H.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.signed=t;this.width=r;this.decimals=n;this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n);this._multiplier=getMultiplier(n);Object.freeze(this)}static from(e){if(e instanceof FixedFormat){return e}if(typeof e==="number"){e=`fixed128x${e}`}let t=true;let r=128;let n=18;if(typeof e==="string"){if(e==="fixed");else if(e==="ufixed"){t=false}else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);if(!i){logger$H.throwArgumentError("invalid fixed format","format",e)}t=i[1]!=="u";r=parseInt(i[2]);n=parseInt(i[3])}}else if(e){const i=(t,r,n)=>{if(e[t]==null){return n}if(typeof e[t]!==r){logger$H.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t])}return e[t]};t=i("signed","boolean",t);r=i("width","number",r);n=i("decimals","number",n)}if(r%8){logger$H.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r)}if(n>80){logger$H.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n)}return new FixedFormat(_constructorGuard$3,t,r,n)}}class FixedNumber{constructor(e,t,r,n){if(e!==_constructorGuard$3){logger$H.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"})}this.format=n;this._hex=t;this._value=r;this._isFixedNumber=true;Object.freeze(this)}_checkFormat(e){if(this.format.name!==e.format.name){logger$H.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}}addUnsafe(e){this._checkFormat(e);const t=parseFixed(this._value,this.format.decimals);const r=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=parseFixed(this._value,this.format.decimals);const r=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=parseFixed(this._value,this.format.decimals);const r=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=parseFixed(this._value,this.format.decimals);const r=parseFixed(e._value,e.format.decimals);return FixedNumber.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");if(e.length===1){e.push("0")}let t=FixedNumber.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);if(this.isNegative()&&r){t=t.subUnsafe(ONE.toFormat(t.format))}return t}ceiling(){const e=this.toString().split(".");if(e.length===1){e.push("0")}let t=FixedNumber.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);if(!this.isNegative()&&r){t=t.addUnsafe(ONE.toFormat(t.format))}return t}round(e){if(e==null){e=0}const t=this.toString().split(".");if(t.length===1){t.push("0")}if(e<0||e>80||e%1){logger$H.throwArgumentError("invalid decimal count","decimals",e)}if(t[1].length<=e){return this}const r=FixedNumber.from("1"+zeros.substring(0,e),this.format);const n=BUMP.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null){return this._hex}if(e%8){logger$H.throwArgumentError("invalid byte width","width",e)}const t=BigNumber$1.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return hexZeroPad(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return FixedNumber.fromString(this._value,e)}static fromValue(e,t,r){if(r==null&&t!=null&&!isBigNumberish(t)){r=t;t=null}if(t==null){t=0}if(r==null){r="fixed"}return FixedNumber.fromString(formatFixed(e,t),FixedFormat.from(r))}static fromString(e,t){if(t==null){t="fixed"}const r=FixedFormat.from(t);const n=parseFixed(e,r.decimals);if(!r.signed&&n.lt(Zero$2)){throwFault("unsigned value cannot be negative","overflow","value",e)}let i=null;if(r.signed){i=n.toTwos(r.width).toHexString()}else{i=n.toHexString();i=hexZeroPad(i,r.width/8)}const s=formatFixed(n,r.decimals);return new FixedNumber(_constructorGuard$3,i,s,r)}static fromBytes(e,t){if(t==null){t="fixed"}const r=FixedFormat.from(t);if(arrayify(e).length>r.width/8){throw new Error("overflow")}let n=BigNumber$1.from(e);if(r.signed){n=n.fromTwos(r.width)}const i=n.toTwos((r.signed?0:1)+r.width).toHexString();const s=formatFixed(n,r.decimals);return new FixedNumber(_constructorGuard$3,i,s,r)}static from(e,t){if(typeof e==="string"){return FixedNumber.fromString(e,t)}if(isBytes(e)){return FixedNumber.fromBytes(e,t)}try{return FixedNumber.fromValue(e,0,t)}catch(e){if(e.code!==Logger.errors.INVALID_ARGUMENT){throw e}}return logger$H.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const ONE=FixedNumber.from(1);const BUMP=FixedNumber.from("0.5");const version$m="properties/5.7.0";var __awaiter$h=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$G=new Logger(version$m);function defineReadOnly(e,t,r){Object.defineProperty(e,t,{enumerable:true,value:r,writable:false})}function getStatic(e,t){for(let r=0;r<32;r++){if(e[t]){return e[t]}if(!e.prototype||typeof e.prototype!=="object"){break}e=Object.getPrototypeOf(e.prototype).constructor}return null}function resolveProperties(e){return __awaiter$h(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));const r=yield Promise.all(t);return r.reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}))}function checkProperties(e,t){if(!e||typeof e!=="object"){logger$G.throwArgumentError("invalid object","object",e)}Object.keys(e).forEach((r=>{if(!t[r]){logger$G.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}}))}function shallowCopy(e){const t={};for(const r in e){t[r]=e[r]}return t}const opaque={bigint:true,boolean:true,function:true,number:true,string:true};function _isFrozen(e){if(e===undefined||e===null||opaque[typeof e]){return true}if(Array.isArray(e)||typeof e==="object"){if(!Object.isFrozen(e)){return false}const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!_isFrozen(n)){return false}}return true}return logger$G.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function _deepCopy(e){if(_isFrozen(e)){return e}if(Array.isArray(e)){return Object.freeze(e.map((e=>deepCopy(e))))}if(typeof e==="object"){const t={};for(const r in e){const n=e[r];if(n===undefined){continue}defineReadOnly(t,r,deepCopy(n))}return t}return logger$G.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function deepCopy(e){return _deepCopy(e)}class Description{constructor(e){for(const t in e){this[t]=deepCopy(e[t])}}}const lib_esm$j=Object.freeze({__proto__:null,defineReadOnly,getStatic,resolveProperties,checkProperties,shallowCopy,deepCopy,Description});const version$l="abi/5.7.0";const logger$F=new Logger(version$l);const _constructorGuard$2={};let ModifiersBytes={calldata:true,memory:true,storage:true};let ModifiersNest={calldata:true,memory:true};function checkModifier(e,t){if(e==="bytes"||e==="string"){if(ModifiersBytes[t]){return true}}else if(e==="address"){if(t==="payable"){return true}}else if(e.indexOf("[")>=0||e==="tuple"){if(ModifiersNest[t]){return true}}if(ModifiersBytes[t]||t==="payable"){logger$F.throwArgumentError("invalid modifier","name",t)}return false}function parseParamType(e,t){let r=e;function n(t){logger$F.throwArgumentError(`unexpected character at position ${t}`,"param",e)}e=e.replace(/\s/g," ");function i(e){let r={type:"",name:"",parent:e,state:{allowType:true}};if(t){r.indexed=false}return r}let s={type:"",name:"",state:{allowType:true}};let a=s;for(let r=0;r<e.length;r++){let s=e[r];switch(s){case"(":if(a.state.allowType&&a.type===""){a.type="tuple"}else if(!a.state.allowParams){n(r)}a.state.allowType=false;a.type=verifyType(a.type);a.components=[i(a)];a=a.components[0];break;case")":delete a.state;if(a.name==="indexed"){if(!t){n(r)}a.indexed=true;a.name=""}if(checkModifier(a.type,a.name)){a.name=""}a.type=verifyType(a.type);let e=a;a=a.parent;if(!a){n(r)}delete e.parent;a.state.allowParams=false;a.state.allowName=true;a.state.allowArray=true;break;case",":delete a.state;if(a.name==="indexed"){if(!t){n(r)}a.indexed=true;a.name=""}if(checkModifier(a.type,a.name)){a.name=""}a.type=verifyType(a.type);let o=i(a.parent);a.parent.components.push(o);delete a.parent;a=o;break;case" ":if(a.state.allowType){if(a.type!==""){a.type=verifyType(a.type);delete a.state.allowType;a.state.allowName=true;a.state.allowParams=true}}if(a.state.allowName){if(a.name!==""){if(a.name==="indexed"){if(!t){n(r)}if(a.indexed){n(r)}a.indexed=true;a.name=""}else if(checkModifier(a.type,a.name)){a.name=""}else{a.state.allowName=false}}}break;case"[":if(!a.state.allowArray){n(r)}a.type+=s;a.state.allowArray=false;a.state.allowName=false;a.state.readArray=true;break;case"]":if(!a.state.readArray){n(r)}a.type+=s;a.state.readArray=false;a.state.allowArray=true;a.state.allowName=true;break;default:if(a.state.allowType){a.type+=s;a.state.allowParams=true;a.state.allowArray=true}else if(a.state.allowName){a.name+=s;delete a.state.allowArray}else if(a.state.readArray){a.type+=s}else{n(r)}}}if(a.parent){logger$F.throwArgumentError("unexpected eof","param",e)}delete s.state;if(a.name==="indexed"){if(!t){n(r.length-7)}if(a.indexed){n(r.length-7)}a.indexed=true;a.name=""}else if(checkModifier(a.type,a.name)){a.name=""}s.type=verifyType(s.type);return s}function populate(e,t){for(let r in t){defineReadOnly(e,r,t[r])}}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"});const paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(e,t){if(e!==_constructorGuard$2){logger$F.throwError("use fromString",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"})}populate(this,t);let r=this.type.match(paramTypeArray);if(r){populate(this,{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ParamType.fromObject({type:r[1],components:this.components}),baseType:"array"})}else{populate(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type})}this._isParamType=true;Object.freeze(this)}format(e){if(!e){e=FormatTypes.sighash}if(!FormatTypes[e]){logger$F.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes.json){let t={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||undefined};if(typeof this.indexed==="boolean"){t.indexed=this.indexed}if(this.components){t.components=this.components.map((t=>JSON.parse(t.format(e))))}return JSON.stringify(t)}let t="";if(this.baseType==="array"){t+=this.arrayChildren.format(e);t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"}else{if(this.baseType==="tuple"){if(e!==FormatTypes.sighash){t+=this.type}t+="("+this.components.map((t=>t.format(e))).join(e===FormatTypes.full?", ":",")+")"}else{t+=this.type}}if(e!==FormatTypes.sighash){if(this.indexed===true){t+=" indexed"}if(e===FormatTypes.full&&this.name){t+=" "+this.name}}return t}static from(e,t){if(typeof e==="string"){return ParamType.fromString(e,t)}return ParamType.fromObject(e)}static fromObject(e){if(ParamType.isParamType(e)){return e}return new ParamType(_constructorGuard$2,{name:e.name||null,type:verifyType(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ParamType.fromObject):null})}static fromString(e,t){function r(e){return ParamType.fromObject({name:e.name,type:e.type,indexed:e.indexed,components:e.components})}return r(parseParamType(e,!!t))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function parseParams(e,t){return splitNesting(e).map((e=>ParamType.fromString(e,t)))}class Fragment{constructor(e,t){if(e!==_constructorGuard$2){logger$F.throwError("use a static from method",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"})}populate(this,t);this._isFragment=true;Object.freeze(this)}static from(e){if(Fragment.isFragment(e)){return e}if(typeof e==="string"){return Fragment.fromString(e)}return Fragment.fromObject(e)}static fromObject(e){if(Fragment.isFragment(e)){return e}switch(e.type){case"function":return FunctionFragment.fromObject(e);case"event":return EventFragment.fromObject(e);case"constructor":return ConstructorFragment.fromObject(e);case"error":return ErrorFragment.fromObject(e);case"fallback":case"receive":return null}return logger$F.throwArgumentError("invalid fragment object","value",e)}static fromString(e){e=e.replace(/\s/g," ");e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ");e=e.trim();if(e.split(" ")[0]==="event"){return EventFragment.fromString(e.substring(5).trim())}else if(e.split(" ")[0]==="function"){return FunctionFragment.fromString(e.substring(8).trim())}else if(e.split("(")[0].trim()==="constructor"){return ConstructorFragment.fromString(e.trim())}else if(e.split(" ")[0]==="error"){return ErrorFragment.fromString(e.substring(5).trim())}return logger$F.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class EventFragment extends Fragment{format(e){if(!e){e=FormatTypes.sighash}if(!FormatTypes[e]){logger$F.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes.json){return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes.sighash){t+="event "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes.full?", ":",")+") ";if(e!==FormatTypes.sighash){if(this.anonymous){t+="anonymous "}}return t.trim()}static from(e){if(typeof e==="string"){return EventFragment.fromString(e)}return EventFragment.fromObject(e)}static fromObject(e){if(EventFragment.isEventFragment(e)){return e}if(e.type!=="event"){logger$F.throwArgumentError("invalid event object","value",e)}const t={name:verifyIdentifier(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],type:"event"};return new EventFragment(_constructorGuard$2,t)}static fromString(e){let t=e.match(regexParen);if(!t){logger$F.throwArgumentError("invalid event string","value",e)}let r=false;t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":r=true;break;case"":break;default:logger$F.warn("unknown modifier: "+e)}}));return EventFragment.fromObject({name:t[1].trim(),anonymous:r,inputs:parseParams(t[2],true),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function parseGas(e,t){t.gas=null;let r=e.split("@");if(r.length!==1){if(r.length>2){logger$F.throwArgumentError("invalid human-readable ABI signature","value",e)}if(!r[1].match(/^[0-9]+$/)){logger$F.throwArgumentError("invalid human-readable ABI signature gas","value",e)}t.gas=BigNumber$1.from(r[1]);return r[0]}return e}function parseModifiers(e,t){t.constant=false;t.payable=false;t.stateMutability="nonpayable";e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=true;break;case"payable":t.payable=true;t.stateMutability="payable";break;case"nonpayable":t.payable=false;t.stateMutability="nonpayable";break;case"pure":t.constant=true;t.stateMutability="pure";break;case"view":t.constant=true;t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function verifyState(e){let t={constant:false,payable:true,stateMutability:"payable"};if(e.stateMutability!=null){t.stateMutability=e.stateMutability;t.constant=t.stateMutability==="view"||t.stateMutability==="pure";if(e.constant!=null){if(!!e.constant!==t.constant){logger$F.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e)}}t.payable=t.stateMutability==="payable";if(e.payable!=null){if(!!e.payable!==t.payable){logger$F.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)}}}else if(e.payable!=null){t.payable=!!e.payable;if(e.constant==null&&!t.payable&&e.type!=="constructor"){logger$F.throwArgumentError("unable to determine stateMutability","value",e)}t.constant=!!e.constant;if(t.constant){t.stateMutability="view"}else{t.stateMutability=t.payable?"payable":"nonpayable"}if(t.payable&&t.constant){logger$F.throwArgumentError("cannot have constant payable function","value",e)}}else if(e.constant!=null){t.constant=!!e.constant;t.payable=!t.constant;t.stateMutability=t.constant?"view":"payable"}else if(e.type!=="constructor"){logger$F.throwArgumentError("unable to determine stateMutability","value",e)}return t}class ConstructorFragment extends Fragment{format(e){if(!e){e=FormatTypes.sighash}if(!FormatTypes[e]){logger$F.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes.json){return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}if(e===FormatTypes.sighash){logger$F.throwError("cannot format a constructor for sighash",Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"})}let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes.full?", ":",")+") ";if(this.stateMutability&&this.stateMutability!=="nonpayable"){t+=this.stateMutability+" "}return t.trim()}static from(e){if(typeof e==="string"){return ConstructorFragment.fromString(e)}return ConstructorFragment.fromObject(e)}static fromObject(e){if(ConstructorFragment.isConstructorFragment(e)){return e}if(e.type!=="constructor"){logger$F.throwArgumentError("invalid constructor object","value",e)}let t=verifyState(e);if(t.constant){logger$F.throwArgumentError("constructor cannot be constant","value",e)}const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$1.from(e.gas):null};return new ConstructorFragment(_constructorGuard$2,r)}static fromString(e){let t={type:"constructor"};e=parseGas(e,t);let r=e.match(regexParen);if(!r||r[1].trim()!=="constructor"){logger$F.throwArgumentError("invalid constructor string","value",e)}t.inputs=parseParams(r[2].trim(),false);parseModifiers(r[3].trim(),t);return ConstructorFragment.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class FunctionFragment extends ConstructorFragment{format(e){if(!e){e=FormatTypes.sighash}if(!FormatTypes[e]){logger$F.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes.json){return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes.sighash){t+="function "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes.full?", ":",")+") ";if(e!==FormatTypes.sighash){if(this.stateMutability){if(this.stateMutability!=="nonpayable"){t+=this.stateMutability+" "}}else if(this.constant){t+="view "}if(this.outputs&&this.outputs.length){t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "}if(this.gas!=null){t+="@"+this.gas.toString()+" "}}return t.trim()}static from(e){if(typeof e==="string"){return FunctionFragment.fromString(e)}return FunctionFragment.fromObject(e)}static fromObject(e){if(FunctionFragment.isFunctionFragment(e)){return e}if(e.type!=="function"){logger$F.throwArgumentError("invalid function object","value",e)}let t=verifyState(e);const r={type:e.type,name:verifyIdentifier(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(ParamType.fromObject):[],outputs:e.outputs?e.outputs.map(ParamType.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?BigNumber$1.from(e.gas):null};return new FunctionFragment(_constructorGuard$2,r)}static fromString(e){let t={type:"function"};e=parseGas(e,t);let r=e.split(" returns ");if(r.length>2){logger$F.throwArgumentError("invalid function string","value",e)}let n=r[0].match(regexParen);if(!n){logger$F.throwArgumentError("invalid function signature","value",e)}t.name=n[1].trim();if(t.name){verifyIdentifier(t.name)}t.inputs=parseParams(n[2],false);parseModifiers(n[3].trim(),t);if(r.length>1){let n=r[1].match(regexParen);if(n[1].trim()!=""||n[3].trim()!=""){logger$F.throwArgumentError("unexpected tokens","value",e)}t.outputs=parseParams(n[2],false)}else{t.outputs=[]}return FunctionFragment.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function checkForbidden(e){const t=e.format();if(t==="Error(string)"||t==="Panic(uint256)"){logger$F.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e)}return e}class ErrorFragment extends Fragment{format(e){if(!e){e=FormatTypes.sighash}if(!FormatTypes[e]){logger$F.throwArgumentError("invalid format type","format",e)}if(e===FormatTypes.json){return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))})}let t="";if(e!==FormatTypes.sighash){t+="error "}t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===FormatTypes.full?", ":",")+") ";return t.trim()}static from(e){if(typeof e==="string"){return ErrorFragment.fromString(e)}return ErrorFragment.fromObject(e)}static fromObject(e){if(ErrorFragment.isErrorFragment(e)){return e}if(e.type!=="error"){logger$F.throwArgumentError("invalid error object","value",e)}const t={type:e.type,name:verifyIdentifier(e.name),inputs:e.inputs?e.inputs.map(ParamType.fromObject):[]};return checkForbidden(new ErrorFragment(_constructorGuard$2,t))}static fromString(e){let t={type:"error"};let r=e.match(regexParen);if(!r){logger$F.throwArgumentError("invalid error signature","value",e)}t.name=r[1].trim();if(t.name){verifyIdentifier(t.name)}t.inputs=parseParams(r[2],false);return checkForbidden(ErrorFragment.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function verifyType(e){if(e.match(/^uint($|[^1-9])/)){e="uint256"+e.substring(4)}else if(e.match(/^int($|[^1-9])/)){e="int256"+e.substring(3)}return e}const regexIdentifier=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function verifyIdentifier(e){if(!e||!e.match(regexIdentifier)){logger$F.throwArgumentError(`invalid identifier "${e}"`,"value",e)}return e}const regexParen=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function splitNesting(e){e=e.trim();let t=[];let r="";let n=0;for(let i=0;i<e.length;i++){let s=e[i];if(s===","&&n===0){t.push(r);r=""}else{r+=s;if(s==="("){n++}else if(s===")"){n--;if(n===-1){logger$F.throwArgumentError("unbalanced parenthesis","value",e)}}}}if(r){t.push(r)}return t}const logger$E=new Logger(version$l);function checkResultErrors(e){const t=[];const r=function(e,n){if(!Array.isArray(n)){return}for(let i in n){const s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};r([],e);return t}class Coder{constructor(e,t,r,n){this.name=e;this.type=t;this.localName=r;this.dynamic=n}_throwError(e,t){logger$E.throwArgumentError(e,this.localName,t)}}class Writer$1{constructor(e){defineReadOnly(this,"wordSize",e||32);this._data=[];this._dataLength=0;this._padding=new Uint8Array(e)}get data(){return hexConcat(this._data)}get length(){return this._dataLength}_writeData(e){this._data.push(e);this._dataLength+=e.length;return e.length}appendWriter(e){return this._writeData(concat$2(e._data))}writeBytes(e){let t=arrayify(e);const r=t.length%this.wordSize;if(r){t=concat$2([t,this._padding.slice(r)])}return this._writeData(t)}_getValue(e){let t=arrayify(BigNumber$1.from(e));if(t.length>this.wordSize){logger$E.throwError("value out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length})}if(t.length%this.wordSize){t=concat$2([this._padding.slice(t.length%this.wordSize),t])}return t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;this._data.push(this._padding);this._dataLength+=this.wordSize;return t=>{this._data[e]=this._getValue(t)}}}class Reader$1{constructor(e,t,r,n){defineReadOnly(this,"_data",arrayify(e));defineReadOnly(this,"wordSize",t||32);defineReadOnly(this,"_coerceFunc",r);defineReadOnly(this,"allowLoose",n);this._offset=0}get data(){return hexlify(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");if(r&&parseInt(r[1])<=48){t=t.toNumber()}return t}coerce(e,t){if(this._coerceFunc){return this._coerceFunc(e,t)}return Reader$1.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;if(this._offset+n>this._data.length){if(this.allowLoose&&r&&this._offset+t<=this._data.length){n=t}else{logger$E.throwError("data out-of-bounds",Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})}}return this._data.slice(this._offset,this._offset+n)}subReader(e){return new Reader$1(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);this._offset+=r.length;return r.slice(0,e)}readValue(){return BigNumber$1.from(this.readBytes(this.wordSize))}}var sha3$1=createCommonjsModule$2((function(e){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
(function(){var t="input is invalid type";var r="finalize already called";var n=typeof window==="object";var i=n?window:{};if(i.JS_SHA3_NO_WINDOW){n=false}var s=!n&&typeof self==="object";var a=!i.JS_SHA3_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(a){i=commonjsGlobal}else if(s){i=self}var o=!i.JS_SHA3_NO_COMMON_JS&&"object"==="object"&&e.exports;var f=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var c="0123456789abcdef".split("");var u=[31,7936,2031616,520093696];var l=[4,1024,262144,67108864];var h=[1,256,65536,16777216];var d=[6,1536,393216,100663296];var p=[0,8,16,24];var y=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var m=[224,256,384,512];var g=[128,256];var b=["hex","buffer","arrayBuffer","array","digest"];var v={128:168,256:136};if(i.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(f&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return typeof e==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var w=function(e,t,r){return function(n){return new U(e,t,e).update(n)[r]()}};var A=function(e,t,r){return function(n,i){return new U(e,t,i).update(n)[r]()}};var E=function(e,t,r){return function(t,n,i,s){return I["cshake"+e].update(t,n,i,s)[r]()}};var _=function(e,t,r){return function(t,n,i,s){return I["kmac"+e].update(t,n,i,s)[r]()}};var S=function(e,t,r,n){for(var i=0;i<b.length;++i){var s=b[i];e[s]=t(r,n,s)}return e};var $=function(e,t){var r=w(e,t,"hex");r.create=function(){return new U(e,t,e)};r.update=function(e){return r.create().update(e)};return S(r,w,e,t)};var T=function(e,t){var r=A(e,t,"hex");r.create=function(r){return new U(e,t,r)};r.update=function(e,t){return r.create(t).update(e)};return S(r,A,e,t)};var C=function(e,t){var r=v[e];var n=E(e,t,"hex");n.create=function(n,i,s){if(!i&&!s){return I["shake"+e].create(n)}else{return new U(e,t,n).bytepad([i,s],r)}};n.update=function(e,t,r,i){return n.create(t,r,i).update(e)};return S(n,E,e,t)};var P=function(e,t){var r=v[e];var n=_(e,t,"hex");n.create=function(n,i,s){return new L(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)};n.update=function(e,t,r,i){return n.create(e,r,i).update(t)};return S(n,_,e,t)};var x=[{name:"keccak",padding:h,bits:m,createMethod:$},{name:"sha3",padding:d,bits:m,createMethod:$},{name:"shake",padding:u,bits:g,createMethod:T},{name:"cshake",padding:l,bits:g,createMethod:C},{name:"kmac",padding:l,bits:g,createMethod:P}];var I={},k=[];for(var N=0;N<x.length;++N){var R=x[N];var M=R.bits;for(var O=0;O<M.length;++O){var B=R.name+"_"+M[O];k.push(B);I[B]=R.createMethod(M[O],R.padding);if(R.name!=="sha3"){var D=R.name+M[O];k.push(D);I[D]=I[B]}}}function U(e,t,r){this.blocks=[];this.s=[];this.padding=t;this.outputBits=r;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(e<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=r>>5;this.extraBytes=(r&31)>>3;for(var n=0;n<50;++n){this.s[n]=0}}U.prototype.update=function(e){if(this.finalized){throw new Error(r)}var n,i=typeof e;if(i!=="string"){if(i==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}n=true}var s=this.blocks,a=this.byteCount,o=e.length,c=this.blockCount,u=0,l=this.s,h,d;while(u<o){if(this.reset){this.reset=false;s[0]=this.block;for(h=1;h<c+1;++h){s[h]=0}}if(n){for(h=this.start;u<o&&h<a;++u){s[h>>2]|=e[u]<<p[h++&3]}}else{for(h=this.start;u<o&&h<a;++u){d=e.charCodeAt(u);if(d<128){s[h>>2]|=d<<p[h++&3]}else if(d<2048){s[h>>2]|=(192|d>>6)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else if(d<55296||d>=57344){s[h>>2]|=(224|d>>12)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}else{d=65536+((d&1023)<<10|e.charCodeAt(++u)&1023);s[h>>2]|=(240|d>>18)<<p[h++&3];s[h>>2]|=(128|d>>12&63)<<p[h++&3];s[h>>2]|=(128|d>>6&63)<<p[h++&3];s[h>>2]|=(128|d&63)<<p[h++&3]}}}this.lastByteIndex=h;if(h>=a){this.start=h-a;this.block=s[c];for(h=0;h<c;++h){l[h]^=s[h]}F(l);this.reset=true}else{this.start=h}}return this};U.prototype.encode=function(e,t){var r=e&255,n=1;var i=[r];e=e>>8;r=e&255;while(r>0){i.unshift(r);e=e>>8;r=e&255;++n}if(t){i.push(n)}else{i.unshift(n)}this.update(i);return i.length};U.prototype.encodeString=function(e){var r,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}r=true}var i=0,s=e.length;if(r){i=s}else{for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128){i+=1}else if(o<2048){i+=2}else if(o<55296||o>=57344){i+=3}else{o=65536+((o&1023)<<10|e.charCodeAt(++a)&1023);i+=4}}}i+=this.encode(i*8);this.update(e);return i};U.prototype.bytepad=function(e,t){var r=this.encode(t);for(var n=0;n<e.length;++n){r+=this.encodeString(e[n])}var i=t-r%t;var s=[];s.length=i;this.update(s);return this};U.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;e[t>>2]|=this.padding[t&3];if(this.lastByteIndex===this.byteCount){e[0]=e[r];for(t=1;t<r+1;++t){e[t]=0}}e[r-1]|=2147483648;for(t=0;t<r;++t){n[t]^=e[t]}F(n)};U.prototype.toString=U.prototype.hex=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a="",o;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=t[i];a+=c[o>>4&15]+c[o&15]+c[o>>12&15]+c[o>>8&15]+c[o>>20&15]+c[o>>16&15]+c[o>>28&15]+c[o>>24&15]}if(s%e===0){F(t);i=0}}if(n){o=t[i];a+=c[o>>4&15]+c[o&15];if(n>1){a+=c[o>>12&15]+c[o>>8&15]}if(n>2){a+=c[o>>20&15]+c[o>>16&15]}}return a};U.prototype.arrayBuffer=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=this.outputBits>>3;var o;if(n){o=new ArrayBuffer(r+1<<2)}else{o=new ArrayBuffer(a)}var f=new Uint32Array(o);while(s<r){for(i=0;i<e&&s<r;++i,++s){f[s]=t[i]}if(s%e===0){F(t)}}if(n){f[i]=t[i];o=o.slice(0,a)}return o};U.prototype.buffer=U.prototype.arrayBuffer;U.prototype.digest=U.prototype.array=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,n=this.extraBytes,i=0,s=0;var a=[],o,f;while(s<r){for(i=0;i<e&&s<r;++i,++s){o=s<<2;f=t[i];a[o]=f&255;a[o+1]=f>>8&255;a[o+2]=f>>16&255;a[o+3]=f>>24&255}if(s%e===0){F(t)}}if(n){o=s<<2;f=t[i];a[o]=f&255;if(n>1){a[o+1]=f>>8&255}if(n>2){a[o+2]=f>>16&255}}return a};function L(e,t,r){U.call(this,e,t,r)}L.prototype=new U;L.prototype.finalize=function(){this.encode(this.outputBits,true);return U.prototype.finalize.call(this)};var F=function(e){var t,r,n,i,s,a,o,f,c,u,l,h,d,p,m,g,b,v,w,A,E,_,S,$,T,C,P,x,I,k,N,R,M,O,B,D,U,L,F,j,H,K,G,V,z,W,X,Y,J,q,Q,Z,ee,te,re,ne,ie,se,ae,oe,fe,ce,ue;for(n=0;n<48;n+=2){i=e[0]^e[10]^e[20]^e[30]^e[40];s=e[1]^e[11]^e[21]^e[31]^e[41];a=e[2]^e[12]^e[22]^e[32]^e[42];o=e[3]^e[13]^e[23]^e[33]^e[43];f=e[4]^e[14]^e[24]^e[34]^e[44];c=e[5]^e[15]^e[25]^e[35]^e[45];u=e[6]^e[16]^e[26]^e[36]^e[46];l=e[7]^e[17]^e[27]^e[37]^e[47];h=e[8]^e[18]^e[28]^e[38]^e[48];d=e[9]^e[19]^e[29]^e[39]^e[49];t=h^(a<<1|o>>>31);r=d^(o<<1|a>>>31);e[0]^=t;e[1]^=r;e[10]^=t;e[11]^=r;e[20]^=t;e[21]^=r;e[30]^=t;e[31]^=r;e[40]^=t;e[41]^=r;t=i^(f<<1|c>>>31);r=s^(c<<1|f>>>31);e[2]^=t;e[3]^=r;e[12]^=t;e[13]^=r;e[22]^=t;e[23]^=r;e[32]^=t;e[33]^=r;e[42]^=t;e[43]^=r;t=a^(u<<1|l>>>31);r=o^(l<<1|u>>>31);e[4]^=t;e[5]^=r;e[14]^=t;e[15]^=r;e[24]^=t;e[25]^=r;e[34]^=t;e[35]^=r;e[44]^=t;e[45]^=r;t=f^(h<<1|d>>>31);r=c^(d<<1|h>>>31);e[6]^=t;e[7]^=r;e[16]^=t;e[17]^=r;e[26]^=t;e[27]^=r;e[36]^=t;e[37]^=r;e[46]^=t;e[47]^=r;t=u^(i<<1|s>>>31);r=l^(s<<1|i>>>31);e[8]^=t;e[9]^=r;e[18]^=t;e[19]^=r;e[28]^=t;e[29]^=r;e[38]^=t;e[39]^=r;e[48]^=t;e[49]^=r;p=e[0];m=e[1];W=e[11]<<4|e[10]>>>28;X=e[10]<<4|e[11]>>>28;x=e[20]<<3|e[21]>>>29;I=e[21]<<3|e[20]>>>29;oe=e[31]<<9|e[30]>>>23;fe=e[30]<<9|e[31]>>>23;K=e[40]<<18|e[41]>>>14;G=e[41]<<18|e[40]>>>14;O=e[2]<<1|e[3]>>>31;B=e[3]<<1|e[2]>>>31;g=e[13]<<12|e[12]>>>20;b=e[12]<<12|e[13]>>>20;Y=e[22]<<10|e[23]>>>22;J=e[23]<<10|e[22]>>>22;k=e[33]<<13|e[32]>>>19;N=e[32]<<13|e[33]>>>19;ce=e[42]<<2|e[43]>>>30;ue=e[43]<<2|e[42]>>>30;te=e[5]<<30|e[4]>>>2;re=e[4]<<30|e[5]>>>2;D=e[14]<<6|e[15]>>>26;U=e[15]<<6|e[14]>>>26;v=e[25]<<11|e[24]>>>21;w=e[24]<<11|e[25]>>>21;q=e[34]<<15|e[35]>>>17;Q=e[35]<<15|e[34]>>>17;R=e[45]<<29|e[44]>>>3;M=e[44]<<29|e[45]>>>3;$=e[6]<<28|e[7]>>>4;T=e[7]<<28|e[6]>>>4;ne=e[17]<<23|e[16]>>>9;ie=e[16]<<23|e[17]>>>9;L=e[26]<<25|e[27]>>>7;F=e[27]<<25|e[26]>>>7;A=e[36]<<21|e[37]>>>11;E=e[37]<<21|e[36]>>>11;Z=e[47]<<24|e[46]>>>8;ee=e[46]<<24|e[47]>>>8;V=e[8]<<27|e[9]>>>5;z=e[9]<<27|e[8]>>>5;C=e[18]<<20|e[19]>>>12;P=e[19]<<20|e[18]>>>12;se=e[29]<<7|e[28]>>>25;ae=e[28]<<7|e[29]>>>25;j=e[38]<<8|e[39]>>>24;H=e[39]<<8|e[38]>>>24;_=e[48]<<14|e[49]>>>18;S=e[49]<<14|e[48]>>>18;e[0]=p^~g&v;e[1]=m^~b&w;e[10]=$^~C&x;e[11]=T^~P&I;e[20]=O^~D&L;e[21]=B^~U&F;e[30]=V^~W&Y;e[31]=z^~X&J;e[40]=te^~ne&se;e[41]=re^~ie&ae;e[2]=g^~v&A;e[3]=b^~w&E;e[12]=C^~x&k;e[13]=P^~I&N;e[22]=D^~L&j;e[23]=U^~F&H;e[32]=W^~Y&q;e[33]=X^~J&Q;e[42]=ne^~se&oe;e[43]=ie^~ae&fe;e[4]=v^~A&_;e[5]=w^~E&S;e[14]=x^~k&R;e[15]=I^~N&M;e[24]=L^~j&K;e[25]=F^~H&G;e[34]=Y^~q&Z;e[35]=J^~Q&ee;e[44]=se^~oe&ce;e[45]=ae^~fe&ue;e[6]=A^~_&p;e[7]=E^~S&m;e[16]=k^~R&$;e[17]=N^~M&T;e[26]=j^~K&O;e[27]=H^~G&B;e[36]=q^~Z&V;e[37]=Q^~ee&z;e[46]=oe^~ce&te;e[47]=fe^~ue&re;e[8]=_^~p&g;e[9]=S^~m&b;e[18]=R^~$&C;e[19]=M^~T&P;e[28]=K^~O&D;e[29]=G^~B&U;e[38]=Z^~V&W;e[39]=ee^~z&X;e[48]=ce^~te&ne;e[49]=ue^~re&ie;e[0]^=y[n];e[1]^=y[n+1]}};if(o){e.exports=I}else{for(N=0;N<k.length;++N){i[k[N]]=I[k[N]]}}})()}));function keccak256$1(e){return"0x"+sha3$1.keccak_256(arrayify(e))}const lib_esm$i=Object.freeze({__proto__:null,keccak256:keccak256$1});const version$k="rlp/5.7.0";const logger$D=new Logger(version$k);function arrayifyInteger(e){const t=[];while(e){t.unshift(e&255);e>>=8}return t}function unarrayifyInteger(e,t,r){let n=0;for(let i=0;i<r;i++){n=n*256+e[t+i]}return n}function _encode(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){t=t.concat(_encode(e))}));if(t.length<=55){t.unshift(192+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(247+r.length);return r.concat(t)}if(!isBytesLike(e)){logger$D.throwArgumentError("RLP object must be BytesLike","object",e)}const t=Array.prototype.slice.call(arrayify(e));if(t.length===1&&t[0]<=127){return t}else if(t.length<=55){t.unshift(128+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(183+r.length);return r.concat(t)}function encode$8(e){return hexlify(_encode(e))}function _decodeChildren(e,t,r,n){const i=[];while(r<t+1+n){const s=_decode(e,r);i.push(s.result);r+=s.consumed;if(r>t+1+n){logger$D.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}}return{consumed:1+n,result:i}}function _decode(e,t){if(e.length===0){logger$D.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{})}if(e[t]>=248){const r=e[t]-247;if(t+1+r>e.length){logger$D.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{})}const n=unarrayifyInteger(e,t+1,r);if(t+1+r+n>e.length){logger$D.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{})}return _decodeChildren(e,t,t+1+r,r+n)}else if(e[t]>=192){const r=e[t]-192;if(t+1+r>e.length){logger$D.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}return _decodeChildren(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;if(t+1+r>e.length){logger$D.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}const n=unarrayifyInteger(e,t+1,r);if(t+1+r+n>e.length){logger$D.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}const i=hexlify(e.slice(t+1+r,t+1+r+n));return{consumed:1+r+n,result:i}}else if(e[t]>=128){const r=e[t]-128;if(t+1+r>e.length){logger$D.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{})}const n=hexlify(e.slice(t+1,t+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:hexlify(e[t])}}function decode$7(e){const t=arrayify(e);const r=_decode(t,0);if(r.consumed!==t.length){logger$D.throwArgumentError("invalid rlp data","data",e)}return r.result}const lib_esm$h=Object.freeze({__proto__:null,encode:encode$8,decode:decode$7});const version$j="address/5.7.0";const logger$C=new Logger(version$j);function getChecksumAddress(e){if(!isHexString(e,20)){logger$C.throwArgumentError("invalid address","address",e)}e=e.toLowerCase();const t=e.substring(2).split("");const r=new Uint8Array(40);for(let e=0;e<40;e++){r[e]=t[e].charCodeAt(0)}const n=arrayify(keccak256$1(r));for(let e=0;e<40;e+=2){if(n[e>>1]>>4>=8){t[e]=t[e].toUpperCase()}if((n[e>>1]&15)>=8){t[e+1]=t[e+1].toUpperCase()}}return"0x"+t.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(e){if(Math.log10){return Math.log10(e)}return Math.log(e)/Math.LN10}const ibanLookup={};for(let e=0;e<10;e++){ibanLookup[String(e)]=String(e)}for(let e=0;e<26;e++){ibanLookup[String.fromCharCode(65+e)]=String(10+e)}const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(e){e=e.toUpperCase();e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>ibanLookup[e])).join("");while(t.length>=safeDigits){let e=t.substring(0,safeDigits);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2){r="0"+r}return r}function getAddress(e){let t=null;if(typeof e!=="string"){logger$C.throwArgumentError("invalid address","address",e)}if(e.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(e.substring(0,2)!=="0x"){e="0x"+e}t=getChecksumAddress(e);if(e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e){logger$C.throwArgumentError("bad address checksum","address",e)}}else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(e.substring(2,4)!==ibanChecksum(e)){logger$C.throwArgumentError("bad icap checksum","address",e)}t=_base36To16(e.substring(4));while(t.length<40){t="0"+t}t=getChecksumAddress("0x"+t)}else{logger$C.throwArgumentError("invalid address","address",e)}return t}function isAddress(e){try{getAddress(e);return true}catch(e){}return false}function getIcapAddress(e){let t=_base16To36(getAddress(e).substring(2)).toUpperCase();while(t.length<30){t="0"+t}return"XE"+ibanChecksum("XE00"+t)+t}function getContractAddress(e){let t=null;try{t=getAddress(e.from)}catch(t){logger$C.throwArgumentError("missing from address","transaction",e)}const r=stripZeros(arrayify(BigNumber$1.from(e.nonce).toHexString()));return getAddress(hexDataSlice(keccak256$1(encode$8([t,r])),12))}function getCreate2Address(e,t,r){if(hexDataLength(t)!==32){logger$C.throwArgumentError("salt must be 32 bytes","salt",t)}if(hexDataLength(r)!==32){logger$C.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r)}return getAddress(hexDataSlice(keccak256$1(concat$2(["0xff",getAddress(e),t,r])),12))}const lib_esm$g=Object.freeze({__proto__:null,getAddress,isAddress,getIcapAddress,getContractAddress,getCreate2Address});class AddressCoder extends Coder{constructor(e){super("address","address",e,false)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=getAddress(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return getAddress(hexZeroPad(e.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(e){super(e.name,e.type,undefined,e.dynamic);this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const logger$B=new Logger(version$l);function pack$1(e,t,r){let n=null;if(Array.isArray(r)){n=r}else if(r&&typeof r==="object"){let e={};n=t.map((t=>{const n=t.localName;if(!n){logger$B.throwError("cannot encode object for signature with missing names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r})}if(e[n]){logger$B.throwError("cannot encode object for signature with duplicate names",Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r})}e[n]=true;return r[n]}))}else{logger$B.throwArgumentError("invalid tuple value","tuple",r)}if(t.length!==n.length){logger$B.throwArgumentError("types/value length mismatch","tuple",r)}let i=new Writer$1(e.wordSize);let s=new Writer$1(e.wordSize);let a=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push((e=>{n(e+t)}))}else{e.encode(i,r)}}));a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);o+=e.appendWriter(s);return o}function unpack(e,t){let r=[];let n=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readValue();let s=n.subReader(r.toNumber());try{i=t.decode(s)}catch(e){if(e.code===Logger.errors.BUFFER_OVERRUN){throw e}i=e;i.baseType=t.name;i.name=t.localName;i.type=t.type}}else{try{i=t.decode(e)}catch(e){if(e.code===Logger.errors.BUFFER_OVERRUN){throw e}i=e;i.baseType=t.name;i.name=t.localName;i.type=t.type}}if(i!=undefined){r.push(i)}}));const i=t.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});t.forEach(((e,t)=>{let n=e.localName;if(!n||i[n]!==1){return}if(n==="length"){n="_length"}if(r[n]!=null){return}const s=r[t];if(s instanceof Error){Object.defineProperty(r,n,{enumerable:true,get:()=>{throw s}})}else{r[n]=s}}));for(let e=0;e<r.length;e++){const t=r[e];if(t instanceof Error){Object.defineProperty(r,e,{enumerable:true,get:()=>{throw t}})}}return Object.freeze(r)}class ArrayCoder extends Coder{constructor(e,t,r){const n=e.type+"["+(t>=0?t:"")+"]";const i=t===-1||e.dynamic;super("array",n,r,i);this.coder=e;this.length=t}defaultValue(){const e=this.coder.defaultValue();const t=[];for(let r=0;r<this.length;r++){t.push(e)}return t}encode(e,t){if(!Array.isArray(t)){this._throwError("expected array value",t)}let r=this.length;if(r===-1){r=t.length;e.writeValue(t.length)}logger$B.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++){n.push(this.coder)}return pack$1(e,n,t)}decode(e){let t=this.length;if(t===-1){t=e.readValue().toNumber();if(t*32>e._data.length){logger$B.throwError("insufficient data length",Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:t})}}let r=[];for(let e=0;e<t;e++){r.push(new AnonymousCoder(this.coder))}return e.coerce(this.name,unpack(e,r))}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,false)}defaultValue(){return false}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(e,t){super(e,e,t,true)}defaultValue(){return"0x"}encode(e,t){t=arrayify(t);let r=e.writeValue(t.length);r+=e.writeBytes(t);return r}decode(e){return e.readBytes(e.readValue().toNumber(),true)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,hexlify(super.decode(e)))}}class FixedBytesCoder extends Coder{constructor(e,t){let r="bytes"+String(e);super(r,r,t,false);this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,t){let r=arrayify(t);if(r.length!==this.size){this._throwError("incorrect data length",t)}return e.writeBytes(r)}decode(e){return e.coerce(this.name,hexlify(e.readBytes(this.size)))}}class NullCoder extends Coder{constructor(e){super("null","",e,false)}defaultValue(){return null}encode(e,t){if(t!=null){this._throwError("not null",t)}return e.writeBytes([])}decode(e){e.readBytes(0);return e.coerce(this.name,null)}}const AddressZero="0x0000000000000000000000000000000000000000";const NegativeOne$1=BigNumber$1.from(-1);const Zero$1=BigNumber$1.from(0);const One$1=BigNumber$1.from(1);const Two=BigNumber$1.from(2);const WeiPerEther=BigNumber$1.from("1000000000000000000");const MaxUint256$1=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const MinInt256=BigNumber$1.from("-0x8000000000000000000000000000000000000000000000000000000000000000");const MaxInt256=BigNumber$1.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const HashZero="0x0000000000000000000000000000000000000000000000000000000000000000";const EtherSymbol="Ξ";const index$5=Object.freeze({__proto__:null,AddressZero,NegativeOne:NegativeOne$1,Zero:Zero$1,One:One$1,Two,WeiPerEther,MaxUint256:MaxUint256$1,MinInt256,MaxInt256,HashZero,EtherSymbol});class NumberCoder extends Coder{constructor(e,t,r){const n=(t?"int":"uint")+e*8;super(n,n,r,false);this.size=e;this.signed=t}defaultValue(){return 0}encode(e,t){let r=BigNumber$1.from(t);let n=MaxUint256$1.mask(e.wordSize*8);if(this.signed){let e=n.mask(this.size*8-1);if(r.gt(e)||r.lt(e.add(One$1).mul(NegativeOne$1))){this._throwError("value out-of-bounds",t)}}else if(r.lt(Zero$1)||r.gt(n.mask(this.size*8))){this._throwError("value out-of-bounds",t)}r=r.toTwos(this.size*8).mask(this.size*8);if(this.signed){r=r.fromTwos(this.size*8).toTwos(8*e.wordSize)}return e.writeValue(r)}decode(e){let t=e.readValue().mask(this.size*8);if(this.signed){t=t.fromTwos(this.size*8)}return e.coerce(this.name,t)}}const version$i="strings/5.7.0";const logger$A=new Logger(version$i);var UnicodeNormalizationForm;(function(e){e["current"]="";e["NFC"]="NFC";e["NFD"]="NFD";e["NFKC"]="NFKC";e["NFKD"]="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(e){e["UNEXPECTED_CONTINUE"]="unexpected continuation byte";e["BAD_PREFIX"]="bad codepoint prefix";e["OVERRUN"]="string overrun";e["MISSING_CONTINUE"]="missing continuation byte";e["OUT_OF_RANGE"]="out of UTF-8 range";e["UTF16_SURROGATE"]="UTF-16 surrogate";e["OVERLONG"]="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function errorFunc(e,t,r,n,i){return logger$A.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function ignoreFunc(e,t,r,n,i){if(e===Utf8ErrorReason.BAD_PREFIX||e===Utf8ErrorReason.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length;n++){if(r[n]>>6!==2){break}e++}return e}if(e===Utf8ErrorReason.OVERRUN){return r.length-t-1}return 0}function replaceFunc(e,t,r,n,i){if(e===Utf8ErrorReason.OVERLONG){n.push(i);return 0}n.push(65533);return ignoreFunc(e,t,r)}const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(e,t){if(t==null){t=Utf8ErrorFuncs.error}e=arrayify(e);const r=[];let n=0;while(n<e.length){const i=e[n++];if(i>>7===0){r.push(i);continue}let s=null;let a=null;if((i&224)===192){s=1;a=127}else if((i&240)===224){s=2;a=2047}else if((i&248)===240){s=3;a=65535}else{if((i&192)===128){n+=t(Utf8ErrorReason.UNEXPECTED_CONTINUE,n-1,e,r)}else{n+=t(Utf8ErrorReason.BAD_PREFIX,n-1,e,r)}continue}if(n-1+s>=e.length){n+=t(Utf8ErrorReason.OVERRUN,n-1,e,r);continue}let o=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[n];if((i&192)!=128){n+=t(Utf8ErrorReason.MISSING_CONTINUE,n,e,r);o=null;break}o=o<<6|i&63;n++}if(o===null){continue}if(o>1114111){n+=t(Utf8ErrorReason.OUT_OF_RANGE,n-1-s,e,r,o);continue}if(o>=55296&&o<=57343){n+=t(Utf8ErrorReason.UTF16_SURROGATE,n-1-s,e,r,o);continue}if(o<=a){n+=t(Utf8ErrorReason.OVERLONG,n-1-s,e,r,o);continue}r.push(o)}return r}function toUtf8Bytes(e,t=UnicodeNormalizationForm.current){if(t!=UnicodeNormalizationForm.current){logger$A.checkNormalize();e=e.normalize(t)}let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128){r.push(n)}else if(n<2048){r.push(n>>6|192);r.push(n&63|128)}else if((n&64512)==55296){t++;const i=e.charCodeAt(t);if(t>=e.length||(i&64512)!==56320){throw new Error("invalid utf-8 string")}const s=65536+((n&1023)<<10)+(i&1023);r.push(s>>18|240);r.push(s>>12&63|128);r.push(s>>6&63|128);r.push(s&63|128)}else{r.push(n>>12|224);r.push(n>>6&63|128);r.push(n&63|128)}}return arrayify(r)}function escapeChar(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function _toEscapedUtf8String(e,t){return'"'+getUtf8CodePoints(e,t).map((e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127){return String.fromCharCode(e)}}if(e<=65535){return escapeChar(e)}e-=65536;return escapeChar((e>>10&1023)+55296)+escapeChar((e&1023)+56320)})).join("")+'"'}function _toUtf8String(e){return e.map((e=>{if(e<=65535){return String.fromCharCode(e)}e-=65536;return String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320)})).join("")}function toUtf8String(e,t){return _toUtf8String(getUtf8CodePoints(e,t))}function toUtf8CodePoints(e,t=UnicodeNormalizationForm.current){return getUtf8CodePoints(toUtf8Bytes(e,t))}function formatBytes32String(e){const t=toUtf8Bytes(e);if(t.length>31){throw new Error("bytes32 string must be less than 32 bytes")}return hexlify(concat$2([t,HashZero]).slice(0,32))}function parseBytes32String(e){const t=arrayify(e);if(t.length!==32){throw new Error("invalid bytes32 - not 32 bytes long")}if(t[31]!==0){throw new Error("invalid bytes32 string - no null terminator")}let r=31;while(t[r-1]===0){r--}return toUtf8String(t.slice(0,r))}function bytes2(e){if(e.length%4!==0){throw new Error("bad data")}let t=[];for(let r=0;r<e.length;r+=4){t.push(parseInt(e.substring(r,r+4),16))}return t}function createTable(e,t){if(!t){t=function(e){return[parseInt(e,16)]}}let r=0;let n={};e.split(",").forEach((e=>{let i=e.split(":");r+=parseInt(i[0],16);n[r]=t(i[1])}));return n}function createRangeTable(e){let t=0;return e.split(",").map((e=>{let r=e.split("-");if(r.length===1){r[1]="0"}else if(r[1]===""){r[1]="1"}let n=t+parseInt(r[0],16);t=parseInt(r[1],16);return{l:n,h:t}}))}function matchMap(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];r+=i.l;if(e>=r&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(e-r)!==-1){continue}return i}}return null}const Table_A_1_ranges=createRangeTable("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d");const Table_B_1_flags="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16)));const Table_B_2_ranges=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}];const Table_B_2_lut_abs=createTable("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3");const Table_B_2_lut_rel=createTable("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7");const Table_B_2_complex=createTable("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",bytes2);const Table_C_ranges=createRangeTable("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function flatten(e){return e.reduce(((e,t)=>{t.forEach((t=>{e.push(t)}));return e}),[])}function _nameprepTableA1(e){return!!matchMap(e,Table_A_1_ranges)}function _nameprepTableB2(e){let t=matchMap(e,Table_B_2_ranges);if(t){return[e+t.s]}let r=Table_B_2_lut_abs[e];if(r){return r}let n=Table_B_2_lut_rel[e];if(n){return[e+n[0]]}let i=Table_B_2_complex[e];if(i){return i}return null}function _nameprepTableC(e){return!!matchMap(e,Table_C_ranges)}function nameprep(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59){return e.toLowerCase()}let t=toUtf8CodePoints(e);t=flatten(t.map((e=>{if(Table_B_1_flags.indexOf(e)>=0){return[]}if(e>=65024&&e<=65039){return[]}let t=_nameprepTableB2(e);if(t){return t}return[e]})));t=toUtf8CodePoints(_toUtf8String(t),UnicodeNormalizationForm.NFKC);t.forEach((e=>{if(_nameprepTableC(e)){throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}}));t.forEach((e=>{if(_nameprepTableA1(e)){throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}}));let r=_toUtf8String(t);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-"){throw new Error("invalid hyphen")}return r}const lib_esm$f=Object.freeze({__proto__:null,_toEscapedUtf8String,toUtf8Bytes,toUtf8CodePoints,toUtf8String,Utf8ErrorFuncs,get Utf8ErrorReason(){return Utf8ErrorReason},get UnicodeNormalizationForm(){return UnicodeNormalizationForm},formatBytes32String,parseBytes32String,nameprep});class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes(t))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{constructor(e,t){let r=false;const n=[];e.forEach((e=>{if(e.dynamic){r=true}n.push(e.type)}));const i="tuple("+n.join(",")+")";super("tuple",i,t,r);this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;if(r){if(!e[r]){e[r]=0}e[r]++}return e}),{});this.coders.forEach(((r,n)=>{let i=r.localName;if(!i||t[i]!==1){return}if(i==="length"){i="_length"}if(e[i]!=null){return}e[i]=e[n]}));return Object.freeze(e)}encode(e,t){return pack$1(e,this.coders,t)}decode(e){return e.coerce(this.name,unpack(e,this.coders))}}const logger$z=new Logger(version$l);const paramTypeBytes=new RegExp(/^bytes([0-9]*)$/);const paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(e){defineReadOnly(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"array":return new ArrayCoder(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new TupleCoder((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new NullCoder(e.name)}let t=e.type.match(paramTypeNumber);if(t){let r=parseInt(t[2]||"256");if(r===0||r>256||r%8!==0){logger$z.throwArgumentError("invalid "+t[1]+" bit length","param",e)}return new NumberCoder(r/8,t[1]==="int",e.name)}t=e.type.match(paramTypeBytes);if(t){let r=parseInt(t[1]);if(r===0||r>32){logger$z.throwArgumentError("invalid bytes length","param",e)}return new FixedBytesCoder(r,e.name)}return logger$z.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Reader$1(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Writer$1(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(ParamType.from(e))));const r=new TupleCoder(t,"_");return r.defaultValue()}encode(e,t){if(e.length!==t.length){logger$z.throwError("types/values length mismatch",Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}})}const r=e.map((e=>this._getCoder(ParamType.from(e))));const n=new TupleCoder(r,"_");const i=this._getWriter();n.encode(i,t);return i.data}decode(e,t,r){const n=e.map((e=>this._getCoder(ParamType.from(e))));const i=new TupleCoder(n,"_");return i.decode(this._getReader(arrayify(t),r))}}const defaultAbiCoder=new AbiCoder;function id(e){return keccak256$1(toUtf8Bytes(e))}const version$h="hash/5.7.0";function decode$6(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++){t.push(e.charCodeAt(r))}return arrayify(t)}function encode$7(e){e=arrayify(e);let t="";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return btoa(t)}const lib_esm$e=Object.freeze({__proto__:null,decode:decode$6,encode:encode$7});function flat$1(e,t){if(t==null){t=1}const r=[];const n=r.forEach;const i=function(e,t){n.call(e,(function(e){if(t>0&&Array.isArray(e)){i(e,t-1)}else{r.push(e)}}))};i(e,t);return r}function fromEntries(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}function decode_arithmetic(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r();let i=1;let s=[0,1];for(let e=1;e<n;e++){s.push(i+=r())}let a=r();let o=t;t+=a;let f=0;let c=0;function u(){if(f==0){c=c<<8|e[t++];f=8}return c>>--f&1}const l=31;const h=Math.pow(2,l);const d=h>>>1;const p=d>>1;const y=h-1;let m=0;for(let e=0;e<l;e++)m=m<<1|u();let g=[];let b=0;let v=h;while(true){let e=Math.floor(((m-b+1)*i-1)/v);let t=0;let r=n;while(r-t>1){let n=t+r>>>1;if(e<s[n]){r=n}else{t=n}}if(t==0)break;g.push(t);let a=b+Math.floor(v*s[t]/i);let o=b+Math.floor(v*s[t+1]/i)-1;while(((a^o)&d)==0){m=m<<1&y|u();a=a<<1&y;o=o<<1&y|1}while(a&~o&p){m=m&d|m<<1&y>>>1|u();a=a<<1^d;o=(o^d)<<1|d|1}b=a;v=1+o-a}let w=n-4;return g.map((t=>{switch(t-w){case 3:return w+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return w+256+(e[o++]<<8|e[o++]);case 1:return w+e[o++];default:return t-1}}))}function read_payload(e){let t=0;return()=>e[t++]}function read_compressed_payload(e){return read_payload(decode_arithmetic(e))}function signed(e){return e&1?~e>>1:e>>1}function read_counts(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}function read_ascending(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function read_deltas(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=signed(t());return r}function read_member_array(e,t){let r=read_ascending(e(),e);let n=e();let i=read_ascending(n,e);let s=read_counts(n,e);for(let e=0;e<n;e++){for(let t=0;t<s[e];t++){r.push(i[e]+t)}}return t?r.map((e=>t[e])):r}function read_mapped_map(e){let t=[];while(true){let r=e();if(r==0)break;t.push(read_linear_table(r,e))}while(true){let r=e()-1;if(r<0)break;t.push(read_replacement_table(r,e))}return fromEntries(flat$1(t))}function read_zero_terminated_array(e){let t=[];while(true){let r=e();if(r==0)break;t.push(r)}return t}function read_transposed(e,t,r){let n=Array(e).fill(undefined).map((()=>[]));for(let i=0;i<t;i++){read_deltas(e,r).forEach(((e,t)=>n[t].push(e)))}return n}function read_linear_table(e,t){let r=1+t();let n=t();let i=read_zero_terminated_array(t);let s=read_transposed(i.length,1+e,t);return flat$1(s.map(((e,t)=>{const s=e[0],a=e.slice(1);return Array(i[t]).fill(undefined).map(((e,t)=>{let i=t*n;return[s+t*r,a.map((e=>e+i))]}))})))}function read_replacement_table(e,t){let r=1+t();let n=read_transposed(r,1+e,t);return n.map((e=>[e[0],e.slice(1)]))}function read_emoji_trie(e){let t=read_member_array(e).sort(((e,t)=>e-t));return r();function r(){let n=[];while(true){let i=read_member_array(e,t);if(i.length==0)break;n.push({set:new Set(i),node:r()})}n.sort(((e,t)=>t.set.size-e.set.size));let i=e();let s=i%3;i=i/3|0;let a=!!(i&1);i>>=1;let o=i==1;let f=i==2;return{branches:n,valid:s,fe0f:a,save:o,check:f}}}function getData(){return read_compressed_payload(decode$6("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const r$2=getData();const VALID=new Set(read_member_array(r$2));const IGNORED=new Set(read_member_array(r$2));const MAPPED=read_mapped_map(r$2);const EMOJI_ROOT=read_emoji_trie(r$2);const HYPHEN=45;const UNDERSCORE=95;function explode_cp(e){return toUtf8CodePoints(e)}function filter_fe0f(e){return e.filter((e=>e!=65039))}function ens_normalize_post_check(e){for(let t of e.split(".")){let e=explode_cp(t);try{for(let t=e.lastIndexOf(UNDERSCORE)-1;t>=0;t--){if(e[t]!==UNDERSCORE){throw new Error(`underscore only allowed at start`)}}if(e.length>=4&&e.every((e=>e<128))&&e[2]===HYPHEN&&e[3]===HYPHEN){throw new Error(`invalid label extension`)}}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function ens_normalize(e){return ens_normalize_post_check(normalize(e,filter_fe0f))}function normalize(e,t){let r=explode_cp(e).reverse();let n=[];while(r.length){let e=consume_emoji_reversed(r);if(e){n.push(...t(e));continue}let i=r.pop();if(VALID.has(i)){n.push(i);continue}if(IGNORED.has(i)){continue}let s=MAPPED[i];if(s){n.push(...s);continue}throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`)}return ens_normalize_post_check(nfc(String.fromCodePoint(...n)))}function nfc(e){return e.normalize("NFC")}function consume_emoji_reversed(e,t){var r;let n=EMOJI_ROOT;let i;let s;let a=[];let o=e.length;if(t)t.length=0;while(o){let f=e[--o];n=(r=n.branches.find((e=>e.set.has(f))))===null||r===void 0?void 0:r.node;if(!n)break;if(n.save){s=f}else if(n.check){if(f===s)break}a.push(f);if(n.fe0f){a.push(65039);if(o>0&&e[o-1]==65039)o--}if(n.valid){i=a.slice();if(n.valid==2)i.splice(1,1);if(t)t.push(...e.slice(o).reverse());e.length=o}}return i}const logger$y=new Logger(version$h);const Zeros$1=new Uint8Array(32);Zeros$1.fill(0);function checkComponent(e){if(e.length===0){throw new Error("invalid ENS name; empty component")}return e}function ensNameSplit(e){const t=toUtf8Bytes(ens_normalize(e));const r=[];if(e.length===0){return r}let n=0;for(let e=0;e<t.length;e++){const i=t[e];if(i===46){r.push(checkComponent(t.slice(n,e)));n=e+1}}if(n>=t.length){throw new Error("invalid ENS name; empty component")}r.push(checkComponent(t.slice(n)));return r}function ensNormalize(e){return ensNameSplit(e).map((e=>toUtf8String(e))).join(".")}function isValidName(e){try{return ensNameSplit(e).length!==0}catch(e){}return false}function namehash(e){if(typeof e!=="string"){logger$y.throwArgumentError("invalid ENS name; not a string","name",e)}let t=Zeros$1;const r=ensNameSplit(e);while(r.length){t=keccak256$1(concat$2([t,keccak256$1(r.pop())]))}return hexlify(t)}function dnsEncode(e){return hexlify(concat$2(ensNameSplit(e).map((e=>{if(e.length>63){throw new Error("invalid DNS encoded entry; length exceeds 63 bytes")}const t=new Uint8Array(e.length+1);t.set(e,1);t[0]=t.length-1;return t}))))+"00"}const messagePrefix="Ethereum Signed Message:\n";function hashMessage(e){if(typeof e==="string"){e=toUtf8Bytes(e)}return keccak256$1(concat$2([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(e.length)),e]))}var __awaiter$g=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$x=new Logger(version$h);const padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber$1.from(-1);const Zero=BigNumber$1.from(0);const One=BigNumber$1.from(1);const MaxUint256=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(e){const t=arrayify(e);const r=t.length%32;if(r){return hexConcat([t,padding.slice(r)])}return hexlify(t)}const hexTrue=hexZeroPad(One.toHexString(),32);const hexFalse=hexZeroPad(Zero.toHexString(),32);const domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"};const domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(e){return function(t){if(typeof t!=="string"){logger$x.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t)}return t}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(e){try{return BigNumber$1.from(e).toString()}catch(e){}return logger$x.throwArgumentError(`invalid domain value for "chainId"`,"domain.chainId",e)},verifyingContract:function(e){try{return getAddress(e).toLowerCase()}catch(e){}return logger$x.throwArgumentError(`invalid domain value "verifyingContract"`,"domain.verifyingContract",e)},salt:function(e){try{const t=arrayify(e);if(t.length!==32){throw new Error("bad length")}return hexlify(t)}catch(e){}return logger$x.throwArgumentError(`invalid domain value "salt"`,"domain.salt",e)}};function getBaseEncoder(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=t[1]==="";const n=parseInt(t[2]||"256");if(n%8!==0||n>256||t[2]&&t[2]!==String(n)){logger$x.throwArgumentError("invalid numeric width","type",e)}const i=MaxUint256.mask(r?n-1:n);const s=r?i.add(One).mul(NegativeOne):Zero;return function(t){const r=BigNumber$1.from(t);if(r.lt(s)||r.gt(i)){logger$x.throwArgumentError(`value out-of-bounds for ${e}`,"value",t)}return hexZeroPad(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);if(r===0||r>32||t[1]!==String(r)){logger$x.throwArgumentError("invalid bytes width","type",e)}return function(t){const n=arrayify(t);if(n.length!==r){logger$x.throwArgumentError(`invalid length for ${e}`,"value",t)}return hexPadRight(t)}}}switch(e){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return!e?hexFalse:hexTrue};case"bytes":return function(e){return keccak256$1(e)};case"string":return function(e){return id(e)}}return null}function encodeType(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy(e)));defineReadOnly(this,"_encoderCache",{});defineReadOnly(this,"_types",{});const t={};const r={};const n={};Object.keys(e).forEach((e=>{t[e]={};r[e]=[];n[e]={}}));for(const n in e){const i={};e[n].forEach((s=>{if(i[s.name]){logger$x.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e)}i[s.name]=true;const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];if(a===n){logger$x.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e)}const o=getBaseEncoder(a);if(o){return}if(!r[a]){logger$x.throwArgumentError(`unknown type ${JSON.stringify(a)}`,"types",e)}r[a].push(n);t[n][a]=true}))}const i=Object.keys(r).filter((e=>r[e].length===0));if(i.length===0){logger$x.throwArgumentError("missing primary type","types",e)}else if(i.length>1){logger$x.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e)}defineReadOnly(this,"primaryType",i[0]);function s(i,a){if(a[i]){logger$x.throwArgumentError(`circular type reference to ${JSON.stringify(i)}`,"types",e)}a[i]=true;Object.keys(t[i]).forEach((e=>{if(!r[e]){return}s(e,a);Object.keys(a).forEach((t=>{n[t][e]=true}))}));delete a[i]}s(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort();this._types[t]=encodeType(t,e[t])+r.map((t=>encodeType(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];if(!t){t=this._encoderCache[e]=this._getEncoder(e)}return t}_getEncoder(e){{const t=getBaseEncoder(e);if(t){return t}}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1];const r=this.getEncoder(e);const n=parseInt(t[3]);return t=>{if(n>=0&&t.length!==n){logger$x.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t)}let i=t.map(r);if(this._types[e]){i=i.map(keccak256$1)}return keccak256$1(hexConcat(i))}}const r=this.types[e];if(r){const t=id(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);if(this._types[r]){return keccak256$1(n)}return n}));n.unshift(t);return hexConcat(n)}}return logger$x.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];if(!t){logger$x.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e)}return t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return keccak256$1(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){{const n=getBaseEncoder(e);if(n){return r(e,t)}}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1];const i=parseInt(n[3]);if(i>=0&&t.length!==i){logger$x.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t)}return t.map((t=>this._visit(e,t,r)))}const i=this.types[e];if(i){return i.reduce(((e,{name:n,type:i})=>{e[n]=this._visit(i,t[n],r);return e}),{})}return logger$x.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,t,r){return TypedDataEncoder.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=domainFieldTypes[r];if(!n){logger$x.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e)}t.push({name:r,type:n})}t.sort(((e,t)=>domainFieldNames.indexOf(e.name)-domainFieldNames.indexOf(t.name)));return TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(t).hash(r)])}static hash(e,t,r){return keccak256$1(TypedDataEncoder.encode(e,t,r))}static resolveNames(e,t,r,n){return __awaiter$g(this,void 0,void 0,(function*(){e=shallowCopy(e);const i={};if(e.verifyingContract&&!isHexString(e.verifyingContract,20)){i[e.verifyingContract]="0x"}const s=TypedDataEncoder.from(t);s.visit(r,((e,t)=>{if(e==="address"&&!isHexString(t,20)){i[t]="0x"}return t}));for(const e in i){i[e]=yield n(e)}if(e.verifyingContract&&i[e.verifyingContract]){e.verifyingContract=i[e.verifyingContract]}r=s.visit(r,((e,t)=>{if(e==="address"&&i[t]){return i[t]}return t}));return{domain:e,value:r}}))}static getPayload(e,t,r){TypedDataEncoder.hashDomain(e);const n={};const i=[];domainFieldNames.forEach((t=>{const r=e[t];if(r==null){return}n[t]=domainChecks[t](r);i.push({name:t,type:domainFieldTypes[t]})}));const s=TypedDataEncoder.from(t);const a=shallowCopy(t);if(a.EIP712Domain){logger$x.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t)}else{a.EIP712Domain=i}s.encode(r);return{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/)){return hexlify(arrayify(t))}if(e.match(/^u?int/)){return BigNumber$1.from(t).toString()}switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":if(typeof t!=="string"){logger$x.throwArgumentError(`invalid string`,"value",t)}return t}return logger$x.throwArgumentError("unsupported type","type",e)}))}}}const lib_esm$d=Object.freeze({__proto__:null,id,dnsEncode,namehash,isValidName,ensNormalize,messagePrefix,hashMessage,_TypedDataEncoder:TypedDataEncoder});const logger$w=new Logger(version$l);class LogDescription extends Description{}class TransactionDescription extends Description{}class ErrorDescription extends Description{}class Indexed extends Description{static isIndexed(e){return!!(e&&e._isIndexed)}}const BuiltinErrors={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:true},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function wrapAccessError(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);r.error=t;return r}class Interface{constructor(e){let t=[];if(typeof e==="string"){t=JSON.parse(e)}else{t=e}defineReadOnly(this,"fragments",t.map((e=>Fragment.from(e))).filter((e=>e!=null)));defineReadOnly(this,"_abiCoder",getStatic(new.target,"getAbiCoder")());defineReadOnly(this,"functions",{});defineReadOnly(this,"errors",{});defineReadOnly(this,"events",{});defineReadOnly(this,"structs",{});this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":if(this.deploy){logger$w.warn("duplicate definition - constructor");return}defineReadOnly(this,"deploy",e);return;case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();if(t[r]){logger$w.warn("duplicate definition - "+r);return}t[r]=e}));if(!this.deploy){defineReadOnly(this,"deploy",ConstructorFragment.from({payable:false,type:"constructor"}))}defineReadOnly(this,"_isInterface",true)}format(e){if(!e){e=FormatTypes.full}if(e===FormatTypes.sighash){logger$w.throwArgumentError("interface does not support formatting sighash","format",e)}const t=this.fragments.map((t=>t.format(e)));if(e===FormatTypes.json){return JSON.stringify(t.map((e=>JSON.parse(e))))}return t}static getAbiCoder(){return defaultAbiCoder}static getAddress(e){return getAddress(e)}static getSighash(e){return hexDataSlice(id(e.format()),0,4)}static getEventTopic(e){return id(e.format())}getFunction(e){if(isHexString(e)){for(const t in this.functions){if(e===this.getSighash(t)){return this.functions[t]}}logger$w.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$w.throwArgumentError("no matching function","name",t)}else if(r.length>1){logger$w.throwArgumentError("multiple matching functions","name",t)}return this.functions[r[0]]}const t=this.functions[FunctionFragment.fromString(e).format()];if(!t){logger$w.throwArgumentError("no matching function","signature",e)}return t}getEvent(e){if(isHexString(e)){const t=e.toLowerCase();for(const e in this.events){if(t===this.getEventTopic(e)){return this.events[e]}}logger$w.throwArgumentError("no matching event","topichash",t)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.events).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$w.throwArgumentError("no matching event","name",t)}else if(r.length>1){logger$w.throwArgumentError("multiple matching events","name",t)}return this.events[r[0]]}const t=this.events[EventFragment.fromString(e).format()];if(!t){logger$w.throwArgumentError("no matching event","signature",e)}return t}getError(e){if(isHexString(e)){const t=getStatic(this.constructor,"getSighash");for(const r in this.errors){const n=this.errors[r];if(e===t(n)){return this.errors[r]}}logger$w.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const t=e.trim();const r=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));if(r.length===0){logger$w.throwArgumentError("no matching error","name",t)}else if(r.length>1){logger$w.throwArgumentError("multiple matching errors","name",t)}return this.errors[r[0]]}const t=this.errors[FunctionFragment.fromString(e).format()];if(!t){logger$w.throwArgumentError("no matching error","signature",e)}return t}getSighash(e){if(typeof e==="string"){try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}}return getStatic(this.constructor,"getSighash")(e)}getEventTopic(e){if(typeof e==="string"){e=this.getEvent(e)}return getStatic(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e==="string"){e=this.getError(e)}const r=arrayify(t);if(hexlify(r.slice(0,4))!==this.getSighash(e)){logger$w.throwArgumentError(`data signature does not match error ${e.name}.`,"data",hexlify(r))}return this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){if(typeof e==="string"){e=this.getError(e)}return hexlify(concat$2([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){if(typeof e==="string"){e=this.getFunction(e)}const r=arrayify(t);if(hexlify(r.slice(0,4))!==this.getSighash(e)){logger$w.throwArgumentError(`data signature does not match function ${e.name}.`,"data",hexlify(r))}return this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){if(typeof e==="string"){e=this.getFunction(e)}return hexlify(concat$2([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){if(typeof e==="string"){e=this.getFunction(e)}let r=arrayify(t);let n=null;let i="";let s=null;let a=null;let o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const e=hexlify(r.slice(0,4));const t=BuiltinErrors[e];if(t){s=this._abiCoder.decode(t.inputs,r.slice(4));a=t.name;o=t.signature;if(t.reason){n=s[0]}if(a==="Error"){i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(s[0])}`}else if(a==="Panic"){i=`; VM Exception while processing transaction: reverted with panic code ${s[0]}`}}else{try{const t=this.getError(e);s=this._abiCoder.decode(t.inputs,r.slice(4));a=t.name;o=t.format()}catch(e){}}break}}return logger$w.throwError("call revert exception"+i,Logger.errors.CALL_EXCEPTION,{method:e.format(),data:hexlify(t),errorArgs:s,errorName:a,errorSignature:o,reason:n})}encodeFunctionResult(e,t){if(typeof e==="string"){e=this.getFunction(e)}return hexlify(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e==="string"){e=this.getEvent(e)}if(t.length>e.inputs.length){logger$w.throwError("too many arguments for "+e.format(),Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t})}let r=[];if(!e.anonymous){r.push(this.getEventTopic(e))}const n=(e,t)=>{if(e.type==="string"){return id(t)}else if(e.type==="bytes"){return keccak256$1(hexlify(t))}if(e.type==="bool"&&typeof t==="boolean"){t=t?"0x01":"0x00"}if(e.type.match(/^u?int/)){t=BigNumber$1.from(t).toHexString()}if(e.type==="address"){this._abiCoder.encode(["address"],[t])}return hexZeroPad(hexlify(t),32)};t.forEach(((t,i)=>{let s=e.inputs[i];if(!s.indexed){if(t!=null){logger$w.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}return}if(t==null){r.push(null)}else if(s.baseType==="array"||s.baseType==="tuple"){logger$w.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t)}else if(Array.isArray(t)){r.push(t.map((e=>n(s,e))))}else{r.push(n(s,t))}}));while(r.length&&r[r.length-1]===null){r.pop()}return r}encodeEventLog(e,t){if(typeof e==="string"){e=this.getEvent(e)}const r=[];const n=[];const i=[];if(!e.anonymous){r.push(this.getEventTopic(e))}if(t.length!==e.inputs.length){logger$w.throwArgumentError("event arguments/values mismatch","values",t)}e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed){if(e.type==="string"){r.push(id(a))}else if(e.type==="bytes"){r.push(keccak256$1(a))}else if(e.baseType==="tuple"||e.baseType==="array"){throw new Error("not implemented")}else{r.push(this._abiCoder.encode([e.type],[a]))}}else{n.push(e);i.push(a)}}));return{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if(typeof e==="string"){e=this.getEvent(e)}if(r!=null&&!e.anonymous){let t=this.getEventTopic(e);if(!isHexString(r[0],32)||r[0].toLowerCase()!==t){logger$w.throwError("fragment/topic mismatch",Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]})}r=r.slice(1)}let n=[];let i=[];let s=[];e.inputs.forEach(((e,t)=>{if(e.indexed){if(e.type==="string"||e.type==="bytes"||e.baseType==="tuple"||e.baseType==="array"){n.push(ParamType.fromObject({type:"bytes32",name:e.name}));s.push(true)}else{n.push(e);s.push(false)}}else{i.push(e);s.push(false)}}));let a=r!=null?this._abiCoder.decode(n,concat$2(r)):null;let o=this._abiCoder.decode(i,t,true);let f=[];let c=0,u=0;e.inputs.forEach(((e,t)=>{if(e.indexed){if(a==null){f[t]=new Indexed({_isIndexed:true,hash:null})}else if(s[t]){f[t]=new Indexed({_isIndexed:true,hash:a[u++]})}else{try{f[t]=a[u++]}catch(e){f[t]=e}}}else{try{f[t]=o[c++]}catch(e){f[t]=e}}if(e.name&&f[e.name]==null){const r=f[t];if(r instanceof Error){Object.defineProperty(f,e.name,{enumerable:true,get:()=>{throw wrapAccessError(`property ${JSON.stringify(e.name)}`,r)}})}else{f[e.name]=r}}}));for(let e=0;e<f.length;e++){const t=f[e];if(t instanceof Error){Object.defineProperty(f,e,{enumerable:true,get:()=>{throw wrapAccessError(`index ${e}`,t)}})}}return Object.freeze(f)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());if(!t){return null}return new TransactionDescription({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:BigNumber$1.from(e.value||"0")})}parseLog(e){let t=this.getEvent(e.topics[0]);if(!t||t.anonymous){return null}return new LogDescription({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=hexlify(e);let r=this.getError(t.substring(0,10).toLowerCase());if(!r){return null}return new ErrorDescription({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)})}static isInterface(e){return!!(e&&e._isInterface)}}const lib_esm$c=Object.freeze({__proto__:null,ConstructorFragment,ErrorFragment,EventFragment,Fragment,FunctionFragment,ParamType,FormatTypes,AbiCoder,defaultAbiCoder,Interface,Indexed,checkResultErrors,LogDescription,TransactionDescription});const version$g="abstract-provider/5.7.0";var __awaiter$f=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$v=new Logger(version$g);class ForkEvent extends Description{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Provider{constructor(){logger$v.checkAbstract(new.target,Provider);defineReadOnly(this,"_isProvider",true)}getFeeData(){return __awaiter$f(this,void 0,void 0,(function*(){const{block:e,gasPrice:t}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null,i=null;if(e&&e.baseFeePerGas){r=e.baseFeePerGas;i=BigNumber$1.from("1500000000");n=e.baseFeePerGas.mul(2).add(i)}return{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}}))}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!!(e&&e._isProvider)}}const version$f="abstract-signer/5.7.0";var __awaiter$e=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$u=new Logger(version$f);const allowedTransactionKeys$3=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"];const forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$u.checkAbstract(new.target,Signer);defineReadOnly(this,"_isSigner",true)}getBalance(e){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("getBalance");return yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("getTransactionCount");return yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e);const r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("getChainId");const e=yield this.provider.getNetwork();return e.chainId}))}getGasPrice(){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("getGasPrice");return yield this.provider.getGasPrice()}))}getFeeData(){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("getFeeData");return yield this.provider.getFeeData()}))}resolveName(e){return __awaiter$e(this,void 0,void 0,(function*(){this._checkProvider("resolveName");return yield this.provider.resolveName(e)}))}checkTransaction(e){for(const t in e){if(allowedTransactionKeys$3.indexOf(t)===-1){logger$u.throwArgumentError("invalid transaction key: "+t,"transaction",e)}}const t=shallowCopy(e);if(t.from==null){t.from=this.getAddress()}else{t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>{if(t[0].toLowerCase()!==t[1].toLowerCase()){logger$u.throwArgumentError("from address mismatch","transaction",e)}return t[0]}))}return t}populateTransaction(e){return __awaiter$e(this,void 0,void 0,(function*(){const t=yield resolveProperties(this.checkTransaction(e));if(t.to!=null){t.to=Promise.resolve(t.to).then((e=>__awaiter$e(this,void 0,void 0,(function*(){if(e==null){return null}const t=yield this.resolveName(e);if(t==null){logger$u.throwArgumentError("provided ENS name resolves to null","tx.to",e)}return t}))));t.to.catch((e=>{}))}const r=t.maxFeePerGas!=null||t.maxPriorityFeePerGas!=null;if(t.gasPrice!=null&&(t.type===2||r)){logger$u.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e)}else if((t.type===0||t.type===1)&&r){logger$u.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e)}if((t.type===2||t.type==null)&&(t.maxFeePerGas!=null&&t.maxPriorityFeePerGas!=null)){t.type=2}else if(t.type===0||t.type===1){if(t.gasPrice==null){t.gasPrice=this.getGasPrice()}}else{const e=yield this.getFeeData();if(t.type==null){if(e.maxFeePerGas!=null&&e.maxPriorityFeePerGas!=null){t.type=2;if(t.gasPrice!=null){const e=t.gasPrice;delete t.gasPrice;t.maxFeePerGas=e;t.maxPriorityFeePerGas=e}else{if(t.maxFeePerGas==null){t.maxFeePerGas=e.maxFeePerGas}if(t.maxPriorityFeePerGas==null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}else if(e.gasPrice!=null){if(r){logger$u.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"})}if(t.gasPrice==null){t.gasPrice=e.gasPrice}t.type=0}else{logger$u.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}}else if(t.type===2){if(t.maxFeePerGas==null){t.maxFeePerGas=e.maxFeePerGas}if(t.maxPriorityFeePerGas==null){t.maxPriorityFeePerGas=e.maxPriorityFeePerGas}}}if(t.nonce==null){t.nonce=this.getTransactionCount("pending")}if(t.gasLimit==null){t.gasLimit=this.estimateGas(t).catch((e=>{if(forwardErrors.indexOf(e.code)>=0){throw e}return logger$u.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))}if(t.chainId==null){t.chainId=this.getChainId()}else{t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>{if(t[1]!==0&&t[0]!==t[1]){logger$u.throwArgumentError("chainId address mismatch","transaction",e)}return t[0]}))}return yield resolveProperties(t)}))}_checkProvider(e){if(!this.provider){logger$u.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}static isSigner(e){return!!(e&&e._isSigner)}}class VoidSigner extends Signer{constructor(e,t){super();defineReadOnly(this,"address",e);defineReadOnly(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{logger$u.throwError(e,Logger.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new VoidSigner(this.address,e)}}var minimalisticAssert$1=assert$a;function assert$a(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$a.equal=function e(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var inherits_browser$1=createCommonjsModule$2((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}}));var inherits_1=inherits_browser$1;function isSurrogatePair(e,t){if((e.charCodeAt(t)&64512)!==55296){return false}if(t<0||t+1>=e.length){return false}return(e.charCodeAt(t+1)&64512)===56320}function toArray(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e==="string"){if(!t){var n=0;for(var i=0;i<e.length;i++){var s=e.charCodeAt(i);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if(isSurrogatePair(e,i)){s=65536+((s&1023)<<10)+(e.charCodeAt(++i)&1023);r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}}else if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}}else{for(i=0;i<e.length;i++)r[i]=e[i]|0}return r}var toArray_1=toArray;function toHex$1(e){var t="";for(var r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t}var toHex_1=toHex$1;function htonl(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}var htonl_1=htonl;function toHex32(e,t){var r="";for(var n=0;n<e.length;n++){var i=e[n];if(t==="little")i=htonl(i);r+=zero8(i.toString(16))}return r}var toHex32_1=toHex32;function zero2(e){if(e.length===1)return"0"+e;else return e}var zero2_1=zero2;function zero8(e){if(e.length===7)return"0"+e;else if(e.length===6)return"00"+e;else if(e.length===5)return"000"+e;else if(e.length===4)return"0000"+e;else if(e.length===3)return"00000"+e;else if(e.length===2)return"000000"+e;else if(e.length===1)return"0000000"+e;else return e}var zero8_1=zero8;function join32(e,t,r,n){var i=r-t;minimalisticAssert$1(i%4===0);var s=new Array(i/4);for(var a=0,o=t;a<s.length;a++,o+=4){var f;if(n==="big")f=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3];else f=e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o];s[a]=f>>>0}return s}var join32_1=join32;function split32(e,t){var r=new Array(e.length*4);for(var n=0,i=0;n<e.length;n++,i+=4){var s=e[n];if(t==="big"){r[i]=s>>>24;r[i+1]=s>>>16&255;r[i+2]=s>>>8&255;r[i+3]=s&255}else{r[i+3]=s>>>24;r[i+2]=s>>>16&255;r[i+1]=s>>>8&255;r[i]=s&255}}return r}var split32_1=split32;function rotr32$1(e,t){return e>>>t|e<<32-t}var rotr32_1=rotr32$1;function rotl32$2(e,t){return e<<t|e>>>32-t}var rotl32_1=rotl32$2;function sum32$3(e,t){return e+t>>>0}var sum32_1=sum32$3;function sum32_3$1(e,t,r){return e+t+r>>>0}var sum32_3_1=sum32_3$1;function sum32_4$2(e,t,r,n){return e+t+r+n>>>0}var sum32_4_1=sum32_4$2;function sum32_5$2(e,t,r,n,i){return e+t+r+n+i>>>0}var sum32_5_1=sum32_5$2;function sum64$1(e,t,r,n){var i=e[t];var s=e[t+1];var a=n+s>>>0;var o=(a<n?1:0)+r+i;e[t]=o>>>0;e[t+1]=a}var sum64_1=sum64$1;function sum64_hi$1(e,t,r,n){var i=t+n>>>0;var s=(i<t?1:0)+e+r;return s>>>0}var sum64_hi_1=sum64_hi$1;function sum64_lo$1(e,t,r,n){var i=t+n;return i>>>0}var sum64_lo_1=sum64_lo$1;function sum64_4_hi$1(e,t,r,n,i,s,a,o){var f=0;var c=t;c=c+n>>>0;f+=c<t?1:0;c=c+s>>>0;f+=c<s?1:0;c=c+o>>>0;f+=c<o?1:0;var u=e+r+i+a+f;return u>>>0}var sum64_4_hi_1=sum64_4_hi$1;function sum64_4_lo$1(e,t,r,n,i,s,a,o){var f=t+n+s+o;return f>>>0}var sum64_4_lo_1=sum64_4_lo$1;function sum64_5_hi$1(e,t,r,n,i,s,a,o,f,c){var u=0;var l=t;l=l+n>>>0;u+=l<t?1:0;l=l+s>>>0;u+=l<s?1:0;l=l+o>>>0;u+=l<o?1:0;l=l+c>>>0;u+=l<c?1:0;var h=e+r+i+a+f+u;return h>>>0}var sum64_5_hi_1=sum64_5_hi$1;function sum64_5_lo$1(e,t,r,n,i,s,a,o,f,c){var u=t+n+s+o+c;return u>>>0}var sum64_5_lo_1=sum64_5_lo$1;function rotr64_hi$1(e,t,r){var n=t<<32-r|e>>>r;return n>>>0}var rotr64_hi_1=rotr64_hi$1;function rotr64_lo$1(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}var rotr64_lo_1=rotr64_lo$1;function shr64_hi$1(e,t,r){return e>>>r}var shr64_hi_1=shr64_hi$1;function shr64_lo$1(e,t,r){var n=e<<32-r|t>>>r;return n>>>0}var shr64_lo_1=shr64_lo$1;var utils$7={inherits:inherits_1,toArray:toArray_1,toHex:toHex_1,htonl:htonl_1,toHex32:toHex32_1,zero2:zero2_1,zero8:zero8_1,join32:join32_1,split32:split32_1,rotr32:rotr32_1,rotl32:rotl32_1,sum32:sum32_1,sum32_3:sum32_3_1,sum32_4:sum32_4_1,sum32_5:sum32_5_1,sum64:sum64_1,sum64_hi:sum64_hi_1,sum64_lo:sum64_lo_1,sum64_4_hi:sum64_4_hi_1,sum64_4_lo:sum64_4_lo_1,sum64_5_hi:sum64_5_hi_1,sum64_5_lo:sum64_5_lo_1,rotr64_hi:rotr64_hi_1,rotr64_lo:rotr64_lo_1,shr64_hi:shr64_hi_1,shr64_lo:shr64_lo_1};function BlockHash$4(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}var BlockHash_1=BlockHash$4;BlockHash$4.prototype.update=function e(t,r){t=utils$7.toArray(t,r);if(!this.pending)this.pending=t;else this.pending=this.pending.concat(t);this.pendingTotal+=t.length;if(this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length);if(this.pending.length===0)this.pending=null;t=utils$7.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this};BlockHash$4.prototype.digest=function e(t){this.update(this._pad());minimalisticAssert$1(this.pending===null);return this._digest(t)};BlockHash$4.prototype._pad=function e(){var t=this.pendingTotal;var r=this._delta8;var n=r-(t+this.padLength)%r;var i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;t<<=3;if(this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=t>>>24&255;i[s++]=t>>>16&255;i[s++]=t>>>8&255;i[s++]=t&255}else{i[s++]=t&255;i[s++]=t>>>8&255;i[s++]=t>>>16&255;i[s++]=t>>>24&255;i[s++]=0;i[s++]=0;i[s++]=0;i[s++]=0;for(a=8;a<this.padLength;a++)i[s++]=0}return i};var common$2={BlockHash:BlockHash_1};var rotr32=utils$7.rotr32;function ft_1$1(e,t,r,n){if(e===0)return ch32$1(t,r,n);if(e===1||e===3)return p32(t,r,n);if(e===2)return maj32$1(t,r,n)}var ft_1_1=ft_1$1;function ch32$1(e,t,r){return e&t^~e&r}var ch32_1=ch32$1;function maj32$1(e,t,r){return e&t^e&r^t&r}var maj32_1=maj32$1;function p32(e,t,r){return e^t^r}var p32_1=p32;function s0_256$1(e){return rotr32(e,2)^rotr32(e,13)^rotr32(e,22)}var s0_256_1=s0_256$1;function s1_256$1(e){return rotr32(e,6)^rotr32(e,11)^rotr32(e,25)}var s1_256_1=s1_256$1;function g0_256$1(e){return rotr32(e,7)^rotr32(e,18)^e>>>3}var g0_256_1=g0_256$1;function g1_256$1(e){return rotr32(e,17)^rotr32(e,19)^e>>>10}var g1_256_1=g1_256$1;var common$1={ft_1:ft_1_1,ch32:ch32_1,maj32:maj32_1,p32:p32_1,s0_256:s0_256_1,s1_256:s1_256_1,g0_256:g0_256_1,g1_256:g1_256_1};var rotl32$1=utils$7.rotl32;var sum32$2=utils$7.sum32;var sum32_5$1=utils$7.sum32_5;var ft_1=common$1.ft_1;var BlockHash$3=common$2.BlockHash;var sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1$2(){if(!(this instanceof SHA1$2))return new SHA1$2;BlockHash$3.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils$7.inherits(SHA1$2,BlockHash$3);var _1=SHA1$2;SHA1$2.blockSize=512;SHA1$2.outSize=160;SHA1$2.hmacStrength=80;SHA1$2.padLength=64;SHA1$2.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=rotl32$1(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20);var l=sum32_5$1(rotl32$1(s,5),ft_1(u,a,o,f),c,n[i],sha1_K[u]);c=f;f=o;o=rotl32$1(a,30);a=s;s=l}this.h[0]=sum32$2(this.h[0],s);this.h[1]=sum32$2(this.h[1],a);this.h[2]=sum32$2(this.h[2],o);this.h[3]=sum32$2(this.h[3],f);this.h[4]=sum32$2(this.h[4],c)};SHA1$2.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h,"big");else return utils$7.split32(this.h,"big")};var sum32$1=utils$7.sum32;var sum32_4$1=utils$7.sum32_4;var sum32_5=utils$7.sum32_5;var ch32=common$1.ch32;var maj32=common$1.maj32;var s0_256=common$1.s0_256;var s1_256=common$1.s1_256;var g0_256=common$1.g0_256;var g1_256=common$1.g1_256;var BlockHash$2=common$2.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils$7.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512;SHA256$2.outSize=256;SHA256$2.hmacStrength=192;SHA256$2.padLength=64;SHA256$2.prototype._update=function e(t,r){var n=this.W;for(var i=0;i<16;i++)n[i]=t[r+i];for(;i<n.length;i++)n[i]=sum32_4$1(g1_256(n[i-2]),n[i-7],g0_256(n[i-15]),n[i-16]);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];var u=this.h[5];var l=this.h[6];var h=this.h[7];minimalisticAssert$1(this.k.length===n.length);for(i=0;i<n.length;i++){var d=sum32_5(h,s1_256(c),ch32(c,u,l),this.k[i],n[i]);var p=sum32$1(s0_256(s),maj32(s,a,o));h=l;l=u;u=c;c=sum32$1(f,d);f=o;o=a;a=s;s=sum32$1(d,p)}this.h[0]=sum32$1(this.h[0],s);this.h[1]=sum32$1(this.h[1],a);this.h[2]=sum32$1(this.h[2],o);this.h[3]=sum32$1(this.h[3],f);this.h[4]=sum32$1(this.h[4],c);this.h[5]=sum32$1(this.h[5],u);this.h[6]=sum32$1(this.h[6],l);this.h[7]=sum32$1(this.h[7],h)};SHA256$2.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h,"big");else return utils$7.split32(this.h,"big")};function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;_256.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$7.inherits(SHA224$1,_256);var _224=SHA224$1;SHA224$1.blockSize=512;SHA224$1.outSize=224;SHA224$1.hmacStrength=192;SHA224$1.padLength=64;SHA224$1.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h.slice(0,7),"big");else return utils$7.split32(this.h.slice(0,7),"big")};var rotr64_hi=utils$7.rotr64_hi;var rotr64_lo=utils$7.rotr64_lo;var shr64_hi=utils$7.shr64_hi;var shr64_lo=utils$7.shr64_lo;var sum64=utils$7.sum64;var sum64_hi=utils$7.sum64_hi;var sum64_lo=utils$7.sum64_lo;var sum64_4_hi=utils$7.sum64_4_hi;var sum64_4_lo=utils$7.sum64_4_lo;var sum64_5_hi=utils$7.sum64_5_hi;var sum64_5_lo=utils$7.sum64_5_lo;var BlockHash$1=common$2.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils$7.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024;SHA512$2.outSize=512;SHA512$2.hmacStrength=192;SHA512$2.padLength=128;SHA512$2.prototype._prepareBlock=function e(t,r){var n=this.W;for(var i=0;i<32;i++)n[i]=t[r+i];for(;i<n.length;i+=2){var s=g1_512_hi(n[i-4],n[i-3]);var a=g1_512_lo(n[i-4],n[i-3]);var o=n[i-14];var f=n[i-13];var c=g0_512_hi(n[i-30],n[i-29]);var u=g0_512_lo(n[i-30],n[i-29]);var l=n[i-32];var h=n[i-31];n[i]=sum64_4_hi(s,a,o,f,c,u,l,h);n[i+1]=sum64_4_lo(s,a,o,f,c,u,l,h)}};SHA512$2.prototype._update=function e(t,r){this._prepareBlock(t,r);var n=this.W;var i=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=this.h[5];var u=this.h[6];var l=this.h[7];var h=this.h[8];var d=this.h[9];var p=this.h[10];var y=this.h[11];var m=this.h[12];var g=this.h[13];var b=this.h[14];var v=this.h[15];minimalisticAssert$1(this.k.length===n.length);for(var w=0;w<n.length;w+=2){var A=b;var E=v;var _=s1_512_hi(h,d);var S=s1_512_lo(h,d);var $=ch64_hi(h,d,p,y,m);var T=ch64_lo(h,d,p,y,m,g);var C=this.k[w];var P=this.k[w+1];var x=n[w];var I=n[w+1];var k=sum64_5_hi(A,E,_,S,$,T,C,P,x,I);var N=sum64_5_lo(A,E,_,S,$,T,C,P,x,I);A=s0_512_hi(i,s);E=s0_512_lo(i,s);_=maj64_hi(i,s,a,o,f);S=maj64_lo(i,s,a,o,f,c);var R=sum64_hi(A,E,_,S);var M=sum64_lo(A,E,_,S);b=m;v=g;m=p;g=y;p=h;y=d;h=sum64_hi(u,l,k,N);d=sum64_lo(l,l,k,N);u=f;l=c;f=a;c=o;a=i;o=s;i=sum64_hi(k,N,R,M);s=sum64_lo(k,N,R,M)}sum64(this.h,0,i,s);sum64(this.h,2,a,o);sum64(this.h,4,f,c);sum64(this.h,6,u,l);sum64(this.h,8,h,d);sum64(this.h,10,p,y);sum64(this.h,12,m,g);sum64(this.h,14,b,v)};SHA512$2.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h,"big");else return utils$7.split32(this.h,"big")};function ch64_hi(e,t,r,n,i){var s=e&r^~e&i;if(s<0)s+=4294967296;return s}function ch64_lo(e,t,r,n,i,s){var a=t&n^~t&s;if(a<0)a+=4294967296;return a}function maj64_hi(e,t,r,n,i){var s=e&r^e&i^r&i;if(s<0)s+=4294967296;return s}function maj64_lo(e,t,r,n,i,s){var a=t&n^t&s^n&s;if(a<0)a+=4294967296;return a}function s0_512_hi(e,t){var r=rotr64_hi(e,t,28);var n=rotr64_hi(t,e,2);var i=rotr64_hi(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s0_512_lo(e,t){var r=rotr64_lo(e,t,28);var n=rotr64_lo(t,e,2);var i=rotr64_lo(t,e,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_hi(e,t){var r=rotr64_hi(e,t,14);var n=rotr64_hi(e,t,18);var i=rotr64_hi(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function s1_512_lo(e,t){var r=rotr64_lo(e,t,14);var n=rotr64_lo(e,t,18);var i=rotr64_lo(t,e,9);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_hi(e,t){var r=rotr64_hi(e,t,1);var n=rotr64_hi(e,t,8);var i=shr64_hi(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g0_512_lo(e,t){var r=rotr64_lo(e,t,1);var n=rotr64_lo(e,t,8);var i=shr64_lo(e,t,7);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_hi(e,t){var r=rotr64_hi(e,t,19);var n=rotr64_hi(t,e,29);var i=shr64_hi(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function g1_512_lo(e,t){var r=rotr64_lo(e,t,19);var n=rotr64_lo(t,e,29);var i=shr64_lo(e,t,6);var s=r^n^i;if(s<0)s+=4294967296;return s}function SHA384$2(){if(!(this instanceof SHA384$2))return new SHA384$2;_512.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$7.inherits(SHA384$2,_512);var _384=SHA384$2;SHA384$2.blockSize=1024;SHA384$2.outSize=384;SHA384$2.hmacStrength=192;SHA384$2.padLength=128;SHA384$2.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h.slice(0,12),"big");else return utils$7.split32(this.h.slice(0,12),"big")};var sha1$1=_1;var sha224=_224;var sha256$2=_256;var sha384=_384;var sha512$1=_512;var sha$1={sha1:sha1$1,sha224,sha256:sha256$2,sha384,sha512:sha512$1};var rotl32=utils$7.rotl32;var sum32=utils$7.sum32;var sum32_3=utils$7.sum32_3;var sum32_4=utils$7.sum32_4;var BlockHash=common$2.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils$7.inherits(RIPEMD160,BlockHash);var ripemd160$1=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function e(t,r){var n=this.h[0];var i=this.h[1];var a=this.h[2];var o=this.h[3];var c=this.h[4];var u=n;var l=i;var h=a;var d=o;var p=c;for(var y=0;y<80;y++){var m=sum32(rotl32(sum32_4(n,f(y,i,a,o),t[r$1[y]+r],K(y)),s[y]),c);n=c;c=o;o=rotl32(a,10);a=i;i=m;m=sum32(rotl32(sum32_4(u,f(79-y,l,h,d),t[rh[y]+r],Kh(y)),sh[y]),p);u=p;p=d;d=rotl32(h,10);h=l;l=m}m=sum32_3(this.h[1],a,d);this.h[1]=sum32_3(this.h[2],o,p);this.h[2]=sum32_3(this.h[3],c,u);this.h[3]=sum32_3(this.h[4],n,l);this.h[4]=sum32_3(this.h[0],i,h);this.h[0]=m};RIPEMD160.prototype._digest=function e(t){if(t==="hex")return utils$7.toHex32(this.h,"little");else return utils$7.split32(this.h,"little")};function f(e,t,r,n){if(e<=15)return t^r^n;else if(e<=31)return t&r|~t&n;else if(e<=47)return(t|~r)^n;else if(e<=63)return t&n|r&~n;else return t^(r|~n)}function K(e){if(e<=15)return 0;else if(e<=31)return 1518500249;else if(e<=47)return 1859775393;else if(e<=63)return 2400959708;else return 2840853838}function Kh(e){if(e<=15)return 1352829926;else if(e<=31)return 1548603684;else if(e<=47)return 1836072691;else if(e<=63)return 2053994217;else return 0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var ripemd={ripemd160:ripemd160$1};function Hmac$1(e,t,r){if(!(this instanceof Hmac$1))return new Hmac$1(e,t,r);this.Hash=e;this.blockSize=e.blockSize/8;this.outSize=e.outSize/8;this.inner=null;this.outer=null;this._init(utils$7.toArray(t,r))}var hmac=Hmac$1;Hmac$1.prototype._init=function e(t){if(t.length>this.blockSize)t=(new this.Hash).update(t).digest();minimalisticAssert$1(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;this.inner=(new this.Hash).update(t);for(r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)};Hmac$1.prototype.update=function e(t,r){this.inner.update(t,r);return this};Hmac$1.prototype.digest=function e(t){this.outer.update(this.inner.digest());return this.outer.digest(t)};var hash_1$2=createCommonjsModule$2((function(e,t){var r=t;r.utils=utils$7;r.common=common$2;r.sha=sha$1;r.ripemd=ripemd;r.hmac=hmac;r.sha1=r.sha.sha1;r.sha256=r.sha.sha256;r.sha224=r.sha.sha224;r.sha384=r.sha.sha384;r.sha512=r.sha.sha512;r.ripemd160=r.ripemd.ripemd160}));function createCommonjsModule(e,t,r){return r={path:t,exports:{},require:function(e,t){return commonjsRequire()}},e(r,r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$9;function assert$9(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$9.equal=function e(t,r,n){if(t!=r)throw new Error(n||"Assertion failed: "+t+" != "+r)};var utils_1$2=createCommonjsModule((function(e,t){var r=t;function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var n=0;n<e.length;n++)r[n]=e[n]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else{for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=n;function i(e){if(e.length===1)return"0"+e;else return e}r.zero2=i;function s(e){var t="";for(var r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toHex=s;r.encode=function e(t,r){if(r==="hex")return s(t);else return t}}));var utils_1$1$1=createCommonjsModule((function(e,t){var r=t;r.assert=minimalisticAssert;r.toArray=utils_1$2.toArray;r.zero2=utils_1$2.zero2;r.toHex=utils_1$2.toHex;r.encode=utils_1$2.encode;function n(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);var i=1<<t+1;var s=e.clone();for(var a=0;a<n.length;a++){var o;var f=s.andln(i-1);if(s.isOdd()){if(f>(i>>1)-1)o=(i>>1)-f;else o=f;s.isubn(o)}else{o=0}n[a]=o;s.iushrn(1)}return n}r.getNAF=n;function i(e,t){var r=[[],[]];e=e.clone();t=t.clone();var n=0;var i=0;var s;while(e.cmpn(-n)>0||t.cmpn(-i)>0){var a=e.andln(3)+n&3;var o=t.andln(3)+i&3;if(a===3)a=-1;if(o===3)o=-1;var f;if((a&1)===0){f=0}else{s=e.andln(7)+n&7;if((s===3||s===5)&&o===2)f=-a;else f=a}r[0].push(f);var c;if((o&1)===0){c=0}else{s=t.andln(7)+i&7;if((s===3||s===5)&&a===2)c=-o;else c=o}r[1].push(c);if(2*n===f+1)n=1-n;if(2*i===c+1)i=1-i;e.iushrn(1);t.iushrn(1)}return r}r.getJSF=i;function s(e,t,r){var n="_"+t;e.prototype[t]=function e(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}r.cachedProperty=s;function a(e){return typeof e==="string"?r.toArray(e,"hex"):e}r.parseBytes=a;function o(e){return new bn$1(e,"hex","le")}r.intFromLE=o}));var getNAF$1=utils_1$1$1.getNAF;var getJSF$1=utils_1$1$1.getJSF;var assert$1$1=utils_1$1$1.assert;function BaseCurve$1(e,t){this.type=e;this.p=new bn$1(t.p,16);this.red=t.prime?bn$1.red(t.prime):bn$1.mont(this.p);this.zero=new bn$1(0).toRed(this.red);this.one=new bn$1(1).toRed(this.red);this.two=new bn$1(2).toRed(this.red);this.n=t.n&&new bn$1(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$5=BaseCurve$1;BaseCurve$1.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function e(t,r){assert$1$1(t.precomputed);var n=t._getDoubles();var i=getNAF$1(r,1,this._bitLength);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];var o;var f;for(o=0;o<i.length;o+=n.step){f=0;for(var c=o+n.step-1;c>=o;c--)f=(f<<1)+i[c];a.push(f)}var u=this.jpoint(null,null,null);var l=this.jpoint(null,null,null);for(var h=s;h>0;h--){for(o=0;o<a.length;o++){f=a[o];if(f===h)l=l.mixedAdd(n.points[o]);else if(f===-h)l=l.mixedAdd(n.points[o].neg())}u=u.add(l)}return u.toP()};BaseCurve$1.prototype._wnafMul=function e(t,r){var n=4;var i=t._getNAFPoints(n);n=i.wnd;var s=i.points;var a=getNAF$1(r,n,this._bitLength);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0)c++;o=o.dblp(c);if(f<0)break;var u=a[f];assert$1$1(u!==0);if(t.type==="affine"){if(u>0)o=o.mixedAdd(s[u-1>>1]);else o=o.mixedAdd(s[-u-1>>1].neg())}else{if(u>0)o=o.add(s[u-1>>1]);else o=o.add(s[-u-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve$1.prototype._wnafMulAdd=function e(t,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;var u;var l;var h;for(u=0;u<i;u++){h=r[u];var d=h._getNAFPoints(t);a[u]=d.wnd;o[u]=d.points}for(u=i-1;u>=1;u-=2){var p=u-1;var y=u;if(a[p]!==1||a[y]!==1){f[p]=getNAF$1(n[p],a[p],this._bitLength);f[y]=getNAF$1(n[y],a[y],this._bitLength);c=Math.max(f[p].length,c);c=Math.max(f[y].length,c);continue}var m=[r[p],null,null,r[y]];if(r[p].y.cmp(r[y].y)===0){m[1]=r[p].add(r[y]);m[2]=r[p].toJ().mixedAdd(r[y].neg())}else if(r[p].y.cmp(r[y].y.redNeg())===0){m[1]=r[p].toJ().mixedAdd(r[y]);m[2]=r[p].add(r[y].neg())}else{m[1]=r[p].toJ().mixedAdd(r[y]);m[2]=r[p].toJ().mixedAdd(r[y].neg())}var g=[-3,-1,-5,-7,0,7,5,1,3];var b=getJSF$1(n[p],n[y]);c=Math.max(b[0].length,c);f[p]=new Array(c);f[y]=new Array(c);for(l=0;l<c;l++){var v=b[0][l]|0;var w=b[1][l]|0;f[p][l]=g[(v+1)*3+(w+1)];f[y][l]=0;o[p]=m}}var A=this.jpoint(null,null,null);var E=this._wnafT4;for(u=c;u>=0;u--){var _=0;while(u>=0){var S=true;for(l=0;l<i;l++){E[l]=f[l][u]|0;if(E[l]!==0)S=false}if(!S)break;_++;u--}if(u>=0)_++;A=A.dblp(_);if(u<0)break;for(l=0;l<i;l++){var $=E[l];if($===0)continue;else if($>0)h=o[l][$-1>>1];else if($<0)h=o[l][-$-1>>1].neg();if(h.type==="affine")A=A.mixedAdd(h);else A=A.add(h)}}for(u=0;u<i;u++)o[u]=null;if(s)return A;else return A.toP()};function BasePoint$1(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function e(t,r){t=utils_1$1$1.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){if(t[0]===6)assert$1$1(t[t.length-1]%2===0);else if(t[0]===7)assert$1$1(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n){return this.pointFromX(t.slice(1,1+n),t[0]===3)}throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint$1.prototype._encode=function e(t){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};BasePoint$1.prototype.encode=function e(t,r){return utils_1$1$1.encode(this._encode(r),t)};BasePoint$1.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint$1.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint$1.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)i=i.dbl();n.push(i)}return{step:t,points:n}};BasePoint$1.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<t)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};BasePoint$1.prototype._getBeta=function e(){return null};BasePoint$1.prototype.dblp=function e(t){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r};var inherits_browser=createCommonjsModule((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype;t.prototype=new n;t.prototype.constructor=t}}}}));var assert$2$1=utils_1$1$1.assert;function ShortCurve$1(e){base$5.call(this,"short",e);this.a=new bn$1(e.a,16).toRed(this.red);this.b=new bn$1(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve$1,base$5);var short_1$1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(t.beta){r=new bn$1(t.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(t.lambda){n=new bn$1(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];assert$2$1(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new bn$1(e.a,16),b:new bn$1(e.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};ShortCurve$1.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:bn$1.mont(t);var n=new bn$1(2).toRed(r).redInvm();var i=n.redNeg();var s=new bn$1(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};ShortCurve$1.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=t;var i=this.n.clone();var s=new bn$1(1);var a=new bn$1(0);var o=new bn$1(0);var f=new bn$1(1);var c;var u;var l;var h;var d;var p;var y;var m=0;var g;var b;while(n.cmpn(0)!==0){var v=i.div(n);g=i.sub(v.mul(n));b=o.sub(v.mul(s));var w=f.sub(v.mul(a));if(!l&&g.cmp(r)<0){c=y.neg();u=s;l=g.neg();h=b}else if(l&&++m===2){break}y=g;i=n;n=g;o=s;s=b;f=a;a=w}d=g.neg();p=b;var A=l.sqr().add(h.sqr());var E=d.sqr().add(p.sqr());if(E.cmp(A)>=0){d=c;p=u}if(l.negative){l=l.neg();h=h.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:l,b:h},{a:d,b:p}]};ShortCurve$1.prototype._endoSplit=function e(t){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(t).divRound(this.n);var a=n.b.neg().mul(t).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var l=t.sub(o).sub(f);var h=c.add(u).neg();return{k1:l,k2:h}};ShortCurve$1.prototype.pointFromX=function e(t,r){t=new bn$1(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(t,i)};ShortCurve$1.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var n=t.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function e(t,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var l=0;l<a*2;l++){i[l]=null;s[l]=null}return u};function Point$3(e,t,r,n){base$5.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new bn$1(t,16);this.y=new bn$1(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits_browser(Point$3,base$5.BasePoint);ShortCurve$1.prototype.point=function e(t,r,n){return new Point$3(this,t,r,n)};ShortCurve$1.prototype.pointFromJSON=function e(t,r){return Point$3.fromJSON(this,t,r)};Point$3.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve;var i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r};Point$3.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$3.fromJSON=function e(t,r,n){if(typeof r==="string")r=JSON.parse(r);var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(e){return t.point(e[0],e[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};Point$3.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function e(){return this.inf};Point$3.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(t.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Point$3.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=t.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$3.prototype.getX=function e(){return this.x.fromRed()};Point$3.prototype.getY=function e(){return this.y.fromRed()};Point$3.prototype.mul=function e(t){t=new bn$1(t,16);if(this.isInfinity())return this;else if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$3.prototype.mulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};Point$3.prototype.jmulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};Point$3.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$3.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed;var i=function(e){return e.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Point$3.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint$1(e,t,r,n){base$5.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn$1(0)}else{this.x=new bn$1(t,16);this.y=new bn$1(r,16);this.z=new bn$1(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits_browser(JPoint$1,base$5.BasePoint);ShortCurve$1.prototype.jpoint=function e(t,r,n){return new JPoint$1(this,t,r,n)};JPoint$1.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};JPoint$1.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=t.x.redMul(n);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var l=u.redMul(f);var h=i.redMul(u);var d=c.redSqr().redIAdd(l).redISub(h).redISub(h);var p=c.redMul(h.redISub(d)).redISub(a.redMul(l));var y=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,y)};JPoint$1.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var l=n.redMul(c);var h=f.redSqr().redIAdd(u).redISub(l).redISub(l);var d=f.redMul(l.redISub(h)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(h,d,p)};JPoint$1.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<t;r++)n=n.dbl();return n}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(r=0;r<t;r++){var l=a.redSqr();var h=u.redSqr();var d=h.redSqr();var p=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c));var y=a.redMul(h);var m=p.redSqr().redISub(y.redAdd(y));var g=y.redISub(m);var b=p.redMul(g);b=b.redIAdd(b).redISub(d);var v=u.redMul(f);if(r+1<t)c=c.redMul(d);a=m;f=v;u=b}return this.curve.jpoint(a,u.redMul(s),f)};JPoint$1.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint$1.prototype._zeroDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.x.redSqr();var h=this.y.redSqr();var d=h.redSqr();var p=this.x.redAdd(h).redSqr().redISub(l).redISub(d);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l);var m=y.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);t=m.redISub(p).redISub(p);r=y.redMul(p.redISub(t)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};JPoint$1.prototype._threeDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.z.redSqr();var h=this.y.redSqr();var d=this.x.redMul(h);var p=this.x.redSub(l).redMul(this.x.redAdd(l));p=p.redAdd(p).redIAdd(p);var y=d.redIAdd(d);y=y.redIAdd(y);var m=y.redAdd(y);t=p.redSqr().redISub(m);n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=p.redMul(y.redISub(t)).redISub(g)}return this.curve.jpoint(t,r,n)};JPoint$1.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var l=f.redSqr().redISub(u.redAdd(u));var h=u.redISub(l);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(h).redISub(d);var y=n.redAdd(n).redMul(i);return this.curve.jpoint(l,p,y)};JPoint$1.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var l=r.redMul(u);l=l.redIAdd(l);l=l.redIAdd(l);var h=this.x.redMul(f).redISub(l);h=h.redIAdd(h);h=h.redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(h,d,p)};JPoint$1.prototype.mul=function e(t,r){t=new bn$1(t,r);return this.curve._wnafMul(this,t)};JPoint$1.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function e(t){var r=this.z.redSqr();var n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=t.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};JPoint$1.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};var curve_1$1=createCommonjsModule((function(e,t){var r=t;r.base=base$5;r.short=short_1$1;r.mont=null;r.edwards=null}));var curves_1$1=createCommonjsModule((function(e,t){var r=t;var n=utils_1$1$1.assert;function i(e){if(e.type==="short")this.curve=new curve_1$1.short(e);else if(e.type==="edwards")this.curve=new curve_1$1.edwards(e);else this.curve=new curve_1$1.mont(e);this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;n(this.g.validate(),"Invalid curve");n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(e,t){Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function(){var n=new i(t);Object.defineProperty(r,e,{configurable:true,enumerable:true,value:n});return n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1$2.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1$2.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1$2.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1$2.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1$2.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$2.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1$2.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch(e){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1$2.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function HmacDRBG$1(e){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils_1$2.toArray(e.entropy,e.entropyEnc||"hex");var r=utils_1$2.toArray(e.nonce,e.nonceEnc||"hex");var n=utils_1$2.toArray(e.pers,e.persEnc||"hex");minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,n)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function e(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function e(){return new hash_1$2.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG$1.prototype.reseed=function e(t,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}t=utils_1$2.toArray(t,r);n=utils_1$2.toArray(n,i);minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(n||[]));this._reseed=1};HmacDRBG$1.prototype.generate=function e(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=utils_1$2.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(n);this._reseed++;return utils_1$2.encode(a,r)};var assert$3$1=utils_1$1$1.assert;function KeyPair$2(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$2=KeyPair$2;KeyPair$2.fromPublic=function e(t,r,n){if(r instanceof KeyPair$2)return r;return new KeyPair$2(t,{pub:r,pubEnc:n})};KeyPair$2.fromPrivate=function e(t,r,n){if(r instanceof KeyPair$2)return r;return new KeyPair$2(t,{priv:r,privEnc:n})};KeyPair$2.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$2.prototype.getPublic=function e(t,r){if(typeof t==="string"){r=t;t=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!r)return this.pub;return this.pub.encode(r,t)};KeyPair$2.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$2.prototype._importPrivate=function e(t,r){this.priv=new bn$1(t,r||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$2.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$3$1(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$3$1(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$2.prototype.derive=function e(t){if(!t.validate()){assert$3$1(t.validate(),"public point not validated")}return t.mul(this.priv).getX()};KeyPair$2.prototype.sign=function e(t,r,n){return this.ec.sign(t,this,r,n)};KeyPair$2.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$2.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1$1.assert;function Signature$3(e,t){if(e instanceof Signature$3)return e;if(this._importDER(e,t))return;assert$4$1(e.r&&e.s,"Signature without r or s");this.r=new bn$1(e.r,16);this.s=new bn$1(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$2=Signature$3;function Position$1(){this.place=0}function getLength$1(e,t){var r=e[t.place++];if(!(r&128)){return r}var n=r&15;if(n===0||n>4){return false}var i=0;for(var s=0,a=t.place;s<n;s++,a++){i<<=8;i|=e[a];i>>>=0}if(i<=127){return false}t.place=a;return i}function rmPadding$1(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$3.prototype._importDER=function e(t,r){t=utils_1$1$1.toArray(t,r);var n=new Position$1;if(t[n.place++]!==48){return false}var i=getLength$1(t,n);if(i===false){return false}if(i+n.place!==t.length){return false}if(t[n.place++]!==2){return false}var s=getLength$1(t,n);if(s===false){return false}var a=t.slice(n.place,s+n.place);n.place+=s;if(t[n.place++]!==2){return false}var o=getLength$1(t,n);if(o===false){return false}if(t.length!==o+n.place){return false}var f=t.slice(n.place,o+n.place);if(a[0]===0){if(a[1]&128){a=a.slice(1)}else{return false}}if(f[0]===0){if(f[1]&128){f=f.slice(1)}else{return false}}this.r=new bn$1(a);this.s=new bn$1(f);this.recoveryParam=null;return true};function constructLength$1(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$3.prototype.toDER=function e(t){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=rmPadding$1(r);n=rmPadding$1(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];constructLength$1(i,r.length);i=i.concat(r);i.push(2);constructLength$1(i,n.length);var s=i.concat(n);var a=[48];constructLength$1(a,s.length);a=a.concat(s);return utils_1$1$1.encode(a,t)};var rand=function(){throw new Error("unsupported")};var assert$5$1=utils_1$1$1.assert;function EC$1(e){if(!(this instanceof EC$1))return new EC$1(e);if(typeof e==="string"){assert$5$1(Object.prototype.hasOwnProperty.call(curves_1$1,e),"Unknown curve "+e);e=curves_1$1[e]}if(e instanceof curves_1$1.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec$1=EC$1;EC$1.prototype.keyPair=function e(t){return new key$2(this,t)};EC$1.prototype.keyFromPrivate=function e(t,r){return key$2.fromPrivate(this,t,r)};EC$1.prototype.keyFromPublic=function e(t,r){return key$2.fromPublic(this,t,r)};EC$1.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg$1({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||rand(),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});var n=this.n.byteLength();var i=this.n.sub(new bn$1(2));for(;;){var s=new bn$1(r.generate(n));if(s.cmp(i)>0)continue;s.iaddn(1);return this.keyFromPrivate(s)}};EC$1.prototype._truncateToN=function e(t,r){var n=t.byteLength()*8-this.n.bitLength();if(n>0)t=t.ushrn(n);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC$1.prototype.sign=function e(t,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);t=this._truncateToN(new bn$1(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new hmacDrbg$1({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new bn$1(1));for(var u=0;;u++){var l=i.k?i.k(u):new bn$1(f.generate(this.n.byteLength()));l=this._truncateToN(l,true);if(l.cmpn(1)<=0||l.cmp(c)>=0)continue;var h=this.g.mul(l);if(h.isInfinity())continue;var d=h.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var y=l.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));y=y.umod(this.n);if(y.cmpn(0)===0)continue;var m=(h.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(i.canonical&&y.cmp(this.nh)>0){y=this.n.sub(y);m^=1}return new signature$2({r:p,s:y,recoveryParam:m})}};EC$1.prototype.verify=function e(t,r,n,i){t=this._truncateToN(new bn$1(t,16));n=this.keyFromPublic(n,i);r=new signature$2(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);var u;if(!this.curve._maxwellTrick){u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC$1.prototype.recoverPubKey=function(e,t,r,n){assert$5$1((3&r)===r,"The recovery param is more than two bits");t=new signature$2(t,n);var i=this.n;var s=new bn$1(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(i);var l=i.sub(s).mul(u).umod(i);var h=o.mul(u).umod(i);return this.g.mulAdd(l,a,h)};EC$1.prototype.getKeyRecoveryParam=function(e,t,r,n){t=new signature$2(t,n);if(t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var elliptic_1$1=createCommonjsModule((function(e,t){var r=t;r.version={version:"6.5.4"}.version;r.utils=utils_1$1$1;r.rand=function(){throw new Error("unsupported")};r.curve=curve_1$1;r.curves=curves_1$1;r.ec=ec$1;r.eddsa=null}));var EC$1$1=elliptic_1$1.ec;const version$e="signing-key/5.7.0";const logger$t=new Logger(version$e);let _curve=null;function getCurve(){if(!_curve){_curve=new EC$1$1("secp256k1")}return _curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1");defineReadOnly(this,"privateKey",hexlify(e));if(hexDataLength(this.privateKey)!==32){logger$t.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]")}const t=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+t.getPublic(false,"hex"));defineReadOnly(this,"compressedPublicKey","0x"+t.getPublic(true,"hex"));defineReadOnly(this,"_isSigningKey",true)}_addPoint(e){const t=getCurve().keyFromPublic(arrayify(this.publicKey));const r=getCurve().keyFromPublic(arrayify(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey));const r=arrayify(e);if(r.length!==32){logger$t.throwArgumentError("bad digest length","digest",e)}const n=t.sign(r,{canonical:true});return splitSignature({recoveryParam:n.recoveryParam,r:hexZeroPad("0x"+n.r.toString(16),32),s:hexZeroPad("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey));const r=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(e,t){const r=splitSignature(t);const n={r:arrayify(r.r),s:arrayify(r.s)};return"0x"+getCurve().recoverPubKey(arrayify(e),n,r.recoveryParam).encode("hex",false)}function computePublicKey(e,t){const r=arrayify(e);if(r.length===32){const e=new SigningKey(r);if(t){return"0x"+getCurve().keyFromPrivate(r).getPublic(true,"hex")}return e.publicKey}else if(r.length===33){if(t){return hexlify(r)}return"0x"+getCurve().keyFromPublic(r).getPublic(false,"hex")}else if(r.length===65){if(!t){return hexlify(r)}return"0x"+getCurve().keyFromPublic(r).getPublic(true,"hex")}return logger$t.throwArgumentError("invalid public or private key","key","[REDACTED]")}const lib_esm$b=Object.freeze({__proto__:null,SigningKey,recoverPublicKey,computePublicKey});const version$d="transactions/5.7.0";const logger$s=new Logger(version$d);var TransactionTypes;(function(e){e[e["legacy"]=0]="legacy";e[e["eip2930"]=1]="eip2930";e[e["eip1559"]=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(e){if(e==="0x"){return null}return getAddress(e)}function handleNumber(e){if(e==="0x"){return Zero$1}return BigNumber$1.from(e)}const transactionFields=[{name:"nonce",maxLength:32,numeric:true},{name:"gasPrice",maxLength:32,numeric:true},{name:"gasLimit",maxLength:32,numeric:true},{name:"to",length:20},{name:"value",maxLength:32,numeric:true},{name:"data"}];const allowedTransactionKeys$2={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,type:true,value:true};function computeAddress(e){const t=computePublicKey(e);return getAddress(hexDataSlice(keccak256$1(hexDataSlice(t,1)),12))}function recoverAddress(e,t){return computeAddress(recoverPublicKey(arrayify(e),t))}function formatNumber(e,t){const r=stripZeros(BigNumber$1.from(e).toHexString());if(r.length>32){logger$s.throwArgumentError("invalid length for "+t,"transaction:"+t,e)}return r}function accessSetify(e,t){return{address:getAddress(e),storageKeys:(t||[]).map(((t,r)=>{if(hexDataLength(t)!==32){logger$s.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t)}return t.toLowerCase()}))}}function accessListify(e){if(Array.isArray(e)){return e.map(((e,t)=>{if(Array.isArray(e)){if(e.length>2){logger$s.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e)}return accessSetify(e[0],e[1])}return accessSetify(e.address,e.storageKeys)}))}const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>{e[t]=true;return e}),{});return accessSetify(t,Object.keys(r).sort())}));t.sort(((e,t)=>e.address.localeCompare(t.address)));return t}function formatAccessList(e){return accessListify(e).map((e=>[e.address,e.storageKeys]))}function _serializeEip1559(e,t){if(e.gasPrice!=null){const t=BigNumber$1.from(e.gasPrice);const r=BigNumber$1.from(e.maxFeePerGas||0);if(!t.eq(r)){logger$s.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}}const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=splitSignature(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push(stripZeros(e.r));r.push(stripZeros(e.s))}return hexConcat(["0x02",encode$8(r)])}function _serializeEip2930(e,t){const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.gasPrice||0,"gasPrice"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=splitSignature(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push(stripZeros(e.r));r.push(stripZeros(e.s))}return hexConcat(["0x01",encode$8(r)])}function _serialize(e,t){checkProperties(e,allowedTransactionKeys$2);const r=[];transactionFields.forEach((function(t){let n=e[t.name]||[];const i={};if(t.numeric){i.hexPad="left"}n=arrayify(hexlify(n,i));if(t.length&&n.length!==t.length&&n.length>0){logger$s.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}if(t.maxLength){n=stripZeros(n);if(n.length>t.maxLength){logger$s.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)}}r.push(hexlify(n))}));let n=0;if(e.chainId!=null){n=e.chainId;if(typeof n!=="number"){logger$s.throwArgumentError("invalid transaction.chainId","transaction",e)}}else if(t&&!isBytesLike(t)&&t.v>28){n=Math.floor((t.v-35)/2)}if(n!==0){r.push(hexlify(n));r.push("0x");r.push("0x")}if(!t){return encode$8(r)}const i=splitSignature(t);let s=27+i.recoveryParam;if(n!==0){r.pop();r.pop();r.pop();s+=n*2+8;if(i.v>28&&i.v!==s){logger$s.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}}else if(i.v!==s){logger$s.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)}r.push(hexlify(s));r.push(stripZeros(arrayify(i.r)));r.push(stripZeros(arrayify(i.s)));return encode$8(r)}function serialize$3(e,t){if(e.type==null||e.type===0){if(e.accessList!=null){logger$s.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e)}return _serialize(e,t)}switch(e.type){case 1:return _serializeEip2930(e,t);case 2:return _serializeEip1559(e,t)}return logger$s.throwError(`unsupported transaction type: ${e.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function _parseEipSignature(e,t,r){try{const r=handleNumber(t[0]).toNumber();if(r!==0&&r!==1){throw new Error("bad recid")}e.v=r}catch(e){logger$s.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=hexZeroPad(t[1],32);e.s=hexZeroPad(t[2],32);try{const t=keccak256$1(r(e));e.from=recoverAddress(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function _parseEip1559(e){const t=decode$7(e.slice(1));if(t.length!==9&&t.length!==12){logger$s.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(e))}const r=handleNumber(t[2]);const n=handleNumber(t[3]);const i={type:2,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:handleNumber(t[4]),to:handleAddress(t[5]),value:handleNumber(t[6]),data:t[7],accessList:accessListify(t[8])};if(t.length===9){return i}i.hash=keccak256$1(e);_parseEipSignature(i,t.slice(9),_serializeEip1559);return i}function _parseEip2930(e){const t=decode$7(e.slice(1));if(t.length!==8&&t.length!==11){logger$s.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(e))}const r={type:1,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),gasPrice:handleNumber(t[2]),gasLimit:handleNumber(t[3]),to:handleAddress(t[4]),value:handleNumber(t[5]),data:t[6],accessList:accessListify(t[7])};if(t.length===8){return r}r.hash=keccak256$1(e);_parseEipSignature(r,t.slice(8),_serializeEip2930);return r}function _parse(e){const t=decode$7(e);if(t.length!==9&&t.length!==6){logger$s.throwArgumentError("invalid raw transaction","rawTransaction",e)}const r={nonce:handleNumber(t[0]).toNumber(),gasPrice:handleNumber(t[1]),gasLimit:handleNumber(t[2]),to:handleAddress(t[3]),value:handleNumber(t[4]),data:t[5],chainId:0};if(t.length===6){return r}try{r.v=BigNumber$1.from(t[6]).toNumber()}catch(e){return r}r.r=hexZeroPad(t[7],32);r.s=hexZeroPad(t[8],32);if(BigNumber$1.from(r.r).isZero()&&BigNumber$1.from(r.s).isZero()){r.chainId=r.v;r.v=0}else{r.chainId=Math.floor((r.v-35)/2);if(r.chainId<0){r.chainId=0}let n=r.v-27;const i=t.slice(0,6);if(r.chainId!==0){i.push(hexlify(r.chainId));i.push("0x");i.push("0x");n-=r.chainId*2+8}const s=keccak256$1(encode$8(i));try{r.from=recoverAddress(s,{r:hexlify(r.r),s:hexlify(r.s),recoveryParam:n})}catch(e){}r.hash=keccak256$1(e)}r.type=null;return r}function parse(e){const t=arrayify(e);if(t[0]>127){return _parse(t)}switch(t[0]){case 1:return _parseEip2930(t);case 2:return _parseEip1559(t)}return logger$s.throwError(`unsupported transaction type: ${t[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}const lib_esm$a=Object.freeze({__proto__:null,get TransactionTypes(){return TransactionTypes},computeAddress,recoverAddress,accessListify,serialize:serialize$3,parse});const version$c="contracts/5.7.0";var __awaiter$d=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$r=new Logger(version$c);const allowedTransactionKeys$1={chainId:true,data:true,from:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true,customData:true,ccipReadEnabled:true};function resolveName(e,t){return __awaiter$d(this,void 0,void 0,(function*(){const r=yield t;if(typeof r!=="string"){logger$r.throwArgumentError("invalid address or ENS name","name",r)}try{return getAddress(r)}catch(e){}if(!e){logger$r.throwError("a provider or signer is needed to resolve ENS names",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"})}const n=yield e.resolveName(r);if(n==null){logger$r.throwArgumentError("resolver or addr is not configured for ENS name","name",r)}return n}))}function resolveAddresses(e,t,r){return __awaiter$d(this,void 0,void 0,(function*(){if(Array.isArray(r)){return yield Promise.all(r.map(((r,n)=>resolveAddresses(e,Array.isArray(t)?t[n]:t[r.name],r))))}if(r.type==="address"){return yield resolveName(e,t)}if(r.type==="tuple"){return yield resolveAddresses(e,t,r.components)}if(r.baseType==="array"){if(!Array.isArray(t)){return Promise.reject(logger$r.makeError("invalid value for array",Logger.errors.INVALID_ARGUMENT,{argument:"value",value:t}))}return yield Promise.all(t.map((t=>resolveAddresses(e,t,r.arrayChildren))))}return t}))}function populateTransaction(e,t,r){return __awaiter$d(this,void 0,void 0,(function*(){let n={};if(r.length===t.inputs.length+1&&typeof r[r.length-1]==="object"){n=shallowCopy(r.pop())}logger$r.checkArgumentCount(r.length,t.inputs.length,"passed to contract");if(e.signer){if(n.from){n.from=resolveProperties({override:resolveName(e.signer,n.from),signer:e.signer.getAddress()}).then((e=>__awaiter$d(this,void 0,void 0,(function*(){if(getAddress(e.signer)!==e.override){logger$r.throwError("Contract with a Signer cannot override from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"})}return e.override}))))}else{n.from=e.signer.getAddress()}}else if(n.from){n.from=resolveName(e.provider,n.from)}const i=yield resolveProperties({args:resolveAddresses(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:resolveProperties(n)||{}});const s=e.interface.encodeFunctionData(t,i.args);const a={data:s,to:i.address};const o=i.overrides;if(o.nonce!=null){a.nonce=BigNumber$1.from(o.nonce).toNumber()}if(o.gasLimit!=null){a.gasLimit=BigNumber$1.from(o.gasLimit)}if(o.gasPrice!=null){a.gasPrice=BigNumber$1.from(o.gasPrice)}if(o.maxFeePerGas!=null){a.maxFeePerGas=BigNumber$1.from(o.maxFeePerGas)}if(o.maxPriorityFeePerGas!=null){a.maxPriorityFeePerGas=BigNumber$1.from(o.maxPriorityFeePerGas)}if(o.from!=null){a.from=o.from}if(o.type!=null){a.type=o.type}if(o.accessList!=null){a.accessList=accessListify(o.accessList)}if(a.gasLimit==null&&t.gas!=null){let e=21e3;const r=arrayify(s);for(let t=0;t<r.length;t++){e+=4;if(r[t]){e+=64}}a.gasLimit=BigNumber$1.from(t.gas).add(e)}if(o.value){const e=BigNumber$1.from(o.value);if(!e.isZero()&&!t.payable){logger$r.throwError("non-payable method cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value})}a.value=e}if(o.customData){a.customData=shallowCopy(o.customData)}if(o.ccipReadEnabled){a.ccipReadEnabled=!!o.ccipReadEnabled}delete n.nonce;delete n.gasLimit;delete n.gasPrice;delete n.from;delete n.value;delete n.type;delete n.accessList;delete n.maxFeePerGas;delete n.maxPriorityFeePerGas;delete n.customData;delete n.ccipReadEnabled;const f=Object.keys(n).filter((e=>n[e]!=null));if(f.length){logger$r.throwError(`cannot override ${f.map((e=>JSON.stringify(e))).join(",")}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:f})}return a}))}function buildPopulate(e,t){return function(...r){return populateTransaction(e,t,r)}}function buildEstimate(e,t){const r=e.signer||e.provider;return function(...n){return __awaiter$d(this,void 0,void 0,(function*(){if(!r){logger$r.throwError("estimate require a provider or signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"})}const i=yield populateTransaction(e,t,n);return yield r.estimateGas(i)}))}}function addContractWait(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then((t=>{t.events=t.logs.map((r=>{let n=deepCopy(r);let i=null;try{i=e.interface.parseLog(r)}catch(e){}if(i){n.args=i.args;n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r);n.event=i.name;n.eventSignature=i.signature}n.removeListener=()=>e.provider;n.getBlock=()=>e.provider.getBlock(t.blockHash);n.getTransaction=()=>e.provider.getTransaction(t.transactionHash);n.getTransactionReceipt=()=>Promise.resolve(t);return n}));return t}))}function buildCall(e,t,r){const n=e.signer||e.provider;return function(...i){return __awaiter$d(this,void 0,void 0,(function*(){let s=undefined;if(i.length===t.inputs.length+1&&typeof i[i.length-1]==="object"){const e=shallowCopy(i.pop());if(e.blockTag!=null){s=yield e.blockTag}delete e.blockTag;i.push(e)}if(e.deployTransaction!=null){yield e._deployed(s)}const a=yield populateTransaction(e,t,i);const o=yield n.call(a,s);try{let n=e.interface.decodeFunctionResult(t,o);if(r&&t.outputs.length===1){n=n[0]}return n}catch(t){if(t.code===Logger.errors.CALL_EXCEPTION){t.address=e.address;t.args=i;t.transaction=a}throw t}}))}}function buildSend(e,t){return function(...r){return __awaiter$d(this,void 0,void 0,(function*(){if(!e.signer){logger$r.throwError("sending a transaction requires a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"})}if(e.deployTransaction!=null){yield e._deployed()}const n=yield populateTransaction(e,t,r);const i=yield e.signer.sendTransaction(n);addContractWait(e,i);return i}))}}function buildDefault(e,t,r){if(t.constant){return buildCall(e,t,r)}return buildSend(e,t)}function getEventTag$1(e){if(e.address&&(e.topics==null||e.topics.length===0)){return"*"}return(e.address||"*")+"@"+(e.topics?e.topics.map((e=>{if(Array.isArray(e)){return e.join("|")}return e})).join(":"):"")}class RunningEvent{constructor(e,t){defineReadOnly(this,"tag",e);defineReadOnly(this,"filter",t);this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=false;this._listeners=this._listeners.filter((r=>{if(t||r.listener!==e){return true}t=true;return false}))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();this._listeners=this._listeners.filter((t=>{const r=e.slice();setTimeout((()=>{t.listener.apply(this,r)}),0);return!t.once}));return t}prepareEvent(e){}getEmit(e){return[e]}}class ErrorRunningEvent extends RunningEvent{constructor(){super("error",null)}}class FragmentRunningEvent extends RunningEvent{constructor(e,t,r,n){const i={address:e};let s=t.getEventTopic(r);if(n){if(s!==n[0]){logger$r.throwArgumentError("topic mismatch","topics",n)}i.topics=n.slice()}else{i.topics=[s]}super(getEventTag$1(i),i);defineReadOnly(this,"address",e);defineReadOnly(this,"interface",t);defineReadOnly(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e);e.event=this.fragment.name;e.eventSignature=this.fragment.format();e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null;e.decodeError=t}}getEmit(e){const t=checkResultErrors(e.args);if(t.length){throw t[0].error}const r=(e.args||[]).slice();r.push(e);return r}}class WildcardRunningEvent extends RunningEvent{constructor(e,t){super("*",{address:e});defineReadOnly(this,"address",e);defineReadOnly(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name;e.eventSignature=t.signature;e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r);e.args=t.args}catch(e){}}}class BaseContract{constructor(e,t,r){defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(t));if(r==null){defineReadOnly(this,"provider",null);defineReadOnly(this,"signer",null)}else if(Signer.isSigner(r)){defineReadOnly(this,"provider",r.provider||null);defineReadOnly(this,"signer",r)}else if(Provider.isProvider(r)){defineReadOnly(this,"provider",r);defineReadOnly(this,"signer",null)}else{logger$r.throwArgumentError("invalid signer or provider","signerOrProvider",r)}defineReadOnly(this,"callStatic",{});defineReadOnly(this,"estimateGas",{});defineReadOnly(this,"functions",{});defineReadOnly(this,"populateTransaction",{});defineReadOnly(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const r=this.interface.events[t];defineReadOnly(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)})));if(!e[r.name]){e[r.name]=[]}e[r.name].push(t)}));Object.keys(e).forEach((t=>{const r=e[t];if(r.length===1){defineReadOnly(this.filters,t,this.filters[r[0]])}else{logger$r.warn(`Duplicate definition of ${t} (${r.join(", ")})`)}}))}defineReadOnly(this,"_runningEvents",{});defineReadOnly(this,"_wrappedEmits",{});if(e==null){logger$r.throwArgumentError("invalid contract address or ENS name","addressOrName",e)}defineReadOnly(this,"address",e);if(this.provider){defineReadOnly(this,"resolvedAddress",resolveName(this.provider,e))}else{try{defineReadOnly(this,"resolvedAddress",Promise.resolve(getAddress(e)))}catch(e){logger$r.throwError("provider is required to use ENS name as contract address",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}}this.resolvedAddress.catch((e=>{}));const n={};const i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e]){logger$r.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);return}i[e]=true;{const r=t.name;if(!n[`%${r}`]){n[`%${r}`]=[]}n[`%${r}`].push(e)}if(this[e]==null){defineReadOnly(this,e,buildDefault(this,t,true))}if(this.functions[e]==null){defineReadOnly(this.functions,e,buildDefault(this,t,false))}if(this.callStatic[e]==null){defineReadOnly(this.callStatic,e,buildCall(this,t,true))}if(this.populateTransaction[e]==null){defineReadOnly(this.populateTransaction,e,buildPopulate(this,t))}if(this.estimateGas[e]==null){defineReadOnly(this.estimateGas,e,buildEstimate(this,t))}}));Object.keys(n).forEach((e=>{const t=n[e];if(t.length>1){return}e=e.substring(1);const r=t[0];try{if(this[e]==null){defineReadOnly(this,e,this[r])}}catch(e){}if(this.functions[e]==null){defineReadOnly(this.functions,e,this.functions[r])}if(this.callStatic[e]==null){defineReadOnly(this.callStatic,e,this.callStatic[r])}if(this.populateTransaction[e]==null){defineReadOnly(this.populateTransaction,e,this.populateTransaction[r])}if(this.estimateGas[e]==null){defineReadOnly(this.estimateGas,e,this.estimateGas[r])}}))}static getContractAddress(e){return getContractAddress(e)}static getInterface(e){if(Interface.isInterface(e)){return e}return new Interface(e)}deployed(){return this._deployed()}_deployed(e){if(!this._deployedPromise){if(this.deployTransaction){this._deployedPromise=this.deployTransaction.wait().then((()=>this))}else{this._deployedPromise=this.provider.getCode(this.address,e).then((e=>{if(e==="0x"){logger$r.throwError("contract not deployed",Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"})}return this}))}}return this._deployedPromise}fallback(e){if(!this.signer){logger$r.throwError("sending a transactions require a signer",Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"})}const t=shallowCopy(e||{});["from","to"].forEach((function(e){if(t[e]==null){return}logger$r.throwError("cannot override "+e,Logger.errors.UNSUPPORTED_OPERATION,{operation:e})}));t.to=this.resolvedAddress;return this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){if(typeof e==="string"){e=new VoidSigner(e,this.provider)}const t=new this.constructor(this.address,this.interface,e);if(this.deployTransaction){defineReadOnly(t,"deployTransaction",this.deployTransaction)}return t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Indexed.isIndexed(e)}_normalizeRunningEvent(e){if(this._runningEvents[e.tag]){return this._runningEvents[e.tag]}return e}_getRunningEvent(e){if(typeof e==="string"){if(e==="error"){return this._normalizeRunningEvent(new ErrorRunningEvent)}if(e==="event"){return this._normalizeRunningEvent(new RunningEvent("event",null))}if(e==="*"){return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface))}const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if(typeof t!=="string"){throw new Error("invalid topic")}const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new FragmentRunningEvent(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new RunningEvent(getEventTag$1(t),t))}return this._normalizeRunningEvent(new WildcardRunningEvent(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];if(t&&e.filter){this.provider.off(e.filter,t);delete this._wrappedEmits[e.tag]}}}_wrapEvent(e,t,r){const n=deepCopy(t);n.removeListener=()=>{if(!r){return}e.removeListener(r);this._checkRunningEvents(e)};n.getBlock=()=>this.provider.getBlock(t.blockHash);n.getTransaction=()=>this.provider.getTransaction(t.transactionHash);n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash);e.prepareEvent(n);return n}_addEventListener(e,t,r){if(!this.provider){logger$r.throwError("events require a provider or a signer with a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"})}e.addListener(t,r);this._runningEvents[e.tag]=e;if(!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(n.decodeError==null){try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}}if(e.filter!=null){this.emit("event",n)}if(n.decodeError!=null){this.emit("error",n.decodeError,n)}};this._wrappedEmits[e.tag]=r;if(e.filter!=null){this.provider.on(e.filter,r)}}}queryFilter(e,t,r){const n=this._getRunningEvent(e);const i=shallowCopy(n.filter);if(typeof t==="string"&&isHexString(t,32)){if(r!=null){logger$r.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r)}i.blockHash=t}else{i.fromBlock=t!=null?t:0;i.toBlock=r!=null?r:"latest"}return this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(n,e,null)))))}on(e,t){this._addEventListener(this._getRunningEvent(e),t,false);return this}once(e,t){this._addEventListener(this._getRunningEvent(e),t,true);return this}emit(e,...t){if(!this.provider){return false}const r=this._getRunningEvent(e);const n=r.run(t)>0;this._checkRunningEvents(r);return n}listenerCount(e){if(!this.provider){return 0}if(e==null){return Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0)}return this._getRunningEvent(e).listenerCount()}listeners(e){if(!this.provider){return[]}if(e==null){const e=[];for(let t in this._runningEvents){this._runningEvents[t].listeners().forEach((t=>{e.push(t)}))}return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider){return this}if(e==null){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners();this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);t.removeAllListeners();this._checkRunningEvents(t);return this}off(e,t){if(!this.provider){return this}const r=this._getRunningEvent(e);r.removeListener(t);this._checkRunningEvents(r);return this}removeListener(e,t){return this.off(e,t)}}class Contract$1 extends BaseContract{}class ContractFactory{constructor(e,t,r){let n=null;if(typeof t==="string"){n=t}else if(isBytes(t)){n=hexlify(t)}else if(t&&typeof t.object==="string"){n=t.object}else{n="!"}if(n.substring(0,2)!=="0x"){n="0x"+n}if(!isHexString(n)||n.length%2){logger$r.throwArgumentError("invalid bytecode","bytecode",t)}if(r&&!Signer.isSigner(r)){logger$r.throwArgumentError("invalid signer","signer",r)}defineReadOnly(this,"bytecode",n);defineReadOnly(this,"interface",getStatic(new.target,"getInterface")(e));defineReadOnly(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]==="object"){t=shallowCopy(e.pop());for(const e in t){if(!allowedTransactionKeys$1[e]){throw new Error("unknown transaction override "+e)}}}["data","from","to"].forEach((e=>{if(t[e]==null){return}logger$r.throwError("cannot override "+e,Logger.errors.UNSUPPORTED_OPERATION,{operation:e})}));if(t.value){const e=BigNumber$1.from(t.value);if(!e.isZero()&&!this.interface.deploy.payable){logger$r.throwError("non-payable constructor cannot override value",Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})}}logger$r.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");t.data=hexlify(concat$2([this.bytecode,this.interface.encodeDeploy(e)]));return t}deploy(...e){return __awaiter$d(this,void 0,void 0,(function*(){let t={};if(e.length===this.interface.deploy.inputs.length+1){t=e.pop()}logger$r.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield resolveAddresses(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r);const i=yield this.signer.sendTransaction(n);const s=getStatic(this.constructor,"getContractAddress")(i);const a=getStatic(this.constructor,"getContract")(s,this.interface,this.signer);addContractWait(a,i);defineReadOnly(a,"deployTransaction",i);return a}))}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){if(e==null){logger$r.throwError("missing compiler output",Logger.errors.MISSING_ARGUMENT,{argument:"compilerOutput"})}if(typeof e==="string"){e=JSON.parse(e)}const r=e.abi;let n=null;if(e.bytecode){n=e.bytecode}else if(e.evm&&e.evm.bytecode){n=e.evm.bytecode}return new this(r,n,t)}static getInterface(e){return Contract$1.getInterface(e)}static getContractAddress(e){return getContractAddress(e)}static getContract(e,t,r){return new Contract$1(e,t,r)}}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e);defineReadOnly(this,"base",e.length);defineReadOnly(this,"_alphabetMap",{});defineReadOnly(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++){this._alphabetMap[e.charAt(t)]=t}}encode(e){let t=arrayify(e);if(t.length===0){return""}let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e){n+=r[e]<<8;r[e]=n%this.base;n=n/this.base|0}while(n>0){r.push(n%this.base);n=n/this.base|0}}let n="";for(let e=0;t[e]===0&&e<t.length-1;++e){n+=this._leader}for(let e=r.length-1;e>=0;--e){n+=this.alphabet[r[e]]}return n}decode(e){if(typeof e!=="string"){throw new TypeError("Expected String")}let t=[];if(e.length===0){return new Uint8Array(t)}t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(n===undefined){throw new Error("Non-base"+this.base+" character")}let i=n;for(let e=0;e<t.length;++e){i+=t[e]*this.base;t[e]=i&255;i>>=8}while(i>0){t.push(i&255);i>>=8}}for(let r=0;e[r]===this._leader&&r<e.length-1;++r){t.push(0)}return arrayify(new Uint8Array(t.reverse()))}}const Base32=new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const lib_esm$9=Object.freeze({__proto__:null,BaseX,Base32,Base58});var SupportedAlgorithm;(function(e){e["sha256"]="sha256";e["sha512"]="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$b="sha2/5.7.0";const logger$q=new Logger(version$b);function ripemd160(e){return"0x"+hash_1$2.ripemd160().update(arrayify(e)).digest("hex")}function sha256$1(e){return"0x"+hash_1$2.sha256().update(arrayify(e)).digest("hex")}function sha512(e){return"0x"+hash_1$2.sha512().update(arrayify(e)).digest("hex")}function computeHmac(e,t,r){if(!SupportedAlgorithm[e]){logger$q.throwError("unsupported algorithm "+e,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e})}return"0x"+hash_1$2.hmac(hash_1$2[e],arrayify(t)).update(arrayify(r)).digest("hex")}const lib_esm$8=Object.freeze({__proto__:null,computeHmac,ripemd160,sha256:sha256$1,sha512,get SupportedAlgorithm(){return SupportedAlgorithm}});function pbkdf2$1(e,t,r,n,i){e=arrayify(e);t=arrayify(t);let s;let a=1;const o=new Uint8Array(n);const f=new Uint8Array(t.length+4);f.set(t);let c;let u;for(let l=1;l<=a;l++){f[t.length]=l>>24&255;f[t.length+1]=l>>16&255;f[t.length+2]=l>>8&255;f[t.length+3]=l&255;let h=arrayify(computeHmac(i,e,f));if(!s){s=h.length;u=new Uint8Array(s);a=Math.ceil(n/s);c=n-(a-1)*s}u.set(h);for(let t=1;t<r;t++){h=arrayify(computeHmac(i,e,h));for(let e=0;e<s;e++)u[e]^=h[e]}const d=(l-1)*s;const p=l===a?c:s;o.set(arrayify(u).slice(0,p),d)}return hexlify(o)}const version$a="wordlists/5.7.0";const logger$p=new Logger(version$a);class Wordlist{constructor(e){logger$p.checkAbstract(new.target,Wordlist);defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n)){return"0x"}t.push(n)}return id(t.join("\n")+"\n")}static register(e,t){}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(e){if(wordlist!=null){return}wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" ");if(Wordlist.check(e)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"){wordlist=null;throw new Error("BIP39 Wordlist for en (English) FAILED")}}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){loadWords(this);return wordlist[e]}getWordIndex(e){loadWords(this);return wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn};const version$9="hdnode/5.7.0";const logger$o=new Logger(version$9);const N=BigNumber$1.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");const MasterSecret=toUtf8Bytes("Bitcoin seed");const HardenedBit=2147483648;function getUpperMask(e){return(1<<e)-1<<8-e}function getLowerMask(e){return(1<<e)-1}function bytes32(e){return hexZeroPad(hexlify(e),32)}function base58check(e){return Base58.encode(concat$2([e,hexDataSlice(sha256$1(sha256$1(e)),0,4)]))}function getWordlist(e){if(e==null){return wordlists["en"]}if(typeof e==="string"){const t=wordlists[e];if(t==null){logger$o.throwArgumentError("unknown locale","wordlist",e)}return t}return e}const _constructorGuard$1={};const defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,t,r,n,i,s,a,o){if(e!==_constructorGuard$1){throw new Error("HDNode constructor cannot be called directly")}if(t){const e=new SigningKey(t);defineReadOnly(this,"privateKey",e.privateKey);defineReadOnly(this,"publicKey",e.compressedPublicKey)}else{defineReadOnly(this,"privateKey",null);defineReadOnly(this,"publicKey",hexlify(r))}defineReadOnly(this,"parentFingerprint",n);defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256$1(this.publicKey)),0,4));defineReadOnly(this,"address",computeAddress(this.publicKey));defineReadOnly(this,"chainCode",i);defineReadOnly(this,"index",s);defineReadOnly(this,"depth",a);if(o==null){defineReadOnly(this,"mnemonic",null);defineReadOnly(this,"path",null)}else if(typeof o==="string"){defineReadOnly(this,"mnemonic",null);defineReadOnly(this,"path",o)}else{defineReadOnly(this,"mnemonic",o);defineReadOnly(this,"path",o.path)}}get extendedKey(){if(this.depth>=256){throw new Error("Depth too large!")}return base58check(concat$2([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat$2(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard$1,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295){throw new Error("invalid index - "+String(e))}let t=this.path;if(t){t+="/"+(e&~HardenedBit)}const r=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey){throw new Error("cannot derive child of neutered node")}r.set(arrayify(this.privateKey),1);if(t){t+="'"}}else{r.set(arrayify(this.publicKey))}for(let t=24;t>=0;t-=8){r[33+(t>>3)]=e>>24-t&255}const n=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,r));const i=n.slice(0,32);const s=n.slice(32);let a=null;let o=null;if(this.privateKey){a=bytes32(BigNumber$1.from(i).add(this.privateKey).mod(N))}else{const e=new SigningKey(hexlify(i));o=e._addPoint(this.publicKey)}let f=t;const c=this.mnemonic;if(c){f=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})}return new HDNode(_constructorGuard$1,a,o,this.fingerprint,bytes32(s),e,this.depth+1,f)}derivePath(e){const t=e.split("/");if(t.length===0||t[0]==="m"&&this.depth!==0){throw new Error("invalid path - "+e)}if(t[0]==="m"){t.shift()}let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=HardenedBit){throw new Error("invalid path index - "+n)}r=r._derive(HardenedBit+e)}else if(n.match(/^[0-9]+$/)){const e=parseInt(n);if(e>=HardenedBit){throw new Error("invalid path index - "+n)}r=r._derive(e)}else{throw new Error("invalid path component - "+n)}}return r}static _fromSeed(e,t){const r=arrayify(e);if(r.length<16||r.length>64){throw new Error("invalid seed")}const n=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,r));return new HDNode(_constructorGuard$1,bytes32(n.slice(0,32)),null,"0x00000000",bytes32(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){r=getWordlist(r);e=entropyToMnemonic(mnemonicToEntropy(e,r),r);return HDNode._fromSeed(mnemonicToSeed(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const t=Base58.decode(e);if(t.length!==82||base58check(t.slice(0,78))!==e){logger$o.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}const r=t[4];const n=hexlify(t.slice(5,9));const i=parseInt(hexlify(t.slice(9,13)).substring(2),16);const s=hexlify(t.slice(13,45));const a=t.slice(45,78);switch(hexlify(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard$1,null,hexlify(a),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0){break}return new HDNode(_constructorGuard$1,hexlify(a.slice(1)),null,n,s,i,r,null)}return logger$o.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(e,t){if(!t){t=""}const r=toUtf8Bytes("mnemonic"+t,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(e,UnicodeNormalizationForm.NFKD),r,2048,64,"sha512")}function mnemonicToEntropy(e,t){t=getWordlist(t);logger$o.checkNormalize();const r=t.split(e);if(r.length%3!==0){throw new Error("invalid mnemonic")}const n=arrayify(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));if(s===-1){throw new Error("invalid mnemonic")}for(let e=0;e<11;e++){if(s&1<<10-e){n[i>>3]|=1<<7-i%8}i++}}const s=32*r.length/3;const a=r.length/3;const o=getUpperMask(a);const f=arrayify(sha256$1(n.slice(0,s/8)))[0]&o;if(f!==(n[n.length-1]&o)){throw new Error("invalid checksum")}return hexlify(n.slice(0,s/8))}function entropyToMnemonic(e,t){t=getWordlist(t);e=arrayify(e);if(e.length%4!==0||e.length<16||e.length>32){throw new Error("invalid entropy")}const r=[0];let n=11;for(let t=0;t<e.length;t++){if(n>8){r[r.length-1]<<=8;r[r.length-1]|=e[t];n-=8}else{r[r.length-1]<<=n;r[r.length-1]|=e[t]>>8-n;r.push(e[t]&getLowerMask(8-n));n+=3}}const i=e.length/4;const s=arrayify(sha256$1(e))[0]&getUpperMask(i);r[r.length-1]<<=i;r[r.length-1]|=s>>8-i;return t.join(r.map((e=>t.getWord(e))))}function isValidMnemonic(e,t){try{mnemonicToEntropy(e,t);return true}catch(e){}return false}function getAccountPath(e){if(typeof e!=="number"||e<0||e>=HardenedBit||e%1){logger$o.throwArgumentError("invalid account index","index",e)}return`m/44'/60'/${e}'/0/0`}const lib_esm$7=Object.freeze({__proto__:null,defaultPath,HDNode,mnemonicToSeed,mnemonicToEntropy,entropyToMnemonic,isValidMnemonic,getAccountPath});const version$8="random/5.7.0";const logger$n=new Logger(version$8);function getGlobal(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$5=anyGlobal.crypto||anyGlobal.msCrypto;if(!crypto$5||!crypto$5.getRandomValues){logger$n.warn("WARNING: Missing strong random number source");crypto$5={getRandomValues:function(e){return logger$n.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}}}function randomBytes(e){if(e<=0||e>1024||e%1||e!=e){logger$n.throwArgumentError("invalid length","length",e)}const t=new Uint8Array(e);crypto$5.getRandomValues(t);return arrayify(t)}function shuffled(e){e=e.slice();for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));const n=e[t];e[t]=e[r];e[r]=n}return e}const lib_esm$6=Object.freeze({__proto__:null,randomBytes,shuffled});var aesJs=createCommonjsModule$2((function(e,t){(function(t){function r(e){return parseInt(e)===e}function n(e){if(!r(e.length)){return false}for(var t=0;t<e.length;t++){if(!r(e[t])||e[t]<0||e[t]>255){return false}}return true}function i(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&e.name==="Uint8Array"){if(t){if(e.slice){e=e.slice()}else{e=Array.prototype.slice.call(e)}}return e}if(Array.isArray(e)){if(!n(e)){throw new Error("Array contains invalid value: "+e)}return new Uint8Array(e)}if(r(e.length)&&n(e)){return new Uint8Array(e)}throw new Error("unsupported array-like object")}function s(e){return new Uint8Array(e)}function a(e,t,r,n,i){if(n!=null||i!=null){if(e.slice){e=e.slice(n,i)}else{e=Array.prototype.slice.call(e,n,i)}}t.set(e,r)}var o=function(){function e(e){var t=[],r=0;e=encodeURI(e);while(r<e.length){var n=e.charCodeAt(r++);if(n===37){t.push(parseInt(e.substr(r,2),16));r+=2}else{t.push(n)}}return i(t)}function t(e){var t=[],r=0;while(r<e.length){var n=e[r];if(n<128){t.push(String.fromCharCode(n));r++}else if(n>191&&n<224){t.push(String.fromCharCode((n&31)<<6|e[r+1]&63));r+=2}else{t.push(String.fromCharCode((n&15)<<12|(e[r+1]&63)<<6|e[r+2]&63));r+=3}}return t.join("")}return{toBytes:e,fromBytes:t}}();var f=function(){function e(e){var t=[];for(var r=0;r<e.length;r+=2){t.push(parseInt(e.substr(r,2),16))}return t}var t="0123456789abcdef";function r(e){var r=[];for(var n=0;n<e.length;n++){var i=e[n];r.push(t[(i&240)>>4]+t[i&15])}return r.join("")}return{toBytes:e,fromBytes:r}}();var c={16:10,24:12,32:14};var u=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145];var l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var h=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125];var d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986];var p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766];var y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126];var m=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436];var g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890];var b=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935];var v=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600];var w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480];var A=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795];var E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855];var _=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150];var S=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function $(e){var t=[];for(var r=0;r<e.length;r+=4){t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3])}return t}var T=function(e){if(!(this instanceof T)){throw Error("AES must be instanitated with `new`")}Object.defineProperty(this,"key",{value:i(e,true)});this._prepare()};T.prototype._prepare=function(){var e=c[this.key.length];if(e==null){throw new Error("invalid key size (must be 16, 24 or 32 bytes)")}this._Ke=[];this._Kd=[];for(var t=0;t<=e;t++){this._Ke.push([0,0,0,0]);this._Kd.push([0,0,0,0])}var r=(e+1)*4;var n=this.key.length/4;var i=$(this.key);var s;for(var t=0;t<n;t++){s=t>>2;this._Ke[s][t%4]=i[t];this._Kd[e-s][t%4]=i[t]}var a=0;var o=n,f;while(o<r){f=i[n-1];i[0]^=l[f>>16&255]<<24^l[f>>8&255]<<16^l[f&255]<<8^l[f>>24&255]^u[a]<<24;a+=1;if(n!=8){for(var t=1;t<n;t++){i[t]^=i[t-1]}}else{for(var t=1;t<n/2;t++){i[t]^=i[t-1]}f=i[n/2-1];i[n/2]^=l[f&255]^l[f>>8&255]<<8^l[f>>16&255]<<16^l[f>>24&255]<<24;for(var t=n/2+1;t<n;t++){i[t]^=i[t-1]}}var t=0,h,d;while(t<n&&o<r){h=o>>2;d=o%4;this._Ke[h][d]=i[t];this._Kd[e-h][d]=i[t++];o++}}for(var h=1;h<e;h++){for(var d=0;d<4;d++){f=this._Kd[h][d];this._Kd[h][d]=A[f>>24&255]^E[f>>16&255]^_[f>>8&255]^S[f&255]}}};T.prototype.encrypt=function(e){if(e.length!=16){throw new Error("invalid plaintext size (must be 16 bytes)")}var t=this._Ke.length-1;var r=[0,0,0,0];var n=$(e);for(var i=0;i<4;i++){n[i]^=this._Ke[0][i]}for(var a=1;a<t;a++){for(var i=0;i<4;i++){r[i]=d[n[i]>>24&255]^p[n[(i+1)%4]>>16&255]^y[n[(i+2)%4]>>8&255]^m[n[(i+3)%4]&255]^this._Ke[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Ke[t][i];o[4*i]=(l[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(l[n[(i+1)%4]>>16&255]^f>>16)&255;o[4*i+2]=(l[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(l[n[(i+3)%4]&255]^f)&255}return o};T.prototype.decrypt=function(e){if(e.length!=16){throw new Error("invalid ciphertext size (must be 16 bytes)")}var t=this._Kd.length-1;var r=[0,0,0,0];var n=$(e);for(var i=0;i<4;i++){n[i]^=this._Kd[0][i]}for(var a=1;a<t;a++){for(var i=0;i<4;i++){r[i]=g[n[i]>>24&255]^b[n[(i+3)%4]>>16&255]^v[n[(i+2)%4]>>8&255]^w[n[(i+1)%4]&255]^this._Kd[a][i]}n=r.slice()}var o=s(16),f;for(var i=0;i<4;i++){f=this._Kd[t][i];o[4*i]=(h[n[i]>>24&255]^f>>24)&255;o[4*i+1]=(h[n[(i+3)%4]>>16&255]^f>>16)&255;o[4*i+2]=(h[n[(i+2)%4]>>8&255]^f>>8)&255;o[4*i+3]=(h[n[(i+1)%4]&255]^f)&255}return o};var C=function(e){if(!(this instanceof C)){throw Error("AES must be instanitated with `new`")}this.description="Electronic Code Block";this.name="ecb";this._aes=new T(e)};C.prototype.encrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.encrypt(r);a(r,t,n)}return t};C.prototype.decrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.decrypt(r);a(r,t,n)}return t};var P=function(e,t){if(!(this instanceof P)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Block Chaining";this.name="cbc";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastCipherblock=i(t,true);this._aes=new T(e)};P.prototype.encrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid plaintext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var o=0;o<16;o++){r[o]^=this._lastCipherblock[o]}this._lastCipherblock=this._aes.encrypt(r);a(this._lastCipherblock,t,n)}return t};P.prototype.decrypt=function(e){e=i(e);if(e.length%16!==0){throw new Error("invalid ciphertext size (must be multiple of 16 bytes)")}var t=s(e.length);var r=s(16);for(var n=0;n<e.length;n+=16){a(e,r,0,n,n+16);r=this._aes.decrypt(r);for(var o=0;o<16;o++){t[n+o]=r[o]^this._lastCipherblock[o]}a(e,this._lastCipherblock,0,n,n+16)}return t};var x=function(e,t,r){if(!(this instanceof x)){throw Error("AES must be instanitated with `new`")}this.description="Cipher Feedback";this.name="cfb";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 size)")}if(!r){r=1}this.segmentSize=r;this._shiftRegister=i(t,true);this._aes=new T(e)};x.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid plaintext size (must be segmentSize bytes)")}var t=i(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){t[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(t,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};x.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0){throw new Error("invalid ciphertext size (must be segmentSize bytes)")}var t=i(e,true);var r;for(var n=0;n<t.length;n+=this.segmentSize){r=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++){t[n+s]^=r[s]}a(this._shiftRegister,this._shiftRegister,0,this.segmentSize);a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return t};var I=function(e,t){if(!(this instanceof I)){throw Error("AES must be instanitated with `new`")}this.description="Output Feedback";this.name="ofb";if(!t){t=s(16)}else if(t.length!=16){throw new Error("invalid initialation vector size (must be 16 bytes)")}this._lastPrecipher=i(t,true);this._lastPrecipherIndex=16;this._aes=new T(e)};I.prototype.encrypt=function(e){var t=i(e,true);for(var r=0;r<t.length;r++){if(this._lastPrecipherIndex===16){this._lastPrecipher=this._aes.encrypt(this._lastPrecipher);this._lastPrecipherIndex=0}t[r]^=this._lastPrecipher[this._lastPrecipherIndex++]}return t};I.prototype.decrypt=I.prototype.encrypt;var k=function(e){if(!(this instanceof k)){throw Error("Counter must be instanitated with `new`")}if(e!==0&&!e){e=1}if(typeof e==="number"){this._counter=s(16);this.setValue(e)}else{this.setBytes(e)}};k.prototype.setValue=function(e){if(typeof e!=="number"||parseInt(e)!=e){throw new Error("invalid counter value (must be an integer)")}for(var t=15;t>=0;--t){this._counter[t]=e%256;e=e>>8}};k.prototype.setBytes=function(e){e=i(e,true);if(e.length!=16){throw new Error("invalid counter bytes size (must be 16 bytes)")}this._counter=e};k.prototype.increment=function(){for(var e=15;e>=0;e--){if(this._counter[e]===255){this._counter[e]=0}else{this._counter[e]++;break}}};var N=function(e,t){if(!(this instanceof N)){throw Error("AES must be instanitated with `new`")}this.description="Counter";this.name="ctr";if(!(t instanceof k)){t=new k(t)}this._counter=t;this._remainingCounter=null;this._remainingCounterIndex=16;this._aes=new T(e)};N.prototype.encrypt=function(e){var t=i(e,true);for(var r=0;r<t.length;r++){if(this._remainingCounterIndex===16){this._remainingCounter=this._aes.encrypt(this._counter._counter);this._remainingCounterIndex=0;this._counter.increment()}t[r]^=this._remainingCounter[this._remainingCounterIndex++]}return t};N.prototype.decrypt=N.prototype.encrypt;function R(e){e=i(e,true);var t=16-e.length%16;var r=s(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++){r[n]=t}return r}function M(e){e=i(e,true);if(e.length<16){throw new Error("PKCS#7 invalid length")}var t=e[e.length-1];if(t>16){throw new Error("PKCS#7 padding byte out of range")}var r=e.length-t;for(var n=0;n<t;n++){if(e[r+n]!==t){throw new Error("PKCS#7 invalid padding byte")}}var o=s(r);a(e,o,0,0,r);return o}var O={AES:T,Counter:k,ModeOfOperation:{ecb:C,cbc:P,cfb:x,ofb:I,ctr:N},utils:{hex:f,utf8:o},padding:{pkcs7:{pad:R,strip:M}},_arrayTest:{coerceArray:i,createArray:s,copyArray:a}};{e.exports=O}})()}));const version$7="json-wallets/5.7.0";function looseArrayify(e){if(typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}return arrayify(e)}function zpad(e,t){e=String(e);while(e.length<t){e="0"+e}return e}function getPassword(e){if(typeof e==="string"){return toUtf8Bytes(e,UnicodeNormalizationForm.NFKC)}return arrayify(e)}function searchPath(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r){if(i.toLowerCase()===n[e]){t=r[i];break}}if(t===null){return null}r=t}return r}function uuidV4(e){const t=arrayify(e);t[6]=t[6]&15|64;t[8]=t[8]&63|128;const r=hexlify(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const logger$m=new Logger(version$7);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$1(e,t){const r=JSON.parse(e);t=getPassword(t);const n=getAddress(searchPath(r,"ethaddr"));const i=looseArrayify(searchPath(r,"encseed"));if(!i||i.length%16!==0){logger$m.throwArgumentError("invalid encseed","json",e)}const s=arrayify(pbkdf2$1(t,t,2e3,32,"sha256")).slice(0,16);const a=i.slice(0,16);const o=i.slice(16);const f=new aesJs.ModeOfOperation.cbc(s,a);const c=aesJs.padding.pkcs7.strip(arrayify(f.decrypt(o)));let u="";for(let e=0;e<c.length;e++){u+=String.fromCharCode(c[e])}const l=toUtf8Bytes(u);const h=keccak256$1(l);return new CrowdsaleAccount({_isCrowdsaleAccount:true,address:n,privateKey:h})}function isCrowdsaleWallet(e){let t=null;try{t=JSON.parse(e)}catch(e){return false}return t.encseed&&t.ethaddr}function isKeystoreWallet(e){let t=null;try{t=JSON.parse(e)}catch(e){return false}if(!t.version||parseInt(t.version)!==t.version||parseInt(t.version)!==3){return false}return true}function getJsonWalletAddress(e){if(isCrowdsaleWallet(e)){try{return getAddress(JSON.parse(e).ethaddr)}catch(e){return null}}if(isKeystoreWallet(e)){try{return getAddress(JSON.parse(e).address)}catch(e){return null}}return null}var scrypt=createCommonjsModule$2((function(e,t){(function(t){const r=2147483647;function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762;let a=1359893119,o=2600822924,f=528734635,c=1541459225;const u=new Uint32Array(64);function l(e){let l=0,h=e.length;while(h>=64){let d=r,p=n,y=i,m=s,g=a,b=o,v=f,w=c,A,E,_,S,$;for(E=0;E<16;E++){_=l+E*4;u[E]=(e[_]&255)<<24|(e[_+1]&255)<<16|(e[_+2]&255)<<8|e[_+3]&255}for(E=16;E<64;E++){A=u[E-2];S=(A>>>17|A<<32-17)^(A>>>19|A<<32-19)^A>>>10;A=u[E-15];$=(A>>>7|A<<32-7)^(A>>>18|A<<32-18)^A>>>3;u[E]=(S+u[E-7]|0)+($+u[E-16]|0)|0}for(E=0;E<64;E++){S=(((g>>>6|g<<32-6)^(g>>>11|g<<32-11)^(g>>>25|g<<32-25))+(g&b^~g&v)|0)+(w+(t[E]+u[E]|0)|0)|0;$=((d>>>2|d<<32-2)^(d>>>13|d<<32-13)^(d>>>22|d<<32-22))+(d&p^d&y^p&y)|0;w=v;v=b;b=g;g=m+S|0;m=y;y=p;p=d;d=S+$|0}r=r+d|0;n=n+p|0;i=i+y|0;s=s+m|0;a=a+g|0;o=o+b|0;f=f+v|0;c=c+w|0;l+=64;h-=64}}l(e);let h,d=e.length%64,p=e.length/536870912|0,y=e.length<<3,m=d<56?56:120,g=e.slice(e.length-d,e.length);g.push(128);for(h=d+1;h<m;h++){g.push(0)}g.push(p>>>24&255);g.push(p>>>16&255);g.push(p>>>8&255);g.push(p>>>0&255);g.push(y>>>24&255);g.push(y>>>16&255);g.push(y>>>8&255);g.push(y>>>0&255);l(g);return[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,f>>>24&255,f>>>16&255,f>>>8&255,f>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(e,t,r){e=e.length<=64?e:n(e);const i=64+t.length+4;const s=new Array(i);const a=new Array(64);let o;let f=[];for(o=0;o<64;o++){s[o]=54}for(o=0;o<e.length;o++){s[o]^=e[o]}for(o=0;o<t.length;o++){s[64+o]=t[o]}for(o=i-4;o<i;o++){s[o]=0}for(o=0;o<64;o++)a[o]=92;for(o=0;o<e.length;o++)a[o]^=e[o];function c(){for(let e=i-1;e>=i-4;e--){s[e]++;if(s[e]<=255)return;s[e]=0}}while(r>=32){c();f=f.concat(n(a.concat(n(s))));r-=32}if(r>0){c();f=f.concat(n(a.concat(n(s))).slice(0,r))}return f}function s(e,t,r,n,i){let s;c(e,(2*r-1)*16,i,0,16);for(s=0;s<2*r;s++){f(e,s*16,i,16);o(i,n);c(i,0,e,t+s*16,16)}for(s=0;s<r;s++){c(e,t+s*2*16,e,s*16,16)}for(s=0;s<r;s++){c(e,t+(s*2+1)*16,e,(s+r)*16,16)}}function a(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2){t[4]^=a(t[0]+t[12],7);t[8]^=a(t[4]+t[0],9);t[12]^=a(t[8]+t[4],13);t[0]^=a(t[12]+t[8],18);t[9]^=a(t[5]+t[1],7);t[13]^=a(t[9]+t[5],9);t[1]^=a(t[13]+t[9],13);t[5]^=a(t[1]+t[13],18);t[14]^=a(t[10]+t[6],7);t[2]^=a(t[14]+t[10],9);t[6]^=a(t[2]+t[14],13);t[10]^=a(t[6]+t[2],18);t[3]^=a(t[15]+t[11],7);t[7]^=a(t[3]+t[15],9);t[11]^=a(t[7]+t[3],13);t[15]^=a(t[11]+t[7],18);t[1]^=a(t[0]+t[3],7);t[2]^=a(t[1]+t[0],9);t[3]^=a(t[2]+t[1],13);t[0]^=a(t[3]+t[2],18);t[6]^=a(t[5]+t[4],7);t[7]^=a(t[6]+t[5],9);t[4]^=a(t[7]+t[6],13);t[5]^=a(t[4]+t[7],18);t[11]^=a(t[10]+t[9],7);t[8]^=a(t[11]+t[10],9);t[9]^=a(t[8]+t[11],13);t[10]^=a(t[9]+t[8],18);t[12]^=a(t[15]+t[14],7);t[13]^=a(t[12]+t[15],9);t[14]^=a(t[13]+t[12],13);t[15]^=a(t[14]+t[13],18)}for(let r=0;r<16;++r){e[r]+=t[r]}}function f(e,t,r,n){for(let i=0;i<n;i++){r[i]^=e[t+i]}}function c(e,t,r,n,i){while(i--){r[n++]=e[t++]}}function u(e){if(!e||typeof e.length!=="number"){return false}for(let t=0;t<e.length;t++){const r=e[t];if(typeof r!=="number"||r%1||r<0||r>=256){return false}}return true}function l(e,t){if(typeof e!=="number"||e%1){throw new Error("invalid "+t)}return e}function h(e,t,n,a,o,h,d){n=l(n,"N");a=l(a,"r");o=l(o,"p");h=l(h,"dkLen");if(n===0||(n&n-1)!==0){throw new Error("N must be power of 2")}if(n>r/128/a){throw new Error("N too large")}if(a>r/128/o){throw new Error("r too large")}if(!u(e)){throw new Error("password must be an array or buffer")}e=Array.prototype.slice.call(e);if(!u(t)){throw new Error("salt must be an array or buffer")}t=Array.prototype.slice.call(t);let p=i(e,t,o*128*a);const y=new Uint32Array(o*32*a);for(let e=0;e<y.length;e++){const t=e*4;y[e]=(p[t+3]&255)<<24|(p[t+2]&255)<<16|(p[t+1]&255)<<8|(p[t+0]&255)<<0}const m=new Uint32Array(64*a);const g=new Uint32Array(32*a*n);const b=32*a;const v=new Uint32Array(16);const w=new Uint32Array(16);const A=o*n*2;let E=0;let _=null;let S=false;let $=0;let T=0,C;let P;const x=d?parseInt(1e3/a):4294967295;const I=typeof setImmediate!=="undefined"?setImmediate:setTimeout;const k=function(){if(S){return d(new Error("cancelled"),E/A)}let t;switch($){case 0:P=T*32*a;c(y,P,m,0,b);$=1;C=0;case 1:t=n-C;if(t>x){t=x}for(let e=0;e<t;e++){c(m,0,g,(C+e)*b,b);s(m,b,a,v,w)}C+=t;E+=t;if(d){const e=parseInt(1e3*E/A);if(e!==_){S=d(null,E/A);if(S){break}_=e}}if(C<n){break}C=0;$=2;case 2:t=n-C;if(t>x){t=x}for(let e=0;e<t;e++){const e=(2*a-1)*16;const t=m[e]&n-1;f(g,t*b,m,b);s(m,b,a,v,w)}C+=t;E+=t;if(d){const e=parseInt(1e3*E/A);if(e!==_){S=d(null,E/A);if(S){break}_=e}}if(C<n){break}c(m,0,y,P,b);T++;if(T<o){$=0;break}p=[];for(let e=0;e<y.length;e++){p.push(y[e]>>0&255);p.push(y[e]>>8&255);p.push(y[e]>>16&255);p.push(y[e]>>24&255)}const r=i(e,p,h);if(d){d(null,1,r)}return r}if(d){I(k)}};if(!d){while(true){const e=k();if(e!=undefined){return e}}}k()}const d={scrypt:function(e,t,r,n,i,s,a){return new Promise((function(o,f){let c=0;if(a){a(0)}h(e,t,r,n,i,s,(function(e,t,r){if(e){f(e)}else if(r){if(a&&c!==1){a(1)}o(new Uint8Array(r))}else if(a&&t!==c){c=t;return a(t)}}))}))},syncScrypt:function(e,t,r,n,i,s){return new Uint8Array(h(e,t,r,n,i,s))}};{e.exports=d}})()}));var __awaiter$c=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$l=new Logger(version$7);function hasMnemonic$1(e){return e!=null&&e.mnemonic&&e.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(e,t,r){const n=searchPath(e,"crypto/cipher");if(n==="aes-128-ctr"){const n=looseArrayify(searchPath(e,"crypto/cipherparams/iv"));const i=new aesJs.Counter(n);const s=new aesJs.ModeOfOperation.ctr(t,i);return arrayify(s.decrypt(r))}return null}function _getAccount(e,t){const r=looseArrayify(searchPath(e,"crypto/ciphertext"));const n=hexlify(keccak256$1(concat$2([t.slice(16,32),r]))).substring(2);if(n!==searchPath(e,"crypto/mac").toLowerCase()){throw new Error("invalid password")}const i=_decrypt(e,t.slice(0,16),r);if(!i){logger$l.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"})}const s=t.slice(32,64);const a=computeAddress(i);if(e.address){let t=e.address.toLowerCase();if(t.substring(0,2)!=="0x"){t="0x"+t}if(getAddress(t)!==a){throw new Error("address mismatch")}}const o={_isKeystoreAccount:true,address:a,privateKey:hexlify(i)};if(searchPath(e,"x-ethers/version")==="0.1"){const t=looseArrayify(searchPath(e,"x-ethers/mnemonicCiphertext"));const r=looseArrayify(searchPath(e,"x-ethers/mnemonicCounter"));const n=new aesJs.Counter(r);const i=new aesJs.ModeOfOperation.ctr(s,n);const a=searchPath(e,"x-ethers/path")||defaultPath;const f=searchPath(e,"x-ethers/locale")||"en";const c=arrayify(i.decrypt(t));try{const e=entropyToMnemonic(c,f);const t=HDNode.fromMnemonic(e,null,f).derivePath(a);if(t.privateKey!=o.privateKey){throw new Error("mnemonic mismatch")}o.mnemonic=t.mnemonic}catch(e){if(e.code!==Logger.errors.INVALID_ARGUMENT||e.argument!=="wordlist"){throw e}}}return new KeystoreAccount(o)}function pbkdf2Sync(e,t,r,n,i){return arrayify(pbkdf2$1(e,t,r,n,i))}function pbkdf2(e,t,r,n,i){return Promise.resolve(pbkdf2Sync(e,t,r,n,i))}function _computeKdfKey(e,t,r,n,i){const s=getPassword(t);const a=searchPath(e,"crypto/kdf");if(a&&typeof a==="string"){const t=function(e,t){return logger$l.throwArgumentError("invalid key-derivation function parameters",e,t)};if(a.toLowerCase()==="scrypt"){const r=looseArrayify(searchPath(e,"crypto/kdfparams/salt"));const o=parseInt(searchPath(e,"crypto/kdfparams/n"));const f=parseInt(searchPath(e,"crypto/kdfparams/r"));const c=parseInt(searchPath(e,"crypto/kdfparams/p"));if(!o||!f||!c){t("kdf",a)}if((o&o-1)!==0){t("N",o)}const u=parseInt(searchPath(e,"crypto/kdfparams/dklen"));if(u!==32){t("dklen",u)}return n(s,r,o,f,c,64,i)}else if(a.toLowerCase()==="pbkdf2"){const n=looseArrayify(searchPath(e,"crypto/kdfparams/salt"));let i=null;const a=searchPath(e,"crypto/kdfparams/prf");if(a==="hmac-sha256"){i="sha256"}else if(a==="hmac-sha512"){i="sha512"}else{t("prf",a)}const o=parseInt(searchPath(e,"crypto/kdfparams/c"));const f=parseInt(searchPath(e,"crypto/kdfparams/dklen"));if(f!==32){t("dklen",f)}return r(s,n,o,f,i)}}return logger$l.throwArgumentError("unsupported key-derivation function","kdf",a)}function decryptSync(e,t){const r=JSON.parse(e);const n=_computeKdfKey(r,t,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(r,n)}function decrypt(e,t,r){return __awaiter$c(this,void 0,void 0,(function*(){const n=JSON.parse(e);const i=yield _computeKdfKey(n,t,pbkdf2,scrypt.scrypt,r);return _getAccount(n,i)}))}function encrypt(e,t,r,n){try{if(getAddress(e.address)!==computeAddress(e.privateKey)){throw new Error("address/privateKey mismatch")}if(hasMnemonic$1(e)){const t=e.mnemonic;const r=HDNode.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||defaultPath);if(r.privateKey!=e.privateKey){throw new Error("mnemonic mismatch")}}}catch(e){return Promise.reject(e)}if(typeof r==="function"&&!n){n=r;r={}}if(!r){r={}}const i=arrayify(e.privateKey);const s=getPassword(t);let a=null;let o=null;let f=null;if(hasMnemonic$1(e)){const t=e.mnemonic;a=arrayify(mnemonicToEntropy(t.phrase,t.locale||"en"));o=t.path||defaultPath;f=t.locale||"en"}let c=r.client;if(!c){c="ethers.js"}let u=null;if(r.salt){u=arrayify(r.salt)}else{u=randomBytes(32)}let l=null;if(r.iv){l=arrayify(r.iv);if(l.length!==16){throw new Error("invalid iv")}}else{l=randomBytes(16)}let h=null;if(r.uuid){h=arrayify(r.uuid);if(h.length!==16){throw new Error("invalid uuid")}}else{h=randomBytes(16)}let d=1<<17,p=8,y=1;if(r.scrypt){if(r.scrypt.N){d=r.scrypt.N}if(r.scrypt.r){p=r.scrypt.r}if(r.scrypt.p){y=r.scrypt.p}}return scrypt.scrypt(s,u,d,p,y,64,n).then((t=>{t=arrayify(t);const r=t.slice(0,16);const n=t.slice(16,32);const s=t.slice(32,64);const m=new aesJs.Counter(l);const g=new aesJs.ModeOfOperation.ctr(r,m);const b=arrayify(g.encrypt(i));const v=keccak256$1(concat$2([n,b]));const w={address:e.address.substring(2).toLowerCase(),id:uuidV4(h),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(l).substring(2)},ciphertext:hexlify(b).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(u).substring(2),n:d,dklen:32,p:y,r:p},mac:v.substring(2)}};if(a){const e=randomBytes(16);const t=new aesJs.Counter(e);const r=new aesJs.ModeOfOperation.ctr(s,t);const n=arrayify(r.encrypt(a));const i=new Date;const u=i.getUTCFullYear()+"-"+zpad(i.getUTCMonth()+1,2)+"-"+zpad(i.getUTCDate(),2)+"T"+zpad(i.getUTCHours(),2)+"-"+zpad(i.getUTCMinutes(),2)+"-"+zpad(i.getUTCSeconds(),2)+".0Z";w["x-ethers"]={client:c,gethFilename:"UTC--"+u+"--"+w.address,mnemonicCounter:hexlify(e).substring(2),mnemonicCiphertext:hexlify(n).substring(2),path:o,locale:f,version:"0.1"}}return JSON.stringify(w)}))}function decryptJsonWallet(e,t,r){if(isCrowdsaleWallet(e)){if(r){r(0)}const n=decrypt$1(e,t);if(r){r(1)}return Promise.resolve(n)}if(isKeystoreWallet(e)){return decrypt(e,t,r)}return Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(e,t){if(isCrowdsaleWallet(e)){return decrypt$1(e,t)}if(isKeystoreWallet(e)){return decryptSync(e,t)}throw new Error("invalid JSON wallet")}const lib_esm$5=Object.freeze({__proto__:null,decryptCrowdsale:decrypt$1,decryptKeystore:decrypt,decryptKeystoreSync:decryptSync,encryptKeystore:encrypt,isCrowdsaleWallet,isKeystoreWallet,getJsonWalletAddress,decryptJsonWallet,decryptJsonWalletSync});const version$6="wallet/5.7.0";var __awaiter$b=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$k=new Logger(version$6);function isAccount(e){return e!=null&&isHexString(e.privateKey,32)&&e.address!=null}function hasMnemonic(e){const t=e.mnemonic;return t&&t.phrase}class Wallet extends Signer{constructor(e,t){super();if(isAccount(e)){const t=new SigningKey(e.privateKey);defineReadOnly(this,"_signingKey",(()=>t));defineReadOnly(this,"address",computeAddress(this.publicKey));if(this.address!==getAddress(e.address)){logger$k.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]")}if(hasMnemonic(e)){const t=e.mnemonic;defineReadOnly(this,"_mnemonic",(()=>({phrase:t.phrase,path:t.path||defaultPath,locale:t.locale||"en"})));const r=this.mnemonic;const n=HDNode.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path);if(computeAddress(n.privateKey)!==this.address){logger$k.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}}else{defineReadOnly(this,"_mnemonic",(()=>null))}}else{if(SigningKey.isSigningKey(e)){if(e.curve!=="secp256k1"){logger$k.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]")}defineReadOnly(this,"_signingKey",(()=>e))}else{if(typeof e==="string"){if(e.match(/^[0-9a-f]*$/i)&&e.length===64){e="0x"+e}}const t=new SigningKey(e);defineReadOnly(this,"_signingKey",(()=>t))}defineReadOnly(this,"_mnemonic",(()=>null));defineReadOnly(this,"address",computeAddress(this.publicKey))}if(t&&!Provider.isProvider(t)){logger$k.throwArgumentError("invalid provider","provider",t)}defineReadOnly(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then((t=>{if(t.from!=null){if(getAddress(t.from)!==this.address){logger$k.throwArgumentError("transaction from address mismatch","transaction.from",e.from)}delete t.from}const r=this._signingKey().signDigest(keccak256$1(serialize$3(t)));return serialize$3(t,r)}))}signMessage(e){return __awaiter$b(this,void 0,void 0,(function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))}))}_signTypedData(e,t,r){return __awaiter$b(this,void 0,void 0,(function*(){const n=yield TypedDataEncoder.resolveNames(e,t,r,(e=>{if(this.provider==null){logger$k.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e})}return this.provider.resolveName(e)}));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(n.domain,t,n.value)))}))}encrypt(e,t,r){if(typeof t==="function"&&!r){r=t;t={}}if(r&&typeof r!=="function"){throw new Error("invalid callback")}if(!t){t={}}return encrypt(this,e,t,r)}static createRandom(e){let t=randomBytes(16);if(!e){e={}}if(e.extraEntropy){t=arrayify(hexDataSlice(keccak256$1(concat$2([t,e.extraEntropy])),0,16))}const r=entropyToMnemonic(t,e.locale);return Wallet.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return decryptJsonWallet(e,t,r).then((e=>new Wallet(e)))}static fromEncryptedJsonSync(e,t){return new Wallet(decryptJsonWalletSync(e,t))}static fromMnemonic(e,t,r){if(!t){t=defaultPath}return new Wallet(HDNode.fromMnemonic(e,null,r).derivePath(t))}}function verifyMessage(e,t){return recoverAddress(hashMessage(e),t)}function verifyTypedData(e,t,r,n){return recoverAddress(TypedDataEncoder.hash(e,t,r),n)}const lib_esm$4=Object.freeze({__proto__:null,Wallet,verifyMessage,verifyTypedData});const version$5="networks/5.7.1";const logger$j=new Logger(version$5);function isRenetworkable(e){return e&&typeof e.renetwork==="function"}function ethDefaultProvider(e){const t=function(t,r){if(r==null){r={}}const n=[];if(t.InfuraProvider&&r.infura!=="-"){try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}}if(t.EtherscanProvider&&r.etherscan!=="-"){try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}}if(t.AlchemyProvider&&r.alchemy!=="-"){try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}}if(t.PocketProvider&&r.pocket!=="-"){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new t.PocketProvider(e,r.pocket);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(e){}}if(t.CloudflareProvider&&r.cloudflare!=="-"){try{n.push(new t.CloudflareProvider(e))}catch(e){}}if(t.AnkrProvider&&r.ankr!=="-"){try{const i=["ropsten"];const s=new t.AnkrProvider(e,r.ankr);if(s.network&&i.indexOf(s.network.name)===-1){n.push(s)}}catch(e){}}if(n.length===0){return null}if(t.FallbackProvider){let i=1;if(r.quorum!=null){i=r.quorum}else if(e==="homestead"){i=2}return new t.FallbackProvider(n,i)}return n[0]};t.renetwork=function(e){return ethDefaultProvider(e)};return t}function etcDefaultProvider(e,t){const r=function(r,n){if(r.JsonRpcProvider){return new r.JsonRpcProvider(e,t)}return null};r.renetwork=function(t){return etcDefaultProvider(e,t)};return r}const homestead={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ethDefaultProvider("homestead")};const ropsten={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ethDefaultProvider("ropsten")};const classicMordor={chainId:63,name:"classicMordor",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/mordor","classicMordor")};const networks={unspecified:{chainId:0,name:"unspecified"},homestead,mainnet:homestead,morden:{chainId:2,name:"morden"},ropsten,testnet:ropsten,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ethDefaultProvider("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ethDefaultProvider("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ethDefaultProvider("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:ethDefaultProvider("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor,classicTestnet:classicMordor,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:etcDefaultProvider("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ethDefaultProvider("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:ethDefaultProvider("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function getNetwork(e){if(e==null){return null}if(typeof e==="number"){for(const t in networks){const r=networks[t];if(r.chainId===e){return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}}return{chainId:e,name:"unknown"}}if(typeof e==="string"){const t=networks[e];if(t==null){return null}return{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=networks[e.name];if(!t){if(typeof e.chainId!=="number"){logger$j.throwArgumentError("invalid network chainId","network",e)}return e}if(e.chainId!==0&&e.chainId!==t.chainId){logger$j.throwArgumentError("network chainId mismatch","network",e)}let r=e._defaultProvider||null;if(r==null&&t._defaultProvider){if(isRenetworkable(t._defaultProvider)){r=t._defaultProvider.renetwork(e)}else{r=t._defaultProvider}}return{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}const version$4="web/5.7.1";var __awaiter$a=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};function getUrl(e,t){return __awaiter$a(this,void 0,void 0,(function*(){if(t==null){t={}}const r={method:t.method||"GET",headers:t.headers||{},body:t.body||undefined};if(t.skipFetchSetup!==true){r.mode="cors";r.cache="no-cache";r.credentials="same-origin";r.redirect="follow";r.referrer="client"}if(t.fetchOptions!=null){const e=t.fetchOptions;if(e.mode){r.mode=e.mode}if(e.cache){r.cache=e.cache}if(e.credentials){r.credentials=e.credentials}if(e.redirect){r.redirect=e.redirect}if(e.referrer){r.referrer=e.referrer}}const n=yield fetch(e,r);const i=yield n.arrayBuffer();const s={};if(n.headers.forEach){n.headers.forEach(((e,t)=>{s[t.toLowerCase()]=e}))}else{n.headers.keys().forEach((e=>{s[e.toLowerCase()]=n.headers.get(e)}))}return{headers:s,statusCode:n.status,statusMessage:n.statusText,body:arrayify(new Uint8Array(i))}}))}var __awaiter$9=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$i=new Logger(version$4);function staller(e){return new Promise((t=>{setTimeout(t,e)}))}function bodyify(e,t){if(e==null){return null}if(typeof e==="string"){return e}if(isBytesLike(e)){if(t&&(t.split("/")[0]==="text"||t.split(";")[0].trim()==="application/json")){try{return toUtf8String(e)}catch(e){}}return hexlify(e)}return e}function unpercent(e){return toUtf8Bytes(e.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16)))))}function _fetchData(e,t,r){const n=typeof e==="object"&&e.throttleLimit!=null?e.throttleLimit:12;logger$i.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof e==="object"?e.throttleCallback:null;const s=typeof e==="object"&&typeof e.throttleSlotInterval==="number"?e.throttleSlotInterval:100;logger$i.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a=typeof e==="object"?!!e.errorPassThrough:false;const o={};let f=null;const c={method:"GET"};let u=false;let l=2*60*1e3;if(typeof e==="string"){f=e}else if(typeof e==="object"){if(e==null||e.url==null){logger$i.throwArgumentError("missing URL","connection.url",e)}f=e.url;if(typeof e.timeout==="number"&&e.timeout>0){l=e.timeout}if(e.headers){for(const t in e.headers){o[t.toLowerCase()]={key:t,value:String(e.headers[t])};if(["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0){u=true}}}c.allowGzip=!!e.allowGzip;if(e.user!=null&&e.password!=null){if(f.substring(0,6)!=="https:"&&e.allowInsecureAuthentication!==true){logger$i.throwError("basic authentication requires a secure https url",Logger.errors.INVALID_ARGUMENT,{argument:"url",url:f,user:e.user,password:"[REDACTED]"})}const t=e.user+":"+e.password;o["authorization"]={key:"Authorization",value:"Basic "+encode$7(toUtf8Bytes(t))}}if(e.skipFetchSetup!=null){c.skipFetchSetup=!!e.skipFetchSetup}if(e.fetchOptions!=null){c.fetchOptions=shallowCopy(e.fetchOptions)}}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i");const d=f?f.match(h):null;if(d){try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":d[1]||"text/plain"},body:d[2]?decode$6(d[3]):unpercent(d[3])};let t=e.body;if(r){t=r(e.body,e)}return Promise.resolve(t)}catch(e){logger$i.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(d[1],d[2]),error:e,requestBody:null,requestMethod:"GET",url:f})}}if(t){c.method="POST";c.body=t;if(o["content-type"]==null){o["content-type"]={key:"Content-Type",value:"application/octet-stream"}}if(o["content-length"]==null){o["content-length"]={key:"Content-Length",value:String(t.length)}}}const p={};Object.keys(o).forEach((e=>{const t=o[e];p[t.key]=t.value}));c.headers=p;const y=function(){let e=null;const t=new Promise((function(t,r){if(l){e=setTimeout((()=>{if(e==null){return}e=null;r(logger$i.makeError("timeout",Logger.errors.TIMEOUT,{requestBody:bodyify(c.body,p["content-type"]),requestMethod:c.method,timeout:l,url:f}))}),l)}}));const r=function(){if(e==null){return}clearTimeout(e);e=null};return{promise:t,cancel:r}}();const m=function(){return __awaiter$9(this,void 0,void 0,(function*(){for(let e=0;e<n;e++){let t=null;try{t=yield getUrl(f,c);if(e<n){if(t.statusCode===301||t.statusCode===302){const e=t.headers.location||"";if(c.method==="GET"&&e.match(/^https:/)){f=t.headers.location;continue}}else if(t.statusCode===429){let r=true;if(i){r=yield i(e,f)}if(r){let r=0;const n=t.headers["retry-after"];if(typeof n==="string"&&n.match(/^[1-9][0-9]*$/)){r=parseInt(n)*1e3}else{r=s*parseInt(String(Math.random()*Math.pow(2,e)))}yield staller(r);continue}}}}catch(e){t=e.response;if(t==null){y.cancel();logger$i.throwError("missing response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(c.body,p["content-type"]),requestMethod:c.method,serverError:e,url:f})}}let o=t.body;if(u&&t.statusCode===304){o=null}else if(!a&&(t.statusCode<200||t.statusCode>=300)){y.cancel();logger$i.throwError("bad response",Logger.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:bodyify(o,t.headers?t.headers["content-type"]:null),requestBody:bodyify(c.body,p["content-type"]),requestMethod:c.method,url:f})}if(r){try{const e=yield r(o,t);y.cancel();return e}catch(r){if(r.throttleRetry&&e<n){let t=true;if(i){t=yield i(e,f)}if(t){const t=s*parseInt(String(Math.random()*Math.pow(2,e)));yield staller(t);continue}}y.cancel();logger$i.throwError("processing response error",Logger.errors.SERVER_ERROR,{body:bodyify(o,t.headers?t.headers["content-type"]:null),error:r,requestBody:bodyify(c.body,p["content-type"]),requestMethod:c.method,url:f})}}y.cancel();return o}return logger$i.throwError("failed response",Logger.errors.SERVER_ERROR,{requestBody:bodyify(c.body,p["content-type"]),requestMethod:c.method,url:f})}))}();return Promise.race([y.promise,m])}function fetchJson(e,t,r){let n=(e,t)=>{let n=null;if(e!=null){try{n=JSON.parse(toUtf8String(e))}catch(t){logger$i.throwError("invalid JSON",Logger.errors.SERVER_ERROR,{body:e,error:t})}}if(r){n=r(n,t)}return n};let i=null;if(t!=null){i=toUtf8Bytes(t);const r=typeof e==="string"?{url:e}:shallowCopy(e);if(r.headers){const e=Object.keys(r.headers).filter((e=>e.toLowerCase()==="content-type")).length!==0;if(!e){r.headers=shallowCopy(r.headers);r.headers["content-type"]="application/json"}}else{r.headers={"content-type":"application/json"}}e=r}return _fetchData(e,i,n)}function poll(e,t){if(!t){t={}}t=shallowCopy(t);if(t.floor==null){t.floor=0}if(t.ceiling==null){t.ceiling=1e4}if(t.interval==null){t.interval=250}return new Promise((function(r,n){let i=null;let s=false;const a=()=>{if(s){return false}s=true;if(i){clearTimeout(i)}return true};if(t.timeout){i=setTimeout((()=>{if(a()){n(new Error("timeout"))}}),t.timeout)}const o=t.retryLimit;let f=0;function c(){return e().then((function(e){if(e!==undefined){if(a()){r(e)}}else if(t.oncePoll){t.oncePoll.once("poll",c)}else if(t.onceBlock){t.onceBlock.once("block",c)}else if(!s){f++;if(f>o){if(a()){n(new Error("retry limit reached"))}return}let e=t.interval*parseInt(String(Math.random()*Math.pow(2,f)));if(e<t.floor){e=t.floor}if(e>t.ceiling){e=t.ceiling}setTimeout(c,e)}return null}),(function(e){if(a()){n(e)}}))}c()}))}const lib_esm$3=Object.freeze({__proto__:null,_fetchData,fetchJson,poll});var ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l";var ALPHABET_MAP={};for(var z=0;z<ALPHABET.length;z++){var x=ALPHABET.charAt(z);if(ALPHABET_MAP[x]!==undefined)throw new TypeError(x+" is ambiguous");ALPHABET_MAP[x]=z}function polymodStep(e){var t=e>>25;return(e&33554431)<<5^-(t>>0&1)&996825010^-(t>>1&1)&642813549^-(t>>2&1)&513874426^-(t>>3&1)&1027748829^-(t>>4&1)&705979059}function prefixChk(e){var t=1;for(var r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=polymodStep(t)^n>>5}t=polymodStep(t);for(r=0;r<e.length;++r){var i=e.charCodeAt(r);t=polymodStep(t)^i&31}return t}function encode$6(e,t,r){r=r||90;if(e.length+7+t.length>r)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var n=prefixChk(e);if(typeof n==="string")throw new Error(n);var i=e+"1";for(var s=0;s<t.length;++s){var a=t[s];if(a>>5!==0)throw new Error("Non 5-bit word");n=polymodStep(n)^a;i+=ALPHABET.charAt(a)}for(s=0;s<6;++s){n=polymodStep(n)}n^=1;for(s=0;s<6;++s){var o=n>>(5-s)*5&31;i+=ALPHABET.charAt(o)}return i}function __decode(e,t){t=t||90;if(e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var r=e.toLowerCase();var n=e.toUpperCase();if(e!==r&&e!==n)return"Mixed-case string "+e;e=r;var i=e.lastIndexOf("1");if(i===-1)return"No separator character for "+e;if(i===0)return"Missing prefix for "+e;var s=e.slice(0,i);var a=e.slice(i+1);if(a.length<6)return"Data too short";var o=prefixChk(s);if(typeof o==="string")return o;var f=[];for(var c=0;c<a.length;++c){var u=a.charAt(c);var l=ALPHABET_MAP[u];if(l===undefined)return"Unknown character "+u;o=polymodStep(o)^l;if(c+6>=a.length)continue;f.push(l)}if(o!==1)return"Invalid checksum for "+e;return{prefix:s,words:f}}function decodeUnsafe(){var e=__decode.apply(null,arguments);if(typeof e==="object")return e}function decode$5(e){var t=__decode.apply(null,arguments);if(typeof t==="object")return t;throw new Error(t)}function convert(e,t,r,n){var i=0;var s=0;var a=(1<<r)-1;var o=[];for(var f=0;f<e.length;++f){i=i<<t|e[f];s+=t;while(s>=r){s-=r;o.push(i>>s&a)}}if(n){if(s>0){o.push(i<<r-s&a)}}else{if(s>=t)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}function toWordsUnsafe(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t}function toWords(e){var t=convert(e,8,5,true);if(Array.isArray(t))return t;throw new Error(t)}function fromWordsUnsafe(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t}function fromWords(e){var t=convert(e,5,8,false);if(Array.isArray(t))return t;throw new Error(t)}var bech32={decodeUnsafe,decode:decode$5,encode:encode$6,toWordsUnsafe,toWords,fromWordsUnsafe,fromWords};const version$3="providers/5.7.2";const logger$h=new Logger(version$3);class Formatter{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={};const t=this.address.bind(this);const r=this.bigNumber.bind(this);const n=this.blockTag.bind(this);const i=this.data.bind(this);const s=this.hash.bind(this);const a=this.hex.bind(this);const o=this.number.bind(this);const f=this.type.bind(this);const c=e=>this.data(e,true);e.transaction={hash:s,type:f,accessList:Formatter.allowNull(this.accessList.bind(this),null),blockHash:Formatter.allowNull(s,null),blockNumber:Formatter.allowNull(o,null),transactionIndex:Formatter.allowNull(o,null),confirmations:Formatter.allowNull(o,null),from:t,gasPrice:Formatter.allowNull(r),maxPriorityFeePerGas:Formatter.allowNull(r),maxFeePerGas:Formatter.allowNull(r),gasLimit:r,to:Formatter.allowNull(t,null),value:r,nonce:o,data:i,r:Formatter.allowNull(this.uint256),s:Formatter.allowNull(this.uint256),v:Formatter.allowNull(o),creates:Formatter.allowNull(t,null),raw:Formatter.allowNull(i)};e.transactionRequest={from:Formatter.allowNull(t),nonce:Formatter.allowNull(o),gasLimit:Formatter.allowNull(r),gasPrice:Formatter.allowNull(r),maxPriorityFeePerGas:Formatter.allowNull(r),maxFeePerGas:Formatter.allowNull(r),to:Formatter.allowNull(t),value:Formatter.allowNull(r),data:Formatter.allowNull(c),type:Formatter.allowNull(o),accessList:Formatter.allowNull(this.accessList.bind(this),null)};e.receiptLog={transactionIndex:o,blockNumber:o,transactionHash:s,address:t,topics:Formatter.arrayOf(s),data:i,logIndex:o,blockHash:s};e.receipt={to:Formatter.allowNull(this.address,null),from:Formatter.allowNull(this.address,null),contractAddress:Formatter.allowNull(t,null),transactionIndex:o,root:Formatter.allowNull(a),gasUsed:r,logsBloom:Formatter.allowNull(i),blockHash:s,transactionHash:s,logs:Formatter.arrayOf(this.receiptLog.bind(this)),blockNumber:o,confirmations:Formatter.allowNull(o,null),cumulativeGasUsed:r,effectiveGasPrice:Formatter.allowNull(r),status:Formatter.allowNull(o),type:f};e.block={hash:Formatter.allowNull(s),parentHash:s,number:o,timestamp:o,nonce:Formatter.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Formatter.allowNull(t),extraData:i,transactions:Formatter.allowNull(Formatter.arrayOf(s)),baseFeePerGas:Formatter.allowNull(r)};e.blockWithTransactions=shallowCopy(e.block);e.blockWithTransactions.transactions=Formatter.allowNull(Formatter.arrayOf(this.transactionResponse.bind(this)));e.filter={fromBlock:Formatter.allowNull(n,undefined),toBlock:Formatter.allowNull(n,undefined),blockHash:Formatter.allowNull(s,undefined),address:Formatter.allowNull(t,undefined),topics:Formatter.allowNull(this.topics.bind(this),undefined)};e.filterLog={blockNumber:Formatter.allowNull(o),blockHash:Formatter.allowNull(s),transactionIndex:o,removed:Formatter.allowNull(this.boolean.bind(this)),address:t,data:Formatter.allowFalsish(i,"0x"),topics:Formatter.arrayOf(s),transactionHash:s,logIndex:o};return e}accessList(e){return accessListify(e||[])}number(e){if(e==="0x"){return 0}return BigNumber$1.from(e).toNumber()}type(e){if(e==="0x"||e==null){return 0}return BigNumber$1.from(e).toNumber()}bigNumber(e){return BigNumber$1.from(e)}boolean(e){if(typeof e==="boolean"){return e}if(typeof e==="string"){e=e.toLowerCase();if(e==="true"){return true}if(e==="false"){return false}}throw new Error("invalid boolean - "+e)}hex(e,t){if(typeof e==="string"){if(!t&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexString(e)){return e.toLowerCase()}}return logger$h.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!==0){throw new Error("invalid data; odd-length - "+e)}return r}address(e){return getAddress(e)}callAddress(e){if(!isHexString(e,32)){return null}const t=getAddress(hexDataSlice(e,12));return t===AddressZero?null:t}contractAddress(e){return getContractAddress(e)}blockTag(e){if(e==null){return"latest"}if(e==="earliest"){return"0x0"}switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e==="number"||isHexString(e)){return hexValue(e)}throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);if(hexDataLength(r)!==32){return logger$h.throwArgumentError("invalid hash","value",e)}return r}difficulty(e){if(e==null){return null}const t=BigNumber$1.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!isHexString(e)){throw new Error("invalid uint256")}return hexZeroPad(e,32)}_block(e,t){if(e.author!=null&&e.miner==null){e.miner=e.author}const r=e._difficulty!=null?e._difficulty:e.difficulty;const n=Formatter.check(t,e);n._difficulty=r==null?null:BigNumber$1.from(r);return n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Formatter.check(this.formats.transactionRequest,e)}transactionResponse(e){if(e.gas!=null&&e.gasLimit==null){e.gasLimit=e.gas}if(e.to&&BigNumber$1.from(e.to).isZero()){e.to="0x0000000000000000000000000000000000000000"}if(e.input!=null&&e.data==null){e.data=e.input}if(e.to==null&&e.creates==null){e.creates=this.contractAddress(e)}if((e.type===1||e.type===2)&&e.accessList==null){e.accessList=[]}const t=Formatter.check(this.formats.transaction,e);if(e.chainId!=null){let r=e.chainId;if(isHexString(r)){r=BigNumber$1.from(r).toNumber()}t.chainId=r}else{let r=e.networkId;if(r==null&&t.v==null){r=e.chainId}if(isHexString(r)){r=BigNumber$1.from(r).toNumber()}if(typeof r!=="number"&&t.v!=null){r=(t.v-35)/2;if(r<0){r=0}r=parseInt(r)}if(typeof r!=="number"){r=0}t.chainId=r}if(t.blockHash&&t.blockHash.replace(/0/g,"")==="x"){t.blockHash=null}return t}transaction(e){return parse(e)}receiptLog(e){return Formatter.check(this.formats.receiptLog,e)}receipt(e){const t=Formatter.check(this.formats.receipt,e);if(t.root!=null){if(t.root.length<=4){const e=BigNumber$1.from(t.root).toNumber();if(e===0||e===1){if(t.status!=null&&t.status!==e){logger$h.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status})}t.status=e;delete t.root}else{logger$h.throwArgumentError("invalid alt-root-status","value.root",t.root)}}else if(t.root.length!==66){logger$h.throwArgumentError("invalid root hash","value.root",t.root)}}if(t.status!=null){t.byzantium=true}return t}topics(e){if(Array.isArray(e)){return e.map((e=>this.topics(e)))}else if(e!=null){return this.hash(e,true)}return null}filter(e){return Formatter.check(this.formats.filter,e)}filterLog(e){return Formatter.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e){try{const i=e[n](t[n]);if(i!==undefined){r[n]=i}}catch(e){e.checkKey=n;e.checkValue=t[n];throw e}}return r}static allowNull(e,t){return function(r){if(r==null){return t}return e(r)}}static allowFalsish(e,t){return function(r){if(!r){return t}return e(r)}}static arrayOf(e){return function(t){if(!Array.isArray(t)){throw new Error("not an array")}const r=[];t.forEach((function(t){r.push(e(t))}));return r}}}function isCommunityResourcable(e){return e&&typeof e.isCommunityResource==="function"}function isCommunityResource(e){return isCommunityResourcable(e)&&e.isCommunityResource()}let throttleMessage=false;function showThrottleMessage(){if(throttleMessage){return}throttleMessage=true;console.log("========= NOTICE =========");console.log("Request-Rate Exceeded  (this message will not be repeated)");console.log("");console.log("The default API keys for each service are provided as a highly-throttled,");console.log("community resource for low-traffic projects and early prototyping.");console.log("");console.log("While your application will continue to function, we highly recommended");console.log("signing up for your own API keys to improve performance, increase your");console.log("request rate/limit and enable other perks, such as metrics and advanced APIs.");console.log("");console.log("For more details: https://docs.ethers.io/api-keys/");console.log("==========================")}var __awaiter$8=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$g=new Logger(version$3);const MAX_CCIP_REDIRECTS=10;function checkTopic(e){if(e==null){return"null"}if(hexDataLength(e)!==32){logger$g.throwArgumentError("invalid topic","topic",e)}return e.toLowerCase()}function serializeTopics(e){e=e.slice();while(e.length>0&&e[e.length-1]==null){e.pop()}return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[checkTopic(e)]=true}));const r=Object.keys(t);r.sort();return r.join("|")}else{return checkTopic(e)}})).join("&")}function deserializeTopics(e){if(e===""){return[]}return e.split(/&/g).map((e=>{if(e===""){return[]}const t=e.split("|").map((e=>e==="null"?null:e));return t.length===1?t[0]:t}))}function getEventTag(e){if(typeof e==="string"){e=e.toLowerCase();if(hexDataLength(e)===32){return"tx:"+e}if(e.indexOf(":")===-1){return e}}else if(Array.isArray(e)){return"filter:*:"+serializeTopics(e)}else if(ForkEvent.isForkEvent(e)){logger$g.warn("not implemented");throw new Error("not implemented")}else if(e&&typeof e==="object"){return"filter:"+(e.address||"*")+":"+serializeTopics(e.topics||[])}throw new Error("invalid event - "+e)}function getTime(){return(new Date).getTime()}function stall$1(e){return new Promise((t=>{setTimeout(t,e)}))}const PollableEvents=["block","network","pending","poll"];class Event$1{constructor(e,t,r){defineReadOnly(this,"tag",e);defineReadOnly(this,"listener",t);defineReadOnly(this,"once",r);this._lastBlockNumber=-2;this._inflight=false}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");if(e[0]!=="tx"){return null}return e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter"){return null}const t=e[1];const r=deserializeTopics(e[2]);const n={};if(r.length>0){n.topics=r}if(t&&t!=="*"){n.address=t}return n}pollable(){return this.tag.indexOf(":")>=0||PollableEvents.indexOf(this.tag)>=0}}const coinInfos={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function bytes32ify(e){return hexZeroPad(BigNumber$1.from(e).toHexString(),32)}function base58Encode(e){return Base58.encode(concat$2([e,hexDataSlice(sha256$1(sha256$1(e)),0,4)]))}const matcherIpfs=new RegExp("^(ipfs)://(.*)$","i");const matchers=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),matcherIpfs,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _parseString(e,t){try{return toUtf8String(_parseBytes(e,t))}catch(e){}return null}function _parseBytes(e,t){if(e==="0x"){return null}const r=BigNumber$1.from(hexDataSlice(e,t,t+32)).toNumber();const n=BigNumber$1.from(hexDataSlice(e,r,r+32)).toNumber();return hexDataSlice(e,r+32,r+32+n)}function getIpfsLink(e){if(e.match(/^ipfs:\/\/ipfs\//i)){e=e.substring(12)}else if(e.match(/^ipfs:\/\//i)){e=e.substring(7)}else{logger$g.throwArgumentError("unsupported IPFS format","link",e)}return`https://gateway.ipfs.io/ipfs/${e}`}function numPad(e){const t=arrayify(e);if(t.length>32){throw new Error("internal; should not happen")}const r=new Uint8Array(32);r.set(t,32-t.length);return r}function bytesPad(e){if(e.length%32===0){return e}const t=new Uint8Array(Math.ceil(e.length/32)*32);t.set(e);return t}function encodeBytes(e){const t=[];let r=0;for(let n=0;n<e.length;n++){t.push(null);r+=32}for(let n=0;n<e.length;n++){const i=arrayify(e[n]);t[n]=numPad(r);t.push(numPad(i.length));t.push(bytesPad(i));r+=32+Math.ceil(i.length/32)*32}return hexConcat(t)}class Resolver{constructor(e,t,r,n){defineReadOnly(this,"provider",e);defineReadOnly(this,"name",r);defineReadOnly(this,"address",e.formatter.address(t));defineReadOnly(this,"_resolvedAddress",n)}supportsWildcard(){if(!this._supportsEip2544){this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>BigNumber$1.from(e).eq(1))).catch((e=>{if(e.code===Logger.errors.CALL_EXCEPTION){return false}this._supportsEip2544=null;throw e}))}return this._supportsEip2544}_fetch(e,t){return __awaiter$8(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:true,data:hexConcat([e,namehash(this.name),t||"0x"])};let n=false;if(yield this.supportsWildcard()){n=true;r.data=hexConcat(["0x9061b923",encodeBytes([dnsEncode(this.name),r.data])])}try{let e=yield this.provider.call(r);if(arrayify(e).length%32===4){logger$g.throwError("resolver threw error",Logger.errors.CALL_EXCEPTION,{transaction:r,data:e})}if(n){e=_parseBytes(e,0)}return e}catch(e){if(e.code===Logger.errors.CALL_EXCEPTION){return null}throw e}}))}_fetchBytes(e,t){return __awaiter$8(this,void 0,void 0,(function*(){const r=yield this._fetch(e,t);if(r!=null){return _parseBytes(r,0)}return null}))}_getAddress(e,t){const r=coinInfos[String(e)];if(r==null){logger$g.throwError(`unsupported coin type: ${e}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`})}if(r.ilk==="eth"){return this.provider.formatter.address(t)}const n=arrayify(t);if(r.p2pkh!=null){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode(concat$2([[r.p2pkh],"0x"+e[2]]))}}}if(r.p2sh!=null){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===t*2&&t>=1&&t<=75){return base58Encode(concat$2([[r.p2sh],"0x"+e[2]]))}}}if(r.prefix!=null){const e=n[1];let t=n[0];if(t===0){if(e!==20&&e!==32){t=-1}}else{t=-1}if(t>=0&&n.length===2+e&&e>=1&&e<=75){const e=bech32.toWords(n.slice(2));e.unshift(t);return bech32.encode(r.prefix,e)}}return null}getAddress(e){return __awaiter$8(this,void 0,void 0,(function*(){if(e==null){e=60}if(e===60){try{const e=yield this._fetch("0x3b3b57de");if(e==="0x"||e===HashZero){return null}return this.provider.formatter.callAddress(e)}catch(e){if(e.code===Logger.errors.CALL_EXCEPTION){return null}throw e}}const t=yield this._fetchBytes("0xf1cb7e06",bytes32ify(e));if(t==null||t==="0x"){return null}const r=this._getAddress(e,t);if(r==null){logger$g.throwError(`invalid or unsupported coin data`,Logger.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t})}return r}))}getAvatar(){return __awaiter$8(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(t==null){return null}for(let r=0;r<matchers.length;r++){const n=t.match(matchers[r]);if(n==null){continue}const i=n[1].toLowerCase();switch(i){case"https":e.push({type:"url",content:t});return{linkage:e,url:t};case"data":e.push({type:"data",content:t});return{linkage:e,url:t};case"ipfs":e.push({type:"ipfs",content:t});return{linkage:e,url:getIpfsLink(t)};case"erc721":case"erc1155":{const r=i==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress());const a=(n[2]||"").split("/");if(a.length!==2){return null}const o=yield this.provider.formatter.address(a[0]);const f=hexZeroPad(BigNumber$1.from(a[1]).toHexString(),32);if(i==="erc721"){const t=this.provider.formatter.callAddress(yield this.provider.call({to:o,data:hexConcat(["0x6352211e",f])}));if(s!==t){return null}e.push({type:"owner",content:t})}else if(i==="erc1155"){const t=BigNumber$1.from(yield this.provider.call({to:o,data:hexConcat(["0x00fdd58e",hexZeroPad(s,32),f])}));if(t.isZero()){return null}e.push({type:"balance",content:t.toString()})}const c={to:this.provider.formatter.address(a[0]),data:hexConcat([r,f])};let u=_parseString(yield this.provider.call(c),0);if(u==null){return null}e.push({type:"metadata-url-base",content:u});if(i==="erc1155"){u=u.replace("{id}",f.substring(2));e.push({type:"metadata-url-expanded",content:u})}if(u.match(/^ipfs:/i)){u=getIpfsLink(u)}e.push({type:"metadata-url",content:u});const l=yield fetchJson(u);if(!l){return null}e.push({type:"metadata",content:JSON.stringify(l)});let h=l.image;if(typeof h!=="string"){return null}if(h.match(/^(https:\/\/|data:)/i));else{const t=h.match(matcherIpfs);if(t==null){return null}e.push({type:"url-ipfs",content:h});h=getIpfsLink(h)}e.push({type:"url",content:h});return{linkage:e,url:h}}}}}catch(e){}return null}))}getContentHash(){return __awaiter$8(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x"){return null}const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===e*2){return"ipfs://"+Base58.encode("0x"+t[1])}}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===e*2){return"ipns://"+Base58.encode("0x"+r[1])}}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n){if(n[1].length===32*2){return"bzz://"+n[1]}}const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i){if(i[1].length===34*2){const e={"=":"","+":"-","/":"_"};const t=encode$7("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]));return"sia://"+t}}return logger$g.throwError(`invalid or unsupported content hash data`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return __awaiter$8(this,void 0,void 0,(function*(){let t=toUtf8Bytes(e);t=concat$2([bytes32ify(64),bytes32ify(t.length),t]);if(t.length%32!==0){t=concat$2([t,hexZeroPad("0x",32-e.length%32)])}const r=yield this._fetchBytes("0x59d1d43c",hexlify(t));if(r==null||r==="0x"){return null}return toUtf8String(r)}))}}let defaultFormatter=null;let nextPollId=1;class BaseProvider extends Provider{constructor(e){super();this._events=[];this._emitted={block:-2};this.disableCcipRead=false;this.formatter=new.target.getFormatter();defineReadOnly(this,"anyNetwork",e==="any");if(this.anyNetwork){e=this.detectNetwork()}if(e instanceof Promise){this._networkPromise=e;e.catch((e=>{}));this._ready().catch((e=>{}))}else{const t=getStatic(new.target,"getNetwork")(e);if(t){defineReadOnly(this,"_network",t);this.emit("network",t,null)}else{logger$g.throwArgumentError("invalid network","network",e)}}this._maxInternalBlockNumber=-1024;this._lastBlockNumber=-2;this._maxFilterBlockRange=10;this._pollingInterval=4e3;this._fastQueryDate=0}_ready(){return __awaiter$8(this,void 0,void 0,(function*(){if(this._network==null){let e=null;if(this._networkPromise){try{e=yield this._networkPromise}catch(e){}}if(e==null){e=yield this.detectNetwork()}if(!e){logger$g.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{})}if(this._network==null){if(this.anyNetwork){this._network=e}else{defineReadOnly(this,"_network",e)}this.emit("network",e,null)}}return this._network}))}get ready(){return poll((()=>this._ready().then((e=>e),(e=>{if(e.code===Logger.errors.NETWORK_ERROR&&e.event==="noNetwork"){return undefined}throw e}))))}static getFormatter(){if(defaultFormatter==null){defaultFormatter=new Formatter}return defaultFormatter}static getNetwork(e){return getNetwork(e==null?"homestead":e)}ccipReadFetch(e,t,r){return __awaiter$8(this,void 0,void 0,(function*(){if(this.disableCcipRead||r.length===0){return null}const n=e.to.toLowerCase();const i=t.toLowerCase();const s=[];for(let e=0;e<r.length;e++){const t=r[e];const a=t.replace("{sender}",n).replace("{data}",i);const o=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n});const f=yield fetchJson({url:a,errorPassThrough:true},o,((e,t)=>{e.status=t.statusCode;return e}));if(f.data){return f.data}const c=f.message||"unknown error";if(f.status>=400&&f.status<500){return logger$g.throwError(`response not found during CCIP fetch: ${c}`,Logger.errors.SERVER_ERROR,{url:t,errorMessage:c})}s.push(c)}return logger$g.throwError(`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,Logger.errors.SERVER_ERROR,{urls:r,errorMessages:s})}))}_getInternalBlockNumber(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this._ready();if(e>0){while(this._internalBlockNumber){const t=this._internalBlockNumber;try{const r=yield t;if(getTime()-r.respTime<=e){return r.blockNumber}break}catch(e){if(this._internalBlockNumber===t){break}}}}const t=getTime();const r=resolveProperties({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n){if(this._internalBlockNumber===r){this._internalBlockNumber=null}throw n}const i=getTime();e=BigNumber$1.from(e).toNumber();if(e<this._maxInternalBlockNumber){e=this._maxInternalBlockNumber}this._maxInternalBlockNumber=e;this._setFastBlockNumber(e);return{blockNumber:e,reqTime:t,respTime:i}}));this._internalBlockNumber=r;r.catch((e=>{if(this._internalBlockNumber===r){this._internalBlockNumber=null}}));return(yield r).blockNumber}))}poll(){return __awaiter$8(this,void 0,void 0,(function*(){const e=nextPollId++;const t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){this.emit("error",e);return}this._setFastBlockNumber(r);this.emit("poll",e,r);if(r===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2){this._emitted.block=r-1}if(Math.abs(this._emitted.block-r)>1e3){logger$g.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`);this.emit("error",logger$g.makeError("network block skew detected",Logger.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block}));this.emit("block",r)}else{for(let e=this._emitted.block+1;e<=r;e++){this.emit("block",e)}}if(this._emitted.block!==r){this._emitted.block=r;Object.keys(this._emitted).forEach((e=>{if(e==="block"){return}const t=this._emitted[e];if(t==="pending"){return}if(r-t>12){delete this._emitted[e]}}))}if(this._lastBlockNumber===-2){this._lastBlockNumber=r-1}this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>{if(!e||e.blockNumber==null){return null}this._emitted["t:"+r]=e.blockNumber;this.emit(r,e);return null})).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":{if(!e._inflight){e._inflight=true;if(e._lastBlockNumber===-2){e._lastBlockNumber=r-1}const n=e.filter;n.fromBlock=e._lastBlockNumber+1;n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;if(i>n.fromBlock){n.fromBlock=i}if(n.fromBlock<0){n.fromBlock=0}const s=this.getLogs(n).then((t=>{e._inflight=false;if(t.length===0){return}t.forEach((t=>{if(t.blockNumber>e._lastBlockNumber){e._lastBlockNumber=t.blockNumber}this._emitted["b:"+t.blockHash]=t.blockNumber;this._emitted["t:"+t.transactionHash]=t.blockNumber;this.emit(n,t)}))})).catch((t=>{this.emit("error",t);e._inflight=false}));t.push(s)}break}}}));this._lastBlockNumber=r;Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}));return}))}resetEventsBlock(e){this._lastBlockNumber=e-1;if(this.polling){this.poll()}}get network(){return this._network}detectNetwork(){return __awaiter$8(this,void 0,void 0,(function*(){return logger$g.throwError("provider does not support network detection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return __awaiter$8(this,void 0,void 0,(function*(){const e=yield this._ready();const t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork){this._network=t;this._lastBlockNumber=-2;this._fastBlockNumber=null;this._fastBlockNumberPromise=null;this._fastQueryDate=0;this._emitted.block=-2;this._maxInternalBlockNumber=-1024;this._internalBlockNumber=null;this.emit("network",t,e);yield stall$1(0);return this._network}const r=logger$g.makeError("underlying network changed",Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});this.emit("error",r);throw r}return e}))}get blockNumber(){this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{}));return this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){if(e&&!this._poller){this._poller=setInterval((()=>{this.poll()}),this.pollingInterval);if(!this._bootstrapPoll){this._bootstrapPoll=setTimeout((()=>{this.poll();this._bootstrapPoll=setTimeout((()=>{if(!this._poller){this.poll()}this._bootstrapPoll=null}),this.pollingInterval)}),0)}}else if(!e&&this._poller){clearInterval(this._poller);this._poller=null}}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!=="number"||e<=0||parseInt(String(e))!=e){throw new Error("invalid polling interval")}this._pollingInterval=e;if(this._poller){clearInterval(this._poller);this._poller=setInterval((()=>{this.poll()}),this._pollingInterval)}}_getFastBlockNumber(){const e=getTime();if(e-this._fastQueryDate>2*this._pollingInterval){this._fastQueryDate=e;this._fastBlockNumberPromise=this.getBlockNumber().then((e=>{if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e}return this._fastBlockNumber}))}return this._fastBlockNumberPromise}_setFastBlockNumber(e){if(this._fastBlockNumber!=null&&e<this._fastBlockNumber){return}this._fastQueryDate=getTime();if(this._fastBlockNumber==null||e>this._fastBlockNumber){this._fastBlockNumber=e;this._fastBlockNumberPromise=Promise.resolve(e)}}waitForTransaction(e,t,r){return __awaiter$8(this,void 0,void 0,(function*(){return this._waitForTransaction(e,t==null?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return __awaiter$8(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);if((i?i.confirmations:0)>=t){return i}return new Promise(((i,s)=>{const a=[];let o=false;const f=function(){if(o){return true}o=true;a.forEach((e=>{e()}));return false};const c=e=>{if(e.confirmations<t){return}if(f()){return}i(e)};this.on(e,c);a.push((()=>{this.removeListener(e,c)}));if(n){let r=n.startBlock;let i=null;const c=a=>__awaiter$8(this,void 0,void 0,(function*(){if(o){return}yield stall$1(1e3);this.getTransactionCount(n.from).then((u=>__awaiter$8(this,void 0,void 0,(function*(){if(o){return}if(u<=n.nonce){r=a}else{{const t=yield this.getTransaction(e);if(t&&t.blockNumber!=null){return}}if(i==null){i=r-3;if(i<n.startBlock){i=n.startBlock}}while(i<=a){if(o){return}const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const a=r.transactions[i];if(a.hash===e){return}if(a.from===n.from&&a.nonce===n.nonce){if(o){return}const r=yield this.waitForTransaction(a.hash,t);if(f()){return}let i="replaced";if(a.data===n.data&&a.to===n.to&&a.value.eq(n.value)){i="repriced"}else if(a.data==="0x"&&a.from===a.to&&a.value.isZero()){i="cancelled"}s(logger$g.makeError("transaction was replaced",Logger.errors.TRANSACTION_REPLACED,{cancelled:i==="replaced"||i==="cancelled",reason:i,replacement:this._wrapTransaction(a),hash:e,receipt:r}));return}}i++}}if(o){return}this.once("block",c)}))),(e=>{if(o){return}this.once("block",c)}))}));if(o){return}this.once("block",c);a.push((()=>{this.removeListener("block",c)}))}if(typeof r==="number"&&r>0){const e=setTimeout((()=>{if(f()){return}s(logger$g.makeError("timeout exceeded",Logger.errors.TIMEOUT,{timeout:r}))}),r);if(e.unref){e.unref()}a.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return __awaiter$8(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return BigNumber$1.from(e)}catch(t){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getBalance",r);try{return BigNumber$1.from(n)}catch(e){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}}))}getTransactionCount(e,t){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getTransactionCount",r);try{return BigNumber$1.from(n).toNumber()}catch(e){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}}))}getCode(e,t){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(t)});const n=yield this.perform("getCode",r);try{return hexlify(n)}catch(e){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}}))}getStorageAt(e,t,r){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield resolveProperties({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>hexValue(e)))});const i=yield this.perform("getStorageAt",n);try{return hexlify(i)}catch(e){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}}))}_wrapTransaction(e,t,r){if(t!=null&&hexDataLength(t)!==32){throw new Error("invalid response - sendTransaction")}const n=e;if(t!=null&&e.hash!==t){logger$g.throwError("Transaction hash mismatch from Provider.sendTransaction.",Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t})}n.wait=(t,n)=>__awaiter$8(this,void 0,void 0,(function*(){if(t==null){t=1}if(n==null){n=0}let i=undefined;if(t!==0&&r!=null){i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}}const s=yield this._waitForTransaction(e.hash,t,n,i);if(s==null&&t===0){return null}this._emitted["t:"+e.hash]=s.blockNumber;if(s.status===0){logger$g.throwError("transaction failed",Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:s})}return s}));return n}sendTransaction(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>hexlify(e)));const r=this.formatter.transaction(e);if(r.confirmations==null){r.confirmations=0}const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){e.transaction=r;e.transactionHash=r.hash;throw e}}))}_getTransactionRequest(e){return __awaiter$8(this,void 0,void 0,(function*(){const t=yield e;const r={};["from","to"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null))}));["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?BigNumber$1.from(e):null))}));["type"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e!=null?e:null))}));if(t.accessList){r.accessList=this.formatter.accessList(t.accessList)}["data"].forEach((e=>{if(t[e]==null){return}r[e]=Promise.resolve(t[e]).then((e=>e?hexlify(e):null))}));return this.formatter.transactionRequest(yield resolveProperties(r))}))}_getFilter(e){return __awaiter$8(this,void 0,void 0,(function*(){e=yield e;const t={};if(e.address!=null){t.address=this._getAddress(e.address)}["blockHash","topics"].forEach((r=>{if(e[r]==null){return}t[r]=e[r]}));["fromBlock","toBlock"].forEach((r=>{if(e[r]==null){return}t[r]=this._getBlockTag(e[r])}));return this.formatter.filter(yield resolveProperties(t))}))}_call(e,t,r){return __awaiter$8(this,void 0,void 0,(function*(){if(r>=MAX_CCIP_REDIRECTS){logger$g.throwError("CCIP read exceeded maximum redirections",Logger.errors.SERVER_ERROR,{redirects:r,transaction:e})}const n=e.to;const i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&t==="latest"&&n!=null&&i.substring(0,10)==="0x556f1830"&&hexDataLength(i)%32===4){try{const s=hexDataSlice(i,4);const a=hexDataSlice(s,0,32);if(!BigNumber$1.from(a).eq(n)){logger$g.throwError("CCIP Read sender did not match",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const o=[];const f=BigNumber$1.from(hexDataSlice(s,32,64)).toNumber();const c=BigNumber$1.from(hexDataSlice(s,f,f+32)).toNumber();const u=hexDataSlice(s,f+32);for(let t=0;t<c;t++){const r=_parseString(u,t*32);if(r==null){logger$g.throwError("CCIP Read contained corrupt URL string",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}o.push(r)}const l=_parseBytes(s,64);if(!BigNumber$1.from(hexDataSlice(s,100,128)).isZero()){logger$g.throwError("CCIP Read callback selector included junk",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const h=hexDataSlice(s,96,100);const d=_parseBytes(s,128);const p=yield this.ccipReadFetch(e,l,o);if(p==null){logger$g.throwError("CCIP Read disabled or provided no URLs",Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i})}const y={to:n,data:hexConcat([h,encodeBytes([p,d])])};return this._call(y,t,r+1)}catch(e){if(e.code===Logger.errors.SERVER_ERROR){throw e}}}try{return hexlify(i)}catch(r){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}}))}call(e,t){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield resolveProperties({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield resolveProperties({transaction:this._getTransactionRequest(e)});const r=yield this.perform("estimateGas",t);try{return BigNumber$1.from(r)}catch(e){return logger$g.throwError("bad result from backend",Logger.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}}))}_getAddress(e){return __awaiter$8(this,void 0,void 0,(function*(){e=yield e;if(typeof e!=="string"){logger$g.throwArgumentError("invalid address or ENS name","name",e)}const t=yield this.resolveName(e);if(t==null){logger$g.throwError("ENS name not configured",Logger.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`})}return t}))}_getBlock(e,t){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;let r=-128;const n={includeTransactions:!!t};if(isHexString(e,32)){n.blockHash=e}else{try{n.blockTag=yield this._getBlockTag(e);if(isHexString(n.blockTag)){r=parseInt(n.blockTag.substring(2),16)}}catch(t){logger$g.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}}return poll((()=>__awaiter$8(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(e==null){if(n.blockHash!=null){if(this._emitted["b:"+n.blockHash]==null){return null}}if(n.blockTag!=null){if(r>this._emitted.block){return null}}return undefined}if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){if(t==null){t=yield this._getInternalBlockNumber(100+2*this.pollingInterval)}let e=t-n.blockNumber+1;if(e<=0){e=1}n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);r.transactions=r.transactions.map((e=>this._wrapTransaction(e)));return r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,false)}getBlockWithTransactions(e){return this._getBlock(e,true)}getTransaction(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return poll((()=>__awaiter$8(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}const n=this.formatter.transactionResponse(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();e=yield e;const t={transactionHash:this.formatter.hash(e,true)};return poll((()=>__awaiter$8(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(r==null){if(this._emitted["t:"+e]==null){return null}return undefined}if(r.blockHash==null){return undefined}const n=this.formatter.receipt(r);if(n.blockNumber==null){n.confirmations=0}else if(n.confirmations==null){const e=yield this._getInternalBlockNumber(100+2*this.pollingInterval);let t=e-n.blockNumber+1;if(t<=0){t=1}n.confirmations=t}return n}))),{oncePoll:this})}))}getLogs(e){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield resolveProperties({filter:this._getFilter(e)});const r=yield this.perform("getLogs",t);r.forEach((e=>{if(e.removed==null){e.removed=false}}));return Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return __awaiter$8(this,void 0,void 0,(function*(){yield this.getNetwork();return this.perform("getEtherPrice",{})}))}_getBlockTag(e){return __awaiter$8(this,void 0,void 0,(function*(){e=yield e;if(typeof e==="number"&&e<0){if(e%1){logger$g.throwArgumentError("invalid BlockTag","blockTag",e)}let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);t+=e;if(t<0){t=0}return this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return __awaiter$8(this,void 0,void 0,(function*(){let t=e;while(true){if(t===""||t==="."){return null}if(e!=="eth"&&t==="eth"){return null}const r=yield this._getResolver(t,"getResolver");if(r!=null){const n=new Resolver(this,r,e);if(t!==e&&!(yield n.supportsWildcard())){return null}return n}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return __awaiter$8(this,void 0,void 0,(function*(){if(t==null){t="ENS"}const r=yield this.getNetwork();if(!r.ensAddress){logger$g.throwError("network does not support ENS",Logger.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name})}try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+namehash(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null}))}resolveName(e){return __awaiter$8(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(isHexString(e)){throw t}}if(typeof e!=="string"){logger$g.throwArgumentError("invalid ENS name","name",e)}const t=yield this.getResolver(e);if(!t){return null}return yield t.getAddress()}))}lookupAddress(e){return __awaiter$8(this,void 0,void 0,(function*(){e=yield e;e=this.formatter.address(e);const t=e.substring(2).toLowerCase()+".addr.reverse";const r=yield this._getResolver(t,"lookupAddress");if(r==null){return null}const n=_parseString(yield this.call({to:r,data:"0x691f3431"+namehash(t).substring(2)}),0);const i=yield this.resolveName(n);if(i!=e){return null}return n}))}getAvatar(e){return __awaiter$8(this,void 0,void 0,(function*(){let t=null;if(isHexString(e)){const r=this.formatter.address(e);const n=r.substring(2).toLowerCase()+".addr.reverse";const i=yield this._getResolver(n,"getAvatar");if(!i){return null}t=new Resolver(this,i,n);try{const e=yield t.getAvatar();if(e){return e.url}}catch(e){if(e.code!==Logger.errors.CALL_EXCEPTION){throw e}}try{const e=_parseString(yield this.call({to:i,data:"0x691f3431"+namehash(n).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==Logger.errors.CALL_EXCEPTION){throw e}return null}}else{t=yield this.getResolver(e);if(!t){return null}}const r=yield t.getAvatar();if(r==null){return null}return r.url}))}perform(e,t){return logger$g.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new Event$1(getEventTag(e),t,r);this._events.push(n);this._startEvent(n);return this}on(e,t){return this._addEventListener(e,t,false)}once(e,t){return this._addEventListener(e,t,true)}emit(e,...t){let r=false;let n=[];let i=getEventTag(e);this._events=this._events.filter((e=>{if(e.tag!==i){return true}setTimeout((()=>{e.listener.apply(this,t)}),0);r=true;if(e.once){n.push(e);return false}return true}));n.forEach((e=>{this._stopEvent(e)}));return r}listenerCount(e){if(!e){return this._events.length}let t=getEventTag(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(e==null){return this._events.map((e=>e.listener))}let t=getEventTag(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(t==null){return this.removeAllListeners(e)}const r=[];let n=false;let i=getEventTag(e);this._events=this._events.filter((e=>{if(e.tag!==i||e.listener!=t){return true}if(n){return true}n=true;r.push(e);return false}));r.forEach((e=>{this._stopEvent(e)}));return this}removeAllListeners(e){let t=[];if(e==null){t=this._events;this._events=[]}else{const r=getEventTag(e);this._events=this._events.filter((e=>{if(e.tag!==r){return true}t.push(e);return false}))}t.forEach((e=>{this._stopEvent(e)}));return this}}var __awaiter$7=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$f=new Logger(version$3);const errorGas=["call","estimateGas"];function spelunk(e,t){if(e==null){return null}if(typeof e.message==="string"&&e.message.match("reverted")){const r=isHexString(e.data)?e.data:null;if(!t||r){return{message:e.message,data:r}}}if(typeof e==="object"){for(const r in e){const n=spelunk(e[r],t);if(n){return n}}return null}if(typeof e==="string"){try{return spelunk(JSON.parse(e),t)}catch(e){}}return null}function checkError$1(e,t,r){const n=r.transaction||r.signedTransaction;if(e==="call"){const e=spelunk(t,true);if(e){return e.data}logger$f.throwError("missing revert data in call exception; Transaction reverted without a reason string",Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if(e==="estimateGas"){let r=spelunk(t.body,false);if(r==null){r=spelunk(t,false)}if(r){logger$f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}}let i=t.message;if(t.code===Logger.errors.SERVER_ERROR&&t.error&&typeof t.error.message==="string"){i=t.error.message}else if(typeof t.body==="string"){i=t.body}else if(typeof t.responseText==="string"){i=t.responseText}i=(i||"").toLowerCase();if(i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)){logger$f.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n})}if(i.match(/nonce (is )?too low/i)){logger$f.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n})}if(i.match(/replacement transaction underpriced|transaction gas price.*too low/i)){logger$f.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n})}if(i.match(/only replay-protected/i)){logger$f.throwError("legacy pre-eip-155 transactions not supported",Logger.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n})}if(errorGas.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)){logger$f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n})}throw t}function timer(e){return new Promise((function(t){setTimeout(t,e)}))}function getResult$1(e){if(e.error){const t=new Error(e.error.message);t.code=e.error.code;t.data=e.error.data;throw t}return e.result}function getLowerCase(e){if(e){return e.toLowerCase()}return e}const _constructorGuard={};class JsonRpcSigner extends Signer{constructor(e,t,r){super();if(e!==_constructorGuard){throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner")}defineReadOnly(this,"provider",t);if(r==null){r=0}if(typeof r==="string"){defineReadOnly(this,"_address",this.provider.formatter.address(r));defineReadOnly(this,"_index",null)}else if(typeof r==="number"){defineReadOnly(this,"_index",r);defineReadOnly(this,"_address",null)}else{logger$f.throwArgumentError("invalid address or index","addressOrIndex",r)}}connect(e){return logger$f.throwError("cannot alter JSON-RPC Signer connection",Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new UncheckedJsonRpcSigner(_constructorGuard,this.provider,this._address||this._index)}getAddress(){if(this._address){return Promise.resolve(this._address)}return this.provider.send("eth_accounts",[]).then((e=>{if(e.length<=this._index){logger$f.throwError("unknown account #"+this._index,Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"})}return this.provider.formatter.address(e[this._index])}))}sendUncheckedTransaction(e){e=shallowCopy(e);const t=this.getAddress().then((e=>{if(e){e=e.toLowerCase()}return e}));if(e.gasLimit==null){const r=shallowCopy(e);r.from=t;e.gasLimit=this.provider.estimateGas(r)}if(e.to!=null){e.to=Promise.resolve(e.to).then((e=>__awaiter$7(this,void 0,void 0,(function*(){if(e==null){return null}const t=yield this.provider.resolveName(e);if(t==null){logger$f.throwArgumentError("provided ENS name resolves to null","tx.to",e)}return t}))))}return resolveProperties({tx:resolveProperties(e),sender:t}).then((({tx:t,sender:r})=>{if(t.from!=null){if(t.from.toLowerCase()!==r){logger$f.throwArgumentError("from address mismatch","transaction",e)}}else{t.from=r}const n=this.provider.constructor.hexlifyTransaction(t,{from:true});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>{if(typeof e.message==="string"&&e.message.match(/user denied/i)){logger$f.throwError("user rejected transaction",Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t})}return checkError$1("sendTransaction",e,n)}))}))}signTransaction(e){return logger$f.throwError("signing transactions is unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return __awaiter$7(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);const r=yield this.sendUncheckedTransaction(e);try{return yield poll((()=>__awaiter$7(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(e===null){return undefined}return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){e.transactionHash=r;throw e}}))}signMessage(e){return __awaiter$7(this,void 0,void 0,(function*(){const t=typeof e==="string"?toUtf8Bytes(e):e;const r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[hexlify(t),r.toLowerCase()])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){logger$f.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e})}throw t}}))}_legacySignMessage(e){return __awaiter$7(this,void 0,void 0,(function*(){const t=typeof e==="string"?toUtf8Bytes(e):e;const r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),hexlify(t)])}catch(t){if(typeof t.message==="string"&&t.message.match(/user denied/i)){logger$f.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e})}throw t}}))}_signTypedData(e,t,r){return __awaiter$7(this,void 0,void 0,(function*(){const n=yield TypedDataEncoder.resolveNames(e,t,r,(e=>this.provider.resolveName(e)));const i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(TypedDataEncoder.getPayload(n.domain,t,n.value))])}catch(e){if(typeof e.message==="string"&&e.message.match(/user denied/i)){logger$f.throwError("user rejected signing",Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}})}throw e}}))}unlock(e){return __awaiter$7(this,void 0,void 0,(function*(){const t=this.provider;const r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class UncheckedJsonRpcSigner extends JsonRpcSigner{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const allowedTransactionKeys={chainId:true,data:true,gasLimit:true,gasPrice:true,nonce:true,to:true,value:true,type:true,accessList:true,maxFeePerGas:true,maxPriorityFeePerGas:true};class JsonRpcProvider extends BaseProvider{constructor(e,t){let r=t;if(r==null){r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))}super(r);if(!e){e=getStatic(this.constructor,"defaultUrl")()}if(typeof e==="string"){defineReadOnly(this,"connection",Object.freeze({url:e}))}else{defineReadOnly(this,"connection",Object.freeze(shallowCopy(e)))}this._nextId=42}get _cache(){if(this._eventLoopCache==null){this._eventLoopCache={}}return this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){if(!this._cache["detectNetwork"]){this._cache["detectNetwork"]=this._uncachedDetectNetwork();setTimeout((()=>{this._cache["detectNetwork"]=null}),0)}return this._cache["detectNetwork"]}_uncachedDetectNetwork(){return __awaiter$7(this,void 0,void 0,(function*(){yield timer(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(e!=null){const t=getStatic(this.constructor,"getNetwork");try{return t(BigNumber$1.from(e).toNumber())}catch(t){return logger$f.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return logger$f.throwError("could not detect network",Logger.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new JsonRpcSigner(_constructorGuard,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:deepCopy(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e]){return this._cache[e]}const i=fetchJson(this.connection,JSON.stringify(r),getResult$1).then((e=>{this.emit("debug",{action:"response",request:r,response:e,provider:this});return e}),(e=>{this.emit("debug",{action:"response",error:e,request:r,provider:this});throw e}));if(n){this._cache[e]=i;setTimeout((()=>{this._cache[e]=null}),0)}return i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[getLowerCase(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[getLowerCase(t.address),t.blockTag]];case"getCode":return["eth_getCode",[getLowerCase(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[getLowerCase(t.address),hexZeroPad(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":if(t.blockTag){return["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]}else if(t.blockHash){return["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]}return null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":{const e=getStatic(this.constructor,"hexlifyTransaction");return["eth_call",[e(t.transaction,{from:true}),t.blockTag]]}case"estimateGas":{const e=getStatic(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[e(t.transaction,{from:true})]]}case"getLogs":if(t.filter&&t.filter.address!=null){t.filter.address=getLowerCase(t.filter.address)}return["eth_getLogs",[t.filter]]}return null}perform(e,t){return __awaiter$7(this,void 0,void 0,(function*(){if(e==="call"||e==="estimateGas"){const e=t.transaction;if(e&&e.type!=null&&BigNumber$1.from(e.type).isZero()){if(e.maxFeePerGas==null&&e.maxPriorityFeePerGas==null){const r=yield this.getFeeData();if(r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){t=shallowCopy(t);t.transaction=shallowCopy(e);delete t.transaction.type}}}}const r=this.prepareRequest(e,t);if(r==null){logger$f.throwError(e+" not implemented",Logger.errors.NOT_IMPLEMENTED,{operation:e})}try{return yield this.send(r[0],r[1])}catch(r){return checkError$1(e,r,t)}}))}_startEvent(e){if(e.tag==="pending"){this._startPending()}super._startEvent(e)}_startPending(){if(this._pendingFilter!=null){return}const e=this;const t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t;t.then((function(r){function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t){return null}let n=Promise.resolve();r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending";n=n.then((function(){return e.getTransaction(t).then((function(t){e.emit("pending",t);return null}))}))}));return n.then((function(){return timer(1e3)}))})).then((function(){if(e._pendingFilter!=t){e.send("eth_uninstallFilter",[r]);return}setTimeout((function(){n()}),0);return null})).catch((e=>{}))}n();return r})).catch((e=>{}))}_stopEvent(e){if(e.tag==="pending"&&this.listenerCount("pending")===0){this._pendingFilter=null}super._stopEvent(e)}static hexlifyTransaction(e,t){const r=shallowCopy(allowedTransactionKeys);if(t){for(const e in t){if(t[e]){r[e]=true}}}checkProperties(e,r);const n={};["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(e[t]==null){return}const r=hexValue(BigNumber$1.from(e[t]));if(t==="gasLimit"){t="gas"}n[t]=r}));["from","to","data"].forEach((function(t){if(e[t]==null){return}n[t]=hexlify(e[t])}));if(e.accessList){n["accessList"]=accessListify(e.accessList)}return n}}let WS=null;try{WS=WebSocket;if(WS==null){throw new Error("inject please")}}catch(e){const t=new Logger(version$3);WS=function(){t.throwError("WebSockets not supported in this environment",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var __awaiter$6=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$e=new Logger(version$3);let NextId=1;class WebSocketProvider extends JsonRpcProvider{constructor(e,t){if(t==="any"){logger$e.throwError("WebSocketProvider does not support 'any' network yet",Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"})}if(typeof e==="string"){super(e,t)}else{super("_websocket",t)}this._pollingInterval=-1;this._wsReady=false;if(typeof e==="string"){defineReadOnly(this,"_websocket",new WS(this.connection.url))}else{defineReadOnly(this,"_websocket",e)}defineReadOnly(this,"_requests",{});defineReadOnly(this,"_subs",{});defineReadOnly(this,"_subIds",{});defineReadOnly(this,"_detectNetwork",super.detectNetwork());this.websocket.onopen=()=>{this._wsReady=true;Object.keys(this._requests).forEach((e=>{this.websocket.send(this._requests[e].payload)}))};this.websocket.onmessage=e=>{const t=e.data;const r=JSON.parse(t);if(r.id!=null){const e=String(r.id);const n=this._requests[e];delete this._requests[e];if(r.result!==undefined){n.callback(null,r.result);this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this})}else{let e=null;if(r.error){e=new Error(r.error.message||"unknown error");defineReadOnly(e,"code",r.error.code||null);defineReadOnly(e,"response",t)}else{e=new Error("unknown error")}n.callback(e,undefined);this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if(r.method==="eth_subscription"){const e=this._subs[r.params.subscription];if(e){e.processFunc(r.params.result)}}else{console.warn("this should not happen")}};const r=setInterval((()=>{this.emit("poll")}),1e3);if(r.unref){r.unref()}}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){logger$e.throwError("cannot reset events block on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){logger$e.throwError("cannot set polling interval on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return __awaiter$6(this,void 0,void 0,(function*(){return null}))}set polling(e){if(!e){return}logger$e.throwError("cannot set polling on WebSocketProvider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=NextId++;return new Promise(((n,i)=>{function s(e,t){if(e){return i(e)}return n(t)}const a=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this});this._requests[String(r)]={callback:s,payload:a};if(this._wsReady){this.websocket.send(a)}}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return __awaiter$6(this,void 0,void 0,(function*(){let n=this._subIds[e];if(n==null){n=Promise.all(t).then((e=>this.send("eth_subscribe",e)));this._subIds[e]=n}const i=yield n;this._subs[i]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=BigNumber$1.from(e.number).toNumber();this._emitted.block=t;this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{if(t.removed==null){t.removed=false}this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{if(!e){return}this.emit(t,e)}))};t(e);this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>e.type==="tx")).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let t=e.tag;if(e.type==="tx"){if(this._events.filter((e=>e.type==="tx")).length){return}t="tx"}else if(this.listenerCount(e.event)){return}const r=this._subIds[t];if(!r){return}delete this._subIds[t];r.then((e=>{if(!this._subs[e]){return}delete this._subs[e];this.send("eth_unsubscribe",[e])}))}destroy(){return __awaiter$6(this,void 0,void 0,(function*(){if(this.websocket.readyState===WS.CONNECTING){yield new Promise((e=>{this.websocket.onopen=function(){e(true)};this.websocket.onerror=function(){e(false)}}))}this.websocket.close(1e3)}))}}var __awaiter$5=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$d=new Logger(version$3);class StaticJsonRpcProvider extends JsonRpcProvider{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return __awaiter$5(this,void 0,void 0,(function*(){let t=this.network;if(t==null){t=yield e.detectNetwork.call(this);if(!t){logger$d.throwError("no network detected",Logger.errors.UNKNOWN_ERROR,{})}if(this._network==null){defineReadOnly(this,"_network",t);this.emit("network",t,null)}}return t}))}}class UrlJsonRpcProvider extends StaticJsonRpcProvider{constructor(e,t){logger$d.checkAbstract(new.target,UrlJsonRpcProvider);e=getStatic(new.target,"getNetwork")(e);t=getStatic(new.target,"getApiKey")(t);const r=getStatic(new.target,"getUrl")(e,t);super(r,e);if(typeof t==="string"){defineReadOnly(this,"apiKey",t)}else if(t!=null){Object.keys(t).forEach((e=>{defineReadOnly(this,e,t[e])}))}}_startPending(){logger$d.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return false}getSigner(e){return logger$d.throwError("API provider does not support signing",Logger.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return logger$d.throwError("not implemented; sub-classes must override getUrl",Logger.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const logger$c=new Logger(version$3);const defaultApiKey$2="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class AlchemyWebSocketProvider extends WebSocketProvider{constructor(e,t){const r=new AlchemyProvider(e,t);const n=r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(n,r.network);defineReadOnly(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===defaultApiKey$2}}class AlchemyProvider extends UrlJsonRpcProvider{static getWebSocketProvider(e,t){return new AlchemyWebSocketProvider(e,t)}static getApiKey(e){if(e==null){return defaultApiKey$2}if(e&&typeof e!=="string"){logger$c.throwArgumentError("invalid apiKey","apiKey",e)}return e}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:logger$c.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:true,url:"https:/"+"/"+r+t,throttleCallback:(e,r)=>{if(t===defaultApiKey$2){showThrottleMessage()}return Promise.resolve(true)}}}isCommunityResource(){return this.apiKey===defaultApiKey$2}}const logger$b=new Logger(version$3);const defaultApiKey$1="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function getHost(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return logger$b.throwArgumentError("unsupported network","name",e)}class AnkrProvider extends UrlJsonRpcProvider{isCommunityResource(){return this.apiKey===defaultApiKey$1}static getApiKey(e){if(e==null){return defaultApiKey$1}return e}static getUrl(e,t){if(t==null){t=defaultApiKey$1}const r={allowGzip:true,url:"https://"+getHost(e.name)+t,throttleCallback:(e,r)=>{if(t.apiKey===defaultApiKey$1){showThrottleMessage()}return Promise.resolve(true)}};if(t.projectSecret!=null){r.user="";r.password=t.projectSecret}return r}}var __awaiter$4=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$a=new Logger(version$3);class CloudflareProvider extends UrlJsonRpcProvider{static getApiKey(e){if(e!=null){logger$a.throwArgumentError("apiKey not supported for cloudflare","apiKey",e)}return null}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="https://cloudflare-eth.com/";break;default:logger$a.throwArgumentError("unsupported network","network",arguments[0])}return r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$4(this,void 0,void 0,(function*(){if(e==="getBlockNumber"){const e=yield r.perform.call(this,"getBlock",{blockTag:"latest"});return e.number}return r.perform.call(this,e,t)}))}}var __awaiter$3=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$9=new Logger(version$3);function getTransactionPostData(e){const t={};for(let r in e){if(e[r]==null){continue}let n=e[r];if(r==="type"&&n===0){continue}if({type:true,gasLimit:true,gasPrice:true,maxFeePerGs:true,maxPriorityFeePerGas:true,nonce:true,value:true}[r]){n=hexValue(hexlify(n))}else if(r==="accessList"){n="["+accessListify(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]"}else{n=hexlify(n)}t[r]=n}return t}function getResult(e){if(e.status==0&&(e.message==="No records found"||e.message==="No transactions found")){return e.result}if(e.status!=1||typeof e.message!=="string"||!e.message.match(/^OK/)){const t=new Error("invalid response");t.result=JSON.stringify(e);if((e.result||"").toLowerCase().indexOf("rate limit")>=0){t.throttleRetry=true}throw t}return e.result}function getJsonResult(e){if(e&&e.status==0&&e.message=="NOTOK"&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");t.result=JSON.stringify(e);t.throttleRetry=true;throw t}if(e.jsonrpc!="2.0"){const t=new Error("invalid response");t.result=JSON.stringify(e);throw t}if(e.error){const t=new Error(e.error.message||"unknown error");if(e.error.code){t.code=e.error.code}if(e.error.data){t.data=e.error.data}throw t}return e.result}function checkLogTag(e){if(e==="pending"){throw new Error("pending not supported")}if(e==="latest"){return e}return parseInt(e.substring(2),16)}function checkError(e,t,r){if(e==="call"&&t.code===Logger.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r){r="0x"+r.replace(/^.*0x/i,"")}if(isHexString(r)){return r}logger$9.throwError("missing revert data in call exception",Logger.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;if(t.code===Logger.errors.SERVER_ERROR){if(t.error&&typeof t.error.message==="string"){n=t.error.message}else if(typeof t.body==="string"){n=t.body}else if(typeof t.responseText==="string"){n=t.responseText}}n=(n||"").toLowerCase();if(n.match(/insufficient funds/)){logger$9.throwError("insufficient funds for intrinsic transaction cost",Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r})}if(n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)){logger$9.throwError("nonce has already been used",Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r})}if(n.match(/another transaction with same nonce/)){logger$9.throwError("replacement fee too low",Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r})}if(n.match(/execution failed due to an exception|execution reverted/)){logger$9.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r})}throw t}class EtherscanProvider extends BaseProvider{constructor(e,t){super(e);defineReadOnly(this,"baseUrl",this.getBaseUrl());defineReadOnly(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return logger$9.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];if(n!=null){e+=`&${r}=${n}`}return e}),"");const n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){t.module=e;t.apikey=this.apiKey;return t}fetch(e,t,r){return __awaiter$3(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(e,t);const i=r?this.getPostData(e,t):null;const s=e==="proxy"?getJsonResult:getResult;this.emit("debug",{action:"request",request:n,provider:this});const a={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>{if(this.isCommunityResource()){showThrottleMessage()}return Promise.resolve(true)}};let o=null;if(i){a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"};o=Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&")}const f=yield fetchJson(a,o,s||getJsonResult);this.emit("debug",{action:"response",request:n,response:deepCopy(f),provider:this});return f}))}detectNetwork(){return __awaiter$3(this,void 0,void 0,(function*(){return this.network}))}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return __awaiter$3(this,void 0,void 0,(function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},true).catch((e=>checkError("sendTransaction",e,t.signedTransaction)));case"getBlock":if(t.blockTag){return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"})}throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if(t.blockTag!=="latest"){throw new Error("EtherscanProvider does not support blockTag for call")}const e=getTransactionPostData(t.transaction);e.module="proxy";e.action="eth_call";try{return yield this.fetch("proxy",e,true)}catch(e){return checkError("call",e,t.transaction)}}case"estimateGas":{const e=getTransactionPostData(t.transaction);e.module="proxy";e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,true)}catch(e){return checkError("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock){e.fromBlock=checkLogTag(t.filter.fromBlock)}if(t.filter.toBlock){e.toBlock=checkLogTag(t.filter.toBlock)}if(t.filter.address){e.address=t.filter.address}if(t.filter.topics&&t.filter.topics.length>0){if(t.filter.topics.length>1){logger$9.throwError("unsupported topic count",Logger.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics})}if(t.filter.topics.length===1){const r=t.filter.topics[0];if(typeof r!=="string"||r.length!==66){logger$9.throwError("unsupported topic format",Logger.errors.UNSUPPORTED_OPERATION,{topic0:r})}e.topic0=r}}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(t.blockHash!=null){continue}if(n[t.blockNumber]==null){const e=yield this.getBlock(t.blockNumber);if(e){n[t.blockNumber]=e.hash}}t.blockHash=n[t.blockNumber]}return r}case"getEtherPrice":if(this.network.name!=="homestead"){return 0}return parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)}))}getHistory(e,t,r){return __awaiter$3(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:t==null?0:t,endblock:r==null?99999999:r,sort:"asc"};const i=yield this.fetch("account",n);return i.map((e=>{["contractAddress","to"].forEach((function(t){if(e[t]==""){delete e[t]}}));if(e.creates==null&&e.contractAddress!=null){e.creates=e.contractAddress}const t=this.formatter.transactionResponse(e);if(e.timeStamp){t.timestamp=parseInt(e.timeStamp)}return t}))}))}isCommunityResource(){return this.apiKey==null}}var __awaiter$2=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))};const logger$8=new Logger(version$3);function now(){return(new Date).getTime()}function checkNetworks(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(n==null){return null}if(t){if(!(t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||t.ensAddress==null&&n.ensAddress==null))){logger$8.throwArgumentError("provider mismatch","networks",e)}}else{t=n}}return t}function median(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2){return e[r]}const n=e[r-1],i=e[r];if(t!=null&&Math.abs(n-i)>t){return null}return(n+i)/2}function serialize$2(e){if(e===null){return"null"}else if(typeof e==="number"||typeof e==="boolean"){return JSON.stringify(e)}else if(typeof e==="string"){return e}else if(BigNumber$1.isBigNumber(e)){return e.toString()}else if(Array.isArray(e)){return JSON.stringify(e.map((e=>serialize$2(e))))}else if(typeof e==="object"){const t=Object.keys(e);t.sort();return"{"+t.map((t=>{let r=e[t];if(typeof r==="function"){r="[function]"}else{r=serialize$2(r)}return JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let nextRid=1;function stall(e){let t=null;let r=null;let n=new Promise((n=>{t=function(){if(r){clearTimeout(r);r=null}n()};r=setTimeout(t,e)}));const i=e=>{n=n.then(e);return n};function s(){return n}return{cancel:t,getPromise:s,wait:i}}const ForwardErrors=[Logger.errors.CALL_EXCEPTION,Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED,Logger.errors.UNPREDICTABLE_GAS_LIMIT];const ForwardProperties=["address","args","errorArgs","errorSignature","method","transaction"];function exposeDebugConfig(e,t){const r={weight:e.weight};Object.defineProperty(r,"provider",{get:()=>e.provider});if(e.start){r.start=e.start}if(t){r.duration=t-e.start}if(e.done){if(e.error){r.error=e.error}else{r.result=e.result||null}}return r}function normalizedTally(e,t){return function(r){const n={};r.forEach((t=>{const r=e(t.result);if(!n[r]){n[r]={count:0,result:t.result}}n[r].count++}));const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t){return r.result}}return undefined}}function getProcessFunc(e,t,r){let n=serialize$2;switch(t){case"getBlockNumber":return function(t){const r=t.map((e=>e.result));let n=median(t.map((e=>e.result)),2);if(n==null){return undefined}n=Math.ceil(n);if(r.indexOf(n+1)>=0){n++}if(n>=e._highestBlockNumber){e._highestBlockNumber=n}return e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map((e=>e.result));t.sort();return t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return median(e.map((e=>e.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){if(e==null){return null}e=shallowCopy(e);e.confirmations=-1;return serialize$2(e)};break;case"getBlock":if(r.includeTransactions){n=function(e){if(e==null){return null}e=shallowCopy(e);e.transactions=e.transactions.map((e=>{e=shallowCopy(e);e.confirmations=-1;return e}));return serialize$2(e)}}else{n=function(e){if(e==null){return null}return serialize$2(e)}}break;default:throw new Error("unknown method: "+t)}return normalizedTally(n,e.quorum)}function waitForSync(e,t){return __awaiter$2(this,void 0,void 0,(function*(){const r=e.provider;if(r.blockNumber!=null&&r.blockNumber>=t||t===-1){return r}return poll((()=>new Promise(((n,i)=>{setTimeout((function(){if(r.blockNumber>=t){return n(r)}if(e.cancelled){return n(null)}return n(undefined)}),0)}))),{oncePoll:r})}))}function getRunner(e,t,r,n){return __awaiter$2(this,void 0,void 0,(function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice){return i.getEtherPrice()}break;case"getBalance":case"getTransactionCount":case"getCode":if(n.blockTag&&isHexString(n.blockTag)){i=yield waitForSync(e,t)}return i[r](n.address,n.blockTag||"latest");case"getStorageAt":if(n.blockTag&&isHexString(n.blockTag)){i=yield waitForSync(e,t)}return i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":if(n.blockTag&&isHexString(n.blockTag)){i=yield waitForSync(e,t)}return i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":if(n.blockTag&&isHexString(n.blockTag)){i=yield waitForSync(e,t)}if(r==="call"&&n.blockTag){return i[r](n.transaction,n.blockTag)}return i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;if(r.fromBlock&&isHexString(r.fromBlock)||r.toBlock&&isHexString(r.toBlock)){i=yield waitForSync(e,t)}return i.getLogs(r)}}return logger$8.throwError("unknown method error",Logger.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class FallbackProvider extends BaseProvider{constructor(e,t){if(e.length===0){logger$8.throwArgumentError("missing providers","providers",e)}const r=e.map(((e,t)=>{if(Provider.isProvider(e)){const t=isCommunityResource(e)?2e3:750;const r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=shallowCopy(e);if(r.priority==null){r.priority=1}if(r.stallTimeout==null){r.stallTimeout=isCommunityResource(e)?2e3:750}if(r.weight==null){r.weight=1}const n=r.weight;if(n%1||n>512||n<1){logger$8.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n)}return Object.freeze(r)}));const n=r.reduce(((e,t)=>e+t.weight),0);if(t==null){t=n/2}else if(t>n){logger$8.throwArgumentError("quorum will always fail; larger than total weight","quorum",t)}let i=checkNetworks(r.map((e=>e.provider.network)));if(i==null){i=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then(e,t)}),0)}))}super(i);defineReadOnly(this,"providerConfigs",Object.freeze(r));defineReadOnly(this,"quorum",t);this._highestBlockNumber=-1}detectNetwork(){return __awaiter$2(this,void 0,void 0,(function*(){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.getNetwork())));return checkNetworks(e)}))}perform(e,t){return __awaiter$2(this,void 0,void 0,(function*(){if(e==="sendTransaction"){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.sendTransaction(t.signedTransaction).then((e=>e.hash),(e=>e)))));for(let t=0;t<e.length;t++){const r=e[t];if(typeof r==="string"){return r}}throw e[0]}if(this._highestBlockNumber===-1&&e!=="getBlockNumber"){yield this.getBlockNumber()}const r=getProcessFunc(this,e,t);const n=shuffled(this.providerConfigs.map(shallowCopy));n.sort(((e,t)=>e.priority-t.priority));const i=this._highestBlockNumber;let s=0;let a=true;while(true){const o=now();let f=n.filter((e=>e.runner&&o-e.start<e.stallTimeout)).reduce(((e,t)=>e+t.weight),0);while(f<this.quorum&&s<n.length){const r=n[s++];const a=nextRid++;r.start=now();r.staller=stall(r.stallTimeout);r.staller.wait((()=>{r.staller=null}));r.runner=getRunner(r,i,e,t).then((n=>{r.done=true;r.result=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig(r,now()),request:{method:e,params:deepCopy(t)},provider:this})}}),(n=>{r.done=true;r.error=n;if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig(r,now()),request:{method:e,params:deepCopy(t)},provider:this})}}));if(this.listenerCount("debug")){this.emit("debug",{action:"request",rid:a,backend:exposeDebugConfig(r,null),request:{method:e,params:deepCopy(t)},provider:this})}f+=r.weight}const c=[];n.forEach((e=>{if(e.done||!e.runner){return}c.push(e.runner);if(e.staller){c.push(e.staller.getPromise())}}));if(c.length){yield Promise.race(c)}const u=n.filter((e=>e.done&&e.error==null));if(u.length>=this.quorum){const e=r(u);if(e!==undefined){n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));return e}if(!a){yield stall(100).getPromise()}a=false}const l=n.reduce(((e,t)=>{if(!t.done||t.error==null){return e}const r=t.error.code;if(ForwardErrors.indexOf(r)>=0){if(!e[r]){e[r]={error:t.error,weight:0}}e[r].weight+=t.weight}return e}),{});Object.keys(l).forEach((e=>{const t=l[e];if(t.weight<this.quorum){return}n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));const r=t.error;const i={};ForwardProperties.forEach((e=>{if(r[e]==null){return}i[e]=r[e]}));logger$8.throwError(r.reason||r.message,e,i)}));if(n.filter((e=>!e.done)).length===0){break}}n.forEach((e=>{if(e.staller){e.staller.cancel()}e.cancelled=true}));return logger$8.throwError("failed to meet quorum",Logger.errors.SERVER_ERROR,{method:e,params:t,results:n.map((e=>exposeDebugConfig(e))),provider:this})}))}}const IpcProvider=null;const logger$7=new Logger(version$3);const defaultProjectId="84842078b09946638c03157f83405213";class InfuraWebSocketProvider extends WebSocketProvider{constructor(e,t){const r=new InfuraProvider(e,t);const n=r.connection;if(n.password){logger$7.throwError("INFURA WebSocket project secrets unsupported",Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"})}const i=n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(i,e);defineReadOnly(this,"apiKey",r.projectId);defineReadOnly(this,"projectId",r.projectId);defineReadOnly(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===defaultProjectId}}class InfuraProvider extends UrlJsonRpcProvider{static getWebSocketProvider(e,t){return new InfuraWebSocketProvider(e,t)}static getApiKey(e){const t={apiKey:defaultProjectId,projectId:defaultProjectId,projectSecret:null};if(e==null){return t}if(typeof e==="string"){t.projectId=e}else if(e.projectSecret!=null){logger$7.assertArgument(typeof e.projectId==="string","projectSecret requires a projectId","projectId",e.projectId);logger$7.assertArgument(typeof e.projectSecret==="string","invalid projectSecret","projectSecret","[REDACTED]");t.projectId=e.projectId;t.projectSecret=e.projectSecret}else if(e.projectId){t.projectId=e.projectId}t.apiKey=t.projectId;return t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:logger$7.throwError("unsupported network",Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:true,url:"https:/"+"/"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>{if(t.projectId===defaultProjectId){showThrottleMessage()}return Promise.resolve(true)}};if(t.projectSecret!=null){n.user="";n.password=t.projectSecret}return n}isCommunityResource(){return this.projectId===defaultProjectId}}class JsonRpcBatchProvider extends JsonRpcProvider{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};if(this._pendingBatch==null){this._pendingBatch=[]}const n={request:r,resolve:null,reject:null};const i=new Promise(((e,t)=>{n.resolve=e;n.reject=t}));this._pendingBatch.push(n);if(!this._pendingBatchAggregator){this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null;this._pendingBatchAggregator=null;const t=e.map((e=>e.request));this.emit("debug",{action:"requestBatch",request:deepCopy(t),provider:this});return fetchJson(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this});e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code;t.data=n.error.data;e.reject(t)}else{e.resolve(n.result)}}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this});e.forEach((e=>{e.reject(r)}))}))}),10)}return i}}const logger$6=new Logger(version$3);const defaultApiKey="ETHERS_JS_SHARED";class NodesmithProvider extends UrlJsonRpcProvider{static getApiKey(e){if(e&&typeof e!=="string"){logger$6.throwArgumentError("invalid apiKey","apiKey",e)}return e||defaultApiKey}static getUrl(e,t){logger$6.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:logger$6.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const logger$5=new Logger(version$3);const defaultApplicationId="62e1ad51b37b8e00394bda3b";class PocketProvider extends UrlJsonRpcProvider{static getApiKey(e){const t={applicationId:null,loadBalancer:true,applicationSecretKey:null};if(e==null){t.applicationId=defaultApplicationId}else if(typeof e==="string"){t.applicationId=e}else if(e.applicationSecretKey!=null){t.applicationId=e.applicationId;t.applicationSecretKey=e.applicationSecretKey}else if(e.applicationId){t.applicationId=e.applicationId}else{logger$5.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e)}return t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:logger$5.throwError("unsupported network",Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n=`https://${r}/v1/lb/${t.applicationId}`;const i={headers:{},url:n};if(t.applicationSecretKey!=null){i.user="";i.password=t.applicationSecretKey}return i}isCommunityResource(){return this.applicationId===defaultApplicationId}}const logger$4=new Logger(version$3);let _nextId=1;function buildWeb3LegacyFetcher(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:_nextId++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:deepCopy(i),provider:this});t(i,((t,s)=>{if(t){this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this});return n(t)}this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this});if(s.error){const e=new Error(s.error.message);e.code=s.error.code;e.data=s.error.data;return n(e)}e(s.result)}))}))}}function buildEip1193Fetcher(e){return function(t,r){if(r==null){r=[]}const n={method:t,params:r};this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:deepCopy(n),provider:this});return e.request(n).then((e=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this});return e}),(e=>{this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this});throw e}))}}class Web3Provider extends JsonRpcProvider{constructor(e,t){if(e==null){logger$4.throwArgumentError("missing provider","provider",e)}let r=null;let n=null;let i=null;if(typeof e==="function"){r="unknown:";n=e}else{r=e.host||e.path||"";if(!r&&e.isMetaMask){r="metamask"}i=e;if(e.request){if(r===""){r="eip-1193:"}n=buildEip1193Fetcher(e)}else if(e.sendAsync){n=buildWeb3LegacyFetcher(e,e.sendAsync.bind(e))}else if(e.send){n=buildWeb3LegacyFetcher(e,e.send.bind(e))}else{logger$4.throwArgumentError("unsupported provider","provider",e)}if(!r){r="unknown:"}}super(r,t);defineReadOnly(this,"jsonRpcFetchFunc",n);defineReadOnly(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const logger$3=new Logger(version$3);function getDefaultProvider(e,t){if(e==null){e="homestead"}if(typeof e==="string"){const t=e.match(/^(ws|http)s?:/i);if(t){switch(t[1].toLowerCase()){case"http":case"https":return new JsonRpcProvider(e);case"ws":case"wss":return new WebSocketProvider(e);default:logger$3.throwArgumentError("unsupported URL scheme","network",e)}}}const r=getNetwork(e);if(!r||!r._defaultProvider){logger$3.throwError("unsupported getDefaultProvider network",Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e})}return r._defaultProvider({FallbackProvider,AlchemyProvider,AnkrProvider,CloudflareProvider,EtherscanProvider,InfuraProvider,JsonRpcProvider,NodesmithProvider,PocketProvider,Web3Provider,IpcProvider},t)}const index$4=Object.freeze({__proto__:null,Provider,BaseProvider,Resolver,UrlJsonRpcProvider,FallbackProvider,AlchemyProvider,AlchemyWebSocketProvider,AnkrProvider,CloudflareProvider,EtherscanProvider,InfuraProvider,InfuraWebSocketProvider,JsonRpcProvider,JsonRpcBatchProvider,NodesmithProvider,PocketProvider,StaticJsonRpcProvider,Web3Provider,WebSocketProvider,IpcProvider,JsonRpcSigner,getDefaultProvider,getNetwork,isCommunityResource,isCommunityResourcable,showThrottleMessage,Formatter});const version$2="solidity/5.7.0";const regexBytes=new RegExp("^bytes([0-9]+)$");const regexNumber=new RegExp("^(u?int)([0-9]*)$");const regexArray=new RegExp("^(.*)\\[([0-9]*)\\]$");const Zeros="0000000000000000000000000000000000000000000000000000000000000000";const logger$2=new Logger(version$2);function _pack(e,t,r){switch(e){case"address":if(r){return zeroPad(t,32)}return arrayify(t);case"string":return toUtf8Bytes(t);case"bytes":return arrayify(t);case"bool":t=t?"0x01":"0x00";if(r){return zeroPad(t,32)}return arrayify(t)}let n=e.match(regexNumber);if(n){let i=parseInt(n[2]||"256");if(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256){logger$2.throwArgumentError("invalid number type","type",e)}if(r){i=256}t=BigNumber$1.from(t).toTwos(i);return zeroPad(t,i/8)}n=e.match(regexBytes);if(n){const i=parseInt(n[1]);if(String(i)!==n[1]||i===0||i>32){logger$2.throwArgumentError("invalid bytes type","type",e)}if(arrayify(t).byteLength!==i){logger$2.throwArgumentError(`invalid value for ${e}`,"value",t)}if(r){return arrayify((t+Zeros).substring(0,66))}return t}n=e.match(regexArray);if(n&&Array.isArray(t)){const r=n[1];const i=parseInt(n[2]||String(t.length));if(i!=t.length){logger$2.throwArgumentError(`invalid array length for ${e}`,"value",t)}const s=[];t.forEach((function(e){s.push(_pack(r,e,true))}));return concat$2(s)}return logger$2.throwArgumentError("invalid type","type",e)}function pack(e,t){if(e.length!=t.length){logger$2.throwArgumentError("wrong number of values; expected ${ types.length }","values",t)}const r=[];e.forEach((function(e,n){r.push(_pack(e,t[n]))}));return hexlify(concat$2(r))}function keccak256(e,t){return keccak256$1(pack(e,t))}function sha256(e,t){return sha256$1(pack(e,t))}const lib_esm$2=Object.freeze({__proto__:null,pack,keccak256,sha256});const version$1="units/5.7.0";const logger$1=new Logger(version$1);const names$4=["wei","kwei","mwei","gwei","szabo","finney","ether"];function commify(e){const t=String(e).split(".");if(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||e==="."||e==="-."){logger$1.throwArgumentError("invalid value","value",e)}let r=t[0];let n="";if(r.substring(0,1)==="-"){n="-";r=r.substring(1)}while(r.substring(0,1)==="0"){r=r.substring(1)}if(r===""){r="0"}let i="";if(t.length===2){i="."+(t[1]||"0")}while(i.length>2&&i[i.length-1]==="0"){i=i.substring(0,i.length-1)}const s=[];while(r.length){if(r.length<=3){s.unshift(r);break}else{const e=r.length-3;s.unshift(r.substring(e));r=r.substring(0,e)}}return n+s.join(",")+i}function formatUnits(e,t){if(typeof t==="string"){const e=names$4.indexOf(t);if(e!==-1){t=3*e}}return formatFixed(e,t!=null?t:18)}function parseUnits(e,t){if(typeof e!=="string"){logger$1.throwArgumentError("value must be a string","value",e)}if(typeof t==="string"){const e=names$4.indexOf(t);if(e!==-1){t=3*e}}return parseFixed(e,t!=null?t:18)}function formatEther(e){return formatUnits(e,18)}function parseEther(e){return parseUnits(e,18)}const lib_esm$1=Object.freeze({__proto__:null,commify,formatUnits,parseUnits,formatEther,parseEther});const utils$6=Object.freeze({__proto__:null,AbiCoder,defaultAbiCoder,Fragment,ConstructorFragment,ErrorFragment,EventFragment,FunctionFragment,ParamType,FormatTypes,checkResultErrors,Logger,RLP:lib_esm$h,_fetchData,fetchJson,poll,checkProperties,deepCopy,defineReadOnly,getStatic,resolveProperties,shallowCopy,arrayify,concat:concat$2,stripZeros,zeroPad,isBytes,isBytesLike,defaultPath,HDNode,SigningKey,Interface,LogDescription,TransactionDescription,base58:Base58,base64:lib_esm$e,hexlify,isHexString,hexConcat,hexStripZeros,hexValue,hexZeroPad,hexDataLength,hexDataSlice,nameprep,_toEscapedUtf8String,toUtf8Bytes,toUtf8CodePoints,toUtf8String,Utf8ErrorFuncs,formatBytes32String,parseBytes32String,dnsEncode,hashMessage,namehash,isValidName,id,_TypedDataEncoder:TypedDataEncoder,getAddress,getIcapAddress,getContractAddress,getCreate2Address,isAddress,formatEther,parseEther,formatUnits,parseUnits,commify,computeHmac,keccak256:keccak256$1,ripemd160,sha256:sha256$1,sha512,randomBytes,shuffled,solidityPack:pack,solidityKeccak256:keccak256,soliditySha256:sha256,splitSignature,joinSignature,accessListify,parseTransaction:parse,serializeTransaction:serialize$3,get TransactionTypes(){return TransactionTypes},getJsonWalletAddress,computeAddress,recoverAddress,computePublicKey,recoverPublicKey,verifyMessage,verifyTypedData,getAccountPath,mnemonicToEntropy,entropyToMnemonic,isValidMnemonic,mnemonicToSeed,get SupportedAlgorithm(){return SupportedAlgorithm},get UnicodeNormalizationForm(){return UnicodeNormalizationForm},get Utf8ErrorReason(){return Utf8ErrorReason},Indexed});const version="ethers/5.7.2";const logger=new Logger(version);const ethers=Object.freeze({__proto__:null,Signer,Wallet,VoidSigner,getDefaultProvider,providers:index$4,BaseContract,Contract:Contract$1,ContractFactory,BigNumber:BigNumber$1,FixedNumber,constants:index$5,get errors(){return ErrorCode},logger,utils:utils$6,wordlists,version,Wordlist});try{const e=window;if(e._ethers==null){e._ethers=ethers}}catch(e){}const lib_esm=Object.freeze({__proto__:null,ethers,Signer,Wallet,VoidSigner,getDefaultProvider,providers:index$4,BaseContract,Contract:Contract$1,ContractFactory,BigNumber:BigNumber$1,FixedNumber,constants:index$5,get errors(){return ErrorCode},logger,utils:utils$6,wordlists,version,Wordlist});var bignumber=createCommonjsModule$2((function(e){(function(t){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,s=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",f=1e14,c=14,u=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(e){var t,r,E,_=D.prototype={constructor:D,toString:null,valueOf:null},S=new D(1),$=20,T=4,C=-7,P=21,x=-1e7,I=1e7,k=false,N=1,R=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},O="0123456789abcdefghijklmnopqrstuvwxyz",B=true;function D(e,t){var i,a,f,l,h,d,p,y,m=this;if(!(m instanceof D))return new D(e,t);if(t==null){if(e&&e._isBigNumber===true){m.s=e.s;if(!e.c||e.e>I){m.c=m.e=null}else if(e.e<x){m.c=[m.e=0]}else{m.e=e.e;m.c=e.c.slice()}return}if((d=typeof e=="number")&&e*0==0){m.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(l=0,h=e;h>=10;h/=10,l++);if(l>I){m.c=m.e=null}else{m.e=l;m.c=[e]}return}y=String(e)}else{if(!n.test(y=String(e)))return E(m,y,d);m.s=y.charCodeAt(0)==45?(y=y.slice(1),-1):1}if((l=y.indexOf("."))>-1)y=y.replace(".","");if((h=y.search(/e/i))>0){if(l<0)l=h;l+=+y.slice(h+1);y=y.substring(0,h)}else if(l<0){l=y.length}}else{b(t,2,O.length,"Base");if(t==10&&B){m=new D(e);return j(m,$+m.e+1,T)}y=String(e);if(d=typeof e=="number"){if(e*0!=0)return E(m,y,d,t);m.s=1/e<0?(y=y.slice(1),-1):1;if(D.DEBUG&&y.replace(/^0\.0*|\./,"").length>15){throw Error(o+e)}}else{m.s=y.charCodeAt(0)===45?(y=y.slice(1),-1):1}i=O.slice(0,t);l=h=0;for(p=y.length;h<p;h++){if(i.indexOf(a=y.charAt(h))<0){if(a=="."){if(h>l){l=p;continue}}else if(!f){if(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase())){f=true;h=-1;l=0;continue}}return E(m,String(e),d,t)}}d=false;y=r(y,t,10,m.s);if((l=y.indexOf("."))>-1)y=y.replace(".","");else l=y.length}for(h=0;y.charCodeAt(h)===48;h++);for(p=y.length;y.charCodeAt(--p)===48;);if(y=y.slice(h,++p)){p-=h;if(d&&D.DEBUG&&p>15&&(e>u||e!==s(e))){throw Error(o+m.s*e)}if((l=l-h-1)>I){m.c=m.e=null}else if(l<x){m.c=[m.e=0]}else{m.e=l;m.c=[];h=(l+1)%c;if(l<0)h+=c;if(h<p){if(h)m.c.push(+y.slice(0,h));for(p-=c;h<p;){m.c.push(+y.slice(h,h+=c))}h=c-(y=y.slice(h)).length}else{h-=p}for(;h--;y+="0");m.c.push(+y)}}else{m.c=[m.e=0]}}D.clone=p;D.ROUND_UP=0;D.ROUND_DOWN=1;D.ROUND_CEIL=2;D.ROUND_FLOOR=3;D.ROUND_HALF_UP=4;D.ROUND_HALF_DOWN=5;D.ROUND_HALF_EVEN=6;D.ROUND_HALF_CEIL=7;D.ROUND_HALF_FLOOR=8;D.EUCLID=9;D.config=D.set=function(e){var t,r;if(e!=null){if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];b(r,0,d,t);$=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];b(r,0,8,t);T=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){b(r[0],-d,0,t);b(r[1],0,d,t);C=r[0];P=r[1]}else{b(r,-d,d,t);C=-(P=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){b(r[0],-d,-1,t);b(r[1],1,d,t);x=r[0];I=r[1]}else{b(r,-d,d,t);if(r){x=-(I=r<0?-r:r)}else{throw Error(a+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(r===!!r){if(r){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){k=r}else{k=!r;throw Error(a+"crypto unavailable")}}else{k=r}}else{throw Error(a+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];b(r,0,9,t);N=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];b(r,0,d,t);R=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if(typeof r=="object")M=r;else throw Error(a+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if(typeof r=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(r)){B=r.slice(0,10)=="0123456789";O=r}else{throw Error(a+t+" invalid: "+r)}}}else{throw Error(a+"Object expected: "+e)}}return{DECIMAL_PLACES:$,ROUNDING_MODE:T,EXPONENTIAL_AT:[C,P],RANGE:[x,I],CRYPTO:k,MODULO_MODE:N,POW_PRECISION:R,FORMAT:M,ALPHABET:O}};D.isBigNumber=function(e){if(!e||e._isBigNumber!==true)return false;if(!D.DEBUG)return true;var t,r,n=e.c,i=e.e,o=e.s;e:if({}.toString.call(n)=="[object Array]"){if((o===1||o===-1)&&i>=-d&&i<=d&&i===s(i)){if(n[0]===0){if(i===0&&n.length===1)return true;break e}t=(i+1)%c;if(t<1)t+=c;if(String(n[0]).length==t){for(t=0;t<n.length;t++){r=n[t];if(r<0||r>=f||r!==s(r))break e}if(r!==0)return true}}}else if(n===null&&i===null&&(o===null||o===1||o===-1)){return true}throw Error(a+"Invalid BigNumber: "+e)};D.maximum=D.max=function(){return L(arguments,_.lt)};D.minimum=D.min=function(){return L(arguments,_.gt)};D.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return s(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var r,n,o,f,u,h=0,p=[],y=new D(S);if(e==null)e=$;else b(e,0,d);f=i(e/c);if(k){if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(f*=2));for(;h<f;){u=r[h]*131072+(r[h+1]>>>11);if(u>=9e15){n=crypto.getRandomValues(new Uint32Array(2));r[h]=n[0];r[h+1]=n[1]}else{p.push(u%1e14);h+=2}}h=f/2}else if(crypto.randomBytes){r=crypto.randomBytes(f*=7);for(;h<f;){u=(r[h]&31)*281474976710656+r[h+1]*1099511627776+r[h+2]*4294967296+r[h+3]*16777216+(r[h+4]<<16)+(r[h+5]<<8)+r[h+6];if(u>=9e15){crypto.randomBytes(7).copy(r,h)}else{p.push(u%1e14);h+=7}}h=f/7}else{k=false;throw Error(a+"crypto unavailable")}}if(!k){for(;h<f;){u=t();if(u<9e15)p[h++]=u%1e14}}f=p[--h];e%=c;if(f&&e){u=l[c-e];p[h]=s(f/u)*u}for(;p[h]===0;p.pop(),h--);if(h<0){p=[o=0]}else{for(o=-1;p[0]===0;p.splice(0,1),o-=c);for(h=1,u=p[0];u>=10;u/=10,h++);if(h<c)o-=c-h}y.e=o;y.c=p;return y}}();D.sum=function(){var e=1,t=arguments,r=new D(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function r(e,t,r,n){var i,s=[0],a,o=0,f=e.length;for(;o<f;){for(a=s.length;a--;s[a]*=t);s[0]+=n.indexOf(e.charAt(o++));for(i=0;i<s.length;i++){if(s[i]>r-1){if(s[i+1]==null)s[i+1]=0;s[i+1]+=s[i]/r|0;s[i]%=r}}}return s.reverse()}return function(n,i,s,a,o){var f,c,u,l,h,d,p,y,g=n.indexOf("."),b=$,v=T;if(g>=0){l=R;R=0;n=n.replace(".","");y=new D(i);d=y.pow(n.length-g);R=l;y.c=r(A(m(d.c),d.e,"0"),10,s,e);y.e=y.c.length}p=r(n,i,s,o?(f=O,e):(f=e,O));u=l=p.length;for(;p[--l]==0;p.pop());if(!p[0])return f.charAt(0);if(g<0){--u}else{d.c=p;d.e=u;d.s=a;d=t(d,y,b,v,s);p=d.c;h=d.r;u=d.e}c=u+b+1;g=p[c];l=s/2;h=h||c<0||p[c+1]!=null;h=v<4?(g!=null||h)&&(v==0||v==(d.s<0?3:2)):g>l||g==l&&(v==4||h||v==6&&p[c-1]&1||v==(d.s<0?8:7));if(c<1||!p[0]){n=h?A(f.charAt(1),-b,f.charAt(0)):f.charAt(0)}else{p.length=c;if(h){for(--s;++p[--c]>s;){p[c]=0;if(!c){++u;p=[1].concat(p)}}}for(l=p.length;!p[--l];);for(g=0,n="";g<=l;n+=f.charAt(p[g++]));n=A(n,u,f.charAt(0))}return n}}();t=function(){function e(e,t,r){var n,i,s,a,o=0,f=e.length,c=t%h,u=t/h|0;for(e=e.slice();f--;){s=e[f]%h;a=e[f]/h|0;n=u*s+a*c;i=c*s+n%h*h+o;o=(i/r|0)+(n/h|0)+u*a;e[f]=i%r}if(o)e=[o].concat(e);return e}function t(e,t,r,n){var i,s;if(r!=n){s=r>n?1:-1}else{for(i=s=0;i<r;i++){if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}}}return s}function r(e,t,r,n){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*n+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,a,o,u){var l,h,d,p,m,g,b,v,w,A,E,_,S,$,T,C,P,x=n.s==i.s?1:-1,I=n.c,k=i.c;if(!I||!I[0]||!k||!k[0]){return new D(!n.s||!i.s||(I?k&&I[0]==k[0]:!k)?NaN:I&&I[0]==0||!k?x*0:x/0)}v=new D(x);w=v.c=[];h=n.e-i.e;x=a+h+1;if(!u){u=f;h=y(n.e/c)-y(i.e/c);x=x/c|0}for(d=0;k[d]==(I[d]||0);d++);if(k[d]>(I[d]||0))h--;if(x<0){w.push(1);p=true}else{$=I.length;C=k.length;d=0;x+=2;m=s(u/(k[0]+1));if(m>1){k=e(k,m,u);I=e(I,m,u);C=k.length;$=I.length}S=C;A=I.slice(0,C);E=A.length;for(;E<C;A[E++]=0);P=k.slice();P=[0].concat(P);T=k[0];if(k[1]>=u/2)T++;do{m=0;l=t(k,A,C,E);if(l<0){_=A[0];if(C!=E)_=_*u+(A[1]||0);m=s(_/T);if(m>1){if(m>=u)m=u-1;g=e(k,m,u);b=g.length;E=A.length;while(t(g,A,b,E)==1){m--;r(g,C<b?P:k,b,u);b=g.length;l=1}}else{if(m==0){l=m=1}g=k.slice();b=g.length}if(b<E)g=[0].concat(g);r(A,g,E,u);E=A.length;if(l==-1){while(t(k,A,C,E)<1){m++;r(A,C<E?P:k,E,u);E=A.length}}}else if(l===0){m++;A=[0]}w[d++]=m;if(A[0]){A[E++]=I[S]||0}else{A=[I[S]];E=1}}while((S++<$||A[0]!=null)&&x--);p=A[0]!=null;if(!w[0])w.splice(0,1)}if(u==f){for(d=1,x=w[0];x>=10;x/=10,d++);j(v,a+(v.e=d+h*c-1)+1,o,p)}else{v.e=h;v.r=+p}return v}}();function U(e,t,r,n){var i,s,a,o,f;if(r==null)r=T;else b(r,0,8);if(!e.c)return e.toString();i=e.c[0];a=e.e;if(t==null){f=m(e.c);f=n==1||n==2&&(a<=C||a>=P)?w(f,a):A(f,a,"0")}else{e=j(new D(e),t,r);s=e.e;f=m(e.c);o=f.length;if(n==1||n==2&&(t<=s||s<=C)){for(;o<t;f+="0",o++);f=w(f,s)}else{t-=a;f=A(f,s,"0");if(s+1>o){if(--t>0)for(f+=".";t--;f+="0");}else{t+=s-o;if(t>0){if(s+1==o)f+=".";for(;t--;f+="0");}}}}return e.s<0&&i?"-"+f:f}function L(e,t){var r,n=1,i=new D(e[0]);for(;n<e.length;n++){r=new D(e[n]);if(!r.s){i=r;break}else if(t.call(i,r)){i=r}}return i}function F(e,t,r){var n=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);if((r=n+r*c-1)>I){e.c=e.e=null}else if(r<x){e.c=[e.e=0]}else{e.e=r;e.c=t}return e}E=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,o,f,c){var u,l=f?o:o.replace(i,"");if(n.test(l)){s.s=isNaN(l)?null:l<0?-1:1}else{if(!f){l=l.replace(e,(function(e,t,r){u=(r=r.toLowerCase())=="x"?16:r=="b"?2:8;return!c||c==u?t:e}));if(c){u=c;l=l.replace(t,"$1").replace(r,"0.$1")}if(o!=l)return new D(l,u)}if(D.DEBUG){throw Error(a+"Not a"+(c?" base "+c:"")+" number: "+o)}s.s=null}s.c=s.e=null}}();function j(e,t,r,n){var a,o,u,h,d,p,y,m=e.c,g=l;if(m){e:{for(a=1,h=m[0];h>=10;h/=10,a++);o=t-a;if(o<0){o+=c;u=t;d=m[p=0];y=d/g[a-u-1]%10|0}else{p=i((o+1)/c);if(p>=m.length){if(n){for(;m.length<=p;m.push(0));d=y=0;a=1;o%=c;u=o-c+1}else{break e}}else{d=h=m[p];for(a=1;h>=10;h/=10,a++);o%=c;u=o-c+a;y=u<0?0:d/g[a-u-1]%10|0}}n=n||t<0||m[p+1]!=null||(u<0?d:d%g[a-u-1]);n=r<4?(y||n)&&(r==0||r==(e.s<0?3:2)):y>5||y==5&&(r==4||n||r==6&&(o>0?u>0?d/g[a-u]:0:m[p-1])%10&1||r==(e.s<0?8:7));if(t<1||!m[0]){m.length=0;if(n){t-=e.e+1;m[0]=g[(c-t%c)%c];e.e=-t||0}else{m[0]=e.e=0}return e}if(o==0){m.length=p;h=1;p--}else{m.length=p+1;h=g[c-o];m[p]=u>0?s(d/g[a-u]%g[u])*h:0}if(n){for(;;){if(p==0){for(o=1,u=m[0];u>=10;u/=10,o++);u=m[0]+=h;for(h=1;u>=10;u/=10,h++);if(o!=h){e.e++;if(m[0]==f)m[0]=1}break}else{m[p]+=h;if(m[p]!=f)break;m[p--]=0;h=1}}}for(o=m.length;m[--o]===0;m.pop());}if(e.e>I){e.c=e.e=null}else if(e.e<x){e.c=[e.e=0]}}return e}function H(e){var t,r=e.e;if(r===null)return e.toString();t=m(e.c);t=r<=C||r>=P?w(t,r):A(t,r,"0");return e.s<0?"-"+t:t}_.absoluteValue=_.abs=function(){var e=new D(this);if(e.s<0)e.s=1;return e};_.comparedTo=function(e,t){return g(this,new D(e,t))};_.decimalPlaces=_.dp=function(e,t){var r,n,i,s=this;if(e!=null){b(e,0,d);if(t==null)t=T;else b(t,0,8);return j(new D(s),e+s.e+1,t)}if(!(r=s.c))return null;n=((i=r.length-1)-y(this.e/c))*c;if(i=r[i])for(;i%10==0;i/=10,n--);if(n<0)n=0;return n};_.dividedBy=_.div=function(e,r){return t(this,new D(e,r),$,T)};_.dividedToIntegerBy=_.idiv=function(e,r){return t(this,new D(e,r),0,1)};_.exponentiatedBy=_.pow=function(e,t){var r,n,o,f,u,l,h,d,p,y=this;e=new D(e);if(e.c&&!e.isInteger()){throw Error(a+"Exponent not an integer: "+H(e))}if(t!=null)t=new D(t);l=e.e>14;if(!y.c||!y.c[0]||y.c[0]==1&&!y.e&&y.c.length==1||!e.c||!e.c[0]){p=new D(Math.pow(+H(y),l?e.s*(2-v(e)):+H(e)));return t?p.mod(t):p}h=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new D(NaN);n=!h&&y.isInteger()&&t.isInteger();if(n)y=y.mod(t)}else if(e.e>9&&(y.e>0||y.e<-1||(y.e==0?y.c[0]>1||l&&y.c[1]>=24e7:y.c[0]<8e13||l&&y.c[0]<=9999975e7))){f=y.s<0&&v(e)?-0:0;if(y.e>-1)f=1/f;return new D(h?1/f:f)}else if(R){f=i(R/c+2)}if(l){r=new D(.5);if(h)e.s=1;d=v(e)}else{o=Math.abs(+H(e));d=o%2}p=new D(S);for(;;){if(d){p=p.times(y);if(!p.c)break;if(f){if(p.c.length>f)p.c.length=f}else if(n){p=p.mod(t)}}if(o){o=s(o/2);if(o===0)break;d=o%2}else{e=e.times(r);j(e,e.e+1,1);if(e.e>14){d=v(e)}else{o=+H(e);if(o===0)break;d=o%2}}y=y.times(y);if(f){if(y.c&&y.c.length>f)y.c.length=f}else if(n){y=y.mod(t)}}if(n)return p;if(h)p=S.div(p);return t?p.mod(t):f?j(p,R,T,u):p};_.integerValue=function(e){var t=new D(this);if(e==null)e=T;else b(e,0,8);return j(t,t.e+1,e)};_.isEqualTo=_.eq=function(e,t){return g(this,new D(e,t))===0};_.isFinite=function(){return!!this.c};_.isGreaterThan=_.gt=function(e,t){return g(this,new D(e,t))>0};_.isGreaterThanOrEqualTo=_.gte=function(e,t){return(t=g(this,new D(e,t)))===1||t===0};_.isInteger=function(){return!!this.c&&y(this.e/c)>this.c.length-2};_.isLessThan=_.lt=function(e,t){return g(this,new D(e,t))<0};_.isLessThanOrEqualTo=_.lte=function(e,t){return(t=g(this,new D(e,t)))===-1||t===0};_.isNaN=function(){return!this.s};_.isNegative=function(){return this.s<0};_.isPositive=function(){return this.s>0};_.isZero=function(){return!!this.c&&this.c[0]==0};_.minus=function(e,t){var r,n,i,s,a=this,o=a.s;e=new D(e,t);t=e.s;if(!o||!t)return new D(NaN);if(o!=t){e.s=-t;return a.plus(e)}var u=a.e/c,l=e.e/c,h=a.c,d=e.c;if(!u||!l){if(!h||!d)return h?(e.s=-t,e):new D(d?a:NaN);if(!h[0]||!d[0]){return d[0]?(e.s=-t,e):new D(h[0]?a:T==3?-0:0)}}u=y(u);l=y(l);h=h.slice();if(o=u-l){if(s=o<0){o=-o;i=h}else{l=u;i=d}i.reverse();for(t=o;t--;i.push(0));i.reverse()}else{n=(s=(o=h.length)<(t=d.length))?o:t;for(o=t=0;t<n;t++){if(h[t]!=d[t]){s=h[t]<d[t];break}}}if(s){i=h;h=d;d=i;e.s=-e.s}t=(n=d.length)-(r=h.length);if(t>0)for(;t--;h[r++]=0);t=f-1;for(;n>o;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=t);--h[r];h[n]+=f}h[n]-=d[n]}for(;h[0]==0;h.splice(0,1),--l);if(!h[0]){e.s=T==3?-1:1;e.c=[e.e=0];return e}return F(e,h,l)};_.modulo=_.mod=function(e,r){var n,i,s=this;e=new D(e,r);if(!s.c||!e.s||e.c&&!e.c[0]){return new D(NaN)}else if(!e.c||s.c&&!s.c[0]){return new D(s)}if(N==9){i=e.s;e.s=1;n=t(s,e,0,3);e.s=i;n.s*=i}else{n=t(s,e,0,N)}e=s.minus(n.times(e));if(!e.c[0]&&N==1)e.s=s.s;return e};_.multipliedBy=_.times=function(e,t){var r,n,i,s,a,o,u,l,d,p,m,g,b,v,w,A=this,E=A.c,_=(e=new D(e,t)).c;if(!E||!_||!E[0]||!_[0]){if(!A.s||!e.s||E&&!E[0]&&!_||_&&!_[0]&&!E){e.c=e.e=e.s=null}else{e.s*=A.s;if(!E||!_){e.c=e.e=null}else{e.c=[0];e.e=0}}return e}n=y(A.e/c)+y(e.e/c);e.s*=A.s;u=E.length;p=_.length;if(u<p){b=E;E=_;_=b;i=u;u=p;p=i}for(i=u+p,b=[];i--;b.push(0));v=f;w=h;for(i=p;--i>=0;){r=0;m=_[i]%w;g=_[i]/w|0;for(a=u,s=i+a;s>i;){l=E[--a]%w;d=E[a]/w|0;o=g*l+d*m;l=m*l+o%w*w+b[s]+r;r=(l/v|0)+(o/w|0)+g*d;b[s--]=l%v}b[s]=r}if(r){++n}else{b.splice(0,1)}return F(e,b,n)};_.negated=function(){var e=new D(this);e.s=-e.s||null;return e};_.plus=function(e,t){var r,n=this,i=n.s;e=new D(e,t);t=e.s;if(!i||!t)return new D(NaN);if(i!=t){e.s=-t;return n.minus(e)}var s=n.e/c,a=e.e/c,o=n.c,u=e.c;if(!s||!a){if(!o||!u)return new D(i/0);if(!o[0]||!u[0])return u[0]?e:new D(o[0]?n:i*0)}s=y(s);a=y(a);o=o.slice();if(i=s-a){if(i>0){a=s;r=u}else{i=-i;r=o}r.reverse();for(;i--;r.push(0));r.reverse()}i=o.length;t=u.length;if(i-t<0){r=u;u=o;o=r;t=i}for(i=0;t;){i=(o[--t]=o[t]+u[t]+i)/f|0;o[t]=f===o[t]?0:o[t]%f}if(i){o=[i].concat(o);++a}return F(e,o,a)};_.precision=_.sd=function(e,t){var r,n,i,s=this;if(e!=null&&e!==!!e){b(e,1,d);if(t==null)t=T;else b(t,0,8);return j(new D(s),e,t)}if(!(r=s.c))return null;i=r.length-1;n=i*c+1;if(i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}if(e&&s.e+1>n)n=s.e+1;return n};_.shiftedBy=function(e){b(e,-u,u);return this.times("1e"+e)};_.squareRoot=_.sqrt=function(){var e,r,n,i,s,a=this,o=a.c,f=a.s,c=a.e,u=$+4,l=new D("0.5");if(f!==1||!o||!o[0]){return new D(!f||f<0&&(!o||o[0])?NaN:o?a:1/0)}f=Math.sqrt(+H(a));if(f==0||f==1/0){r=m(o);if((r.length+c)%2==0)r+="0";f=Math.sqrt(+r);c=y((c+1)/2)-(c<0||c%2);if(f==1/0){r="5e"+c}else{r=f.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}n=new D(r)}else{n=new D(f+"")}if(n.c[0]){c=n.e;f=c+u;if(f<3)f=0;for(;;){s=n;n=l.times(s.plus(t(a,s,u,1)));if(m(s.c).slice(0,f)===(r=m(n.c)).slice(0,f)){if(n.e<c)--f;r=r.slice(f-3,f+1);if(r=="9999"||!i&&r=="4999"){if(!i){j(s,s.e+$+2,0);if(s.times(s).eq(a)){n=s;break}}u+=4;f+=4;i=1}else{if(!+r||!+r.slice(1)&&r.charAt(0)=="5"){j(n,n.e+$+2,1);e=!n.times(n).eq(a)}break}}}}return j(n,n.e+$+1,T,e)};_.toExponential=function(e,t){if(e!=null){b(e,0,d);e++}return U(this,e,t,1)};_.toFixed=function(e,t){if(e!=null){b(e,0,d);e=e+this.e+1}return U(this,e,t)};_.toFormat=function(e,t,r){var n,i=this;if(r==null){if(e!=null&&t&&typeof t=="object"){r=t;t=null}else if(e&&typeof e=="object"){r=e;e=t=null}else{r=M}}else if(typeof r!="object"){throw Error(a+"Argument not an object: "+r)}n=i.toFixed(e,t);if(i.c){var s,o=n.split("."),f=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",l=o[0],h=o[1],d=i.s<0,p=d?l.slice(1):l,y=p.length;if(c){s=f;f=c;c=s;y-=s}if(f>0&&y>0){s=y%f||f;l=p.substr(0,s);for(;s<y;s+=f)l+=u+p.substr(s,f);if(c>0)l+=u+p.slice(s);if(d)l="-"+l}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")};_.toFraction=function(e){var r,n,i,s,o,f,u,h,d,p,y,g,b=this,v=b.c;if(e!=null){u=new D(e);if(!u.isInteger()&&(u.c||u.s!==1)||u.lt(S)){throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+H(u))}}if(!v)return new D(b);r=new D(S);d=n=new D(S);i=h=new D(S);g=m(v);o=r.e=g.length-b.e-1;r.c[0]=l[(f=o%c)<0?c+f:f];e=!e||u.comparedTo(r)>0?o>0?r:d:u;f=I;I=1/0;u=new D(g);h.c[0]=0;for(;;){p=t(u,r,0,1);s=n.plus(p.times(i));if(s.comparedTo(e)==1)break;n=i;i=s;d=h.plus(p.times(s=d));h=s;r=u.minus(p.times(s=r));u=s}s=t(e.minus(n),i,0,1);h=h.plus(s.times(d));n=n.plus(s.times(i));h.s=d.s=b.s;o=o*2;y=t(d,i,o,T).minus(b).abs().comparedTo(t(h,n,o,T).minus(b).abs())<1?[d,i]:[h,n];I=f;return y};_.toNumber=function(){return+H(this)};_.toPrecision=function(e,t){if(e!=null)b(e,1,d);return U(this,e,t,2)};_.toString=function(e){var t,n=this,i=n.s,s=n.e;if(s===null){if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}}else{if(e==null){t=s<=C||s>=P?w(m(n.c),s):A(m(n.c),s,"0")}else if(e===10&&B){n=j(new D(n),$+s+1,T);t=A(m(n.c),n.e,"0")}else{b(e,2,O.length,"Base");t=r(A(m(n.c),s,"0"),10,e,i,true)}if(i<0&&n.c[0])t="-"+t}return t};_.valueOf=_.toJSON=function(){return H(this)};_._isBigNumber=true;if(e!=null)D.set(e);return D}function y(e){var t=e|0;return e>0||e===t?t:t-1}function m(e){var t,r,n=1,i=e.length,s=e[0]+"";for(;n<i;){t=e[n++]+"";r=c-t.length;for(;r--;t="0"+t);s+=t}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function g(e,t){var r,n,i=e.c,s=t.c,a=e.s,o=t.s,f=e.e,c=t.e;if(!a||!o)return null;r=i&&!i[0];n=s&&!s[0];if(r||n)return r?n?0:-o:a;if(a!=o)return a;r=a<0;n=f==c;if(!i||!s)return n?0:!i^r?1:-1;if(!n)return f>c^r?1:-1;o=(f=i.length)<(c=s.length)?f:c;for(a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return f==c?0:f>c^r?1:-1}function b(e,t,r,n){if(e<t||e>r||e!==s(e)){throw Error(a+(n||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function v(e){var t=e.c.length-1;return y(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function A(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{n=e.length;if(++t>n){for(i=r,t-=n;--t;i+=r);e+=i}else if(t<n){e=e.slice(0,t)+"."+e.slice(t)}}return e}r=p();r["default"]=r.BigNumber=r;if(e.exports){e.exports=r}else{if(!t){t=typeof self!="undefined"&&self?self:window}t.BigNumber=r}})(commonjsGlobal)}));class EthUtils{static encodeTransactionParameter(e,t){switch(e){case"bool":if(typeof t!=="boolean")t=Boolean(t);return t;case"string":case"address":case"struct":return t}if(EthUtils.isIntType(e)){if(typeof t==="string"){t=BigInt(t)}return t}if(e.indexOf("byte")===0){if(t&&(typeof t!=="string"||t.indexOf("0x")!==0))t=hexlify(t);return t}throw new Error("Ethereum argument encoding for type "+e+" is not defined")}static isIntType(e){const t=e.indexOf("int");return t===0||t===1}static tokenScriptOutputToEthers(e){switch(e){case"utf8":return"string"}return e}static convertFunctionResult(e){if(e instanceof Object&&e._isBigNumber){return BigInt(e)}if(!Array.isArray(e)){return e}let t=false;for(let r in e){if(r.match(/[a-zA-Z]+/g)){t=true;break}}if(!t){const t=[];for(let r=0;r<e.length;r++){t.push(this.convertFunctionResult(e[r]))}return t}const r={};for(let t in e){r[t]=this.convertFunctionResult(e[t])}return r}static bigIntsToString(e){if(typeof e==="bigint")return e.toString();if(typeof e!=="object")return e;if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){t.push(this.bigIntsToString(e[r]))}return t}const t={};for(let r in e){t[r]=this.bigIntsToString(e[r])}return t}static calculateDecimalValue(e,t){if(!e)return 0;if(typeof e!=="string")e=e.toString();return new bignumber.BigNumber(e).dividedBy(Math.pow(10,t)).toString()}static calculateIntValue(e,t){if(!e)return 0;if(typeof e!=="string")e=e.toString();const r=new bignumber.BigNumber(e).multipliedBy(Math.pow(10,t)).integerValue().toString(10);return BigInt(r)}}class AbstractDependencyBranch{constructor(e,t){this.tokenScript=e;this.localAttrContext=t}async getValue(e){switch(this.ref){case"tokenId":if(!e)throw new Error("tokenId reference cannot be resolved as no token context is set.");if(e.selectedTokenId){const t=e.selectedTokenId;return BigInt(t)}else{throw new Error("tokenId reference is not accessible under the context of a fungible token")}case"ownerAddress":const t=await this.tokenScript.getEngine().getWalletAdapter();return await t.getCurrentWalletAddress();default:const r=this.tokenScript.getTokenContextData(e);if(r[this.ref])return r[this.ref];return await this.resolveValue(e)}}invalidateDependencies(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.invalidate(e)}catch(t){return e.indexOf(this.localRef)>-1}}isDependentOn(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.isDependentOn(e)}catch(t){return e.indexOf(this.localRef)>-1}}isStaticAttribute(){return!(!this.ref&&!this.localRef)}getBackingAttribute(){let e;if(this.localRef){if(!this.localAttrContext)throw new Error("Local ref cannot be resolve since this attribute is from the global attribute scope. ");e=this.localAttrContext.getAttribute(this.localRef)}else{if(this.localAttrContext&&this.localAttrContext.hasAttribute(this.ref)){e=this.localAttrContext.getAttribute(this.ref)}else{e=this.tokenScript.getAttributes().getAttribute(this.ref)}}return e}isSpecialRef(){return["tokenId","ownerAddress"].indexOf(this.ref)>-1}}class Argument extends AbstractDependencyBranch{constructor(e,t,r,n){super(e,n);this.type=r?r:t.tagName.split(":")[1];this.content=t.textContent;this.ref=t.getAttribute("ref");this.localRef=t.getAttribute("local-ref")}async getEthersArgument(e,t){let r={name:t,value:await this.getValue(e)};if(this.type==="struct"){switch(this.ref){case"attestation":const t=await this.tokenScript.getTokenContextData(e);r.type="tuple";r.internalType="struct EasTicketVerify.AttestationCoreData";r.components=t.tokenInfo.data.decodedToken.types.Attest.map((e=>({name:e.name,type:e.type,internalType:e.type})));break;default:throw new Error("Struct encoding is not defined for "+this.ref+" attribute.")}}else{r.type=this.type;r.internalType=this.type}return r}async resolveValue(e){let t;if(this.ref||this.localRef){if(e)t=await this.resolveUsingTokenContext(e);if(!t)t=await this.resolveFromAttribute(e)}else{t=this.content}return EthUtils.encodeTransactionParameter(this.type,t)}async resolveUsingTokenContext(e){const t=await this.tokenScript.getTokenContextData(e);if(!t[this.ref])return null;if(this.type==="struct"){return this.encodeStruct(this.ref,t)}else{return t[this.ref]}}async encodeStruct(e,t){switch(e){case"attestation":const e=t.tokenInfo.data.decodedToken;const r={};for(const t of e.types.Attest){r[t.name]=e.message[t.name]}return r;default:throw new Error("Struct encoding is not defined for "+this.ref+" attribute.")}}async resolveFromAttribute(e){var t;let r;try{r=this.getBackingAttribute();return await r.getValue(true,false,e)}catch(r){const n=this.tokenScript.getViewController().getUserEntryValue(this.localRef,(t=e.selectedTokenId)!==null&&t!==void 0?t:"-1");if(!n){throw r}return n}}}class Arguments{constructor(e,t,r){this.tokenScript=e;this.parentElem=t;this.localAttrContext=r}getArguments(){if(!this.arguments){this.arguments=[];const e=this.parentElem.getElementsByTagName("ts:data");if(e.length===0)return[];const t=e[0].children;if(t.length===0)return[];for(let e in t){if(!t.hasOwnProperty(e))continue;const r=t[e];this.arguments.push(new Argument(this.tokenScript,r,null,this.localAttrContext))}}return this.arguments}[Symbol.iterator](){return this.getArguments().values()}}class Transaction{constructor(e,t,r){this.tokenScript=e;this.transactionDef=t;this.localAttrContext=r;const n=t.getElementsByTagName("ethereum:transaction");if(!n){return}const i=n[0].getAttribute("contract");let s=EthUtils.tokenScriptOutputToEthers(n[0].getAttribute("as"));this.transaction={as:s,contract:this.tokenScript.getContractByName(i),contractName:i,function:n[0].getAttribute("function"),args:new Arguments(this.tokenScript,n[0],this.localAttrContext).getArguments(),value:this.getValueArg(n[0])}}getValueArg(e){const t=e.getElementsByTagName("ethereum:value");if(t.length===0)return null;return new Argument(this.tokenScript,t[0],"uint256",this.localAttrContext)}getTransactionInfo(){return this.transaction}}class FilterValue extends AbstractDependencyBranch{constructor(e,t,r,n){super(e,n);this.type=r;this.ref=t}async resolveValue(e){const t=this.getBackingAttribute();const r=await t.getValue(true,false,false,e);return EthUtils.encodeTransactionParameter(this.type,r)}}class FilterQuery{constructor(e,t,r){this.tokenScript=e;this.localAttrContext=r;this.dynamicValues={};this.params=new URLSearchParams(t);for(let[t,n]of this.params.entries()){const i=n.match(/^\$\{(.*)\}/);if(i&&i[1])this.dynamicValues[t]=new FilterValue(e,i[1],null,r)}}has(e){return this.params.has(e)}async getValue(e,t){if(this.dynamicValues[e]){return await this.dynamicValues[e].getValue(t)}return this.params.get(e)}getDynamicFilterValues(){return Object.values(this.dynamicValues)}}class Label{constructor(e){this.parentElem=e;const t=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:label"));if(t.length>0){const e=[].slice.call(t[0].children);const r=e.filter((e=>e.getAttribute("xml:lang")==="en"));if(r.length){if(r[0].tagName==="ts:plurals"&&r[0].children.length>0){this.label={};for(let e of r[0].children){const e=r[0].children[0];this.label[e.getAttribute("quantity")]=e.textContent}}else{this.label=r[0].textContent}}}}getValue(e){if(!this.label)return null;if(typeof this.label==="string")return this.label;if(e>1&&this.label["other"])return this.label["other"];return this.label["one"]}}var isArray=Array.isArray;var isArray_1=isArray;var freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal;var _freeGlobal=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=_freeGlobal||freeSelf||Function("return this")();var _root=root;var Symbol$1=_root.Symbol;var _Symbol=Symbol$1;var objectProto$4=Object.prototype;var hasOwnProperty$4=objectProto$4.hasOwnProperty;var nativeObjectToString$1=objectProto$4.toString;var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(e){var t=hasOwnProperty$4.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=undefined;var n=true}catch(e){}var i=nativeObjectToString$1.call(e);if(n){if(t){e[symToStringTag$1]=r}else{delete e[symToStringTag$1]}}return i}var _getRawTag=getRawTag;var objectProto$3=Object.prototype;var nativeObjectToString=objectProto$3.toString;function objectToString(e){return nativeObjectToString.call(e)}var _objectToString=objectToString;var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(e){if(e==null){return e===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(e)?_getRawTag(e):_objectToString(e)}var _baseGetTag=baseGetTag;function isObjectLike(e){return e!=null&&typeof e=="object"}var isObjectLike_1=isObjectLike;var symbolTag="[object Symbol]";function isSymbol(e){return typeof e=="symbol"||isObjectLike_1(e)&&_baseGetTag(e)==symbolTag}var isSymbol_1=isSymbol;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray_1(e)){return false}var r=typeof e;if(r=="number"||r=="symbol"||r=="boolean"||e==null||isSymbol_1(e)){return true}return reIsPlainProp.test(e)||!reIsDeepProp.test(e)||t!=null&&e in Object(t)}var _isKey=isKey;function isObject(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var isObject_1=isObject;var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject_1(e)){return false}var t=_baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var isFunction_1=isFunction;var coreJsData=_root["__core-js_shared__"];var _coreJsData=coreJsData;var maskSrcKey=function(){var e=/[^.]+$/.exec(_coreJsData&&_coreJsData.keys&&_coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var _isMasked=isMasked;var funcProto$1=Function.prototype;var funcToString$1=funcProto$1.toString;function toSource(e){if(e!=null){try{return funcToString$1.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var _toSource=toSource;var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var funcProto=Function.prototype,objectProto$2=Object.prototype;var funcToString=funcProto.toString;var hasOwnProperty$3=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$3).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){if(!isObject_1(e)||_isMasked(e)){return false}var t=isFunction_1(e)?reIsNative:reIsHostCtor;return t.test(_toSource(e))}var _baseIsNative=baseIsNative;function getValue(e,t){return e==null?undefined:e[t]}var _getValue=getValue;function getNative(e,t){var r=_getValue(e,t);return _baseIsNative(r)?r:undefined}var _getNative=getNative;var nativeCreate=_getNative(Object,"create");var _nativeCreate=nativeCreate;function hashClear(){this.__data__=_nativeCreate?_nativeCreate(null):{};this.size=0}var _hashClear=hashClear;function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}var _hashDelete=hashDelete;var HASH_UNDEFINED$1="__lodash_hash_undefined__";var objectProto$1=Object.prototype;var hasOwnProperty$2=objectProto$1.hasOwnProperty;function hashGet(e){var t=this.__data__;if(_nativeCreate){var r=t[e];return r===HASH_UNDEFINED$1?undefined:r}return hasOwnProperty$2.call(t,e)?t[e]:undefined}var _hashGet=hashGet;var objectProto=Object.prototype;var hasOwnProperty$1=objectProto.hasOwnProperty;function hashHas(e){var t=this.__data__;return _nativeCreate?t[e]!==undefined:hasOwnProperty$1.call(t,e)}var _hashHas=hashHas;var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(e,t){var r=this.__data__;this.size+=this.has(e)?0:1;r[e]=_nativeCreate&&t===undefined?HASH_UNDEFINED:t;return this}var _hashSet=hashSet;function Hash$1(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}Hash$1.prototype.clear=_hashClear;Hash$1.prototype["delete"]=_hashDelete;Hash$1.prototype.get=_hashGet;Hash$1.prototype.has=_hashHas;Hash$1.prototype.set=_hashSet;var _Hash=Hash$1;function listCacheClear(){this.__data__=[];this.size=0}var _listCacheClear=listCacheClear;function eq(e,t){return e===t||e!==e&&t!==t}var eq_1=eq;function assocIndexOf(e,t){var r=e.length;while(r--){if(eq_1(e[r][0],t)){return r}}return-1}var _assocIndexOf=assocIndexOf;var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,r=_assocIndexOf(t,e);if(r<0){return false}var n=t.length-1;if(r==n){t.pop()}else{splice.call(t,r,1)}--this.size;return true}var _listCacheDelete=listCacheDelete;function listCacheGet(e){var t=this.__data__,r=_assocIndexOf(t,e);return r<0?undefined:t[r][1]}var _listCacheGet=listCacheGet;function listCacheHas(e){return _assocIndexOf(this.__data__,e)>-1}var _listCacheHas=listCacheHas;function listCacheSet(e,t){var r=this.__data__,n=_assocIndexOf(r,e);if(n<0){++this.size;r.push([e,t])}else{r[n][1]=t}return this}var _listCacheSet=listCacheSet;function ListCache(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}ListCache.prototype.clear=_listCacheClear;ListCache.prototype["delete"]=_listCacheDelete;ListCache.prototype.get=_listCacheGet;ListCache.prototype.has=_listCacheHas;ListCache.prototype.set=_listCacheSet;var _ListCache=ListCache;var Map$1=_getNative(_root,"Map");var _Map=Map$1;function mapCacheClear(){this.size=0;this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}}var _mapCacheClear=mapCacheClear;function isKeyable(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _isKeyable=isKeyable;function getMapData(e,t){var r=e.__data__;return _isKeyable(t)?r[typeof t=="string"?"string":"hash"]:r.map}var _getMapData=getMapData;function mapCacheDelete(e){var t=_getMapData(this,e)["delete"](e);this.size-=t?1:0;return t}var _mapCacheDelete=mapCacheDelete;function mapCacheGet(e){return _getMapData(this,e).get(e)}var _mapCacheGet=mapCacheGet;function mapCacheHas(e){return _getMapData(this,e).has(e)}var _mapCacheHas=mapCacheHas;function mapCacheSet(e,t){var r=_getMapData(this,e),n=r.size;r.set(e,t);this.size+=r.size==n?0:1;return this}var _mapCacheSet=mapCacheSet;function MapCache(e){var t=-1,r=e==null?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}MapCache.prototype.clear=_mapCacheClear;MapCache.prototype["delete"]=_mapCacheDelete;MapCache.prototype.get=_mapCacheGet;MapCache.prototype.has=_mapCacheHas;MapCache.prototype.set=_mapCacheSet;var _MapCache=MapCache;var FUNC_ERROR_TEXT="Expected a function";function memoize(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i)){return s.get(i)}var a=e.apply(this,n);r.cache=s.set(i,a)||s;return a};r.cache=new(memoize.Cache||_MapCache);return r}memoize.Cache=_MapCache;var memoize_1=memoize;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize_1(e,(function(e){if(r.size===MAX_MEMOIZE_SIZE){r.clear()}return e}));var r=t.cache;return t}var _memoizeCapped=memoizeCapped;var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=_memoizeCapped((function(e){var t=[];if(e.charCodeAt(0)===46){t.push("")}e.replace(rePropName,(function(e,r,n,i){t.push(n?i.replace(reEscapeChar,"$1"):r||e)}));return t}));var _stringToPath=stringToPath;function arrayMap(e,t){var r=-1,n=e==null?0:e.length,i=Array(n);while(++r<n){i[r]=t(e[r],r,e)}return i}var _arrayMap=arrayMap;var INFINITY$1=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(e){if(typeof e=="string"){return e}if(isArray_1(e)){return _arrayMap(e,baseToString)+""}if(isSymbol_1(e)){return symbolToString?symbolToString.call(e):""}var t=e+"";return t=="0"&&1/e==-INFINITY$1?"-0":t}var _baseToString=baseToString;function toString$3(e){return e==null?"":_baseToString(e)}var toString_1$4=toString$3;function castPath(e,t){if(isArray_1(e)){return e}return _isKey(e,t)?[e]:_stringToPath(toString_1$4(e))}var _castPath=castPath;var INFINITY=1/0;function toKey(e){if(typeof e=="string"||isSymbol_1(e)){return e}var t=e+"";return t=="0"&&1/e==-INFINITY?"-0":t}var _toKey=toKey;function baseGet(e,t){t=_castPath(t,e);var r=0,n=t.length;while(e!=null&&r<n){e=e[_toKey(t[r++])]}return r&&r==n?e:undefined}var _baseGet=baseGet;function get(e,t,r){var n=e==null?undefined:_baseGet(e,t);return n===undefined?r:n}var get_1=get;class AttributeReference extends AbstractDependencyBranch{constructor(e,t,r){super(e,r);this.fullPath=t.getAttribute("ref");const n=this.fullPath.indexOf(".");this.ref=n>-1?this.fullPath.substring(0,n):this.fullPath}resolveValue(e){return Promise.resolve(undefined)}}class Attribute$4{constructor(e,t,r){this.tokenScript=e;this.attributeDef=t;this.localAttrContext=r;this.scopeValues={};this.dependsOnTokenId=undefined;this.resolveLocks={}}getName(){return this.attributeDef.getAttribute("name")}getLabel(){var e;if(!this.label)this.label=new Label(this.attributeDef);return(e=this.label.getValue())!==null&&e!==void 0?e:this.getName()}getOrigins(){return this.attributeDef.getElementsByTagName("ts:origins")[0].children}async getValue(e=false,t=false,r=false,n=this.tokenScript.getCurrentTokenContext()){const i=this.getValueScopeId(n);let s;if(this.getScopedValue(i)===undefined){const e=this.getOrigins();const a=e[0];this.asType=a.getAttribute("as");if(t&&a.tagName!=="ts:user-entry"){s=this.getScopedValue(i)}else{if(a.tagName==="ts:user-entry"){s=this.tokenScript.getViewController().getUserEntryValue(this.getName(),i)}else{if(!r){if(!this.resolveLocks[i]){this.resolveLocks[i]=new Promise(((e,t)=>{this.resolveAttributeValue(a,i,n).then((t=>{e(t);delete this.resolveLocks[i]})).catch((e=>{t(e)}))}))}s=await this.resolveLocks[i]}else{s=await this.resolveAttributeValue(a,i,n)}}}}else{s=this.getScopedValue(i)}if(e&&s===undefined)throw new Error("Could not resolve attribute "+this.getName());if(s===undefined)return s;return this.transformValue(s)}async getCurrentValue(e=this.tokenScript.getCurrentTokenContext()){return this.getValue(false,true,false,e)}async transformValue(e){if(!this.asType)return e;switch(this.asType){case"bool":if(typeof e==="boolean")break;return Boolean(e);case"e2":case"e4":case"e6":case"e8":case"e18":return EthUtils.calculateIntValue(e,parseInt(this.asType.substring(1)))}return e}async getJsonSafeValue(e){const t=await this.getValue(false,false,e);return EthUtils.bigIntsToString(t)}async resolveAttributeValue(e,t,r){var n,i;let s;switch(e.tagName){case"ethereum:call":case"ethereum:event":console.log("Resolving attribute: "+this.getName()+" for token context "+(r===null||r===void 0?void 0:r.selectedTokenId));const t=e.getAttribute("contract");const a=this.tokenScript.getContractByName(t);const o=await this.tokenScript.getEngine().getWalletAdapter();const f=(n=r===null||r===void 0?void 0:r.chainId)!==null&&n!==void 0?n:await o.getChain();const c=a.getAddressByChain(f,true);if(e.tagName==="ethereum:call"){const n=e.getAttribute("function");let i=EthUtils.tokenScriptOutputToEthers(this.asType);let f;if(i==="abi"){const e=a.getAbi("function",n);if(!e.length){throw new Error("'as' XML attribute specifies abi but the abi for "+t+":"+n+" is not defined")}f=e[0].outputs}else{f=[i]}const u=new Arguments(this.tokenScript,e,this.localAttrContext).getArguments();const l=[];for(let e in u){l.push(await u[e].getEthersArgument(r,e.toString()))}s=await o.call(c.chain,c.address,n,l,f);if(i==="abi")s=EthUtils.convertFunctionResult(s);console.log("Call result: ",s)}else{const t=e.getAttribute("filter");const n=e.getAttribute("type");const i=e.getAttribute("select");const a=this.tokenScript.getAsnModuleDefinition(n);if(!a)throw new Error("Could not find ASN module with name ");const u=[];const l=a.querySelector("type sequence");const h=new FilterQuery(this.tokenScript,t,this.localAttrContext);for(let e of l.children){const t=e.getAttribute("name");const n=e.getAttribute("ethereum:type");u.push({name:t,type:n,internalType:n,indexed:e.getAttribute("ethereum:indexed"),value:h.has(t)?await h.getValue(t,r):null})}const d=await o.getEvents(f,c.address,n,u);if(d.length===0)break;s=d[0].args[i];console.log("Event result: ",s)}break;case"ts:data":const u=e.children;if(u.length>1){throw new Error("Attribute ts:data origin does not support more than one element")}if(e.hasAttribute("ref")){const t=e.getAttribute("ref");const n=(i=t.match(/\.|\[/))===null||i===void 0?void 0:i[0];const a=n?t.split(n)[0]:t;let o=n?t.substring(t.indexOf(n)):"";if(o.length&&o.charAt(0)===".")o=o.substring(1);console.log("Resolving attribute data reference, attribute:",a," path:",o);const f=this.tokenScript.getAttributes().getAttribute(a);const c=await f.getValue(true,false,false,r);s=o?get_1(c,o):c}else{s=u[0].textContent}break;default:throw new Error("Attribute origin type "+e.tagName+" is not implemented")}if(s instanceof Object&&s._isBigNumber){s=BigInt(s)}this.setScopedValue(s,t);return s}getScopedValue(e){var t;return(t=this.scopeValues)===null||t===void 0?void 0:t[e]}setScopedValue(e,t){this.scopeValues[t]=e}getValueScopeId(e){let t="-1";if(this.getDependsOnTokenIdOrIsUserEntry()){if(e===null||e===void 0?void 0:e.selectedTokenId)t=e.selectedTokenId}return t}getDependsOnTokenIdOrIsUserEntry(){if(this.isUserEntry())return true;if(this.dependsOnTokenId===undefined){const e=[];for(const t of this.tokenScript.getAttributes()){if(t.isUserEntry())e.push(t.getName())}this.dependsOnTokenId=this.isDependentOn(["tokenId",...e])}return this.dependsOnTokenId}isUserEntry(){const e=this.getOrigins();const t=e[0];return t.tagName==="ts:user-entry"}invalidate(e){if(e){if(!this.invalidateDependencies(e)){if(e.indexOf(this.getName())>-1)return false;console.log("Attribute '"+this.getName()+"' is not dependent on '"+JSON.stringify(e)+"', skipping invalidation");return false}}console.log("Invalidating attribute: "+this.getName());this.resolveLocks={};this.scopeValues={};return true}isDependentOn(e){const t=this.getDependencies();if(t===false)return false;for(let r of t){if(r.isDependentOn(e))return true}return e.indexOf(this.getName())>-1}invalidateDependencies(e){const t=this.getDependencies();if(t===false)return false;let r=false;for(let n of t){r=n.invalidateDependencies(e)}return r}getDependencies(){const e=this.getOrigins();const t=e[0];if(Attribute$4.NO_DEPENDENCY_ORIGINS.indexOf(t.tagName)>-1)return false;let r=[];if(t.tagName==="ethereum:call"){r=new Arguments(this.tokenScript,t,this.localAttrContext).getArguments()}else if(t.tagName==="ethereum:event"){const e=t.getAttribute("filter");r=new FilterQuery(this.tokenScript,e,this.localAttrContext).getDynamicFilterValues()}else if(t.tagName==="ts:data"&&t.getAttribute("ref")){r=[new AttributeReference(this.tokenScript,t,this.localAttrContext)]}else{return false}return r}}Attribute$4.NO_DEPENDENCY_ORIGINS=["ts:user-entry"];class Attributes$2{constructor(e,t,r=false){this.tokenScript=e;this.parentElem=t;this.isCardContext=r}getAttributes(){if(!this.attributes){this.attributes={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:attribute"));if(e.length>0){for(let t in e){const r=new Attribute$4(this.tokenScript,e[t],this.isCardContext?this:null);this.attributes[r.getName()]=r}}}return this.attributes}getAttribute(e){if(!this.attributes)this.getAttributes();if(!this.attributes[e])throw new Error("Could not find attribute '"+e+"'");return this.attributes[e]}hasAttribute(e){if(!this.attributes)this.getAttributes();return this.attributes.hasOwnProperty(e)}invalidate(e){for(let t of this){t.invalidate(e)}}[Symbol.iterator](){return Object.values(this.getAttributes()).values()}}class Card{constructor(e,t){this.tokenScript=e;this.cardDef=t;this.tokenViewData=new TokenViewData(this.tokenScript,this)}get label(){var e;if(!this._label)this._label=new Label(this.cardDef);return(e=this._label.getValue())!==null&&e!==void 0?e:"Unnamed Card"}get name(){return this.cardDef.getAttribute("name")}get type(){return this.cardDef.getAttribute("type")}get exclude(){return this.cardDef.getAttribute("exclude")}get origins(){const e=this.cardDef.getAttribute("origins");if(!e)return[];return e.split(" ")}get buttonClass(){return this.cardDef.getAttribute("buttonClass")}get view(){return this.cardDef.getElementsByTagName("ts:view")[0]}get urlFragment(){return this.view.getAttribute("urlFragment")}get uiButton(){return this.view.hasAttribute("uiButton")?this.view.getAttribute("uiButton")==="true":true}get isUrlView(){return this.url}get url(){return this.view.getAttribute("url")}async renderViewHtml(){let e="";e+='<div id="'+this.tokenViewData.getViewDataId()+'" class="token-card"></div>'+'<script type="text/javascript">'+await this.tokenViewData.getTokenJavascript()+"<\/script>";const t=this.view.children;for(let r=0;r<t.length;r++){const n=t[r];if(n.nodeName=="#text")continue;if(n.nodeName==="ts:viewContent"){const t=n.getAttribute("name");const r=this.tokenScript.getViewContent(t);if(!r){console.error("Could not find viewContent element with "+t);continue}for(let t=0;t<r.length;t++){e=this.processTags(r[t],e)}continue}e=this.processTags(n,e)}return`\n\t\t\t<!DOCTYPE html>\n\t\t\t\t<html lang="en">\n\t\t\t\t<head>\n\t\t\t\t\t<title>TokenScript</title>\n\t\t\t\t\t<meta http-equiv="content-type" content="text/html; charset=utf-8" />\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t${e}\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t`}processTags(e,t){if(e.localName=="script"){let r;if(e.innerHTML.indexOf("<![CDATA[")===-1){const t=document.createElement("textarea");t.innerHTML=e.innerHTML;r=t.value}else{r=e.innerHTML}t+="<script "+(e.getAttribute("type")==="module"?'type="module" crossorigin=""':"text/javascript")+">"+r+"<\/script>"}else if(e.localName==="style"){t+="<style>"+e.innerHTML+"</style>"}else{if(e.outerHTML)t+=e.outerHTML}return t}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this.tokenScript,this.cardDef,true)}return this.attributes}async isEnabledOrReason(e){if(!e)e=this.tokenScript.getCurrentTokenContext();if(!this.isAvailableForOrigin(e.originId))return false;if(!this.exclude)return true;const t=this.tokenScript.getSelections().getSelection(this.exclude);if(await t.isInSelection(e)){return t.getLabel()}return true}isAvailableForOrigin(e){return this.origins.length===0||this.origins.indexOf(e)>-1}getTransaction(){if(!this.transaction){const e=this.cardDef.getElementsByTagName("ts:transaction");if(e.length>0)this.transaction=new Transaction(this.tokenScript,e[0],this.getAttributes())}return this.transaction}async executeTransaction(e,t=true,r=true){var n;const i=this.getTransaction();await this.tokenScript.executeTransaction(i,e,t);this.getAttributes().invalidate();this.tokenScript.getAttributes().invalidate();await new Promise((e=>setTimeout(e,3e3)));const s=await this.tokenScript.getTokenMetadata(true,true);if(!this.tokenScript.hasViewBinding())return;const a=this.tokenScript.getCurrentTokenContext();if(((n=s[a.originId])===null||n===void 0?void 0:n[a.selectedTokenIndex])&&await this.isEnabledOrReason(a)){if(r)await this.tokenScript.getViewController().updateCardData()}else{await this.tokenScript.getViewController().unloadTokenCard()}}async signPersonalMessage(e,t){try{let r=await this.tokenScript.getEngine().signPersonalMessage(t);if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:null,result:r},e)}catch(t){console.error(t);if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:t.message,result:null},e)}}async rpcProxy(e){try{let t=await(await this.tokenScript.getEngine().getWalletAdapter()).rpcProxy(e);if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchRpcResult({jsonrpc:"2.0",id:e.id,result:t})}catch(t){console.error(t);if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchRpcResult({jsonrpc:"2.0",id:e.id,error:t.valueOf()})}}}class Contract{constructor(e){this.contractDef=e;this.addresses={};this.abi=[];this.name=e.getAttribute("name");this.interface=e.getAttribute("interface");let t=e.getElementsByTagName("ts:address");for(let e in t){if(!t.hasOwnProperty(e))continue;const r=parseInt(t[e].getAttribute("network"));this.addresses[r]={address:t[e].innerHTML,chain:r}}const r=e.getElementsByTagName("ts:abi");if(r.length){try{this.abi=JSON.parse(r[0].innerHTML)}catch(e){console.warn("Failed to parse contract ABI",e)}}}getName(){return this.name}getInterface(){return this.interface}getAddresses(){return this.addresses}getAbi(e,t){if(!e&&!t)return this.abi;let r=this.abi;if(e)r=r.filter((t=>e===t.type));if(t)r=r.filter((e=>t===e.name));return r}getFirstAddress(){const e=Object.keys(this.addresses);if(e.length===0)throw new Error("Contract does not have any addresses");return this.addresses[e[0]]}getAddressByChain(e,t=false){if(!this.addresses[e]){if(t){if(Object.keys(this.addresses).length===0)throw new Error("Contract does not have any addresses");return this.getFirstAddress()}throw new Error("Contract does not have an address with chain ID "+e)}return this.addresses[e]}}const ELEMENT="element";const ATTRIBUTE="attribute";const CONTENT="content";const MAX=1e9;function assign$1$1(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function XmlElement(e){return t=>{const r=t;r.localName=e.localName||r.name;r.namespaceURI=e.namespaceURI||r.namespaceURI||null;r.prefix=e.prefix||r.prefix||null;r.parser=e.parser||r.parser;if(r.target!==r){r.items=assign$1$1({},r.items)}r.target=t}}function XmlChildElement(e={}){return(t,r)=>{const n=t.constructor;const i=r;if(!n.items){n.items={}}if(n.target!==n){n.items=assign$1$1({},n.items)}n.target=t;if(e.parser){n.items[i]={parser:e.parser,required:e.required||false,maxOccurs:e.maxOccurs||MAX,minOccurs:e.minOccurs===void 0?0:e.minOccurs,noRoot:e.noRoot||false}}else{n.items[i]={namespaceURI:e.namespaceURI||null,required:e.required||false,prefix:e.prefix||null,defaultValue:e.defaultValue,converter:e.converter,noRoot:e.noRoot||false}}e.localName=e.localName||e.parser&&e.parser.localName||i;n.items[i].namespaceURI=e.namespaceURI||e.parser&&e.parser.namespaceURI||null;n.items[i].prefix=e.prefix||e.parser&&e.parser.prefix||null;n.items[i].localName=e.localName;n.items[i].type=ELEMENT;defineProperty$1(t,i,e)}}function XmlAttribute(e={required:false,namespaceURI:null}){return(t,r)=>{const n=t.constructor;const i=r;if(!e.localName){e.localName=r}if(!n.items){n.items={}}if(n.target!==n){n.items=assign$1$1({},n.items)}n.target=t;n.items[r]=e;n.items[r].type=ATTRIBUTE;defineProperty$1(t,i,e)}}function defineProperty$1(e,t,r){const n=`_${t}`;const i={set:function(e){if(this[n]!==e){this.element=null;this[n]=e}},get:function(){if(this[n]===void 0){let e=r.defaultValue;if(r.parser){e=new r.parser;e.localName=r.localName}this[n]=e}return this[n]}};Object.defineProperty(e,n,{writable:true,enumerable:false});Object.defineProperty(e,t,i)}class Collection{constructor(e){this.items=new Array;if(e){this.items=e}}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e)}Pop(){return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e))}Clear(){this.items=new Array}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}}function printf(e,...t){let r=e;const n=/[^%](%\d+)/g;let i=null;const s=[];while(i=n.exec(r)){s.push({arg:i[1],index:i.index})}for(let e=s.length-1;e>=0;e--){const t=s[e];const n=t.arg.substring(1);const i=t.index+1;r=r.substring(0,i)+arguments[+n]+r.substring(i+1+n.length)}r=r.replace("%%","%");return r}function padNum(e,t){let r=e+"";while(r.length<t){r="0"+r}return r}class XmlError{constructor(e,...t){this.prefix="XMLJS";this.code=e;this.name=this.constructor.name;arguments[0]=xes[e];const r=printf.apply(this,arguments);this.message=`${this.prefix}${padNum(e,4)}: ${r}`;this.stack=new Error(this.message).stack}}var XE;(function(e){e[e["NONE"]=0]="NONE";e[e["NULL_REFERENCE"]=1]="NULL_REFERENCE";e[e["NULL_PARAM"]=2]="NULL_PARAM";e[e["DECORATOR_NULL_PARAM"]=3]="DECORATOR_NULL_PARAM";e[e["COLLECTION_LIMIT"]=4]="COLLECTION_LIMIT";e[e["METHOD_NOT_IMPLEMENTED"]=5]="METHOD_NOT_IMPLEMENTED";e[e["METHOD_NOT_SUPPORTED"]=6]="METHOD_NOT_SUPPORTED";e[e["PARAM_REQUIRED"]=7]="PARAM_REQUIRED";e[e["CONVERTER_UNSUPPORTED"]=8]="CONVERTER_UNSUPPORTED";e[e["ELEMENT_MALFORMED"]=9]="ELEMENT_MALFORMED";e[e["ELEMENT_MISSING"]=10]="ELEMENT_MISSING";e[e["ATTRIBUTE_MISSING"]=11]="ATTRIBUTE_MISSING";e[e["CONTENT_MISSING"]=12]="CONTENT_MISSING";e[e["CRYPTOGRAPHIC"]=13]="CRYPTOGRAPHIC";e[e["CRYPTOGRAPHIC_NO_MODULE"]=14]="CRYPTOGRAPHIC_NO_MODULE";e[e["CRYPTOGRAPHIC_UNKNOWN_TRANSFORM"]=15]="CRYPTOGRAPHIC_UNKNOWN_TRANSFORM";e[e["ALGORITHM_NOT_SUPPORTED"]=16]="ALGORITHM_NOT_SUPPORTED";e[e["ALGORITHM_WRONG_NAME"]=17]="ALGORITHM_WRONG_NAME";e[e["XML_EXCEPTION"]=18]="XML_EXCEPTION"})(XE||(XE={}));const xes={};xes[XE.NONE]="No description";xes[XE.NULL_REFERENCE]="Null reference";xes[XE.NULL_PARAM]="'%1' has empty '%2' object";xes[XE.DECORATOR_NULL_PARAM]="Decorator '%1' has empty '%2' parameter";xes[XE.COLLECTION_LIMIT]="Collection of '%1' in element '%2' has wrong amount of items";xes[XE.METHOD_NOT_IMPLEMENTED]="Method is not implemented";xes[XE.METHOD_NOT_SUPPORTED]="Method is not supported";xes[XE.PARAM_REQUIRED]="Required parameter is missing '%1'";xes[XE.CONVERTER_UNSUPPORTED]="Converter is not supported";xes[XE.ELEMENT_MALFORMED]="Malformed element '%1'";xes[XE.ELEMENT_MISSING]="Element '%1' is missing in '%2'";xes[XE.ATTRIBUTE_MISSING]="Attribute '%1' is missing in '%2'";xes[XE.CONTENT_MISSING]="Content is missing in '%1'";xes[XE.CRYPTOGRAPHIC]="Cryptographic error: %1";xes[XE.CRYPTOGRAPHIC_NO_MODULE]="WebCrypto module is not found";xes[XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM]="Unknown transform %1";xes[XE.ALGORITHM_NOT_SUPPORTED]="Algorithm is not supported '%1'";xes[XE.ALGORITHM_WRONG_NAME]="Algorithm wrong name in use '%1'";xes[XE.XML_EXCEPTION]="XML exception: %1";class Convert{static ToString(e,t="utf8"){const r=new Uint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromString(e,t="utf8"){switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static ToBase64(e){if(typeof btoa!=="undefined"){const t=this.ToString(e,"binary");return btoa(t)}else if(typeof Buffer!=="undefined"){return Buffer.from(e).toString("base64")}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64(e){e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,"");if(typeof atob!=="undefined"){return this.FromBinary(atob(e))}else if(typeof Buffer!=="undefined"){return new Uint8Array(Buffer.from(e,"base64"))}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64Url(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r}static ToUtf8String(e){const t=String.fromCharCode.apply(null,e);const r=decodeURIComponent(escape(t));return r}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r}static ToBinary(e){let t="";for(let r=0;r<e.length;r++){t=t+String.fromCharCode(e[r])}return t}static ToHex(e){const t="";const r=[];for(let t=0;t<e.length;t++){const n=e[t].toString(16);r.push(n.length===1?"0"+n:n)}return r.join(t)}static FromHex(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r=r+2){const n=e.slice(r,r+2);t[r/2]=parseInt(n,16)}return t}static ToDateTime(e){return new Date(e)}static FromDateTime(e){const t=e.toISOString();return t}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}}const APPLICATION_XML="application/xml";var XmlNodeType;(function(e){e[e["None"]=0]="None";e[e["Element"]=1]="Element";e[e["Attribute"]=2]="Attribute";e[e["Text"]=3]="Text";e[e["CDATA"]=4]="CDATA";e[e["EntityReference"]=5]="EntityReference";e[e["Entity"]=6]="Entity";e[e["ProcessingInstruction"]=7]="ProcessingInstruction";e[e["Comment"]=8]="Comment";e[e["Document"]=9]="Document";e[e["DocumentType"]=10]="DocumentType";e[e["DocumentFragment"]=11]="DocumentFragment";e[e["Notation"]=12]="Notation";e[e["Whitespace"]=13]="Whitespace";e[e["SignificantWhitespace"]=14]="SignificantWhitespace";e[e["EndElement"]=15]="EndElement";e[e["EndEntity"]=16]="EndEntity";e[e["XmlDeclaration"]=17]="XmlDeclaration"})(XmlNodeType||(XmlNodeType={}));let xpath=(e,t)=>{throw new Error("Not implemented")};let sWindow;if(typeof self==="undefined"){sWindow=global;const e=require("@xmldom/xmldom");xpath=require("xpath.js");sWindow.XMLSerializer=e.XMLSerializer;sWindow.DOMParser=e.DOMParser;sWindow.DOMImplementation=e.DOMImplementation;sWindow.document=(new DOMImplementation).createDocument("http://www.w3.org/1999/xhtml","html",null)}else{sWindow=self}function SelectNodesEx(e,t){const r=e.ownerDocument==null?e:e.ownerDocument;const n=document.createNSResolver(e.ownerDocument==null?e.documentElement:e.ownerDocument.documentElement);const i=r.evaluate(t,e,n,XPathResult.ANY_TYPE,null);const s=[];let a;while(a=i.iterateNext()){s.push(a)}return s}const Select=typeof self!=="undefined"?SelectNodesEx:xpath;function Parse(e){e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return(new DOMParser).parseFromString(e,APPLICATION_XML)}function SelectSingleNode(e,t){const r=Select(e,t);if(r&&r.length>0){return r[0]}return null}function _SelectNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&!t[e.prefix||""]){t[e.prefix?e.prefix:""]=e.namespaceURI}for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(n&&n.nodeType===XmlNodeType.Element){_SelectNamespaces(n,t)}}}}function SelectNamespaces(e){const t={};_SelectNamespaces(e,t);return t}function assign$2(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function isNodeType(e,t){return e&&e.nodeType===t}function isElement(e){return isNodeType(e,XmlNodeType.Element)}function isDocument(e){return isNodeType(e,XmlNodeType.Document)}const XmlBase64Converter={get:e=>{if(e){return Convert.ToBase64(e)}return void 0},set:e=>Convert.FromBase64(e)};const XmlNumberConverter={get:e=>{if(e){return e.toString()}return"0"},set:e=>Number(e)};const DEFAULT_ROOT_NAME="xml_root";class XmlObject{constructor(e={}){this.prefix=this.GetStatic().prefix||null;this.localName=this.GetStatic().localName;this.namespaceURI=this.GetStatic().namespaceURI;if(e){for(const[t,r]of Object.entries(e)){if(r!==undefined){this[t]=r}}}}static LoadXml(e){const t=new this;t.LoadXml(e);return t}static GetElement(e,t,r=true){const n=e.getElementsByTagName(t);if(r&&n.length===0){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return n[0]||null}static GetAttribute(e,t,r,n=true){if(e.hasAttribute(t)){return e.getAttribute(t)}else{if(n){throw new XmlError(XE.ATTRIBUTE_MISSING,t,e.localName)}return r}}static GetElementById(e,t){if(e==null||t==null){return null}let r=null;if(isDocument(e)){r=e.getElementById(t)}if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='Id']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='ID']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='id']='${t}']`)}}}return r}static CreateDocument(e=DEFAULT_ROOT_NAME,t=null,r=null){let n="";let i="";let s="";if(r){n=r+":";i=":"+r}if(t){s=` xmlns${i}="${t}"`}const a=`${n}${e}`;const o=(new DOMParser).parseFromString(`<${a}${s}></${a}>`,APPLICATION_XML);return o}static GetChildren(e,t,r){e=isDocument(e)?e.documentElement:e;const n=[];for(let i=0;i<e.childNodes.length;i++){const s=e.childNodes[i];if(isElement(s)&&s.localName===t&&(s.namespaceURI===r||!r)){n.push(s)}}return n}static GetFirstChild(e,t,r){e=isDocument(e)?e.documentElement:e;for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(isElement(i)&&i.localName===t&&(i.namespaceURI===r||!r)){return i}}return null}static GetChild(e,t,r,n=true){for(let n=0;n<e.childNodes.length;n++){const i=e.childNodes[n];if(isElement(i)&&i.localName===t&&(i.namespaceURI===r||!r)){return i}}if(n){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return null}get Element(){return this.element}get Prefix(){return this.prefix}set Prefix(e){this.prefix=e}get LocalName(){return this.localName}get NamespaceURI(){return this.namespaceURI||null}HasChanged(){const e=this.GetStatic();if(e.items){for(const t in e.items){if(!e.items.hasOwnProperty(t)){continue}const r=e.items[t];const n=this[t];if(r.parser&&n&&n.HasChanged()){return true}}}return this.element===null}GetXml(e){if(!(e||this.HasChanged())){return this.element||null}const t=this;const r=this.CreateDocument();const n=this.CreateElement();const i=this.GetStatic();const s=this.localName;if(i.items){for(const e in i.items){if(!i.items.hasOwnProperty(e)){continue}const a=t[e];const o=i.items[e];switch(o.type){case CONTENT:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.CONTENT_MISSING,s)}if(e.defaultValue!==a||e.required){n.textContent=t}break}case ATTRIBUTE:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.ATTRIBUTE_MISSING,e.localName,s)}if(e.defaultValue!==a||e.required){if(!e.namespaceURI){n.setAttribute(e.localName,t)}else{n.setAttributeNS(e.namespaceURI,e.localName,t)}}break}case ELEMENT:{const e=o;let t=null;if(e.parser){if(e.required&&!a||e.minOccurs&&!a.Count){throw new XmlError(XE.ELEMENT_MISSING,a.localName,s)}if(a){t=a.GetXml(a.element===void 0&&(e.required||a.Count))}}else{const n=e.converter?e.converter.get(a):a;if(e.required&&n===void 0){throw new XmlError(XE.ELEMENT_MISSING,e.localName,s)}if(a!==e.defaultValue||e.required){if(!e.namespaceURI){t=r.createElement(`${e.prefix?e.prefix+":":""}${e.localName}`)}else{t=r.createElementNS(e.namespaceURI,`${e.prefix?e.prefix+":":""}${e.localName}`)}if(Array.isArray(n)){for(const e of n){const r=e instanceof XmlObject?e.GetXml(true):e;if(r!==null){t.appendChild(r)}}}else if(n instanceof XmlObject){t.appendChild(n.GetXml(true))}else{t.textContent=n}}}if(t){if(e.noRoot){const r=[];for(let e=0;e<t.childNodes.length;e++){const n=t.childNodes.item(e);if(isElement(n)){r.push(n)}}if(r.length<e.minOccurs||r.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,i.localName)}r.forEach((e=>n.appendChild(e.cloneNode(true))))}else if(t.childNodes.length<e.minOccurs||t.childNodes.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,i.localName)}else{n.appendChild(t)}}break}}}}this.OnGetXml(n);this.element=n;return n}LoadXml(e){let t;const r=this;if(typeof e==="string"){const r=Parse(e);t=r.documentElement}else{t=e}if(!t){throw new XmlError(XE.PARAM_REQUIRED,"element")}const n=this.GetStatic();const i=this.localName;if(!(t.localName===i&&t.namespaceURI==this.NamespaceURI)){throw new XmlError(XE.ELEMENT_MALFORMED,i)}if(n.items){for(const e in n.items){if(!n.items.hasOwnProperty(e)){continue}const s=n.items[e];switch(s.type){case CONTENT:{const n=s;if(n.required&&!t.textContent){throw new XmlError(XE.CONTENT_MISSING,i)}if(!t.textContent){r[e]=n.defaultValue}else{const i=n.converter?n.converter.set(t.textContent):t.textContent;r[e]=i}break}case ATTRIBUTE:{const n=s;let a;let o;if(!n.localName){throw new XmlError(XE.PARAM_REQUIRED,"localName")}if(n.namespaceURI){a=t.hasAttributeNS.bind(t,n.namespaceURI,n.localName);o=t.getAttributeNS.bind(t,n.namespaceURI,n.localName)}else{a=t.hasAttribute.bind(t,n.localName);o=t.getAttribute.bind(t,n.localName)}if(n.required&&!a()){throw new XmlError(XE.ATTRIBUTE_MISSING,n.localName,i)}if(!a()){r[e]=n.defaultValue}else{const t=n.converter?n.converter.set(o()):o();r[e]=t}break}case ELEMENT:{const n=s;if(n.noRoot){if(!n.parser){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${n.localName}' with flag noRoot must have 'parser'`)}const s=new n.parser;if(!(s instanceof XmlCollection)){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${n.localName}' with flag noRoot must have 'parser' like instance of XmlCollection`)}s.OnLoadXml(t);delete s.element;if(s.Count<n.minOccurs||s.Count>n.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,n.parser.localName,i)}r[e]=s;continue}let a=null;for(let e=0;e<t.childNodes.length;e++){const r=t.childNodes.item(e);if(!isElement(r)){continue}const i=r;if(i.localName===n.localName&&i.namespaceURI==n.namespaceURI){a=i;break}}if(n.required&&!a){throw new XmlError(XE.ELEMENT_MISSING,n.parser?n.parser.localName:n.localName,i)}if(!n.parser){if(!a){r[e]=n.defaultValue}else{const t=n.converter?n.converter.set(a.textContent):a.textContent;r[e]=t}}else{if(a){const t=new n.parser;t.localName=n.localName;t.namespaceURI=n.namespaceURI;r[e]=t;t.LoadXml(a)}}break}}}}this.OnLoadXml(t);this.prefix=t.prefix||"";this.element=t}toString(){const e=this.GetXml();return e?(new XMLSerializer).serializeToString(e):""}GetElement(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetElement(this.element,e,t)}GetChildren(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChildren(this.element,e,t||this.NamespaceURI||undefined)}GetChild(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChild(this.element,e,this.NamespaceURI||undefined,t)}GetFirstChild(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetFirstChild(this.element,e,t)}GetAttribute(e,t,r=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetAttribute(this.element,e,t,r)}IsEmpty(){return this.Element===void 0}OnLoadXml(e){}GetStatic(){return this.constructor}GetPrefix(){return this.Prefix?this.prefix+":":""}OnGetXml(e){}CreateElement(e,t,r=null,n=null){if(!e){e=this.CreateDocument()}t=t||this.localName;r=r||this.NamespaceURI;n=n||this.prefix;const i=(n?`${n}:`:"")+t;const s=r?e.createElementNS(r,i):e.createElement(i);e.importNode(s,true);return s}CreateDocument(){return XmlObject.CreateDocument(this.localName,this.NamespaceURI,this.Prefix)}}class XmlCollection extends XmlObject{constructor(){super(...arguments);this.MaxOccurs=Number.MAX_VALUE;this.MinOccurs=0;this.items=[]}HasChanged(){const e=super.HasChanged();const t=this.Some((e=>e.HasChanged()));return e||t}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e);this.element=null}Pop(){this.element=null;return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e));this.element=null}Clear(){this.items=new Array;this.element=null}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}OnGetXml(e){for(const t of this.GetIterator()){const r=t.GetXml();if(r){e.appendChild(r)}}}OnLoadXml(e){const t=this.GetStatic();if(!t.parser){throw new XmlError(XE.XML_EXCEPTION,`${t.localName} doesn't have required 'parser' in @XmlElement`)}for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(!(isElement(n)&&n.localName===t.parser.localName&&n.namespaceURI==t.namespaceURI)){continue}const i=n;const s=new t.parser;s.LoadXml(i);this.Add(s)}}}class NamespaceManager extends Collection{Add(e){e.prefix=e.prefix||"";e.namespace=e.namespace||"";super.Add(e)}GetPrefix(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.prefix===e){return t}}return null}GetNamespace(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.namespace===e){return t}}return null}}var build$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="[object ArrayBuffer]";class n{static isArrayBuffer(e){return Object.prototype.toString.call(e)===r}static toArrayBuffer(e){if(this.isArrayBuffer(e)){return e}if(e.byteLength===e.buffer.byteLength){return e.buffer}return this.toUint8Array(e).slice().buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t){return e}if(this.isArrayBuffer(e)){return new t(e)}if(this.isArrayBufferView(e)){return new t(e.buffer,e.byteOffset,e.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=n.toUint8Array(e);const i=n.toUint8Array(t);if(r.length!==i.byteLength){return false}for(let e=0;e<r.length;e++){if(r[e]!==i[e]){return false}}return true}static concat(...e){if(Array.isArray(e[0])){const t=e[0];let r=0;for(const e of t){r+=e.byteLength}const n=new Uint8Array(r);let i=0;for(const e of t){const t=this.toUint8Array(e);n.set(t,i);i+=t.length}if(e[1]){return this.toView(n,e[1])}return n.buffer}else{return this.concat(e)}}}class i{static fromString(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r.buffer}static toString(e){const t=n.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}const i=decodeURIComponent(escape(r));return i}}class s{static toString(e,t=false){const r=n.toArrayBuffer(e);const i=new DataView(r);let s="";for(let e=0;e<r.byteLength;e+=2){const r=i.getUint16(e,t);s+=String.fromCharCode(r)}return s}static fromString(e,t=false){const r=new ArrayBuffer(e.length*2);const n=new DataView(r);for(let r=0;r<e.length;r++){n.setUint16(r*2,e.charCodeAt(r),t)}return r}}class a{static isHex(e){return typeof e==="string"&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return typeof e==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return typeof e==="string"&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,t="utf8"){const r=n.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return s.toString(r,true);case"utf16":case"utf16be":return s.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e){return new ArrayBuffer(0)}switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return s.fromString(e,true);case"utf16":case"utf16be":return s.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=n.toUint8Array(e);if(typeof btoa!=="undefined"){const e=this.ToString(t,"binary");return btoa(e)}else{return Buffer.from(t).toString("base64")}}static FromBase64(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isBase64(t)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(t))}else{return new Uint8Array(Buffer.from(t,"base64")).buffer}}static FromBase64Url(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isBase64Url(t)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=a.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return i.fromString(e);case"utf16":case"utf16be":return s.fromString(e);case"utf16le":case"usc2":return s.fromString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=a.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return i.toString(e);case"utf16":case"utf16be":return s.toString(e);case"utf16le":case"usc2":return s.toString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let n=0;n<t;n++){r[n]=e.charCodeAt(n)}return r.buffer}static ToBinary(e){const t=n.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r}static ToHex(e){const t=n.toUint8Array(e);const r="";const i=[];const s=t.length;for(let e=0;e<s;e++){const r=t[e].toString(16).padStart(2,"0");i.push(r)}return i.join(r)}static FromHex(e){let t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isHex(t)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(t.length%2){t=`0${t}`}const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e=e+2){const n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=false){return s.toString(e,t)}static FromUtf16String(e,t=false){return s.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}static formatString(e){return(e===null||e===void 0?void 0:e.replace(/[\n\r\t ]/g,""))||""}}a.DEFAULT_UTF8_ENCODING="utf8";function o(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){r[e]=t[e]}}return r}function f(...e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t));const r=new Uint8Array(t);let n=0;e.map((e=>new Uint8Array(e))).forEach((e=>{for(const t of e){r[n++]=t}}));return r.buffer}function c(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}t.BufferSourceConverter=n;t.Convert=a;t.assign=o;t.combine=f;t.isEqual=c}));
/*!
 Copyright (c) Peculiar Ventures, LLC
*/function getParametersValue(e,t,r){var n;if(e instanceof Object===false){return r}return(n=e[t])!==null&&n!==void 0?n:r}function bufferToHexCodes(e,t=0,r=e.byteLength-t,n=false){let i="";for(const s of new Uint8Array(e,t,r)){const e=s.toString(16).toUpperCase();if(e.length===1){i+="0"}i+=e;if(n){i+=" "}}return i.trim()}function utilFromBase(e,t){let r=0;if(e.length===1){return e[0]}for(let n=e.length-1;n>=0;n--){r+=e[e.length-1-n]*Math.pow(2,t*n)}return r}function utilToBase(e,t,r=-1){const n=r;let i=e;let s=0;let a=Math.pow(2,t);for(let r=1;r<8;r++){if(e<a){let e;if(n<0){e=new ArrayBuffer(r);s=r}else{if(n<r){return new ArrayBuffer(0)}e=new ArrayBuffer(n);s=n}const a=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);a[s-e-1]=Math.floor(i/r);i-=a[s-e-1]*r}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function utilConcatBuf(...e){let t=0;let r=0;for(const r of e){t+=r.byteLength}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(new Uint8Array(t),r);r+=t.byteLength}return n}function utilConcatView(...e){let t=0;let r=0;for(const r of e){t+=r.length}const n=new ArrayBuffer(t);const i=new Uint8Array(n);for(const t of e){i.set(t,r);r+=t.length}return i}function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=e[0]===255&&e[1]&128;const r=e[0]===0&&(e[1]&128)===0;if(t||r){this.warnings.push("Needlessly long format")}}const t=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++){r[e]=0}r[0]=e[0]&128;const n=utilFromBase(r,8);const i=new ArrayBuffer(this.valueHex.byteLength);const s=new Uint8Array(i);for(let t=0;t<this.valueHex.byteLength;t++){s[t]=e[t]}s[0]&=127;const a=utilFromBase(s,8);return a-n}function utilEncodeTC(e){const t=e<0?e*-1:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=r-t;const i=utilToBase(e,8,n);const s=new Uint8Array(i);s[0]|=128;return i}let i=utilToBase(t,8,n);let s=new Uint8Array(i);if(s[0]&128){const e=i.slice(0);const t=new Uint8Array(e);i=new ArrayBuffer(i.byteLength+1);s=new Uint8Array(i);for(let r=0;r<e.byteLength;r++){s[r+1]=t[r]}s[0]=0}return i}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}function padNumber(e,t){const r=e.toString(10);if(t<r.length){return""}const n=t-r.length;const i=new Array(n);for(let e=0;e<n;e++){i[e]="0"}const s=i.join("");return s.concat(r)}const base64Template="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const base64UrlTemplate="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function toBase64(e,t=false,r=false,n=false){let i=0;let s=0;let a=0;let o="";const f=t?base64UrlTemplate:base64Template;if(n){let t=0;for(let r=0;r<e.length;r++){if(e.charCodeAt(r)!==0){t=r;break}}e=e.slice(t)}while(i<e.length){const t=e.charCodeAt(i++);if(i>=e.length){s=1}const n=e.charCodeAt(i++);if(i>=e.length){a=1}const c=e.charCodeAt(i++);const u=t>>2;const l=(t&3)<<4|n>>4;let h=(n&15)<<2|c>>6;let d=c&63;if(s===1){h=d=64}else{if(a===1){d=64}}if(r){if(h===64){o+=`${f.charAt(u)}${f.charAt(l)}`}else{if(d===64){o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}`}else{o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}${f.charAt(d)}`}}}else{o+=`${f.charAt(u)}${f.charAt(l)}${f.charAt(h)}${f.charAt(d)}`}}return o}function fromBase64(e,t=false,r=false){const n=t?base64UrlTemplate:base64Template;function i(e){for(let t=0;t<64;t++){if(n.charAt(t)===e)return t}return 64}function s(e){return e===64?0:e}let a=0;let o="";while(a<e.length){const t=i(e.charAt(a++));const r=a>=e.length?0:i(e.charAt(a++));const n=a>=e.length?0:i(e.charAt(a++));const f=a>=e.length?0:i(e.charAt(a++));const c=s(t)<<2|s(r)>>4;const u=(s(r)&15)<<4|s(n)>>2;const l=(s(n)&3)<<6|s(f);o+=String.fromCharCode(c);if(n!==64){o+=String.fromCharCode(u)}if(f!==64){o+=String.fromCharCode(l)}}if(r){const e=o.length;let t=-1;for(let r=e-1;r>=0;r--){if(o.charCodeAt(r)!==0){t=r;break}}if(t!==-1){o=o.slice(0,t+1)}else{o=""}}return o}function arrayBufferToString(e){let t="";const r=new Uint8Array(e);for(const e of r){t+=String.fromCharCode(e)}return t}function stringToArrayBuffer(e){const t=e.length;const r=new ArrayBuffer(t);const n=new Uint8Array(r);for(let r=0;r<t;r++){n[r]=e.charCodeAt(r)}return r}const log2=Math.log(2);function nearestPowerOf2(e){const t=Math.log(e)/log2;const r=Math.floor(t);const n=Math.round(t);return r===n?r:n}function clearProps(e,t){for(const r of t){delete e[r]}}
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}function concat$1(e){let t=0;let r=0;for(let r=0;r<e.length;r++){const n=e[r];t+=n.byteLength}const n=new Uint8Array(t);for(let t=0;t<e.length;t++){const i=e[t];n.set(new Uint8Array(i),r);r+=i.byteLength}return n.buffer}function checkBufferParams(e,t,r,n){if(!(t instanceof Uint8Array)){e.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(n<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-n<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat$1(this.items)}}const powers2=[new Uint8Array([1])];const digitsString="0123456789";const NAME$2="name";const VALUE_HEX_VIEW="valueHexView";const IS_HEX_ONLY="isHexOnly";const ID_BLOCK="idBlock";const TAG_CLASS="tagClass";const TAG_NUMBER="tagNumber";const IS_CONSTRUCTED="isConstructed";const FROM_BER="fromBER";const TO_BER="toBER";const LOCAL="local";const EMPTY_STRING$1="";const EMPTY_BUFFER$1=new ArrayBuffer(0);const EMPTY_VIEW=new Uint8Array(0);const END_OF_CONTENT_NAME="EndOfContent";const OCTET_STRING_NAME="OCTET STRING";const BIT_STRING_NAME="BIT STRING";function HexBlock(e){var t;return t=class t extends e{constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=(t=r.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=r.valueHex?build$1.BufferSourceConverter.toUint8Array(r.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,n,t,r)){return-1}const i=t+r;this.valueHexView=n.subarray(t,i);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return t}this.blockLength=r;return i}toBER(e=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return EMPTY_BUFFER$1}if(e){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:build$1.Convert.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class LocalBaseBlock{constructor({blockLength:e=0,error:t=EMPTY_STRING$1,warnings:r=[],valueBeforeDecode:n=EMPTY_VIEW}={}){this.blockLength=e;this.error=t;this.warnings=r;this.valueBeforeDecodeView=build$1.BufferSourceConverter.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:build$1.Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends(HexBlock(LocalBaseBlock)){constructor({idBlock:e={}}={}){var t,r,n,i;super();if(e){this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=e.valueHex?build$1.BufferSourceConverter.toUint8Array(e.valueHex):EMPTY_VIEW;this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(n=e.tagNumber)!==null&&n!==void 0?n:-1;this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(e=false){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:this.error="Unknown tag class";return EMPTY_BUFFER$1}if(this.isConstructed)t|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31;t|=e;r[0]=t}return r.buffer}if(!this.isHexOnly){const r=utilToBase(this.tagNumber,7);const n=new Uint8Array(r);const i=r.byteLength;const s=new Uint8Array(i+1);s[0]=t|31;if(!e){for(let e=0;e<i-1;e++)s[e+1]=n[e]|128;s[i]=n[i-1]}return s.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=t|31;if(!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=e[t]|128;r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}const s=i[0]&192;switch(s){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(i[0]&32)===32;this.isHexOnly=false;const a=i[0]&31;if(a!==31){this.tagNumber=a;this.blockLength=1}else{let e=1;let t=this.valueHexView=new Uint8Array(255);let r=255;while(i[e]&128){t[e-1]=i[e]&127;e++;if(e>=i.length){this.error="End of input reached before message was fully decoded";return-1}if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1;t[e-1]=i[e]&127;const n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];t=this.valueHexView=new Uint8Array(e);t.set(n);if(this.blockLength<=9)this.tagNumber=utilFromBase(t,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,r,n;super();this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:false;this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:false;this.length=(n=e.length)!==null&&n!==void 0?n:0}fromBER(e,t,r){const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);if(i.length===0){this.error="Zero buffer length";return-1}if(i[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=i[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return t+this.blockLength}this.longFormUsed=!!(i[0]&128);if(this.longFormUsed===false){this.length=i[0];this.blockLength=1;return t+this.blockLength}const s=i[0]&127;if(s>8){this.error="Too big integer";return-1}if(s+1>i.length){this.error="End of input reached before message was fully decoded";return-1}const a=t+1;const o=n.subarray(a,a+s);if(o[s-1]===0)this.warnings.push("Needlessly long encoded length");this.length=utilFromBase(o,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=s+1;return t+this.blockLength}toBER(e=false){let t;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=128}return t}if(this.longFormUsed){const n=utilToBase(this.length,8);if(n.byteLength>127){this.error="Too big length";return EMPTY_BUFFER$1}t=new ArrayBuffer(n.byteLength+1);if(e)return t;const i=new Uint8Array(n);r=new Uint8Array(t);r[0]=n.byteLength|128;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=this.length}return t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:e=EMPTY_STRING$1,optional:t=false,primitiveSchema:r,...n}={},i){super(n);this.name=e;this.optional=t;if(r){this.primitiveSchema=r}this.idBlock=new LocalIdentificationBlock(n);this.lenBlock=new LocalLengthBlock(n);this.valueBlock=i?new i(n):new ValueBlock(n)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}toBER(e,t){const r=t||new ViewWriter;if(!t){prepareIndefiniteForm(this)}const n=this.idBlock.toBER(e);r.write(n);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(e,r);r.write(new ArrayBuffer(2))}else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const n=this.lenBlock.toBER(e);r.write(n);r.write(t)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};if(this.primitiveSchema)e.primitiveSchema=this.primitiveSchema.toJSON();return e}toString(e="ascii"){if(e==="ascii"){return this.onAsciiEncoding()}return build$1.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${build$1.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e){return true}if(!(e instanceof this.constructor)){return false}const t=this.toBER();const r=e.toBER();return isEqualBuffer(t,r)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(e){if(e instanceof typeStore.Constructed){for(const t of e.valueBlock.value){if(prepareIndefiniteForm(t)){e.lenBlock.isIndefiniteForm=true}}}return!!e.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:e=EMPTY_STRING$1,...t}={},r){super(t,r);if(e){this.fromString(e)}}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends(HexBlock(ValueBlock)){constructor({isHexOnly:e=true,...t}={}){super(t);this.isHexOnly=e}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock);this.idBlock.isConstructed=false}}_a$w=Primitive;(()=>{typeStore.Primitive=_a$w})();Primitive.NAME="PRIMITIVE";function localChangeType(e,t){if(e instanceof t){return e}const r=new t;r.idBlock=e.idBlock;r.lenBlock=e.lenBlock;r.warnings=e.warnings;r.valueBeforeDecodeView=e.valueBeforeDecodeView;return r}function localFromBER(e,t=0,r=e.length){const n=t;let i=new BaseBlock({},ValueBlock);const s=new LocalBaseBlock;if(!checkBufferParams(s,e,t,r)){i.error=s.error;return{offset:-1,result:i}}const a=e.subarray(t,t+r);if(!a.length){i.error="Zero buffer length";return{offset:-1,result:i}}let o=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length){i.warnings.concat(i.idBlock.warnings)}if(o===-1){i.error=i.idBlock.error;return{offset:-1,result:i}}t=o;r-=i.idBlock.blockLength;o=i.lenBlock.fromBER(e,t,r);if(i.lenBlock.warnings.length){i.warnings.concat(i.lenBlock.warnings)}if(o===-1){i.error=i.lenBlock.error;return{offset:-1,result:i}}t=o;r-=i.lenBlock.blockLength;if(!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm){i.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:i}}let f=BaseBlock;switch(i.idBlock.tagClass){case 1:if(i.idBlock.tagNumber>=37&&i.idBlock.isHexOnly===false){i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:i}}switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0){i.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:i}}f=typeStore.EndOfContent;break;case 1:f=typeStore.Boolean;break;case 2:f=typeStore.Integer;break;case 3:f=typeStore.BitString;break;case 4:f=typeStore.OctetString;break;case 5:f=typeStore.Null;break;case 6:f=typeStore.ObjectIdentifier;break;case 10:f=typeStore.Enumerated;break;case 12:f=typeStore.Utf8String;break;case 13:f=typeStore.RelativeObjectIdentifier;break;case 14:f=typeStore.TIME;break;case 15:i.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:i};case 16:f=typeStore.Sequence;break;case 17:f=typeStore.Set;break;case 18:f=typeStore.NumericString;break;case 19:f=typeStore.PrintableString;break;case 20:f=typeStore.TeletexString;break;case 21:f=typeStore.VideotexString;break;case 22:f=typeStore.IA5String;break;case 23:f=typeStore.UTCTime;break;case 24:f=typeStore.GeneralizedTime;break;case 25:f=typeStore.GraphicString;break;case 26:f=typeStore.VisibleString;break;case 27:f=typeStore.GeneralString;break;case 28:f=typeStore.UniversalString;break;case 29:f=typeStore.CharacterString;break;case 30:f=typeStore.BmpString;break;case 31:f=typeStore.DATE;break;case 32:f=typeStore.TimeOfDay;break;case 33:f=typeStore.DateTime;break;case 34:f=typeStore.Duration;break;default:{const e=i.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;e.idBlock=i.idBlock;e.lenBlock=i.lenBlock;e.warnings=i.warnings;i=e}}break;case 2:case 3:case 4:default:{f=i.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}}i=localChangeType(i,f);o=i.fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length);i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength);return{offset:o,result:i}}function fromBER(e){if(!e.byteLength){const e=new BaseBlock({},ValueBlock);e.error="Input buffer has zero length";return{offset:-1,result:e}}return localFromBER(build$1.BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength)}function checkLen(e,t){if(e){return 1}return t}class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=false,...r}={}){super(r);this.value=e;this.isIndefiniteForm=t}fromBER(e,t,r){const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueBeforeDecodeView=n.subarray(t,t+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return t}let i=t;while(checkLen(this.isIndefiniteForm,r)>0){const e=localFromBER(n,i,r);if(e.offset===-1){this.error=e.result.error;this.warnings.concat(e.result.warnings);return-1}i=e.offset;this.blockLength+=e.result.blockLength;r-=e.result.blockLength;this.value.push(e.result);if(this.isIndefiniteForm&&e.result.constructor.NAME===END_OF_CONTENT_NAME){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return i}toBER(e,t){const r=t||new ViewWriter;for(let t=0;t<this.value.length;t++){this.value[t].toBER(e,r)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value){e.value.push(t.toJSON())}return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock);this.idBlock.isConstructed=true}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(n===-1){this.error=this.valueBlock.error;return n}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return n}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value){e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"))}const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}_a$v=Constructed;(()=>{typeStore.Constructed=_a$v})();Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,r){return t}toBER(e){return EMPTY_BUFFER$1}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}}_a$u=EndOfContent;(()=>{typeStore.EndOfContent=_a$u})();EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(e,t,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(t+r>e.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5;e[1]=0}if(t){t.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;(()=>{typeStore.Null=_a$t})();Null.NAME="NULL";class LocalBooleanValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);if(t.valueHex){this.valueHexView=build$1.BufferSourceConverter.toUint8Array(t.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(e){this.value=e}}get value(){for(const e of this.valueHexView){if(e>0){return true}}return false}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}this.valueHexView=n.subarray(t,t+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;utilDecodeTC.call(this);this.blockLength=r;return t+r}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;class Boolean$1 extends BaseBlock{constructor(e={}){super(e,LocalBooleanValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}_a$s=Boolean$1;(()=>{typeStore.Boolean=_a$s})();Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({isConstructed:e=false,...t}={}){super(t);this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){this.isHexOnly=false;n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(t!==OCTET_STRING_NAME){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;n=super.fromBER(e,t,r);this.blockLength=r}return n}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);return e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalOctetStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return t}if(!this.valueBlock.isConstructed){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;const i=n.subarray(t,t+r);try{if(i.byteLength){const e=localFromBER(i,0,i.byteLength);if(e.offset!==-1&&e.offset===r){this.valueBlock.value=[e.result]}}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${build$1.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const e=[];for(const t of this.valueBlock.value){if(t instanceof OctetString$1){e.push(t.valueBlock.valueHexView)}}return build$1.BufferSourceConverter.concat(e)}}_a$r=OctetString$1;(()=>{typeStore.OctetString=_a$r})();OctetString$1.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({unusedBits:e=0,isConstructed:t=false,...r}={}){super(r);this.unusedBits=e;this.isConstructed=t;this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r){return t}let n=-1;if(this.isConstructed){n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(n===-1)return n;for(const e of this.value){const t=e.constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(t!==BIT_STRING_NAME){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return n}const i=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const s=i.subarray(t,t+r);this.unusedBits=s[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const e=s.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);if(t.offset!==-1&&t.offset===r-1){this.value=[t.result]}}}catch(e){}}this.valueHexView=s.subarray(1);this.blockLength=s.length;return t+r}toBER(e,t){if(this.isConstructed){return LocalConstructedValueBlock.prototype.toBER.call(this,e,t)}if(e){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return EMPTY_BUFFER$1}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;(n=r.isConstructed)!==null&&n!==void 0?n:r.isConstructed=!!((i=r.value)===null||i===void 0?void 0:i.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalBitStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}else{const e=[];const t=this.valueBlock.valueHexView;for(const r of t){e.push(r.toString(2).padStart(8,"0"))}const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString$1;(()=>{typeStore.BitString=_a$q})();BitString$1.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(e,t){const r=new Uint8Array([0]);const n=new Uint8Array(e);const i=new Uint8Array(t);let s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c=0;const u=f<a?a:f;let l=0;for(let e=u;e>=0;e--,l++){switch(true){case l<o.length:c=s[a-l]+o[f-l]+r[0];break;default:c=s[a-l]+r[0]}r[0]=c/10;switch(true){case l>=s.length:s=utilConcatView(new Uint8Array([c%10]),s);break;default:s[a-l]=c%10}}if(r[0]>0)s=utilConcatView(r,s);return s}function power2(e){if(e>=powers2.length){for(let t=powers2.length;t<=e;t++){const e=new Uint8Array([0]);let r=powers2[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10;r[t]=n[0]%10}if(e[0]>0)r=utilConcatView(e,r);powers2.push(r)}}return powers2[e]}function viewSub(e,t){let r=0;const n=new Uint8Array(e);const i=new Uint8Array(t);const s=n.slice(0);const a=s.length-1;const o=i.slice(0);const f=o.length-1;let c;let u=0;for(let e=f;e>=0;e--,u++){c=s[a-u]-o[f-u]-r;switch(true){case c<0:r=1;s[a-u]=c+10;break;default:r=0;s[a-u]=c}}if(r>0){for(let e=a-f+1;e>=0;e--,u++){c=s[a-u]-r;if(c<0){r=1;s[a-u]=c+10}else{r=0;s[a-u]=c;break}}}return s.slice()}class LocalIntegerValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);this._valueDec=0;if(t.valueHex){this.setValueHex()}if(e!==undefined){this.valueDec=e}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=utilDecodeTC.call(this)}}}set valueDec(e){this._valueDec=e;this.isHexOnly=false;this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const i=this.fromBER(e,t,r);if(i===-1)return i;const s=this.valueHexView;if(s[0]===0&&(s[1]&128)!==0){this.valueHexView=s.subarray(1)}else{if(n!==0){if(s.length<n){if(n-s.length>1)n=s.length+1;this.valueHexView=s.subarray(n-s.length)}}}return i}toDER(e=false){const t=this.valueHexView;switch(true){case(t[0]&128)!==0:{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0;e.set(t,1);this.valueHexView=e}break;case t[0]===0&&(t[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);if(n===-1){return n}this.setValueHex();return n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3);let r=0;let n;const i=this.valueHexView;let s="";let a=false;for(let a=i.byteLength-1;a>=0;a--){n=i[a];for(let i=0;i<8;i++){if((n&1)===1){switch(r){case e:t=viewSub(power2(r),t);s="-";break;default:t=viewAdd(t,power2(r))}}r++;n>>=1}}for(let e=0;e<t.length;e++){if(t[e])a=true;if(a)s+=digitsString.charAt(t[e])}if(a===false)s+=digitsString.charAt(0);return s}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";(()=>{Object.defineProperty(_a$p.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var _a$o;class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){assertBigInt();return BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e);const r=new ViewWriter;const n=t.toString(16).replace(/^-/,"");const i=new Uint8Array(build$1.Convert.FromHex(n));if(t<0){const e=new Uint8Array(i.length+(i[0]&128?1:0));e[0]|=128;const n=BigInt(`0x${build$1.Convert.ToHex(e)}`);const s=n+t;const a=build$1.BufferSourceConverter.toUint8Array(build$1.Convert.FromHex(s.toString(16)));a[0]|=128;r.write(a)}else{if(i[0]&128){r.write(new Uint8Array([0]))}r.write(i)}const s=new Integer({valueHex:r.final()});return s}convertToDER(){const e=new Integer({valueHex:this.valueBlock.valueHexView});e.valueBlock.toDER();return e}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;(()=>{typeStore.Integer=_a$o})();Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}}_a$n=Enumerated;(()=>{typeStore.Enumerated=_a$n})();Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends(HexBlock(ValueBlock)){constructor({valueDec:e=-1,isFirstSid:t=false,...r}={}){super(r);this.valueDec=e;this.isFirstSid=t}fromBER(e,t,r){if(!r){return t}const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++){s[e]=this.valueHexView[e]}this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);while(t.length%7){t="0"+t}const r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++){r[e]=parseInt(t.slice(e*7,e*7+7),2)+(e+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=build$1.Convert.ToHex(this.valueHexView);else{if(this.isFirstSid){let t=this.valueDec;if(this.valueDec<=39)e="0.";else{if(this.valueDec<=79){e="1.";t-=40}else{e="2.";t-=80}}e+=t.toString()}else e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}if(this.value.length===0)t.isFirstSid=true;this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(n.byteLength===0){this.error=this.value[r].error;return EMPTY_BUFFER$1}t.push(n)}return concat$1(t)}fromString(e){this.value=[];let t=0;let r=0;let n="";let i=false;do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;if(i){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}const r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t;i=false}else{const e=new LocalSidValueBlock;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(n);e.valueBigInt=t}else{e.valueDec=parseInt(n,10);if(isNaN(e.valueDec))return}if(!this.value.length){e.isFirstSid=true;i=true}this.value.push(e)}}while(r!==-1)}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;if(this.value[r].isFirstSid)e=`2.{${n} - 80}`;else e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++){e.sidArray.push(this.value[t].toJSON())}return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier$1 extends BaseBlock{constructor(e={}){super(e,LocalObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier$1;(()=>{typeStore.ObjectIdentifier=_a$m})();ObjectIdentifier$1.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends(HexBlock(LocalBaseBlock)){constructor({valueDec:e=0,...t}={}){super(t);this.valueDec=e}fromBER(e,t,r){if(r===0)return t;const n=build$1.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=i[e]&127;this.blockLength++;if((i[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];this.valueHexView=s;if((i[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=e[t]|128;r[n]=e[n]}return r.buffer}toString(){let e="";if(this.isHexOnly)e=build$1.Convert.ToHex(this.valueHexView);else{e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let n=t;while(r>0){const t=new LocalRelativeSidValueBlock;n=t.fromBER(e,n,r);if(n===-1){this.blockLength=0;this.error=t.error;return n}this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return n}toBER(e,t){const r=[];for(let t=0;t<this.value.length;t++){const n=this.value[t].toBER(e);if(n.byteLength===0){this.error=this.value[t].error;return EMPTY_BUFFER$1}r.push(n)}return concat$1(r)}fromString(e){this.value=[];let t=0;let r=0;let n="";do{r=e.indexOf(".",t);if(r===-1)n=e.substring(t);else n=e.substring(t,r);t=r+1;const i=new LocalRelativeSidValueBlock;i.valueDec=parseInt(n,10);if(isNaN(i.valueDec))return true;this.value.push(i)}while(r!==-1);return true}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){n=`{${n}}`;e+=n}else e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;(()=>{typeStore.RelativeObjectIdentifier=_a$l})();RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}}_a$k=Sequence;(()=>{typeStore.Sequence=_a$k})();Sequence.NAME="SEQUENCE";var _a$j;class Set$1 extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}}_a$j=Set$1;(()=>{typeStore.Set=_a$j})();Set$1.NAME="SET";class LocalStringValueBlock extends(HexBlock(ValueBlock)){constructor({...e}={}){super(e);this.isHexOnly=true;this.value=EMPTY_STRING$1}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,build$1.BufferSourceConverter.toUint8Array(e))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=build$1.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=build$1.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`);this.valueBlock.value=build$1.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(build$1.Convert.FromUtf8String(e));this.valueBlock.value=e}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}}_a$i=Utf8String;(()=>{typeStore.Utf8String=_a$i})();Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=build$1.Convert.ToUtf16String(e);this.valueBlock.valueHexView=build$1.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e;this.valueBlock.valueHexView=new Uint8Array(build$1.Convert.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}}_a$h=BmpString;(()=>{typeStore.BmpString=_a$h})();BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);const r=new Uint8Array(t);for(let e=0;e<r.length;e+=4){r[e]=r[e+3];r[e+1]=r[e+2];r[e+2]=0;r[e+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let n=0;n<t;n++){const t=utilToBase(e.charCodeAt(n),8);const i=new Uint8Array(t);if(i.length>4)continue;const s=4-i.length;for(let e=i.length-1;e>=0;e--)r[n*4+e+s]=i[e]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}}_a$g=UniversalString;(()=>{typeStore.UniversalString=_a$g})();UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}}_a$f=NumericString;(()=>{typeStore.NumericString=_a$f})();NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}}_a$e=PrintableString;(()=>{typeStore.PrintableString=_a$e})();PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}}_a$d=TeletexString;(()=>{typeStore.TeletexString=_a$d})();TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}}_a$c=VideotexString;(()=>{typeStore.VideotexString=_a$c})();VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}}_a$b=IA5String;(()=>{typeStore.IA5String=_a$b})();IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}}_a$a=GraphicString;(()=>{typeStore.GraphicString=_a$a})();GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}}_a$9=VisibleString;(()=>{typeStore.VisibleString=_a$9})();VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}}_a$8=GeneralString;(()=>{typeStore.GeneralString=_a$8})();GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}}_a$7=CharacterString;(()=>{typeStore.CharacterString=_a$7})();CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...r}={}){super(r);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(e){this.fromString(e);this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}if(t){this.fromDate(t);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,build$1.BufferSourceConverter.toUint8Array(e)))}toBuffer(){const e=this.toString();const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear();this.month=e.getUTCMonth()+1;this.day=e.getUTCDate();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=t.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const n=parseInt(r[1],10);if(n>=50)this.year=1900+n;else this.year=2e3+n;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const e=new Array(7);e[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2);e[1]=padNumber(this.month,2);e[2]=padNumber(this.day,2);e[3]=padNumber(this.hour,2);e[4]=padNumber(this.minute,2);e[5]=padNumber(this.second,2);e[6]="Z";return e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;(()=>{typeStore.UTCTime=_a$6})();UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e);(t=this.millisecond)!==null&&t!==void 0?t:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e);this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=false;let r="";let n="";let i=0;let s;let a=0;let o=0;if(e[e.length-1]==="Z"){r=e.substring(0,e.length-1);t=true}else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let e=1;let t=r.indexOf("+");let n="";if(t===-1){t=r.indexOf("-");e=-1}if(t!==-1){n=r.substring(t+1);r=r.substring(0,t);if(n.length!==2&&n.length!==4)throw new Error("Wrong input string for conversion");let i=parseInt(n.substring(0,2),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");a=e*i;if(n.length===4){i=parseInt(n.substring(2,4),10);if(isNaN(i.valueOf()))throw new Error("Wrong input string for conversion");o=e*i}}}let f=r.indexOf(".");if(f===-1)f=r.indexOf(",");if(f!==-1){const e=new Number(`0${r.substring(f)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf();n=r.substring(0,f)}else n=r;switch(true){case n.length===8:s=/(\d{4})(\d{2})(\d{2})/gi;if(f!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:s=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*i;this.minute=Math.floor(e);e=60*(e-this.minute);this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===12:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*i;this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case n.length===14:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const c=s.exec(n);if(c===null)throw new Error("Wrong input string for conversion");for(let e=1;e<c.length;e++){switch(e){case 1:this.year=parseInt(c[e],10);break;case 2:this.month=parseInt(c[e],10);break;case 3:this.day=parseInt(c[e],10);break;case 4:this.hour=parseInt(c[e],10)+a;break;case 5:this.minute=parseInt(c[e],10)+o;break;case 6:this.second=parseInt(c[e],10);break;default:throw new Error("Wrong input string for conversion")}}if(t===false){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear();this.month=e.getUTCMonth();this.day=e.getUTCDay();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds();this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const e=[];e.push(padNumber(this.year,4));e.push(padNumber(this.month,2));e.push(padNumber(this.day,2));e.push(padNumber(this.hour,2));e.push(padNumber(this.minute,2));e.push(padNumber(this.second,2));if(this.millisecond!==0){e.push(".");e.push(padNumber(this.millisecond,3))}e.push("Z");return e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;(()=>{typeStore.GeneralizedTime=_a$5})();GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}}_a$4=DATE;(()=>{typeStore.DATE=_a$4})();DATE.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}}_a$3=TimeOfDay;(()=>{typeStore.TimeOfDay=_a$3})();TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}}_a$2=DateTime;(()=>{typeStore.DateTime=_a$2})();DateTime.NAME="DateTime";var _a$1$1;class Duration extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}}_a$1$1=Duration;(()=>{typeStore.Duration=_a$1$1})();Duration.NAME="Duration";var _a$x;class TIME$1 extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}}_a$x=TIME$1;(()=>{typeStore.TIME=_a$x})();TIME$1.NAME="TIME";class Any{constructor({name:e=EMPTY_STRING$1,optional:t=false}={}){this.name=e;this.optional=t}}class Choice extends Any{constructor({value:e=[],...t}={}){super(t);this.value=e}}class Repeated extends Any{constructor({value:e=new Any,local:t=false,...r}={}){super(r);this.value=e;this.local=t}}class RawData{constructor({data:e=EMPTY_VIEW}={}){this.dataView=build$1.BufferSourceConverter.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=build$1.BufferSourceConverter.toUint8Array(e)}fromBER(e,t,r){const n=t+r;this.dataView=build$1.BufferSourceConverter.toUint8Array(e).subarray(t,n);return n}toBER(e){return this.dataView.slice().buffer}}function compareSchema(e,t,r){if(r instanceof Choice){for(let n=0;n<r.value.length;n++){const i=compareSchema(e,t,r.value[n]);if(i.verified){return{verified:true,result:e}}}{const e={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(NAME$2))e.name=r.name;return e}}if(r instanceof Any){if(r.hasOwnProperty(NAME$2))e[r.name]=t;return{verified:true,result:e}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(ID_BLOCK in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(FROM_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(TO_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.toBER(false);if(n.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const i=r.idBlock.fromBER(n,0,n.byteLength);if(i===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(TAG_CLASS)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==t.idBlock.tagClass){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(TAG_NUMBER)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==t.idBlock.tagNumber){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(IS_CONSTRUCTED)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==t.idBlock.isConstructed){return{verified:false,result:e}}if(!(IS_HEX_ONLY in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly){return{verified:false,result:e}}if(r.idBlock.isHexOnly){if(VALUE_HEX_VIEW in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const n=r.idBlock.valueHexView;const i=t.idBlock.valueHexView;if(n.length!==i.length){return{verified:false,result:e}}for(let t=0;t<n.length;t++){if(n[t]!==i[1]){return{verified:false,result:e}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)e[r.name]=t}if(r instanceof typeStore.Constructed){let n=0;let i={verified:false,result:{error:"Unknown error"}};let s=r.valueBlock.value.length;if(s>0){if(r.valueBlock.value[0]instanceof Repeated){s=t.valueBlock.value.length}}if(s===0){return{verified:true,result:e}}if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let t=true;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||false);if(t){return{verified:true,result:e}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}e.error="Inconsistent object length";return{verified:false,result:e}}for(let a=0;a<s;a++){if(a-n>=t.valueBlock.value.length){if(r.valueBlock.value[a].optional===false){const t={verified:false,result:e};e.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}}else{if(r.valueBlock.value[0]instanceof Repeated){i=compareSchema(e,t.valueBlock.value[a],r.valueBlock.value[0].value);if(i.verified===false){if(r.valueBlock.value[0].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return i}}if(NAME$2 in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};if(LOCAL in r.valueBlock.value[0]&&r.valueBlock.value[0].local)n=t;else n=e;if(typeof n[r.valueBlock.value[0].name]==="undefined")n[r.valueBlock.value[0].name]=[];n[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else{i=compareSchema(e,t.valueBlock.value[a-n],r.valueBlock.value[a]);if(i.verified===false){if(r.valueBlock.value[a].optional)n++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return i}}}}}if(i.verified===false){const t={verified:false,result:e};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return{verified:true,result:e}}if(r.primitiveSchema&&VALUE_HEX_VIEW in t.valueBlock){const n=localFromBER(t.valueBlock.valueHexView);if(n.offset===-1){const t={verified:false,result:n.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return compareSchema(e,n.result,r.primitiveSchema)}return{verified:true,result:e}}function verifySchema(e,t){if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=localFromBER(build$1.BufferSourceConverter.toUint8Array(e));if(r.offset===-1){return{verified:false,result:r.result}}return compareSchema(r.result,r.result,t)}const asn1js=Object.freeze({__proto__:null,Any,BaseBlock,BaseStringBlock,BitString:BitString$1,BmpString,Boolean:Boolean$1,CharacterString,Choice,Constructed,DATE,DateTime,Duration,EndOfContent,Enumerated,GeneralString,GeneralizedTime,GraphicString,HexBlock,IA5String,Integer,Null,NumericString,ObjectIdentifier:ObjectIdentifier$1,OctetString:OctetString$1,Primitive,PrintableString,RawData,RelativeObjectIdentifier,Repeated,Sequence,Set:Set$1,TIME:TIME$1,TeletexString,TimeOfDay,UTCTime,UniversalString,Utf8String,ValueBlock,VideotexString,ViewWriter,VisibleString,compareSchema,fromBER,verifySchema});class ByteStream{constructor(e={}){if("view"in e){this.fromUint8Array(e.view)}else if("buffer"in e){this.fromArrayBuffer(e.buffer)}else if("string"in e){this.fromString(e.string)}else if("hexstring"in e){this.fromHexString(e.hexstring)}else{if("length"in e&&e.length>0){this.length=e.length;if(e.stub){for(let t=0;t<this._view.length;t++){this._view[t]=e.stub}}}else{this.length=0}}}set buffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length);this._view=new Uint8Array(this._buffer);this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e);this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0);this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1);this.view=new Uint8Array(this.buffer);const r=new Map;r.set("0",0);r.set("1",1);r.set("2",2);r.set("3",3);r.set("4",4);r.set("5",5);r.set("6",6);r.set("7",7);r.set("8",8);r.set("9",9);r.set("A",10);r.set("a",10);r.set("B",11);r.set("b",11);r.set("C",12);r.set("c",12);r.set("D",13);r.set("d",13);r.set("E",14);r.set("e",14);r.set("F",15);r.set("f",15);let n=0;let i=0;for(let s=0;s<t;s++){if(!(s%2)){i=r.get(e.charAt(s))<<4}else{i|=r.get(e.charAt(s));this.view[n]=i;n++}}}toHexString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let n=e;n<e+t;n++){const e=this.view[n].toString(16).toUpperCase();r=r+(e.length==1?"0":"")+e}return r}copy(e=0,t=this.length-e){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,e+t)});return r}slice(e=0,t=this.length){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,t)});return r}realloc(e){const t=new ArrayBuffer(e);const r=new Uint8Array(t);if(e>this._view.length)r.set(this._view);else{r.set(new Uint8Array(this._buffer,0,e))}this._buffer=t;this._view=new Uint8Array(this._buffer)}append(e){const t=this.length;const r=e.length;const n=e._view.subarray();this.realloc(t+r);this._view.set(n,t)}insert(e,t=0,r=this.length-t){if(t>this.length-1)return false;if(r>this.length-t){r=this.length-t}if(r>e.length){r=e.length}if(r==e.length)this._view.set(e._view,t);else{this._view.set(e._view.subarray(0,r),t)}return true}isEqual(e){if(this.length!=e.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e.view[t])return false}return true}isEqualView(e){if(e.length!=this.view.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e[t])return false}return true}findPattern(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o=e.length;if(o>s){return-1}const f=[];for(let t=0;t<o;t++)f.push(e.view[t]);for(let e=0;e<=s-o;e++){let t=true;const r=a?i-o-e:i+e;for(let e=0;e<o;e++){if(this.view[e+r]!=f[e]){t=false;break}}if(t){return a?i-o-e:i+o+e}}return-1}findFirstIn(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o={id:-1,position:a?0:i+s,length:0};for(let t=0;t<e.length;t++){const r=this.findPattern(e[t],i,s,a);if(r!=-1){let n=false;const i=e[t].length;if(a){if(r-i>=o.position-o.length)n=true}else{if(r-i<=o.position-o.length)n=true}if(n){o.position=r;o.id=t;o.length=i}}}return o}findAllIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={id:-1,position:n};do{const t=a.position;a=this.findFirstIn(e,a.position,i);if(a.id==-1){break}i-=a.position-t;s.push({id:a.id,position:a.position})}while(true);return s}findAllPatternIn(e,t,r){const{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];const a=e.length;if(a>i){return-1}const o=Array.from(e.view);for(let e=0;e<=i-a;e++){let t=true;const r=n+e;for(let e=0;e<a;e++){if(this.view[e+r]!=o[e]){t=false;break}}if(t){s.push(n+a+e);e+=a-1}}return s}findFirstNotIn(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o={left:{id:-1,position:i},right:{id:-1,position:0},value:new ByteStream};let f=s;while(f>0){o.right=this.findFirstIn(e,a?i-s+f:i+s-f,f,a);if(o.right.id==-1){s=f;if(a){i-=s}else{i=o.left.position}o.value=new ByteStream({buffer:this._buffer.slice(i,i+s)});break}if(o.right.position!=(a?o.left.position-e[o.right.id].length:o.left.position+e[o.right.id].length)){if(a){i=o.right.position+e[o.right.id].length;s=o.left.position-o.right.position-e[o.right.id].length}else{i=o.left.position;s=o.right.position-o.left.position-e[o.right.id].length}o.value=new ByteStream({buffer:this._buffer.slice(i,i+s)});break}o.left=o.right;f-=e[o.right.id].length}if(a){const e=o.right;o.right=o.left;o.left=e}return o}findAllNotIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={left:{id:-1,position:n},right:{id:-1,position:n},value:new ByteStream};do{const t=a.right.position;a=this.findFirstNotIn(e,a.right.position,i);i-=a.right.position-t;s.push({left:{id:a.left.id,position:a.left.position},right:{id:a.right.id,position:a.right.position},value:a.value})}while(a.right.id!=-1);return s}findFirstSequence(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);const o=this.skipNotPatterns(e,i,s,a);if(o==-1){return{position:-1,value:new ByteStream}}const f=this.skipPatterns(e,o,s-(a?i-o:o-i),a);if(a){i=f;s=o-f}else{i=o;s=f-o}const c=new ByteStream({buffer:this._buffer.slice(i,i+s)});return{position:f,value:c}}findAllSequences(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);const s=[];let a={position:n,value:new ByteStream};do{const t=a.position;a=this.findFirstSequence(e,a.position,i);if(a.position!=-1){i-=a.position-t;s.push({position:a.position,value:a.value})}}while(a.position!=-1);return s}findPairedPatterns(e,t,r,n){const i=[];if(e.isEqual(t))return i;const{start:s,length:a}=this.prepareFindParameters(r,n);let o=0;const f=this.findAllPatternIn(e,s,a);if(!Array.isArray(f)||f.length==0){return i}const c=this.findAllPatternIn(t,s,a);if(!Array.isArray(c)||c.length==0){return i}while(o<f.length){if(c.length==0){break}if(f[0]==c[0]){i.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o]>c[0]){break}while(f[o]<c[0]){o++;if(o>=f.length){break}}i.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}i.sort(((e,t)=>e.left-t.left));return i}findPairedArrays(e,t,r,n){const{start:i,length:s}=this.prepareFindParameters(r,n);const a=[];let o=0;const f=this.findAllIn(e,i,s);if(f.length==0)return a;const c=this.findAllIn(t,i,s);if(c.length==0)return a;while(o<f.length){if(c.length==0){break}if(f[0].position==c[0].position){a.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o].position>c[0].position){break}while(f[o].position<c[0].position){o++;if(o>=f.length){break}}a.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}a.sort(((e,t)=>e.left.position-t.left.position));return a}replacePattern(e,t,r,n,i=null){let s=[];let a;const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]};const{start:f,length:c}=this.prepareFindParameters(r,n);if(i==null){s=this.findAllIn([e],f,c);if(s.length==0){return o}}else{s=i}o.searchPatternPositions.push(...Array.from(s,(e=>e.position)));const u=e.length-t.length;const l=new ArrayBuffer(this.view.length-s.length*u);const h=new Uint8Array(l);h.set(new Uint8Array(this.buffer,0,f));for(a=0;a<s.length;a++){const r=a==0?f:s[a-1].position;h.set(new Uint8Array(this.buffer,r,s[a].position-e.length-r),r-a*u);h.set(t.view,s[a].position-e.length-a*u);o.replacePatternPositions.push(s[a].position-e.length-a*u)}a--;h.set(new Uint8Array(this.buffer,s[a].position,this.length-s[a].position),s[a].position-e.length+t.length-a*u);this.buffer=l;this.view=new Uint8Array(this.buffer);o.status=1;return o}skipPatterns(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=i;for(let t=0;t<e.length;t++){const r=e[t].length;const n=a?o-r:o;let f=true;for(let i=0;i<r;i++){if(this.view[i+n]!=e[t].view[i]){f=false;break}}if(f){t=-1;if(a){o-=r;if(o<=0)return o}else{o+=r;if(o>=i+s)return o}}}return o}skipNotPatterns(e,t,r,n){const{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=-1;for(let t=0;t<s;t++){for(let r=0;r<e.length;r++){const n=e[r].length;const s=a?i-t-n:i+t;let f=true;for(let t=0;t<n;t++){if(this.view[t+s]!=e[r].view[t]){f=false;break}}if(f){o=a?i-t:i+t;break}}if(o!=-1){break}}return o}prepareFindParameters(e=null,t=null,r=false){if(e===null){e=r?this.length:0}if(e>this.length){e=this.length}if(r){if(t===null){t=e}if(t>e){t=e}}else{if(t===null){t=this.length-e}if(t>this.length-e){t=this.length-e}}return{start:e,length:t,backward:r}}}const pow2_24=16777216;class SeqStream{constructor(e={}){this._stream=new ByteStream;this._length=0;this._start=0;this.backward=false;this.appendBlock=0;this.prevLength=0;this.prevStart=0;if("view"in e){this.stream=new ByteStream({view:e.view})}else if("buffer"in e){this.stream=new ByteStream({buffer:e.buffer})}else if("string"in e){this.stream=new ByteStream({string:e.string})}else if("hexstring"in e){this.stream=new ByteStream({hexstring:e.hexstring})}else if("stream"in e){this.stream=e.stream.slice()}else{this.stream=new ByteStream}if("backward"in e&&e.backward){this.backward=e.backward;this._start=this.stream.length}if("length"in e&&e.length>0){this._length=e.length}if("start"in e&&e.start&&e.start>0){this._start=e.start}if("appendBlock"in e&&e.appendBlock&&e.appendBlock>0){this.appendBlock=e.appendBlock}}set stream(e){this._stream=e;this.prevLength=this._length;this._length=e.length;this.prevStart=this._start;this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length;this._length=e}get length(){if(this.appendBlock){return this.start}return this._length}set start(e){if(e>this.stream.length)return;this.prevStart=this._start;this.prevLength=this._length;this._length-=this.backward?this._start-e:e-this._start;this._start=e}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart;this._length=this.prevLength}findPattern(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findPattern(e,this.start,this.length,this.backward);if(r==-1)return r;if(this.backward){if(r<this.start-e.length-t){return-1}}else{if(r>this.start+e.length+t){return-1}}this.start=r;return r}findFirstIn(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(r.id==-1)return r;if(this.backward){if(r.position<this.start-e[r.id].length-t){return{id:-1,position:this.backward?0:this.start+this.length}}}else{if(r.position>this.start+e[r.id].length+t){return{id:-1,position:this.backward?0:this.start+this.length}}}this.start=r.position;return r}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){if(t==null||t>this._length){t=this._length}const r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(r.left.id==-1&&r.right.id==-1){return r}if(this.backward){if(r.right.id!=-1){if(r.right.position<this._start-e[r.right.id].length-t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}else{if(r.left.id!=-1){if(r.left.position>this._start+e[r.left.id].length+t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}if(this.backward){if(r.left.id==-1){this.start=0}else{this.start=r.left.position}}else{if(r.right.id==-1){this.start=this._start+this._length}else{this.start=r.right.position}}return r}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,r=null){if(t==null||t>this._length){t=this._length}if(r==null||r>t){r=t}const n=this._stream.findFirstSequence(e,this._start,t,this.backward);if(n.value.length==0){return n}if(this.backward){if(n.position<this._start-n.value.length-r){return{position:-1,value:new ByteStream}}}else{if(n.position>this._start+n.value.length+r){return{position:-1,value:new ByteStream}}}this.start=n.position;return n}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,r=null){if(r==null||r>this.length){r=this.length}const n=this.backward?this.start-this.length:this.start;const i=this.stream.findPairedPatterns(e,t,n,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-t.length-r){return[]}}else{if(i[0].left>this.start+e.length+r){return[]}}}return i}findPairedArrays(e,t,r=null){if(r==null||r>this.length){r=this.length}const n=this.backward?this.start-this.length:this.start;const i=this.stream.findPairedArrays(e,t,n,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-t[i[0].right.id].length-r){return[]}}else{if(i[0].left.position>this.start+e[i[0].left.id].length+r){return[]}}}return i}replacePattern(e,t){const r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,r,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);this.start=t;return t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);if(t==-1)return-1;this.start=t;return t}append(e){this.beforeAppend(e.length);this._stream.view.set(e.view,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length);this._stream.view.set(e,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1);this._stream.view[this._start]=e;this._length+=2;this.start=this._start+1;this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]);const r=new Uint8Array(t.buffer);this.stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[2];this._stream.view[this._start+1]=r[1];this._stream.view[this._start+2]=r[0];this._length+=6;this.start=this._start+3;this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}getBlock(e,t=true){if(this._length<=0){return new Uint8Array(0)}if(this._length<e){e=this._length}let r;if(this.backward){const t=this._stream.view.subarray(this._length-e,this._length);r=new Uint8Array(e);for(let n=0;n<e;n++){r[e-1-n]=t[n]}}else{r=this._stream.view.subarray(this._start,this._start+e)}if(t){this.start+=this.backward?-1*e:e}return r}getUint16(e=true){const t=this.getBlock(2,e);if(t.length<2)return 0;return t[0]<<8|t[1]}getInt16(e=true){const t=this.getUint16(e);const r=32768;if(t&r){return-(r-(t^r))}return t}getUint24(e=true){const t=this.getBlock(4,e);if(t.length<3)return 0;return t[0]<<16|t[1]<<8|t[2]}getUint32(e=true){const t=this.getBlock(4,e);if(t.length<4)return 0;return t[0]*pow2_24+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=true){const t=this.getUint32(e);const r=2147483648;if(t&r){return-(r-(t^r))}return t}beforeAppend(e){if(this._start+e>this._stream.length){if(e>this.appendBlock){this.appendBlock=e+SeqStream.APPEND_BLOCK}this._stream.realloc(this._stream.length+this.appendBlock)}}}SeqStream.APPEND_BLOCK=1e3;
/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const EMPTY_BUFFER=new ArrayBuffer(0);const EMPTY_STRING="";class ArgumentError extends TypeError{constructor(){super(...arguments);this.name=ArgumentError.NAME}static isType(e,t){if(typeof t==="string"){if(t==="Array"&&Array.isArray(e)){return true}else if(t==="ArrayBuffer"&&e instanceof ArrayBuffer){return true}else if(t==="ArrayBufferView"&&ArrayBuffer.isView(e)){return true}else if(typeof e===t){return true}}else if(e instanceof t){return true}return false}static assert(e,t,...r){for(const t of r){if(this.isType(e,t)){return}}const n=r.map((e=>e instanceof Function&&"name"in e?e.name:`${e}`));throw new ArgumentError(`Parameter '${t}' is not of type ${n.length>1?`(${n.join(" or ")})`:n[0]}`)}}ArgumentError.NAME="ArgumentError";class ParameterError extends TypeError{constructor(e,t=null,r){super();this.name=ParameterError.NAME;this.field=e;if(t){this.target=t}if(r){this.message=r}else{this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:EMPTY_STRING}`}}static assert(...e){let t=null;let r;let n;if(typeof e[0]==="string"){t=e[0];r=e[1];n=e.slice(2)}else{r=e[0];n=e.slice(1)}ArgumentError.assert(r,"parameters","object");for(const e of n){const n=r[e];if(n===undefined||n===null){throw new ParameterError(e,t)}}}static assertEmpty(e,t,r){if(e===undefined||e===null){throw new ParameterError(t,r)}}}ParameterError.NAME="ParameterError";class AsnError extends Error{static assertSchema(e,t){if(!e.verified){throw new Error(`Object's schema was not verified against input data for ${t}`)}}static assert(e,t){if(e.offset===-1){throw new AsnError(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}}constructor(e){super(e);this.name="AsnError"}}class PkiObject{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=fromBER(e);AsnError.assert(t,this.name);try{return new this({schema:t.result})}catch(e){throw new AsnError(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(true)}return build$1.Convert.ToString(t.toBER(),e)}}PkiObject.CLASS_NAME="PkiObject";function stringPrep(e){let t=false;let r=EMPTY_STRING;const n=e.trim();for(let e=0;e<n.length;e++){if(n.charCodeAt(e)===32){if(t===false)t=true}else{if(t){r+=" ";t=false}r+=n[e]}}return r.toLowerCase()}const TYPE$5="type";const VALUE$6="value";class AttributeTypeAndValue$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$5,AttributeTypeAndValue$1.defaultValues(TYPE$5));this.value=getParametersValue(e,VALUE$6,AttributeTypeAndValue$1.defaultValues(VALUE$6));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$5:return EMPTY_STRING;case VALUE$6:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Any({name:t.value||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[TYPE$5,"typeValue"]);const t=compareSchema(e,e,AttributeTypeAndValue$1.schema({names:{type:TYPE$5,value:"typeValue"}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.value=t.result.typeValue}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),this.value]})}toJSON(){const e={type:this.type};if(Object.keys(this.value).length!==0){e.value=this.value.toJSON()}else{e.value=this.value}return e}isEqual(e){const t=[Utf8String.blockName(),BmpString.blockName(),UniversalString.blockName(),NumericString.blockName(),PrintableString.blockName(),TeletexString.blockName(),VideotexString.blockName(),IA5String.blockName(),GraphicString.blockName(),VisibleString.blockName(),GeneralString.blockName(),CharacterString.blockName()];if(e instanceof ArrayBuffer){return build$1.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView,e)}if(e.constructor.blockName()===AttributeTypeAndValue$1.blockName()){if(this.type!==e.type)return false;const r=[false,false];const n=this.value.constructor.blockName();for(const i of t){if(n===i){r[0]=true}if(e.value.constructor.blockName()===i){r[1]=true}}if(r[0]!==r[1]){return false}const i=r[0]&&r[1];if(i){const t=stringPrep(this.value.valueBlock.value);const r=stringPrep(e.value.valueBlock.value);if(t.localeCompare(r)!==0)return false}else{if(!build$1.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return false}return true}return false}}AttributeTypeAndValue$1.CLASS_NAME="AttributeTypeAndValue";const TYPE_AND_VALUES="typesAndValues";const VALUE_BEFORE_DECODE="valueBeforeDecode";const RDN="RDN";class RelativeDistinguishedNames extends PkiObject{constructor(e={}){super();this.typesAndValues=getParametersValue(e,TYPE_AND_VALUES,RelativeDistinguishedNames.defaultValues(TYPE_AND_VALUES));this.valueBeforeDecode=getParametersValue(e,VALUE_BEFORE_DECODE,RelativeDistinguishedNames.defaultValues(VALUE_BEFORE_DECODE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE_AND_VALUES:return[];case VALUE_BEFORE_DECODE:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE_AND_VALUES:return t.length===0;case VALUE_BEFORE_DECODE:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.repeatedSequence||EMPTY_STRING,value:new Set$1({value:[new Repeated({name:t.repeatedSet||EMPTY_STRING,value:AttributeTypeAndValue$1.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){clearProps(e,[RDN,TYPE_AND_VALUES]);const t=compareSchema(e,e,RelativeDistinguishedNames.schema({names:{blockName:RDN,repeatedSet:TYPE_AND_VALUES}}));AsnError.assertSchema(t,this.className);if(TYPE_AND_VALUES in t.result){this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new AttributeTypeAndValue$1({schema:e})))}this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0){return new Sequence({value:[new Set$1({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]})}const e=fromBER(this.valueBeforeDecode);AsnError.assert(e,"RelativeDistinguishedNames");if(!(e.result instanceof Sequence)){throw new Error("ASN.1 result should be SEQUENCE")}return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof RelativeDistinguishedNames){if(this.typesAndValues.length!==e.typesAndValues.length)return false;for(const[t,r]of this.typesAndValues.entries()){if(r.isEqual(e.typesAndValues[t])===false)return false}return true}if(e instanceof ArrayBuffer){return isEqualBuffer(this.valueBeforeDecode,e)}return false}}RelativeDistinguishedNames.CLASS_NAME="RelativeDistinguishedNames";const TYPE$4="type";const VALUE$5="value";function builtInStandardAttributes(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,value:[new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||EMPTY_STRING,isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,name:r.numeric_user_identifier||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:4},isHexOnly:true}),new Constructed({optional:true,name:r.personal_name||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:5},value:[new Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},isHexOnly:true})]}),new Constructed({optional:true,name:r.organizational_unit_names||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6},value:[new Repeated({value:new PrintableString})]})]})}function builtInDomainDefinedAttributes(e=false){return new Sequence({optional:e,value:[new PrintableString,new PrintableString]})}function extensionAttributes(e=false){return new Set$1({optional:e,value:[new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Any]})]})}class GeneralName$2 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$4,GeneralName$2.defaultValues(TYPE$4));this.value=getParametersValue(e,VALUE$5,GeneralName$2.defaultValues(VALUE$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$4:return 9;case VALUE$5:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$4:return t===GeneralName$2.defaultValues(e);case VALUE$5:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1,new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||EMPTY_STRING,value:[builtInStandardAttributes(t.builtInStandardAttributes||{},false),builtInDomainDefinedAttributes(true),extensionAttributes(true)]}),new Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||EMPTY_STRING,value:[RelativeDistinguishedNames.schema(t.directoryName||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:7}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){clearProps(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=compareSchema(e,e,GeneralName$2.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));AsnError.assertSchema(t,this.className);this.type=t.result.blockName.idBlock.tagNumber;switch(this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=22;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"GeneralName value");this.value=n.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new RelativeDistinguishedNames({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new OctetString$1({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=6;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"GeneralName registeredID");this.value=n.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new IA5String({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 4:return new Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 8:{const e=new ObjectIdentifier$1({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}default:return GeneralName$2.schema()}}toJSON(){const e={type:this.type,value:EMPTY_STRING};if(typeof this.value==="string")e.value=this.value;else{try{e.value=this.value.toJSON()}catch(e){}}return e}}GeneralName$2.CLASS_NAME="GeneralName";const ACCESS_METHOD="accessMethod";const ACCESS_LOCATION="accessLocation";const CLEAR_PROPS$1v=[ACCESS_METHOD,ACCESS_LOCATION];class AccessDescription$1 extends PkiObject{constructor(e={}){super();this.accessMethod=getParametersValue(e,ACCESS_METHOD,AccessDescription$1.defaultValues(ACCESS_METHOD));this.accessLocation=getParametersValue(e,ACCESS_LOCATION,AccessDescription$1.defaultValues(ACCESS_LOCATION));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_METHOD:return EMPTY_STRING;case ACCESS_LOCATION:return new GeneralName$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.accessMethod||EMPTY_STRING}),GeneralName$2.schema(t.accessLocation||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1v);const t=compareSchema(e,e,AccessDescription$1.schema({names:{accessMethod:ACCESS_METHOD,accessLocation:{names:{blockName:ACCESS_LOCATION}}}}));AsnError.assertSchema(t,this.className);this.accessMethod=t.result.accessMethod.valueBlock.toString();this.accessLocation=new GeneralName$2({schema:t.result.accessLocation})}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}AccessDescription$1.CLASS_NAME="AccessDescription";const ALGORITHM_ID="algorithmId";const ALGORITHM_PARAMS="algorithmParams";const ALGORITHM$2="algorithm";const PARAMS="params";const CLEAR_PROPS$1u=[ALGORITHM$2,PARAMS];class AlgorithmIdentifier$2 extends PkiObject{constructor(e={}){super();this.algorithmId=getParametersValue(e,ALGORITHM_ID,AlgorithmIdentifier$2.defaultValues(ALGORITHM_ID));if(ALGORITHM_PARAMS in e){this.algorithmParams=getParametersValue(e,ALGORITHM_PARAMS,AlgorithmIdentifier$2.defaultValues(ALGORITHM_PARAMS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALGORITHM_ID:return EMPTY_STRING;case ALGORITHM_PARAMS:return new Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ALGORITHM_ID:return t===EMPTY_STRING;case ALGORITHM_PARAMS:return t instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,optional:t.optional||false,value:[new ObjectIdentifier$1({name:t.algorithmIdentifier||EMPTY_STRING}),new Any({name:t.algorithmParams||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1u);const t=compareSchema(e,e,AlgorithmIdentifier$2.schema({names:{algorithmIdentifier:ALGORITHM$2,algorithmParams:PARAMS}}));AsnError.assertSchema(t,this.className);this.algorithmId=t.result.algorithm.valueBlock.toString();if(PARAMS in t.result){this.algorithmParams=t.result.params}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.algorithmId}));if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.push(this.algorithmParams)}return new Sequence({value:e})}toJSON(){const e={algorithmId:this.algorithmId};if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.algorithmParams=this.algorithmParams.toJSON()}return e}isEqual(e){if(!(e instanceof AlgorithmIdentifier$2)){return false}if(this.algorithmId!==e.algorithmId){return false}if(this.algorithmParams){if(e.algorithmParams){return JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams)}return false}if(e.algorithmParams){return false}return true}}AlgorithmIdentifier$2.CLASS_NAME="AlgorithmIdentifier";const ALT_NAMES="altNames";const CLEAR_PROPS$1t=[ALT_NAMES];class AltName extends PkiObject{constructor(e={}){super();this.altNames=getParametersValue(e,ALT_NAMES,AltName.defaultValues(ALT_NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALT_NAMES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.altNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1t);const t=compareSchema(e,e,AltName.schema({names:{altNames:ALT_NAMES}}));AsnError.assertSchema(t,this.className);if(ALT_NAMES in t.result){this.altNames=Array.from(t.result.altNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){return new Sequence({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}AltName.CLASS_NAME="AltName";const TYPE$3="type";const VALUES$1="values";const CLEAR_PROPS$1s=[TYPE$3,VALUES$1];class Attribute$3 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$3,Attribute$3.defaultValues(TYPE$3));this.values=getParametersValue(e,VALUES$1,Attribute$3.defaultValues(VALUES$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$3:return EMPTY_STRING;case VALUES$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$3:return t===EMPTY_STRING;case VALUES$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Set$1({name:t.setName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:new Any})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1s);const t=compareSchema(e,e,Attribute$3.schema({names:{type:TYPE$3,values:VALUES$1}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.values=t.result.values}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),new Set$1({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}Attribute$3.CLASS_NAME="Attribute";const NAMES="names";const GENERAL_NAMES="generalNames";class GeneralNames$2 extends PkiObject{constructor(e={}){super();this.names=getParametersValue(e,NAMES,GeneralNames$2.defaultValues(NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,NAMES,{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.generalNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,[NAMES,GENERAL_NAMES]);const t=compareSchema(e,e,GeneralNames$2.schema({names:{blockName:NAMES,generalNames:GENERAL_NAMES}}));AsnError.assertSchema(t,this.className);this.names=Array.from(t.result.generalNames,(e=>new GeneralName$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}GeneralNames$2.CLASS_NAME="GeneralNames";const id_SubjectDirectoryAttributes="2.5.29.9";const id_PrivateKeyUsagePeriod="2.5.29.16";const id_SubjectAltName="2.5.29.17";const id_IssuerAltName="2.5.29.18";const id_BasicConstraints="2.5.29.19";const id_IssuingDistributionPoint="2.5.29.28";const id_CertificateIssuer="2.5.29.29";const id_NameConstraints="2.5.29.30";const id_CRLDistributionPoints="2.5.29.31";const id_FreshestCRL="2.5.29.46";const id_CertificatePolicies="2.5.29.32";const id_MicrosoftAppPolicies="1.3.6.1.4.1.311.21.10";const id_PolicyMappings="2.5.29.33";const id_AuthorityKeyIdentifier="2.5.29.35";const id_PolicyConstraints="2.5.29.36";const id_ExtKeyUsage="2.5.29.37";const id_AuthorityInfoAccess="1.3.6.1.5.5.7.1.1";const id_SubjectInfoAccess="1.3.6.1.5.5.7.1.11";const id_SignedCertificateTimestampList="1.3.6.1.4.1.11129.2.4.2";const id_MicrosoftCertTemplateV2="1.3.6.1.4.1.311.21.7";const id_MicrosoftCaVersion="1.3.6.1.4.1.311.21.1";const id_QCStatements="1.3.6.1.5.5.7.1.3";const KEY_IDENTIFIER$1="keyIdentifier";const AUTHORITY_CERT_ISSUER="authorityCertIssuer";const AUTHORITY_CERT_SERIAL_NUMBER="authorityCertSerialNumber";const CLEAR_PROPS$1q=[KEY_IDENTIFIER$1,AUTHORITY_CERT_ISSUER,AUTHORITY_CERT_SERIAL_NUMBER];class AuthorityKeyIdentifier$1 extends PkiObject{constructor(e={}){super();if(KEY_IDENTIFIER$1 in e){this.keyIdentifier=getParametersValue(e,KEY_IDENTIFIER$1,AuthorityKeyIdentifier$1.defaultValues(KEY_IDENTIFIER$1))}if(AUTHORITY_CERT_ISSUER in e){this.authorityCertIssuer=getParametersValue(e,AUTHORITY_CERT_ISSUER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_ISSUER))}if(AUTHORITY_CERT_SERIAL_NUMBER in e){this.authorityCertSerialNumber=getParametersValue(e,AUTHORITY_CERT_SERIAL_NUMBER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_SERIAL_NUMBER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_IDENTIFIER$1:return new OctetString$1;case AUTHORITY_CERT_ISSUER:return[];case AUTHORITY_CERT_SERIAL_NUMBER:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.keyIdentifier||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.authorityCertIssuer||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Primitive({name:t.authorityCertSerialNumber||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1q);const t=compareSchema(e,e,AuthorityKeyIdentifier$1.schema({names:{keyIdentifier:KEY_IDENTIFIER$1,authorityCertIssuer:AUTHORITY_CERT_ISSUER,authorityCertSerialNumber:AUTHORITY_CERT_SERIAL_NUMBER}}));AsnError.assertSchema(t,this.className);if(KEY_IDENTIFIER$1 in t.result)this.keyIdentifier=new OctetString$1({valueHex:t.result.keyIdentifier.valueBlock.valueHex});if(AUTHORITY_CERT_ISSUER in t.result)this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new GeneralName$2({schema:e})));if(AUTHORITY_CERT_SERIAL_NUMBER in t.result)this.authorityCertSerialNumber=new Integer({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex})}toSchema(){const e=[];if(this.keyIdentifier){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView}))}if(this.authorityCertIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))}))}if(this.authorityCertSerialNumber){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.keyIdentifier){e.keyIdentifier=this.keyIdentifier.toJSON()}if(this.authorityCertIssuer){e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))}if(this.authorityCertSerialNumber){e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()}return e}}AuthorityKeyIdentifier$1.CLASS_NAME="AuthorityKeyIdentifier";const PATH_LENGTH_CONSTRAINT="pathLenConstraint";const CA="cA";class BasicConstraints$1 extends PkiObject{constructor(e={}){super();this.cA=getParametersValue(e,CA,false);if(PATH_LENGTH_CONSTRAINT in e){this.pathLenConstraint=getParametersValue(e,PATH_LENGTH_CONSTRAINT,0)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CA:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Boolean$1({optional:true,name:t.cA||EMPTY_STRING}),new Integer({optional:true,name:t.pathLenConstraint||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[CA,PATH_LENGTH_CONSTRAINT]);const t=compareSchema(e,e,BasicConstraints$1.schema({names:{cA:CA,pathLenConstraint:PATH_LENGTH_CONSTRAINT}}));AsnError.assertSchema(t,this.className);if(CA in t.result){this.cA=t.result.cA.valueBlock.value}if(PATH_LENGTH_CONSTRAINT in t.result){if(t.result.pathLenConstraint.valueBlock.isHexOnly){this.pathLenConstraint=t.result.pathLenConstraint}else{this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec}}}toSchema(){const e=[];if(this.cA!==BasicConstraints$1.defaultValues(CA))e.push(new Boolean$1({value:this.cA}));if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.push(this.pathLenConstraint)}else{e.push(new Integer({value:this.pathLenConstraint}))}}return new Sequence({value:e})}toJSON(){const e={};if(this.cA!==BasicConstraints$1.defaultValues(CA)){e.cA=this.cA}if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.pathLenConstraint=this.pathLenConstraint.toJSON()}else{e.pathLenConstraint=this.pathLenConstraint}}return e}}BasicConstraints$1.CLASS_NAME="BasicConstraints";const CERTIFICATE_INDEX="certificateIndex";const KEY_INDEX="keyIndex";class CAVersion extends PkiObject{constructor(e={}){super();this.certificateIndex=getParametersValue(e,CERTIFICATE_INDEX,CAVersion.defaultValues(CERTIFICATE_INDEX));this.keyIndex=getParametersValue(e,KEY_INDEX,CAVersion.defaultValues(KEY_INDEX));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_INDEX:case KEY_INDEX:return 0;default:return super.defaultValues(e)}}static schema(){return new Integer}fromSchema(e){if(e.constructor.blockName()!==Integer.blockName()){throw new Error("Object's schema was not verified against input data for CAVersion")}let t=e.valueBlock.valueHex.slice(0);const r=new Uint8Array(t);switch(true){case t.byteLength<4:{const e=new ArrayBuffer(4);const n=new Uint8Array(e);n.set(r,4-t.byteLength);t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);const n=new Uint8Array(e);n.set(r.slice(0,4));t=e.slice(0)}break}const n=t.slice(0,2);const i=new Uint8Array(n);let s=i[0];i[0]=i[1];i[1]=s;const a=new Uint16Array(n);this.keyIndex=a[0];const o=t.slice(2);const f=new Uint8Array(o);s=f[0];f[0]=f[1];f[1]=s;const c=new Uint16Array(o);this.certificateIndex=c[0]}toSchema(){const e=new ArrayBuffer(2);const t=new Uint16Array(e);t[0]=this.certificateIndex;const r=new Uint8Array(e);let n=r[0];r[0]=r[1];r[1]=n;const i=new ArrayBuffer(2);const s=new Uint16Array(i);s[0]=this.keyIndex;const a=new Uint8Array(i);n=a[0];a[0]=a[1];a[1]=n;return new Integer({valueHex:utilConcatBuf(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}CAVersion.CLASS_NAME="CAVersion";const POLICY_QUALIFIER_ID="policyQualifierId";const QUALIFIER="qualifier";const CLEAR_PROPS$1p=[POLICY_QUALIFIER_ID,QUALIFIER];class PolicyQualifierInfo$1 extends PkiObject{constructor(e={}){super();this.policyQualifierId=getParametersValue(e,POLICY_QUALIFIER_ID,PolicyQualifierInfo$1.defaultValues(POLICY_QUALIFIER_ID));this.qualifier=getParametersValue(e,QUALIFIER,PolicyQualifierInfo$1.defaultValues(QUALIFIER));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_QUALIFIER_ID:return EMPTY_STRING;case QUALIFIER:return new Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyQualifierId||EMPTY_STRING}),new Any({name:t.qualifier||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1p);const t=compareSchema(e,e,PolicyQualifierInfo$1.schema({names:{policyQualifierId:POLICY_QUALIFIER_ID,qualifier:QUALIFIER}}));AsnError.assertSchema(t,this.className);this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString();this.qualifier=t.result.qualifier}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}PolicyQualifierInfo$1.CLASS_NAME="PolicyQualifierInfo";const POLICY_IDENTIFIER="policyIdentifier";const POLICY_QUALIFIERS="policyQualifiers";const CLEAR_PROPS$1o=[POLICY_IDENTIFIER,POLICY_QUALIFIERS];class PolicyInformation$1 extends PkiObject{constructor(e={}){super();this.policyIdentifier=getParametersValue(e,POLICY_IDENTIFIER,PolicyInformation$1.defaultValues(POLICY_IDENTIFIER));if(POLICY_QUALIFIERS in e){this.policyQualifiers=getParametersValue(e,POLICY_QUALIFIERS,PolicyInformation$1.defaultValues(POLICY_QUALIFIERS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_IDENTIFIER:return EMPTY_STRING;case POLICY_QUALIFIERS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyIdentifier||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.policyQualifiers||EMPTY_STRING,value:PolicyQualifierInfo$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1o);const t=compareSchema(e,e,PolicyInformation$1.schema({names:{policyIdentifier:POLICY_IDENTIFIER,policyQualifiers:POLICY_QUALIFIERS}}));AsnError.assertSchema(t,this.className);this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString();if(POLICY_QUALIFIERS in t.result){this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new PolicyQualifierInfo$1({schema:e})))}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.policyIdentifier}));if(this.policyQualifiers){e.push(new Sequence({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};if(this.policyQualifiers)e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()));return e}}PolicyInformation$1.CLASS_NAME="PolicyInformation";const CERTIFICATE_POLICIES="certificatePolicies";const CLEAR_PROPS$1n=[CERTIFICATE_POLICIES];class CertificatePolicies$1 extends PkiObject{constructor(e={}){super();this.certificatePolicies=getParametersValue(e,CERTIFICATE_POLICIES,CertificatePolicies$1.defaultValues(CERTIFICATE_POLICIES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_POLICIES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.certificatePolicies||EMPTY_STRING,value:PolicyInformation$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1n);const t=compareSchema(e,e,CertificatePolicies$1.schema({names:{certificatePolicies:CERTIFICATE_POLICIES}}));AsnError.assertSchema(t,this.className);this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new PolicyInformation$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}CertificatePolicies$1.CLASS_NAME="CertificatePolicies";const TEMPLATE_ID="templateID";const TEMPLATE_MAJOR_VERSION="templateMajorVersion";const TEMPLATE_MINOR_VERSION="templateMinorVersion";const CLEAR_PROPS$1m=[TEMPLATE_ID,TEMPLATE_MAJOR_VERSION,TEMPLATE_MINOR_VERSION];class CertificateTemplate extends PkiObject{constructor(e={}){super();this.templateID=getParametersValue(e,TEMPLATE_ID,CertificateTemplate.defaultValues(TEMPLATE_ID));if(TEMPLATE_MAJOR_VERSION in e){this.templateMajorVersion=getParametersValue(e,TEMPLATE_MAJOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MAJOR_VERSION))}if(TEMPLATE_MINOR_VERSION in e){this.templateMinorVersion=getParametersValue(e,TEMPLATE_MINOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MINOR_VERSION))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TEMPLATE_ID:return EMPTY_STRING;case TEMPLATE_MAJOR_VERSION:case TEMPLATE_MINOR_VERSION:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.templateID||EMPTY_STRING}),new Integer({name:t.templateMajorVersion||EMPTY_STRING,optional:true}),new Integer({name:t.templateMinorVersion||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1m);const t=compareSchema(e,e,CertificateTemplate.schema({names:{templateID:TEMPLATE_ID,templateMajorVersion:TEMPLATE_MAJOR_VERSION,templateMinorVersion:TEMPLATE_MINOR_VERSION}}));AsnError.assertSchema(t,this.className);this.templateID=t.result.templateID.valueBlock.toString();if(TEMPLATE_MAJOR_VERSION in t.result){this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec}if(TEMPLATE_MINOR_VERSION in t.result){this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.templateID}));if(TEMPLATE_MAJOR_VERSION in this){e.push(new Integer({value:this.templateMajorVersion}))}if(TEMPLATE_MINOR_VERSION in this){e.push(new Integer({value:this.templateMinorVersion}))}return new Sequence({value:e})}toJSON(){const e={templateID:this.templateID};if(TEMPLATE_MAJOR_VERSION in this)e.templateMajorVersion=this.templateMajorVersion;if(TEMPLATE_MINOR_VERSION in this)e.templateMinorVersion=this.templateMinorVersion;return e}}const DISTRIBUTION_POINT$1="distributionPoint";const DISTRIBUTION_POINT_NAMES$1="distributionPointNames";const REASONS="reasons";const CRL_ISSUER="cRLIssuer";const CRL_ISSUER_NAMES="cRLIssuerNames";const CLEAR_PROPS$1l=[DISTRIBUTION_POINT$1,DISTRIBUTION_POINT_NAMES$1,REASONS,CRL_ISSUER,CRL_ISSUER_NAMES];class DistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT$1 in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT$1,DistributionPoint$1.defaultValues(DISTRIBUTION_POINT$1))}if(REASONS in e){this.reasons=getParametersValue(e,REASONS,DistributionPoint$1.defaultValues(REASONS))}if(CRL_ISSUER in e){this.cRLIssuer=getParametersValue(e,CRL_ISSUER,DistributionPoint$1.defaultValues(CRL_ISSUER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT$1:return[];case REASONS:return new BitString$1;case CRL_ISSUER:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.reasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Constructed({name:t.cRLIssuer||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2},value:[new Repeated({name:t.cRLIssuerNames||EMPTY_STRING,value:GeneralName$2.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1l);const t=compareSchema(e,e,DistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT$1,distributionPointNames:DISTRIBUTION_POINT_NAMES$1,reasons:REASONS,cRLIssuer:CRL_ISSUER,cRLIssuerNames:CRL_ISSUER_NAMES}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT$1 in t.result){if(t.result.distributionPoint.idBlock.tagNumber===0){this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})))}if(t.result.distributionPoint.idBlock.tagNumber===1){this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}}if(REASONS in t.result){this.reasons=new BitString$1({valueHex:t.result.reasons.valueBlock.valueHex})}if(CRL_ISSUER in t.result){this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]})}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.reasons){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView}))}if(this.cRLIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.reasons){e.reasons=this.reasons.toJSON()}if(this.cRLIssuer){e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))}return e}}DistributionPoint$1.CLASS_NAME="DistributionPoint";const DISTRIBUTION_POINTS="distributionPoints";const CLEAR_PROPS$1k=[DISTRIBUTION_POINTS];class CRLDistributionPoints$1 extends PkiObject{constructor(e={}){super();this.distributionPoints=getParametersValue(e,DISTRIBUTION_POINTS,CRLDistributionPoints$1.defaultValues(DISTRIBUTION_POINTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINTS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.distributionPoints||EMPTY_STRING,value:DistributionPoint$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1k);const t=compareSchema(e,e,CRLDistributionPoints$1.schema({names:{distributionPoints:DISTRIBUTION_POINTS}}));AsnError.assertSchema(t,this.className);this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new DistributionPoint$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}CRLDistributionPoints$1.CLASS_NAME="CRLDistributionPoints";const KEY_PURPOSES="keyPurposes";const CLEAR_PROPS$1j=[KEY_PURPOSES];class ExtKeyUsage extends PkiObject{constructor(e={}){super();this.keyPurposes=getParametersValue(e,KEY_PURPOSES,ExtKeyUsage.defaultValues(KEY_PURPOSES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_PURPOSES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.keyPurposes||EMPTY_STRING,value:new ObjectIdentifier$1})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1j);const t=compareSchema(e,e,ExtKeyUsage.schema({names:{keyPurposes:KEY_PURPOSES}}));AsnError.assertSchema(t,this.className);this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new Sequence({value:Array.from(this.keyPurposes,(e=>new ObjectIdentifier$1({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}ExtKeyUsage.CLASS_NAME="ExtKeyUsage";const ACCESS_DESCRIPTIONS="accessDescriptions";class InfoAccess extends PkiObject{constructor(e={}){super();this.accessDescriptions=getParametersValue(e,ACCESS_DESCRIPTIONS,InfoAccess.defaultValues(ACCESS_DESCRIPTIONS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_DESCRIPTIONS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.accessDescriptions||EMPTY_STRING,value:AccessDescription$1.schema()})]})}fromSchema(e){clearProps(e,[ACCESS_DESCRIPTIONS]);const t=compareSchema(e,e,InfoAccess.schema({names:{accessDescriptions:ACCESS_DESCRIPTIONS}}));AsnError.assertSchema(t,this.className);this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new AccessDescription$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}InfoAccess.CLASS_NAME="InfoAccess";const DISTRIBUTION_POINT="distributionPoint";const DISTRIBUTION_POINT_NAMES="distributionPointNames";const ONLY_CONTAINS_USER_CERTS="onlyContainsUserCerts";const ONLY_CONTAINS_CA_CERTS="onlyContainsCACerts";const ONLY_SOME_REASON="onlySomeReasons";const INDIRECT_CRL="indirectCRL";const ONLY_CONTAINS_ATTRIBUTE_CERTS="onlyContainsAttributeCerts";const CLEAR_PROPS$1i=[DISTRIBUTION_POINT,DISTRIBUTION_POINT_NAMES,ONLY_CONTAINS_USER_CERTS,ONLY_CONTAINS_CA_CERTS,ONLY_SOME_REASON,INDIRECT_CRL,ONLY_CONTAINS_ATTRIBUTE_CERTS];class IssuingDistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT,IssuingDistributionPoint$1.defaultValues(DISTRIBUTION_POINT))}this.onlyContainsUserCerts=getParametersValue(e,ONLY_CONTAINS_USER_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS));this.onlyContainsCACerts=getParametersValue(e,ONLY_CONTAINS_CA_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS));if(ONLY_SOME_REASON in e){this.onlySomeReasons=getParametersValue(e,ONLY_SOME_REASON,IssuingDistributionPoint$1.defaultValues(ONLY_SOME_REASON))}this.indirectCRL=getParametersValue(e,INDIRECT_CRL,IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL));this.onlyContainsAttributeCerts=getParametersValue(e,ONLY_CONTAINS_ATTRIBUTE_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT:return[];case ONLY_CONTAINS_USER_CERTS:return false;case ONLY_CONTAINS_CA_CERTS:return false;case ONLY_SOME_REASON:return 0;case INDIRECT_CRL:return false;case ONLY_CONTAINS_ATTRIBUTE_CERTS:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.onlyContainsUserCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.onlyContainsCACerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Primitive({name:t.onlySomeReasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:3}}),new Primitive({name:t.indirectCRL||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:4}}),new Primitive({name:t.onlyContainsAttributeCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1i);const t=compareSchema(e,e,IssuingDistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT,distributionPointNames:DISTRIBUTION_POINT_NAMES,onlyContainsUserCerts:ONLY_CONTAINS_USER_CERTS,onlyContainsCACerts:ONLY_CONTAINS_CA_CERTS,onlySomeReasons:ONLY_SOME_REASON,indirectCRL:INDIRECT_CRL,onlyContainsAttributeCerts:ONLY_CONTAINS_ATTRIBUTE_CERTS}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT in t.result){switch(true){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})));break;case t.result.distributionPoint.idBlock.tagNumber===1:{this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}}if(ONLY_CONTAINS_USER_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=e[0]!==0}if(ONLY_CONTAINS_CA_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=e[0]!==0}if(ONLY_SOME_REASON in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(INDIRECT_CRL in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=e[0]!==0}if(ONLY_CONTAINS_ATTRIBUTE_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=e[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=this.distributionPoint.toSchema();t.idBlock.tagClass=3;t.idBlock.tagNumber=1}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer}))}if(this.onlySomeReasons!==undefined){const t=new ArrayBuffer(1);const r=new Uint8Array(t);r[0]=this.onlySomeReasons;e.push(new Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.onlyContainsUserCerts=this.onlyContainsUserCerts}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.onlyContainsCACerts=this.onlyContainsCACerts}if(ONLY_SOME_REASON in this){e.onlySomeReasons=this.onlySomeReasons}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.indirectCRL=this.indirectCRL}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts}return e}}IssuingDistributionPoint$1.CLASS_NAME="IssuingDistributionPoint";const BASE="base";const MINIMUM="minimum";const MAXIMUM="maximum";const CLEAR_PROPS$1h=[BASE,MINIMUM,MAXIMUM];class GeneralSubtree$1 extends PkiObject{constructor(e={}){super();this.base=getParametersValue(e,BASE,GeneralSubtree$1.defaultValues(BASE));this.minimum=getParametersValue(e,MINIMUM,GeneralSubtree$1.defaultValues(MINIMUM));if(MAXIMUM in e){this.maximum=getParametersValue(e,MAXIMUM,GeneralSubtree$1.defaultValues(MAXIMUM))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case BASE:return new GeneralName$2;case MINIMUM:return 0;case MAXIMUM:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[GeneralName$2.schema(t.base||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.minimum||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Integer({name:t.maximum||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1h);const t=compareSchema(e,e,GeneralSubtree$1.schema({names:{base:{names:{blockName:BASE}},minimum:MINIMUM,maximum:MAXIMUM}}));AsnError.assertSchema(t,this.className);this.base=new GeneralName$2({schema:t.result.base});if(MINIMUM in t.result){if(t.result.minimum.valueBlock.isHexOnly)this.minimum=t.result.minimum;else this.minimum=t.result.minimum.valueBlock.valueDec}if(MAXIMUM in t.result){if(t.result.maximum.valueBlock.isHexOnly)this.maximum=t.result.maximum;else this.maximum=t.result.maximum.valueBlock.valueDec}}toSchema(){const e=[];e.push(this.base.toSchema());if(this.minimum!==0){let t=0;if(this.minimum instanceof Integer){t=this.minimum}else{t=new Integer({value:this.minimum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(MAXIMUM in this){let t=0;if(this.maximum instanceof Integer){t=this.maximum}else{t=new Integer({value:this.maximum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new Sequence({value:e})}toJSON(){const e={base:this.base.toJSON()};if(this.minimum!==0){if(typeof this.minimum==="number"){e.minimum=this.minimum}else{e.minimum=this.minimum.toJSON()}}if(this.maximum!==undefined){if(typeof this.maximum==="number"){e.maximum=this.maximum}else{e.maximum=this.maximum.toJSON()}}return e}}GeneralSubtree$1.CLASS_NAME="GeneralSubtree";const PERMITTED_SUBTREES="permittedSubtrees";const EXCLUDED_SUBTREES="excludedSubtrees";const CLEAR_PROPS$1g=[PERMITTED_SUBTREES,EXCLUDED_SUBTREES];class NameConstraints$1 extends PkiObject{constructor(e={}){super();if(PERMITTED_SUBTREES in e){this.permittedSubtrees=getParametersValue(e,PERMITTED_SUBTREES,NameConstraints$1.defaultValues(PERMITTED_SUBTREES))}if(EXCLUDED_SUBTREES in e){this.excludedSubtrees=getParametersValue(e,EXCLUDED_SUBTREES,NameConstraints$1.defaultValues(EXCLUDED_SUBTREES))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PERMITTED_SUBTREES:case EXCLUDED_SUBTREES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.permittedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.excludedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1g);const t=compareSchema(e,e,NameConstraints$1.schema({names:{permittedSubtrees:PERMITTED_SUBTREES,excludedSubtrees:EXCLUDED_SUBTREES}}));AsnError.assertSchema(t,this.className);if(PERMITTED_SUBTREES in t.result)this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new GeneralSubtree$1({schema:e})));if(EXCLUDED_SUBTREES in t.result)this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new GeneralSubtree$1({schema:e})))}toSchema(){const e=[];if(this.permittedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))}))}if(this.excludedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.permittedSubtrees){e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))}if(this.excludedSubtrees){e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))}return e}}NameConstraints$1.CLASS_NAME="NameConstraints";const REQUIRE_EXPLICIT_POLICY="requireExplicitPolicy";const INHIBIT_POLICY_MAPPING="inhibitPolicyMapping";const CLEAR_PROPS$1f=[REQUIRE_EXPLICIT_POLICY,INHIBIT_POLICY_MAPPING];class PolicyConstraints$1 extends PkiObject{constructor(e={}){super();if(REQUIRE_EXPLICIT_POLICY in e){this.requireExplicitPolicy=getParametersValue(e,REQUIRE_EXPLICIT_POLICY,PolicyConstraints$1.defaultValues(REQUIRE_EXPLICIT_POLICY))}if(INHIBIT_POLICY_MAPPING in e){this.inhibitPolicyMapping=getParametersValue(e,INHIBIT_POLICY_MAPPING,PolicyConstraints$1.defaultValues(INHIBIT_POLICY_MAPPING))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case REQUIRE_EXPLICIT_POLICY:return 0;case INHIBIT_POLICY_MAPPING:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.requireExplicitPolicy||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.inhibitPolicyMapping||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1f);const t=compareSchema(e,e,PolicyConstraints$1.schema({names:{requireExplicitPolicy:REQUIRE_EXPLICIT_POLICY,inhibitPolicyMapping:INHIBIT_POLICY_MAPPING}}));AsnError.assertSchema(t,this.className);if(REQUIRE_EXPLICIT_POLICY in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"Integer");this.requireExplicitPolicy=n.result.valueBlock.valueDec}if(INHIBIT_POLICY_MAPPING in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const n=fromBER(r);AsnError.assert(n,"Integer");this.inhibitPolicyMapping=n.result.valueBlock.valueDec}}toSchema(){const e=[];if(REQUIRE_EXPLICIT_POLICY in this){const t=new Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3;t.idBlock.tagNumber=0;e.push(t)}if(INHIBIT_POLICY_MAPPING in this){const t=new Integer({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3;t.idBlock.tagNumber=1;e.push(t)}return new Sequence({value:e})}toJSON(){const e={};if(REQUIRE_EXPLICIT_POLICY in this){e.requireExplicitPolicy=this.requireExplicitPolicy}if(INHIBIT_POLICY_MAPPING in this){e.inhibitPolicyMapping=this.inhibitPolicyMapping}return e}}PolicyConstraints$1.CLASS_NAME="PolicyConstraints";const ISSUER_DOMAIN_POLICY="issuerDomainPolicy";const SUBJECT_DOMAIN_POLICY="subjectDomainPolicy";const CLEAR_PROPS$1e=[ISSUER_DOMAIN_POLICY,SUBJECT_DOMAIN_POLICY];class PolicyMapping$1 extends PkiObject{constructor(e={}){super();this.issuerDomainPolicy=getParametersValue(e,ISSUER_DOMAIN_POLICY,PolicyMapping$1.defaultValues(ISSUER_DOMAIN_POLICY));this.subjectDomainPolicy=getParametersValue(e,SUBJECT_DOMAIN_POLICY,PolicyMapping$1.defaultValues(SUBJECT_DOMAIN_POLICY));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER_DOMAIN_POLICY:return EMPTY_STRING;case SUBJECT_DOMAIN_POLICY:return EMPTY_STRING;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.issuerDomainPolicy||EMPTY_STRING}),new ObjectIdentifier$1({name:t.subjectDomainPolicy||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1e);const t=compareSchema(e,e,PolicyMapping$1.schema({names:{issuerDomainPolicy:ISSUER_DOMAIN_POLICY,subjectDomainPolicy:SUBJECT_DOMAIN_POLICY}}));AsnError.assertSchema(t,this.className);this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString();this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.issuerDomainPolicy}),new ObjectIdentifier$1({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}PolicyMapping$1.CLASS_NAME="PolicyMapping";const MAPPINGS="mappings";const CLEAR_PROPS$1d=[MAPPINGS];class PolicyMappings$1 extends PkiObject{constructor(e={}){super();this.mappings=getParametersValue(e,MAPPINGS,PolicyMappings$1.defaultValues(MAPPINGS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MAPPINGS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.mappings||EMPTY_STRING,value:PolicyMapping$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1d);const t=compareSchema(e,e,PolicyMappings$1.schema({names:{mappings:MAPPINGS}}));AsnError.assertSchema(t,this.className);this.mappings=Array.from(t.result.mappings,(e=>new PolicyMapping$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}PolicyMappings$1.CLASS_NAME="PolicyMappings";const NOT_BEFORE$1="notBefore";const NOT_AFTER$1="notAfter";const CLEAR_PROPS$1c=[NOT_BEFORE$1,NOT_AFTER$1];class PrivateKeyUsagePeriod$1 extends PkiObject{constructor(e={}){super();if(NOT_BEFORE$1 in e){this.notBefore=getParametersValue(e,NOT_BEFORE$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_BEFORE$1))}if(NOT_AFTER$1 in e){this.notAfter=getParametersValue(e,NOT_AFTER$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_AFTER$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case NOT_BEFORE$1:return new Date;case NOT_AFTER$1:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.notBefore||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.notAfter||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1c);const t=compareSchema(e,e,PrivateKeyUsagePeriod$1.schema({names:{notBefore:NOT_BEFORE$1,notAfter:NOT_AFTER$1}}));AsnError.assertSchema(t,this.className);if(NOT_BEFORE$1 in t.result){const e=new GeneralizedTime;e.fromBuffer(t.result.notBefore.valueBlock.valueHex);this.notBefore=e.toDate()}if(NOT_AFTER$1 in t.result){const e=new GeneralizedTime({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex);this.notAfter=e.toDate()}}toSchema(){const e=[];if(NOT_BEFORE$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHexView}))}if(NOT_AFTER$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.notBefore){e.notBefore=this.notBefore}if(this.notAfter){e.notAfter=this.notAfter}return e}}PrivateKeyUsagePeriod$1.CLASS_NAME="PrivateKeyUsagePeriod";const ID="id";const TYPE$2="type";const VALUES="values";const QC_STATEMENT_CLEAR_PROPS=[ID,TYPE$2];const QC_STATEMENTS_CLEAR_PROPS=[VALUES];class QCStatement extends PkiObject{constructor(e={}){super();this.id=getParametersValue(e,ID,QCStatement.defaultValues(ID));if(TYPE$2 in e){this.type=getParametersValue(e,TYPE$2,QCStatement.defaultValues(TYPE$2))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ID:return EMPTY_STRING;case TYPE$2:return new Null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ID:return t===EMPTY_STRING;case TYPE$2:return t instanceof Null;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||EMPTY_STRING}),new Any({name:t.type||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,QC_STATEMENT_CLEAR_PROPS);const t=compareSchema(e,e,QCStatement.schema({names:{id:ID,type:TYPE$2}}));AsnError.assertSchema(t,this.className);this.id=t.result.id.valueBlock.toString();if(TYPE$2 in t.result)this.type=t.result.type}toSchema(){const e=[new ObjectIdentifier$1({value:this.id})];if(TYPE$2 in this)e.push(this.type);return new Sequence({value:e})}toJSON(){const e={id:this.id};if(this.type){e.type=this.type.toJSON()}return e}}QCStatement.CLASS_NAME="QCStatement";class QCStatements extends PkiObject{constructor(e={}){super();this.values=getParametersValue(e,VALUES,QCStatements.defaultValues(VALUES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VALUES:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VALUES:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:QCStatement.schema(t.value||{})})]})}fromSchema(e){clearProps(e,QC_STATEMENTS_CLEAR_PROPS);const t=compareSchema(e,e,QCStatements.schema({names:{values:VALUES}}));AsnError.assertSchema(t,this.className);this.values=Array.from(t.result.values,(e=>new QCStatement({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}QCStatements.CLASS_NAME="QCStatements";var _a$1;class ECNamedCurves{static register(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}_a$1=ECNamedCurves;ECNamedCurves.namedCurves={};(()=>{_a$1.register("P-256","1.2.840.10045.3.1.7",32);_a$1.register("P-384","1.3.132.0.34",48);_a$1.register("P-521","1.3.132.0.35",66);_a$1.register("K-256","1.3.132.0.10",32);_a$1.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32);_a$1.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48);_a$1.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)})();const X="x";const Y="y";const NAMED_CURVE$1="namedCurve";class ECPublicKey extends PkiObject{constructor(e={}){super();this.x=getParametersValue(e,X,ECPublicKey.defaultValues(X));this.y=getParametersValue(e,Y,ECPublicKey.defaultValues(Y));this.namedCurve=getParametersValue(e,NAMED_CURVE$1,ECPublicKey.defaultValues(NAMED_CURVE$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case X:case Y:return EMPTY_BUFFER;case NAMED_CURVE$1:return EMPTY_STRING;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case X:case Y:return t instanceof ArrayBuffer&&isEqualBuffer(t,ECPublicKey.defaultValues(e));case NAMED_CURVE$1:return typeof t==="string"&&t===ECPublicKey.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new RawData}fromSchema(e){const t=build$1.BufferSourceConverter.toUint8Array(e);if(t[0]!==4){throw new Error("Object's schema was not verified against input data for ECPublicKey")}const r=ECNamedCurves.find(this.namedCurve);if(!r){throw new Error(`Incorrect curve OID: ${this.namedCurve}`)}const n=r.size;if(t.byteLength!==n*2+1){throw new Error("Object's schema was not verified against input data for ECPublicKey")}this.namedCurve=r.name;this.x=t.slice(1,n+1).buffer;this.y=t.slice(1+n,n*2+1).buffer}toSchema(){return new RawData({data:utilConcatBuf(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=ECNamedCurves.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:toBase64(arrayBufferToString(this.x),true,true,false),y:toBase64(arrayBufferToString(this.y),true,true,false)}}fromJSON(e){ParameterError.assert("json",e,"crv","x","y");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const n=stringToArrayBuffer(fromBase64(e.x,true));if(n.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x);const r=new Uint8Array(n);e.set(r,1)}else{this.x=n.slice(0,t)}const i=stringToArrayBuffer(fromBase64(e.y,true));if(i.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y);const r=new Uint8Array(i);e.set(r,1)}else{this.y=i.slice(0,t)}}}ECPublicKey.CLASS_NAME="ECPublicKey";const MODULUS$1="modulus";const PUBLIC_EXPONENT$1="publicExponent";const CLEAR_PROPS$1b=[MODULUS$1,PUBLIC_EXPONENT$1];class RSAPublicKey$1 extends PkiObject{constructor(e={}){super();this.modulus=getParametersValue(e,MODULUS$1,RSAPublicKey$1.defaultValues(MODULUS$1));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT$1,RSAPublicKey$1.defaultValues(PUBLIC_EXPONENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MODULUS$1:return new Integer;case PUBLIC_EXPONENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1b);const t=compareSchema(e,e,RSAPublicKey$1.schema({names:{modulus:MODULUS$1,publicExponent:PUBLIC_EXPONENT$1}}));AsnError.assertSchema(t,this.className);this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent}toSchema(){return new Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:build$1.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),e:build$1.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"n","e");const t=stringToArrayBuffer(fromBase64(e.n,true));this.modulus=new Integer({valueHex:t.slice(0,Math.pow(2,nearestPowerOf2(t.byteLength)))});this.publicExponent=new Integer({valueHex:stringToArrayBuffer(fromBase64(e.e,true)).slice(0,3)})}}RSAPublicKey$1.CLASS_NAME="RSAPublicKey";const ALGORITHM$1="algorithm";const SUBJECT_PUBLIC_KEY="subjectPublicKey";const CLEAR_PROPS$1a=[ALGORITHM$1,SUBJECT_PUBLIC_KEY];class PublicKeyInfo$1 extends PkiObject{constructor(e={}){super();this.algorithm=getParametersValue(e,ALGORITHM$1,PublicKeyInfo$1.defaultValues(ALGORITHM$1));this.subjectPublicKey=getParametersValue(e,SUBJECT_PUBLIC_KEY,PublicKeyInfo$1.defaultValues(SUBJECT_PUBLIC_KEY));const t=getParametersValue(e,"parsedKey",null);if(t){this.parsedKey=t}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}get parsedKey(){if(this._parsedKey===undefined){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm){if(this.algorithm.algorithmParams.constructor.blockName()===ObjectIdentifier$1.blockName()){try{this._parsedKey=new ECPublicKey({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){console.warn(e)}}}break;case"1.2.840.113549.1.1.1":{const e=fromBER(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1){try{this._parsedKey=new RSAPublicKey$1({schema:e.result})}catch(e){}}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||undefined}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case ALGORITHM$1:return new AlgorithmIdentifier$2;case SUBJECT_PUBLIC_KEY:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.algorithm||{}),new BitString$1({name:t.subjectPublicKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1a);const t=compareSchema(e,e,PublicKeyInfo$1.schema({names:{algorithm:{names:{blockName:ALGORITHM$1}},subjectPublicKey:SUBJECT_PUBLIC_KEY}}));AsnError.assertSchema(t,this.className);this.algorithm=new AlgorithmIdentifier$2({schema:t.result.algorithm});this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey){return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()}}const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPublicKey({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPublicKey$1({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new BitString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}async importKey(e,t=getCrypto(true)){try{if(!e){throw new Error("Need to provide publicKey input parameter")}const r=await t.exportKey("spki",e);const n=fromBER(r);try{this.fromSchema(n.result)}catch(e){throw new Error("Error during initializing object from schema")}}catch(e){const t=e instanceof Error?e.message:`${e}`;throw new Error(`Error during exporting public key: ${t}`)}}}PublicKeyInfo$1.CLASS_NAME="PublicKeyInfo";const VERSION$l="version";const PRIVATE_KEY$1="privateKey";const NAMED_CURVE="namedCurve";const PUBLIC_KEY$1="publicKey";const CLEAR_PROPS$19=[VERSION$l,PRIVATE_KEY$1,NAMED_CURVE,PUBLIC_KEY$1];class ECPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$l,ECPrivateKey$1.defaultValues(VERSION$l));this.privateKey=getParametersValue(e,PRIVATE_KEY$1,ECPrivateKey$1.defaultValues(PRIVATE_KEY$1));if(NAMED_CURVE in e){this.namedCurve=getParametersValue(e,NAMED_CURVE,ECPrivateKey$1.defaultValues(NAMED_CURVE))}if(PUBLIC_KEY$1 in e){this.publicKey=getParametersValue(e,PUBLIC_KEY$1,ECPrivateKey$1.defaultValues(PUBLIC_KEY$1))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$l:return 1;case PRIVATE_KEY$1:return new OctetString$1;case NAMED_CURVE:return EMPTY_STRING;case PUBLIC_KEY$1:return new ECPublicKey;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$l:return t===ECPrivateKey$1.defaultValues(e);case PRIVATE_KEY$1:return t.isEqual(ECPrivateKey$1.defaultValues(e));case NAMED_CURVE:return t===EMPTY_STRING;case PUBLIC_KEY$1:return ECPublicKey.compareWithDefault(NAMED_CURVE,t.namedCurve)&&ECPublicKey.compareWithDefault("x",t.x)&&ECPublicKey.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({name:t.namedCurve||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({name:t.publicKey||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$19);const t=compareSchema(e,e,ECPrivateKey$1.schema({names:{version:VERSION$l,privateKey:PRIVATE_KEY$1,namedCurve:NAMED_CURVE,publicKey:PUBLIC_KEY$1}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKey=t.result.privateKey;if(NAMED_CURVE in t.result){this.namedCurve=t.result.namedCurve.valueBlock.toString()}if(PUBLIC_KEY$1 in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};if(NAMED_CURVE in this){e.namedCurve=this.namedCurve}this.publicKey=new ECPublicKey(e)}}toSchema(){const e=[new Integer({value:this.version}),this.privateKey];if(this.namedCurve){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({value:this.namedCurve})]}))}if(this.publicKey){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({valueHex:this.publicKey.toSchema().toBER(false)})]}))}return new Sequence({value:e})}toJSON(){if(!this.namedCurve||ECPrivateKey$1.compareWithDefault(NAMED_CURVE,this.namedCurve)){throw new Error('Not enough information for making JSON: absent "namedCurve" value')}const e=ECNamedCurves.find(this.namedCurve);const t={crv:e?e.name:this.namedCurve,d:build$1.Convert.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x;t.y=e.y}return t}fromJSON(e){ParameterError.assert("json",e,"crv","d");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const n=build$1.Convert.FromBase64Url(e.d);if(n.byteLength<t){const e=new ArrayBuffer(t);const r=new Uint8Array(e);const i=new Uint8Array(n);r.set(i,1);this.privateKey=new OctetString$1({valueHex:e})}else{this.privateKey=new OctetString$1({valueHex:n.slice(0,t)})}if(e.x&&e.y){this.publicKey=new ECPublicKey({json:e})}}}ECPrivateKey$1.CLASS_NAME="ECPrivateKey";const PRIME="prime";const EXPONENT="exponent";const COEFFICIENT$1="coefficient";const CLEAR_PROPS$18=[PRIME,EXPONENT,COEFFICIENT$1];class OtherPrimeInfo$1 extends PkiObject{constructor(e={}){super();this.prime=getParametersValue(e,PRIME,OtherPrimeInfo$1.defaultValues(PRIME));this.exponent=getParametersValue(e,EXPONENT,OtherPrimeInfo$1.defaultValues(EXPONENT));this.coefficient=getParametersValue(e,COEFFICIENT$1,OtherPrimeInfo$1.defaultValues(COEFFICIENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PRIME:return new Integer;case EXPONENT:return new Integer;case COEFFICIENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.prime||EMPTY_STRING}),new Integer({name:t.exponent||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$18);const t=compareSchema(e,e,OtherPrimeInfo$1.schema({names:{prime:PRIME,exponent:EXPONENT,coefficient:COEFFICIENT$1}}));AsnError.assertSchema(t,this.className);this.prime=t.result.prime.convertFromDER();this.exponent=t.result.exponent.convertFromDER();this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:build$1.Convert.ToBase64Url(this.prime.valueBlock.valueHexView),d:build$1.Convert.ToBase64Url(this.exponent.valueBlock.valueHexView),t:build$1.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"r","d","r");this.prime=new Integer({valueHex:build$1.Convert.FromBase64Url(e.r)});this.exponent=new Integer({valueHex:build$1.Convert.FromBase64Url(e.d)});this.coefficient=new Integer({valueHex:build$1.Convert.FromBase64Url(e.t)})}}OtherPrimeInfo$1.CLASS_NAME="OtherPrimeInfo";const VERSION$k="version";const MODULUS="modulus";const PUBLIC_EXPONENT="publicExponent";const PRIVATE_EXPONENT="privateExponent";const PRIME1="prime1";const PRIME2="prime2";const EXPONENT1="exponent1";const EXPONENT2="exponent2";const COEFFICIENT="coefficient";const OTHER_PRIME_INFOS="otherPrimeInfos";const CLEAR_PROPS$17=[VERSION$k,MODULUS,PUBLIC_EXPONENT,PRIVATE_EXPONENT,PRIME1,PRIME2,EXPONENT1,EXPONENT2,COEFFICIENT,OTHER_PRIME_INFOS];class RSAPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$k,RSAPrivateKey$1.defaultValues(VERSION$k));this.modulus=getParametersValue(e,MODULUS,RSAPrivateKey$1.defaultValues(MODULUS));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT,RSAPrivateKey$1.defaultValues(PUBLIC_EXPONENT));this.privateExponent=getParametersValue(e,PRIVATE_EXPONENT,RSAPrivateKey$1.defaultValues(PRIVATE_EXPONENT));this.prime1=getParametersValue(e,PRIME1,RSAPrivateKey$1.defaultValues(PRIME1));this.prime2=getParametersValue(e,PRIME2,RSAPrivateKey$1.defaultValues(PRIME2));this.exponent1=getParametersValue(e,EXPONENT1,RSAPrivateKey$1.defaultValues(EXPONENT1));this.exponent2=getParametersValue(e,EXPONENT2,RSAPrivateKey$1.defaultValues(EXPONENT2));this.coefficient=getParametersValue(e,COEFFICIENT,RSAPrivateKey$1.defaultValues(COEFFICIENT));if(OTHER_PRIME_INFOS in e){this.otherPrimeInfos=getParametersValue(e,OTHER_PRIME_INFOS,RSAPrivateKey$1.defaultValues(OTHER_PRIME_INFOS))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$k:return 0;case MODULUS:return new Integer;case PUBLIC_EXPONENT:return new Integer;case PRIVATE_EXPONENT:return new Integer;case PRIME1:return new Integer;case PRIME2:return new Integer;case EXPONENT1:return new Integer;case EXPONENT2:return new Integer;case COEFFICIENT:return new Integer;case OTHER_PRIME_INFOS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING}),new Integer({name:t.privateExponent||EMPTY_STRING}),new Integer({name:t.prime1||EMPTY_STRING}),new Integer({name:t.prime2||EMPTY_STRING}),new Integer({name:t.exponent1||EMPTY_STRING}),new Integer({name:t.exponent2||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.otherPrimeInfosName||EMPTY_STRING,value:OtherPrimeInfo$1.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$17);const t=compareSchema(e,e,RSAPrivateKey$1.schema({names:{version:VERSION$k,modulus:MODULUS,publicExponent:PUBLIC_EXPONENT,privateExponent:PRIVATE_EXPONENT,prime1:PRIME1,prime2:PRIME2,exponent1:EXPONENT1,exponent2:EXPONENT2,coefficient:COEFFICIENT,otherPrimeInfo:{names:{blockName:OTHER_PRIME_INFOS}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent;this.privateExponent=t.result.privateExponent.convertFromDER(256);this.prime1=t.result.prime1.convertFromDER(128);this.prime2=t.result.prime2.convertFromDER(128);this.exponent1=t.result.exponent1.convertFromDER(128);this.exponent2=t.result.exponent2.convertFromDER(128);this.coefficient=t.result.coefficient.convertFromDER(128);if(OTHER_PRIME_INFOS in t.result)this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new OtherPrimeInfo$1({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(this.modulus.convertToDER());e.push(this.publicExponent);e.push(this.privateExponent.convertToDER());e.push(this.prime1.convertToDER());e.push(this.prime2.convertToDER());e.push(this.exponent1.convertToDER());e.push(this.exponent2.convertToDER());e.push(this.coefficient.convertToDER());if(this.otherPrimeInfos){e.push(new Sequence({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={n:build$1.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),e:build$1.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:build$1.Convert.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:build$1.Convert.ToBase64Url(this.prime1.valueBlock.valueHexView),q:build$1.Convert.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:build$1.Convert.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:build$1.Convert.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:build$1.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView)};if(this.otherPrimeInfos){e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))}return e}fromJSON(e){ParameterError.assert("json",e,"n","e","d","p","q","dp","dq","qi");this.modulus=new Integer({valueHex:build$1.Convert.FromBase64Url(e.n)});this.publicExponent=new Integer({valueHex:build$1.Convert.FromBase64Url(e.e)});this.privateExponent=new Integer({valueHex:build$1.Convert.FromBase64Url(e.d)});this.prime1=new Integer({valueHex:build$1.Convert.FromBase64Url(e.p)});this.prime2=new Integer({valueHex:build$1.Convert.FromBase64Url(e.q)});this.exponent1=new Integer({valueHex:build$1.Convert.FromBase64Url(e.dp)});this.exponent2=new Integer({valueHex:build$1.Convert.FromBase64Url(e.dq)});this.coefficient=new Integer({valueHex:build$1.Convert.FromBase64Url(e.qi)});if(e.oth){this.otherPrimeInfos=Array.from(e.oth,(e=>new OtherPrimeInfo$1({json:e})))}}}RSAPrivateKey$1.CLASS_NAME="RSAPrivateKey";const VERSION$j="version";const PRIVATE_KEY_ALGORITHM="privateKeyAlgorithm";const PRIVATE_KEY="privateKey";const ATTRIBUTES$5="attributes";const PARSED_KEY="parsedKey";const CLEAR_PROPS$16=[VERSION$j,PRIVATE_KEY_ALGORITHM,PRIVATE_KEY,ATTRIBUTES$5];class PrivateKeyInfo$2 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$j,PrivateKeyInfo$2.defaultValues(VERSION$j));this.privateKeyAlgorithm=getParametersValue(e,PRIVATE_KEY_ALGORITHM,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY_ALGORITHM));this.privateKey=getParametersValue(e,PRIVATE_KEY,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY));if(ATTRIBUTES$5 in e){this.attributes=getParametersValue(e,ATTRIBUTES$5,PrivateKeyInfo$2.defaultValues(ATTRIBUTES$5))}if(PARSED_KEY in e){this.parsedKey=getParametersValue(e,PARSED_KEY,PrivateKeyInfo$2.defaultValues(PARSED_KEY))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$j:return 0;case PRIVATE_KEY_ALGORITHM:return new AlgorithmIdentifier$2;case PRIVATE_KEY:return new OctetString$1;case ATTRIBUTES$5:return[];case PARSED_KEY:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.privateKeyAlgorithm||{}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$16);const t=compareSchema(e,e,PrivateKeyInfo$2.schema({names:{version:VERSION$j,privateKeyAlgorithm:{names:{blockName:PRIVATE_KEY_ALGORITHM}},privateKey:PRIVATE_KEY,attributes:ATTRIBUTES$5}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKeyAlgorithm=new AlgorithmIdentifier$2({schema:t.result.privateKeyAlgorithm});this.privateKey=t.result.privateKey;if(ATTRIBUTES$5 in t.result)this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})));switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1)this.parsedKey=new RSAPrivateKey$1({schema:e.result})}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm){if(this.privateKeyAlgorithm.algorithmParams instanceof ObjectIdentifier$1){const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1){this.parsedKey=new ECPrivateKey$1({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result})}}}break}}toSchema(){const e=[new Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];if(this.attributes){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};if(this.attributes){e.attributes=Array.from(this.attributes,(e=>e.toJSON()))}return e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new OctetString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}}PrivateKeyInfo$2.CLASS_NAME="PrivateKeyInfo";const CONTENT_TYPE$1="contentType";const CONTENT_ENCRYPTION_ALGORITHM="contentEncryptionAlgorithm";const ENCRYPTED_CONTENT="encryptedContent";const CLEAR_PROPS$15=[CONTENT_TYPE$1,CONTENT_ENCRYPTION_ALGORITHM,ENCRYPTED_CONTENT];class EncryptedContentInfo$1 extends PkiObject{constructor(e={}){super();this.contentType=getParametersValue(e,CONTENT_TYPE$1,EncryptedContentInfo$1.defaultValues(CONTENT_TYPE$1));this.contentEncryptionAlgorithm=getParametersValue(e,CONTENT_ENCRYPTION_ALGORITHM,EncryptedContentInfo$1.defaultValues(CONTENT_ENCRYPTION_ALGORITHM));if(ENCRYPTED_CONTENT in e&&e.encryptedContent){this.encryptedContent=e.encryptedContent;if(this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4){if(this.encryptedContent.idBlock.isConstructed===false){const e=new OctetString$1({idBlock:{isConstructed:true},isConstructed:true});let t=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let n=r.byteLength;const i=1024;while(n>0){const s=new Uint8Array(r,t,t+i>r.byteLength?r.byteLength-t:i);const a=new ArrayBuffer(s.length);const o=new Uint8Array(a);for(let e=0;e<o.length;e++)o[e]=s[e];e.valueBlock.value.push(new OctetString$1({valueHex:a}));n-=s.length;t+=s.length}this.encryptedContent=e}}}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CONTENT_TYPE$1:return EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return new AlgorithmIdentifier$2;case ENCRYPTED_CONTENT:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CONTENT_TYPE$1:return t===EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ENCRYPTED_CONTENT:return t.isEqual(EncryptedContentInfo$1.defaultValues(ENCRYPTED_CONTENT));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.contentType||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.contentEncryptionAlgorithm||{}),new Choice({value:[new Constructed({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({value:new OctetString$1})]}),new Primitive({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$15);const t=compareSchema(e,e,EncryptedContentInfo$1.schema({names:{contentType:CONTENT_TYPE$1,contentEncryptionAlgorithm:{names:{blockName:CONTENT_ENCRYPTION_ALGORITHM}},encryptedContent:ENCRYPTED_CONTENT}}));AsnError.assertSchema(t,this.className);this.contentType=t.result.contentType.valueBlock.toString();this.contentEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.contentEncryptionAlgorithm});if(ENCRYPTED_CONTENT in t.result){this.encryptedContent=t.result.encryptedContent;this.encryptedContent.idBlock.tagClass=1;this.encryptedContent.idBlock.tagNumber=4}}toSchema(){const e={isIndefiniteForm:false};const t=[];t.push(new ObjectIdentifier$1({value:this.contentType}));t.push(this.contentEncryptionAlgorithm.toSchema());if(this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const r=this.encryptedContent;r.idBlock.tagClass=3;r.idBlock.tagNumber=0;r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;t.push(r)}return new Sequence({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};if(this.encryptedContent){e.encryptedContent=this.encryptedContent.toJSON()}return e}getEncryptedContent(){if(!this.encryptedContent){throw new Error("Parameter 'encryptedContent' is undefined")}return OctetString$1.prototype.getValue.call(this.encryptedContent)}}EncryptedContentInfo$1.CLASS_NAME="EncryptedContentInfo";const HASH_ALGORITHM$4="hashAlgorithm";const MASK_GEN_ALGORITHM$1="maskGenAlgorithm";const SALT_LENGTH="saltLength";const TRAILER_FIELD="trailerField";const CLEAR_PROPS$14=[HASH_ALGORITHM$4,MASK_GEN_ALGORITHM$1,SALT_LENGTH,TRAILER_FIELD];class RSASSAPSSParams extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$4,RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4));this.maskGenAlgorithm=getParametersValue(e,MASK_GEN_ALGORITHM$1,RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1));this.saltLength=getParametersValue(e,SALT_LENGTH,RSASSAPSSParams.defaultValues(SALT_LENGTH));this.trailerField=getParametersValue(e,TRAILER_FIELD,RSASSAPSSParams.defaultValues(TRAILER_FIELD));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case HASH_ALGORITHM$4:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});case MASK_GEN_ALGORITHM$1:return new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null}).toSchema()});case SALT_LENGTH:return 20;case TRAILER_FIELD:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},optional:true,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},optional:true,value:[AlgorithmIdentifier$2.schema(t.maskGenAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:2},optional:true,value:[new Integer({name:t.saltLength||EMPTY_STRING})]}),new Constructed({idBlock:{tagClass:3,tagNumber:3},optional:true,value:[new Integer({name:t.trailerField||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$14);const t=compareSchema(e,e,RSASSAPSSParams.schema({names:{hashAlgorithm:{names:{blockName:HASH_ALGORITHM$4}},maskGenAlgorithm:{names:{blockName:MASK_GEN_ALGORITHM$1}},saltLength:SALT_LENGTH,trailerField:TRAILER_FIELD}}));AsnError.assertSchema(t,this.className);if(HASH_ALGORITHM$4 in t.result)this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});if(MASK_GEN_ALGORITHM$1 in t.result)this.maskGenAlgorithm=new AlgorithmIdentifier$2({schema:t.result.maskGenAlgorithm});if(SALT_LENGTH in t.result)this.saltLength=t.result.saltLength.valueBlock.valueDec;if(TRAILER_FIELD in t.result)this.trailerField=t.result.trailerField.valueBlock.valueDec}toSchema(){const e=[];if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]}))}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]}))}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new Integer({value:this.saltLength})]}))}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new Integer({value:this.trailerField})]}))}return new Sequence({value:e})}toJSON(){const e={};if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.hashAlgorithm=this.hashAlgorithm.toJSON()}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.saltLength=this.saltLength}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.trailerField=this.trailerField}return e}}RSASSAPSSParams.CLASS_NAME="RSASSAPSSParams";const SALT="salt";const ITERATION_COUNT="iterationCount";const KEY_LENGTH="keyLength";const PRF="prf";const CLEAR_PROPS$13=[SALT,ITERATION_COUNT,KEY_LENGTH,PRF];class PBKDF2Params extends PkiObject{constructor(e={}){super();this.salt=getParametersValue(e,SALT,PBKDF2Params.defaultValues(SALT));this.iterationCount=getParametersValue(e,ITERATION_COUNT,PBKDF2Params.defaultValues(ITERATION_COUNT));if(KEY_LENGTH in e){this.keyLength=getParametersValue(e,KEY_LENGTH,PBKDF2Params.defaultValues(KEY_LENGTH))}if(PRF in e){this.prf=getParametersValue(e,PRF,PBKDF2Params.defaultValues(PRF))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SALT:return{};case ITERATION_COUNT:return-1;case KEY_LENGTH:return 0;case PRF:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Choice({value:[new OctetString$1({name:t.saltPrimitive||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.saltConstructed||{})]}),new Integer({name:t.iterationCount||EMPTY_STRING}),new Integer({name:t.keyLength||EMPTY_STRING,optional:true}),AlgorithmIdentifier$2.schema(t.prf||{names:{optional:true}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$13);const t=compareSchema(e,e,PBKDF2Params.schema({names:{saltPrimitive:SALT,saltConstructed:{names:{blockName:SALT}},iterationCount:ITERATION_COUNT,keyLength:KEY_LENGTH,prf:{names:{blockName:PRF,optional:true}}}}));AsnError.assertSchema(t,this.className);this.salt=t.result.salt;this.iterationCount=t.result.iterationCount.valueBlock.valueDec;if(KEY_LENGTH in t.result)this.keyLength=t.result.keyLength.valueBlock.valueDec;if(PRF in t.result)this.prf=new AlgorithmIdentifier$2({schema:t.result.prf})}toSchema(){const e=[];e.push(this.salt);e.push(new Integer({value:this.iterationCount}));if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.push(new Integer({value:this.keyLength}))}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.push(this.prf.toSchema())}return new Sequence({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.keyLength=this.keyLength}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.prf=this.prf.toJSON()}return e}}PBKDF2Params.CLASS_NAME="PBKDF2Params";const KEY_DERIVATION_FUNC="keyDerivationFunc";const ENCRYPTION_SCHEME="encryptionScheme";const CLEAR_PROPS$12=[KEY_DERIVATION_FUNC,ENCRYPTION_SCHEME];class PBES2Params extends PkiObject{constructor(e={}){super();this.keyDerivationFunc=getParametersValue(e,KEY_DERIVATION_FUNC,PBES2Params.defaultValues(KEY_DERIVATION_FUNC));this.encryptionScheme=getParametersValue(e,ENCRYPTION_SCHEME,PBES2Params.defaultValues(ENCRYPTION_SCHEME));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_DERIVATION_FUNC:return new AlgorithmIdentifier$2;case ENCRYPTION_SCHEME:return new AlgorithmIdentifier$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.keyDerivationFunc||{}),AlgorithmIdentifier$2.schema(t.encryptionScheme||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$12);const t=compareSchema(e,e,PBES2Params.schema({names:{keyDerivationFunc:{names:{blockName:KEY_DERIVATION_FUNC}},encryptionScheme:{names:{blockName:ENCRYPTION_SCHEME}}}}));AsnError.assertSchema(t,this.className);this.keyDerivationFunc=new AlgorithmIdentifier$2({schema:t.result.keyDerivationFunc});this.encryptionScheme=new AlgorithmIdentifier$2({schema:t.result.encryptionScheme})}toSchema(){return new Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}PBES2Params.CLASS_NAME="PBES2Params";class AbstractCryptoEngine{constructor(e){this.crypto=e.crypto;this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle;this.name=getParametersValue(e,"name",EMPTY_STRING)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function makePKCS12B2Key(e,t,r,n,i,s){let a;let o;const f=[];switch(t.toUpperCase()){case"SHA-1":a=20;o=64;break;case"SHA-256":a=32;o=64;break;case"SHA-384":a=48;o=128;break;case"SHA-512":a=64;o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n);const u=new ArrayBuffer(n.byteLength*2+2);const l=new Uint8Array(u);for(let e=0;e<c.length;e++){l[e*2]=0;l[e*2+1]=c[e]}l[l.length-2]=0;l[l.length-1]=0;n=u.slice(0);const h=new ArrayBuffer(o);const d=new Uint8Array(h);for(let e=0;e<h.byteLength;e++)d[e]=3;const p=i.byteLength;const y=o*Math.ceil(p/o);const m=new ArrayBuffer(y);const g=new Uint8Array(m);const b=new Uint8Array(i);for(let e=0;e<y;e++)g[e]=b[e%p];const v=n.byteLength;const w=o*Math.ceil(v/o);const A=new ArrayBuffer(w);const E=new Uint8Array(A);const _=new Uint8Array(n);for(let e=0;e<w;e++)E[e]=_[e%v];const S=m.byteLength+A.byteLength;let $=new ArrayBuffer(S);let T=new Uint8Array($);T.set(g);T.set(E,g.length);const C=Math.ceil((r>>3)/a);let P=Promise.resolve($);for(let r=0;r<=C;r++){P=P.then((e=>{const t=new ArrayBuffer(h.byteLength+e.byteLength);const r=new Uint8Array(t);r.set(d);r.set(T,d.length);return t}));for(let r=0;r<s;r++)P=P.then((r=>e.digest({name:t},new Uint8Array(r))));P=P.then((e=>{const t=new ArrayBuffer(o);const r=new Uint8Array(t);for(let n=0;n<t.byteLength;n++)r[n]=e[n%e.byteLength];const n=Math.ceil(p/o)+Math.ceil(v/o);const i=[];let s=0;let a=o;for(let e=0;e<n;e++){const e=Array.from(new Uint8Array($.slice(s,s+a)));s+=o;if(s+o>$.byteLength)a=$.byteLength-s;let n=511;for(let i=t.byteLength-1;i>=0;i--){n>>=8;n+=r[i]+e[i];e[i]=n&255}i.push(...e)}$=new ArrayBuffer(i.length);T=new Uint8Array($);T.set(i);f.push(...new Uint8Array(e));return $}))}P=P.then((()=>{const e=new ArrayBuffer(r>>3);const t=new Uint8Array(e);t.set(new Uint8Array(f).slice(0,r>>3));return e}));return P}function prepareAlgorithm(e){const t=typeof e==="string"?{name:e}:e;if("hash"in t){return{...t,hash:prepareAlgorithm(t.hash)}}return t}class CryptoEngine extends AbstractCryptoEngine{async importKey(e,t,r,n,i){var s,a,o,f,c,u;let l={};const h=prepareAlgorithm(r);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,n,i);case"spki":{const e=fromBER(build$1.BufferSourceConverter.toArrayBuffer(t));AsnError.assert(e,"keyData");const r=new PublicKeyInfo$1;try{r.fromSchema(e.result)}catch{throw new ArgumentError("Incorrect keyData")}switch(h.name.toUpperCase()){case"RSA-PSS":{if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{i=["verify"];l.kty="RSA";l.ext=n;l.key_ops=i;if(r.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`);if(!l.alg){if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(l,e)}break;case"ECDSA":i=["verify"];case"ECDH":{l={kty:"EC",ext:n,key_ops:i};if(r.algorithm.algorithmId!=="1.2.840.10045.2.1"){throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`)}const e=r.toJSON();Object.assign(l,e)}break;case"RSA-OAEP":{l.kty="RSA";l.ext=n;l.key_ops=i;if(this.name.toLowerCase()==="safari")l.alg="RSA-OAEP";else{if(!h.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(h.hash.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${h.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(l,e)}break;case"RSAES-PKCS1-V1_5":{l.kty="RSA";l.ext=n;l.key_ops=i;l.alg="PS1";const e=r.toJSON();Object.assign(l,e)}break;default:throw new Error(`Incorrect algorithm name: ${h.name.toUpperCase()}`)}}break;case"pkcs8":{const e=new PrivateKeyInfo$2;const r=fromBER(build$1.BufferSourceConverter.toArrayBuffer(t));AsnError.assert(r,"keyData");try{e.fromSchema(r.result)}catch(e){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(h.name.toUpperCase()){case"RSA-PSS":{switch((s=h.hash)===null||s===void 0?void 0:s.name.toUpperCase()){case"SHA-1":l.alg="PS1";break;case"SHA-256":l.alg="PS256";break;case"SHA-384":l.alg="PS384";break;case"SHA-512":l.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(a=h.hash)===null||a===void 0?void 0:a.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{i=["sign"];l.kty="RSA";l.ext=n;l.key_ops=i;if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${e.privateKeyAlgorithm.algorithmId}`);if("alg"in l===false){switch((o=h.hash)===null||o===void 0?void 0:o.name.toUpperCase()){case"SHA-1":l.alg="RS1";break;case"SHA-256":l.alg="RS256";break;case"SHA-384":l.alg="RS384";break;case"SHA-512":l.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(f=h.hash)===null||f===void 0?void 0:f.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(l,t)}break;case"ECDSA":i=["sign"];case"ECDH":{l={kty:"EC",ext:n,key_ops:i};if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${e.privateKeyAlgorithm.algorithmId}`);const t=e.toJSON();Object.assign(l,t)}break;case"RSA-OAEP":{l.kty="RSA";l.ext=n;l.key_ops=i;if(this.name.toLowerCase()==="safari")l.alg="RSA-OAEP";else{switch((c=h.hash)===null||c===void 0?void 0:c.name.toUpperCase()){case"SHA-1":l.alg="RSA-OAEP";break;case"SHA-256":l.alg="RSA-OAEP-256";break;case"SHA-384":l.alg="RSA-OAEP-384";break;case"SHA-512":l.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(u=h.hash)===null||u===void 0?void 0:u.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(l,t)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"];l.kty="RSA";l.ext=n;l.key_ops=i;l.alg="PS1";const t=e.toJSON();Object.assign(l,t)}break;default:throw new Error(`Incorrect algorithm name: ${h.name.toUpperCase()}`)}}break;case"jwk":l=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari"){try{return this.subtle.importKey("jwk",stringToArrayBuffer(JSON.stringify(l)),r,n,i)}catch{return this.subtle.importKey("jwk",l,r,n,i)}}return this.subtle.importKey("jwk",l,r,n,i)}async exportKey(e,t){let r=await this.subtle.exportKey("jwk",t);if(this.name.toLowerCase()==="safari"){if(r instanceof ArrayBuffer){r=JSON.parse(arrayBufferToString(r))}}switch(e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new PublicKeyInfo$1;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"pkcs8":{const e=new PrivateKeyInfo$2;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"jwk":return r;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,r,n,i,s){if(e.toLowerCase()===t.toLowerCase()){return r}const a=await this.importKey(e,r,n,i,s);return this.exportKey(t,a)}getAlgorithmByOID(e,t=false,r){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"};case"1.3.132.0.10":return{name:"K-256",hash:{name:"SHA-256"}}}if(t){throw new Error(`Unsupported algorithm identifier ${r?`for ${r} `:EMPTY_STRING}: ${e}`)}return{}}getOIDByAlgorithm(e,t=false,r){let n=EMPTY_STRING;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":n="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.113549.1.1.5";break;case"SHA-256":n="1.2.840.113549.1.1.11";break;case"SHA-384":n="1.2.840.113549.1.1.12";break;case"SHA-512":n="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":n="1.2.840.113549.1.1.10";break;case"RSA-OAEP":n="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.10045.4.1";break;case"SHA-256":n="1.2.840.10045.4.3.2";break;case"SHA-384":n="1.2.840.10045.4.3.3";break;case"SHA-512":n="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":n="1.3.133.16.840.63.0.2";break;case"SHA-256":n="1.3.132.1.11.1";break;case"SHA-384":n="1.3.132.1.11.2";break;case"SHA-512":n="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.2";break;case 192:n="2.16.840.1.101.3.4.1.22";break;case 256:n="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.6";break;case 192:n="2.16.840.1.101.3.4.1.26";break;case 256:n="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.4";break;case 192:n="2.16.840.1.101.3.4.1.24";break;case 256:n="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:n="2.16.840.1.101.3.4.1.5";break;case 192:n="2.16.840.1.101.3.4.1.25";break;case 256:n="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":n="1.2.840.113549.2.7";break;case"SHA-256":n="1.2.840.113549.2.9";break;case"SHA-384":n="1.2.840.113549.2.10";break;case"SHA-512":n="1.2.840.113549.2.11";break}break;case"DH":n="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":n="1.3.14.3.2.26";break;case"SHA-256":n="2.16.840.1.101.3.4.2.1";break;case"SHA-384":n="2.16.840.1.101.3.4.2.2";break;case"SHA-512":n="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":n="1.2.840.113549.1.5.12";break;case"P-256":n="1.2.840.10045.3.1.7";break;case"P-384":n="1.3.132.0.34";break;case"P-521":n="1.3.132.0.35";break;case"K-256":n="1.3.132.0.10";break}if(!n&&t){throw new Error(`Unsupported algorithm ${r?`for ${r} `:EMPTY_STRING}: ${e.name}`)}return n}getAlgorithmParameters(e,t){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return r}getHashAlgorithm(e){let t=EMPTY_STRING;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":{try{const r=new RSASSAPSSParams({schema:e.algorithmParams});if(r.hashAlgorithm){const e=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in e){t=e.name}else{return EMPTY_STRING}}else t="SHA-1"}catch{}}break}return t}async encryptEncryptedContentInfo(e){ParameterError.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,true,"contentEncryptionAlgorithm");const r=this.getOIDByAlgorithm({name:"PBKDF2"},true,"PBKDF2");const n=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},true,"hmacHashAlgorithm");const i=new ArrayBuffer(16);const s=new Uint8Array(i);this.getRandomValues(s);const a=new ArrayBuffer(64);const o=new Uint8Array(a);this.getRandomValues(o);const f=new Uint8Array(e.contentToEncrypt);const c=new PBKDF2Params({salt:new OctetString$1({valueHex:a}),iterationCount:e.iterationCount,prf:new AlgorithmIdentifier$2({algorithmId:n,algorithmParams:new Null})});const u=new Uint8Array(e.password);const l=await this.importKey("raw",u,"PBKDF2",false,["deriveKey"]);const h=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:o,iterations:e.iterationCount},l,e.contentEncryptionAlgorithm,false,["encrypt"]);const d=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:s},h,f);const p=new PBES2Params({keyDerivationFunc:new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:c.toSchema()}),encryptionScheme:new AlgorithmIdentifier$2({algorithmId:t,algorithmParams:new OctetString$1({valueHex:i})})});return new EncryptedContentInfo$1({contentType:e.contentType,contentEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:p.toSchema()}),encryptedContent:new OctetString$1({valueHex:d})})}async decryptEncryptedContentInfo(e){ParameterError.assert(e,"password","encryptedContentInfo");if(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new PBES2Params({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbes2Parameters"')}let r;try{r=new PBKDF2Params({schema:t.keyDerivationFunc.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbkdf2Params"')}const n=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,true);const i=t.encryptionScheme.algorithmParams.valueBlock.valueHex;const s=new Uint8Array(i);const a=r.salt.valueBlock.valueHex;const o=new Uint8Array(a);const f=r.iterationCount;let c="SHA-1";if(r.prf){const e=this.getAlgorithmByOID(r.prf.algorithmId,true);c=e.hash.name}const u=await this.importKey("raw",e.password,"PBKDF2",false,["deriveKey"]);const l=await this.deriveKey({name:"PBKDF2",hash:{name:c},salt:o,iterations:f},u,n,false,["decrypt"]);const h=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:n.name,iv:s},l,h)}async stampDataWithPassword(e){if(e instanceof Object===false)throw new Error('Parameters must have type "Object"');ParameterError.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const n=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const i=await this.importKey("raw",new Uint8Array(n),r,false,["sign"]);return this.sign(r,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){ParameterError.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const n=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const i=await this.importKey("raw",new Uint8Array(n),r,false,["verify"]);return this.verify(r,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");const r=new AlgorithmIdentifier$2;const n=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(n.algorithm).length){throw new Error("Parameter 'algorithm' is empty")}const i=n.algorithm;i.hash.name=t;switch(e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(i,true);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const e={};if(t.toUpperCase()!=="SHA-1"){const r=this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");e.hashAlgorithm=new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:new Null});e.maskGenAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}if(i.saltLength!==20)e.saltLength=i.saltLength;const n=new RSASSAPSSParams(e);r.algorithmId="1.2.840.113549.1.1.10";r.algorithmParams=n.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:r,parameters:n}}async signWithPrivateKey(e,t,r){const n=await this.sign(r.algorithm,t,e);if(r.algorithm.name==="ECDSA"){return createCMSECDSASignature(n)}return n}fillPublicKeyParameters(e,t){const r={};const n=this.getHashAlgorithm(t);if(n===EMPTY_STRING)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let i;if(t.algorithmId==="1.2.840.113549.1.1.10")i=t.algorithmId;else i=e.algorithm.algorithmId;const s=this.getAlgorithmByOID(i,true);r.algorithm=this.getAlgorithmParameters(s.name,"importKey");if("hash"in r.algorithm.algorithm)r.algorithm.algorithm.hash.name=n;if(s.name==="ECDSA"){const t=e.algorithm;if(!t.algorithmParams){throw new Error("Algorithm parameters for ECDSA public key are missed")}const n=t.algorithmParams;if("idBlock"in t.algorithmParams){if(!(n.idBlock.tagClass===1&&n.idBlock.tagNumber===6)){throw new Error("Incorrect type for ECDSA public key parameters")}}const i=this.getAlgorithmByOID(n.valueBlock.toString(),true);r.algorithm.algorithm.namedCurve=i.name}return r}async getPublicKey(e,t,r){if(!r){r=this.fillPublicKeyParameters(e,t)}const n=e.toSchema().toBER(false);return this.importKey("spki",n,r.algorithm.algorithm,true,r.algorithm.usages)}async verifyWithPublicKey(e,t,r,n,i){let s;if(!i){i=this.getHashAlgorithm(n);if(!i)throw new Error(`Unsupported signature algorithm: ${n.algorithmId}`);s=await this.getPublicKey(r,n)}else{const e={};let t;if(n.algorithmId==="1.2.840.113549.1.1.10")t=n.algorithmId;else t=r.algorithm.algorithmId;const a=this.getAlgorithmByOID(t,true);e.algorithm=this.getAlgorithmParameters(a.name,"importKey");if("hash"in e.algorithm.algorithm)e.algorithm.algorithm.hash.name=i;if(a.name==="ECDSA"){let t=false;if("algorithmParams"in r.algorithm===true){if("idBlock"in r.algorithm.algorithmParams){if(r.algorithm.algorithmParams.idBlock.tagClass===1&&r.algorithm.algorithmParams.idBlock.tagNumber===6)t=true}}if(t===false){throw new Error("Incorrect type for ECDSA public key parameters")}const n=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString(),true);e.algorithm.algorithm.namedCurve=n.name}s=await this.getPublicKey(r,null,e)}const a=this.getAlgorithmParameters(s.algorithm.name,"verify");if("hash"in a.algorithm)a.algorithm.hash.name=i;let o=t.valueBlock.valueHexView;if(s.algorithm.name==="ECDSA"){const e=ECNamedCurves.find(s.algorithm.namedCurve);if(!e){throw new Error("Unsupported named curve in use")}const t=fromBER(o);AsnError.assert(t,"Signature value");o=createECDSASignatureFromCMS(t.result,e.size)}if(s.algorithm.name==="RSA-PSS"){const e=new RSASSAPSSParams({schema:n.algorithmParams});if("saltLength"in e)a.algorithm.saltLength=e.saltLength;else a.algorithm.saltLength=20;let t="SHA-1";if("hashAlgorithm"in e){const r=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,true);t=r.name}a.algorithm.hash.name=t}return this.verify(a.algorithm,s,o,e)}}let engine={name:"none",crypto:null};function isCryptoEngine(e){return e&&typeof e==="object"&&"crypto"in e?true:false}function setEngine(e,...t){let r=null;if(t.length<2){if(t.length){r=t[0]}else{r=typeof self!=="undefined"&&self.crypto?new CryptoEngine({name:"browser",crypto:self.crypto}):null}}else{const e=t[0];const n=t[1];if(isCryptoEngine(n)){r=n}else if(isCryptoEngine(e)){r=e}else if("subtle"in e&&"getRandomValues"in e){r=new CryptoEngine({crypto:e})}}if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){if(typeof global[process.pid]==="undefined"){global[process.pid]={}}else{if(typeof global[process.pid]!=="object"){throw new Error(`Name global.${process.pid} already exists and it is not an object`)}}if(typeof global[process.pid].pkijs==="undefined"){global[process.pid].pkijs={}}else{if(typeof global[process.pid].pkijs!=="object"){throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`)}}global[process.pid].pkijs.engine={name:e,crypto:r}}else{engine={name:e,crypto:r}}}function getEngine(){if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){let e;try{e=global[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return e}return engine}function getCrypto(e=false){const t=getEngine();if(!t.crypto&&e){throw new Error("Unable to create WebCrypto object")}return t.crypto}function createCMSECDSASignature(e){if(e.byteLength%2!==0)return EMPTY_BUFFER;const t=e.byteLength/2;const r=new ArrayBuffer(t);const n=new Uint8Array(r);n.set(new Uint8Array(e,0,t));const i=new Integer({valueHex:r});const s=new ArrayBuffer(t);const a=new Uint8Array(s);a.set(new Uint8Array(e,t,t));const o=new Integer({valueHex:s});return new Sequence({value:[i.convertToDER(),o.convertToDER()]}).toBER(false)}function createECDSASignatureFromCMS(e,t){if(!(e instanceof Sequence&&e.valueBlock.value.length===2&&e.valueBlock.value[0]instanceof Integer&&e.valueBlock.value[1]instanceof Integer))return EMPTY_BUFFER;const r=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView;const n=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView;const i=new Uint8Array(t*2);i.set(r,t-r.byteLength);i.set(n,2*t-n.byteLength);return i.buffer}const VERSION$i="version";const LOG_ID="logID";const EXTENSIONS$6="extensions";const TIMESTAMP="timestamp";const HASH_ALGORITHM$3="hashAlgorithm";const SIGNATURE_ALGORITHM$8="signatureAlgorithm";const SIGNATURE$7="signature";const NONE="none";const MD5="md5";const SHA1$1="sha1";const SHA224="sha224";const SHA256$1="sha256";const SHA384$1="sha384";const SHA512$1="sha512";const ANONYMOUS="anonymous";const RSA$1="rsa";const DSA="dsa";const ECDSA$2="ecdsa";class SignedCertificateTimestamp extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$i,SignedCertificateTimestamp.defaultValues(VERSION$i));this.logID=getParametersValue(e,LOG_ID,SignedCertificateTimestamp.defaultValues(LOG_ID));this.timestamp=getParametersValue(e,TIMESTAMP,SignedCertificateTimestamp.defaultValues(TIMESTAMP));this.extensions=getParametersValue(e,EXTENSIONS$6,SignedCertificateTimestamp.defaultValues(EXTENSIONS$6));this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$3,SignedCertificateTimestamp.defaultValues(HASH_ALGORITHM$3));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$8,SignedCertificateTimestamp.defaultValues(SIGNATURE_ALGORITHM$8));this.signature=getParametersValue(e,SIGNATURE$7,SignedCertificateTimestamp.defaultValues(SIGNATURE$7));if("stream"in e&&e.stream){this.fromStream(e.stream)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$i:return 0;case LOG_ID:case EXTENSIONS$6:return EMPTY_BUFFER;case TIMESTAMP:return new Date(0);case HASH_ALGORITHM$3:case SIGNATURE_ALGORITHM$8:return EMPTY_STRING;case SIGNATURE$7:return new Any;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof RawData===false)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new SeqStream({stream:new ByteStream({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();this.version=e.getBlock(1)[0];if(this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0);this.timestamp=new Date(utilFromBase(new Uint8Array(e.getBlock(8)),8));const r=e.getUint16();this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0);switch(e.getBlock(1)[0]){case 0:this.hashAlgorithm=NONE;break;case 1:this.hashAlgorithm=MD5;break;case 2:this.hashAlgorithm=SHA1$1;break;case 3:this.hashAlgorithm=SHA224;break;case 4:this.hashAlgorithm=SHA256$1;break;case 5:this.hashAlgorithm=SHA384$1;break;case 6:this.hashAlgorithm=SHA512$1;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=ANONYMOUS;break;case 1:this.signatureAlgorithm=RSA$1;break;case 2:this.signatureAlgorithm=DSA;break;case 3:this.signatureAlgorithm=ECDSA$2;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const n=e.getUint16();const i=new Uint8Array(e.getBlock(n)).buffer.slice(0);const s=fromBER(i);AsnError.assert(s,"SignedCertificateTimestamp");this.signature=s.result;if(t!==47+r+n){throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}}toSchema(){const e=this.toStream();return new RawData({data:e.stream.buffer})}toStream(){const e=new SeqStream;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength);e.appendChar(this.version);e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8);const r=new Uint8Array(t);const n=utilToBase(this.timestamp.valueOf(),8);r.set(new Uint8Array(n),8-n.byteLength);e.appendView(r);e.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength)e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case NONE:i=0;break;case MD5:i=1;break;case SHA1$1:i=2;break;case SHA224:i=3;break;case SHA256$1:i=4;break;case SHA384$1:i=5;break;case SHA512$1:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let s;switch(this.signatureAlgorithm.toLowerCase()){case ANONYMOUS:s=0;break;case RSA$1:s=1;break;case DSA:s=2;break;case ECDSA$2:s=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(s);const a=this.signature.toBER(false);e.appendUint16(a.byteLength);e.appendView(new Uint8Array(a));return e}toJSON(){return{version:this.version,logID:bufferToHexCodes(this.logID),timestamp:this.timestamp,extensions:bufferToHexCodes(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,r=0,n=getCrypto(true)){const i=toBase64(arrayBufferToString(this.logID));let s=null;const a=new SeqStream;for(const t of e){if(t.log_id===i){s=t.key;break}}if(!s){throw new Error(`Public key not found for CT with logId: ${i}`)}const o=stringToArrayBuffer(fromBase64(s));const f=PublicKeyInfo$1.fromBER(o);a.appendChar(0);a.appendChar(0);const c=new ArrayBuffer(8);const u=new Uint8Array(c);const l=utilToBase(this.timestamp.valueOf(),8);u.set(new Uint8Array(l),8-l.byteLength);a.appendView(u);a.appendUint16(r);if(r===0)a.appendUint24(t.byteLength);a.appendView(new Uint8Array(t));a.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength!==0)a.appendView(new Uint8Array(this.extensions));return n.verifyWithPublicKey(a.buffer.slice(0,a.length),new OctetString$1({valueHex:this.signature.toBER(false)}),f,{algorithmId:EMPTY_STRING},"SHA-256")}}SignedCertificateTimestamp.CLASS_NAME="SignedCertificateTimestamp";const TIMESTAMPS="timestamps";class SignedCertificateTimestampList extends PkiObject{constructor(e={}){super();this.timestamps=getParametersValue(e,TIMESTAMPS,SignedCertificateTimestampList.defaultValues(TIMESTAMPS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TIMESTAMPS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TIMESTAMPS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const r=getParametersValue(e,"names",{});(t=r.optional)!==null&&t!==void 0?t:r.optional=false;return new OctetString$1({name:r.blockName||"SignedCertificateTimestampList",optional:r.optional})}fromSchema(e){if(e instanceof OctetString$1===false){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}const t=new SeqStream({stream:new ByteStream({buffer:e.valueBlock.valueHex})});const r=t.getUint16();if(r!==t.length){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}while(t.length){this.timestamps.push(new SignedCertificateTimestamp({stream:t}))}}toSchema(){const e=new SeqStream;let t=0;const r=[];for(const e of this.timestamps){const n=e.toStream();r.push(n);t+=n.stream.buffer.byteLength}e.appendUint16(t);for(const t of r){e.appendView(t.stream.view)}return new OctetString$1({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}SignedCertificateTimestampList.CLASS_NAME="SignedCertificateTimestampList";const ATTRIBUTES$4="attributes";const CLEAR_PROPS$11=[ATTRIBUTES$4];class SubjectDirectoryAttributes$1 extends PkiObject{constructor(e={}){super();this.attributes=getParametersValue(e,ATTRIBUTES$4,SubjectDirectoryAttributes$1.defaultValues(ATTRIBUTES$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ATTRIBUTES$4:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$11);const t=compareSchema(e,e,SubjectDirectoryAttributes$1.schema({names:{attributes:ATTRIBUTES$4}}));AsnError.assertSchema(t,this.className);this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}SubjectDirectoryAttributes$1.CLASS_NAME="SubjectDirectoryAttributes";class ExtensionValueFactory{static getItems(){if(!this.types){this.types={};ExtensionValueFactory.register(id_SubjectAltName,"SubjectAltName",AltName);ExtensionValueFactory.register(id_IssuerAltName,"IssuerAltName",AltName);ExtensionValueFactory.register(id_AuthorityKeyIdentifier,"AuthorityKeyIdentifier",AuthorityKeyIdentifier$1);ExtensionValueFactory.register(id_BasicConstraints,"BasicConstraints",BasicConstraints$1);ExtensionValueFactory.register(id_MicrosoftCaVersion,"MicrosoftCaVersion",CAVersion);ExtensionValueFactory.register(id_CertificatePolicies,"CertificatePolicies",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftAppPolicies,"CertificatePoliciesMicrosoft",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftCertTemplateV2,"MicrosoftCertTemplateV2",CertificateTemplate);ExtensionValueFactory.register(id_CRLDistributionPoints,"CRLDistributionPoints",CRLDistributionPoints$1);ExtensionValueFactory.register(id_FreshestCRL,"FreshestCRL",CRLDistributionPoints$1);ExtensionValueFactory.register(id_ExtKeyUsage,"ExtKeyUsage",ExtKeyUsage);ExtensionValueFactory.register(id_CertificateIssuer,"CertificateIssuer",GeneralNames$2);ExtensionValueFactory.register(id_AuthorityInfoAccess,"AuthorityInfoAccess",InfoAccess);ExtensionValueFactory.register(id_SubjectInfoAccess,"SubjectInfoAccess",InfoAccess);ExtensionValueFactory.register(id_IssuingDistributionPoint,"IssuingDistributionPoint",IssuingDistributionPoint$1);ExtensionValueFactory.register(id_NameConstraints,"NameConstraints",NameConstraints$1);ExtensionValueFactory.register(id_PolicyConstraints,"PolicyConstraints",PolicyConstraints$1);ExtensionValueFactory.register(id_PolicyMappings,"PolicyMappings",PolicyMappings$1);ExtensionValueFactory.register(id_PrivateKeyUsagePeriod,"PrivateKeyUsagePeriod",PrivateKeyUsagePeriod$1);ExtensionValueFactory.register(id_QCStatements,"QCStatements",QCStatements);ExtensionValueFactory.register(id_SignedCertificateTimestampList,"SignedCertificateTimestampList",SignedCertificateTimestampList);ExtensionValueFactory.register(id_SubjectDirectoryAttributes,"SubjectDirectoryAttributes",SubjectDirectoryAttributes$1)}return this.types}static fromBER(e,t){const r=fromBER(t);if(r.offset===-1){return null}const n=this.find(e);if(n){try{return new n.type({schema:r.result})}catch(t){const r=new n.type;r.parsingError=`Incorrectly formatted value of extension ${n.name} (${e})`;return r}}return r.result}static find(e){const t=this.getItems();return t[e]||null}static register(e,t,r){this.getItems()[e]={name:t,type:r}}}const EXTN_ID="extnID";const CRITICAL="critical";const EXTN_VALUE="extnValue";const PARSED_VALUE$5="parsedValue";const CLEAR_PROPS$10=[EXTN_ID,CRITICAL,EXTN_VALUE];class Extension$2 extends PkiObject{constructor(e={}){super();this.extnID=getParametersValue(e,EXTN_ID,Extension$2.defaultValues(EXTN_ID));this.critical=getParametersValue(e,CRITICAL,Extension$2.defaultValues(CRITICAL));if(EXTN_VALUE in e){this.extnValue=new OctetString$1({valueHex:e.extnValue})}else{this.extnValue=Extension$2.defaultValues(EXTN_VALUE)}if(PARSED_VALUE$5 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$5,Extension$2.defaultValues(PARSED_VALUE$5))}if(e.schema){this.fromSchema(e.schema)}}get parsedValue(){if(this._parsedValue===undefined){const e=ExtensionValueFactory.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||undefined}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case EXTN_ID:return EMPTY_STRING;case CRITICAL:return false;case EXTN_VALUE:return new OctetString$1;case PARSED_VALUE$5:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.extnID||EMPTY_STRING}),new Boolean$1({name:t.critical||EMPTY_STRING,optional:true}),new OctetString$1({name:t.extnValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$10);const t=compareSchema(e,e,Extension$2.schema({names:{extnID:EXTN_ID,critical:CRITICAL,extnValue:EXTN_VALUE}}));AsnError.assertSchema(t,this.className);this.extnID=t.result.extnID.valueBlock.toString();if(CRITICAL in t.result){this.critical=t.result.critical.valueBlock.value}this.extnValue=t.result.extnValue}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.extnID}));if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.push(new Boolean$1({value:this.critical}))}e.push(this.extnValue);return new Sequence({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.critical=this.critical}if(this.parsedValue&&this.parsedValue.toJSON){e.parsedValue=this.parsedValue.toJSON()}return e}}Extension$2.CLASS_NAME="Extension";const EXTENSIONS$5="extensions";const CLEAR_PROPS$$=[EXTENSIONS$5];class Extensions$1 extends PkiObject{constructor(e={}){super();this.extensions=getParametersValue(e,EXTENSIONS$5,Extensions$1.defaultValues(EXTENSIONS$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case EXTENSIONS$5:return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.extensions||EMPTY_STRING,value:Extension$2.schema(r.extension||{})})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$$);const t=compareSchema(e,e,Extensions$1.schema({names:{extensions:EXTENSIONS$5}}));AsnError.assertSchema(t,this.className);this.extensions=Array.from(t.result.extensions,(e=>new Extension$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}Extensions$1.CLASS_NAME="Extensions";const TYPE$1$1="type";const VALUE$4="value";const UTC_TIME_NAME="utcTimeName";const GENERAL_TIME_NAME="generalTimeName";const CLEAR_PROPS$R=[UTC_TIME_NAME,GENERAL_TIME_NAME];var TimeType;(function(e){e[e["UTCTime"]=0]="UTCTime";e[e["GeneralizedTime"]=1]="GeneralizedTime";e[e["empty"]=2]="empty"})(TimeType||(TimeType={}));class Time$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$1$1,Time$1.defaultValues(TYPE$1$1));this.value=getParametersValue(e,VALUE$4,Time$1.defaultValues(VALUE$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$1$1:return 0;case VALUE$4:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Choice({optional:t,value:[new UTCTime({name:r.utcTimeName||EMPTY_STRING}),new GeneralizedTime({name:r.generalTimeName||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$R);const t=compareSchema(e,e,Time$1.schema({names:{utcTimeName:UTC_TIME_NAME,generalTimeName:GENERAL_TIME_NAME}}));AsnError.assertSchema(t,this.className);if(UTC_TIME_NAME in t.result){this.type=0;this.value=t.result.utcTimeName.toDate()}if(GENERAL_TIME_NAME in t.result){this.type=1;this.value=t.result.generalTimeName.toDate()}}toSchema(){if(this.type===0){return new UTCTime({valueDate:this.value})}else if(this.type===1){return new GeneralizedTime({valueDate:this.value})}return{}}toJSON(){return{type:this.type,value:this.value}}}Time$1.CLASS_NAME="Time";const TBS$4="tbs";const VERSION$f="version";const SERIAL_NUMBER$3="serialNumber";const SIGNATURE$4="signature";const ISSUER$2="issuer";const NOT_BEFORE="notBefore";const NOT_AFTER="notAfter";const SUBJECT$1="subject";const SUBJECT_PUBLIC_KEY_INFO="subjectPublicKeyInfo";const ISSUER_UNIQUE_ID="issuerUniqueID";const SUBJECT_UNIQUE_ID="subjectUniqueID";const EXTENSIONS$2="extensions";const SIGNATURE_ALGORITHM$5="signatureAlgorithm";const SIGNATURE_VALUE$2="signatureValue";const TBS_CERTIFICATE="tbsCertificate";const TBS_CERTIFICATE_VERSION=`${TBS_CERTIFICATE}.${VERSION$f}`;const TBS_CERTIFICATE_SERIAL_NUMBER=`${TBS_CERTIFICATE}.${SERIAL_NUMBER$3}`;const TBS_CERTIFICATE_SIGNATURE=`${TBS_CERTIFICATE}.${SIGNATURE$4}`;const TBS_CERTIFICATE_ISSUER=`${TBS_CERTIFICATE}.${ISSUER$2}`;const TBS_CERTIFICATE_NOT_BEFORE=`${TBS_CERTIFICATE}.${NOT_BEFORE}`;const TBS_CERTIFICATE_NOT_AFTER=`${TBS_CERTIFICATE}.${NOT_AFTER}`;const TBS_CERTIFICATE_SUBJECT=`${TBS_CERTIFICATE}.${SUBJECT$1}`;const TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY=`${TBS_CERTIFICATE}.${SUBJECT_PUBLIC_KEY_INFO}`;const TBS_CERTIFICATE_ISSUER_UNIQUE_ID=`${TBS_CERTIFICATE}.${ISSUER_UNIQUE_ID}`;const TBS_CERTIFICATE_SUBJECT_UNIQUE_ID=`${TBS_CERTIFICATE}.${SUBJECT_UNIQUE_ID}`;const TBS_CERTIFICATE_EXTENSIONS=`${TBS_CERTIFICATE}.${EXTENSIONS$2}`;const CLEAR_PROPS$Q=[TBS_CERTIFICATE,TBS_CERTIFICATE_VERSION,TBS_CERTIFICATE_SERIAL_NUMBER,TBS_CERTIFICATE_SIGNATURE,TBS_CERTIFICATE_ISSUER,TBS_CERTIFICATE_NOT_BEFORE,TBS_CERTIFICATE_NOT_AFTER,TBS_CERTIFICATE_SUBJECT,TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY,TBS_CERTIFICATE_ISSUER_UNIQUE_ID,TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,TBS_CERTIFICATE_EXTENSIONS,SIGNATURE_ALGORITHM$5,SIGNATURE_VALUE$2];function tbsCertificate(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TBS_CERTIFICATE,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.tbsCertificateVersion||TBS_CERTIFICATE_VERSION})]}),new Integer({name:t.tbsCertificateSerialNumber||TBS_CERTIFICATE_SERIAL_NUMBER}),AlgorithmIdentifier$2.schema(t.signature||{names:{blockName:TBS_CERTIFICATE_SIGNATURE}}),RelativeDistinguishedNames.schema(t.issuer||{names:{blockName:TBS_CERTIFICATE_ISSUER}}),new Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[Time$1.schema(t.notBefore||{names:{utcTimeName:TBS_CERTIFICATE_NOT_BEFORE,generalTimeName:TBS_CERTIFICATE_NOT_BEFORE}}),Time$1.schema(t.notAfter||{names:{utcTimeName:TBS_CERTIFICATE_NOT_AFTER,generalTimeName:TBS_CERTIFICATE_NOT_AFTER}})]}),RelativeDistinguishedNames.schema(t.subject||{names:{blockName:TBS_CERTIFICATE_SUBJECT}}),PublicKeyInfo$1.schema(t.subjectPublicKeyInfo||{names:{blockName:TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY}}),new Primitive({name:t.tbsCertificateIssuerUniqueID||TBS_CERTIFICATE_ISSUER_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.tbsCertificateSubjectUniqueID||TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[Extensions$1.schema(t.extensions||{names:{blockName:TBS_CERTIFICATE_EXTENSIONS}})]})]})}class Certificate$1 extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$4,Certificate$1.defaultValues(TBS$4)));this.version=getParametersValue(e,VERSION$f,Certificate$1.defaultValues(VERSION$f));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$3,Certificate$1.defaultValues(SERIAL_NUMBER$3));this.signature=getParametersValue(e,SIGNATURE$4,Certificate$1.defaultValues(SIGNATURE$4));this.issuer=getParametersValue(e,ISSUER$2,Certificate$1.defaultValues(ISSUER$2));this.notBefore=getParametersValue(e,NOT_BEFORE,Certificate$1.defaultValues(NOT_BEFORE));this.notAfter=getParametersValue(e,NOT_AFTER,Certificate$1.defaultValues(NOT_AFTER));this.subject=getParametersValue(e,SUBJECT$1,Certificate$1.defaultValues(SUBJECT$1));this.subjectPublicKeyInfo=getParametersValue(e,SUBJECT_PUBLIC_KEY_INFO,Certificate$1.defaultValues(SUBJECT_PUBLIC_KEY_INFO));if(ISSUER_UNIQUE_ID in e){this.issuerUniqueID=getParametersValue(e,ISSUER_UNIQUE_ID,Certificate$1.defaultValues(ISSUER_UNIQUE_ID))}if(SUBJECT_UNIQUE_ID in e){this.subjectUniqueID=getParametersValue(e,SUBJECT_UNIQUE_ID,Certificate$1.defaultValues(SUBJECT_UNIQUE_ID))}if(EXTENSIONS$2 in e){this.extensions=getParametersValue(e,EXTENSIONS$2,Certificate$1.defaultValues(EXTENSIONS$2))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$5,Certificate$1.defaultValues(SIGNATURE_ALGORITHM$5));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$2,Certificate$1.defaultValues(SIGNATURE_VALUE$2));if(e.schema){this.fromSchema(e.schema)}}get tbs(){return build$1.BufferSourceConverter.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS$4:return EMPTY_BUFFER;case VERSION$f:return 0;case SERIAL_NUMBER$3:return new Integer;case SIGNATURE$4:return new AlgorithmIdentifier$2;case ISSUER$2:return new RelativeDistinguishedNames;case NOT_BEFORE:return new Time$1;case NOT_AFTER:return new Time$1;case SUBJECT$1:return new RelativeDistinguishedNames;case SUBJECT_PUBLIC_KEY_INFO:return new PublicKeyInfo$1;case ISSUER_UNIQUE_ID:return EMPTY_BUFFER;case SUBJECT_UNIQUE_ID:return EMPTY_BUFFER;case EXTENSIONS$2:return[];case SIGNATURE_ALGORITHM$5:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$2:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[tbsCertificate(t.tbsCertificate),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:SIGNATURE_ALGORITHM$5}}),new BitString$1({name:t.signatureValue||SIGNATURE_VALUE$2})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$Q);const t=compareSchema(e,e,Certificate$1.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:TBS_CERTIFICATE_EXTENSIONS}}}}}}));AsnError.assertSchema(t,this.className);this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView;if(TBS_CERTIFICATE_VERSION in t.result)this.version=t.result[TBS_CERTIFICATE_VERSION].valueBlock.valueDec;this.serialNumber=t.result[TBS_CERTIFICATE_SERIAL_NUMBER];this.signature=new AlgorithmIdentifier$2({schema:t.result[TBS_CERTIFICATE_SIGNATURE]});this.issuer=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_ISSUER]});this.notBefore=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_BEFORE]});this.notAfter=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_AFTER]});this.subject=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_SUBJECT]});this.subjectPublicKeyInfo=new PublicKeyInfo$1({schema:t.result[TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY]});if(TBS_CERTIFICATE_ISSUER_UNIQUE_ID in t.result)this.issuerUniqueID=t.result[TBS_CERTIFICATE_ISSUER_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_SUBJECT_UNIQUE_ID in t.result)this.subjectUniqueID=t.result[TBS_CERTIFICATE_SUBJECT_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_EXTENSIONS in t.result)this.extensions=Array.from(t.result[TBS_CERTIFICATE_EXTENSIONS],(e=>new Extension$2({schema:e})));this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({value:this.version})]}))}e.push(this.serialNumber);e.push(this.signature.toSchema());e.push(this.issuer.toSchema());e.push(new Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]}));e.push(this.subject.toSchema());e.push(this.subjectPublicKeyInfo.toSchema());if(this.issuerUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID}))}if(this.subjectUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID}))}if(this.extensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toSchema(e=false){let t;if(e===false){if(!this.tbsView.byteLength){return Certificate$1.schema().value[0]}const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Certificate");t=e.result}else{t=this.encodeTBS()}return new Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:build$1.Convert.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.version=this.version}if(this.issuerUniqueID){e.issuerUniqueID=build$1.Convert.ToHex(this.issuerUniqueID)}if(this.subjectUniqueID){e.subjectUniqueID=build$1.Convert.ToHex(this.subjectUniqueID)}if(this.extensions){e.extensions=Array.from(this.extensions,(e=>e.toJSON()))}return e}async getPublicKey(e,t=getCrypto(true)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=getCrypto(true)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const n=await r.getSignatureParameters(e,t);const i=n.parameters;this.signature=n.signatureAlgorithm;this.signatureAlgorithm=n.signatureAlgorithm;this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await r.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new BitString$1({valueHex:s})}async verify(e,t=getCrypto(true)){let r;if(e){r=e.subjectPublicKeyInfo}else if(this.issuer.isEqual(this.subject)){r=this.subjectPublicKeyInfo}if(!(r instanceof PublicKeyInfo$1)){throw new Error("Please provide issuer certificate as a parameter")}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}Certificate$1.CLASS_NAME="Certificate";var ChainValidationCode;(function(e){e[e["unknown"]=-1]="unknown";e[e["success"]=0]="success";e[e["noRevocation"]=11]="noRevocation";e[e["noPath"]=60]="noPath";e[e["noValidPath"]=97]="noValidPath"})(ChainValidationCode||(ChainValidationCode={}));var PKIStatus;(function(e){e[e["granted"]=0]="granted";e[e["grantedWithMods"]=1]="grantedWithMods";e[e["rejection"]=2]="rejection";e[e["waiting"]=3]="waiting";e[e["revocationWarning"]=4]="revocationWarning";e[e["revocationNotification"]=5]="revocationNotification"})(PKIStatus||(PKIStatus={}));function initCryptoEngine(){if(typeof self!=="undefined"){if("crypto"in self){let e="webcrypto";if("webkitSubtle"in self.crypto){e="safari"}setEngine(e,new CryptoEngine({name:e,crypto}))}}else if(typeof crypto!=="undefined"&&"webcrypto"in crypto){const e="NodeJS ^15";const t=crypto.webcrypto;setEngine(e,new CryptoEngine({name:e,crypto:t}))}}initCryptoEngine();var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r]};return extendStatics(e,t)};function __extends(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");extendStatics(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){__assign=Object.assign||function e(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s))t[s]=r[s]}return t};return __assign.apply(this,arguments)};function __rest$1(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r}function __decorate(e,t,r,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)if(a=e[o])s=(i<3?a(s):i>3?a(t,r,s):a(t,r))||s;return i>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,i,s){function a(e){if(e!==void 0&&typeof e!=="function")throw new TypeError("Function expected");return e}var o=n.kind,f=o==="getter"?"get":o==="setter"?"set":"value";var c=!t&&e?n["static"]?e:e.prototype:null;var u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{});var l,h=false;for(var d=r.length-1;d>=0;d--){var p={};for(var y in n)p[y]=y==="access"?{}:n[y];for(var y in n.access)p.access[y]=n.access[y];p.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,r[d])(o==="accessor"?{get:u.get,set:u.set}:u[f],p);if(o==="accessor"){if(m===void 0)continue;if(m===null||typeof m!=="object")throw new TypeError("Object expected");if(l=a(m.get))u.get=l;if(l=a(m.set))u.set=l;if(l=a(m.init))i.unshift(l)}else if(l=a(m)){if(o==="field")i.unshift(l);else u[f]=l}}if(c)Object.defineProperty(c,n.name,u);h=true}function __runInitializers(e,t,r){var n=arguments.length>2;for(var i=0;i<t.length;i++){r=n?t[i].call(e,r):t[i].call(e)}return n?r:void 0}function __propKey(e){return typeof e==="symbol"?e:"".concat(e)}function __setFunctionName(e,t,r){if(typeof t==="symbol")t=t.description?"[".concat(t.description,"]"):"";return Object.defineProperty(e,"name",{configurable:true,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter$1(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(t){return f([e,t])}}function f(o){if(n)throw new TypeError("Generator is already executing.");while(a&&(a=0,o[0]&&(r=0)),r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(e){o=[6,e];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}var __createBinding=Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]};function __exportStar(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))__createBinding(t,e,r)}function __values(e){var t=typeof Symbol==="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&n>=e.length)e=void 0;return{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r=typeof Symbol==="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,s=[],a;try{while((t===void 0||t-- >0)&&!(i=n.next()).done)s.push(i.value)}catch(e){a={error:e}}finally{try{if(i&&!i.done&&(r=n["return"]))r.call(n)}finally{if(a)throw a.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function __spreadArray(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++){if(s||!(n in t)){if(!s)s=Array.prototype.slice.call(t,0,n);s[n]=t[n]}}return e.concat(s||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){if(n[e])i[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||o(e,t)}))}}function o(e,t){try{f(n[e](t))}catch(e){l(s[0][3],e)}}function f(e){e.value instanceof __await?Promise.resolve(e.value.v).then(c,u):l(s[0][2],e)}function c(e){o("next",e)}function u(e){o("throw",e)}function l(e,t){if(e(t),s.shift(),s.length)o(s[0][0],s[0][1])}}function __asyncDelegator(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:false}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=e[t]&&function(r){return new Promise((function(n,s){r=e[t](r),i(n,s,r.done,r.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function __makeTemplateObject(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e}var __setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)if(r!=="default"&&Object.prototype.hasOwnProperty.call(e,r))__createBinding(t,e,r);__setModuleDefault(t,e);return t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(t!==null&&t!==void 0){if(typeof t!=="object"&&typeof t!=="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!=="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else if(r){e.stack.push({async:true})}return t}var _SuppressedError=typeof SuppressedError==="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function __disposeResources(e){function t(t){e.error=e.hasError?new _SuppressedError(t,e.error,"An error was suppressed during disposal."):t;e.hasError=true}function r(){while(e.stack.length){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,(function(e){t(e);return r()}))}catch(e){t(e)}}if(e.hasError)throw e.error}return r()}const tslib_es6={__extends,__assign,__rest:__rest$1,__decorate,__param,__metadata,__awaiter:__awaiter$1,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};const tslib_es6$1=Object.freeze({__proto__:null,__extends,get __assign(){return __assign},__rest:__rest$1,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter:__awaiter$1,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,default:tslib_es6});let engineCrypto=null;class Application{static setEngine(e,t){engineCrypto=Object.assign(t,{name:e});setEngine(e,new CryptoEngine({name:e,crypto:t}))}static get crypto(){if(!engineCrypto){throw new XmlError(XE.CRYPTOGRAPHIC_NO_MODULE)}return engineCrypto}static isNodePlugin(){return typeof self==="undefined"&&typeof window==="undefined"}}function init(){if(!Application.isNodePlugin()){Application.setEngine("W3 WebCrypto module",self.crypto)}}init();class XmlAlgorithm{getAlgorithmName(){return this.namespaceURI}}class HashAlgorithm extends XmlAlgorithm{async Digest(e){let t;if(typeof e==="string"){t=Convert.FromString(e,"utf8")}else if(ArrayBuffer.isView(e)){t=new Uint8Array(e.buffer)}else if(e instanceof ArrayBuffer){t=new Uint8Array(e)}else{const r=(new XMLSerializer).serializeToString(e);t=Convert.FromString(r,"utf8")}const r=await Application.crypto.subtle.digest(this.algorithm,t);return new Uint8Array(r)}}class SignatureAlgorithm extends XmlAlgorithm{async Sign(e,t,r){const n=Convert.FromString(e,"utf8");return Application.crypto.subtle.sign(r,t,n)}async Verify(e,t,r,n){const i=Convert.FromString(e,"utf8");return Application.crypto.subtle.verify(n||this.algorithm,t,r,i)}}const SHA1="SHA-1";const SHA256="SHA-256";const SHA384="SHA-384";const SHA512="SHA-512";const SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#sha1";const SHA256_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha256";const SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#sha384";const SHA512_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha512";class Sha1$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA1};this.namespaceURI=SHA1_NAMESPACE}}class Sha256$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA256};this.namespaceURI=SHA256_NAMESPACE}}class Sha384 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA384};this.namespaceURI=SHA384_NAMESPACE}}class Sha512$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA512};this.namespaceURI=SHA512_NAMESPACE}}const ECDSA$1="ECDSA";const ECDSA_SHA1_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1";const ECDSA_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256";const ECDSA_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384";const ECDSA_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512";class EcdsaSha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA1}};this.namespaceURI=ECDSA_SHA1_NAMESPACE}}class EcdsaSha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA256}};this.namespaceURI=ECDSA_SHA256_NAMESPACE}}class EcdsaSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA384}};this.namespaceURI=ECDSA_SHA384_NAMESPACE}}class EcdsaSha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA512}};this.namespaceURI=ECDSA_SHA512_NAMESPACE}}const HMAC="HMAC";const HMAC_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#hmac-sha1";const HMAC_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha256";const HMAC_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha384";const HMAC_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha512";class HmacSha1$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA1}};this.namespaceURI=HMAC_SHA1_NAMESPACE}}class HmacSha256$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA256}};this.namespaceURI=HMAC_SHA256_NAMESPACE}}class HmacSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA384}};this.namespaceURI=HMAC_SHA384_NAMESPACE}}class HmacSha512$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA512}};this.namespaceURI=HMAC_SHA512_NAMESPACE}}const RSA_PKCS1="RSASSA-PKCS1-v1_5";const RSA_PKCS1_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#rsa-sha1";const RSA_PKCS1_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256";const RSA_PKCS1_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha384";const RSA_PKCS1_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha512";class RsaPkcs1Sha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA1}};this.namespaceURI=RSA_PKCS1_SHA1_NAMESPACE}}class RsaPkcs1Sha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA256}};this.namespaceURI=RSA_PKCS1_SHA256_NAMESPACE}}class RsaPkcs1Sha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA384}};this.namespaceURI=RSA_PKCS1_SHA384_NAMESPACE}}class RsaPkcs1Sha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA512}};this.namespaceURI=RSA_PKCS1_SHA512_NAMESPACE}}const RSA_PSS$1="RSA-PSS";const RSA_PSS_WITH_PARAMS_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#rsa-pss";class RsaPssBase extends SignatureAlgorithm{constructor(e){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1}};this.namespaceURI=RSA_PSS_WITH_PARAMS_NAMESPACE;if(e){this.algorithm.saltLength=e}}}class RsaPssSha1 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA1}}class RsaPssSha256 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA256}}class RsaPssSha384 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA384}}class RsaPssSha512 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA512}}const RSA_PSS_SHA1_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha1-rsa-MGF1";const RSA_PSS_SHA256_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha256-rsa-MGF1";const RSA_PSS_SHA384_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha384-rsa-MGF1";const RSA_PSS_SHA512_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha512-rsa-MGF1";class RsaPssWithoutParamsBase extends SignatureAlgorithm{constructor(){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1}};this.namespaceURI=RSA_PSS_SHA1_NAMESPACE}}class RsaPssWithoutParamsSha1 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA1;this.algorithm.saltLength=20}}class RsaPssWithoutParamsSha256 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA256;this.algorithm.saltLength=32}}class RsaPssWithoutParamsSha384 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA384;this.algorithm.saltLength=48}}class RsaPssWithoutParamsSha512 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA512;this.algorithm.saltLength=64}}var XmlCanonicalizerState;(function(e){e[e["BeforeDocElement"]=0]="BeforeDocElement";e[e["InsideDocElement"]=1]="InsideDocElement";e[e["AfterDocElement"]=2]="AfterDocElement"})(XmlCanonicalizerState||(XmlCanonicalizerState={}));class XmlCanonicalizer{constructor(e,t,r=new NamespaceManager){this.propagatedNamespaces=new NamespaceManager;this.result=[];this.visibleNamespaces=new NamespaceManager;this.inclusiveNamespacesPrefixList=[];this.state=XmlCanonicalizerState.BeforeDocElement;this.withComments=e;this.exclusive=t;this.propagatedNamespaces=r}get InclusiveNamespacesPrefixList(){return this.inclusiveNamespacesPrefixList.join(" ")}set InclusiveNamespacesPrefixList(e){this.inclusiveNamespacesPrefixList=e.split(" ")}Canonicalize(e){if(!e){throw new XmlError(XE.CRYPTOGRAPHIC,"Parameter 1 is not Node")}this.WriteNode(e);const t=this.result.join("");return t}WriteNode(e){switch(e.nodeType){case XmlNodeType.Document:case XmlNodeType.DocumentFragment:this.WriteDocumentNode(e);break;case XmlNodeType.Element:this.WriteElementNode(e);break;case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Text:if(!isDocument(e.parentNode)){this.WriteTextNode(e)}break;case XmlNodeType.Whitespace:if(this.state===XmlCanonicalizerState.InsideDocElement){this.WriteTextNode(e)}break;case XmlNodeType.Comment:this.WriteCommentNode(e);break;case XmlNodeType.ProcessingInstruction:this.WriteProcessingInstructionNode(e);break;case XmlNodeType.EntityReference:for(let t=0;t<e.childNodes.length;t++){this.WriteNode(e.childNodes[t])}break;case XmlNodeType.Attribute:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndElement:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndEntity:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here")}}WriteDocumentNode(e){this.state=XmlCanonicalizerState.BeforeDocElement;for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}}WriteCommentNode(e){if(this.withComments){if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push(String.fromCharCode(10)+"\x3c!--")}else{this.result.push("\x3c!--")}this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Comment));if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("--\x3e"+String.fromCharCode(10))}else{this.result.push("--\x3e")}}}WriteTextNode(e){this.result.push(this.NormalizeString(e.nodeValue,e.nodeType))}WriteProcessingInstructionNode(e){const t=e.nodeName||e.tagName;if(t==="xml"){return}if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push("\n<?")}else{this.result.push("<?")}this.result.push(t);if(e.nodeValue){this.result.push(" ");this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.ProcessingInstruction))}if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("?>\n")}else{this.result.push("?>")}}WriteElementNode(e){const t=this.state;if(this.state===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.InsideDocElement}this.result.push("<");this.result.push(e.nodeName);let r=this.WriteNamespacesAxis(e);this.WriteAttributesAxis(e);this.result.push(">");for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}this.result.push("</");this.result.push(e.nodeName);this.result.push(">");if(t===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.AfterDocElement}while(r--){this.visibleNamespaces.Pop()}}WriteNamespacesAxis(e){const t=[];let r=0;for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];if(!IsNamespaceNode(i)){if(i.prefix&&!this.IsNamespaceRendered(i.prefix,i.namespaceURI)){const e={prefix:i.prefix,namespace:i.namespaceURI};t.push(e);this.visibleNamespaces.Add(e);r++}continue}if(i.localName==="xmlns"&&!i.prefix&&!i.nodeValue){const e={prefix:i.prefix,namespace:i.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}let s=null;let a;if(a=/xmlns:([\w\.-]+)/.exec(i.nodeName)){s=a[1]}let o=true;if(this.exclusive&&!this.IsNamespaceInclusive(e,s)){const t=IsNamespaceUsed(e,s);if(t>1){o=false}else if(t===0){continue}}if(this.IsNamespaceRendered(s,i.nodeValue)){continue}if(o){const e={prefix:s,namespace:i.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}}if(!this.IsNamespaceRendered(e.prefix,e.namespaceURI)&&e.namespaceURI!=="http://www.w3.org/2000/xmlns/"){const n={prefix:e.prefix,namespace:e.namespaceURI};t.push(n);this.visibleNamespaces.Add(n);r++}t.sort(XmlDsigC14NTransformNamespacesComparer);let n=null;t.forEach((e=>{if(e.prefix===n){return}n=e.prefix;this.result.push(" xmlns");if(e.prefix){this.result.push(":"+e.prefix)}this.result.push('="');this.result.push(e.namespace);this.result.push('"')}));return r}WriteAttributesAxis(e){const t=[];for(let r=0;r<e.attributes.length;r++){const n=e.attributes[r];if(!IsNamespaceNode(n)){t.push(n)}}t.sort(XmlDsigC14NTransformAttributesComparer);t.forEach((e=>{if(e!=null){this.result.push(" ");this.result.push(e.nodeName);this.result.push('="');this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Attribute));this.result.push('"')}}))}NormalizeString(e,t){const r=[];if(e){for(let n=0;n<e.length;n++){const i=e[n];if(i==="<"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&lt;")}else if(i===">"&&this.IsTextNode(t)){r.push("&gt;")}else if(i==="&"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&amp;")}else if(i==='"'&&t===XmlNodeType.Attribute){r.push("&quot;")}else if(i==="\t"&&t===XmlNodeType.Attribute){r.push("&#x9;")}else if(i==="\n"&&t===XmlNodeType.Attribute){r.push("&#xA;")}else if(i==="\r"){r.push("&#xD;")}else{r.push(i)}}}return r.join("")}IsTextNode(e){switch(e){case XmlNodeType.Text:case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Whitespace:return true}return false}IsNamespaceInclusive(e,t){const r=t||null;if(e.prefix===r){return false}return this.inclusiveNamespacesPrefixList.indexOf(r||"")!==-1}IsNamespaceRendered(e,t){e=e||"";t=t||"";if(!e&&!t){return true}if(e==="xml"&&t==="http://www.w3.org/XML/1998/namespace"){return true}const r=this.visibleNamespaces.GetPrefix(e);if(r){return r.namespace===t}return false}}function XmlDsigC14NTransformNamespacesComparer(e,t){if(e==t){return 0}else if(!e){return-1}else if(!t){return 1}else if(!e.prefix){return-1}else if(!t.prefix){return 1}else if(e.prefix<t.prefix){return-1}else if(e.prefix>t.prefix){return 1}else{return 0}}function XmlDsigC14NTransformAttributesComparer(e,t){if(!e.namespaceURI&&t.namespaceURI){return-1}if(!t.namespaceURI&&e.namespaceURI){return 1}const r=e.namespaceURI+e.localName;const n=t.namespaceURI+t.localName;if(r===n){return 0}else if(r<n){return-1}else{return 1}}function IsNamespaceUsed(e,t,r=0){const n=t||null;if(e.prefix===n){return++r}if(e.attributes){for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];if(!IsNamespaceNode(i)&&t&&e.attributes[n].prefix===t){return++r}}}for(let n=e.firstChild;!!n;n=n.nextSibling){if(n.nodeType===XmlNodeType.Element){const e=n;const i=IsNamespaceUsed(e,t,r);if(n.nodeType===XmlNodeType.Element&&i){return++r+i}}}return r}function IsNamespaceNode(e){const t=/xmlns:/;if(e!==null&&e.nodeType===XmlNodeType.Attribute&&(e.nodeName==="xmlns"||t.test(e.nodeName))){return true}return false}const XmlSignature={DefaultCanonMethod:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",DefaultDigestMethod:"http://www.w3.org/2001/04/xmlenc#sha256",DefaultPrefix:"ds",ElementNames:{CanonicalizationMethod:"CanonicalizationMethod",DigestMethod:"DigestMethod",DigestValue:"DigestValue",DSAKeyValue:"DSAKeyValue",DomainParameters:"DomainParameters",EncryptedKey:"EncryptedKey",HMACOutputLength:"HMACOutputLength",RSAPSSParams:"RSAPSSParams",MaskGenerationFunction:"MaskGenerationFunction",SaltLength:"SaltLength",KeyInfo:"KeyInfo",KeyName:"KeyName",KeyValue:"KeyValue",Modulus:"Modulus",Exponent:"Exponent",Manifest:"Manifest",Object:"Object",Reference:"Reference",RetrievalMethod:"RetrievalMethod",RSAKeyValue:"RSAKeyValue",ECDSAKeyValue:"ECDSAKeyValue",NamedCurve:"NamedCurve",PublicKey:"PublicKey",Signature:"Signature",SignatureMethod:"SignatureMethod",SignatureValue:"SignatureValue",SignedInfo:"SignedInfo",Transform:"Transform",Transforms:"Transforms",X509Data:"X509Data",PGPData:"PGPData",SPKIData:"SPKIData",SPKIexp:"SPKIexp",MgmtData:"MgmtData",X509IssuerSerial:"X509IssuerSerial",X509IssuerName:"X509IssuerName",X509SerialNumber:"X509SerialNumber",X509SKI:"X509SKI",X509SubjectName:"X509SubjectName",X509Certificate:"X509Certificate",X509CRL:"X509CRL",XPath:"XPath",X:"X",Y:"Y"},AttributeNames:{Algorithm:"Algorithm",Encoding:"Encoding",Id:"Id",MimeType:"MimeType",Type:"Type",URI:"URI"},AlgorithmNamespaces:{XmlDsigBase64Transform:"http://www.w3.org/2000/09/xmldsig#base64",XmlDsigC14NTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",XmlDsigC14NWithCommentsTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",XmlDsigEnvelopedSignatureTransform:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",XmlDsigXPathTransform:"http://www.w3.org/TR/1999/REC-xpath-19991116",XmlDsigXsltTransform:"http://www.w3.org/TR/1999/REC-xslt-19991116",XmlDsigExcC14NTransform:"http://www.w3.org/2001/10/xml-exc-c14n#",XmlDsigExcC14NWithCommentsTransform:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments",XmlDecryptionTransform:"http://www.w3.org/2002/07/decrypt#XML",XmlLicenseTransform:"urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform"},Uri:{Manifest:"http://www.w3.org/2000/09/xmldsig#Manifest"},NamespaceURI:"http://www.w3.org/2000/09/xmldsig#",NamespaceURIMore:"http://www.w3.org/2007/05/xmldsig-more#",NamespaceURIPss:"http://www.example.org/xmldsig-pss/#"};let XmlSignatureObject=class e extends XmlObject{};XmlSignatureObject=__decorate([XmlElement({localName:"xmldsig",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureObject);let XmlSignatureCollection=class e extends XmlCollection{};XmlSignatureCollection=__decorate([XmlElement({localName:"xmldsig_collection",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureCollection);class KeyInfoClause extends XmlSignatureObject{}let CanonicalizationMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultCanonMethod})],CanonicalizationMethod.prototype,"Algorithm",void 0);CanonicalizationMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.CanonicalizationMethod})],CanonicalizationMethod);let DataObject=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],DataObject.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.MimeType,defaultValue:""})],DataObject.prototype,"MimeType",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Encoding,defaultValue:""})],DataObject.prototype,"Encoding",void 0);DataObject=__decorate([XmlElement({localName:XmlSignature.ElementNames.Object})],DataObject);let DataObjects=class e extends XmlSignatureCollection{};DataObjects=__decorate([XmlElement({localName:"xmldsig_objects",parser:DataObject})],DataObjects);let DigestMethod=class e extends XmlSignatureObject{constructor(e){super();if(e){this.Algorithm=e}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultDigestMethod})],DigestMethod.prototype,"Algorithm",void 0);DigestMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.DigestMethod})],DigestMethod);let KeyInfo=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element){continue}let n=null;switch(r.localName){case XmlSignature.ElementNames.KeyValue:n=KeyValue;break;case XmlSignature.ElementNames.X509Data:n=KeyInfoX509Data;break;case XmlSignature.ElementNames.SPKIData:n=SPKIData;break}if(n){const e=new n;e.LoadXml(r);this.Add(e)}}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],KeyInfo.prototype,"Id",void 0);KeyInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyInfo})],KeyInfo);let Transform=class e extends XmlSignatureObject{constructor(){super(...arguments);this.innerXml=null}GetOutput(){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}LoadInnerXml(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"node")}this.innerXml=e}GetInnerXml(){return this.innerXml}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:""})],Transform.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,defaultValue:""})],Transform.prototype,"XPath",void 0);Transform=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transform})],Transform);class XmlDsigBase64Transform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return Convert.FromString(this.innerXml.textContent||"","base64")}}class XmlDsigC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315";this.xmlCanonicalizer=new XmlCanonicalizer(false,false)}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}}class XmlDsigC14NWithCommentsTransform extends XmlDsigC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,false)}}class XmlDsigEnvelopedSignatureTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"}GetOutput(){var e;if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}let t=this.innerXml.firstChild;const r=[];while(t){if(isElement(t)&&t.localName===XmlSignature.ElementNames.Signature&&t.namespaceURI===XmlSignature.NamespaceURI){r.push(t)}t=t.nextSibling}for(const t of r){(e=t.parentNode)===null||e===void 0?void 0:e.removeChild(t)}return this.innerXml}}class XmlDsigExcC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#";this.xmlCanonicalizer=new XmlCanonicalizer(false,true)}get InclusiveNamespacesPrefixList(){return this.xmlCanonicalizer.InclusiveNamespacesPrefixList}set InclusiveNamespacesPrefixList(e){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=e}LoadXml(e){super.LoadXml(e);if(this.Element&&this.Element.childNodes){for(let e=0;e<this.Element.childNodes.length;e++){const t=this.Element.childNodes[e];if(t&&t.nodeType===1){switch(t.localName){case"InclusiveNamespaces":this.setInclusiveNamespacesElement(t);break}}}}}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}setInclusiveNamespacesElement(e){const t=e.getAttribute("PrefixList");if(t&&t.length>0){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=t}}}class XmlDsigExcC14NWithCommentsTransform extends XmlDsigExcC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,true)}}function lookupParentNode(e){return e.parentNode?lookupParentNode(e.parentNode):e}class XmlDsigXPathTransform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}this.Filter(lookupParentNode(this.innerXml),this.XPath)}Filter(e,t){const r=e.childNodes;const n=[];for(let e=0;r&&e<r.length;e++){const t=r.item(e);n.push(t)}n.forEach((e=>{if(this.Evaluate(e,t)){if(e.parentNode){e.parentNode.removeChild(e)}}else{this.Filter(e,t)}}))}GetEvaluator(e){if(typeof self!=="undefined"){return e.ownerDocument==null?e:e.ownerDocument}else{return require("xpath")}}Evaluate(e,t){try{const r=this.GetEvaluator(e);const n=this.GetXml().firstChild;const i=`boolean(${t})`;const s=r.evaluate(i,e,{lookupNamespaceURI:e=>n.lookupNamespaceURI(e)},(typeof self==="undefined"?require("xpath"):self).XPathResult.ANY_TYPE,null);return!s.booleanValue}catch(e){return false}}}__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],XmlDsigXPathTransform.prototype,"XPath",void 0);let Transforms=class e extends XmlSignatureCollection{OnLoadXml(e){super.OnLoadXml(e);this.items=this.GetIterator().map((e=>{switch(e.Algorithm){case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:return ChangeTransform(e,XmlDsigEnvelopedSignatureTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:return ChangeTransform(e,XmlDsigC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:return ChangeTransform(e,XmlDsigExcC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigExcC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:return ChangeTransform(e,XmlDsigBase64Transform);case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:return ChangeTransform(e,XmlDsigXPathTransform);default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.Algorithm)}}))}};Transforms=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transforms,parser:Transform})],Transforms);function ChangeTransform(e,t){const r=new t;r.LoadXml(e.Element);return r}let Reference=class e extends XmlSignatureObject{constructor(e){super();this.DigestMethod=new DigestMethod;if(e){this.Uri=e}}};__decorate([XmlAttribute({defaultValue:""})],Reference.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI})],Reference.prototype,"Uri",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Type,defaultValue:""})],Reference.prototype,"Type",void 0);__decorate([XmlChildElement({parser:Transforms})],Reference.prototype,"Transforms",void 0);__decorate([XmlChildElement({required:true,parser:DigestMethod})],Reference.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({required:true,localName:XmlSignature.ElementNames.DigestValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlBase64Converter})],Reference.prototype,"DigestValue",void 0);Reference=__decorate([XmlElement({localName:XmlSignature.ElementNames.Reference})],Reference);let References=class e extends XmlSignatureCollection{};References=__decorate([XmlElement({localName:"References",parser:Reference})],References);let SignatureMethodOther=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element||r.nodeName===XmlSignature.ElementNames.HMACOutputLength){continue}let n;switch(r.localName){case XmlSignature.ElementNames.RSAPSSParams:n=PssAlgorithmParams;break}if(n){const e=new n;e.LoadXml(r);this.Add(e)}}}};SignatureMethodOther=__decorate([XmlElement({localName:"Other"})],SignatureMethodOther);let SignatureMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:""})],SignatureMethod.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.HMACOutputLength,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlNumberConverter})],SignatureMethod.prototype,"HMACOutputLength",void 0);__decorate([XmlChildElement({parser:SignatureMethodOther,noRoot:true,minOccurs:0})],SignatureMethod.prototype,"Any",void 0);SignatureMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignatureMethod})],SignatureMethod);let SignedInfo=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],SignedInfo.prototype,"Id",void 0);__decorate([XmlChildElement({parser:CanonicalizationMethod,required:true})],SignedInfo.prototype,"CanonicalizationMethod",void 0);__decorate([XmlChildElement({parser:SignatureMethod,required:true})],SignedInfo.prototype,"SignatureMethod",void 0);__decorate([XmlChildElement({parser:References,minOccurs:1,noRoot:true})],SignedInfo.prototype,"References",void 0);SignedInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignedInfo})],SignedInfo);let Signature$2=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],Signature$2.prototype,"Id",void 0);__decorate([XmlChildElement({parser:SignedInfo,required:true})],Signature$2.prototype,"SignedInfo",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SignatureValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter,defaultValue:null})],Signature$2.prototype,"SignatureValue",void 0);__decorate([XmlChildElement({parser:KeyInfo})],Signature$2.prototype,"KeyInfo",void 0);__decorate([XmlChildElement({parser:DataObjects,noRoot:true})],Signature$2.prototype,"ObjectList",void 0);Signature$2=__decorate([XmlElement({localName:XmlSignature.ElementNames.Signature})],Signature$2);const NAMESPACE_URI$1="http://www.w3.org/2001/04/xmldsig-more#";const PREFIX$1="ecdsa";let EcdsaPublicKey=class e extends XmlObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"X",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Y,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"Y",void 0);EcdsaPublicKey=__decorate([XmlElement({localName:XmlSignature.ElementNames.PublicKey,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaPublicKey);let NamedCurve=class e extends XmlObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI,required:true})],NamedCurve.prototype,"Uri",void 0);NamedCurve=__decorate([XmlElement({localName:XmlSignature.ElementNames.NamedCurve,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],NamedCurve);let DomainParameters=class e extends XmlObject{};__decorate([XmlChildElement({parser:NamedCurve})],DomainParameters.prototype,"NamedCurve",void 0);DomainParameters=__decorate([XmlElement({localName:XmlSignature.ElementNames.DomainParameters,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],DomainParameters);let EcdsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.name=XmlSignature.ElementNames.ECDSAKeyValue;this.key=null;this.jwk=null;this.keyUsage=null}get NamedCurve(){return GetNamedCurveOid(this.DomainParameters.NamedCurve.Uri)}async importKey(e){if(e.algorithm.name.toUpperCase()!=="ECDSA"){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}const t=await Application.crypto.subtle.exportKey("jwk",e);this.key=e;this.jwk=t;this.PublicKey=new EcdsaPublicKey;this.PublicKey.X=Convert.FromString(t.x,"base64url");this.PublicKey.Y=Convert.FromString(t.y,"base64url");if(!this.DomainParameters){this.DomainParameters=new DomainParameters}if(!this.DomainParameters.NamedCurve){this.DomainParameters.NamedCurve=new NamedCurve}this.DomainParameters.NamedCurve.Uri=GetNamedCurveOid(t.crv);this.keyUsage=e.usages;return this}async exportKey(e){if(this.key){return this.key}const t=Convert.ToBase64Url(this.PublicKey.X);const r=Convert.ToBase64Url(this.PublicKey.Y);const n=GetNamedCurveFromOid(this.DomainParameters.NamedCurve.Uri);const i={kty:"EC",crv:n,x:t,y:r,ext:true};this.keyUsage=["verify"];const s=await Application.crypto.subtle.importKey("jwk",i,{name:"ECDSA",namedCurve:n},true,this.keyUsage);this.key=s;return this.key}};__decorate([XmlChildElement({parser:DomainParameters})],EcdsaKeyValue.prototype,"DomainParameters",void 0);__decorate([XmlChildElement({parser:EcdsaPublicKey,required:true})],EcdsaKeyValue.prototype,"PublicKey",void 0);EcdsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.ECDSAKeyValue,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaKeyValue);function GetNamedCurveOid(e){switch(e){case"K-256":return"urn:oid:1.3.132.0.10";case"P-256":return"urn:oid:1.2.840.10045.3.1.7";case"P-384":return"urn:oid:1.3.132.0.34";case"P-521":return"urn:oid:1.3.132.0.35"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve")}function GetNamedCurveFromOid(e){switch(e){case"urn:oid:1.3.132.0.10":return"K-256";case"urn:oid:1.2.840.10045.3.1.7":return"P-256";case"urn:oid:1.3.132.0.34":return"P-384";case"urn:oid:1.3.132.0.35":return"P-521"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve OID")}var PssAlgorithmParams_1;const DEFAULT_ALGORITHM={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};let RsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.key=null;this.jwk=null;this.keyUsage=[]}async importKey(e){const t=e.algorithm.name.toUpperCase();if(t!==RSA_PKCS1.toUpperCase()&&t!==RSA_PSS$1.toUpperCase()){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}this.key=e;const r=await Application.crypto.subtle.exportKey("jwk",e);this.jwk=r;this.Modulus=Convert.FromBase64Url(r.n);this.Exponent=Convert.FromBase64Url(r.e);this.keyUsage=e.usages;return this}async exportKey(e=DEFAULT_ALGORITHM){if(this.key){return this.key}if(!this.Modulus){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Modulus")}const t=Convert.ToBase64Url(this.Modulus);if(!this.Exponent){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Exponent")}const r=Convert.ToBase64Url(this.Exponent);let n;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():n="R";break;case RSA_PSS$1.toUpperCase():n="P";break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}switch(e.hash.name.toUpperCase()){case SHA1:n+="S1";break;case SHA256:n+="S256";break;case SHA384:n+="S384";break;case SHA512:n+="S512";break}const i={kty:"RSA",alg:n,n:t,e:r,ext:true};return Application.crypto.subtle.importKey("jwk",i,e,true,this.keyUsage)}LoadXml(e){super.LoadXml(e);this.keyUsage=["verify"]}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Modulus,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Modulus",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Exponent,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Exponent",void 0);RsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAKeyValue})],RsaKeyValue);const NAMESPACE_URI="http://www.w3.org/2007/05/xmldsig-more#";const PREFIX="pss";let MaskGenerationFunction=class e extends XmlObject{};__decorate([XmlChildElement({parser:DigestMethod})],MaskGenerationFunction.prototype,"DigestMethod",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:"http://www.w3.org/2007/05/xmldsig-more#MGF1"})],MaskGenerationFunction.prototype,"Algorithm",void 0);MaskGenerationFunction=__decorate([XmlElement({localName:XmlSignature.ElementNames.MaskGenerationFunction,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],MaskGenerationFunction);let PssAlgorithmParams=PssAlgorithmParams_1=class e extends XmlObject{static FromAlgorithm(e){return new PssAlgorithmParams_1(e)}constructor(e){super();if(e){this.FromAlgorithm(e)}}FromAlgorithm(e){this.DigestMethod=new DigestMethod;const t=CryptoConfig.GetHashAlgorithm(e.hash);this.DigestMethod.Algorithm=t.namespaceURI;if(e.saltLength){this.SaltLength=e.saltLength}}};__decorate([XmlChildElement({parser:DigestMethod})],PssAlgorithmParams.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({parser:MaskGenerationFunction})],PssAlgorithmParams.prototype,"MGF",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams.prototype,"SaltLength",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter})],PssAlgorithmParams.prototype,"TrailerField",void 0);PssAlgorithmParams=PssAlgorithmParams_1=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAPSSParams,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams);let KeyValue=class e extends KeyInfoClause{set Value(e){this.element=null;this.value=e}get Value(){return this.value}constructor(e){super();if(e){this.Value=e}}async importKey(e){switch(e.algorithm.name.toUpperCase()){case RSA_PSS$1.toUpperCase():case RSA_PKCS1.toUpperCase():this.Value=new RsaKeyValue;await this.Value.importKey(e);break;case ECDSA$1.toUpperCase():this.Value=new EcdsaKeyValue;await this.Value.importKey(e);break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.algorithm.name)}return this}async exportKey(e){if(!this.Value){throw new XmlError(XE.NULL_REFERENCE)}return this.Value.exportKey(e)}OnGetXml(e){if(!this.Value){throw new XmlError(XE.CRYPTOGRAPHIC,"KeyValue has empty value")}const t=this.Value.GetXml();if(t){e.appendChild(t)}}OnLoadXml(e){const t=[RsaKeyValue,EcdsaKeyValue];for(const r of t){try{const t=new r;for(let r=0;r<e.childNodes.length;r++){const n=e.childNodes.item(r);if(!isElement(n)){continue}t.LoadXml(n);this.value=t;return}}catch(e){}}throw new XmlError(XE.CRYPTOGRAPHIC,"Unsupported KeyValue in use")}};KeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyValue})],KeyValue);const OID={"2.5.4.3":{short:"CN",long:"CommonName"},"2.5.4.6":{short:"C",long:"Country"},"2.5.4.5":{long:"DeviceSerialNumber"},"0.9.2342.19200300.100.1.25":{short:"DC",long:"DomainComponent"},"1.2.840.113549.1.9.1":{short:"E",long:"EMail"},"2.5.4.42":{short:"G",long:"GivenName"},"2.5.4.43":{short:"I",long:"Initials"},"2.5.4.7":{short:"L",long:"Locality"},"2.5.4.10":{short:"O",long:"Organization"},"2.5.4.11":{short:"OU",long:"OrganizationUnit"},"2.5.4.8":{short:"ST",long:"State"},"2.5.4.9":{short:"Street",long:"StreetAddress"},"2.5.4.4":{short:"SN",long:"SurName"},"2.5.4.12":{short:"T",long:"Title"},"1.2.840.113549.1.9.8":{long:"UnstructuredAddress"},"1.2.840.113549.1.9.2":{long:"UnstructuredName"}};class X509Certificate$1{constructor(e){this.publicKey=null;if(e){const t=new Uint8Array(e);this.LoadRaw(t);this.raw=t}}get SerialNumber(){return this.simpl.serialNumber.valueBlock.toString()}get Issuer(){return this.NameToString(this.simpl.issuer)}get Subject(){return this.NameToString(this.simpl.subject)}async Thumbprint(e="SHA-1"){return Application.crypto.subtle.digest(e,this.raw)}get PublicKey(){return this.publicKey}GetRaw(){return this.raw}async exportKey(e){if(e){const t={algorithm:e,usages:["verify"]};if(t.algorithm.name.toUpperCase()===ECDSA$1){const e=this.simpl.subjectPublicKeyInfo.toJSON();if("crv"in e&&e.crv){t.algorithm.namedCurve=e.crv}else{throw new Error("Cannot get Curved name from the ECDSA public key")}}if(this.isHashedAlgorithm(t.algorithm)){if(typeof t.algorithm.hash==="string"){t.algorithm.hash={name:t.algorithm.hash}}}const r=await this.simpl.getPublicKey({algorithm:t});this.publicKey=r;return r}if(this.simpl.subjectPublicKeyInfo.algorithm.algorithmId==="1.2.840.113549.1.1.1"){this.publicKey=await this.simpl.getPublicKey({algorithm:{algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]}})}else{this.publicKey=await this.simpl.getPublicKey()}return this.publicKey}NameToString(e,t=","){const r=[];e.typesAndValues.forEach((e=>{const t=e.type;const n=OID[t.toString()];const i=n?n.short:null;r.push(`${i?i:t}=${e.value.valueBlock.value}`)}));return r.join(t+" ")}LoadRaw(e){this.raw=new Uint8Array(e);const t=fromBER(this.raw.buffer);this.simpl=new Certificate$1({schema:t.result})}isHashedAlgorithm(e){return!!e["hash"]}}let X509IssuerSerial=class e extends XmlSignatureObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509IssuerName,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509IssuerName",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509SerialNumber,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509SerialNumber",void 0);X509IssuerSerial=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509IssuerSerial})],X509IssuerSerial);var X509IncludeOption;(function(e){e[e["None"]=0]="None";e[e["EndCertOnly"]=1]="EndCertOnly";e[e["ExcludeRoot"]=2]="ExcludeRoot";e[e["WholeChain"]=3]="WholeChain"})(X509IncludeOption||(X509IncludeOption={}));let KeyInfoX509Data=class e extends KeyInfoClause{constructor(e,t=X509IncludeOption.None){super();this.x509crl=null;this.SubjectKeyIdList=[];if(e){if(e instanceof Uint8Array){this.AddCertificate(new X509Certificate$1(e))}else if(e instanceof X509Certificate$1){switch(t){case X509IncludeOption.None:case X509IncludeOption.EndCertOnly:this.AddCertificate(e);break;case X509IncludeOption.ExcludeRoot:this.AddCertificatesChainFrom(e,false);break;case X509IncludeOption.WholeChain:this.AddCertificatesChainFrom(e,true);break}}}}async importKey(e){throw new XmlError(XE.METHOD_NOT_SUPPORTED)}async exportKey(e){if(!this.Certificates.length){throw new XmlError(XE.NULL_REFERENCE)}this.Key=await this.Certificates[0].exportKey(e);return this.Key}get Certificates(){return this.X509CertificateList}get CRL(){return this.x509crl}set CRL(e){this.x509crl=e}get IssuerSerials(){return this.IssuerSerialList}get SubjectKeyIds(){return this.SubjectKeyIdList}get SubjectNames(){return this.SubjectNameList}AddCertificate(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"certificate")}if(!this.X509CertificateList){this.X509CertificateList=[]}this.X509CertificateList.push(e)}AddIssuerSerial(e,t){if(e==null){throw new XmlError(XE.PARAM_REQUIRED,"issuerName")}if(this.IssuerSerialList==null){this.IssuerSerialList=[]}const r={issuerName:e,serialNumber:t};this.IssuerSerialList.push(r)}AddSubjectKeyId(e){if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(typeof e==="string"){if(e!=null){let t;t=Convert.FromBase64(e);this.SubjectKeyIdList.push(t)}}else{this.SubjectKeyIdList.push(e)}}AddSubjectName(e){if(this.SubjectNameList==null){this.SubjectNameList=[]}this.SubjectNameList.push(e)}GetXml(){const e=this.CreateDocument();const t=this.CreateElement(e);const r=this.GetPrefix();if(this.IssuerSerialList!=null&&this.IssuerSerialList.length>0){this.IssuerSerialList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerSerial);const s=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerName);s.textContent=n.issuerName;i.appendChild(s);const a=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SerialNumber);a.textContent=n.serialNumber;i.appendChild(a);t.appendChild(i)}))}if(this.SubjectKeyIdList!=null&&this.SubjectKeyIdList.length>0){this.SubjectKeyIdList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SKI);i.textContent=Convert.ToBase64(n);t.appendChild(i)}))}if(this.SubjectNameList!=null&&this.SubjectNameList.length>0){this.SubjectNameList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SubjectName);i.textContent=n;t.appendChild(i)}))}if(this.X509CertificateList!=null&&this.X509CertificateList.length>0){this.X509CertificateList.forEach((n=>{const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509Certificate);i.textContent=Convert.ToBase64(n.GetRaw());t.appendChild(i)}))}if(this.x509crl!=null){const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509CRL);n.textContent=Convert.ToBase64(this.x509crl);t.appendChild(n)}return t}LoadXml(e){super.LoadXml(e);if(this.IssuerSerialList){this.IssuerSerialList=[]}if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(this.SubjectNameList){this.SubjectNameList=[]}if(this.X509CertificateList){this.X509CertificateList=[]}this.x509crl=null;let t=this.GetChildren(XmlSignature.ElementNames.X509IssuerSerial);if(t){t.forEach((e=>{const t=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509IssuerName,XmlSignature.NamespaceURI,true);const r=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509SerialNumber,XmlSignature.NamespaceURI,true);if(t&&t.textContent&&r&&r.textContent){this.AddIssuerSerial(t.textContent,r.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SKI);if(t){t.forEach((e=>{if(e.textContent){const t=Convert.FromBase64(e.textContent);this.AddSubjectKeyId(t)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SubjectName);if(t!=null){t.forEach((e=>{if(e.textContent){this.AddSubjectName(e.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509Certificate);if(t){t.forEach((e=>{if(e.textContent){const t=Convert.FromBase64(e.textContent);this.AddCertificate(new X509Certificate$1(t))}}))}const r=this.GetChild(XmlSignature.ElementNames.X509CRL,false);if(r&&r.textContent){this.x509crl=Convert.FromBase64(r.textContent)}}AddCertificatesChainFrom(e,t){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}};KeyInfoX509Data=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509Data})],KeyInfoX509Data);let SPKIData=class e extends KeyInfoClause{async importKey(e){const t=await Application.crypto.subtle.exportKey("spki",e);this.SPKIexp=new Uint8Array(t);this.Key=e;return this}async exportKey(e){const t=await Application.crypto.subtle.importKey("spki",this.SPKIexp,e,true,["verify"]);this.Key=t;return t}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SPKIexp,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter})],SPKIData.prototype,"SPKIexp",void 0);SPKIData=__decorate([XmlElement({localName:XmlSignature.ElementNames.SPKIData})],SPKIData);const SignatureAlgorithms={};SignatureAlgorithms[RSA_PKCS1_SHA1_NAMESPACE]=RsaPkcs1Sha1;SignatureAlgorithms[RSA_PKCS1_SHA256_NAMESPACE]=RsaPkcs1Sha256;SignatureAlgorithms[RSA_PKCS1_SHA384_NAMESPACE]=RsaPkcs1Sha384;SignatureAlgorithms[RSA_PKCS1_SHA512_NAMESPACE]=RsaPkcs1Sha512;SignatureAlgorithms[ECDSA_SHA1_NAMESPACE]=EcdsaSha1;SignatureAlgorithms[ECDSA_SHA256_NAMESPACE]=EcdsaSha256;SignatureAlgorithms[ECDSA_SHA384_NAMESPACE]=EcdsaSha384;SignatureAlgorithms[ECDSA_SHA512_NAMESPACE]=EcdsaSha512;SignatureAlgorithms[HMAC_SHA1_NAMESPACE]=HmacSha1$1;SignatureAlgorithms[HMAC_SHA256_NAMESPACE]=HmacSha256$1;SignatureAlgorithms[HMAC_SHA384_NAMESPACE]=HmacSha384;SignatureAlgorithms[HMAC_SHA512_NAMESPACE]=HmacSha512$1;SignatureAlgorithms[RSA_PSS_SHA1_NAMESPACE]=RsaPssWithoutParamsSha1;SignatureAlgorithms[RSA_PSS_SHA256_NAMESPACE]=RsaPssWithoutParamsSha256;SignatureAlgorithms[RSA_PSS_SHA384_NAMESPACE]=RsaPssWithoutParamsSha384;SignatureAlgorithms[RSA_PSS_SHA512_NAMESPACE]=RsaPssWithoutParamsSha512;const HashAlgorithms={};HashAlgorithms[SHA1_NAMESPACE]=Sha1$1;HashAlgorithms[SHA256_NAMESPACE]=Sha256$1;HashAlgorithms[SHA384_NAMESPACE]=Sha384;HashAlgorithms[SHA512_NAMESPACE]=Sha512$1;class CryptoConfig{static CreateFromName(e){let t;switch(e){case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:t=new XmlDsigBase64Transform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:t=new XmlDsigC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:t=new XmlDsigC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:t=new XmlDsigEnvelopedSignatureTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigXsltTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:t=new XmlDsigExcC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:t=new XmlDsigExcC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDecryptionTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e)}return t}static CreateSignatureAlgorithm(e){const t=SignatureAlgorithms[e.Algorithm]||null;if(t){return new t}else if(e.Algorithm===RSA_PSS_WITH_PARAMS_NAMESPACE){let t;e.Any.Some((e=>{if(e instanceof PssAlgorithmParams){t=e}return!!t}));if(t){switch(t.DigestMethod.Algorithm){case SHA1_NAMESPACE:return new RsaPssSha1(t.SaltLength);case SHA256_NAMESPACE:return new RsaPssSha256(t.SaltLength);case SHA384_NAMESPACE:return new RsaPssSha384(t.SaltLength);case SHA512_NAMESPACE:return new RsaPssSha512(t.SaltLength)}}throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get params for RSA-PSS algoriithm`)}throw new Error(`signature algorithm '${e.Algorithm}' is not supported`)}static CreateHashAlgorithm(e){const t=HashAlgorithms[e];if(t){return new t}else{throw new Error("hash algorithm '"+e+"' is not supported")}}static GetHashAlgorithm(e){const t=typeof e==="string"?{name:e}:e;switch(t.name.toUpperCase()){case SHA1:return new Sha1$1;case SHA256:return new Sha256$1;case SHA384:return new Sha384;case SHA512:return new Sha512$1;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,t.name)}}static GetSignatureAlgorithm(e){if(typeof e.hash==="string"){e.hash={name:e.hash}}const t=e.hash.name;if(!t){throw new Error("Signing algorithm doesn't have name for hash")}let r;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():switch(t.toUpperCase()){case SHA1:r=new RsaPkcs1Sha1;break;case SHA256:r=new RsaPkcs1Sha256;break;case SHA384:r=new RsaPkcs1Sha384;break;case SHA512:r=new RsaPkcs1Sha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case RSA_PSS$1.toUpperCase():const n=e.saltLength;switch(t.toUpperCase()){case SHA1:r=n?new RsaPssSha1(n):new RsaPssWithoutParamsSha1;break;case SHA256:r=n?new RsaPssSha256(n):new RsaPssWithoutParamsSha256;break;case SHA384:r=n?new RsaPssSha384(n):new RsaPssWithoutParamsSha384;break;case SHA512:r=n?new RsaPssSha512(n):new RsaPssWithoutParamsSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}e.saltLength=r.algorithm.saltLength;break;case ECDSA$1:switch(t.toUpperCase()){case SHA1:r=new EcdsaSha1;break;case SHA256:r=new EcdsaSha256;break;case SHA384:r=new EcdsaSha384;break;case SHA512:r=new EcdsaSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case HMAC:switch(t.toUpperCase()){case SHA1:r=new HmacSha1$1;break;case SHA256:r=new HmacSha256$1;break;case SHA384:r=new HmacSha384;break;case SHA512:r=new HmacSha512$1;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}return r}}class SignedXml{get XmlSignature(){return this.signature}get Signature(){return this.XmlSignature.SignatureValue}constructor(e){this.signature=new Signature$2;if(e&&e.nodeType===XmlNodeType.Document){this.document=e}else if(e&&e.nodeType===XmlNodeType.Element){const t=(new XMLSerializer).serializeToString(e);this.document=(new DOMParser).parseFromString(t,APPLICATION_XML)}}async Sign(e,t,r,n={}){if(isDocument(r)){r=r.cloneNode(true).documentElement}else if(isElement(r)){r=r.cloneNode(true)}let i;let s;const a=assign$2({},e);if(t.algorithm["hash"]){a.hash=t.algorithm["hash"]}i=CryptoConfig.GetSignatureAlgorithm(a);await this.ApplySignOptions(this.XmlSignature,e,t,n);s=this.XmlSignature.SignedInfo;await this.DigestReferences(r);s.SignatureMethod.Algorithm=i.namespaceURI;if(i instanceof RsaPssBase){const e=assign$2({},t.algorithm,a);if(typeof e.hash==="string"){e.hash={name:e.hash}}const r=new PssAlgorithmParams(e);this.XmlSignature.SignedInfo.SignatureMethod.Any.Add(r)}else if(HMAC.toUpperCase()===e.name.toUpperCase()){let e=0;const r=t.algorithm;switch(r.hash.name.toUpperCase()){case SHA1:e=r.length||160;break;case SHA256:e=r.length||256;break;case SHA384:e=r.length||384;break;case SHA512:e=r.length||512;break}this.XmlSignature.SignedInfo.SignatureMethod.HMACOutputLength=e}const o=this.TransformSignedInfo(r);const f=await i.Sign(o,t,a);this.Key=t;this.XmlSignature.SignatureValue=new Uint8Array(f);if(isElement(r)){this.document=r.ownerDocument}return this.XmlSignature}async Verify(e){let t;let r;if(e){if("algorithm"in e&&"usages"in e&&"type"in e){r=e}else{r=e.key;t=e.content}}if(!t){const e=this.document;if(!(e&&e.documentElement)){throw new XmlError(XE.NULL_PARAM,"SignedXml","document")}t=e.documentElement}if(isDocument(t)||isElement(t)){t=t.cloneNode(true)}const n=await this.ValidateReferences(t);if(n){const e=r?[r]:await this.GetPublicKeys();return this.ValidateSignatureValue(e)}else{return false}}GetXml(){return this.signature.GetXml()}LoadXml(e){this.signature=Signature$2.LoadXml(e)}toString(){const e=this.XmlSignature;const t=e.SignedInfo.References&&e.SignedInfo.References.Some((e=>e.Transforms&&e.Transforms.Some((e=>e instanceof XmlDsigEnvelopedSignatureTransform))));if(t){const e=this.document.documentElement.cloneNode(true);const t=this.XmlSignature.GetXml();if(!t){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from Signature")}const r=t.cloneNode(true);e.appendChild(r);return(new XMLSerializer).serializeToString(e)}return this.XmlSignature.toString()}async GetPublicKeys(){const e=[];const t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const t of this.XmlSignature.KeyInfo.GetIterator()){if(t instanceof KeyInfoX509Data){for(const r of t.Certificates){const t=await r.exportKey();e.push(t)}}else{const r=await t.exportKey();e.push(r)}}if(t.algorithm.name.startsWith("RSA")){for(let r=0;r<e.length;r++){const n=e[r];if(n.algorithm.name.startsWith("RSA")){const i=await Application.crypto.subtle.exportKey("spki",n);const s=await Application.crypto.subtle.importKey("spki",i,t.algorithm,true,["verify"]);e[r]=s}}}return e}GetSignatureNamespaces(){const e={};if(this.XmlSignature.NamespaceURI){e[this.XmlSignature.Prefix||""]=this.XmlSignature.NamespaceURI}return e}CopyNamespaces(e,t,r){this.InjectNamespaces(SelectRootNamespaces(e),t,r)}InjectNamespaces(e,t,r){for(const n in e){const i=e[n];if(r&&n===""){continue}t.setAttribute("xmlns"+(n?":"+n:""),i)}}async DigestReference(e,t,r){if(this.contentHandler){const r=await this.contentHandler(t,this);if(r){e=isDocument(r)?r.documentElement:r}}if(t.Uri){let r;if(!t.Uri.indexOf("#xpointer")){let e=t.Uri;e=e.substring(9).replace(/[\r\n\t\s]/g,"");if(e.length<2||e[0]!==`(`||e[e.length-1]!==`)`){e=""}else{e=e.substring(1,e.length-1)}if(e.length>6&&e.indexOf(`id(`)===0&&e[e.length-1]===`)`){r=e.substring(4,e.length-2)}}else if(t.Uri[0]===`#`){r=t.Uri.substring(1)}if(r){let t=null;const n=[this.XmlSignature.KeyInfo.GetXml()];this.XmlSignature.ObjectList.ForEach((e=>{n.push(e.GetXml())}));for(const i of n){if(i){t=findById(i,r);if(t){const r=t.cloneNode(true);if(isElement(e)){this.CopyNamespaces(e,r,false)}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;this.CopyNamespaces(e,r,true)}this.CopyNamespaces(t,r,false);this.InjectNamespaces(this.GetSignatureNamespaces(),r,true);e=r;break}}}if(!t&&(e&&isElement(e))){t=XmlObject.GetElementById(e,r);if(t){const r=t.cloneNode(true);this.CopyNamespaces(t,r,false);this.CopyNamespaces(e,r,false);e=r}}if(t==null){throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get object by reference: ${r}`)}}}let n=null;if(t.Transforms&&t.Transforms.Count){if(build$1.BufferSourceConverter.isBufferSource(e)){throw new Error("Transformation for argument 'source' of type BufferSource is not implemented")}n=this.ApplyTransforms(t.Transforms,e)}else{if(t.Uri&&t.Uri[0]!==`#`){if(isElement(e)){if(!e.ownerDocument){throw new Error("Cannot get ownerDocument from the XML document")}n=(new XMLSerializer).serializeToString(e.ownerDocument)}else{n=build$1.BufferSourceConverter.toArrayBuffer(e)}}else{const t=new XmlDsigC14NTransform;if(build$1.BufferSourceConverter.isBufferSource(e)){e=Parse(build$1.Convert.ToUtf8String(e)).documentElement}t.LoadInnerXml(e);n=t.GetOutput()}}if(!t.DigestMethod.Algorithm){throw new XmlError(XE.NULL_PARAM,"Reference","DigestMethod")}const i=CryptoConfig.CreateHashAlgorithm(t.DigestMethod.Algorithm);return i.Digest(n)}async DigestReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){if(t.DigestValue){continue}if(!t.DigestMethod.Algorithm){t.DigestMethod.Algorithm=(new Sha256$1).namespaceURI}const r=await this.DigestReference(e,t,false);t.DigestValue=r}}TransformSignedInfo(e){const t=CryptoConfig.CreateFromName(this.XmlSignature.SignedInfo.CanonicalizationMethod.Algorithm);const r=this.XmlSignature.SignedInfo.GetXml();if(!r){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from SignedInfo")}const n=r.cloneNode(true);this.CopyNamespaces(r,n,false);if(e&&!build$1.BufferSourceConverter.isBufferSource(e)){if(e.nodeType===XmlNodeType.Document){this.CopyNamespaces(e.documentElement,n,false)}else{this.CopyNamespaces(e,n,false)}}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;if(e){this.CopyNamespaces(e,n,false)}}const i=SelectNamespaces(r);for(const e in i){const t=i[e];if(e===n.prefix){continue}n.setAttribute("xmlns"+(e?":"+e:""),t)}t.LoadInnerXml(n);const s=t.GetOutput();return s}ResolveTransform(e){if(typeof e==="string"){switch(e){case"enveloped":return new XmlDsigEnvelopedSignatureTransform;case"c14n":return new XmlDsigC14NTransform;case"c14n-com":return new XmlDsigC14NWithCommentsTransform;case"exc-c14n":return new XmlDsigExcC14NTransform;case"exc-c14n-com":return new XmlDsigExcC14NWithCommentsTransform;case"base64":return new XmlDsigBase64Transform;default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e)}}switch(e.name){case"xpath":{const t=new XmlDsigXPathTransform;t.XPath=e.selector;const r=t.GetXml();if(r&&e.namespaces){for(const[t,n]of Object.entries(e.namespaces)){r.firstChild.setAttributeNS("http://www.w3.org/2000/xmlns/",`xmlns:${t}`,n)}}return t}default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.name)}}ApplyTransforms(e,t){let r=null;e.Sort(((e,t)=>{const r=[XmlDsigC14NTransform,XmlDsigC14NWithCommentsTransform,XmlDsigExcC14NTransform,XmlDsigExcC14NWithCommentsTransform];if(r.some((t=>e instanceof t))){return 1}if(r.some((e=>t instanceof e))){return-1}return 0})).ForEach((e=>{e.LoadInnerXml(t);if(e instanceof XmlDsigXPathTransform){e.GetOutput()}else{r=e.GetOutput()}}));if(e.Count===1&&e.Item(0)instanceof XmlDsigEnvelopedSignatureTransform){const e=new XmlDsigC14NTransform;e.LoadInnerXml(t);r=e.GetOutput()}return r}async ApplySignOptions(e,t,r,n){if(n.id){this.XmlSignature.Id=n.id}if(n.keyValue&&r.algorithm.name.toUpperCase()!==HMAC){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;const r=new KeyValue;t.Add(r);await r.importKey(n.keyValue)}if(n.x509){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;n.x509.forEach((e=>{const r=Convert.FromBase64(e);const n=new KeyInfoX509Data(r);t.Add(n)}))}if(n.references){n.references.forEach((t=>{const r=new Reference;if(t.id){r.Id=t.id}if(t.uri!==null&&t.uri!==undefined){r.Uri=t.uri}if(t.type){r.Type=t.type}const n=CryptoConfig.GetHashAlgorithm(t.hash);r.DigestMethod.Algorithm=n.namespaceURI;if(t.transforms&&t.transforms.length){const e=new Transforms;t.transforms.forEach((t=>{e.Add(this.ResolveTransform(t))}));r.Transforms=e}if(!e.SignedInfo.References){e.SignedInfo.References=new References}e.SignedInfo.References.Add(r)}))}if(!e.SignedInfo.References.Count){const t=new Reference;e.SignedInfo.References.Add(t)}}async ValidateReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){const r=await this.DigestReference(e,t,false);const n=Convert.ToBase64(r);const i=Convert.ToString(t.DigestValue,"base64");if(n!==i){const e=`Invalid digest for uri '${t.Uri}'. Calculated digest is ${n} but the xml to validate supplies digest ${i}`;throw new XmlError(XE.CRYPTOGRAPHIC,e)}}return true}async ValidateSignatureValue(e){let t;let r;r=this.TransformSignedInfo(this.document);t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const n of e){const e=await t.Verify(r,n,this.Signature);if(e){return true}}return false}}function findById(e,t){if(e.nodeType!==XmlNodeType.Element){return null}if(e.hasAttribute("Id")&&e.getAttribute("Id")===t){return e}if(e.childNodes&&e.childNodes.length){for(let r=0;r<e.childNodes.length;r++){const n=findById(e.childNodes[r],t);if(n){return n}}}return null}function addNamespace(e,t,r){if(!(t in e)){e[t]=r}}function _SelectRootNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"){addNamespace(t,e.prefix?e.prefix:"",e.namespaceURI)}for(let r=0;r<e.attributes.length;r++){const n=e.attributes.item(r);if(n&&n.prefix==="xmlns"){addNamespace(t,n.localName?n.localName:"",n.value)}}if(e.parentNode){_SelectRootNamespaces(e.parentNode,t)}}}function SelectRootNamespaces(e){const t={};_SelectRootNamespaces(e,t);return t}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Reflect$1;(function(e){(function(t){var r=typeof commonjsGlobal==="object"?commonjsGlobal:typeof self==="object"?self:typeof this==="object"?this:Function("return this;")();var n=i(e);if(typeof r.Reflect==="undefined"){r.Reflect=e}else{n=i(r.Reflect,n)}t(n);function i(e,t){return function(r,n){if(typeof e[r]!=="function"){Object.defineProperty(e,r,{configurable:true,writable:true,value:n})}if(t)t(r,n)}}})((function(e){var t=Object.prototype.hasOwnProperty;var r=typeof Symbol==="function";var n=r&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:"@@toPrimitive";var i=r&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:"@@iterator";var s=typeof Object.create==="function";var a={__proto__:[]}instanceof Array;var o=!s&&!a;var f={create:s?function(){return ie(Object.create(null))}:a?function(){return ie({__proto__:null})}:function(){return ie({})},has:o?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:o?function(e,r){return t.call(e,r)?e[r]:undefined}:function(e,t){return e[t]}};var c=Object.getPrototypeOf(Function);var u=typeof process==="object"&&process.env&&process.env["REFLECT_METADATA_USE_MAP_POLYFILL"]==="true";var l=!u&&typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:te();var h=!u&&typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:re();var d=!u&&typeof WeakMap==="function"?WeakMap:ne();var p=new d;function y(e,t,r,n){if(!B(r)){if(!V(e))throw new TypeError;if(!L(t))throw new TypeError;if(!L(n)&&!B(n)&&!D(n))throw new TypeError;if(D(n))n=undefined;r=G(r);return T(e,t,r,n)}else{if(!V(e))throw new TypeError;if(!W(t))throw new TypeError;return $(e,t)}}e("decorate",y);function m(e,t){function r(r,n){if(!L(r))throw new TypeError;if(!B(n)&&!X(n))throw new TypeError;N(e,t,r,n)}return r}e("metadata",m);function g(e,t,r,n){if(!L(r))throw new TypeError;if(!B(n))n=G(n);return N(e,t,r,n)}e("defineMetadata",g);function b(e,t,r){if(!L(t))throw new TypeError;if(!B(r))r=G(r);return P(e,t,r)}e("hasMetadata",b);function v(e,t,r){if(!L(t))throw new TypeError;if(!B(r))r=G(r);return x(e,t,r)}e("hasOwnMetadata",v);function w(e,t,r){if(!L(t))throw new TypeError;if(!B(r))r=G(r);return I(e,t,r)}e("getMetadata",w);function A(e,t,r){if(!L(t))throw new TypeError;if(!B(r))r=G(r);return k(e,t,r)}e("getOwnMetadata",A);function E(e,t){if(!L(e))throw new TypeError;if(!B(t))t=G(t);return R(e,t)}e("getMetadataKeys",E);function _(e,t){if(!L(e))throw new TypeError;if(!B(t))t=G(t);return M(e,t)}e("getOwnMetadataKeys",_);function S(e,t,r){if(!L(t))throw new TypeError;if(!B(r))r=G(r);var n=C(t,r,false);if(B(n))return false;if(!n.delete(e))return false;if(n.size>0)return true;var i=p.get(t);i.delete(r);if(i.size>0)return true;p.delete(t);return true}e("deleteMetadata",S);function $(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r];var i=n(t);if(!B(i)&&!D(i)){if(!W(i))throw new TypeError;t=i}}return t}function T(e,t,r,n){for(var i=e.length-1;i>=0;--i){var s=e[i];var a=s(t,r,n);if(!B(a)&&!D(a)){if(!L(a))throw new TypeError;n=a}}return n}function C(e,t,r){var n=p.get(e);if(B(n)){if(!r)return undefined;n=new l;p.set(e,n)}var i=n.get(t);if(B(i)){if(!r)return undefined;i=new l;n.set(t,i)}return i}function P(e,t,r){var n=x(e,t,r);if(n)return true;var i=ee(t);if(!D(i))return P(e,i,r);return false}function x(e,t,r){var n=C(t,r,false);if(B(n))return false;return H(n.has(e))}function I(e,t,r){var n=x(e,t,r);if(n)return k(e,t,r);var i=ee(t);if(!D(i))return I(e,i,r);return undefined}function k(e,t,r){var n=C(t,r,false);if(B(n))return undefined;return n.get(e)}function N(e,t,r,n){var i=C(r,n,true);i.set(e,t)}function R(e,t){var r=M(e,t);var n=ee(e);if(n===null)return r;var i=R(n,t);if(i.length<=0)return r;if(r.length<=0)return i;var s=new h;var a=[];for(var o=0,f=r;o<f.length;o++){var c=f[o];var u=s.has(c);if(!u){s.add(c);a.push(c)}}for(var l=0,d=i;l<d.length;l++){var c=d[l];var u=s.has(c);if(!u){s.add(c);a.push(c)}}return a}function M(e,t){var r=[];var n=C(e,t,false);if(B(n))return r;var i=n.keys();var s=J(i);var a=0;while(true){var o=Q(s);if(!o){r.length=a;return r}var f=q(o);try{r[a]=f}catch(e){try{Z(s)}finally{throw e}}a++}}function O(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function B(e){return e===undefined}function D(e){return e===null}function U(e){return typeof e==="symbol"}function L(e){return typeof e==="object"?e!==null:typeof e==="function"}function F(e,t){switch(O(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=t===3?"string":t===5?"number":"default";var i=Y(e,n);if(i!==undefined){var s=i.call(e,r);if(L(s))throw new TypeError;return s}return j(e,r==="default"?"number":r)}function j(e,t){if(t==="string"){var r=e.toString;if(z(r)){var n=r.call(e);if(!L(n))return n}var i=e.valueOf;if(z(i)){var n=i.call(e);if(!L(n))return n}}else{var i=e.valueOf;if(z(i)){var n=i.call(e);if(!L(n))return n}var s=e.toString;if(z(s)){var n=s.call(e);if(!L(n))return n}}throw new TypeError}function H(e){return!!e}function K(e){return""+e}function G(e){var t=F(e,3);if(U(t))return t;return K(t)}function V(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function z(e){return typeof e==="function"}function W(e){return typeof e==="function"}function X(e){switch(O(e)){case 3:return true;case 4:return true;default:return false}}function Y(e,t){var r=e[t];if(r===undefined||r===null)return undefined;if(!z(r))throw new TypeError;return r}function J(e){var t=Y(e,i);if(!z(t))throw new TypeError;var r=t.call(e);if(!L(r))throw new TypeError;return r}function q(e){return e.value}function Q(e){var t=e.next();return t.done?false:t}function Z(e){var t=e["return"];if(t)t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if(typeof e!=="function"||e===c)return t;if(t!==c)return t;var r=e.prototype;var n=r&&Object.getPrototypeOf(r);if(n==null||n===Object.prototype)return t;var i=n.constructor;if(typeof i!=="function")return t;if(i===e)return t;return i}function te(){var e={};var t=[];var r=function(){function e(e,t,r){this._index=0;this._keys=e;this._values=t;this._selector=r}e.prototype["@@iterator"]=function(){return this};e.prototype[i]=function(){return this};e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);if(e+1>=this._keys.length){this._index=-1;this._keys=t;this._values=t}else{this._index++}return{value:r,done:false}}return{value:undefined,done:true}};e.prototype.throw=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}throw e};e.prototype.return=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}return{value:e,done:true}};return e}();return function(){function t(){this._keys=[];this._values=[];this._cacheKey=e;this._cacheIndex=-2}Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});t.prototype.has=function(e){return this._find(e,false)>=0};t.prototype.get=function(e){var t=this._find(e,false);return t>=0?this._values[t]:undefined};t.prototype.set=function(e,t){var r=this._find(e,true);this._values[r]=t;return this};t.prototype.delete=function(t){var r=this._find(t,false);if(r>=0){var n=this._keys.length;for(var i=r+1;i<n;i++){this._keys[i-1]=this._keys[i];this._values[i-1]=this._values[i]}this._keys.length--;this._values.length--;if(t===this._cacheKey){this._cacheKey=e;this._cacheIndex=-2}return true}return false};t.prototype.clear=function(){this._keys.length=0;this._values.length=0;this._cacheKey=e;this._cacheIndex=-2};t.prototype.keys=function(){return new r(this._keys,this._values,n)};t.prototype.values=function(){return new r(this._keys,this._values,s)};t.prototype.entries=function(){return new r(this._keys,this._values,a)};t.prototype["@@iterator"]=function(){return this.entries()};t.prototype[i]=function(){return this.entries()};t.prototype._find=function(e,t){if(this._cacheKey!==e){this._cacheIndex=this._keys.indexOf(this._cacheKey=e)}if(this._cacheIndex<0&&t){this._cacheIndex=this._keys.length;this._keys.push(e);this._values.push(undefined)}return this._cacheIndex};return t}();function n(e,t){return e}function s(e,t){return t}function a(e,t){return[e,t]}}function re(){return function(){function e(){this._map=new l}Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:true,configurable:true});e.prototype.has=function(e){return this._map.has(e)};e.prototype.add=function(e){return this._map.set(e,e),this};e.prototype.delete=function(e){return this._map.delete(e)};e.prototype.clear=function(){this._map.clear()};e.prototype.keys=function(){return this._map.keys()};e.prototype.values=function(){return this._map.values()};e.prototype.entries=function(){return this._map.entries()};e.prototype["@@iterator"]=function(){return this.keys()};e.prototype[i]=function(){return this.keys()};return e}()}function ne(){var e=16;var r=f.create();var n=i();return function(){function e(){this._key=i()}e.prototype.has=function(e){var t=s(e,false);return t!==undefined?f.has(t,this._key):false};e.prototype.get=function(e){var t=s(e,false);return t!==undefined?f.get(t,this._key):undefined};e.prototype.set=function(e,t){var r=s(e,true);r[this._key]=t;return this};e.prototype.delete=function(e){var t=s(e,false);return t!==undefined?delete t[this._key]:false};e.prototype.clear=function(){this._key=i()};return e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(f.has(r,e));r[e]=true;return e}function s(e,r){if(!t.call(e,n)){if(!r)return undefined;Object.defineProperty(e,n,{value:f.create()})}return e[n]}function a(e,t){for(var r=0;r<t;++r)e[r]=Math.random()*255|0;return e}function o(e){if(typeof Uint8Array==="function"){if(typeof crypto!=="undefined")return crypto.getRandomValues(new Uint8Array(e));if(typeof msCrypto!=="undefined")return msCrypto.getRandomValues(new Uint8Array(e));return a(new Uint8Array(e),e)}return a(new Array(e),e)}function c(){var t=o(e);t[6]=t[6]&79|64;t[8]=t[8]&191|128;var r="";for(var n=0;n<e;++n){var i=t[n];if(n===4||n===6||n===8)r+="-";if(i<16)r+="0";r+=i.toString(16).toLowerCase()}return r}}function ie(e){e.__=undefined;delete e.__;return e}}))})(Reflect$1||(Reflect$1={}));var AsnTypeTypes;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Set"]=1]="Set";e[e["Choice"]=2]="Choice"})(AsnTypeTypes||(AsnTypeTypes={}));var AsnPropTypes;(function(e){e[e["Any"]=1]="Any";e[e["Boolean"]=2]="Boolean";e[e["OctetString"]=3]="OctetString";e[e["BitString"]=4]="BitString";e[e["Integer"]=5]="Integer";e[e["Enumerated"]=6]="Enumerated";e[e["ObjectIdentifier"]=7]="ObjectIdentifier";e[e["Utf8String"]=8]="Utf8String";e[e["BmpString"]=9]="BmpString";e[e["UniversalString"]=10]="UniversalString";e[e["NumericString"]=11]="NumericString";e[e["PrintableString"]=12]="PrintableString";e[e["TeletexString"]=13]="TeletexString";e[e["VideotexString"]=14]="VideotexString";e[e["IA5String"]=15]="IA5String";e[e["GraphicString"]=16]="GraphicString";e[e["VisibleString"]=17]="VisibleString";e[e["GeneralString"]=18]="GeneralString";e[e["CharacterString"]=19]="CharacterString";e[e["UTCTime"]=20]="UTCTime";e[e["GeneralizedTime"]=21]="GeneralizedTime";e[e["DATE"]=22]="DATE";e[e["TimeOfDay"]=23]="TimeOfDay";e[e["DateTime"]=24]="DateTime";e[e["Duration"]=25]="Duration";e[e["TIME"]=26]="TIME";e[e["Null"]=27]="Null"})(AsnPropTypes||(AsnPropTypes={}));class BitString{constructor(e,t=0){this.unusedBits=0;this.value=new ArrayBuffer(0);if(e){if(typeof e==="number"){this.fromNumber(e)}else if(build$1.BufferSourceConverter.isBufferSource(e)){this.unusedBits=t;this.value=build$1.BufferSourceConverter.toArrayBuffer(e)}else{throw TypeError("Unsupported type of 'params' argument for BitString")}}}fromASN(e){if(!(e instanceof BitString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString")}this.unusedBits=e.valueBlock.unusedBits;this.value=e.valueBlock.valueHex;return this}toASN(){return new BitString$1({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new BitString$1({name:e})}toNumber(){let e="";const t=new Uint8Array(this.value);for(const r of t){e+=r.toString(2).padStart(8,"0")}e=e.split("").reverse().join("");if(this.unusedBits){e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")}return parseInt(e,2)}fromNumber(e){let t=e.toString(2);const r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;const n=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let i=0;while(i<r){n[i]=parseInt(t.slice(i<<3,(i<<3)+8),2);i++}this.value=n.buffer}}class OctetString{constructor(e){if(typeof e==="number"){this.buffer=new ArrayBuffer(e)}else{if(build$1.BufferSourceConverter.isBufferSource(e)){this.buffer=build$1.BufferSourceConverter.toArrayBuffer(e)}else if(Array.isArray(e)){this.buffer=new Uint8Array(e)}else{this.buffer=new ArrayBuffer(0)}}}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(e){if(!(e instanceof OctetString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString")}this.buffer=e.valueBlock.valueHex;return this}toASN(){return new OctetString$1({valueHex:this.buffer})}toSchema(e){return new OctetString$1({name:e})}}const AsnAnyConverter={fromASN:e=>e instanceof Null?null:e.valueBeforeDecodeView,toASN:e=>{if(e===null){return new Null}const t=fromBER(e);if(t.result.error){throw new Error(t.result.error)}return t.result}};const AsnIntegerConverter={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Integer({value:+e})};const AsnEnumeratedConverter={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new Enumerated({value:e})};const AsnIntegerArrayBufferConverter$1={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new Integer({valueHex:e})};const AsnIntegerBigIntConverter={fromASN:e=>e.toBigInt(),toASN:e=>Integer.fromBigInt(e)};const AsnBitStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new BitString$1({valueHex:e})};const AsnObjectIdentifierConverter={fromASN:e=>e.valueBlock.toString(),toASN:e=>new ObjectIdentifier$1({value:e})};const AsnBooleanConverter={fromASN:e=>e.valueBlock.value,toASN:e=>new Boolean$1({value:e})};const AsnOctetStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new OctetString$1({valueHex:e})};const AsnConstructedOctetStringConverter={fromASN:e=>new OctetString(e.getValue()),toASN:e=>e.toASN()};function createStringConverter(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}const AsnUtf8StringConverter=createStringConverter(Utf8String);const AsnBmpStringConverter=createStringConverter(BmpString);const AsnUniversalStringConverter=createStringConverter(UniversalString);const AsnNumericStringConverter=createStringConverter(NumericString);const AsnPrintableStringConverter=createStringConverter(PrintableString);const AsnTeletexStringConverter=createStringConverter(TeletexString);const AsnVideotexStringConverter=createStringConverter(VideotexString);const AsnIA5StringConverter=createStringConverter(IA5String);const AsnGraphicStringConverter=createStringConverter(GraphicString);const AsnVisibleStringConverter=createStringConverter(VisibleString);const AsnGeneralStringConverter=createStringConverter(GeneralString);const AsnCharacterStringConverter=createStringConverter(CharacterString);const AsnUTCTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new UTCTime({valueDate:e})};const AsnGeneralizedTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new GeneralizedTime({valueDate:e})};const AsnNullConverter={fromASN:()=>null,toASN:()=>new Null};function defaultConverter(e){switch(e){case AsnPropTypes.Any:return AsnAnyConverter;case AsnPropTypes.BitString:return AsnBitStringConverter;case AsnPropTypes.BmpString:return AsnBmpStringConverter;case AsnPropTypes.Boolean:return AsnBooleanConverter;case AsnPropTypes.CharacterString:return AsnCharacterStringConverter;case AsnPropTypes.Enumerated:return AsnEnumeratedConverter;case AsnPropTypes.GeneralString:return AsnGeneralStringConverter;case AsnPropTypes.GeneralizedTime:return AsnGeneralizedTimeConverter;case AsnPropTypes.GraphicString:return AsnGraphicStringConverter;case AsnPropTypes.IA5String:return AsnIA5StringConverter;case AsnPropTypes.Integer:return AsnIntegerConverter;case AsnPropTypes.Null:return AsnNullConverter;case AsnPropTypes.NumericString:return AsnNumericStringConverter;case AsnPropTypes.ObjectIdentifier:return AsnObjectIdentifierConverter;case AsnPropTypes.OctetString:return AsnOctetStringConverter;case AsnPropTypes.PrintableString:return AsnPrintableStringConverter;case AsnPropTypes.TeletexString:return AsnTeletexStringConverter;case AsnPropTypes.UTCTime:return AsnUTCTimeConverter;case AsnPropTypes.UniversalString:return AsnUniversalStringConverter;case AsnPropTypes.Utf8String:return AsnUtf8StringConverter;case AsnPropTypes.VideotexString:return AsnVideotexStringConverter;case AsnPropTypes.VisibleString:return AsnVisibleStringConverter;default:return null}}function isConvertible$1(e){if(typeof e==="function"&&e.prototype){if(e.prototype.toASN&&e.prototype.fromASN){return true}else{return isConvertible$1(e.prototype)}}else{return!!(e&&typeof e==="object"&&"toASN"in e&&"fromASN"in e)}}function isTypeOfArray(e){var t;if(e){const r=Object.getPrototypeOf(e);if(((t=r===null||r===void 0?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array){return true}return isTypeOfArray(r)}return false}function isArrayEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==n[t]){return false}}return true}class AsnSchemaStorage{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=false){const r=this.items.get(e);if(!r){throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`)}if(t&&!r.schema){throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`)}return r}cache(e){const t=this.get(e);if(!t.schema){t.schema=this.create(e,true)}}createDefault(e){const t={type:AsnTypeTypes.Sequence,items:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.items=Object.assign({},t.items,r.items)}return t}create(e,t){const r=this.items.get(e)||this.createDefault(e);const n=[];for(const e in r.items){const i=r.items[e];const s=t?e:"";let a;if(typeof i.type==="number"){const e=AsnPropTypes[i.type];const t=asn1js[e];if(!t){throw new Error(`Cannot get ASN1 class by name '${e}'`)}a=new t({name:s})}else if(isConvertible$1(i.type)){const e=new i.type;a=e.toSchema(s)}else if(i.optional){const e=this.get(i.type);if(e.type===AsnTypeTypes.Choice){a=new Any({name:s})}else{a=this.create(i.type,false);a.name=s}}else{a=new Any({name:s})}const o=!!i.optional||i.defaultValue!==undefined;if(i.repeated){a.name="";const e=i.repeated==="set"?Set$1:Sequence;a=new e({name:"",value:[new Repeated({name:s,value:a})]})}if(i.context!==null&&i.context!==undefined){if(i.implicit){if(typeof i.type==="number"||isConvertible$1(i.type)){const e=i.repeated?Constructed:Primitive;n.push(new e({name:s,optional:o,idBlock:{tagClass:3,tagNumber:i.context}}))}else{this.cache(i.type);const e=!!i.repeated;let t=!e?this.get(i.type,true).schema:a;t="valueBlock"in t?t.valueBlock.value:t.value;n.push(new Constructed({name:!e?s:"",optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:t}))}}else{n.push(new Constructed({optional:o,idBlock:{tagClass:3,tagNumber:i.context},value:[a]}))}}else{a.optional=o;n.push(a)}}switch(r.type){case AsnTypeTypes.Sequence:return new Sequence({value:n,name:""});case AsnTypeTypes.Set:return new Set$1({value:n,name:""});case AsnTypeTypes.Choice:return new Choice({value:n,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=Object.getPrototypeOf(e);if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const schemaStorage$1=new AsnSchemaStorage;const AsnType=e=>t=>{let r;if(!schemaStorage$1.has(t)){r=schemaStorage$1.createDefault(t);schemaStorage$1.set(t,r)}else{r=schemaStorage$1.get(t)}Object.assign(r,e)};const AsnChoiceType=()=>AsnType({type:AsnTypeTypes.Choice});const AsnSetType=e=>AsnType({type:AsnTypeTypes.Set,...e});const AsnSequenceType=e=>AsnType({type:AsnTypeTypes.Sequence,...e});const AsnProp=e=>(t,r)=>{let n;if(!schemaStorage$1.has(t.constructor)){n=schemaStorage$1.createDefault(t.constructor);schemaStorage$1.set(t.constructor,n)}else{n=schemaStorage$1.get(t.constructor)}const i=Object.assign({},e);if(typeof i.type==="number"&&!i.converter){const n=defaultConverter(e.type);if(!n){throw new Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`)}i.converter=n}n.items[r]=i};class AsnSchemaValidationError extends Error{constructor(){super(...arguments);this.schemas=[]}}class AsnParser{static parse(e,t){const r=fromBER(e);if(r.result.error){throw new Error(r.result.error)}const n=this.fromASN(r.result,t);return n}static fromASN(e,t){var r;try{if(isConvertible$1(t)){const r=new t;return r.fromASN(e)}const n=schemaStorage$1.get(t);schemaStorage$1.cache(t);let i=n.schema;if(e.constructor===Constructed&&n.type!==AsnTypeTypes.Choice){i=new Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const t in n.items){delete e[t]}}const s=compareSchema({},e,i);if(!s.verified){throw new AsnSchemaValidationError(`Data does not match to ${t.name} ASN1 schema. ${s.result.error}`)}const a=new t;if(isTypeOfArray(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value))){throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`)}const r=n.itemType;if(typeof r==="number"){const n=defaultConverter(r);if(!n){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}return t.from(e.valueBlock.value,(e=>n.fromASN(e)))}else{return t.from(e.valueBlock.value,(e=>this.fromASN(e,r)))}}for(const e in n.items){const t=s.result[e];if(!t){continue}const i=n.items[e];const o=i.type;if(typeof o==="number"||isConvertible$1(o)){const n=(r=i.converter)!==null&&r!==void 0?r:isConvertible$1(o)?new o:null;if(!n){throw new Error("Converter is empty")}if(i.repeated){if(i.implicit){const r=i.repeated==="sequence"?Sequence:Set$1;const s=new r;s.valueBlock=t.valueBlock;const o=fromBER(s.toBER(false));if(o.offset===-1){throw new Error(`Cannot parse the child item. ${o.result.error}`)}if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value))){throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.")}const f=o.result.valueBlock.value;a[e]=Array.from(f,(e=>n.fromASN(e)))}else{a[e]=Array.from(t,(e=>n.fromASN(e)))}}else{let r=t;if(i.implicit){let e;if(isConvertible$1(o)){e=(new o).toSchema("")}else{const t=AsnPropTypes[o];const r=asn1js[t];if(!r){throw new Error(`Cannot get '${t}' class from asn1js module`)}e=new r}e.valueBlock=r.valueBlock;r=fromBER(e.toBER(false)).result}a[e]=n.fromASN(r)}}else{if(i.repeated){if(!Array.isArray(t)){throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.")}a[e]=Array.from(t,(e=>this.fromASN(e,o)))}else{a[e]=this.fromASN(t,o)}}}return a}catch(e){if(e instanceof AsnSchemaValidationError){e.schemas.push(t.name)}throw e}}}class AsnSerializer{static serialize(e){if(e instanceof BaseBlock){return e.toBER(false)}return this.toASN(e).toBER(false)}static toASN(e){if(e&&typeof e==="object"&&isConvertible$1(e)){return e.toASN()}if(!(e&&typeof e==="object")){throw new TypeError("Parameter 1 should be type of Object.")}const t=e.constructor;const r=schemaStorage$1.get(t);schemaStorage$1.cache(t);let n=[];if(r.itemType){if(!Array.isArray(e)){throw new TypeError("Parameter 1 should be type of Array.")}if(typeof r.itemType==="number"){const i=defaultConverter(r.itemType);if(!i){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}n=e.map((e=>i.toASN(e)))}else{n=e.map((e=>this.toAsnItem({type:r.itemType},"[]",t,e)))}}else{for(const i in r.items){const s=r.items[i];const a=e[i];if(a===undefined||s.defaultValue===a||typeof s.defaultValue==="object"&&typeof a==="object"&&isArrayEqual(this.serialize(s.defaultValue),this.serialize(a))){continue}const o=AsnSerializer.toAsnItem(s,i,t,a);if(typeof s.context==="number"){if(s.implicit){if(!s.repeated&&(typeof s.type==="number"||isConvertible$1(s.type))){const e={};e.valueHex=o instanceof Null?o.valueBeforeDecodeView:o.valueBlock.toBER();n.push(new Primitive({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else{n.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:o.valueBlock.value}))}}else{n.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}))}}else if(s.repeated){n=n.concat(o)}else{n.push(o)}}}let i;switch(r.type){case AsnTypeTypes.Sequence:i=new Sequence({value:n});break;case AsnTypeTypes.Set:i=new Set$1({value:n});break;case AsnTypeTypes.Choice:if(!n[0]){throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`)}i=n[0];break}return i}static toAsnItem(e,t,r,n){let i;if(typeof e.type==="number"){const s=e.converter;if(!s){throw new Error(`Property '${t}' doesn't have converter for type ${AsnPropTypes[e.type]} in schema '${r.name}'`)}if(e.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(n,(e=>s.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$1;i=new r({value:t})}else{i=s.toASN(n)}}else{if(e.repeated){if(!Array.isArray(n)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(n,(e=>this.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$1;i=new r({value:t})}else{i=this.toASN(n)}}return i}}class AsnArray extends Array{constructor(e=[]){if(typeof e==="number"){super(e)}else{super();for(const t of e){this.push(t)}}}}class AsnConvert{static serialize(e){return AsnSerializer.serialize(e)}static parse(e,t){return AsnParser.parse(e,t)}static toString(e){const t=build$1.BufferSourceConverter.isBufferSource(e)?build$1.BufferSourceConverter.toArrayBuffer(e):AsnConvert.serialize(e);const r=fromBER(t);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}}const es2015=Object.freeze({__proto__:null,AsnProp,AsnType,AsnChoiceType,AsnSequenceType,AsnSetType,get AsnTypeTypes(){return AsnTypeTypes},get AsnPropTypes(){return AsnPropTypes},AsnParser,AsnSerializer,AsnAnyConverter,AsnIntegerConverter,AsnEnumeratedConverter,AsnIntegerArrayBufferConverter:AsnIntegerArrayBufferConverter$1,AsnIntegerBigIntConverter,AsnBitStringConverter,AsnObjectIdentifierConverter,AsnBooleanConverter,AsnOctetStringConverter,AsnConstructedOctetStringConverter,AsnUtf8StringConverter,AsnBmpStringConverter,AsnUniversalStringConverter,AsnNumericStringConverter,AsnPrintableStringConverter,AsnTeletexStringConverter,AsnVideotexStringConverter,AsnIA5StringConverter,AsnGraphicStringConverter,AsnVisibleStringConverter,AsnGeneralStringConverter,AsnCharacterStringConverter,AsnUTCTimeConverter,AsnGeneralizedTimeConverter,AsnNullConverter,defaultConverter,BitString,OctetString,AsnSchemaValidationError,AsnArray,AsnConvert});var ipaddr=createCommonjsModule$2((function(e){(function(t){const r="(0?\\d+|0x[a-f0-9]+)";const n={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")};const i=new RegExp(`^0[0-7]+$`,"i");const s=new RegExp(`^0x[a-f0-9]+$`,"i");const a="%[0-9a-z]{1,}";const o="(?:[0-9a-f]+::?)+";const f={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${r}\\.${r}\\.${r}\\.${r}(${a})?$`,"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::")){return null}let r=0;let n=-1;let i=(e.match(f.zoneIndex)||[])[0];let s,a;if(i){i=i.substring(1);e=e.replace(/%.+$/,"")}while((n=e.indexOf(":",n+1))>=0){r++}if(e.substr(0,2)==="::"){r--}if(e.substr(-2,2)==="::"){r--}if(r>t){return null}a=t-r;s=":";while(a--){s+="0:"}e=e.replace("::",s);if(e[0]===":"){e=e.slice(1)}if(e[e.length-1]===":"){e=e.slice(0,-1)}t=function(){const t=e.split(":");const r=[];for(let e=0;e<t.length;e++){r.push(parseInt(t[e],16))}return r}();return{parts:t,zoneId:i}}function u(e,t,r,n){if(e.length!==t.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}let i=0;let s;while(n>0){s=r-n;if(s<0){s=0}if(e[i]>>s!==t[i]>>s){return false}n-=r;i+=1}return true}function l(e){if(s.test(e)){return parseInt(e,16)}if(e[0]==="0"&&!isNaN(parseInt(e[1],10))){if(i.test(e)){return parseInt(e,8)}throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function h(e,t){while(e.length<t){e=`0${e}`}return e}const d={};d.IPv4=function(){function e(e){if(e.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}let t,r;for(t=0;t<e.length;t++){r=e[t];if(!(0<=r&&r<=255)){throw new Error("ipaddr: ipv4 octet should fit in 8 bits")}}this.octets=e}e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]};e.prototype.kind=function(){return"ipv4"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return u(this.octets,e.octets,8,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,s;for(n=3;n>=0;n-=1){i=this.octets[n];if(i in r){s=r[i];if(t&&s!==0){return null}if(s!==8){t=true}e+=s}else{return null}}return 32-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){return this.octets.slice(0)};e.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)};e.prototype.toNormalizedString=function(){return this.toString()};e.prototype.toString=function(){return this.octets.join(".")};return e}();d.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<4){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.isIPv4=function(e){return this.parser(e)!==null};d.IPv4.isValid=function(e){try{new this(this.parser(e));return true}catch(e){return false}};d.IPv4.isValidFourPartDecimal=function(e){if(d.IPv4.isValid(e)&&e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/)){return true}else{return false}};d.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<4){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.parse=function(e){const t=this.parser(e);if(t===null){throw new Error("ipaddr: string is not formatted like an IPv4 Address")}return new this(t)};d.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];Object.defineProperty(r,"toString",{value:function(){return this.join("/")}});return r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")};d.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet)){return function(){const e=t.slice(1,6);const n=[];for(let t=0;t<e.length;t++){r=e[t];n.push(l(r))}return n}()}else if(t=e.match(n.longValue)){i=l(t[1]);if(i>4294967295||i<0){throw new Error("ipaddr: address outside defined range")}return function(){const e=[];let t;for(t=0;t<=24;t+=8){e.push(i>>t&255)}return e}().reverse()}else if(t=e.match(n.twoOctet)){return function(){const e=t.slice(1,4);const r=[];i=l(e[1]);if(i>16777215||i<0){throw new Error("ipaddr: address outside defined range")}r.push(l(e[0]));r.push(i>>16&255);r.push(i>>8&255);r.push(i&255);return r}()}else if(t=e.match(n.threeOctet)){return function(){const e=t.slice(1,5);const r=[];i=l(e[2]);if(i>65535||i<0){throw new Error("ipaddr: address outside defined range")}r.push(l(e[0]));r.push(l(e[1]));r.push(i>>8&255);r.push(i&255);return r}()}else{return null}};d.IPv4.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>32){throw new Error("ipaddr: invalid IPv4 prefix length")}const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<4){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.IPv6=function(){function e(e,t){let r,n;if(e.length===16){this.parts=[];for(r=0;r<=14;r+=2){this.parts.push(e[r]<<8|e[r+1])}}else if(e.length===8){this.parts=e}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16")}for(r=0;r<this.parts.length;r++){n=this.parts[r];if(!(0<=n&&n<=65535)){throw new Error("ipaddr: ipv6 part should fit in 16 bits")}}if(t){this.zoneId=t}}e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]};e.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};e.prototype.kind=function(){return"ipv6"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one")}return u(this.parts,e.parts,16,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let s=7;s>=0;s-=1){n=this.parts[s];if(n in r){i=r[n];if(t&&i!==0){return null}if(i!==16){t=true}e+=i}else{return null}}return 128-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){let e;const t=[];const r=this.parts;for(let n=0;n<r.length;n++){e=r[n];t.push(e>>8);t.push(e&255)}return t};e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(h(this.parts[t].toString(16),4))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}const e=this.parts.slice(-2);const t=e[0];const r=e[1];return new d.IPv4([t>>8,t&255,r>>8,r&255])};e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(this.parts[t].toString(16))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g;const t=this.toNormalizedString();let r=0;let n=-1;let i;while(i=e.exec(t)){if(i[0].length>n){r=i.index;n=i[0].length}}if(n<0){return t}return`${t.substring(0,r)}::${t.substring(r+n)}`};e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")};return e}();d.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const n=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const i=[];let s=0;while(s<16){i.push(parseInt(r[s],10)|parseInt(n[s],10)^255);s++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.isIPv6=function(e){return this.parser(e)!==null};d.IPv6.isValid=function(e){if(typeof e==="string"&&e.indexOf(":")===-1){return false}try{const t=this.parser(e);new this(t.parts,t.zoneId);return true}catch(e){return false}};d.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,s;try{t=this.parseCIDR(e);n=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();i=[];r=0;while(r<16){i.push(parseInt(n[r],10)&parseInt(s[r],10));r++}return new this(i)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.parse=function(e){const t=this.parser(e);if(t.parts===null){throw new Error("ipaddr: string is not formatted like an IPv6 Address")}return new this(t.parts,t.zoneId)};d.IPv6.parseCIDR=function(e){let t,r,n;if(r=e.match(/^(.+)\/(\d+)$/)){t=parseInt(r[2]);if(t>=0&&t<=128){n=[this.parse(r[1]),t];Object.defineProperty(n,"toString",{value:function(){return this.join("/")}});return n}}throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")};d.IPv6.parser=function(e){let t,r,n,i,s,a;if(n=e.match(f.deprecatedTransitional)){return this.parser(`::ffff:${n[1]}`)}if(f.native.test(e)){return c(e,8)}if(n=e.match(f.transitional)){a=n[6]||"";t=c(n[1].slice(0,-1)+a,6);if(t.parts){s=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])];for(r=0;r<s.length;r++){i=s[r];if(!(0<=i&&i<=255)){return null}}t.parts.push(s[0]<<8|s[1]);t.parts.push(s[2]<<8|s[3]);return{parts:t.parts,zoneId:t.zoneId}}}return null};d.IPv6.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>128){throw new Error("ipaddr: invalid IPv6 prefix length")}const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);while(r<n){t[r]=255;r++}if(n<16){t[n]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.fromByteArray=function(e){const t=e.length;if(t===4){return new d.IPv4(e)}else if(t===16){return new d.IPv6(e)}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")}};d.isValid=function(e){return d.IPv6.isValid(e)||d.IPv4.isValid(e)};d.parse=function(e){if(d.IPv6.isValid(e)){return d.IPv6.parse(e)}else if(d.IPv4.isValid(e)){return d.IPv4.parse(e)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};d.parseCIDR=function(e){try{return d.IPv6.parseCIDR(e)}catch(t){try{return d.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}};d.process=function(e){const t=this.parse(e);if(t.kind()==="ipv6"&&t.isIPv4MappedAddress()){return t.toIPv4Address()}else{return t}};d.subnetMatch=function(e,t,r){let n,i,s,a;if(r===undefined||r===null){r="unicast"}for(i in t){if(Object.prototype.hasOwnProperty.call(t,i)){s=t[i];if(s[0]&&!(s[0]instanceof Array)){s=[s]}for(n=0;n<s.length;n++){a=s[n];if(e.kind()===a[0].kind()&&e.match.apply(e,a)){return i}}}}return r};if(e.exports){e.exports=d}else{t.ipaddr=d}})(commonjsGlobal)}));class IpConverter{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0){return"::/0"}if(e.length!==16){return e}const t=parseInt(e.slice(8),16).toString(2).split("").reduce(((e,t)=>e+ +t),0);let r=e.slice(0,8).replace(/(.{2})/g,(e=>`${parseInt(e,16)}.`));r=r.slice(0,-1);return`${r}/${t}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const t=new Uint8Array(e);const r=ipaddr.fromByteArray(Array.from(t));return r.toString()}return this.decodeIP(build$1.Convert.ToHex(e))}static fromString(e){const t=ipaddr.parse(e);return new Uint8Array(t.toByteArray()).buffer}}var RelativeDistinguishedName_1,RDNSequence_1,Name_1;let DirectoryString=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.TeletexString})],DirectoryString.prototype,"teletexString",void 0);__decorate([AsnProp({type:AsnPropTypes.PrintableString})],DirectoryString.prototype,"printableString",void 0);__decorate([AsnProp({type:AsnPropTypes.UniversalString})],DirectoryString.prototype,"universalString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DirectoryString.prototype,"utf8String",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DirectoryString.prototype,"bmpString",void 0);DirectoryString=__decorate([AsnType({type:AsnTypeTypes.Choice})],DirectoryString);let AttributeValue=class e extends DirectoryString{constructor(e={}){super(e);Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?build$1.Convert.ToHex(this.anyValue):super.toString())}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],AttributeValue.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],AttributeValue.prototype,"anyValue",void 0);AttributeValue=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttributeValue);class AttributeTypeAndValue{constructor(e={}){this.type="";this.value=new AttributeValue;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AttributeTypeAndValue.prototype,"type",void 0);__decorate([AsnProp({type:AttributeValue})],AttributeTypeAndValue.prototype,"value",void 0);let RelativeDistinguishedName=RelativeDistinguishedName_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RelativeDistinguishedName_1.prototype)}};RelativeDistinguishedName=RelativeDistinguishedName_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:AttributeTypeAndValue})],RelativeDistinguishedName);let RDNSequence=RDNSequence_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RDNSequence_1.prototype)}};RDNSequence=RDNSequence_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RelativeDistinguishedName})],RDNSequence);let Name$1=Name_1=class e extends RDNSequence{constructor(e){super(e);Object.setPrototypeOf(this,Name_1.prototype)}};Name$1=Name_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Name$1);const AsnIpConverter={fromASN:e=>IpConverter.toString(AsnOctetStringConverter.fromASN(e)),toASN:e=>AsnOctetStringConverter.toASN(IpConverter.fromString(e))};class OtherName{constructor(e={}){this.typeId="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherName.prototype,"typeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],OtherName.prototype,"value",void 0);class EDIPartyName{constructor(e={}){this.partyName=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:DirectoryString,optional:true,context:0,implicit:true})],EDIPartyName.prototype,"nameAssigner",void 0);__decorate([AsnProp({type:DirectoryString,context:1,implicit:true})],EDIPartyName.prototype,"partyName",void 0);let GeneralName$1=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OtherName,context:0,implicit:true})],GeneralName$1.prototype,"otherName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:1,implicit:true})],GeneralName$1.prototype,"rfc822Name",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:2,implicit:true})],GeneralName$1.prototype,"dNSName",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:3,implicit:true})],GeneralName$1.prototype,"x400Address",void 0);__decorate([AsnProp({type:Name$1,context:4,implicit:false})],GeneralName$1.prototype,"directoryName",void 0);__decorate([AsnProp({type:EDIPartyName,context:5})],GeneralName$1.prototype,"ediPartyName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:6,implicit:true})],GeneralName$1.prototype,"uniformResourceIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString,context:7,implicit:true,converter:AsnIpConverter})],GeneralName$1.prototype,"iPAddress",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,context:8,implicit:true})],GeneralName$1.prototype,"registeredID",void 0);GeneralName$1=__decorate([AsnType({type:AsnTypeTypes.Choice})],GeneralName$1);const id_pkix="1.3.6.1.5.5.7";const id_kp=`${id_pkix}.3`;const id_ce="2.5.29";var AuthorityInfoAccessSyntax_1;class AccessDescription{constructor(e={}){this.accessMethod="";this.accessLocation=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AccessDescription.prototype,"accessMethod",void 0);__decorate([AsnProp({type:GeneralName$1})],AccessDescription.prototype,"accessLocation",void 0);let AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthorityInfoAccessSyntax_1.prototype)}};AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],AuthorityInfoAccessSyntax);const id_ce_authorityKeyIdentifier=`${id_ce}.35`;class KeyIdentifier extends OctetString{}class AuthorityKeyIdentifier{constructor(e={}){if(e){Object.assign(this,e)}}}__decorate([AsnProp({type:KeyIdentifier,context:0,optional:true,implicit:true})],AuthorityKeyIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,optional:true,implicit:true,repeated:"sequence"})],AuthorityKeyIdentifier.prototype,"authorityCertIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,optional:true,implicit:true,converter:AsnIntegerArrayBufferConverter$1})],AuthorityKeyIdentifier.prototype,"authorityCertSerialNumber",void 0);const id_ce_basicConstraints=`${id_ce}.19`;class BasicConstraints{constructor(e={}){this.cA=false;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:false})],BasicConstraints.prototype,"cA",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],BasicConstraints.prototype,"pathLenConstraint",void 0);var GeneralNames_1;let GeneralNames$1=GeneralNames_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralNames_1.prototype)}};GeneralNames$1=GeneralNames_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralName$1})],GeneralNames$1);var CertificateIssuer_1;let CertificateIssuer=CertificateIssuer_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,CertificateIssuer_1.prototype)}};CertificateIssuer=CertificateIssuer_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CertificateIssuer);var CertificatePolicies_1;const id_ce_certificatePolicies=`${id_ce}.32`;let DisplayText=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],DisplayText.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.VisibleString})],DisplayText.prototype,"visibleString",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DisplayText.prototype,"bmpString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DisplayText.prototype,"utf8String",void 0);DisplayText=__decorate([AsnType({type:AsnTypeTypes.Choice})],DisplayText);class NoticeReference{constructor(e={}){this.organization=new DisplayText;this.noticeNumbers=[];Object.assign(this,e)}}__decorate([AsnProp({type:DisplayText})],NoticeReference.prototype,"organization",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,repeated:"sequence"})],NoticeReference.prototype,"noticeNumbers",void 0);class UserNotice{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:NoticeReference,optional:true})],UserNotice.prototype,"noticeRef",void 0);__decorate([AsnProp({type:DisplayText,optional:true})],UserNotice.prototype,"explicitText",void 0);let Qualifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],Qualifier.prototype,"cPSuri",void 0);__decorate([AsnProp({type:UserNotice})],Qualifier.prototype,"userNotice",void 0);Qualifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],Qualifier);class PolicyQualifierInfo{constructor(e={}){this.policyQualifierId="";this.qualifier=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyQualifierInfo.prototype,"policyQualifierId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],PolicyQualifierInfo.prototype,"qualifier",void 0);class PolicyInformation{constructor(e={}){this.policyIdentifier="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyInformation.prototype,"policyIdentifier",void 0);__decorate([AsnProp({type:PolicyQualifierInfo,repeated:"sequence",optional:true})],PolicyInformation.prototype,"policyQualifiers",void 0);let CertificatePolicies=CertificatePolicies_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificatePolicies_1.prototype)}};CertificatePolicies=CertificatePolicies_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyInformation})],CertificatePolicies);let CRLNumber=class e{constructor(e=0){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer})],CRLNumber.prototype,"value",void 0);CRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLNumber);let BaseCRLNumber=class e extends CRLNumber{};BaseCRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],BaseCRLNumber);var CRLDistributionPoints_1;var ReasonFlags;(function(e){e[e["unused"]=1]="unused";e[e["keyCompromise"]=2]="keyCompromise";e[e["cACompromise"]=4]="cACompromise";e[e["affiliationChanged"]=8]="affiliationChanged";e[e["superseded"]=16]="superseded";e[e["cessationOfOperation"]=32]="cessationOfOperation";e[e["certificateHold"]=64]="certificateHold";e[e["privilegeWithdrawn"]=128]="privilegeWithdrawn";e[e["aACompromise"]=256]="aACompromise"})(ReasonFlags||(ReasonFlags={}));class Reason extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&ReasonFlags.aACompromise){e.push("aACompromise")}if(t&ReasonFlags.affiliationChanged){e.push("affiliationChanged")}if(t&ReasonFlags.cACompromise){e.push("cACompromise")}if(t&ReasonFlags.certificateHold){e.push("certificateHold")}if(t&ReasonFlags.cessationOfOperation){e.push("cessationOfOperation")}if(t&ReasonFlags.keyCompromise){e.push("keyCompromise")}if(t&ReasonFlags.privilegeWithdrawn){e.push("privilegeWithdrawn")}if(t&ReasonFlags.superseded){e.push("superseded")}if(t&ReasonFlags.unused){e.push("unused")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}let DistributionPointName=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,repeated:"sequence",implicit:true})],DistributionPointName.prototype,"fullName",void 0);__decorate([AsnProp({type:RelativeDistinguishedName,context:1,implicit:true})],DistributionPointName.prototype,"nameRelativeToCRLIssuer",void 0);DistributionPointName=__decorate([AsnType({type:AsnTypeTypes.Choice})],DistributionPointName);class DistributionPoint{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],DistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:Reason,context:1,optional:true,implicit:true})],DistributionPoint.prototype,"reasons",void 0);__decorate([AsnProp({type:GeneralName$1,context:2,optional:true,repeated:"sequence",implicit:true})],DistributionPoint.prototype,"cRLIssuer",void 0);let CRLDistributionPoints=CRLDistributionPoints_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CRLDistributionPoints_1.prototype)}};CRLDistributionPoints=CRLDistributionPoints_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],CRLDistributionPoints);var FreshestCRL_1;let FreshestCRL=FreshestCRL_1=class e extends CRLDistributionPoints{constructor(e){super(e);Object.setPrototypeOf(this,FreshestCRL_1.prototype)}};FreshestCRL=FreshestCRL_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],FreshestCRL);class IssuingDistributionPoint{constructor(e={}){this.onlyContainsUserCerts=IssuingDistributionPoint.ONLY;this.onlyContainsCACerts=IssuingDistributionPoint.ONLY;this.indirectCRL=IssuingDistributionPoint.ONLY;this.onlyContainsAttributeCerts=IssuingDistributionPoint.ONLY;Object.assign(this,e)}}IssuingDistributionPoint.ONLY=false;__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],IssuingDistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:1,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsUserCerts",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:2,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsCACerts",void 0);__decorate([AsnProp({type:Reason,context:3,optional:true,implicit:true})],IssuingDistributionPoint.prototype,"onlySomeReasons",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:4,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"indirectCRL",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:5,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsAttributeCerts",void 0);var CRLReasons;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(CRLReasons||(CRLReasons={}));let CRLReason=class e{constructor(e=CRLReasons.unspecified){this.reason=CRLReasons.unspecified;this.reason=e}toJSON(){return CRLReasons[this.reason]}toString(){return this.toJSON()}};__decorate([AsnProp({type:AsnPropTypes.Enumerated})],CRLReason.prototype,"reason",void 0);CRLReason=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLReason);var ExtendedKeyUsage_1;const id_ce_extKeyUsage=`${id_ce}.37`;let ExtendedKeyUsage$1=ExtendedKeyUsage_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedKeyUsage_1.prototype)}};ExtendedKeyUsage$1=ExtendedKeyUsage_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],ExtendedKeyUsage$1);const id_kp_serverAuth=`${id_kp}.1`;const id_kp_clientAuth=`${id_kp}.2`;const id_kp_codeSigning=`${id_kp}.3`;const id_kp_emailProtection=`${id_kp}.4`;const id_kp_timeStamping=`${id_kp}.8`;const id_kp_OCSPSigning=`${id_kp}.9`;let InhibitAnyPolicy=class e{constructor(e=new ArrayBuffer(0)){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],InhibitAnyPolicy.prototype,"value",void 0);InhibitAnyPolicy=__decorate([AsnType({type:AsnTypeTypes.Choice})],InhibitAnyPolicy);let InvalidityDate=class e{constructor(e){this.value=new Date;if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],InvalidityDate.prototype,"value",void 0);InvalidityDate=__decorate([AsnType({type:AsnTypeTypes.Choice})],InvalidityDate);var IssueAlternativeName_1;let IssueAlternativeName=IssueAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,IssueAlternativeName_1.prototype)}};IssueAlternativeName=IssueAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],IssueAlternativeName);const id_ce_keyUsage=`${id_ce}.15`;var KeyUsageFlags$1;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags$1||(KeyUsageFlags$1={}));class KeyUsage extends BitString{toJSON(){const e=this.toNumber();const t=[];if(e&KeyUsageFlags$1.cRLSign){t.push("crlSign")}if(e&KeyUsageFlags$1.dataEncipherment){t.push("dataEncipherment")}if(e&KeyUsageFlags$1.decipherOnly){t.push("decipherOnly")}if(e&KeyUsageFlags$1.digitalSignature){t.push("digitalSignature")}if(e&KeyUsageFlags$1.encipherOnly){t.push("encipherOnly")}if(e&KeyUsageFlags$1.keyAgreement){t.push("keyAgreement")}if(e&KeyUsageFlags$1.keyCertSign){t.push("keyCertSign")}if(e&KeyUsageFlags$1.keyEncipherment){t.push("keyEncipherment")}if(e&KeyUsageFlags$1.nonRepudiation){t.push("nonRepudiation")}return t}toString(){return`[${this.toJSON().join(", ")}]`}}var GeneralSubtrees_1;class GeneralSubtree{constructor(e={}){this.base=new GeneralName$1;this.minimum=0;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],GeneralSubtree.prototype,"base",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:0,implicit:true})],GeneralSubtree.prototype,"minimum",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,optional:true,implicit:true})],GeneralSubtree.prototype,"maximum",void 0);let GeneralSubtrees=GeneralSubtrees_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralSubtrees_1.prototype)}};GeneralSubtrees=GeneralSubtrees_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralSubtree})],GeneralSubtrees);class NameConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralSubtrees,context:0,optional:true,implicit:true})],NameConstraints.prototype,"permittedSubtrees",void 0);__decorate([AsnProp({type:GeneralSubtrees,context:1,optional:true,implicit:true})],NameConstraints.prototype,"excludedSubtrees",void 0);class PolicyConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"requireExplicitPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"inhibitPolicyMapping",void 0);var PolicyMappings_1;class PolicyMapping{constructor(e={}){this.issuerDomainPolicy="";this.subjectDomainPolicy="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"issuerDomainPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"subjectDomainPolicy",void 0);let PolicyMappings=PolicyMappings_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PolicyMappings_1.prototype)}};PolicyMappings=PolicyMappings_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyMapping})],PolicyMappings);var SubjectAlternativeName_1;const id_ce_subjectAltName=`${id_ce}.17`;let SubjectAlternativeName=SubjectAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,SubjectAlternativeName_1.prototype)}};SubjectAlternativeName=SubjectAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SubjectAlternativeName);class Attribute$2{constructor(e={}){this.type="";this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$2.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$2.prototype,"values",void 0);var SubjectDirectoryAttributes_1;let SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectDirectoryAttributes_1.prototype)}};SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],SubjectDirectoryAttributes);const id_ce_subjectKeyIdentifier=`${id_ce}.14`;class SubjectKeyIdentifier extends KeyIdentifier{}class PrivateKeyUsagePeriod{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:0,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notBefore",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:1,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notAfter",void 0);var EntrustInfoFlags;(function(e){e[e["keyUpdateAllowed"]=1]="keyUpdateAllowed";e[e["newExtensions"]=2]="newExtensions";e[e["pKIXCertificate"]=4]="pKIXCertificate"})(EntrustInfoFlags||(EntrustInfoFlags={}));class EntrustInfo extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&EntrustInfoFlags.pKIXCertificate){e.push("pKIXCertificate")}if(t&EntrustInfoFlags.newExtensions){e.push("newExtensions")}if(t&EntrustInfoFlags.keyUpdateAllowed){e.push("keyUpdateAllowed")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}class EntrustVersionInfo{constructor(e={}){this.entrustVers="";this.entrustInfoFlags=new EntrustInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralString})],EntrustVersionInfo.prototype,"entrustVers",void 0);__decorate([AsnProp({type:EntrustInfo})],EntrustVersionInfo.prototype,"entrustInfoFlags",void 0);var SubjectInfoAccessSyntax_1;let SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectInfoAccessSyntax_1.prototype)}};SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],SubjectInfoAccessSyntax);class AlgorithmIdentifier$1{constructor(e={}){this.algorithm="";Object.assign(this,e)}isEqual(e){return e instanceof AlgorithmIdentifier$1&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&build$1.isEqual(e.parameters,this.parameters)||e.parameters===this.parameters)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier$1.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier$1.prototype,"parameters",void 0);class SubjectPublicKeyInfo{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.subjectPublicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],SubjectPublicKeyInfo.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],SubjectPublicKeyInfo.prototype,"subjectPublicKey",void 0);let Time=class e{constructor(e){if(e){if(typeof e==="string"||typeof e==="number"||e instanceof Date){const t=new Date(e);if(t.getUTCFullYear()>2049){this.generalTime=t}else{this.utcTime=t}}else{Object.assign(this,e)}}}getTime(){const e=this.utcTime||this.generalTime;if(!e){throw new Error("Cannot get time from CHOICE object")}return e}};__decorate([AsnProp({type:AsnPropTypes.UTCTime})],Time.prototype,"utcTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],Time.prototype,"generalTime",void 0);Time=__decorate([AsnType({type:AsnTypeTypes.Choice})],Time);class Validity{constructor(e){this.notBefore=new Time(new Date);this.notAfter=new Time(new Date);if(e){this.notBefore=new Time(e.notBefore);this.notAfter=new Time(e.notAfter)}}}__decorate([AsnProp({type:Time})],Validity.prototype,"notBefore",void 0);__decorate([AsnProp({type:Time})],Validity.prototype,"notAfter",void 0);var Extensions_1;class Extension$1{constructor(e={}){this.extnID="";this.critical=Extension$1.CRITICAL;this.extnValue=new OctetString;Object.assign(this,e)}}Extension$1.CRITICAL=false;__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Extension$1.prototype,"extnID",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:Extension$1.CRITICAL})],Extension$1.prototype,"critical",void 0);__decorate([AsnProp({type:OctetString})],Extension$1.prototype,"extnValue",void 0);let Extensions=Extensions_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Extensions_1.prototype)}};Extensions=Extensions_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Extension$1})],Extensions);var Version$1;(function(e){e[e["v1"]=0]="v1";e[e["v2"]=1]="v2";e[e["v3"]=2]="v3"})(Version$1||(Version$1={}));class TBSCertificate{constructor(e={}){this.version=Version$1.v1;this.serialNumber=new ArrayBuffer(0);this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.validity=new Validity;this.subject=new Name$1;this.subjectPublicKeyInfo=new SubjectPublicKeyInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:Version$1.v1})],TBSCertificate.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],TBSCertificate.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertificate.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"issuer",void 0);__decorate([AsnProp({type:Validity})],TBSCertificate.prototype,"validity",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],TBSCertificate.prototype,"subjectPublicKeyInfo",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,implicit:true,optional:true})],TBSCertificate.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:2,implicit:true,optional:true})],TBSCertificate.prototype,"subjectUniqueID",void 0);__decorate([AsnProp({type:Extensions,context:3,optional:true})],TBSCertificate.prototype,"extensions",void 0);class Certificate{constructor(e={}){this.tbsCertificate=new TBSCertificate;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertificate})],Certificate.prototype,"tbsCertificate",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],Certificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],Certificate.prototype,"signatureValue",void 0);class RevokedCertificate{constructor(e={}){this.userCertificate=new ArrayBuffer(0);this.revocationDate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RevokedCertificate.prototype,"userCertificate",void 0);__decorate([AsnProp({type:Time})],RevokedCertificate.prototype,"revocationDate",void 0);__decorate([AsnProp({type:Extension$1,optional:true,repeated:"sequence"})],RevokedCertificate.prototype,"crlEntryExtensions",void 0);class TBSCertList{constructor(e={}){this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.thisUpdate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],TBSCertList.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertList.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertList.prototype,"issuer",void 0);__decorate([AsnProp({type:Time})],TBSCertList.prototype,"thisUpdate",void 0);__decorate([AsnProp({type:Time,optional:true})],TBSCertList.prototype,"nextUpdate",void 0);__decorate([AsnProp({type:RevokedCertificate,repeated:"sequence",optional:true})],TBSCertList.prototype,"revokedCertificates",void 0);__decorate([AsnProp({type:Extension$1,optional:true,context:0,repeated:"sequence"})],TBSCertList.prototype,"crlExtensions",void 0);class CertificateList{constructor(e={}){this.tbsCertList=new TBSCertList;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertList})],CertificateList.prototype,"tbsCertList",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificateList.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificateList.prototype,"signature",void 0);class Attribute$1{constructor(e={}){this.attrType="";this.attrValues=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$1.prototype,"attrType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$1.prototype,"attrValues",void 0);class ACClearAttrs{constructor(e={}){this.acIssuer=new GeneralName$1;this.acSerial=0;this.attrs=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],ACClearAttrs.prototype,"acIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer})],ACClearAttrs.prototype,"acSerial",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],ACClearAttrs.prototype,"attrs",void 0);var AttrSpec_1;let AttrSpec=AttrSpec_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AttrSpec_1.prototype)}};AttrSpec=AttrSpec_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],AttrSpec);class AAControls{constructor(e={}){this.permitUnSpecified=true;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],AAControls.prototype,"pathLenConstraint",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:0,optional:true})],AAControls.prototype,"permittedAttrs",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:1,optional:true})],AAControls.prototype,"excludedAttrs",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:true})],AAControls.prototype,"permitUnSpecified",void 0);class IssuerSerial{constructor(e={}){this.issuer=new GeneralNames$1;this.serial=new ArrayBuffer(0);this.issuerUID=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1})],IssuerSerial.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerSerial.prototype,"serial",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],IssuerSerial.prototype,"issuerUID",void 0);var DigestedObjectType;(function(e){e[e["publicKey"]=0]="publicKey";e[e["publicKeyCert"]=1]="publicKeyCert";e[e["otherObjectTypes"]=2]="otherObjectTypes"})(DigestedObjectType||(DigestedObjectType={}));class ObjectDigestInfo{constructor(e={}){this.digestedObjectType=DigestedObjectType.publicKey;this.digestAlgorithm=new AlgorithmIdentifier$1;this.objectDigest=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Enumerated})],ObjectDigestInfo.prototype,"digestedObjectType",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,optional:true})],ObjectDigestInfo.prototype,"otherObjectTypeID",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],ObjectDigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],ObjectDigestInfo.prototype,"objectDigest",void 0);class V2Form{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,optional:true})],V2Form.prototype,"issuerName",void 0);__decorate([AsnProp({type:IssuerSerial,context:0,implicit:true,optional:true})],V2Form.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:ObjectDigestInfo,context:1,implicit:true,optional:true})],V2Form.prototype,"objectDigestInfo",void 0);let AttCertIssuer=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,repeated:"sequence"})],AttCertIssuer.prototype,"v1Form",void 0);__decorate([AsnProp({type:V2Form,context:0,implicit:true})],AttCertIssuer.prototype,"v2Form",void 0);AttCertIssuer=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttCertIssuer);class AttCertValidityPeriod{constructor(e={}){this.notBeforeTime=new Date;this.notAfterTime=new Date;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notBeforeTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notAfterTime",void 0);class Holder{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial,implicit:true,context:0,optional:true})],Holder.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:1,optional:true})],Holder.prototype,"entityName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,implicit:true,context:2,optional:true})],Holder.prototype,"objectDigestInfo",void 0);var AttCertVersion;(function(e){e[e["v2"]=1]="v2"})(AttCertVersion||(AttCertVersion={}));class AttributeCertificateInfo{constructor(e={}){this.version=AttCertVersion.v2;this.holder=new Holder;this.issuer=new AttCertIssuer;this.signature=new AlgorithmIdentifier$1;this.serialNumber=new ArrayBuffer(0);this.attrCertValidityPeriod=new AttCertValidityPeriod;this.attributes=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],AttributeCertificateInfo.prototype,"version",void 0);__decorate([AsnProp({type:Holder})],AttributeCertificateInfo.prototype,"holder",void 0);__decorate([AsnProp({type:AttCertIssuer})],AttributeCertificateInfo.prototype,"issuer",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificateInfo.prototype,"signature",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],AttributeCertificateInfo.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AttCertValidityPeriod})],AttributeCertificateInfo.prototype,"attrCertValidityPeriod",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],AttributeCertificateInfo.prototype,"attributes",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],AttributeCertificateInfo.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:Extensions,optional:true})],AttributeCertificateInfo.prototype,"extensions",void 0);class AttributeCertificate{constructor(e={}){this.acinfo=new AttributeCertificateInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AttributeCertificateInfo})],AttributeCertificate.prototype,"acinfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],AttributeCertificate.prototype,"signatureValue",void 0);var ClassListFlags;(function(e){e[e["unmarked"]=1]="unmarked";e[e["unclassified"]=2]="unclassified";e[e["restricted"]=4]="restricted";e[e["confidential"]=8]="confidential";e[e["secret"]=16]="secret";e[e["topSecret"]=32]="topSecret"})(ClassListFlags||(ClassListFlags={}));class ClassList extends BitString{}class SecurityCategory{constructor(e={}){this.type="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,implicit:true,context:0})],SecurityCategory.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,implicit:true,context:1})],SecurityCategory.prototype,"value",void 0);class Clearance{constructor(e={}){this.policyId="";this.classList=new ClassList(ClassListFlags.unclassified);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Clearance.prototype,"policyId",void 0);__decorate([AsnProp({type:ClassList,defaultValue:new ClassList(ClassListFlags.unclassified)})],Clearance.prototype,"classList",void 0);__decorate([AsnProp({type:SecurityCategory,repeated:"set"})],Clearance.prototype,"securityCategories",void 0);class IetfAttrSyntaxValueChoices{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],IetfAttrSyntaxValueChoices.prototype,"cotets",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],IetfAttrSyntaxValueChoices.prototype,"oid",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],IetfAttrSyntaxValueChoices.prototype,"string",void 0);class IetfAttrSyntax{constructor(e={}){this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],IetfAttrSyntax.prototype,"policyAuthority",void 0);__decorate([AsnProp({type:IetfAttrSyntaxValueChoices,repeated:"sequence"})],IetfAttrSyntax.prototype,"values",void 0);var Targets_1;class TargetCert{constructor(e={}){this.targetCertificate=new IssuerSerial;Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial})],TargetCert.prototype,"targetCertificate",void 0);__decorate([AsnProp({type:GeneralName$1,optional:true})],TargetCert.prototype,"targetName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,optional:true})],TargetCert.prototype,"certDigestInfo",void 0);let Target=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,implicit:true})],Target.prototype,"targetName",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,implicit:true})],Target.prototype,"targetGroup",void 0);__decorate([AsnProp({type:TargetCert,context:2,implicit:true})],Target.prototype,"targetCert",void 0);Target=__decorate([AsnType({type:AsnTypeTypes.Choice})],Target);let Targets=Targets_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Targets_1.prototype)}};Targets=Targets_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Target})],Targets);var ProxyInfo_1;let ProxyInfo=ProxyInfo_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ProxyInfo_1.prototype)}};ProxyInfo=ProxyInfo_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Targets})],ProxyInfo);class RoleSyntax{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],RoleSyntax.prototype,"roleAuthority",void 0);__decorate([AsnProp({type:GeneralName$1,implicit:true,context:1})],RoleSyntax.prototype,"roleName",void 0);class SvceAuthInfo{constructor(e={}){this.service=new GeneralName$1;this.ident=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"service",void 0);__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"ident",void 0);__decorate([AsnProp({type:OctetString,optional:true})],SvceAuthInfo.prototype,"authInfo",void 0);var CertificateSet_1;class OtherCertificateFormat{constructor(e={}){this.otherCertFormat="";this.otherCert=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherCertificateFormat.prototype,"otherCertFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherCertificateFormat.prototype,"otherCert",void 0);let CertificateChoices=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:Certificate})],CertificateChoices.prototype,"certificate",void 0);__decorate([AsnProp({type:AttributeCertificate,context:2,implicit:true})],CertificateChoices.prototype,"v2AttrCert",void 0);__decorate([AsnProp({type:OtherCertificateFormat,context:3,implicit:true})],CertificateChoices.prototype,"other",void 0);CertificateChoices=__decorate([AsnType({type:AsnTypeTypes.Choice})],CertificateChoices);let CertificateSet=CertificateSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificateSet_1.prototype)}};CertificateSet=CertificateSet_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:CertificateChoices})],CertificateSet);class ContentInfo{constructor(e={}){this.contentType="";this.content=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],ContentInfo.prototype,"content",void 0);let EncapsulatedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString})],EncapsulatedContent.prototype,"single",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],EncapsulatedContent.prototype,"any",void 0);EncapsulatedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncapsulatedContent);class EncapsulatedContentInfo{constructor(e={}){this.eContentType="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncapsulatedContentInfo.prototype,"eContentType",void 0);__decorate([AsnProp({type:EncapsulatedContent,context:0,optional:true})],EncapsulatedContentInfo.prototype,"eContent",void 0);var CMSVersion;(function(e){e[e["v0"]=0]="v0";e[e["v1"]=1]="v1";e[e["v2"]=2]="v2";e[e["v3"]=3]="v3";e[e["v4"]=4]="v4";e[e["v5"]=5]="v5"})(CMSVersion||(CMSVersion={}));let DigestAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};DigestAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],DigestAlgorithmIdentifier);let SignatureAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};SignatureAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SignatureAlgorithmIdentifier);let KeyEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyEncryptionAlgorithmIdentifier);let ContentEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};ContentEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ContentEncryptionAlgorithmIdentifier);let MessageAuthenticationCodeAlgorithm=class e extends AlgorithmIdentifier$1{};MessageAuthenticationCodeAlgorithm=__decorate([AsnType({type:AsnTypeTypes.Sequence})],MessageAuthenticationCodeAlgorithm);let KeyDerivationAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyDerivationAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyDerivationAlgorithmIdentifier);let EncryptedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString,context:0,implicit:true,optional:true})],EncryptedContent.prototype,"value",void 0);__decorate([AsnProp({type:OctetString,converter:AsnConstructedOctetStringConverter,context:0,implicit:true,optional:true,repeated:"sequence"})],EncryptedContent.prototype,"constructedValue",void 0);EncryptedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncryptedContent);class EncryptedContentInfo{constructor(e={}){this.contentType="";this.contentEncryptionAlgorithm=new ContentEncryptionAlgorithmIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncryptedContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:ContentEncryptionAlgorithmIdentifier})],EncryptedContentInfo.prototype,"contentEncryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedContent,optional:true})],EncryptedContentInfo.prototype,"encryptedContent",void 0);class IssuerAndSerialNumber{constructor(e={}){this.issuer=new Name$1;this.serialNumber=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:Name$1})],IssuerAndSerialNumber.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerAndSerialNumber.prototype,"serialNumber",void 0);class OtherKeyAttribute{constructor(e={}){this.keyAttrId="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherKeyAttribute.prototype,"keyAttrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],OtherKeyAttribute.prototype,"keyAttr",void 0);var RecipientEncryptedKeys_1;class RecipientKeyIdentifier{constructor(e={}){this.subjectKeyIdentifier=new SubjectKeyIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:SubjectKeyIdentifier})],RecipientKeyIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],RecipientKeyIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],RecipientKeyIdentifier.prototype,"other",void 0);let KeyAgreeRecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:RecipientKeyIdentifier,context:0,implicit:true,optional:true})],KeyAgreeRecipientIdentifier.prototype,"rKeyId",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],KeyAgreeRecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);KeyAgreeRecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],KeyAgreeRecipientIdentifier);class RecipientEncryptedKey{constructor(e={}){this.rid=new KeyAgreeRecipientIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:KeyAgreeRecipientIdentifier})],RecipientEncryptedKey.prototype,"rid",void 0);__decorate([AsnProp({type:OctetString})],RecipientEncryptedKey.prototype,"encryptedKey",void 0);let RecipientEncryptedKeys=RecipientEncryptedKeys_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientEncryptedKeys_1.prototype)}};RecipientEncryptedKeys=RecipientEncryptedKeys_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RecipientEncryptedKey})],RecipientEncryptedKeys);class OriginatorPublicKey{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.publicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],OriginatorPublicKey.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],OriginatorPublicKey.prototype,"publicKey",void 0);let OriginatorIdentifierOrKey=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:OriginatorPublicKey,context:1,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"originatorKey",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],OriginatorIdentifierOrKey.prototype,"issuerAndSerialNumber",void 0);OriginatorIdentifierOrKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],OriginatorIdentifierOrKey);class KeyAgreeRecipientInfo{constructor(e={}){this.version=CMSVersion.v3;this.originator=new OriginatorIdentifierOrKey;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.recipientEncryptedKeys=new RecipientEncryptedKeys;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyAgreeRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorIdentifierOrKey,context:0})],KeyAgreeRecipientInfo.prototype,"originator",void 0);__decorate([AsnProp({type:OctetString,context:1,optional:true})],KeyAgreeRecipientInfo.prototype,"ukm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyAgreeRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:RecipientEncryptedKeys})],KeyAgreeRecipientInfo.prototype,"recipientEncryptedKeys",void 0);let RecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],RecipientIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],RecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);RecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientIdentifier);class KeyTransRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.rid=new RecipientIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyTransRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:RecipientIdentifier})],KeyTransRecipientInfo.prototype,"rid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyTransRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KeyTransRecipientInfo.prototype,"encryptedKey",void 0);class KEKIdentifier{constructor(e={}){this.keyIdentifier=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],KEKIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],KEKIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],KEKIdentifier.prototype,"other",void 0);class KEKRecipientInfo{constructor(e={}){this.version=CMSVersion.v4;this.kekid=new KEKIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KEKRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KEKIdentifier})],KEKRecipientInfo.prototype,"kekid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KEKRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KEKRecipientInfo.prototype,"encryptedKey",void 0);class PasswordRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PasswordRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KeyDerivationAlgorithmIdentifier,context:0,optional:true})],PasswordRecipientInfo.prototype,"keyDerivationAlgorithm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],PasswordRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],PasswordRecipientInfo.prototype,"encryptedKey",void 0);class OtherRecipientInfo{constructor(e={}){this.oriType="";this.oriValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRecipientInfo.prototype,"oriType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRecipientInfo.prototype,"oriValue",void 0);let RecipientInfo=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:KeyTransRecipientInfo,optional:true})],RecipientInfo.prototype,"ktri",void 0);__decorate([AsnProp({type:KeyAgreeRecipientInfo,context:1,implicit:true,optional:true})],RecipientInfo.prototype,"kari",void 0);__decorate([AsnProp({type:KEKRecipientInfo,context:2,implicit:true,optional:true})],RecipientInfo.prototype,"kekri",void 0);__decorate([AsnProp({type:PasswordRecipientInfo,context:3,implicit:true,optional:true})],RecipientInfo.prototype,"pwri",void 0);__decorate([AsnProp({type:OtherRecipientInfo,context:4,implicit:true,optional:true})],RecipientInfo.prototype,"ori",void 0);RecipientInfo=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientInfo);var RecipientInfos_1;let RecipientInfos=RecipientInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientInfos_1.prototype)}};RecipientInfos=RecipientInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RecipientInfo})],RecipientInfos);var RevocationInfoChoices_1;class OtherRevocationInfoFormat{constructor(e={}){this.otherRevInfoFormat="";this.otherRevInfo=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRevocationInfoFormat.prototype,"otherRevInfoFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRevocationInfoFormat.prototype,"otherRevInfo",void 0);let RevocationInfoChoice=class e{constructor(e={}){this.other=new OtherRevocationInfoFormat;Object.assign(this,e)}};__decorate([AsnProp({type:OtherRevocationInfoFormat,context:1,implicit:true})],RevocationInfoChoice.prototype,"other",void 0);RevocationInfoChoice=__decorate([AsnType({type:AsnTypeTypes.Choice})],RevocationInfoChoice);let RevocationInfoChoices=RevocationInfoChoices_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RevocationInfoChoices_1.prototype)}};RevocationInfoChoices=RevocationInfoChoices_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RevocationInfoChoice})],RevocationInfoChoices);class OriginatorInfo{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],OriginatorInfo.prototype,"certs",void 0);__decorate([AsnProp({type:RevocationInfoChoices,context:1,implicit:true,optional:true})],OriginatorInfo.prototype,"crls",void 0);var UnprotectedAttributes_1;let UnprotectedAttributes=UnprotectedAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,UnprotectedAttributes_1.prototype)}};UnprotectedAttributes=UnprotectedAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],UnprotectedAttributes);class EnvelopedData{constructor(e={}){this.version=CMSVersion.v0;this.recipientInfos=new RecipientInfos;this.encryptedContentInfo=new EncryptedContentInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],EnvelopedData.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorInfo,context:0,implicit:true,optional:true})],EnvelopedData.prototype,"originatorInfo",void 0);__decorate([AsnProp({type:RecipientInfos})],EnvelopedData.prototype,"recipientInfos",void 0);__decorate([AsnProp({type:EncryptedContentInfo})],EnvelopedData.prototype,"encryptedContentInfo",void 0);__decorate([AsnProp({type:UnprotectedAttributes,context:1,implicit:true,optional:true})],EnvelopedData.prototype,"unprotectedAttrs",void 0);const id_data="1.2.840.113549.1.7.1";const id_signedData="1.2.840.113549.1.7.2";let SignerIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],SignerIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],SignerIdentifier.prototype,"issuerAndSerialNumber",void 0);SignerIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],SignerIdentifier);var SignerInfos_1;class SignerInfo{constructor(e={}){this.version=CMSVersion.v0;this.sid=new SignerIdentifier;this.digestAlgorithm=new DigestAlgorithmIdentifier;this.signatureAlgorithm=new SignatureAlgorithmIdentifier;this.signature=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignerInfo.prototype,"version",void 0);__decorate([AsnProp({type:SignerIdentifier})],SignerInfo.prototype,"sid",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifier})],SignerInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:0,implicit:true,optional:true})],SignerInfo.prototype,"signedAttrs",void 0);__decorate([AsnProp({type:SignatureAlgorithmIdentifier})],SignerInfo.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],SignerInfo.prototype,"signature",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:1,implicit:true,optional:true})],SignerInfo.prototype,"unsignedAttrs",void 0);let SignerInfos=SignerInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SignerInfos_1.prototype)}};SignerInfos=SignerInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:SignerInfo})],SignerInfos);var DigestAlgorithmIdentifiers_1;let DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,DigestAlgorithmIdentifiers_1.prototype)}};DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:DigestAlgorithmIdentifier})],DigestAlgorithmIdentifiers);class SignedData{constructor(e={}){this.version=CMSVersion.v0;this.digestAlgorithms=new DigestAlgorithmIdentifiers;this.encapContentInfo=new EncapsulatedContentInfo;this.signerInfos=new SignerInfos;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignedData.prototype,"version",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifiers})],SignedData.prototype,"digestAlgorithms",void 0);__decorate([AsnProp({type:EncapsulatedContentInfo})],SignedData.prototype,"encapContentInfo",void 0);__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],SignedData.prototype,"certificates",void 0);__decorate([AsnProp({type:RevocationInfoChoice,context:1,implicit:true,optional:true})],SignedData.prototype,"crls",void 0);__decorate([AsnProp({type:SignerInfos})],SignedData.prototype,"signerInfos",void 0);const id_ecPublicKey="1.2.840.10045.2.1";const id_ecdsaWithSHA1="1.2.840.10045.4.1";const id_ecdsaWithSHA224="1.2.840.10045.4.3.1";const id_ecdsaWithSHA256="1.2.840.10045.4.3.2";const id_ecdsaWithSHA384="1.2.840.10045.4.3.3";const id_ecdsaWithSHA512="1.2.840.10045.4.3.4";const id_secp256r1="1.2.840.10045.3.1.7";const id_secp384r1="1.3.132.0.34";const id_secp521r1="1.3.132.0.35";function create$5(e){return new AlgorithmIdentifier$1({algorithm:e})}const ecdsaWithSHA1=create$5(id_ecdsaWithSHA1);create$5(id_ecdsaWithSHA224);const ecdsaWithSHA256=create$5(id_ecdsaWithSHA256);const ecdsaWithSHA384=create$5(id_ecdsaWithSHA384);const ecdsaWithSHA512=create$5(id_ecdsaWithSHA512);let ECParameters=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ECParameters.prototype,"namedCurve",void 0);ECParameters=__decorate([AsnType({type:AsnTypeTypes.Choice})],ECParameters);class ECPrivateKey{constructor(e={}){this.version=1;this.privateKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],ECPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:OctetString})],ECPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({type:ECParameters,context:0,optional:true})],ECPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,optional:true})],ECPrivateKey.prototype,"publicKey",void 0);class ECDSASigValue{constructor(e={}){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"s",void 0);const id_pkcs_1="1.2.840.113549.1.1";const id_rsaEncryption=`${id_pkcs_1}.1`;const id_RSAES_OAEP=`${id_pkcs_1}.7`;const id_pSpecified=`${id_pkcs_1}.9`;const id_RSASSA_PSS=`${id_pkcs_1}.10`;const id_md2WithRSAEncryption=`${id_pkcs_1}.2`;const id_md5WithRSAEncryption=`${id_pkcs_1}.4`;const id_sha1WithRSAEncryption=`${id_pkcs_1}.5`;const id_sha224WithRSAEncryption=`${id_pkcs_1}.14`;const id_sha256WithRSAEncryption=`${id_pkcs_1}.11`;const id_sha384WithRSAEncryption=`${id_pkcs_1}.12`;const id_sha512WithRSAEncryption=`${id_pkcs_1}.13`;const id_sha512_224WithRSAEncryption=`${id_pkcs_1}.15`;const id_sha512_256WithRSAEncryption=`${id_pkcs_1}.16`;const id_sha1="1.3.14.3.2.26";const id_sha224="2.16.840.1.101.3.4.2.4";const id_sha256="2.16.840.1.101.3.4.2.1";const id_sha384="2.16.840.1.101.3.4.2.2";const id_sha512="2.16.840.1.101.3.4.2.3";const id_sha512_224="2.16.840.1.101.3.4.2.5";const id_sha512_256="2.16.840.1.101.3.4.2.6";const id_md2="1.2.840.113549.2.2";const id_md5="1.2.840.113549.2.5";const id_mgf1=`${id_pkcs_1}.8`;function create$4(e){return new AlgorithmIdentifier$1({algorithm:e,parameters:null})}create$4(id_md2);create$4(id_md5);const sha1=create$4(id_sha1);create$4(id_sha224);create$4(id_sha256);create$4(id_sha384);create$4(id_sha512);create$4(id_sha512_224);create$4(id_sha512_256);const mgf1SHA1=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});const pSpecifiedEmpty=new AlgorithmIdentifier$1({algorithm:id_pSpecified,parameters:AsnConvert.serialize(AsnOctetStringConverter.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});create$4(id_rsaEncryption);create$4(id_md2WithRSAEncryption);create$4(id_md5WithRSAEncryption);create$4(id_sha1WithRSAEncryption);create$4(id_sha512_224WithRSAEncryption);create$4(id_sha512_256WithRSAEncryption);create$4(id_sha384WithRSAEncryption);create$4(id_sha512WithRSAEncryption);create$4(id_sha512_224WithRSAEncryption);create$4(id_sha512_256WithRSAEncryption);class RsaEsOaepParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.pSourceAlgorithm=new AlgorithmIdentifier$1(pSpecifiedEmpty);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaEsOaepParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaEsOaepParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:2,defaultValue:pSpecifiedEmpty})],RsaEsOaepParams.prototype,"pSourceAlgorithm",void 0);new AlgorithmIdentifier$1({algorithm:id_RSAES_OAEP,parameters:AsnConvert.serialize(new RsaEsOaepParams)});class RsaSaPssParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.saltLength=20;this.trailerField=1;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaSaPssParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaSaPssParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,defaultValue:20})],RsaSaPssParams.prototype,"saltLength",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:3,defaultValue:1})],RsaSaPssParams.prototype,"trailerField",void 0);new AlgorithmIdentifier$1({algorithm:id_RSASSA_PSS,parameters:AsnConvert.serialize(new RsaSaPssParams)});class DigestInfo{constructor(e={}){this.digestAlgorithm=new AlgorithmIdentifier$1;this.digest=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],DigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],DigestInfo.prototype,"digest",void 0);var OtherPrimeInfos_1;class OtherPrimeInfo{constructor(e={}){this.prime=new ArrayBuffer(0);this.exponent=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"prime",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"exponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"coefficient",void 0);let OtherPrimeInfos=OtherPrimeInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,OtherPrimeInfos_1.prototype)}};OtherPrimeInfos=OtherPrimeInfos_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:OtherPrimeInfo})],OtherPrimeInfos);class RSAPrivateKey{constructor(e={}){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],RSAPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:OtherPrimeInfos,optional:true})],RSAPrivateKey.prototype,"otherPrimeInfos",void 0);class RSAPublicKey{constructor(e={}){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"publicExponent",void 0);var Lifecycle;(function(e){e[e["Transient"]=0]="Transient";e[e["Singleton"]=1]="Singleton";e[e["ResolutionScoped"]=2]="ResolutionScoped";e[e["ContainerScoped"]=3]="ContainerScoped"})(Lifecycle||(Lifecycle={}));const Lifecycle$1=Lifecycle;const INJECTION_TOKEN_METADATA_KEY="injectionTokens";function getParamInfo(e){const t=Reflect.getMetadata("design:paramtypes",e)||[];const r=Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY,e)||{};Object.keys(r).forEach((e=>{t[+e]=r[e]}));return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(n.next(e))}catch(e){s(e)}}function o(e){try{f(n["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):i(e.value).then(a,o)}f((n=n.apply(e,t||[])).next())}))}function isClassProvider(e){return!!e.useClass}function isFactoryProvider(e){return!!e.useFactory}class DelayedConstructor{constructor(e){this.wrap=e;this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){const t={};let r=false;let n;const i=()=>{if(!r){n=e(this.wrap());r=true}return n};return new Proxy(t,this.createHandler(i))}createHandler(e){const t={};const r=r=>{t[r]=(...t)=>{t[0]=e();const n=Reflect[r];return n(...t)}};this.reflectMethods.forEach(r);return t}}function isNormalToken(e){return typeof e==="string"||typeof e==="symbol"}function isTokenDescriptor(e){return typeof e==="object"&&"token"in e&&"multiple"in e}function isTransformDescriptor(e){return typeof e==="object"&&"token"in e&&"transform"in e}function isConstructorToken(e){return typeof e==="function"||e instanceof DelayedConstructor}function isTokenProvider(e){return!!e.useToken}function isValueProvider(e){return e.useValue!=undefined}function isProvider(e){return isClassProvider(e)||isValueProvider(e)||isTokenProvider(e)||isFactoryProvider(e)}class RegistryBase{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){this.ensure(e);return this._registryMap.get(e)}get(e){this.ensure(e);const t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e);this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){this.ensure(e);return this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){if(!this._registryMap.has(e)){this._registryMap.set(e,[])}}}class Registry extends RegistryBase{}class ResolutionContext{constructor(){this.scopedResolutions=new Map}}function formatDependency(e,t){if(e===null){return`at position #${t}`}const r=e.split(",")[t].trim();return`"${r}" at position #${t}`}function composeErrorMessage(e,t,r="    "){return[e,...t.message.split("\n").map((e=>r+e))].join("\n")}function formatErrorCtor(e,t,r){const[,n=null]=e.toString().match(/constructor\(([\w, ]+)\)/)||[];const i=formatDependency(n,t);return composeErrorMessage(`Cannot inject the dependency ${i} of "${e.name}" constructor. Reason:`,r)}function isDisposable(e){if(typeof e.dispose!=="function")return false;const t=e.dispose;if(t.length>0){return false}return true}class PreResolutionInterceptors extends RegistryBase{}class PostResolutionInterceptors extends RegistryBase{}class Interceptors{constructor(){this.preResolution=new PreResolutionInterceptors;this.postResolution=new PostResolutionInterceptors}}const typeInfo=new Map;class InternalDependencyContainer{constructor(e){this.parent=e;this._registry=new Registry;this.interceptors=new Interceptors;this.disposed=false;this.disposables=new Set}register(e,t,r={lifecycle:Lifecycle$1.Transient}){this.ensureNotDisposed();let n;if(!isProvider(t)){n={useClass:t}}else{n=t}if(isTokenProvider(n)){const t=[e];let r=n;while(r!=null){const e=r.useToken;if(t.includes(e)){throw new Error(`Token registration cycle detected! ${[...t,e].join(" -> ")}`)}t.push(e);const n=this._registry.get(e);if(n&&isTokenProvider(n.provider)){r=n.provider}else{r=null}}}if(r.lifecycle===Lifecycle$1.Singleton||r.lifecycle==Lifecycle$1.ContainerScoped||r.lifecycle==Lifecycle$1.ResolutionScoped){if(isValueProvider(n)||isFactoryProvider(n)){throw new Error(`Cannot use lifecycle "${Lifecycle$1[r.lifecycle]}" with ValueProviders or FactoryProviders`)}}this._registry.set(e,{provider:n,options:r});return this}registerType(e,t){this.ensureNotDisposed();if(isNormalToken(t)){return this.register(e,{useToken:t})}return this.register(e,{useClass:t})}registerInstance(e,t){this.ensureNotDisposed();return this.register(e,{useValue:t})}registerSingleton(e,t){this.ensureNotDisposed();if(isNormalToken(e)){if(isNormalToken(t)){return this.register(e,{useToken:t},{lifecycle:Lifecycle$1.Singleton})}else if(t){return this.register(e,{useClass:t},{lifecycle:Lifecycle$1.Singleton})}throw new Error('Cannot register a type name as a singleton without a "to" token')}let r=e;if(t&&!isNormalToken(t)){r=t}return this.register(e,{useClass:r},{lifecycle:Lifecycle$1.Singleton})}resolve(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getRegistration(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"Single");if(r){const n=this.resolveRegistration(r,t);this.executePostResolutionInterceptor(e,n,"Single");return n}if(isConstructorToken(e)){const r=this.construct(e,t);this.executePostResolutionInterceptor(e,r,"Single");return r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){const r=[];for(const n of this.interceptors.preResolution.getAll(e)){if(n.options.frequency!="Once"){r.push(n)}n.callback(e,t)}this.interceptors.preResolution.setAll(e,r)}}executePostResolutionInterceptor(e,t,r){if(this.interceptors.postResolution.has(e)){const n=[];for(const i of this.interceptors.postResolution.getAll(e)){if(i.options.frequency!="Once"){n.push(i)}i.callback(e,t,r)}this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){this.ensureNotDisposed();if(e.options.lifecycle===Lifecycle$1.ResolutionScoped&&t.scopedResolutions.has(e)){return t.scopedResolutions.get(e)}const r=e.options.lifecycle===Lifecycle$1.Singleton;const n=e.options.lifecycle===Lifecycle$1.ContainerScoped;const i=r||n;let s;if(isValueProvider(e.provider)){s=e.provider.useValue}else if(isTokenProvider(e.provider)){s=i?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t)}else if(isClassProvider(e.provider)){s=i?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t)}else if(isFactoryProvider(e.provider)){s=e.provider.useFactory(this)}else{s=this.construct(e.provider,t)}if(e.options.lifecycle===Lifecycle$1.ResolutionScoped){t.scopedResolutions.set(e,s)}return s}resolveAll(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getAllRegistrations(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"All");if(r){const n=r.map((e=>this.resolveRegistration(e,t)));this.executePostResolutionInterceptor(e,n,"All");return n}const n=[this.construct(e,t)];this.executePostResolutionInterceptor(e,n,"All");return n}isRegistered(e,t=false){this.ensureNotDisposed();return this._registry.has(e)||t&&(this.parent||false)&&this.parent.isRegistered(e,true)}reset(){this.ensureNotDisposed();this._registry.clear();this.interceptors.preResolution.clear();this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(const[e,t]of this._registry.entries()){this._registry.setAll(e,t.filter((e=>!isValueProvider(e.provider))).map((e=>{e.instance=undefined;return e})))}}createChildContainer(){this.ensureNotDisposed();const e=new InternalDependencyContainer(this);for(const[t,r]of this._registry.entries()){if(r.some((({options:e})=>e.lifecycle===Lifecycle$1.ContainerScoped))){e._registry.setAll(t,r.map((e=>{if(e.options.lifecycle===Lifecycle$1.ContainerScoped){return{provider:e.provider,options:e.options}}return e})))}}return e}beforeResolution(e,t,r={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:r})}afterResolution(e,t,r={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:r})}dispose(){return __awaiter(this,void 0,void 0,(function*(){this.disposed=true;const e=[];this.disposables.forEach((t=>{const r=t.dispose();if(r){e.push(r)}}));yield Promise.all(e)}))}getRegistration(e){if(this.isRegistered(e)){return this._registry.get(e)}if(this.parent){return this.parent.getRegistration(e)}return null}getAllRegistrations(e){if(this.isRegistered(e)){return this._registry.getAll(e)}if(this.parent){return this.parent.getAllRegistrations(e)}return null}construct(e,t){if(e instanceof DelayedConstructor){return e.createProxy((e=>this.resolve(e,t)))}const r=(()=>{const r=typeInfo.get(e);if(!r||r.length===0){if(e.length===0){return new e}else{throw new Error(`TypeInfo not known for "${e.name}"`)}}const n=r.map(this.resolveParams(t,e));return new e(...n)})();if(isDisposable(r)){this.disposables.add(r)}return r}resolveParams(e,t){return(r,n)=>{try{if(isTokenDescriptor(r)){if(isTransformDescriptor(r)){return r.multiple?this.resolve(r.transform).transform(this.resolveAll(r.token),...r.transformArgs):this.resolve(r.transform).transform(this.resolve(r.token,e),...r.transformArgs)}else{return r.multiple?this.resolveAll(r.token):this.resolve(r.token,e)}}else if(isTransformDescriptor(r)){return this.resolve(r.transform,e).transform(this.resolve(r.token,e),...r.transformArgs)}return this.resolve(r,e)}catch(e){throw new Error(formatErrorCtor(t,n,e))}}}ensureNotDisposed(){if(this.disposed){throw new Error("This container has been disposed, you cannot interact with a disposed container")}}}const instance=new InternalDependencyContainer;function injectable(){return function(e){typeInfo.set(e,getParamInfo(e))}}if(typeof Reflect==="undefined"||!Reflect.getMetadata){throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`)}var PKCS12AttrSet_1;class PKCS12Attribute{constructor(e={}){this.attrId="";this.attrValues=[];Object.assign(e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PKCS12Attribute.prototype,"attrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],PKCS12Attribute.prototype,"attrValues",void 0);let PKCS12AttrSet=PKCS12AttrSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PKCS12AttrSet_1.prototype)}};PKCS12AttrSet=PKCS12AttrSet_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PKCS12Attribute})],PKCS12AttrSet);var AuthenticatedSafe_1;let AuthenticatedSafe=AuthenticatedSafe_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthenticatedSafe_1.prototype)}};AuthenticatedSafe=AuthenticatedSafe_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:ContentInfo})],AuthenticatedSafe);class CertBag{constructor(e={}){this.certId="";this.certValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CertBag.prototype,"certId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CertBag.prototype,"certValue",void 0);class CRLBag{constructor(e={}){this.crlId="";this.crltValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CRLBag.prototype,"crlId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CRLBag.prototype,"crltValue",void 0);class EncryptedData extends OctetString{}class EncryptedPrivateKeyInfo$1{constructor(e={}){this.encryptionAlgorithm=new AlgorithmIdentifier$1;this.encryptedData=new EncryptedData;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],EncryptedPrivateKeyInfo$1.prototype,"encryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedData})],EncryptedPrivateKeyInfo$1.prototype,"encryptedData",void 0);var Attributes_1$1;var Version;(function(e){e[e["v1"]=0]="v1"})(Version||(Version={}));class PrivateKey extends OctetString{}let Attributes$1=Attributes_1$1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1$1.prototype)}};Attributes$1=Attributes_1$1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes$1);class PrivateKeyInfo$1{constructor(e={}){this.version=Version.v1;this.privateKeyAlgorithm=new AlgorithmIdentifier$1;this.privateKey=new PrivateKey;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo$1.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],PrivateKeyInfo$1.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:PrivateKey})],PrivateKeyInfo$1.prototype,"privateKey",void 0);__decorate([AsnProp({type:Attributes$1,implicit:true,context:0,optional:true})],PrivateKeyInfo$1.prototype,"attributes",void 0);let KeyBag=class e extends PrivateKeyInfo$1{};KeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyBag);let PKCS8ShroudedKeyBag=class e extends EncryptedPrivateKeyInfo$1{};PKCS8ShroudedKeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],PKCS8ShroudedKeyBag);class SecretBag{constructor(e={}){this.secretTypeId="";this.secretValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SecretBag.prototype,"secretTypeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SecretBag.prototype,"secretValue",void 0);class MacData{constructor(e={}){this.mac=new DigestInfo;this.macSalt=new OctetString;this.iterations=1;Object.assign(this,e)}}__decorate([AsnProp({type:DigestInfo})],MacData.prototype,"mac",void 0);__decorate([AsnProp({type:OctetString})],MacData.prototype,"macSalt",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,defaultValue:1})],MacData.prototype,"iterations",void 0);class PFX{constructor(e={}){this.version=3;this.authSafe=new ContentInfo;this.macData=new MacData;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PFX.prototype,"version",void 0);__decorate([AsnProp({type:ContentInfo})],PFX.prototype,"authSafe",void 0);__decorate([AsnProp({type:MacData,optional:true})],PFX.prototype,"macData",void 0);var SafeContents_1;class SafeBag{constructor(e={}){this.bagId="";this.bagValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SafeBag.prototype,"bagId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SafeBag.prototype,"bagValue",void 0);__decorate([AsnProp({type:PKCS12Attribute,repeated:"set",optional:true})],SafeBag.prototype,"bagAttributes",void 0);let SafeContents=SafeContents_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SafeContents_1.prototype)}};SafeContents=SafeContents_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SafeBag})],SafeContents);var ExtensionRequest_1,ExtendedCertificateAttributes_1,SMIMECapabilities_1;const id_pkcs9="1.2.840.113549.1.9";const id_pkcs9_at_challengePassword=`${id_pkcs9}.7`;const id_pkcs9_at_extensionRequest=`${id_pkcs9}.14`;let PKCS9String=class e extends DirectoryString{constructor(e={}){super(e)}toString(){const e={};e.toString();return this.ia5String||super.toString()}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],PKCS9String.prototype,"ia5String",void 0);PKCS9String=__decorate([AsnType({type:AsnTypeTypes.Choice})],PKCS9String);let Pkcs7PDU=class e extends ContentInfo{};Pkcs7PDU=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Pkcs7PDU);let UserPKCS12=class e extends PFX{};UserPKCS12=__decorate([AsnType({type:AsnTypeTypes.Sequence})],UserPKCS12);let EncryptedPrivateKeyInfo=class e extends EncryptedPrivateKeyInfo$1{};EncryptedPrivateKeyInfo=__decorate([AsnType({type:AsnTypeTypes.Sequence})],EncryptedPrivateKeyInfo);let EmailAddress=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],EmailAddress.prototype,"value",void 0);EmailAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],EmailAddress);let UnstructuredName=class e extends PKCS9String{};UnstructuredName=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredName);let UnstructuredAddress=class e extends DirectoryString{};UnstructuredAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredAddress);let DateOfBirth=class e{constructor(e=new Date){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],DateOfBirth.prototype,"value",void 0);DateOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],DateOfBirth);let PlaceOfBirth=class e extends DirectoryString{};PlaceOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],PlaceOfBirth);let Gender=class e{constructor(e="M"){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],Gender.prototype,"value",void 0);Gender=__decorate([AsnType({type:AsnTypeTypes.Choice})],Gender);let CountryOfCitizenship=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],CountryOfCitizenship.prototype,"value",void 0);CountryOfCitizenship=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfCitizenship);let CountryOfResidence=class e extends CountryOfCitizenship{};CountryOfResidence=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfResidence);let Pseudonym=class e extends DirectoryString{};Pseudonym=__decorate([AsnType({type:AsnTypeTypes.Choice})],Pseudonym);let ContentType=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentType.prototype,"value",void 0);ContentType=__decorate([AsnType({type:AsnTypeTypes.Choice})],ContentType);let SigningTime=class e extends Time{};SigningTime=__decorate([AsnType({type:AsnTypeTypes.Choice})],SigningTime);let SequenceNumber=class e{constructor(e=0){this.value=e}toString(){return this.value.toString()}};__decorate([AsnProp({type:AsnPropTypes.Integer})],SequenceNumber.prototype,"value",void 0);SequenceNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],SequenceNumber);let CounterSignature=class e extends SignerInfo{};CounterSignature=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CounterSignature);let ChallengePassword=class e extends DirectoryString{};ChallengePassword=__decorate([AsnType({type:AsnTypeTypes.Choice})],ChallengePassword);let ExtensionRequest=ExtensionRequest_1=class e extends Extensions{constructor(e){super(e);Object.setPrototypeOf(this,ExtensionRequest_1.prototype)}};ExtensionRequest=ExtensionRequest_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ExtensionRequest);let ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedCertificateAttributes_1.prototype)}};ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],ExtendedCertificateAttributes);let FriendlyName=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.BmpString})],FriendlyName.prototype,"value",void 0);FriendlyName=__decorate([AsnType({type:AsnTypeTypes.Choice})],FriendlyName);let SMIMECapability=class e extends AlgorithmIdentifier$1{};SMIMECapability=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SMIMECapability);let SMIMECapabilities=SMIMECapabilities_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SMIMECapabilities_1.prototype)}};SMIMECapabilities=SMIMECapabilities_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SMIMECapability})],SMIMECapabilities);var Attributes_1;let Attributes=Attributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1.prototype)}};Attributes=Attributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes);class CertificationRequestInfo{constructor(e={}){this.version=0;this.subject=new Name$1;this.subjectPKInfo=new SubjectPublicKeyInfo;this.attributes=new Attributes;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],CertificationRequestInfo.prototype,"version",void 0);__decorate([AsnProp({type:Name$1})],CertificationRequestInfo.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],CertificationRequestInfo.prototype,"subjectPKInfo",void 0);__decorate([AsnProp({type:Attributes,implicit:true,context:0})],CertificationRequestInfo.prototype,"attributes",void 0);class CertificationRequest{constructor(e={}){this.certificationRequestInfo=new CertificationRequestInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:CertificationRequestInfo})],CertificationRequest.prototype,"certificationRequestInfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificationRequest.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificationRequest.prototype,"signature",void 0);
/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const diAlgorithm="crypto.algorithm";class AlgorithmProvider{getAlgorithms(){return instance.resolveAll(diAlgorithm)}toAsnAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toAsnAlgorithm(e);if(r){return r}}if(/[0-9.]+/.test(e.name)){const t=new AlgorithmIdentifier$1({algorithm:e.name});if("parameters"in e){const r=e;t.parameters=r.parameters}return t}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toWebAlgorithm(e);if(r){return r}}const t={name:e.algorithm,parameters:e.parameters};return t}}const diAlgorithmProvider="crypto.algorithmProvider";instance.registerSingleton(diAlgorithmProvider,AlgorithmProvider);var EcAlgorithm_1;const idVersionOne$1="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1$1=`${idVersionOne$1}.1`;const idBrainpoolP160t1$1=`${idVersionOne$1}.2`;const idBrainpoolP192r1$1=`${idVersionOne$1}.3`;const idBrainpoolP192t1$1=`${idVersionOne$1}.4`;const idBrainpoolP224r1$1=`${idVersionOne$1}.5`;const idBrainpoolP224t1$1=`${idVersionOne$1}.6`;const idBrainpoolP256r1$1=`${idVersionOne$1}.7`;const idBrainpoolP256t1$1=`${idVersionOne$1}.8`;const idBrainpoolP320r1$1=`${idVersionOne$1}.9`;const idBrainpoolP320t1$1=`${idVersionOne$1}.10`;const idBrainpoolP384r1$1=`${idVersionOne$1}.11`;const idBrainpoolP384t1$1=`${idVersionOne$1}.12`;const idBrainpoolP512r1$1=`${idVersionOne$1}.13`;const idBrainpoolP512t1$1=`${idVersionOne$1}.14`;const brainpoolP160r1="brainpoolP160r1";const brainpoolP160t1="brainpoolP160t1";const brainpoolP192r1="brainpoolP192r1";const brainpoolP192t1="brainpoolP192t1";const brainpoolP224r1="brainpoolP224r1";const brainpoolP224t1="brainpoolP224t1";const brainpoolP256r1="brainpoolP256r1";const brainpoolP256t1="brainpoolP256t1";const brainpoolP320r1="brainpoolP320r1";const brainpoolP320t1="brainpoolP320t1";const brainpoolP384r1="brainpoolP384r1";const brainpoolP384t1="brainpoolP384t1";const brainpoolP512r1="brainpoolP512r1";const brainpoolP512t1="brainpoolP512t1";const ECDSA="ECDSA";let EcAlgorithm=EcAlgorithm_1=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case ECDSA.toLowerCase():if("hash"in e){const t=typeof e.hash==="string"?e.hash:e.hash.name;switch(t.toLowerCase()){case"sha-1":return ecdsaWithSHA1;case"sha-256":return ecdsaWithSHA256;case"sha-384":return ecdsaWithSHA384;case"sha-512":return ecdsaWithSHA512}}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=id_secp256r1;break;case"K-256":t=EcAlgorithm_1.SECP256K1;break;case"P-384":t=id_secp384r1;break;case"P-521":t=id_secp521r1;break;case brainpoolP160r1:t=idBrainpoolP160r1$1;break;case brainpoolP160t1:t=idBrainpoolP160t1$1;break;case brainpoolP192r1:t=idBrainpoolP192r1$1;break;case brainpoolP192t1:t=idBrainpoolP192t1$1;break;case brainpoolP224r1:t=idBrainpoolP224r1$1;break;case brainpoolP224t1:t=idBrainpoolP224t1$1;break;case brainpoolP256r1:t=idBrainpoolP256r1$1;break;case brainpoolP256t1:t=idBrainpoolP256t1$1;break;case brainpoolP320r1:t=idBrainpoolP320r1$1;break;case brainpoolP320t1:t=idBrainpoolP320t1$1;break;case brainpoolP384r1:t=idBrainpoolP384r1$1;break;case brainpoolP384t1:t=idBrainpoolP384t1$1;break;case brainpoolP512r1:t=idBrainpoolP512r1$1;break;case brainpoolP512t1:t=idBrainpoolP512t1$1;break}if(t){return new AlgorithmIdentifier$1({algorithm:id_ecPublicKey,parameters:AsnConvert.serialize(new ECParameters({namedCurve:t}))})}}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_ecdsaWithSHA1:return{name:ECDSA,hash:{name:"SHA-1"}};case id_ecdsaWithSHA256:return{name:ECDSA,hash:{name:"SHA-256"}};case id_ecdsaWithSHA384:return{name:ECDSA,hash:{name:"SHA-384"}};case id_ecdsaWithSHA512:return{name:ECDSA,hash:{name:"SHA-512"}};case id_ecPublicKey:{if(!e.parameters){throw new TypeError("Cannot get required parameters from EC algorithm")}const t=AsnConvert.parse(e.parameters,ECParameters);switch(t.namedCurve){case id_secp256r1:return{name:ECDSA,namedCurve:"P-256"};case EcAlgorithm_1.SECP256K1:return{name:ECDSA,namedCurve:"K-256"};case id_secp384r1:return{name:ECDSA,namedCurve:"P-384"};case id_secp521r1:return{name:ECDSA,namedCurve:"P-521"};case idBrainpoolP160r1$1:return{name:ECDSA,namedCurve:brainpoolP160r1};case idBrainpoolP160t1$1:return{name:ECDSA,namedCurve:brainpoolP160t1};case idBrainpoolP192r1$1:return{name:ECDSA,namedCurve:brainpoolP192r1};case idBrainpoolP192t1$1:return{name:ECDSA,namedCurve:brainpoolP192t1};case idBrainpoolP224r1$1:return{name:ECDSA,namedCurve:brainpoolP224r1};case idBrainpoolP224t1$1:return{name:ECDSA,namedCurve:brainpoolP224t1};case idBrainpoolP256r1$1:return{name:ECDSA,namedCurve:brainpoolP256r1};case idBrainpoolP256t1$1:return{name:ECDSA,namedCurve:brainpoolP256t1};case idBrainpoolP320r1$1:return{name:ECDSA,namedCurve:brainpoolP320r1};case idBrainpoolP320t1$1:return{name:ECDSA,namedCurve:brainpoolP320t1};case idBrainpoolP384r1$1:return{name:ECDSA,namedCurve:brainpoolP384r1};case idBrainpoolP384t1$1:return{name:ECDSA,namedCurve:brainpoolP384t1};case idBrainpoolP512r1$1:return{name:ECDSA,namedCurve:brainpoolP512r1};case idBrainpoolP512t1$1:return{name:ECDSA,namedCurve:brainpoolP512t1}}}}return null}};EcAlgorithm.SECP256K1="1.3.132.0.10";EcAlgorithm=EcAlgorithm_1=__decorate([injectable()],EcAlgorithm);instance.registerSingleton(diAlgorithm,EcAlgorithm);const NAME$1=Symbol("name");const VALUE=Symbol("value");class TextObject{constructor(e,t={},r=""){this[NAME$1]=e;this[VALUE]=r;for(const e in t){this[e]=t[e]}}}TextObject.NAME=NAME$1;TextObject.VALUE=VALUE;class DefaultAlgorithmSerializer{static toTextObject(e){const t=new TextObject("Algorithm Identifier",{},OidSerializer.toString(e.algorithm));if(e.parameters){switch(e.algorithm){case id_ecPublicKey:{const r=(new EcAlgorithm).toWebAlgorithm(e);if(r&&"namedCurve"in r){t["Named Curve"]=r.namedCurve}else{t["Parameters"]=e.parameters}break}default:t["Parameters"]=e.parameters}}return t}}class OidSerializer{static toString(e){const t=this.items[e];if(t){return t}return e}}OidSerializer.items={[id_sha1]:"sha1",[id_sha224]:"sha224",[id_sha256]:"sha256",[id_sha384]:"sha384",[id_sha512]:"sha512",[id_rsaEncryption]:"rsaEncryption",[id_sha1WithRSAEncryption]:"sha1WithRSAEncryption",[id_sha224WithRSAEncryption]:"sha224WithRSAEncryption",[id_sha256WithRSAEncryption]:"sha256WithRSAEncryption",[id_sha384WithRSAEncryption]:"sha384WithRSAEncryption",[id_sha512WithRSAEncryption]:"sha512WithRSAEncryption",[id_ecPublicKey]:"ecPublicKey",[id_ecdsaWithSHA1]:"ecdsaWithSHA1",[id_ecdsaWithSHA224]:"ecdsaWithSHA224",[id_ecdsaWithSHA256]:"ecdsaWithSHA256",[id_ecdsaWithSHA384]:"ecdsaWithSHA384",[id_ecdsaWithSHA512]:"ecdsaWithSHA512",[id_kp_serverAuth]:"TLS WWW server authentication",[id_kp_clientAuth]:"TLS WWW client authentication",[id_kp_codeSigning]:"Code Signing",[id_kp_emailProtection]:"E-mail Protection",[id_kp_timeStamping]:"Time Stamping",[id_kp_OCSPSigning]:"OCSP Signing",[id_signedData]:"Signed Data"};class TextConverter{static serialize(e){return this.serializeObj(e).join("\n")}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,t=0){const r=[];let n=this.pad(t++);let i="";const s=e[TextObject.VALUE];if(s){i=` ${s}`}r.push(`${n}${e[TextObject.NAME]}:${i}`);n=this.pad(t);for(const i in e){if(typeof i==="symbol"){continue}const s=e[i];const a=i?`${i}: `:"";if(typeof s==="string"||typeof s==="number"||typeof s==="boolean"){r.push(`${n}${a}${s}`)}else if(s instanceof Date){r.push(`${n}${a}${s.toUTCString()}`)}else if(Array.isArray(s)){for(const e of s){e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}}else if(s instanceof TextObject){s[TextObject.NAME]=i;r.push(...this.serializeObj(s,t))}else if(build$1.BufferSourceConverter.isBufferSource(s)){if(i){r.push(`${n}${a}`);r.push(...this.serializeBufferSource(s,t+1))}else{r.push(...this.serializeBufferSource(s,t))}}else if("toTextObject"in s){const e=s.toTextObject();e[TextObject.NAME]=i;r.push(...this.serializeObj(e,t))}else{throw new TypeError("Cannot serialize data in text format. Unsupported type.")}}return r}static serializeBufferSource(e,t=0){const r=this.pad(t);const n=build$1.BufferSourceConverter.toUint8Array(e);const i=[];for(let e=0;e<n.length;){const t=[];for(let r=0;r<16&&e<n.length;r++){if(r===8){t.push("")}const i=n[e++].toString(16).padStart(2,"0");t.push(i)}i.push(`${r}${t.join(" ")}`)}return i}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}TextConverter.oidSerializer=OidSerializer;TextConverter.algorithmSerializer=DefaultAlgorithmSerializer;class AsnData{constructor(...e){if(e.length===1){const t=e[0];this.rawData=AsnConvert.serialize(t);this.onInit(t)}else{const t=AsnConvert.parse(e[0],e[1]);this.rawData=build$1.BufferSourceConverter.toArrayBuffer(e[0]);this.onInit(t)}}equal(e){if(e instanceof AsnData){return build$1.isEqual(e.rawData,this.rawData)}return false}toString(e="text"){switch(e){case"asn":return AsnConvert.toString(this.rawData);case"text":return TextConverter.serialize(this.toTextObject());case"hex":return build$1.Convert.ToHex(this.rawData);case"base64":return build$1.Convert.ToBase64(this.rawData);case"base64url":return build$1.Convert.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){const e=this.constructor;return e.NAME}toTextObject(){const e=this.toTextObjectEmpty();e[""]=this.rawData;return e}toTextObjectEmpty(e){return new TextObject(this.getTextName(),{},e)}}AsnData.NAME="ASN";class Extension extends AsnData{constructor(...e){let t;if(build$1.BufferSourceConverter.isBufferSource(e[0])){t=build$1.BufferSourceConverter.toArrayBuffer(e[0])}else{t=AsnConvert.serialize(new Extension$1({extnID:e[0],critical:e[1],extnValue:new OctetString(build$1.BufferSourceConverter.toArrayBuffer(e[2]))}))}super(t,Extension$1)}onInit(e){this.type=e.extnID;this.critical=e.critical;this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.value;return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":undefined);if(e[TextObject.NAME]===Extension.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}var _a;class CryptoProvider{constructor(){this.items=new Map;this[_a]="CryptoProvider";if(typeof self!=="undefined"&&typeof crypto!=="undefined"){this.set(CryptoProvider.DEFAULT,crypto)}}static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==undefined}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,t){return this.items.forEach(e,t)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=CryptoProvider.DEFAULT){const t=this.items.get(e.toLowerCase());if(!t){throw new Error(`Cannot get Crypto by name '${e}'`)}return t}set(e,t){if(typeof e==="string"){if(!t){throw new TypeError("Argument 'value' is required")}this.items.set(e.toLowerCase(),t)}else{this.items.set(CryptoProvider.DEFAULT,e)}return this}}_a=Symbol.toStringTag;CryptoProvider.DEFAULT="default";const cryptoProvider=new CryptoProvider;const OID_REGEX=/^[0-2](?:\.[1-9][0-9]*)+$/;function isOID(e){return new RegExp(OID_REGEX).test(e)}class NameIdentifier{constructor(e={}){this.items={};for(const t in e){this.register(t,e[t])}}get(e){return this.items[e]||null}findId(e){if(!isOID(e)){return this.get(e)}return e}register(e,t){this.items[e]=t;this.items[t]=e}}const names$3=new NameIdentifier;names$3.register("CN","2.5.4.3");names$3.register("L","2.5.4.7");names$3.register("ST","2.5.4.8");names$3.register("O","2.5.4.10");names$3.register("OU","2.5.4.11");names$3.register("C","2.5.4.6");names$3.register("DC","0.9.2342.19200300.100.1.25");names$3.register("E","1.2.840.113549.1.9.1");names$3.register("G","2.5.4.42");names$3.register("I","2.5.4.43");names$3.register("SN","2.5.4.4");names$3.register("T","2.5.4.12");function replaceUnknownCharacter(e,t){return`\\${build$1.Convert.ToHex(build$1.Convert.FromUtf8String(t)).toUpperCase()}`}function escape$1(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,replaceUnknownCharacter)}class Name{constructor(e,t={}){this.extraNames=new NameIdentifier;this.asn=new Name$1;for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];this.extraNames.register(e,r)}}if(typeof e==="string"){this.asn=this.fromString(e)}else if(e instanceof Name$1){this.asn=e}else if(build$1.BufferSourceConverter.isBufferSource(e)){this.asn=AsnConvert.parse(e,Name$1)}else{this.asn=this.fromJSON(e)}}static isASCII(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r>255){return false}}return true}getField(e){const t=this.extraNames.findId(e)||names$3.findId(e);const r=[];for(const e of this.asn){for(const n of e){if(n.type===t){r.push(n.value.toString())}}}return r}getName(e){return this.extraNames.get(e)||names$3.get(e)}toString(){return this.asn.map((e=>e.map((e=>{const t=this.getName(e.type)||e.type;const r=e.value.anyValue?`#${build$1.Convert.ToHex(e.value.anyValue)}`:escape$1(e.value.toString());return`${t}=${r}`})).join("+"))).join(", ")}toJSON(){var e;const t=[];for(const r of this.asn){const n={};for(const t of r){const r=this.getName(t.type)||t.type;(e=n[r])!==null&&e!==void 0?e:n[r]=[];n[r].push(t.value.anyValue?`#${build$1.Convert.ToHex(t.value.anyValue)}`:t.value.toString())}t.push(n)}return t}fromString(e){const t=new Name$1;const r=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let n=null;let i=",";while(n=r.exec(`${e},`)){let[,e,r]=n;const s=r[r.length-1];if(s===","||s==="+"){r=r.slice(0,r.length-1);n[3]=s}const a=n[3];if(!/[\d.]+/.test(e)){e=this.getName(e)||""}if(!e){throw new Error(`Cannot get OID for name type '${e}'`)}const o=new AttributeTypeAndValue({type:e});if(r.charAt(0)==="#"){o.value.anyValue=build$1.Convert.FromHex(r.slice(1))}else{const t=/"(.*?[^\\])?"/.exec(r);if(t){r=t[1]}r=r.replace(/\\0a/gi,"\n").replace(/\\0d/gi,"\r").replace(/\\0g/gi,"\t").replace(/\\(.)/g,"$1");if(e===this.getName("E")||e===this.getName("DC")){o.value.ia5String=r}else{if(Name.isASCII(r)){o.value.printableString=r}else{o.value.utf8String=r}}}if(i==="+"){t[t.length-1].push(o)}else{t.push(new RelativeDistinguishedName([o]))}i=a}return t}fromJSON(e){const t=new Name$1;for(const r of e){const e=new RelativeDistinguishedName;for(const t in r){let n=t;if(!/[\d.]+/.test(t)){n=this.getName(t)||""}if(!n){throw new Error(`Cannot get OID for name type '${t}'`)}const i=r[t];for(const t of i){const r=new AttributeTypeAndValue({type:n});if(typeof t==="object"){for(const e in t){switch(e){case"ia5String":r.value.ia5String=t[e];break;case"utf8String":r.value.utf8String=t[e];break;case"universalString":r.value.universalString=t[e];break;case"bmpString":r.value.bmpString=t[e];break;case"printableString":r.value.printableString=t[e];break}}}else if(t[0]==="#"){r.value.anyValue=build$1.Convert.FromHex(t.slice(1))}else{if(n===this.getName("E")||n===this.getName("DC")){r.value.ia5String=t}else{r.value.printableString=t}}e.push(r)}}t.push(e)}return t}toArrayBuffer(){return AsnConvert.serialize(this.asn)}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(n,this.toArrayBuffer())}}const ERR_GN_CONSTRUCTOR="Cannot initialize GeneralName from ASN.1 data.";const ERR_GN_STRING_FORMAT=`${ERR_GN_CONSTRUCTOR} Unsupported string format in use.`;const ERR_GUID=`${ERR_GN_CONSTRUCTOR} Value doesn't match to GUID regular expression.`;const GUID_REGEX=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i;const id_GUID="1.3.6.1.4.1.311.25.1";const id_UPN="1.3.6.1.4.1.311.20.2.3";const DNS="dns";const DN="dn";const EMAIL="email";const IP="ip";const URL$1="url";const GUID="guid";const UPN="upn";const REGISTERED_ID="id";class GeneralName extends AsnData{constructor(...e){let t;if(e.length===2){switch(e[0]){case DN:{const r=new Name(e[1]).toArrayBuffer();const n=AsnConvert.parse(r,Name$1);t=new GeneralName$1({directoryName:n});break}case DNS:t=new GeneralName$1({dNSName:e[1]});break;case EMAIL:t=new GeneralName$1({rfc822Name:e[1]});break;case GUID:{const r=new RegExp(GUID_REGEX,"i").exec(e[1]);if(!r){throw new Error("Cannot parse GUID value. Value doesn't match to regular expression")}const n=r.slice(1).map(((e,t)=>{if(t<3){return build$1.Convert.ToHex(new Uint8Array(build$1.Convert.FromHex(e)).reverse())}return e})).join("");t=new GeneralName$1({otherName:new OtherName({typeId:id_GUID,value:AsnConvert.serialize(new OctetString(build$1.Convert.FromHex(n)))})});break}case IP:t=new GeneralName$1({iPAddress:e[1]});break;case REGISTERED_ID:t=new GeneralName$1({registeredID:e[1]});break;case UPN:{t=new GeneralName$1({otherName:new OtherName({typeId:id_UPN,value:AsnConvert.serialize(AsnUtf8StringConverter.toASN(e[1]))})});break}case URL$1:t=new GeneralName$1({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}}else if(build$1.BufferSourceConverter.isBufferSource(e[0])){t=AsnConvert.parse(e[0],GeneralName$1)}else{t=e[0]}super(t)}onInit(e){if(e.dNSName!=undefined){this.type=DNS;this.value=e.dNSName}else if(e.rfc822Name!=undefined){this.type=EMAIL;this.value=e.rfc822Name}else if(e.iPAddress!=undefined){this.type=IP;this.value=e.iPAddress}else if(e.uniformResourceIdentifier!=undefined){this.type=URL$1;this.value=e.uniformResourceIdentifier}else if(e.registeredID!=undefined){this.type=REGISTERED_ID;this.value=e.registeredID}else if(e.directoryName!=undefined){this.type=DN;this.value=new Name(e.directoryName).toString()}else if(e.otherName!=undefined){if(e.otherName.typeId===id_GUID){this.type=GUID;const t=AsnConvert.parse(e.otherName.value,OctetString);const r=new RegExp(GUID_REGEX,"i").exec(build$1.Convert.ToHex(t));if(!r){throw new Error(ERR_GUID)}this.value=r.slice(1).map(((e,t)=>{if(t<3){return build$1.Convert.ToHex(new Uint8Array(build$1.Convert.FromHex(e)).reverse())}return e})).join("-")}else if(e.otherName.typeId===id_UPN){this.type=UPN;this.value=AsnConvert.parse(e.otherName.value,DirectoryString).toString()}else{throw new Error(ERR_GN_STRING_FORMAT)}}else{throw new Error(ERR_GN_STRING_FORMAT)}}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case DN:case DNS:case GUID:case IP:case REGISTERED_ID:case UPN:case URL$1:e=this.type.toUpperCase();break;case EMAIL:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let t=this.value;if(this.type===REGISTERED_ID){t=OidSerializer.toString(t)}return new TextObject(e,undefined,t)}}class GeneralNames extends AsnData{constructor(e){let t;if(e instanceof GeneralNames$1){t=e}else if(Array.isArray(e)){const r=[];for(const t of e){if(t instanceof GeneralName$1){r.push(t)}else{const e=AsnConvert.parse(new GeneralName(t.type,t.value).rawData,GeneralName$1);r.push(e)}}t=new GeneralNames$1(r)}else if(build$1.BufferSourceConverter.isBufferSource(e)){t=AsnConvert.parse(e,GeneralNames$1)}else{throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments")}super(t)}onInit(e){const t=[];for(const r of e){let e=null;try{e=new GeneralName(r)}catch{continue}t.push(e)}this.items=t}toJSON(){return this.items.map((e=>e.toJSON()))}toTextObject(){const e=super.toTextObjectEmpty();for(const t of this.items){const r=t.toTextObject();let n=e[r[TextObject.NAME]];if(!Array.isArray(n)){n=[];e[r[TextObject.NAME]]=n}n.push(r)}return e}}GeneralNames.NAME="GeneralNames";const rPaddingTag="-{5}";const rEolChars="\\n";const rNameTag=`[^${rEolChars}]+`;const rBeginTag=`${rPaddingTag}BEGIN (${rNameTag}(?=${rPaddingTag}))${rPaddingTag}`;const rEndTag=`${rPaddingTag}END \\1${rPaddingTag}`;const rEolGroup="\\n";const rHeaderKey=`[^:${rEolChars}]+`;const rHeaderValue=`(?:[^${rEolChars}]+${rEolGroup}(?: +[^${rEolChars}]+${rEolGroup})*)`;const rBase64Chars="[a-zA-Z0-9=+/]+";const rBase64=`(?:${rBase64Chars}${rEolGroup})+`;const rPem=`${rBeginTag}${rEolGroup}(?:((?:${rHeaderKey}: ${rHeaderValue})+))?${rEolGroup}?(${rBase64})${rEndTag}`;class PemConverter$1{static isPem(e){return typeof e==="string"&&new RegExp(rPem,"g").test(e)}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const t=new RegExp(rPem,"g");const r=[];let n=null;while(n=t.exec(e)){const e=n[3].replace(new RegExp(`[${rEolChars}]+`,"g"),"");const t={type:n[1],headers:[],rawData:build$1.Convert.FromBase64(e)};const i=n[2];if(i){const e=i.split(new RegExp(rEolGroup,"g"));let r=null;for(const n of e){const[e,i]=n.split(/:(.*)/);if(i===undefined){if(!r){throw new Error("Cannot parse PEM string. Incorrect header value")}r.value+=e.trim()}else{if(r){t.headers.push(r)}r={key:e,value:i.trim()}}}if(r){t.headers.push(r)}}r.push(t)}return r}static decode(e){const t=this.decodeWithHeaders(e);return t.map((e=>e.rawData))}static decodeFirst(e){const t=this.decode(e);if(!t.length){throw new RangeError("PEM string doesn't contain any objects")}return t[0]}static encode(e,t){if(Array.isArray(e)){const r=new Array;if(t){e.forEach((e=>{if(!build$1.BufferSourceConverter.isBufferSource(e)){throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource")}r.push(this.encodeStruct({type:t,rawData:build$1.BufferSourceConverter.toArrayBuffer(e)}))}))}else{e.forEach((e=>{if(!("type"in e)){throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut")}r.push(this.encodeStruct(e))}))}return r.join("\n")}else{if(!t){throw new Error("Required argument 'tag' is missed")}return this.encodeStruct({type:t,rawData:build$1.BufferSourceConverter.toArrayBuffer(e)})}}static encodeStruct(e){var t;const r=e.type.toLocaleUpperCase();const n=[];n.push(`-----BEGIN ${r}-----`);if((t=e.headers)===null||t===void 0?void 0:t.length){for(const t of e.headers){n.push(`${t.key}: ${t.value}`)}n.push("")}const i=build$1.Convert.ToBase64(e.rawData);let s;let a=0;const o=Array();while(a<i.length){if(i.length-a<64){s=i.substring(a)}else{s=i.substring(a,a+64);a+=64}if(s.length!==0){o.push(s);if(s.length<64){break}}else{break}}n.push(...o);n.push(`-----END ${r}-----`);return n.join("\n")}}PemConverter$1.CertificateTag="CERTIFICATE";PemConverter$1.CrlTag="CRL";PemConverter$1.CertificateRequestTag="CERTIFICATE REQUEST";PemConverter$1.PublicKeyTag="PUBLIC KEY";PemConverter$1.PrivateKeyTag="PRIVATE KEY";class PemData extends AsnData{static isAsnEncoded(e){return build$1.BufferSourceConverter.isBufferSource(e)||typeof e==="string"}static toArrayBuffer(e){if(typeof e==="string"){if(PemConverter$1.isPem(e)){return PemConverter$1.decode(e)[0]}else if(build$1.Convert.isHex(e)){return build$1.Convert.FromHex(e)}else if(build$1.Convert.isBase64(e)){return build$1.Convert.FromBase64(e)}else if(build$1.Convert.isBase64Url(e)){return build$1.Convert.FromBase64Url(e)}else{throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}else{const t=build$1.Convert.ToBinary(e);if(PemConverter$1.isPem(t)){return PemConverter$1.decode(t)[0]}else if(build$1.Convert.isHex(t)){return build$1.Convert.FromHex(t)}else if(build$1.Convert.isBase64(t)){return build$1.Convert.FromBase64(t)}else if(build$1.Convert.isBase64Url(t)){return build$1.Convert.FromBase64Url(t)}return build$1.BufferSourceConverter.toArrayBuffer(e)}}constructor(...e){if(PemData.isAsnEncoded(e[0])){super(PemData.toArrayBuffer(e[0]),e[1])}else{super(e[0])}}toString(e="pem"){switch(e){case"pem":return PemConverter$1.encode(this.rawData,this.tag);default:return super.toString(e)}}}class PublicKey extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,SubjectPublicKeyInfo)}else{super(e)}this.tag=PemConverter$1.PublicKeyTag}async export(...e){let t;let r=["verify"];let n={hash:"SHA-256",...this.algorithm};if(e.length>1){n=e[0]||n;r=e[1]||r;t=e[2]||cryptoProvider.get()}else{t=e[0]||cryptoProvider.get()}return t.subtle.importKey("spki",this.rawData,n,true,r)}onInit(e){const t=instance.resolve(diAlgorithmProvider);const r=this.algorithm=t.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case id_rsaEncryption:{const t=AsnConvert.parse(e.subjectPublicKey,RSAPublicKey);const n=build$1.BufferSourceConverter.toUint8Array(t.modulus);r.publicExponent=build$1.BufferSourceConverter.toUint8Array(t.publicExponent);r.modulusLength=(!n[0]?n.slice(1):n).byteLength<<3;break}}}async getThumbprint(...e){var t;let r;let n="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){n=e[0]||n;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(n,this.rawData)}async getKeyIdentifier(e){if(!e){e=cryptoProvider.get()}const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);return await e.subtle.digest("SHA-1",t.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);e["Algorithm"]=TextConverter.serializeAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case id_ecPublicKey:e["EC Point"]=t.subjectPublicKey;break;case id_rsaEncryption:default:e["Raw Data"]=t.subjectPublicKey}return e}}class ExtensionFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Extension(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}ExtensionFactory.items=new Map;const diAsnSignatureFormatter="crypto.signatureFormatter";class AsnDefaultSignatureFormatter{toAsnSignature(e,t){return build$1.BufferSourceConverter.toArrayBuffer(t)}toWebSignature(e,t){return build$1.BufferSourceConverter.toArrayBuffer(t)}}class X509Certificate extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,Certificate)}else{super(e)}this.tag=PemConverter$1.CertificateTag}onInit(e){const t=e.tbsCertificate;this.tbs=AsnConvert.serialize(t);this.serialNumber=build$1.Convert.ToHex(t.serialNumber);this.subjectName=new Name(t.subject);this.subject=new Name(t.subject).toString();this.issuerName=new Name(t.issuer);this.issuer=this.issuerName.toString();const r=instance.resolve(diAlgorithmProvider);this.signatureAlgorithm=r.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signatureValue;const n=t.validity.notBefore.utcTime||t.validity.notBefore.generalTime;if(!n){throw new Error("Cannot get 'notBefore' value")}this.notBefore=n;const i=t.validity.notAfter.utcTime||t.validity.notAfter.generalTime;if(!i){throw new Error("Cannot get 'notAfter' value")}this.notAfter=i;this.extensions=[];if(t.extensions){this.extensions=t.extensions.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}this.publicKey=new PublicKey(t.subjectPublicKeyInfo)}getExtension(e){for(const t of this.extensions){if(typeof e==="string"){if(t.type===e){return t}}else{if(t instanceof e){return t}}}return null}getExtensions(e){return this.extensions.filter((t=>{if(typeof e==="string"){return t.type===e}else{return t instanceof e}}))}async verify(e={},t=cryptoProvider.get()){let r;let n;const i=e.publicKey;try{if(!i){r={...this.publicKey.algorithm,...this.signatureAlgorithm};n=await this.publicKey.export(r,["verify"],t)}else if("publicKey"in i){r={...i.publicKey.algorithm,...this.signatureAlgorithm};n=await i.publicKey.export(r,["verify"])}else if(i instanceof PublicKey){r={...i.algorithm,...this.signatureAlgorithm};n=await i.export(r,["verify"])}else if(build$1.BufferSourceConverter.isBufferSource(i)){const e=new PublicKey(i);r={...e.algorithm,...this.signatureAlgorithm};n=await e.export(r,["verify"])}else{r={...i.algorithm,...this.signatureAlgorithm};n=i}}catch(e){return false}const s=instance.resolveAll(diAsnSignatureFormatter).reverse();let a=null;for(const e of s){a=e.toWebSignature(r,this.signature);if(a){break}}if(!a){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}const o=await t.subtle.verify(this.signatureAlgorithm,n,a,this.tbs);if(e.signatureOnly){return o}else{const t=e.date||new Date;const r=t.getTime();return o&&this.notBefore.getTime()<r&&r<this.notAfter.getTime()}}async getThumbprint(...e){let t;let r="SHA-1";if(e[0]){if(!e[0].subtle){r=e[0]||r;t=e[1]}else{t=e[0]}}t!==null&&t!==void 0?t:t=cryptoProvider.get();return await t.subtle.digest(r,this.rawData)}async isSelfSigned(e=cryptoProvider.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:true},e)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,Certificate);const r=t.tbsCertificate;const n=new TextObject("",{Version:`${Version$1[r.version]} (${r.version})`,"Serial Number":r.serialNumber,"Signature Algorithm":TextConverter.serializeAlgorithm(r.signature),Issuer:this.issuer,Validity:new TextObject("",{"Not Before":r.validity.notBefore.getTime(),"Not After":r.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(r.issuerUniqueID){n["Issuer Unique ID"]=r.issuerUniqueID}if(r.subjectUniqueID){n["Subject Unique ID"]=r.subjectUniqueID}if(this.extensions.length){const e=new TextObject("");for(const t of this.extensions){const r=t.toTextObject();e[r[TextObject.NAME]]=r}n["Extensions"]=e}e["Data"]=n;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signatureValue});return e}}X509Certificate.NAME="Certificate";class AuthorityKeyIdentifierExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else if(typeof e[0]==="string"){const t=new AuthorityKeyIdentifier({keyIdentifier:new KeyIdentifier(build$1.Convert.FromHex(e[0]))});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(t))}else{const t=e[0];const r=t.name instanceof GeneralNames?AsnConvert.parse(t.name.rawData,GeneralNames$1):t.name;const n=new AuthorityKeyIdentifier({authorityCertIssuer:r,authorityCertSerialNumber:build$1.Convert.FromHex(t.serialNumber)});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(n))}}static async create(e,t=false,r=cryptoProvider.get()){if(e instanceof X509Certificate||CryptoProvider.isCryptoKey(e)){const n=e instanceof X509Certificate?await e.publicKey.export(r):e;const i=await r.subtle.exportKey("spki",n);const s=new PublicKey(i);const a=await s.getKeyIdentifier(r);return new AuthorityKeyIdentifierExtension(build$1.Convert.ToHex(a),t)}else{return new AuthorityKeyIdentifierExtension(e,t)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,AuthorityKeyIdentifier);if(t.keyIdentifier){this.keyId=build$1.Convert.ToHex(t.keyIdentifier)}if(t.authorityCertIssuer&&t.authorityCertSerialNumber){this.certId={name:t.authorityCertIssuer,serialNumber:build$1.Convert.ToHex(t.authorityCertSerialNumber)}}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,AuthorityKeyIdentifier);if(t.authorityCertIssuer){e["Authority Issuer"]=new GeneralNames(t.authorityCertIssuer).toTextObject()}if(t.authorityCertSerialNumber){e["Authority Serial Number"]=t.authorityCertSerialNumber}if(t.keyIdentifier){e[""]=t.keyIdentifier}return e}}AuthorityKeyIdentifierExtension.NAME="Authority Key Identifier";class BasicConstraintsExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,BasicConstraints);this.ca=t.cA;this.pathLength=t.pathLenConstraint}else{const t=new BasicConstraints({cA:e[0],pathLenConstraint:e[1]});super(id_ce_basicConstraints,e[2],AsnConvert.serialize(t));this.ca=e[0];this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();if(this.ca){e["CA"]=this.ca}if(this.pathLength!==undefined){e["Path Length"]=this.pathLength}return e}}BasicConstraintsExtension.NAME="Basic Constraints";var ExtendedKeyUsage;(function(e){e["serverAuth"]="1.3.6.1.5.5.7.3.1";e["clientAuth"]="1.3.6.1.5.5.7.3.2";e["codeSigning"]="1.3.6.1.5.5.7.3.3";e["emailProtection"]="1.3.6.1.5.5.7.3.4";e["timeStamping"]="1.3.6.1.5.5.7.3.8";e["ocspSigning"]="1.3.6.1.5.5.7.3.9"})(ExtendedKeyUsage||(ExtendedKeyUsage={}));class ExtendedKeyUsageExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,ExtendedKeyUsage$1);this.usages=t.map((e=>e))}else{const t=new ExtendedKeyUsage$1(e[0]);super(id_ce_extKeyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.usages.map((e=>OidSerializer.toString(e))).join(", ");return e}}ExtendedKeyUsageExtension.NAME="Extended Key Usages";var KeyUsageFlags;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags||(KeyUsageFlags={}));class KeyUsagesExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,KeyUsage);this.usages=t.toNumber()}else{const t=new KeyUsage(e[0]);super(id_ce_keyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,KeyUsage);e[""]=t.toJSON().join(", ");return e}}KeyUsagesExtension.NAME="Key Usages";class SubjectKeyIdentifierExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);this.keyId=build$1.Convert.ToHex(t)}else{const t=typeof e[0]==="string"?build$1.Convert.FromHex(e[0]):e[0];const r=new SubjectKeyIdentifier(t);super(id_ce_subjectKeyIdentifier,e[1],AsnConvert.serialize(r));this.keyId=build$1.Convert.ToHex(t)}}static async create(e,t=false,r=cryptoProvider.get()){let n;if(e instanceof PublicKey){n=e.rawData}else if("publicKey"in e){n=e.publicKey.rawData}else if(build$1.BufferSourceConverter.isBufferSource(e)){n=e}else{n=await r.subtle.exportKey("spki",e)}const i=new PublicKey(n);const s=await i.getKeyIdentifier(r);return new SubjectKeyIdentifierExtension(build$1.Convert.ToHex(s),t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);e[""]=t;return e}}SubjectKeyIdentifierExtension.NAME="Subject Key Identifier";class SubjectAlternativeNameExtension extends Extension{constructor(...e){if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{super(id_ce_subjectAltName,e[1],new GeneralNames(e[0]||[]).rawData)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,SubjectAlternativeName);this.names=new GeneralNames(t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.names.toTextObject();for(const r in t){e[r]=t[r]}return e}}SubjectAlternativeNameExtension.NAME="Subject Alternative Name";class CertificatePolicyExtension extends Extension{constructor(...e){var t;if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,CertificatePolicies);this.policies=t.map((e=>e.policyIdentifier))}else{const r=e[0];const n=(t=e[1])!==null&&t!==void 0?t:false;const i=new CertificatePolicies(r.map((e=>new PolicyInformation({policyIdentifier:e}))));super(id_ce_certificatePolicies,n,AsnConvert.serialize(i));this.policies=r}}toTextObject(){const e=this.toTextObjectWithoutValue();e["Policy"]=this.policies.map((e=>new TextObject("",{},OidSerializer.toString(e))));return e}}CertificatePolicyExtension.NAME="Certificate Policies";ExtensionFactory.register(id_ce_certificatePolicies,CertificatePolicyExtension);class Attribute extends AsnData{constructor(...e){let t;if(build$1.BufferSourceConverter.isBufferSource(e[0])){t=build$1.BufferSourceConverter.toArrayBuffer(e[0])}else{const r=e[0];const n=Array.isArray(e[1])?e[1].map((e=>build$1.BufferSourceConverter.toArrayBuffer(e))):[];t=AsnConvert.serialize(new Attribute$2({type:r,values:n}))}super(t,Attribute$2)}onInit(e){this.type=e.type;this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();e["Value"]=this.values.map((e=>new TextObject("",{"":e})));return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();if(e[TextObject.NAME]===Attribute.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}Attribute.NAME="Attribute";class ChallengePasswordAttribute extends Attribute{constructor(...e){var t;if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=new ChallengePassword({printableString:e[0]});super(id_pkcs9_at_challengePassword,[AsnConvert.serialize(t)])}(t=this.password)!==null&&t!==void 0?t:this.password=""}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],ChallengePassword);this.password=e.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();e[TextObject.VALUE]=this.password;return e}}ChallengePasswordAttribute.NAME="Challenge Password";class ExtensionsAttribute extends Attribute{constructor(...e){var t;if(build$1.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=e[0];const r=new Extensions;for(const e of t){r.push(AsnConvert.parse(e.rawData,Extension$1))}super(id_pkcs9_at_extensionRequest,[AsnConvert.serialize(r)])}(t=this.items)!==null&&t!==void 0?t:this.items=[]}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],Extensions);this.items=e.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.items.map((e=>e.toTextObject()));for(const r of t){e[r[TextObject.NAME]]=r}return e}}ExtensionsAttribute.NAME="Extensions";class AttributeFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Attribute(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}AttributeFactory.items=new Map;let RsaAlgorithm=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(e.hash){switch(e.hash.name.toLowerCase()){case"sha-1":return new AlgorithmIdentifier$1({algorithm:id_sha1WithRSAEncryption,parameters:null});case"sha-256":return new AlgorithmIdentifier$1({algorithm:id_sha256WithRSAEncryption,parameters:null});case"sha-384":return new AlgorithmIdentifier$1({algorithm:id_sha384WithRSAEncryption,parameters:null});case"sha-512":return new AlgorithmIdentifier$1({algorithm:id_sha512WithRSAEncryption,parameters:null})}}else{return new AlgorithmIdentifier$1({algorithm:id_rsaEncryption,parameters:null})}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_rsaEncryption:return{name:"RSASSA-PKCS1-v1_5"};case id_sha1WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case id_sha256WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case id_sha384WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case id_sha512WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};RsaAlgorithm=__decorate([injectable()],RsaAlgorithm);instance.registerSingleton(diAlgorithm,RsaAlgorithm);class AsnEcSignatureFormatter{addPadding(e,t){const r=build$1.BufferSourceConverter.toUint8Array(t);const n=new Uint8Array(e);n.set(r,e-r.length);return n}removePadding(e,t=false){let r=build$1.BufferSourceConverter.toUint8Array(e);for(let e=0;e<r.length;e++){if(!r[e]){continue}r=r.slice(e);break}if(t&&r[0]>127){const e=new Uint8Array(r.length+1);e.set(r,1);return e.buffer}return r.buffer}toAsnSignature(e,t){if(e.name==="ECDSA"){const r=e.namedCurve;const n=AsnEcSignatureFormatter.namedCurveSize.get(r)||AsnEcSignatureFormatter.defaultNamedCurveSize;const i=new ECDSASigValue;const s=build$1.BufferSourceConverter.toUint8Array(t);i.r=this.removePadding(s.slice(0,n),true);i.s=this.removePadding(s.slice(n,n+n),true);return AsnConvert.serialize(i)}return null}toWebSignature(e,t){if(e.name==="ECDSA"){const r=AsnConvert.parse(t,ECDSASigValue);const n=e.namedCurve;const i=AsnEcSignatureFormatter.namedCurveSize.get(n)||AsnEcSignatureFormatter.defaultNamedCurveSize;const s=this.addPadding(i,this.removePadding(r.r));const a=this.addPadding(i,this.removePadding(r.s));return build$1.combine(s,a)}return null}}AsnEcSignatureFormatter.namedCurveSize=new Map;AsnEcSignatureFormatter.defaultNamedCurveSize=32;const idX25519$1="1.3.101.110";const idX448$1="1.3.101.111";const idEd25519$1="1.3.101.112";const idEd448$1="1.3.101.113";let EdAlgorithm=class e{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=idEd25519$1;break;case"ed448":t=idEd448$1;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=idX25519$1;break;case"x448":t=idX448$1;break}}if(t){return new AlgorithmIdentifier$1({algorithm:t})}return null}toWebAlgorithm(e){switch(e.algorithm){case idEd25519$1:return{name:"EdDSA",namedCurve:"Ed25519"};case idEd448$1:return{name:"EdDSA",namedCurve:"Ed448"};case idX25519$1:return{name:"ECDH-ES",namedCurve:"X25519"};case idX448$1:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};EdAlgorithm=__decorate([injectable()],EdAlgorithm);instance.registerSingleton(diAlgorithm,EdAlgorithm);class X509Certificates extends Array{constructor(e){super();if(PemData.isAsnEncoded(e)){this.import(e)}else if(e instanceof X509Certificate){this.push(e)}else if(Array.isArray(e)){for(const t of e){this.push(t)}}}export(e){const t=new SignedData;t.version=1;t.encapContentInfo.eContentType=id_data;t.encapContentInfo.eContent=new EncapsulatedContent({single:new OctetString});t.certificates=new CertificateSet(this.map((e=>new CertificateChoices({certificate:AsnConvert.parse(e.rawData,Certificate)}))));const r=new ContentInfo({contentType:id_signedData,content:AsnConvert.serialize(t)});const n=AsnConvert.serialize(r);if(e==="raw"){return n}return this.toString(e)}import(e){const t=PemData.toArrayBuffer(e);const r=AsnConvert.parse(t,ContentInfo);if(r.contentType!==id_signedData){throw new TypeError("Cannot parse CMS package. Incoming data is not a SignedData object.")}const n=AsnConvert.parse(r.content,SignedData);this.clear();for(const e of n.certificates||[]){if(e.certificate){this.push(new X509Certificate(e.certificate))}}}clear(){while(this.pop()){}}toString(e="pem"){const t=this.export("raw");switch(e){case"pem":return PemConverter$1.encode(t,"CMS");case"pem-chain":return this.map((e=>e.toString("pem"))).join("\n");case"asn":return AsnConvert.toString(t);case"hex":return build$1.Convert.ToHex(t);case"base64":return build$1.Convert.ToBase64(t);case"base64url":return build$1.Convert.ToBase64Url(t);case"text":return TextConverter.serialize(this.toTextObject());default:throw TypeError("Argument 'format' is unsupported value")}}toTextObject(){const e=AsnConvert.parse(this.export("raw"),ContentInfo);const t=AsnConvert.parse(e.content,SignedData);const r=new TextObject("X509Certificates",{"Content Type":OidSerializer.toString(e.contentType),Content:new TextObject("",{Version:`${CMSVersion[t.version]} (${t.version})`,Certificates:new TextObject("",{Certificate:this.map((e=>e.toTextObject()))})})});return r}}class X509ChainBuilder{constructor(e={}){this.certificates=[];if(e.certificates){this.certificates=e.certificates}}async build(e,t=cryptoProvider.get()){const r=new X509Certificates(e);let n=e;while(n=await this.findIssuer(n,t)){const e=await n.getThumbprint(t);for(const n of r){const r=await n.getThumbprint(t);if(build$1.isEqual(e,r)){throw new Error("Cannot build a certificate chain. Circular dependency.")}}r.push(n)}return r}async findIssuer(e,t=cryptoProvider.get()){if(!await e.isSelfSigned(t)){const r=e.getExtension(id_ce_authorityKeyIdentifier);for(const n of this.certificates){if(n.subject!==e.issuer){continue}if(r){if(r.keyId){const e=n.getExtension(id_ce_subjectKeyIdentifier);if(e&&e.keyId!==r.keyId){continue}}else if(r.certId){const e=n.getExtension(id_ce_subjectAltName);if(e&&!(r.certId.serialNumber===n.serialNumber&&build$1.isEqual(AsnConvert.serialize(r.certId.name),AsnConvert.serialize(e)))){continue}}}if(!await e.verify({publicKey:await n.publicKey.export(t),signatureOnly:true},t)){continue}return n}}return null}}var X509CrlReason;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(X509CrlReason||(X509CrlReason={}));ExtensionFactory.register(id_ce_basicConstraints,BasicConstraintsExtension);ExtensionFactory.register(id_ce_extKeyUsage,ExtendedKeyUsageExtension);ExtensionFactory.register(id_ce_keyUsage,KeyUsagesExtension);ExtensionFactory.register(id_ce_subjectKeyIdentifier,SubjectKeyIdentifierExtension);ExtensionFactory.register(id_ce_authorityKeyIdentifier,AuthorityKeyIdentifierExtension);ExtensionFactory.register(id_ce_subjectAltName,SubjectAlternativeNameExtension);AttributeFactory.register(id_pkcs9_at_challengePassword,ChallengePasswordAttribute);AttributeFactory.register(id_pkcs9_at_extensionRequest,ExtensionsAttribute);instance.registerSingleton(diAsnSignatureFormatter,AsnDefaultSignatureFormatter);instance.registerSingleton(diAsnSignatureFormatter,AsnEcSignatureFormatter);AsnEcSignatureFormatter.namedCurveSize.set("P-256",32);AsnEcSignatureFormatter.namedCurveSize.set("K-256",32);AsnEcSignatureFormatter.namedCurveSize.set("P-384",48);AsnEcSignatureFormatter.namedCurveSize.set("P-521",66);function pemOrBase64Orbase64urlToString(e){let t=e.split(/\r?\n/);while(t[t.length-1].trim()===""){t.pop()}if(e.slice(0,3)==="---"){t.shift();t.pop()}e=t.join("");e=e.split("_").join("/").split("-").join("+").split(".").join("=");return e}function base64ToUint8array(e){e=pemOrBase64Orbase64urlToString(e);let t;if(typeof window==="undefined"||!window.atob){t=Uint8Array.from(Buffer.from(e,"base64"))}else{t=Uint8Array.from(window.atob(e),(e=>e.charCodeAt(0)))}return t}function uint8tohex(e){if(!e||!e.length)return"";return Array.from(e).map((e=>("0"+e.toString(16)).slice(-2))).join("")}class JsonError extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e);this.message=e;this.innerError=t}}class TransformError extends JsonError{constructor(e,t,r){super(t,r);this.schema=e}}class ParserError extends TransformError{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class ValidationError extends JsonError{}class SerializerError extends JsonError{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r);this.schemaName=e}}class KeyError extends ParserError{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema");this.keys=t;this.errors=r}}var JsonPropTypes;(function(e){e[e["Any"]=0]="Any";e[e["Boolean"]=1]="Boolean";e[e["Number"]=2]="Number";e[e["String"]=3]="String"})(JsonPropTypes||(JsonPropTypes={}));function checkType(e,t){switch(t){case JsonPropTypes.Boolean:return typeof e==="boolean";case JsonPropTypes.Number:return typeof e==="number";case JsonPropTypes.String:return typeof e==="string"}return true}function throwIfTypeIsWrong(e,t){if(!checkType(e,t)){throw new TypeError(`Value must be ${JsonPropTypes[t]}`)}}function isConvertible(e){if(e&&e.prototype){if(e.prototype.toJSON&&e.prototype.fromJSON){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&e.toJSON&&e.fromJSON)}}class JsonSchemaStorage{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t){throw new Error("Cannot get schema for current target")}return t}create(e){const t={names:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.names={};for(const e in r.names){t.names[e]=Object.assign({},r.names[e])}}t.target=e;return t}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const DEFAULT_SCHEMA="default";const schemaStorage=new JsonSchemaStorage;class PatternValidation{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!=="string"){throw new ValidationError("Incoming value must be string")}if(!t.exec(e)){throw new ValidationError(`Value doesn't match to pattern '${t.toString()}'`)}}}class InclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${e},${t}]`)}}}class ExclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${e},${t})`)}}}class LengthValidation{constructor(e,t,r){this.length=e;this.minLength=t;this.maxLength=r}validate(e){if(this.length!==undefined){if(e.length!==this.length){throw new ValidationError(`Value length must be exactly ${this.length}.`)}return}if(this.minLength!==undefined){if(e.length<this.minLength){throw new ValidationError(`Value length must be more than ${this.minLength}.`)}}if(this.maxLength!==undefined){if(e.length>this.maxLength){throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}}}}class EnumerationValidation{constructor(e){this.enumeration=e}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.String);if(!this.enumeration.includes(e)){throw new ValidationError(`Value must be one of ${this.enumeration.map((e=>`'${e}'`)).join(", ")}`)}}}class JsonTransform{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const n of r){for(const r of t.validations){if(r instanceof LengthValidation&&t.repeated){r.validate(e)}else{r.validate(n)}}}}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e)){throw new TypeError("Value must be Array")}if(typeof t.type==="number"){const r=Array.isArray(e)?e:[e];for(const e of r){throwIfTypeIsWrong(e,t.type)}}}static getSchemaByName(e,t=DEFAULT_SCHEMA){return{...e.names[DEFAULT_SCHEMA],...e.names[t]}}}class JsonSerializer extends JsonTransform{static serialize(e,t,r,n){const i=this.toJSON(e,t);return JSON.stringify(i,r,n)}static toJSON(e,t={}){let r;let n=t.targetSchema;const i=t.schemaName||DEFAULT_SCHEMA;if(isConvertible(e)){return e.toJSON()}if(Array.isArray(e)){r=[];for(const n of e){r.push(this.toJSON(n,t))}}else if(typeof e==="object"){if(n&&!schemaStorage.has(n)){throw new JsonError("Cannot get schema for `targetSchema` param")}n=n||e.constructor;if(schemaStorage.has(n)){const t=schemaStorage.get(n);r={};const s=this.getSchemaByName(t,i);for(const a in s){try{const t=s[a];const o=e[a];let f;if(t.optional&&o===undefined||t.defaultValue!==undefined&&o===t.defaultValue){continue}if(!t.optional&&o===undefined){throw new SerializerError(n.name,`Property '${a}' is required.`)}if(typeof t.type==="number"){if(t.converter){if(t.repeated){f=o.map((r=>t.converter.toJSON(r,e)))}else{f=t.converter.toJSON(o,e)}}else{f=o}}else{if(t.repeated){f=o.map((e=>this.toJSON(e,{schemaName:i})))}else{f=this.toJSON(o,{schemaName:i})}}this.checkTypes(f,t);this.checkValues(f,t);r[t.name||a]=f}catch(e){if(e instanceof SerializerError){throw e}else{throw new SerializerError(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}}}else{r={};for(const t in e){r[t]=this.toJSON(e[t],{schemaName:i})}}}else{r=e}return r}}class JsonParser extends JsonTransform{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const r=t.targetSchema;const n=t.schemaName||DEFAULT_SCHEMA;const i=new r;if(isConvertible(i)){return i.fromJSON(e)}const s=schemaStorage.get(r);const a=this.getSchemaByName(s,n);const o={};if(t.strictProperty&&!Array.isArray(e)){JsonParser.checkStrictProperty(e,a,s)}for(const r in a){try{const o=a[r];const f=o.name||r;const c=e[f];if(c===undefined&&(o.optional||o.defaultValue!==undefined)){continue}if(!o.optional&&c===undefined){throw new ParserError(s,`Property '${f}' is required.`)}this.checkTypes(c,o);this.checkValues(c,o);if(typeof o.type==="number"){if(o.converter){if(o.repeated){i[r]=c.map((e=>o.converter.fromJSON(e,i)))}else{i[r]=o.converter.fromJSON(c,i)}}else{i[r]=c}}else{const e={...t,targetSchema:o.type,schemaName:n};if(o.repeated){i[r]=c.map((t=>this.fromJSON(t,e)))}else{i[r]=this.fromJSON(c,e)}}}catch(e){if(!(e instanceof ParserError)){e=new ParserError(s,`Property '${r}' is wrong. ${e.message}`,e)}if(t.strictAllKeys){o[r]=e}else{throw e}}}const f=Object.keys(o);if(f.length){throw new KeyError(s,f,o)}return i}static checkStrictProperty(e,t,r){const n=Object.keys(e);const i=Object.keys(t);const s=[];for(const e of n){if(i.indexOf(e)===-1){s.push(e)}}if(s.length){throw new KeyError(r,s)}}}function getValidations(e){const t=[];if(e.pattern){t.push(new PatternValidation(e.pattern))}if(e.type===JsonPropTypes.Number||e.type===JsonPropTypes.Any){if(e.minInclusive!==undefined||e.maxInclusive!==undefined){t.push(new InclusiveValidation(e.minInclusive,e.maxInclusive))}if(e.minExclusive!==undefined||e.maxExclusive!==undefined){t.push(new ExclusiveValidation(e.minExclusive,e.maxExclusive))}if(e.enumeration!==undefined){t.push(new EnumerationValidation(e.enumeration))}}if(e.type===JsonPropTypes.String||e.repeated||e.type===JsonPropTypes.Any){if(e.length!==undefined||e.minLength!==undefined||e.maxLength!==undefined){t.push(new LengthValidation(e.length,e.minLength,e.maxLength))}}return t}const JsonProp=(e={})=>(t,r)=>{const n=`Cannot set type for ${r} property of ${t.constructor.name} schema`;let i;if(!schemaStorage.has(t.constructor)){i=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,i)}else{i=schemaStorage.get(t.constructor);if(i.target!==t.constructor){i=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,i)}}const s={type:JsonPropTypes.Any,validations:[]};const a=Object.assign(s,e);a.validations=getValidations(a);if(typeof a.type!=="number"){if(!schemaStorage.has(a.type)&&!isConvertible(a.type)){throw new Error(`${n}. Assigning type doesn't have schema.`)}}let o;if(Array.isArray(e.schema)){o=e.schema}else{o=[e.schema||DEFAULT_SCHEMA]}for(const e of o){if(!i.names[e]){i.names[e]={}}const t=i.names[e];t[r]=a}};const index_es=Object.freeze({__proto__:null,JsonError,JsonParser,JsonProp,get JsonPropTypes(){return JsonPropTypes},JsonSerializer,KeyError,ParserError,SerializerError,TransformError,ValidationError});
/*!
 Copyright (c) Peculiar Ventures, LLC
*/class CryptoError extends Error{}class AlgorithmError extends CryptoError{}class UnsupportedOperationError extends CryptoError{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class OperationError extends CryptoError{}class RequiredPropertyError extends CryptoError{constructor(e){super(`${e}: Missing required property`)}}class PemConverter{static toArrayBuffer(e){const t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return build$1.Convert.FromBase64(t)}static toUint8Array(e){const t=this.toArrayBuffer(e);return new Uint8Array(t)}static fromBufferSource(e,t){const r=build$1.Convert.ToBase64(e);let n;let i=0;const s=[];while(true){n=r.slice(i,i=i+64);if(n.length){s.push(n);if(n.length<64){break}}else{break}}const a=t.toUpperCase();return`-----BEGIN ${a}-----\n${s.join("\n")}\n-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+\/\+\=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e)){throw new Error("Bad parameter. Incoming data is not right PEM")}const t=/-----BEGIN (.+)-----/.exec(e);if(!t){throw new Error("Cannot get tag from PEM")}return t[1]}static hasTagName(e,t){const r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}}function isJWK(e){return typeof e==="object"&&"kty"in e}class ProviderCrypto{async digest(...e){this.checkDigest.apply(this,e);return this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new UnsupportedOperationError("digest")}async generateKey(...e){this.checkGenerateKey.apply(this,e);return this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){this.checkAlgorithmName(e);this.checkGenerateKeyParams(e);if(!(r&&r.length)){throw new TypeError(`Usages cannot be empty when creating a key.`)}let i;if(Array.isArray(this.usages)){i=this.usages}else{i=this.usages.privateKey.concat(this.usages.publicKey)}this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new UnsupportedOperationError("generateKey")}async sign(...e){this.checkSign.apply(this,e);return this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new UnsupportedOperationError("sign")}async verify(...e){this.checkVerify.apply(this,e);return this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...i){throw new UnsupportedOperationError("verify")}async encrypt(...e){this.checkEncrypt.apply(this,e);return this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new UnsupportedOperationError("encrypt")}async decrypt(...e){this.checkDecrypt.apply(this,e);return this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new UnsupportedOperationError("decrypt")}async deriveBits(...e){this.checkDeriveBits.apply(this,e);return this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0);if(r%8!==0){throw new OperationError("length: Is not multiple of 8")}}async onDeriveBits(e,t,r,...n){throw new UnsupportedOperationError("deriveBits")}async exportKey(...e){this.checkExportKey.apply(this,e);return this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){this.checkKeyFormat(e);this.checkCryptoKey(t);if(!t.extractable){throw new CryptoError("key: Is not extractable")}}async onExportKey(e,t,...r){throw new UnsupportedOperationError("exportKey")}async importKey(...e){this.checkImportKey.apply(this,e);return this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i,...s){this.checkKeyFormat(e);this.checkKeyData(e,t);this.checkAlgorithmName(r);this.checkImportParams(r);if(Array.isArray(this.usages)){this.checkKeyUsages(i,this.usages)}}async onImportKey(e,t,r,n,i,...s){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase()){throw new AlgorithmError("Unrecognized name")}}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e){if(t.indexOf(r)===-1){throw new TypeError("Cannot create a key using the specified key usages")}}}checkCryptoKey(e,t){this.checkAlgorithmName(e.algorithm);if(t&&e.usages.indexOf(t)===-1){throw new CryptoError(`key does not match that of operation`)}}checkRequiredProperty(e,t){if(!(t in e)){throw new RequiredPropertyError(t)}}checkHashAlgorithm(e,t){for(const r of t){if(r.toLowerCase()===e.name.toLowerCase()){return}}throw new OperationError(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t){throw new TypeError("keyData: Cannot be empty on empty on key importing")}if(e==="jwk"){if(!isJWK(t)){throw new TypeError("keyData: Is not JsonWebToken")}}else if(!build$1.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}}prepareData(e){return build$1.BufferSourceConverter.toArrayBuffer(e)}}class AesProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class AesCbcProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CBC";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}}}class AesCmacProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CMAC";this.usages=["sign","verify"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesCtrProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-CTR";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"counter");if(!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter))){throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.counter.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesEcbProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-ECB";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class AesGcmProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-GCM";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength<1){throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1")}if(!("tagLength"in e)){e.tagLength=128}switch(e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class AesKwProvider extends AesProvider{constructor(){super(...arguments);this.name="AES-KW";this.usages=["wrapKey","unwrapKey"]}}class DesProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==this.ivSize){throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}if(e.length!==this.keySizeBits){throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class RsaProvider extends ProviderCrypto{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=build$1.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");if(e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384){throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class RsaSsaProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSASSA-PKCS1-v1_5";this.usages={privateKey:["sign"],publicKey:["verify"]}}}class RsaPssProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-PSS";this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"saltLength");if(typeof e.saltLength!=="number"){throw new TypeError("saltLength: Is not a Number")}if(e.saltLength<0){throw new RangeError("saltLength: Must be positive number")}}}class RsaOaepProvider extends RsaProvider{constructor(){super(...arguments);this.name="RSA-OAEP";this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label))){throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}}class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve");this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves){if(t.toLowerCase()===e.toLowerCase()){return}}throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class EcdsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDSA";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}const KEY_TYPES=["secret","private","public"];class CryptoKey{static create(e,t,r,n){const i=new this;i.algorithm=e;i.type=t;i.extractable=r;i.usages=n;return i}static isKeyType(e){return KEY_TYPES.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}}class EcdhProvider extends EllipticProvider{constructor(){super(...arguments);this.name="ECDH";this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public");if(!(e.public instanceof CryptoKey)){throw new TypeError("public: Is not a CryptoKey")}if(e.public.type!=="public"){throw new OperationError("public: Is not a public key")}if(e.public.algorithm.name!==this.name){throw new OperationError(`public: Is not ${this.name} key`)}}}class EcdhEsProvider extends EcdhProvider{constructor(){super(...arguments);this.name="ECDH-ES";this.namedCurves=["X25519","X448"]}}class EdDsaProvider extends EllipticProvider{constructor(){super(...arguments);this.name="EdDSA";this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["Ed25519","Ed448"]}}let ObjectIdentifier=class e{constructor(e){if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ObjectIdentifier.prototype,"value",void 0);ObjectIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],ObjectIdentifier);class AlgorithmIdentifier{constructor(e){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier.prototype,"parameters",void 0);class PrivateKeyInfo{constructor(){this.version=0;this.privateKeyAlgorithm=new AlgorithmIdentifier;this.privateKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],PrivateKeyInfo.prototype,"attributes",void 0);class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier;this.publicKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);const JsonBase64UrlArrayBufferConverter={fromJSON:e=>build$1.Convert.FromBase64Url(e),toJSON:e=>build$1.Convert.ToBase64Url(new Uint8Array(e))};const AsnIntegerArrayBufferConverter={fromASN:e=>{const t=e.valueBlock.valueHex;return!new Uint8Array(t)[0]?e.valueBlock.valueHex.slice(1):e.valueBlock.valueHex},toASN:e=>{const t=new Uint8Array(e)[0]>127?build$1.combine(new Uint8Array([0]).buffer,e):e;return new Integer({valueHex:t})}};var index$3=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter,JsonBase64UrlArrayBufferConverter});class RsaPrivateKey{constructor(){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"d",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"p",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"q",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dp",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dq",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"qi",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"publicExponent",void 0);let EcPublicKey=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4){throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point")}e=new Uint8Array(this.value.slice(1));const t=e.length/2;const r=0;const n={x:build$1.Convert.ToBase64Url(e.buffer.slice(r,r+t)),y:build$1.Convert.ToBase64Url(e.buffer.slice(r+t,r+t+t))};return n}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}if(!("y"in e)){throw new Error("y: Missing required property")}const t=build$1.Convert.FromBase64Url(e.x);const r=build$1.Convert.FromBase64Url(e.y);const n=build$1.combine(new Uint8Array([4]).buffer,t,r);this.value=new Uint8Array(n).buffer;return this}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPublicKey.prototype,"value",void 0);EcPublicKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EcPublicKey);class EcPrivateKey{constructor(){this.version=1;this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e)){throw new Error("d: Missing required property")}this.privateKey=build$1.Convert.FromBase64Url(e.d);if("x"in e){const t=new EcPublicKey;t.fromJSON(e);const r=AsnSerializer.toASN(t);if("valueHex"in r.valueBlock){this.publicKey=r.valueBlock.valueHex}}return this}toJSON(){const e={};e.d=build$1.Convert.ToBase64Url(this.privateKey);if(this.publicKey){Object.assign(e,new EcPublicKey(this.publicKey).toJSON())}return e}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({context:0,type:AsnPropTypes.Any,optional:true})],EcPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({context:1,type:AsnPropTypes.BitString,optional:true})],EcPrivateKey.prototype,"publicKey",void 0);const AsnIntegerWithoutPaddingConverter={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return t[0]===0?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);e.set(t,1);return new Integer({valueHex:e.buffer})}return new Integer({valueHex:e})}};var index$2=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter});class EcUtils{static decodePoint(e,t){const r=build$1.BufferSourceConverter.toUint8Array(e);if(r.length===0||r[0]!==4){throw new Error("Only uncompressed point format supported")}const n=(r.length-1)/2;if(n!==Math.ceil(t/8)){throw new Error("Point does not match field size")}const i=r.slice(1,n+1);const s=r.slice(n+1,n+1+n);return{x:i,y:s}}static encodePoint(e,t){const r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r){throw new Error("X,Y coordinates don't match point size criteria")}const n=build$1.BufferSourceConverter.toUint8Array(e.x);const i=build$1.BufferSourceConverter.toUint8Array(e.y);const s=new Uint8Array(r*2+1);s[0]=4;s.set(n,1);s.set(i,r+1);return s}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){const r=this.getSize(t);const n=build$1.BufferSourceConverter.toUint8Array(e.r);const i=build$1.BufferSourceConverter.toUint8Array(e.s);const s=new Uint8Array(r*2);s.set(this.padStart(n,r));s.set(this.padStart(i,r),r);return s}static decodeSignature(e,t){const r=this.getSize(t);const n=build$1.BufferSourceConverter.toUint8Array(e);if(n.length!==r*2){throw new Error("Incorrect size of the signature")}const i=n.slice(0,r);const s=n.slice(r);return{r:this.trimStart(i),s:this.trimStart(s)}}static trimStart(e){let t=0;while(t<e.length-1&&e[t]===0){t++}if(t===0){return e}return e.slice(t,e.length)}static padStart(e,t){if(t===e.length){return e}const r=new Uint8Array(t);r.set(e,t-e.length);return r}}class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=e.byteLength/2;const r=EcUtils.decodeSignature(e,t*8);const n=new EcDsaSignature;n.r=build$1.BufferSourceConverter.toArrayBuffer(r.r);n.s=build$1.BufferSourceConverter.toArrayBuffer(r.s);return n}toWebCryptoSignature(e){e!==null&&e!==void 0?e:e=Math.max(this.r.byteLength,this.s.byteLength)*8;const t=EcUtils.encodeSignature(this,e);return t.buffer}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"s",void 0);class OneAsymmetricKey extends PrivateKeyInfo{}__decorate([AsnProp({context:1,implicit:true,type:AsnPropTypes.BitString,optional:true})],OneAsymmetricKey.prototype,"publicKey",void 0);let EdPrivateKey=class e{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d){throw new Error("d: Missing required property")}this.value=build$1.Convert.FromBase64Url(e.d);return this}toJSON(){const e={d:build$1.Convert.ToBase64Url(this.value)};return e}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EdPrivateKey.prototype,"value",void 0);EdPrivateKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPrivateKey);let EdPublicKey=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){const e={x:build$1.Convert.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}this.value=build$1.Convert.FromBase64Url(e.x);return this}};__decorate([AsnProp({type:AsnPropTypes.BitString})],EdPublicKey.prototype,"value",void 0);EdPublicKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPublicKey);let CurvePrivateKey=class e{};__decorate([AsnProp({type:AsnPropTypes.OctetString}),JsonProp({type:JsonPropTypes.String,converter:JsonBase64UrlArrayBufferConverter})],CurvePrivateKey.prototype,"d",void 0);CurvePrivateKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],CurvePrivateKey);const idSecp256r1="1.2.840.10045.3.1.7";const idEllipticCurve="1.3.132.0";const idSecp384r1=`${idEllipticCurve}.34`;const idSecp521r1=`${idEllipticCurve}.35`;const idSecp256k1=`${idEllipticCurve}.10`;const idVersionOne="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1=`${idVersionOne}.1`;const idBrainpoolP160t1=`${idVersionOne}.2`;const idBrainpoolP192r1=`${idVersionOne}.3`;const idBrainpoolP192t1=`${idVersionOne}.4`;const idBrainpoolP224r1=`${idVersionOne}.5`;const idBrainpoolP224t1=`${idVersionOne}.6`;const idBrainpoolP256r1=`${idVersionOne}.7`;const idBrainpoolP256t1=`${idVersionOne}.8`;const idBrainpoolP320r1=`${idVersionOne}.9`;const idBrainpoolP320t1=`${idVersionOne}.10`;const idBrainpoolP384r1=`${idVersionOne}.11`;const idBrainpoolP384t1=`${idVersionOne}.12`;const idBrainpoolP512r1=`${idVersionOne}.13`;const idBrainpoolP512t1=`${idVersionOne}.14`;const idX25519="1.3.101.110";const idX448="1.3.101.111";const idEd25519="1.3.101.112";const idEd448="1.3.101.113";var index$1=Object.freeze({__proto__:null,AlgorithmIdentifier,get CurvePrivateKey(){return CurvePrivateKey},EcDsaSignature,EcPrivateKey,get EcPublicKey(){return EcPublicKey},get EdPrivateKey(){return EdPrivateKey},get EdPublicKey(){return EdPublicKey},get ObjectIdentifier(){return ObjectIdentifier},OneAsymmetricKey,PrivateKeyInfo,PublicKeyInfo,RsaPrivateKey,RsaPublicKey,converters:index$2,idBrainpoolP160r1,idBrainpoolP160t1,idBrainpoolP192r1,idBrainpoolP192t1,idBrainpoolP224r1,idBrainpoolP224t1,idBrainpoolP256r1,idBrainpoolP256t1,idBrainpoolP320r1,idBrainpoolP320t1,idBrainpoolP384r1,idBrainpoolP384t1,idBrainpoolP512r1,idBrainpoolP512t1,idEd25519,idEd448,idEllipticCurve,idSecp256k1,idSecp256r1,idSecp384r1,idSecp521r1,idVersionOne,idX25519,idX448});class EcCurves{constructor(){}static register(e){const t=new ObjectIdentifier;t.value=e.id;const r=AsnConvert.serialize(t);this.items.push({...e,raw:r});this.names.push(e.name)}static find(e){e=e.toUpperCase();for(const t of this.items){if(t.name.toUpperCase()===e||t.id.toUpperCase()===e){return t}}return null}static get(e){const t=this.find(e);if(!t){throw new Error(`Unsupported EC named curve '${e}'`)}return t}}EcCurves.items=[];EcCurves.names=[];EcCurves.register({name:"P-256",id:idSecp256r1,size:256});EcCurves.register({name:"P-384",id:idSecp384r1,size:384});EcCurves.register({name:"P-521",id:idSecp521r1,size:521});EcCurves.register({name:"K-256",id:idSecp256k1,size:256});EcCurves.register({name:"brainpoolP160r1",id:idBrainpoolP160r1,size:160});EcCurves.register({name:"brainpoolP160t1",id:idBrainpoolP160t1,size:160});EcCurves.register({name:"brainpoolP192r1",id:idBrainpoolP192r1,size:192});EcCurves.register({name:"brainpoolP192t1",id:idBrainpoolP192t1,size:192});EcCurves.register({name:"brainpoolP224r1",id:idBrainpoolP224r1,size:224});EcCurves.register({name:"brainpoolP224t1",id:idBrainpoolP224t1,size:224});EcCurves.register({name:"brainpoolP256r1",id:idBrainpoolP256r1,size:256});EcCurves.register({name:"brainpoolP256t1",id:idBrainpoolP256t1,size:256});EcCurves.register({name:"brainpoolP320r1",id:idBrainpoolP320r1,size:320});EcCurves.register({name:"brainpoolP320t1",id:idBrainpoolP320t1,size:320});EcCurves.register({name:"brainpoolP384r1",id:idBrainpoolP384r1,size:384});EcCurves.register({name:"brainpoolP384t1",id:idBrainpoolP384t1,size:384});EcCurves.register({name:"brainpoolP512r1",id:idBrainpoolP512r1,size:512});EcCurves.register({name:"brainpoolP512t1",id:idBrainpoolP512t1,size:512});class HmacProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HMAC";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);if("length"in e){if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new RangeError("length: Number is out of range")}}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Pbkdf2Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="PBKDF2";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt))){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"iterations");if(typeof e.iterations!=="number"){throw new TypeError("iterations: Is not a Number")}if(e.iterations<1){throw new TypeError("iterations: Is less than 1")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class HkdfProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="HKDF";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!build$1.BufferSourceConverter.isBufferSource(e.salt)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"info");if(!build$1.BufferSourceConverter.isBufferSource(e.info)){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}checkImportKey(e,t,r,n,i,...s){super.checkImportKey(e,t,r,n,i);if(n){throw new SyntaxError("extractable: Must be 'false'")}}}class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=[];this.defaultLength=0}digest(...e){e[0]={length:this.defaultLength,...e[0]};return super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);const r=e.length||0;if(typeof r!=="number"){throw new TypeError("length: Is not a Number")}if(r<0){throw new TypeError("length: Is negative")}}}class Shake128Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake128";this.defaultLength=16}}class Shake256Provider extends ShakeProvider{constructor(){super(...arguments);this.name="shake256";this.defaultLength=32}}class Crypto{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){const e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64;e[8]=e[8]&63|128;const t=build$1.Convert.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class ProviderStorage{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());if(t){delete this.items[e]}return t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}}class SubtleCrypto{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(e){return e&&typeof e==="object"&&"name"in e&&"hash"in e?true:false}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r,...n]=e;const i=this.prepareAlgorithm(t);const s=build$1.BufferSourceConverter.toArrayBuffer(r);const a=this.getProvider(i.name);const o=await a.digest(i,s,...n);return o}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,n,...i]=e;const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.generateKey({...s,name:a.name},r,n,...i);return o}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build$1.BufferSourceConverter.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.sign({...s,name:o.name},r,a,...i);return f}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,n,i,...s]=e;this.checkCryptoKey(r);const a=this.prepareAlgorithm(t);const o=build$1.BufferSourceConverter.toArrayBuffer(i);const f=build$1.BufferSourceConverter.toArrayBuffer(n);const c=this.getProvider(a.name);const u=await c.verify({...a,name:c.name},r,f,o,...s);return u}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build$1.BufferSourceConverter.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.encrypt({...s,name:o.name},r,a,{keyUsage:true},...i);return f}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build$1.BufferSourceConverter.toArrayBuffer(n);const o=this.getProvider(s.name);const f=await o.decrypt({...s,name:o.name},r,a,{keyUsage:true},...i);return f}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,n,...i]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.deriveBits({...s,name:a.name},r,n,{keyUsage:true},...i);return o}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,n,i,s,...a]=e;const o=this.prepareAlgorithm(n);const f=this.getProvider(o.name);f.checkDerivedKeyParams(o);const c=this.prepareAlgorithm(t);const u=this.getProvider(c.name);u.checkCryptoKey(r,"deriveKey");const l=await u.deriveBits({...c,name:u.name},r,n.length||512,{keyUsage:false},...a);return this.importKey("raw",l,n,i,s,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r,...n]=e;this.checkCryptoKey(r);const i=this.getProvider(r.algorithm.name);const s=await i.exportKey(t,r,...n);return s}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,n,i,s,...a]=e;const o=this.prepareAlgorithm(n);const f=this.getProvider(o.name);if(["pkcs8","spki","raw"].indexOf(t)!==-1){const e=build$1.BufferSourceConverter.toArrayBuffer(r);return f.importKey(t,e,{...o,name:f.name},i,s,...a)}else{if(!r.kty){throw new TypeError("keyData: Is not JSON")}}return f.importKey(t,r,{...o,name:f.name},i,s,...a)}async wrapKey(e,t,r,n,...i){let s=await this.exportKey(e,t,...i);if(e==="jwk"){const e=JSON.stringify(s);s=build$1.Convert.FromUtf8String(e)}const a=this.prepareAlgorithm(n);const o=build$1.BufferSourceConverter.toArrayBuffer(s);const f=this.getProvider(a.name);return f.encrypt({...a,name:f.name},r,o,{keyUsage:false},...i)}async unwrapKey(e,t,r,n,i,s,a,...o){const f=this.prepareAlgorithm(n);const c=build$1.BufferSourceConverter.toArrayBuffer(t);const u=this.getProvider(f.name);let l=await u.decrypt({...f,name:u.name},r,c,{keyUsage:false},...o);if(e==="jwk"){try{l=JSON.parse(build$1.Convert.ToUtf8String(l))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");t.internal=e;throw t}}return this.importKey(e,l,i,s,a,...o)}checkRequiredArguments(e,t,r){if(e.length<t){throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}}prepareAlgorithm(e){if(typeof e==="string"){return{name:e}}if(SubtleCrypto.isHashedAlgorithm(e)){const t={...e};t.hash=this.prepareAlgorithm(e.hash);return t}return{...e}}getProvider(e){const t=this.providers.get(e);if(!t){throw new AlgorithmError("Unrecognized name")}return t}checkCryptoKey(e){if(!(e instanceof CryptoKey)){throw new TypeError(`Key is not of type 'CryptoKey'`)}}}var index=Object.freeze({__proto__:null,converters:index$3});const REQUIRED_FIELDS=["crv","e","k","kty","n","x","y"];class JwkUtils{static async thumbprint(e,t,r){const n=this.format(t,true);return r.subtle.digest(e,build$1.Convert.FromBinary(JSON.stringify(n)))}static format(e,t=false){let r=Object.entries(e);if(t){r=r.filter((e=>REQUIRED_FIELDS.includes(e[0])))}r=r.sort((([e],[t])=>e>t?1:e<t?-1:0));return Object.fromEntries(r)}}const webcryptoCore_es=Object.freeze({__proto__:null,AesCbcProvider,AesCmacProvider,AesCtrProvider,AesEcbProvider,AesGcmProvider,AesKwProvider,AesProvider,AlgorithmError,Crypto,CryptoError,CryptoKey,DesProvider,EcCurves,EcUtils,EcdhEsProvider,EcdhProvider,EcdsaProvider,EdDsaProvider,EllipticProvider,HkdfProvider,HmacProvider,JwkUtils,OperationError,Pbkdf2Provider,PemConverter,ProviderCrypto,ProviderStorage,RequiredPropertyError,RsaOaepProvider,RsaProvider,RsaPssProvider,RsaSsaProvider,Shake128Provider,Shake256Provider,ShakeProvider,SubtleCrypto,UnsupportedOperationError,asn1:index$1,isJWK,json:index,BufferSourceConverter:build$1.BufferSourceConverter});const local_atob=typeof atob==="undefined"?e=>Buffer.from(e,"base64").toString("binary"):atob;const local_btoa=typeof btoa==="undefined"?e=>Buffer.from(e,"binary").toString("base64"):btoa;function string_to_bytes(e,t=false){var r=e.length,n=new Uint8Array(t?4*r:r);for(var i=0,s=0;i<r;i++){var a=e.charCodeAt(i);if(t&&55296<=a&&a<=56319){if(++i>=r)throw new Error("Malformed string, low surrogate expected at position "+i);a=(a^55296)<<10|65536|e.charCodeAt(i)^56320}else if(!t&&a>>>8){throw new Error("Wide characters are not allowed.")}if(!t||a<=127){n[s++]=a}else if(a<=2047){n[s++]=192|a>>6;n[s++]=128|a&63}else if(a<=65535){n[s++]=224|a>>12;n[s++]=128|a>>6&63;n[s++]=128|a&63}else{n[s++]=240|a>>18;n[s++]=128|a>>12&63;n[s++]=128|a>>6&63;n[s++]=128|a&63}}return n.subarray(0,s)}function hex_to_bytes(e){var t=e.length;if(t&1){e="0"+e;t++}var r=new Uint8Array(t>>1);for(var n=0;n<t;n+=2){r[n>>1]=parseInt(e.substr(n,2),16)}return r}function base64_to_bytes(e){return string_to_bytes(local_atob(e))}function bytes_to_string(e,t=false){var r=e.length,n=new Array(r);for(var i=0,s=0;i<r;i++){var a=e[i];if(!t||a<128){n[s++]=a}else if(a>=192&&a<224&&i+1<r){n[s++]=(a&31)<<6|e[++i]&63}else if(a>=224&&a<240&&i+2<r){n[s++]=(a&15)<<12|(e[++i]&63)<<6|e[++i]&63}else if(a>=240&&a<248&&i+3<r){var o=(a&7)<<18|(e[++i]&63)<<12|(e[++i]&63)<<6|e[++i]&63;if(o<=65535){n[s++]=o}else{o^=65536;n[s++]=55296|o>>10;n[s++]=56320|o&1023}}else{throw new Error("Malformed UTF8 character at byte offset "+i)}}var f="",c=16384;for(var i=0;i<s;i+=c){f+=String.fromCharCode.apply(String,n.slice(i,i+c<=s?i+c:s))}return f}function bytes_to_hex(e){var t="";for(var r=0;r<e.length;r++){var n=(e[r]&255).toString(16);if(n.length<2)t+="0";t+=n}return t}function bytes_to_base64(e){return local_btoa(bytes_to_string(e))}function is_bytes(e){return e instanceof Uint8Array}function _heap_init(e,t){const r=e?e.byteLength:t||65536;if(r&4095||r<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");e=e||new Uint8Array(new ArrayBuffer(r));return e}function _heap_write(e,t,r,n,i){const s=e.length-t;const a=s<i?s:i;e.set(r.subarray(n,n+a),t);return a}function joinBytes(...e){const t=e.reduce(((e,t)=>e+t.length),0);const r=new Uint8Array(t);let n=0;for(let t=0;t<e.length;t++){r.set(e[t],n);n+=e[t].length}return r}class IllegalStateError extends Error{constructor(...e){super(...e)}}class IllegalArgumentError extends Error{constructor(...e){super(...e)}}class SecurityError extends Error{constructor(...e){super(...e)}}
/**
 * @file {@link http://asmjs.org Asm.js} implementation of the {@link https://en.wikipedia.org/wiki/Advanced_Encryption_Standard Advanced Encryption Standard}.
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */var AES_asm=function(){var e=false;var t,r;function n(){t=[],r=[];var n=1,i,s;for(i=0;i<255;i++){t[i]=n;s=n&128,n<<=1,n&=255;if(s===128)n^=27;n^=t[i];r[t[i]]=i}t[255]=t[0];r[0]=0;e=true}function i(e,n){var i=t[(r[e]+r[n])%255];if(e===0||n===0)i=0;return i}function s(e){var n=t[255-r[e]];if(e===0)n=0;return n}var a=false;var o;var f;var c;var u;function l(){if(!e)n();function t(e){var t,r,n;r=n=s(e);for(t=0;t<4;t++){r=(r<<1|r>>>7)&255;n^=r}n^=99;return n}o=[],f=[],c=[[],[],[],[]],u=[[],[],[],[]];for(var r=0;r<256;r++){var l=t(r);o[r]=l;f[l]=r;c[0][r]=i(2,l)<<24|l<<16|l<<8|i(3,l);u[0][l]=i(14,r)<<24|i(9,r)<<16|i(13,r)<<8|i(11,r);for(var h=1;h<4;h++){c[h][r]=c[h-1][r]>>>8|c[h-1][r]<<24;u[h][l]=u[h-1][l]>>>8|u[h-1][l]<<24}}a=true}var h=function(e,t){if(!a)l();var r=new Uint32Array(t);r.set(o,2048>>2);r.set(f,3072>>2);for(var n=0;n<4;n++){r.set(c[n],4096+1024*n>>2);r.set(u[n],8192+1024*n>>2)}function i(e,t,n,i,s,a,f,c,l){var d=r.subarray(0,60),p=r.subarray(256,256+60);d.set([t,n,i,s,a,f,c,l]);for(var y=e,m=1;y<4*e+28;y++){var g=d[y-1];if(y%e===0||e===8&&y%e===4){g=o[g>>>24]<<24^o[g>>>16&255]<<16^o[g>>>8&255]<<8^o[g&255]}if(y%e===0){g=g<<8^g>>>24^m<<24;m=m<<1^(m&128?27:0)}d[y]=d[y-e]^g}for(var b=0;b<y;b+=4){for(var v=0;v<4;v++){var g=d[y-(4+b)+(4-v)%4];if(b<4||b>=y-4){p[b+v]=g}else{p[b+v]=u[0][o[g>>>24]]^u[1][o[g>>>16&255]]^u[2][o[g>>>8&255]]^u[3][o[g&255]]}}}h.set_rounds(e+5)}var s={Uint8Array,Uint32Array};var h=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0;var S=new e.Uint32Array(r),$=new e.Uint8Array(r);function T(e,t,r,o,f,c,u,l){e=e|0;t=t|0;r=r|0;o=o|0;f=f|0;c=c|0;u=u|0;l=l|0;var h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0;h=r|0x400,d=r|0x800,p=r|0xc00;f=f^S[(e|0)>>2],c=c^S[(e|4)>>2],u=u^S[(e|8)>>2],l=l^S[(e|12)>>2];for(v=16;(v|0)<=o<<4;v=v+16|0){y=S[(r|f>>22&1020)>>2]^S[(h|c>>14&1020)>>2]^S[(d|u>>6&1020)>>2]^S[(p|l<<2&1020)>>2]^S[(e|v|0)>>2],m=S[(r|c>>22&1020)>>2]^S[(h|u>>14&1020)>>2]^S[(d|l>>6&1020)>>2]^S[(p|f<<2&1020)>>2]^S[(e|v|4)>>2],g=S[(r|u>>22&1020)>>2]^S[(h|l>>14&1020)>>2]^S[(d|f>>6&1020)>>2]^S[(p|c<<2&1020)>>2]^S[(e|v|8)>>2],b=S[(r|l>>22&1020)>>2]^S[(h|f>>14&1020)>>2]^S[(d|c>>6&1020)>>2]^S[(p|u<<2&1020)>>2]^S[(e|v|12)>>2];f=y,c=m,u=g,l=b}n=S[(t|f>>22&1020)>>2]<<24^S[(t|c>>14&1020)>>2]<<16^S[(t|u>>6&1020)>>2]<<8^S[(t|l<<2&1020)>>2]^S[(e|v|0)>>2],i=S[(t|c>>22&1020)>>2]<<24^S[(t|u>>14&1020)>>2]<<16^S[(t|l>>6&1020)>>2]<<8^S[(t|f<<2&1020)>>2]^S[(e|v|4)>>2],s=S[(t|u>>22&1020)>>2]<<24^S[(t|l>>14&1020)>>2]<<16^S[(t|f>>6&1020)>>2]<<8^S[(t|c<<2&1020)>>2]^S[(e|v|8)>>2],a=S[(t|l>>22&1020)>>2]<<24^S[(t|f>>14&1020)>>2]<<16^S[(t|c>>6&1020)>>2]<<8^S[(t|u<<2&1020)>>2]^S[(e|v|12)>>2]}function C(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;T(0x0000,0x0800,0x1000,_,e,t,r,n)}function P(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0;T(0x0400,0x0c00,0x2000,_,e,n,r,t);s=i,i=a,a=s}function x(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o^e,f^t,c^r,u^l);o=n,f=i,c=s,u=a}function I(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;var h=0;T(0x0400,0x0c00,0x2000,_,e,l,r,t);h=i,i=a,a=h;n=n^o,i=i^f,s=s^c,a=a^u;o=e,f=t,c=r,u=l}function k(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);o=n=n^e,f=i=i^t,c=s=s^r,u=a=a^l}function N(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);n=n^e,i=i^t,s=s^r,a=a^l;o=e,f=t,c=r,u=l}function R(e,t,r,l){e=e|0;t=t|0;r=r|0;l=l|0;T(0x0000,0x0800,0x1000,_,o,f,c,u);o=n,f=i,c=s,u=a;n=n^e,i=i^t,s=s^r,a=a^l}function M(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;T(0x0000,0x0800,0x1000,_,l,h,d,p);p=~b&p|b&p+1;d=~g&d|g&d+((p|0)==0);h=~m&h|m&h+((d|0)==0);l=~y&l|y&l+((h|0)==0);n=n^e;i=i^t;s=s^r;a=a^o}function O(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var i=0,s=0,a=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0;e=e^o,t=t^f,r=r^c,n=n^u;i=v|0,s=w|0,a=A|0,l=E|0;for(;(m|0)<128;m=m+1|0){if(i>>>31){h=h^e,d=d^t,p=p^r,y=y^n}i=i<<1|s>>>31,s=s<<1|a>>>31,a=a<<1|l>>>31,l=l<<1;g=n&1;n=n>>>1|r<<31,r=r>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(g)e=e^0xe1000000}o=h,f=d,c=p,u=y}function B(e){e=e|0;_=e}function D(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;n=e,i=t,s=r,a=o}function U(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;o=e,f=t,c=r,u=n}function L(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;l=e,h=t,d=r,p=n}function F(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;y=e,m=t,g=r,b=n}function j(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;p=~b&p|b&n,d=~g&d|g&r,h=~m&h|m&t,l=~y&l|y&e}function H(e){e=e|0;if(e&15)return-1;$[e|0]=n>>>24,$[e|1]=n>>>16&255,$[e|2]=n>>>8&255,$[e|3]=n&255,$[e|4]=i>>>24,$[e|5]=i>>>16&255,$[e|6]=i>>>8&255,$[e|7]=i&255,$[e|8]=s>>>24,$[e|9]=s>>>16&255,$[e|10]=s>>>8&255,$[e|11]=s&255,$[e|12]=a>>>24,$[e|13]=a>>>16&255,$[e|14]=a>>>8&255,$[e|15]=a&255;return 16}function K(e){e=e|0;if(e&15)return-1;$[e|0]=o>>>24,$[e|1]=o>>>16&255,$[e|2]=o>>>8&255,$[e|3]=o&255,$[e|4]=f>>>24,$[e|5]=f>>>16&255,$[e|6]=f>>>8&255,$[e|7]=f&255,$[e|8]=c>>>24,$[e|9]=c>>>16&255,$[e|10]=c>>>8&255,$[e|11]=c&255,$[e|12]=u>>>24,$[e|13]=u>>>16&255,$[e|14]=u>>>8&255,$[e|15]=u&255;return 16}function G(){C(0,0,0,0);v=n,w=i,A=s,E=a}function V(e,t,r){e=e|0;t=t|0;r=r|0;var o=0;if(t&15)return-1;while((r|0)>=16){W[e&7]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);$[t|0]=n>>>24,$[t|1]=n>>>16&255,$[t|2]=n>>>8&255,$[t|3]=n&255,$[t|4]=i>>>24,$[t|5]=i>>>16&255,$[t|6]=i>>>8&255,$[t|7]=i&255,$[t|8]=s>>>24,$[t|9]=s>>>16&255,$[t|10]=s>>>8&255,$[t|11]=s&255,$[t|12]=a>>>24,$[t|13]=a>>>16&255,$[t|14]=a>>>8&255,$[t|15]=a&255;o=o+16|0,t=t+16|0,r=r-16|0}return o|0}function z(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;if(t&15)return-1;while((r|0)>=16){X[e&1]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);n=n+16|0,t=t+16|0,r=r-16|0}return n|0}var W=[C,P,x,I,k,N,R,M];var X=[x,O];return{set_rounds:B,set_state:D,set_iv:U,set_nonce:L,set_mask:F,set_counter:j,get_state:H,get_iv:K,gcm_init:G,cipher:V,mac:z}}(s,e,t);h.set_key=i;return h};h.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},h.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},h.MAC={CBC:0,GCM:1};h.HEAP_DATA=16384;return h}();class AES{constructor(e,t,r=true,n){this.pos=0;this.len=0;this.mode=n;this.heap=_heap_init().subarray(AES_asm.HEAP_DATA);this.asm=new AES_asm(null,this.heap.buffer);this.pos=0;this.len=0;const i=e.length;if(i!==16&&i!==24&&i!==32)throw new IllegalArgumentError("illegal key size");const s=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(i>>2,s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12),i>16?s.getUint32(16):0,i>16?s.getUint32(20):0,i>24?s.getUint32(24):0,i>24?s.getUint32(28):0);if(t!==undefined){if(t.length!==16)throw new IllegalArgumentError("illegal iv size");let e=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else{this.asm.set_iv(0,0,0,0)}this.padding=r}AES_Encrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let n=AES_asm.ENC[this.mode];let i=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let l=0;let h=new Uint8Array(u);while(f>0){l=_heap_write(r,s+a,e,o,f);a+=l;o+=l;f-=l;l=t.cipher(n,i+s,a);if(l)h.set(r.subarray(s,s+l),c);c+=l;if(l<a){s+=l;a-=l}else{s=0;a=0}}this.pos=s;this.len=a;return h}AES_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.ENC[this.mode];let n=AES_asm.HEAP_DATA;let i=this.pos;let s=this.len;let a=16-s%16;let o=s;if(this.hasOwnProperty("padding")){if(this.padding){for(let e=0;e<a;++e){t[i+s+e]=a}s+=a;o=s}else if(s%16){throw new IllegalArgumentError("data length must be a multiple of the block size")}}else{s+=a}const f=new Uint8Array(o);if(s)e.cipher(r,n+i,s);if(o)f.set(t.subarray(i,i+o));this.pos=0;this.len=0;return f}AES_Decrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let n=AES_asm.DEC[this.mode];let i=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let l=0;let h=0;if(this.padding){l=a+f-u||16;u-=l}const d=new Uint8Array(u);while(f>0){h=_heap_write(r,s+a,e,o,f);a+=h;o+=h;f-=h;h=t.cipher(n,i+s,a-(!f?l:0));if(h)d.set(r.subarray(s,s+h),c);c+=h;if(h<a){s+=h;a-=h}else{s=0;a=0}}this.pos=s;this.len=a;return d}AES_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.DEC[this.mode];let n=AES_asm.HEAP_DATA;let i=this.pos;let s=this.len;let a=s;if(s>0){if(s%16){if(this.hasOwnProperty("padding")){throw new IllegalArgumentError("data length must be a multiple of the block size")}else{s+=16-s%16}}e.cipher(r,n+i,s);if(this.hasOwnProperty("padding")&&this.padding){let e=t[i+a-1];if(e<1||e>16||e>a)throw new SecurityError("bad padding");let r=0;for(let n=e;n>1;n--)r|=e^t[i+a-n];if(r)throw new SecurityError("bad padding");a-=e}}const o=new Uint8Array(a);if(a>0){o.set(t.subarray(i,i+a))}this.pos=0;this.len=0;return o}}class AES_CBC extends AES{static encrypt(e,t,r=true,n){return new AES_CBC(t,n,r).encrypt(e)}static decrypt(e,t,r=true,n){return new AES_CBC(t,n,r).decrypt(e)}constructor(e,t,r=true){super(e,t,r,"CBC")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}const _AES_CCM_adata_maxLength=65279;const _AES_CCM_data_maxLength=0xffffffffffff0;class AES_CCM extends AES{constructor(e,t,r,n=16,i){super(e,undefined,undefined,"CCM");this.counter=1;this.dataLength=-1;if(n<4||n>16||n&1)throw new IllegalArgumentError("illegal tagSize value");this.tagSize=n;this.nonce=t;if(t.length<8||t.length>13)throw new IllegalArgumentError("illegal nonce length");this.lengthSize=15-t.length;t=new Uint8Array(t.length+1);t[0]=this.lengthSize-1;t.set(this.nonce,1);if(i<0||i>_AES_CCM_data_maxLength||i>Math.pow(2,8*this.lengthSize)-16)throw new IllegalArgumentError("illegal dataLength value");if(r!==undefined){if(r.length>_AES_CCM_adata_maxLength)throw new IllegalArgumentError("illegal adata length");this.adata=r.length?r:undefined}this.dataLength=i;this.counter=1;this.AES_CCM_calculate_iv();this.AES_CTR_set_options(t,this.counter,8*this.lengthSize)}static encrypt(e,t,r,n,i=16){return new AES_CCM(t,r,n,i,e.length).encrypt(e)}static decrypt(e,t,r,n,i=16){return new AES_CCM(t,r,n,i,e.length-i).decrypt(e)}encrypt(e){this.dataLength=e.length||0;const t=this.AES_CCM_Encrypt_process(e);const r=this.AES_CCM_Encrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}decrypt(e){this.dataLength=e.length||0;const t=this.AES_CCM_Decrypt_process(e);const r=this.AES_CCM_Decrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}AES_CCM_calculate_iv(){const e=this.nonce;const t=this.adata;const r=this.tagSize;const n=this.lengthSize;const i=this.dataLength;const s=new Uint8Array(16+(t?2+t.length:0));s[0]=(t?64:0)|r-2<<2|n-1;s.set(e,1);if(n>6)s[9]=i/4294967296>>>16&15;if(n>5)s[10]=i/4294967296>>>8&255;if(n>4)s[11]=i/4294967296&255;if(n>3)s[12]=i>>>24;if(n>2)s[13]=i>>>16&255;s[14]=i>>>8&255;s[15]=i&255;if(t){s[16]=t.length>>>8&255;s[17]=t.length&255;s.set(t,18)}this._cbc_mac_process(s);this.asm.get_state(AES_asm.HEAP_DATA);const a=new Uint8Array(this.heap.subarray(0,16));const o=new DataView(a.buffer,a.byteOffset,a.byteLength);this.asm.set_iv(o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12))}_cbc_mac_process(e){const t=this.heap;const r=this.asm;let n=0;let i=e.length||0;let s=0;while(i>0){s=_heap_write(t,0,e,n,i);while(s&15)t[s++]=0;n+=s;i-=s;r.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA,s)}}AES_CCM_Encrypt_process(e){const t=this.asm;const r=this.heap;let n=0;let i=e.length||0;let s=this.counter;let a=this.pos;let o=this.len;const f=o+i&-16;let c=0;let u=0;if((s-1<<4)+o+i>_AES_CCM_data_maxLength)throw new RangeError("counter overflow");const l=new Uint8Array(f);while(i>0){u=_heap_write(r,a+o,e,n,i);o+=u;n+=u;i-=u;u=t.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+a,o);u=t.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+a,u);if(u)l.set(r.subarray(a,a+u),c);s+=u>>>4;c+=u;if(u<o){a+=u;o-=u}else{a=0;o=0}}this.counter=s;this.pos=a;this.len=o;return l}AES_CCM_Encrypt_finish(){const e=this.asm;const t=this.heap;const r=this.tagSize;const n=this.pos;const i=this.len;const s=new Uint8Array(i+r);let a=i;for(;a&15;a++)t[n+a]=0;e.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+n,a);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+n,a);if(i)s.set(t.subarray(n,n+i));e.set_counter(0,0,0,0);e.get_iv(AES_asm.HEAP_DATA);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);s.set(t.subarray(0,r),i);this.counter=1;this.pos=0;this.len=0;return s}AES_CCM_Decrypt_process(e){let t=0;let r=e.length||0;const n=this.asm;const i=this.heap;let s=this.counter;const a=this.tagSize;let o=this.pos;let f=this.len;let c=0;const u=f+r>a?f+r-a&-16:0;const l=f+r-u;let h=0;if((s-1<<4)+f+r>_AES_CCM_data_maxLength)throw new RangeError("counter overflow");const d=new Uint8Array(u);while(r>l){h=_heap_write(i,o+f,e,t,r-l);f+=h;t+=h;r-=h;h=n.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+o,h);h=n.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+o,h);if(h)d.set(i.subarray(o,o+h),c);s+=h>>>4;c+=h;o=0;f=0}if(r>0){f+=_heap_write(i,0,e,t,r)}this.counter=s;this.pos=o;this.len=f;return d}AES_CCM_Decrypt_finish(){const e=this.asm;const t=this.heap;const r=this.tagSize;const n=this.pos;const i=this.len;const s=i-r;if(i<r)throw new IllegalStateError("authentication tag not found");const a=new Uint8Array(s);const o=new Uint8Array(t.subarray(n+s,n+i));e.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+n,s+15&-16);a.set(t.subarray(n,n+s));let f=s;for(;f&15;f++)t[n+f]=0;e.mac(AES_asm.MAC.CBC,AES_asm.HEAP_DATA+n,f);e.set_counter(0,0,0,0);e.get_iv(AES_asm.HEAP_DATA);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);let c=0;for(let e=0;e<r;++e)c|=o[e]^t[e];if(c)throw new SecurityError("data integrity check failed");this.counter=1;this.pos=0;this.len=0;return a}AES_CTR_set_options(e,t,r){if(r<8||r>48)throw new IllegalArgumentError("illegal counter size");const n=Math.pow(2,r)-1;this.asm.set_mask(0,0,n/4294967296|0,n|0);const i=e.length;if(!i||i>16)throw new IllegalArgumentError("illegal nonce size");this.nonce=e;const s=new DataView(new ArrayBuffer(16));new Uint8Array(s.buffer).set(e);this.asm.set_nonce(s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12));if(t<0||t>=Math.pow(2,r))throw new IllegalArgumentError("illegal counter value");this.counter=t;this.asm.set_counter(0,0,t/4294967296|0,t|0)}}class AES_CFB extends AES{static encrypt(e,t,r){return new AES_CFB(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_CFB(t,r).decrypt(e)}constructor(e,t){super(e,t,true,"CFB");delete this.padding}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}class AES_ECB extends AES{static encrypt(e,t,r=false){return new AES_ECB(t,r).encrypt(e)}static decrypt(e,t,r=false){return new AES_ECB(t,r).decrypt(e)}constructor(e,t=false){super(e,undefined,t,"ECB")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}function mul2(e){const t=e[0]&128;for(let t=0;t<15;t++){e[t]=e[t]<<1^(e[t+1]&128?1:0)}e[15]=e[15]<<1^(t?135:0)}class AES_CMAC{constructor(e){this.bufferLength=0;this.k=new AES_ECB(e).encrypt(new Uint8Array(16));mul2(this.k);this.cbc=new AES_CBC(e,new Uint8Array(16),false);this.buffer=new Uint8Array(16);this.result=null}static bytes(e,t){return new AES_CMAC(t).process(e).finish().result}process(e){if(this.bufferLength+e.length>16){this.cbc.encrypt(this.buffer.subarray(0,this.bufferLength));const t=(this.bufferLength+e.length-1&~15)-this.bufferLength;this.cbc.encrypt(e.subarray(0,t));this.buffer.set(e.subarray(t));this.bufferLength=e.length-t}else{this.buffer.set(e,this.bufferLength);this.bufferLength+=e.length}return this}finish(){if(this.bufferLength!==16){this.buffer[this.bufferLength]=128;for(let e=this.bufferLength+1;e<16;e++){this.buffer[e]=0}mul2(this.k)}for(let e=0;e<16;e++){this.buffer[e]^=this.k[e]}this.result=this.cbc.encrypt(this.buffer);return this}}class AES_CTR extends AES{static encrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}constructor(e,t){super(e,undefined,false,"CTR");delete this.padding;this.AES_CTR_set_options(t)}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}AES_CTR_set_options(e,t,r){if(r!==undefined){if(r<8||r>48)throw new IllegalArgumentError("illegal counter size");let e=Math.pow(2,r)-1;this.asm.set_mask(0,0,e/4294967296|0,e|0)}else{r=48;this.asm.set_mask(0,0,65535,4294967295)}if(e!==undefined){let t=e.length;if(!t||t>16)throw new IllegalArgumentError("illegal nonce size");let r=new DataView(new ArrayBuffer(16));new Uint8Array(r.buffer).set(e);this.asm.set_nonce(r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12))}else{throw new Error("nonce is required")}if(t!==undefined){if(t<0||t>=Math.pow(2,r))throw new IllegalArgumentError("illegal counter value");this.asm.set_counter(0,0,t/4294967296|0,t|0)}}}const _AES_GCM_data_maxLength=68719476704;class AES_GCM extends AES{constructor(e,t,r,n=16){super(e,undefined,false,"CTR");this.tagSize=n;this.gamma0=0;this.counter=1;this.asm.gcm_init();if(this.tagSize<4||this.tagSize>16)throw new IllegalArgumentError("illegal tagSize value");const i=t.length||0;const s=new Uint8Array(16);if(i!==12){this._gcm_mac_process(t);this.heap[0]=0;this.heap[1]=0;this.heap[2]=0;this.heap[3]=0;this.heap[4]=0;this.heap[5]=0;this.heap[6]=0;this.heap[7]=0;this.heap[8]=0;this.heap[9]=0;this.heap[10]=0;this.heap[11]=i>>>29;this.heap[12]=i>>>21&255;this.heap[13]=i>>>13&255;this.heap[14]=i>>>5&255;this.heap[15]=i<<3&255;this.asm.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);this.asm.get_iv(AES_asm.HEAP_DATA);this.asm.set_iv(0,0,0,0);s.set(this.heap.subarray(0,16))}else{s.set(t);s[15]=1}const a=new DataView(s.buffer);this.gamma0=a.getUint32(12);this.asm.set_nonce(a.getUint32(0),a.getUint32(4),a.getUint32(8),0);this.asm.set_mask(0,0,0,4294967295);if(r!==undefined){if(r.length>_AES_GCM_data_maxLength)throw new IllegalArgumentError("illegal adata length");if(r.length){this.adata=r;this._gcm_mac_process(r)}else{this.adata=undefined}}else{this.adata=undefined}if(this.counter<1||this.counter>4294967295)throw new RangeError("counter must be a positive 32-bit integer");this.asm.set_counter(0,0,0,this.gamma0+this.counter|0)}static encrypt(e,t,r,n,i){return new AES_GCM(t,r,n,i).encrypt(e)}static decrypt(e,t,r,n,i){return new AES_GCM(t,r,n,i).decrypt(e)}encrypt(e){return this.AES_GCM_encrypt(e)}decrypt(e){return this.AES_GCM_decrypt(e)}AES_GCM_Encrypt_process(e){let t=0;let r=e.length||0;let n=this.asm;let i=this.heap;let s=this.counter;let a=this.pos;let o=this.len;let f=0;let c=o+r&-16;let u=0;if((s-1<<4)+o+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const l=new Uint8Array(c);while(r>0){u=_heap_write(i,a+o,e,t,r);o+=u;t+=u;r-=u;u=n.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+a,o);u=n.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+a,u);if(u)l.set(i.subarray(a,a+u),f);s+=u>>>4;f+=u;if(u<o){a+=u;o-=u}else{a=0;o=0}}this.counter=s;this.pos=a;this.len=o;return l}AES_GCM_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=this.counter;let n=this.tagSize;let i=this.adata;let s=this.pos;let a=this.len;const o=new Uint8Array(a+n);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+s,a+15&-16);if(a)o.set(t.subarray(s,s+a));let f=a;for(;f&15;f++)t[s+f]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,f);const c=i!==undefined?i.length:0;const u=(r-1<<4)+a;t[0]=0;t[1]=0;t[2]=0;t[3]=c>>>29;t[4]=c>>>21;t[5]=c>>>13&255;t[6]=c>>>5&255;t[7]=c<<3&255;t[8]=t[9]=t[10]=0;t[11]=u>>>29;t[12]=u>>>21&255;t[13]=u>>>13&255;t[14]=u>>>5&255;t[15]=u<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);o.set(t.subarray(0,n),a);this.counter=1;this.pos=0;this.len=0;return o}AES_GCM_Decrypt_process(e){let t=0;let r=e.length||0;let n=this.asm;let i=this.heap;let s=this.counter;let a=this.tagSize;let o=this.pos;let f=this.len;let c=0;let u=f+r>a?f+r-a&-16:0;let l=f+r-u;let h=0;if((s-1<<4)+f+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const d=new Uint8Array(u);while(r>l){h=_heap_write(i,o+f,e,t,r-l);f+=h;t+=h;r-=h;h=n.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+o,h);h=n.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+o,h);if(h)d.set(i.subarray(o,o+h),c);s+=h>>>4;c+=h;o=0;f=0}if(r>0){f+=_heap_write(i,0,e,t,r)}this.counter=s;this.pos=o;this.len=f;return d}AES_GCM_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=this.tagSize;let n=this.adata;let i=this.counter;let s=this.pos;let a=this.len;let o=a-r;if(a<r)throw new IllegalStateError("authentication tag not found");const f=new Uint8Array(o);const c=new Uint8Array(t.subarray(s+o,s+a));let u=o;for(;u&15;u++)t[s+u]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,u);e.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+s,u);if(o)f.set(t.subarray(s,s+o));const l=n!==undefined?n.length:0;const h=(i-1<<4)+a-r;t[0]=0;t[1]=0;t[2]=0;t[3]=l>>>29;t[4]=l>>>21;t[5]=l>>>13&255;t[6]=l>>>5&255;t[7]=l<<3&255;t[8]=t[9]=t[10]=0;t[11]=h>>>29;t[12]=h>>>21&255;t[13]=h>>>13&255;t[14]=h>>>5&255;t[15]=h<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);let d=0;for(let e=0;e<r;++e)d|=c[e]^t[e];if(d)throw new SecurityError("data integrity check failed");this.counter=1;this.pos=0;this.len=0;return f}AES_GCM_decrypt(e){const t=this.AES_GCM_Decrypt_process(e);const r=this.AES_GCM_Decrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}AES_GCM_encrypt(e){const t=this.AES_GCM_Encrypt_process(e);const r=this.AES_GCM_Encrypt_finish();const n=new Uint8Array(t.length+r.length);if(t.length)n.set(t);if(r.length)n.set(r,t.length);return n}_gcm_mac_process(e){const t=this.heap;const r=this.asm;let n=0;let i=e.length||0;let s=0;while(i>0){s=_heap_write(t,0,e,n,i);n+=s;i-=s;while(s&15)t[s++]=0;r.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,s)}}}class AES_OFB extends AES{static encrypt(e,t,r){return new AES_OFB(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_OFB(t,r).decrypt(e)}constructor(e,t){super(e,t,false,"OFB")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}var bigint_asm=function(e,t,r){"use asm";var n=0;var i=new e.Uint32Array(r);var s=e.Math.imul;function a(e){e=e|0;n=e=e+31&-32;return e|0}function o(e){e=e|0;var t=0;t=n;n=t+(e+31&-32)|0;return t|0}function f(e){e=e|0;n=n-(e+31&-32)|0}function c(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;if((t|0)>(r|0)){for(;(n|0)<(e|0);n=n+4|0){i[r+n>>2]=i[t+n>>2]}}else{for(n=e-4|0;(n|0)>=0;n=n-4|0){i[r+n>>2]=i[t+n>>2]}}}function u(e,t,r){e=e|0;t=t|0;r=r|0;var n=0;for(;(n|0)<(e|0);n=n+4|0){i[r+n>>2]=t}}function l(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0,a=0,o=0,f=0,c=0;if((n|0)<=0)n=t;if((n|0)<(t|0))t=n;a=1;for(;(c|0)<(t|0);c=c+4|0){s=~i[e+c>>2];o=(s&0xffff)+a|0;f=(s>>>16)+(o>>>16)|0;i[r+c>>2]=f<<16|o&0xffff;a=f>>>16}for(;(c|0)<(n|0);c=c+4|0){i[r+c>>2]=a-1|0}return a|0}function h(e,t,r,n){e=e|0;t=t|0;r=r|0;n=n|0;var s=0,a=0,o=0;if((t|0)>(n|0)){for(o=t-4|0;(o|0)>=(n|0);o=o-4|0){if(i[e+o>>2]|0)return 1}}else{for(o=n-4|0;(o|0)>=(t|0);o=o-4|0){if(i[r+o>>2]|0)return-1}}for(;(o|0)>=0;o=o-4|0){s=i[e+o>>2]|0,a=i[r+o>>2]|0;if(s>>>0<a>>>0)return-1;if(s>>>0>a>>>0)return 1}return 0}function d(e,t){e=e|0;t=t|0;var r=0;for(r=t-4|0;(r|0)>=0;r=r-4|0){if(i[e+r>>2]|0)return r+4|0}return 0}function p(e,t,r,n,s,a){e=e|0;t=t|0;r=r|0;n=n|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0;if((t|0)<(n|0)){u=e,e=r,r=u;u=t,t=n,n=u}if((a|0)<=0)a=t+4|0;if((a|0)<(n|0))t=n=a;for(;(h|0)<(n|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)+(f&0xffff)|0)+c|0;l=((o>>>16)+(f>>>16)|0)+(u>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>>16}for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;u=(o&0xffff)+c|0;l=(o>>>16)+(u>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>>16}for(;(h|0)<(a|0);h=h+4|0){i[s+h>>2]=c|0;c=0}return c|0}function y(e,t,r,n,s,a){e=e|0;t=t|0;r=r|0;n=n|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0;if((a|0)<=0)a=(t|0)>(n|0)?t+4|0:n+4|0;if((a|0)<(t|0))t=a;if((a|0)<(n|0))n=a;if((t|0)<(n|0)){for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;l=((o>>>16)-(f>>>16)|0)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}for(;(h|0)<(n|0);h=h+4|0){f=i[r+h>>2]|0;u=c-(f&0xffff)|0;l=(u>>16)-(f>>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}}else{for(;(h|0)<(n|0);h=h+4|0){o=i[e+h>>2]|0;f=i[r+h>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;l=((o>>>16)-(f>>>16)|0)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}for(;(h|0)<(t|0);h=h+4|0){o=i[e+h>>2]|0;u=(o&0xffff)+c|0;l=(o>>>16)+(u>>16)|0;i[s+h>>2]=u&0xffff|l<<16;c=l>>16}}for(;(h|0)<(a|0);h=h+4|0){i[s+h>>2]=c|0}return c|0}function m(e,t,r,n,a,o){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;o=o|0;var f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0,B=0,D=0,U=0,L=0,F=0,j=0,H=0,K=0,G=0,V=0,z=0,W=0,X=0,Y=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0;if((t|0)>(n|0)){re=e,ne=t;e=r,t=n;r=re,n=ne}se=t+n|0;if((o|0)>(se|0)|(o|0)<=0)o=se;if((o|0)<(t|0))t=o;if((o|0)<(n|0))n=o;for(;(ae|0)<(t|0);ae=ae+32|0){oe=e+ae|0;m=i[(oe|0)>>2]|0,g=i[(oe|4)>>2]|0,b=i[(oe|8)>>2]|0,v=i[(oe|12)>>2]|0,w=i[(oe|16)>>2]|0,A=i[(oe|20)>>2]|0,E=i[(oe|24)>>2]|0,_=i[(oe|28)>>2]|0,f=m&0xffff,c=g&0xffff,u=b&0xffff,l=v&0xffff,h=w&0xffff,d=A&0xffff,p=E&0xffff,y=_&0xffff,m=m>>>16,g=g>>>16,b=b>>>16,v=v>>>16,w=w>>>16,A=A>>>16,E=E>>>16,_=_>>>16;X=Y=J=q=Q=Z=ee=te=0;for(fe=0;(fe|0)<(n|0);fe=fe+32|0){ce=r+fe|0;ue=a+(ae+fe|0)|0;N=i[(ce|0)>>2]|0,R=i[(ce|4)>>2]|0,M=i[(ce|8)>>2]|0,O=i[(ce|12)>>2]|0,B=i[(ce|16)>>2]|0,D=i[(ce|20)>>2]|0,U=i[(ce|24)>>2]|0,L=i[(ce|28)>>2]|0,S=N&0xffff,$=R&0xffff,T=M&0xffff,C=O&0xffff,P=B&0xffff,x=D&0xffff,I=U&0xffff,k=L&0xffff,N=N>>>16,R=R>>>16,M=M>>>16,O=O>>>16,B=B>>>16,D=D>>>16,U=U>>>16,L=L>>>16;F=i[(ue|0)>>2]|0,j=i[(ue|4)>>2]|0,H=i[(ue|8)>>2]|0,K=i[(ue|12)>>2]|0,G=i[(ue|16)>>2]|0,V=i[(ue|20)>>2]|0,z=i[(ue|24)>>2]|0,W=i[(ue|28)>>2]|0;re=((s(f,S)|0)+(X&0xffff)|0)+(F&0xffff)|0;ne=((s(m,S)|0)+(X>>>16)|0)+(F>>>16)|0;ie=((s(f,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;F=ie<<16|re&0xffff;re=((s(f,$)|0)+(se&0xffff)|0)+(j&0xffff)|0;ne=((s(m,$)|0)+(se>>>16)|0)+(j>>>16)|0;ie=((s(f,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(f,T)|0)+(se&0xffff)|0)+(H&0xffff)|0;ne=((s(m,T)|0)+(se>>>16)|0)+(H>>>16)|0;ie=((s(f,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;H=ie<<16|re&0xffff;re=((s(f,C)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(m,C)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(f,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(f,P)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(m,P)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(f,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(f,x)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(m,x)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(f,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(f,I)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(m,I)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(f,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(f,k)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(m,k)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(f,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(m,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;X=se;re=((s(c,S)|0)+(Y&0xffff)|0)+(j&0xffff)|0;ne=((s(g,S)|0)+(Y>>>16)|0)+(j>>>16)|0;ie=((s(c,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;j=ie<<16|re&0xffff;re=((s(c,$)|0)+(se&0xffff)|0)+(H&0xffff)|0;ne=((s(g,$)|0)+(se>>>16)|0)+(H>>>16)|0;ie=((s(c,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;H=ie<<16|re&0xffff;re=((s(c,T)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(g,T)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(c,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(c,C)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(g,C)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(c,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(c,P)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(g,P)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(c,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(c,x)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(g,x)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(c,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(c,I)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(g,I)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(c,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(c,k)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(g,k)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(c,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(g,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;Y=se;re=((s(u,S)|0)+(J&0xffff)|0)+(H&0xffff)|0;ne=((s(b,S)|0)+(J>>>16)|0)+(H>>>16)|0;ie=((s(u,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;H=ie<<16|re&0xffff;re=((s(u,$)|0)+(se&0xffff)|0)+(K&0xffff)|0;ne=((s(b,$)|0)+(se>>>16)|0)+(K>>>16)|0;ie=((s(u,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(u,T)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(b,T)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(u,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(u,C)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(b,C)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(u,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(u,P)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(b,P)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(u,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(u,x)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(b,x)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(u,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(u,I)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(b,I)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(u,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(u,k)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(b,k)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(u,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(b,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;J=se;re=((s(l,S)|0)+(q&0xffff)|0)+(K&0xffff)|0;ne=((s(v,S)|0)+(q>>>16)|0)+(K>>>16)|0;ie=((s(l,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;K=ie<<16|re&0xffff;re=((s(l,$)|0)+(se&0xffff)|0)+(G&0xffff)|0;ne=((s(v,$)|0)+(se>>>16)|0)+(G>>>16)|0;ie=((s(l,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(l,T)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(v,T)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(l,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(l,C)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(v,C)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(l,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(l,P)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(v,P)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(l,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(l,x)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(v,x)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(l,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(l,I)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(v,I)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(l,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(l,k)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(v,k)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(l,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(v,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;q=se;re=((s(h,S)|0)+(Q&0xffff)|0)+(G&0xffff)|0;ne=((s(w,S)|0)+(Q>>>16)|0)+(G>>>16)|0;ie=((s(h,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;G=ie<<16|re&0xffff;re=((s(h,$)|0)+(se&0xffff)|0)+(V&0xffff)|0;ne=((s(w,$)|0)+(se>>>16)|0)+(V>>>16)|0;ie=((s(h,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(h,T)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(w,T)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(h,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(h,C)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(w,C)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(h,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(h,P)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(w,P)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(h,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(h,x)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(w,x)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(h,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(h,I)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(w,I)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(h,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(h,k)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(w,k)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(h,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(w,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;Q=se;re=((s(d,S)|0)+(Z&0xffff)|0)+(V&0xffff)|0;ne=((s(A,S)|0)+(Z>>>16)|0)+(V>>>16)|0;ie=((s(d,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;V=ie<<16|re&0xffff;re=((s(d,$)|0)+(se&0xffff)|0)+(z&0xffff)|0;ne=((s(A,$)|0)+(se>>>16)|0)+(z>>>16)|0;ie=((s(d,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(d,T)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(A,T)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(d,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(d,C)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(A,C)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(d,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(d,P)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(A,P)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(d,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(d,x)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(A,x)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(d,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(d,I)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(A,I)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(d,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(d,k)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(A,k)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(d,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(A,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;Z=se;re=((s(p,S)|0)+(ee&0xffff)|0)+(z&0xffff)|0;ne=((s(E,S)|0)+(ee>>>16)|0)+(z>>>16)|0;ie=((s(p,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;z=ie<<16|re&0xffff;re=((s(p,$)|0)+(se&0xffff)|0)+(W&0xffff)|0;ne=((s(E,$)|0)+(se>>>16)|0)+(W>>>16)|0;ie=((s(p,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(p,T)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(E,T)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(p,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(p,C)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(E,C)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(p,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(p,P)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(E,P)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(p,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(p,x)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(E,x)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(p,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(p,I)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(E,I)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(p,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(p,k)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ne=((s(E,k)|0)+(se>>>16)|0)+(Z>>>16)|0;ie=((s(p,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(E,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;Z=ie<<16|re&0xffff;ee=se;re=((s(y,S)|0)+(te&0xffff)|0)+(W&0xffff)|0;ne=((s(_,S)|0)+(te>>>16)|0)+(W>>>16)|0;ie=((s(y,N)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,N)|0)+(ne>>>16)|0)+(ie>>>16)|0;W=ie<<16|re&0xffff;re=((s(y,$)|0)+(se&0xffff)|0)+(X&0xffff)|0;ne=((s(_,$)|0)+(se>>>16)|0)+(X>>>16)|0;ie=((s(y,R)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,R)|0)+(ne>>>16)|0)+(ie>>>16)|0;X=ie<<16|re&0xffff;re=((s(y,T)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ne=((s(_,T)|0)+(se>>>16)|0)+(Y>>>16)|0;ie=((s(y,M)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,M)|0)+(ne>>>16)|0)+(ie>>>16)|0;Y=ie<<16|re&0xffff;re=((s(y,C)|0)+(se&0xffff)|0)+(J&0xffff)|0;ne=((s(_,C)|0)+(se>>>16)|0)+(J>>>16)|0;ie=((s(y,O)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,O)|0)+(ne>>>16)|0)+(ie>>>16)|0;J=ie<<16|re&0xffff;re=((s(y,P)|0)+(se&0xffff)|0)+(q&0xffff)|0;ne=((s(_,P)|0)+(se>>>16)|0)+(q>>>16)|0;ie=((s(y,B)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,B)|0)+(ne>>>16)|0)+(ie>>>16)|0;q=ie<<16|re&0xffff;re=((s(y,x)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ne=((s(_,x)|0)+(se>>>16)|0)+(Q>>>16)|0;ie=((s(y,D)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,D)|0)+(ne>>>16)|0)+(ie>>>16)|0;Q=ie<<16|re&0xffff;re=((s(y,I)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ne=((s(_,I)|0)+(se>>>16)|0)+(Z>>>16)|0;ie=((s(y,U)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,U)|0)+(ne>>>16)|0)+(ie>>>16)|0;Z=ie<<16|re&0xffff;re=((s(y,k)|0)+(se&0xffff)|0)+(ee&0xffff)|0;ne=((s(_,k)|0)+(se>>>16)|0)+(ee>>>16)|0;ie=((s(y,L)|0)+(ne&0xffff)|0)+(re>>>16)|0;se=((s(_,L)|0)+(ne>>>16)|0)+(ie>>>16)|0;ee=ie<<16|re&0xffff;te=se;i[(ue|0)>>2]=F,i[(ue|4)>>2]=j,i[(ue|8)>>2]=H,i[(ue|12)>>2]=K,i[(ue|16)>>2]=G,i[(ue|20)>>2]=V,i[(ue|24)>>2]=z,i[(ue|28)>>2]=W}ue=a+(ae+fe|0)|0;i[(ue|0)>>2]=X,i[(ue|4)>>2]=Y,i[(ue|8)>>2]=J,i[(ue|12)>>2]=q,i[(ue|16)>>2]=Q,i[(ue|20)>>2]=Z,i[(ue|24)>>2]=ee,i[(ue|28)>>2]=te}}function g(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0,B=0,D=0,U=0,L=0,F=0,j=0,H=0,K=0,G=0,V=0,z=0,W=0,X=0,Y=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0,de=0,pe=0;for(;(ce|0)<(t|0);ce=ce+4|0){pe=r+(ce<<1)|0;d=i[e+ce>>2]|0,n=d&0xffff,d=d>>>16;Z=s(n,n)|0;ee=(s(n,d)|0)+(Z>>>17)|0;te=(s(d,d)|0)+(ee>>>15)|0;i[pe>>2]=ee<<17|Z&0x1ffff;i[(pe|4)>>2]=te}for(fe=0;(fe|0)<(t|0);fe=fe+8|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16;x=i[(he|4)>>2]|0,A=x&0xffff,x=x>>>16;Z=s(n,A)|0;ee=(s(n,x)|0)+(Z>>>16)|0;te=(s(d,A)|0)+(ee&0xffff)|0;ie=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;se=i[(pe|4)>>2]|0;Z=(se&0xffff)+((Z&0xffff)<<1)|0;te=((se>>>16)+((te&0xffff)<<1)|0)+(Z>>>16)|0;i[(pe|4)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|8)>>2]|0;Z=((se&0xffff)+((ie&0xffff)<<1)|0)+re|0;te=((se>>>16)+(ie>>>16<<1)|0)+(Z>>>16)|0;i[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;if(re){se=i[(pe|12)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[(pe|12)>>2]=te<<16|Z&0xffff}}for(fe=0;(fe|0)<(t|0);fe=fe+16|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16;x=i[(he|8)>>2]|0,A=x&0xffff,x=x>>>16,I=i[(he|12)>>2]|0,E=I&0xffff,I=I>>>16;Z=s(n,A)|0;ee=s(d,A)|0;te=((s(n,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=(s(n,E)|0)+(ie&0xffff)|0;ee=(s(d,E)|0)+(ie>>>16)|0;te=((s(n,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;L=ie;Z=(s(a,A)|0)+(U&0xffff)|0;ee=(s(p,A)|0)+(U>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,E)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,E)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;F=ie;se=i[(pe|8)>>2]|0;Z=(se&0xffff)+((D&0xffff)<<1)|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;i[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|12)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[(pe|12)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|16)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|20)>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;for(le=24;!!re&(le|0)<32;le=le+4|0){se=i[(pe|le)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[(pe|le)>>2]=te<<16|Z&0xffff;re=te>>>16}}for(fe=0;(fe|0)<(t|0);fe=fe+32|0){he=e+fe|0,pe=r+(fe<<1)|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16,y=i[(he|8)>>2]|0,o=y&0xffff,y=y>>>16,m=i[(he|12)>>2]|0,f=m&0xffff,m=m>>>16;x=i[(he|16)>>2]|0,A=x&0xffff,x=x>>>16,I=i[(he|20)>>2]|0,E=I&0xffff,I=I>>>16,k=i[(he|24)>>2]|0,_=k&0xffff,k=k>>>16,N=i[(he|28)>>2]|0,S=N&0xffff,N=N>>>16;Z=s(n,A)|0;ee=s(d,A)|0;te=((s(n,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=(s(n,E)|0)+(ie&0xffff)|0;ee=(s(d,E)|0)+(ie>>>16)|0;te=((s(n,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=(s(n,_)|0)+(ie&0xffff)|0;ee=(s(d,_)|0)+(ie>>>16)|0;te=((s(n,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,k)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=(s(n,S)|0)+(ie&0xffff)|0;ee=(s(d,S)|0)+(ie>>>16)|0;te=((s(n,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;j=ie;Z=(s(a,A)|0)+(U&0xffff)|0;ee=(s(p,A)|0)+(U>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,E)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,E)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,_)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(a,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,k)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(a,S)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,S)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;H=ie;Z=(s(o,A)|0)+(L&0xffff)|0;ee=(s(y,A)|0)+(L>>>16)|0;te=((s(o,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,x)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,E)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,E)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(o,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,I)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(o,_)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,_)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(o,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,k)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(o,S)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,S)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,N)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;K=ie;Z=(s(f,A)|0)+(F&0xffff)|0;ee=(s(m,A)|0)+(F>>>16)|0;te=((s(f,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,x)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(f,E)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,E)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(f,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,I)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(f,_)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,_)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(f,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,k)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(f,S)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,S)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;G=ie;se=i[(pe|16)>>2]|0;Z=(se&0xffff)+((D&0xffff)<<1)|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;i[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|20)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|24)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[(pe|24)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[(pe|28)>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[(pe|28)>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+32>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;i[pe+32>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+36>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;i[pe+36>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+40>>2]|0;Z=((se&0xffff)+((K&0xffff)<<1)|0)+re|0;te=((se>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;i[pe+40>>2]=te<<16|Z&0xffff;re=te>>>16;se=i[pe+44>>2]|0;Z=((se&0xffff)+((G&0xffff)<<1)|0)+re|0;te=((se>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;i[pe+44>>2]=te<<16|Z&0xffff;re=te>>>16;for(le=48;!!re&(le|0)<64;le=le+4|0){se=i[pe+le>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16}}for(ae=32;(ae|0)<(t|0);ae=ae<<1){oe=ae<<1;for(fe=0;(fe|0)<(t|0);fe=fe+oe|0){pe=r+(fe<<1)|0;ne=0;for(ce=0;(ce|0)<(ae|0);ce=ce+32|0){he=(e+fe|0)+ce|0;d=i[he>>2]|0,n=d&0xffff,d=d>>>16,p=i[(he|4)>>2]|0,a=p&0xffff,p=p>>>16,y=i[(he|8)>>2]|0,o=y&0xffff,y=y>>>16,m=i[(he|12)>>2]|0,f=m&0xffff,m=m>>>16,g=i[(he|16)>>2]|0,c=g&0xffff,g=g>>>16,b=i[(he|20)>>2]|0,u=b&0xffff,b=b>>>16,v=i[(he|24)>>2]|0,l=v&0xffff,v=v>>>16,w=i[(he|28)>>2]|0,h=w&0xffff,w=w>>>16;V=z=W=X=Y=J=q=Q=re=0;for(ue=0;(ue|0)<(ae|0);ue=ue+32|0){de=((e+fe|0)+ae|0)+ue|0;x=i[de>>2]|0,A=x&0xffff,x=x>>>16,I=i[(de|4)>>2]|0,E=I&0xffff,I=I>>>16,k=i[(de|8)>>2]|0,_=k&0xffff,k=k>>>16,N=i[(de|12)>>2]|0,S=N&0xffff,N=N>>>16,R=i[(de|16)>>2]|0,$=R&0xffff,R=R>>>16,M=i[(de|20)>>2]|0,T=M&0xffff,M=M>>>16,O=i[(de|24)>>2]|0,C=O&0xffff,O=O>>>16,B=i[(de|28)>>2]|0,P=B&0xffff,B=B>>>16;D=U=L=F=j=H=K=G=0;Z=((s(n,A)|0)+(D&0xffff)|0)+(V&0xffff)|0;ee=((s(d,A)|0)+(D>>>16)|0)+(V>>>16)|0;te=((s(n,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=((s(n,E)|0)+(U&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,E)|0)+(U>>>16)|0)+(ie>>>16)|0;te=((s(n,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(n,_)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,_)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(n,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,k)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(n,S)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,S)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(n,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(n,$)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,$)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(n,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,R)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(n,T)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,T)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(n,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,M)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(n,C)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,C)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(n,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,O)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(n,P)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(d,P)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(n,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(d,B)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;V=ie;Z=((s(a,A)|0)+(U&0xffff)|0)+(z&0xffff)|0;ee=((s(p,A)|0)+(U>>>16)|0)+(z>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,E)|0)+(L&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,E)|0)+(L>>>16)|0)+(ie>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,_)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(a,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,k)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(a,S)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,S)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(a,$)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,$)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(a,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,R)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(a,T)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,T)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(a,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,M)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(a,C)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,C)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(a,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,O)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(a,P)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(p,P)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(a,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(p,B)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;z=ie;Z=((s(o,A)|0)+(L&0xffff)|0)+(W&0xffff)|0;ee=((s(y,A)|0)+(L>>>16)|0)+(W>>>16)|0;te=((s(o,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,x)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,E)|0)+(F&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,E)|0)+(F>>>16)|0)+(ie>>>16)|0;te=((s(o,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,I)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(o,_)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,_)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(o,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,k)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(o,S)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,S)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,N)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(o,$)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,$)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(o,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,R)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(o,T)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,T)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(o,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,M)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(o,C)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,C)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(o,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,O)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(o,P)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(y,P)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(o,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(y,B)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;W=ie;Z=((s(f,A)|0)+(F&0xffff)|0)+(X&0xffff)|0;ee=((s(m,A)|0)+(F>>>16)|0)+(X>>>16)|0;te=((s(f,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,x)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(f,E)|0)+(j&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,E)|0)+(j>>>16)|0)+(ie>>>16)|0;te=((s(f,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,I)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(f,_)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,_)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(f,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,k)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(f,S)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,S)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(f,$)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,$)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(f,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,R)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(f,T)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,T)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(f,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,M)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(f,C)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,C)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(f,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,O)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(f,P)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(m,P)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(f,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(m,B)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;X=ie;Z=((s(c,A)|0)+(j&0xffff)|0)+(Y&0xffff)|0;ee=((s(g,A)|0)+(j>>>16)|0)+(Y>>>16)|0;te=((s(c,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,x)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(c,E)|0)+(H&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,E)|0)+(H>>>16)|0)+(ie>>>16)|0;te=((s(c,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,I)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(c,_)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,_)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(c,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,k)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(c,S)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,S)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(c,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,N)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(c,$)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,$)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(c,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,R)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(c,T)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,T)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(c,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,M)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(c,C)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,C)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(c,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,O)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(c,P)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(g,P)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(c,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(g,B)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Y=ie;Z=((s(u,A)|0)+(H&0xffff)|0)+(J&0xffff)|0;ee=((s(b,A)|0)+(H>>>16)|0)+(J>>>16)|0;te=((s(u,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,x)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(u,E)|0)+(K&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,E)|0)+(K>>>16)|0)+(ie>>>16)|0;te=((s(u,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,I)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(u,_)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,_)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(u,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,k)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(u,S)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,S)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(u,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,N)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(u,$)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,$)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(u,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,R)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(u,T)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,T)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(u,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,M)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(u,C)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,C)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(u,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,O)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(u,P)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(b,P)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(u,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(b,B)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;J=ie;Z=((s(l,A)|0)+(K&0xffff)|0)+(q&0xffff)|0;ee=((s(v,A)|0)+(K>>>16)|0)+(q>>>16)|0;te=((s(l,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,x)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(l,E)|0)+(G&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,E)|0)+(G>>>16)|0)+(ie>>>16)|0;te=((s(l,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,I)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(l,_)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,_)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(l,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,k)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(l,S)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,S)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(l,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,N)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(l,$)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,$)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(l,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,R)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(l,T)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,T)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(l,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,M)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(l,C)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,C)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(l,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,O)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(l,P)|0)+(J&0xffff)|0)+(ie&0xffff)|0;ee=((s(v,P)|0)+(J>>>16)|0)+(ie>>>16)|0;te=((s(l,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(v,B)|0)+(ee>>>16)|0)+(te>>>16)|0;J=te<<16|Z&0xffff;q=ie;Z=((s(h,A)|0)+(G&0xffff)|0)+(Q&0xffff)|0;ee=((s(w,A)|0)+(G>>>16)|0)+(Q>>>16)|0;te=((s(h,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,x)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(h,E)|0)+(V&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,E)|0)+(V>>>16)|0)+(ie>>>16)|0;te=((s(h,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,I)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(h,_)|0)+(z&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,_)|0)+(z>>>16)|0)+(ie>>>16)|0;te=((s(h,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,k)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(h,S)|0)+(W&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,S)|0)+(W>>>16)|0)+(ie>>>16)|0;te=((s(h,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,N)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(h,$)|0)+(X&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,$)|0)+(X>>>16)|0)+(ie>>>16)|0;te=((s(h,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,R)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(h,T)|0)+(Y&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,T)|0)+(Y>>>16)|0)+(ie>>>16)|0;te=((s(h,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,M)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(h,C)|0)+(J&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,C)|0)+(J>>>16)|0)+(ie>>>16)|0;te=((s(h,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,O)|0)+(ee>>>16)|0)+(te>>>16)|0;J=te<<16|Z&0xffff;Z=((s(h,P)|0)+(q&0xffff)|0)+(ie&0xffff)|0;ee=((s(w,P)|0)+(q>>>16)|0)+(ie>>>16)|0;te=((s(h,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ie=((s(w,B)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Q=ie;le=ae+(ce+ue|0)|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((D&0xffff)<<1)|0)+re|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((K&0xffff)<<1)|0)+re|0;te=((se>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((G&0xffff)<<1)|0)+re|0;te=((se>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16}le=ae+(ce+ue|0)|0;se=i[pe+le>>2]|0;Z=(((se&0xffff)+((V&0xffff)<<1)|0)+re|0)+ne|0;te=((se>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((z&0xffff)<<1)|0)+re|0;te=((se>>>16)+(z>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((W&0xffff)<<1)|0)+re|0;te=((se>>>16)+(W>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((X&0xffff)<<1)|0)+re|0;te=((se>>>16)+(X>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((Y&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Y>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((J&0xffff)<<1)|0)+re|0;te=((se>>>16)+(J>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(q>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;re=te>>>16;le=le+4|0;se=i[pe+le>>2]|0;Z=((se&0xffff)+((Q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Q>>>16<<1)|0)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;ne=te>>>16}for(le=le+4|0;!!ne&(le|0)<oe<<1;le=le+4|0){se=i[pe+le>>2]|0;Z=(se&0xffff)+ne|0;te=(se>>>16)+(Z>>>16)|0;i[pe+le>>2]=te<<16|Z&0xffff;ne=te>>>16}}}}function b(e,t,r,n,a){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;var o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0;for(_=t-1&-4;(_|0)>=0;_=_-4|0){o=i[e+_>>2]|0;if(o){t=_;break}}for(_=n-1&-4;(_|0)>=0;_=_-4|0){f=i[r+_>>2]|0;if(f){n=_;break}}while((f&0x80000000)==0){f=f<<1;c=c+1|0}l=i[e+t>>2]|0;if(c){u=l>>>(32-c|0);for(_=t-4|0;(_|0)>=0;_=_-4|0){o=i[e+_>>2]|0;i[e+_+4>>2]=l<<c|(c?o>>>(32-c|0):0);l=o}i[e>>2]=l<<c}if(c){h=i[r+n>>2]|0;for(_=n-4|0;(_|0)>=0;_=_-4|0){f=i[r+_>>2]|0;i[r+_+4>>2]=h<<c|f>>>(32-c|0);h=f}i[r>>2]=h<<c}h=i[r+n>>2]|0;d=h>>>16,p=h&0xffff;for(_=t;(_|0)>=(n|0);_=_-4|0){S=_-n|0;l=i[e+_>>2]|0;y=(u>>>0)/(d>>>0)|0,g=(u>>>0)%(d>>>0)|0,v=s(y,p)|0;while((y|0)==0x10000|v>>>0>(g<<16|l>>>16)>>>0){y=y-1|0,g=g+d|0,v=v-p|0;if((g|0)>=0x10000)break}A=0,E=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;v=(s(y,f&0xffff)|0)+(A>>>16)|0;w=(s(y,f>>>16)|0)+(v>>>16)|0;f=A&0xffff|v<<16;A=w;o=i[e+S+$>>2]|0;v=((o&0xffff)-(f&0xffff)|0)+E|0;w=((o>>>16)-(f>>>16)|0)+(v>>16)|0;i[e+S+$>>2]=w<<16|v&0xffff;E=w>>16}v=((u&0xffff)-(A&0xffff)|0)+E|0;w=((u>>>16)-(A>>>16)|0)+(v>>16)|0;u=w<<16|v&0xffff;E=w>>16;if(E){y=y-1|0;E=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;o=i[e+S+$>>2]|0;v=(o&0xffff)+E|0;w=(o>>>16)+f+(v>>>16)|0;i[e+S+$>>2]=w<<16|v&0xffff;E=w>>>16}u=u+E|0}l=i[e+_>>2]|0;o=u<<16|l>>>16;m=(o>>>0)/(d>>>0)|0,b=(o>>>0)%(d>>>0)|0,v=s(m,p)|0;while((m|0)==0x10000|v>>>0>(b<<16|l&0xffff)>>>0){m=m-1|0,b=b+d|0,v=v-p|0;if((b|0)>=0x10000)break}A=0,E=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;v=(s(m,f&0xffff)|0)+(A&0xffff)|0;w=((s(m,f>>>16)|0)+(v>>>16)|0)+(A>>>16)|0;f=v&0xffff|w<<16;A=w>>>16;o=i[e+S+$>>2]|0;v=((o&0xffff)-(f&0xffff)|0)+E|0;w=((o>>>16)-(f>>>16)|0)+(v>>16)|0;E=w>>16;i[e+S+$>>2]=w<<16|v&0xffff}v=((u&0xffff)-(A&0xffff)|0)+E|0;w=((u>>>16)-(A>>>16)|0)+(v>>16)|0;E=w>>16;if(E){m=m-1|0;E=0;for($=0;($|0)<=(n|0);$=$+4|0){f=i[r+$>>2]|0;o=i[e+S+$>>2]|0;v=((o&0xffff)+(f&0xffff)|0)+E|0;w=((o>>>16)+(f>>>16)|0)+(v>>>16)|0;E=w>>>16;i[e+S+$>>2]=v&0xffff|w<<16}}i[a+S>>2]=y<<16|m;u=i[e+_>>2]|0}if(c){l=i[e>>2]|0;for(_=4;(_|0)<=(n|0);_=_+4|0){o=i[e+_>>2]|0;i[e+_-4>>2]=o<<(32-c|0)|l>>>c;l=o}i[e+n>>2]=l>>>c}}function v(e,t,r,n,a,l){e=e|0;t=t|0;r=r|0;n=n|0;a=a|0;l=l|0;var d=0,p=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0;d=o(n<<1)|0;u(n<<1,0,d);c(t,e,d);for($=0;($|0)<(n|0);$=$+4|0){m=i[d+$>>2]|0,g=m&0xffff,m=m>>>16;v=a>>>16,b=a&0xffff;w=s(g,b)|0,A=((s(g,v)|0)+(s(m,b)|0)|0)+(w>>>16)|0;g=w&0xffff,m=A&0xffff;S=0;for(T=0;(T|0)<(n|0);T=T+4|0){C=$+T|0;v=i[r+T>>2]|0,b=v&0xffff,v=v>>>16;_=i[d+C>>2]|0;w=((s(g,b)|0)+(S&0xffff)|0)+(_&0xffff)|0;A=((s(g,v)|0)+(S>>>16)|0)+(_>>>16)|0;E=((s(m,b)|0)+(A&0xffff)|0)+(w>>>16)|0;S=((s(m,v)|0)+(E>>>16)|0)+(A>>>16)|0;_=E<<16|w&0xffff;i[d+C>>2]=_}C=$+T|0;_=i[d+C>>2]|0;w=((_&0xffff)+(S&0xffff)|0)+p|0;A=((_>>>16)+(S>>>16)|0)+(w>>>16)|0;i[d+C>>2]=A<<16|w&0xffff;p=A>>>16}c(n,d+n|0,l);f(n<<1);if(p|(h(r,n,l,n)|0)<=0){y(l,n,r,n,l,n)|0}}return{sreset:a,salloc:o,sfree:f,z:u,tst:d,neg:l,cmp:h,add:p,sub:y,mul:m,sqr:g,div:b,mredc:v}};function Number_extGCD(e,t){var r=e<0?-1:1,n=t<0?-1:1,i=1,s=0,a=0,o=1,f,c,u,l;e*=r;t*=n;l=e<t;if(l){u=e;e=t,t=u;u=r;r=n;n=u}c=Math.floor(e/t),f=e-c*t;while(f){u=i-c*s,i=s,s=u;u=a-c*o,a=o,o=u;e=t,t=f;c=Math.floor(e/t),f=e-c*t}s*=r;o*=n;if(l){u=s;s=o,o=u}return{gcd:t,x:s,y:o}}function BigNumber_extGCD(e,t){let r=e.sign;let n=t.sign;if(r<0)e=e.negate();if(n<0)t=t.negate();const i=e.compare(t);if(i<0){let i=e;e=t,t=i;let s=r;r=n;n=s}var s=BigNumber.ONE,a=BigNumber.ZERO,o=t.bitLength,f=BigNumber.ZERO,c=BigNumber.ONE,u=e.bitLength,l,h,d;l=e.divide(t);while((h=l.remainder)!==BigNumber.ZERO){d=l.quotient;l=s.subtract(d.multiply(a).clamp(o)).clamp(o),s=a,a=l;l=f.subtract(d.multiply(c).clamp(u)).clamp(u),f=c,c=l;e=t,t=h;l=e.divide(t)}if(r<0)a=a.negate();if(n<0)c=c.negate();if(i<0){let e=a;a=c,c=e}return{gcd:t,x:a,y:c}}function getRandomValues(e){if(typeof process!=="undefined"){const t=require("crypto");const r=t.randomBytes(e.length);e.set(r);return}if(window.crypto&&window.crypto.getRandomValues){window.crypto.getRandomValues(e);return}if(self.crypto&&self.crypto.getRandomValues){self.crypto.getRandomValues(e);return}if(window.msCrypto&&window.msCrypto.getRandomValues){window.msCrypto.getRandomValues(e);return}throw new Error("No secure random number generator available.")}const _bigint_stdlib={Uint32Array,Math};const _bigint_heap=new Uint32Array(1048576);let _bigint_asm;function _half_imul(e,t){return e*t|0}if(_bigint_stdlib.Math.imul===undefined){_bigint_stdlib.Math.imul=_half_imul;_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer);delete _bigint_stdlib.Math.imul}else{_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer)}const _BigNumber_ZERO_limbs=new Uint32Array(0);class BigNumber{constructor(e){let t=_BigNumber_ZERO_limbs;let r=0;let n=0;if(e===undefined);else{for(var i=0;!e[i];i++);r=(e.length-i)*8;if(!r)return BigNumber.ZERO;t=new Uint32Array(r+31>>5);for(var s=e.length-4;s>=i;s-=4){t[e.length-4-s>>2]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]}if(i-s===3){t[t.length-1]=e[i]}else if(i-s===2){t[t.length-1]=e[i]<<8|e[i+1]}else if(i-s===1){t[t.length-1]=e[i]<<16|e[i+1]<<8|e[i+2]}n=1}this.limbs=t;this.bitLength=r;this.sign=n}static fromString(e){const t=string_to_bytes(e);return new BigNumber(t)}static fromNumber(e){let t=_BigNumber_ZERO_limbs;let r=0;let n=0;var i=Math.abs(e);if(i>4294967295){t=new Uint32Array(2);t[0]=i|0;t[1]=i/4294967296|0;r=52}else if(i>0){t=new Uint32Array(1);t[0]=i;r=32}else{t=_BigNumber_ZERO_limbs;r=0}n=e<0?-1:1;return BigNumber.fromConfig({limbs:t,bitLength:r,sign:n})}static fromArrayBuffer(e){return new BigNumber(new Uint8Array(e))}static fromConfig(e){const t=new BigNumber;t.limbs=new Uint32Array(e.limbs);t.bitLength=e.bitLength;t.sign=e.sign;return t}toString(e){e=e||16;const t=this.limbs;const r=this.bitLength;let n="";if(e===16){for(var i=(r+31>>5)-1;i>=0;i--){var s=t[i].toString(16);n+="00000000".substr(s.length);n+=s}n=n.replace(/^0+/,"");if(!n.length)n="0"}else{throw new IllegalArgumentError("bad radix")}if(this.sign<0)n="-"+n;return n}toBytes(){const e=this.bitLength;const t=this.limbs;if(e===0)return new Uint8Array(0);const r=e+7>>3;const n=new Uint8Array(r);for(let e=0;e<r;e++){let i=r-e-1;n[e]=t[i>>2]>>((i&3)<<3)}return n}valueOf(){const e=this.limbs;const t=this.bitLength;const r=this.sign;if(!r)return 0;if(t<=32)return r*(e[0]>>>0);if(t<=52)return r*(4294967296*(e[1]>>>0)+(e[0]>>>0));let n,i,s=0;for(n=e.length-1;n>=0;n--){if((i=e[n])===0)continue;while((i<<s&2147483648)===0)s++;break}if(n===0)return r*(e[0]>>>0);return r*(1048576*((e[n]<<s|(s?e[n-1]>>>32-s:0))>>>0)+((e[n-1]<<s|(s&&n>1?e[n-2]>>>32-s:0))>>>12))*Math.pow(2,32*n-s-52)}clamp(e){const t=this.limbs;const r=this.bitLength;if(e>=r)return this;const n=new BigNumber;let i=e+31>>5;let s=e%32;n.limbs=new Uint32Array(t.subarray(0,i));n.bitLength=e;n.sign=this.sign;if(s)n.limbs[i-1]&=-1>>>32-s;return n}slice(e,t){const r=this.limbs;const n=this.bitLength;if(e<0)throw new RangeError("TODO");if(e>=n)return BigNumber.ZERO;if(t===undefined||t>n-e)t=n-e;const i=new BigNumber;let s=e>>5;let a=e+t+31>>5;let o=t+31>>5;let f=e%32;let c=t%32;const u=new Uint32Array(o);if(f){for(var l=0;l<a-s-1;l++){u[l]=r[s+l]>>>f|r[s+l+1]<<32-f}u[l]=r[s+l]>>>f}else{u.set(r.subarray(s,a))}if(c){u[o-1]&=-1>>>32-c}i.limbs=u;i.bitLength=t;i.sign=this.sign;return i}negate(){const e=new BigNumber;e.limbs=this.limbs;e.bitLength=this.bitLength;e.sign=-1*this.sign;return e}compare(e){var t=this.limbs,r=t.length,n=e.limbs,i=n.length,s=0;if(this.sign<e.sign)return-1;if(this.sign>e.sign)return 1;_bigint_heap.set(t,0);_bigint_heap.set(n,r);s=_bigint_asm.cmp(0,r<<2,r<<2,i<<2);return s*this.sign}add(e){if(!this.sign)return e;if(!e.sign)return this;var t=this.bitLength,r=this.limbs,n=r.length,i=this.sign,s=e.bitLength,a=e.limbs,o=a.length,f=e.sign,c,u,l,h,d=new BigNumber;c=(t>s?t:s)+(i*f>0?1:0);u=c+31>>5;_bigint_asm.sreset();var p=_bigint_asm.salloc(n<<2),y=_bigint_asm.salloc(o<<2),m=_bigint_asm.salloc(u<<2);_bigint_asm.z(m-p+(u<<2),0,p);_bigint_heap.set(r,p>>2);_bigint_heap.set(a,y>>2);if(i*f>0){_bigint_asm.add(p,n<<2,y,o<<2,m,u<<2);l=i}else if(i>f){h=_bigint_asm.sub(p,n<<2,y,o<<2,m,u<<2);l=h?f:i}else{h=_bigint_asm.sub(y,o<<2,p,n<<2,m,u<<2);l=h?i:f}if(h)_bigint_asm.neg(m,u<<2,m,u<<2);if(_bigint_asm.tst(m,u<<2)===0)return BigNumber.ZERO;d.limbs=new Uint32Array(_bigint_heap.subarray(m>>2,(m>>2)+u));d.bitLength=c;d.sign=l;return d}subtract(e){return this.add(e.negate())}square(){if(!this.sign)return BigNumber.ZERO;var e=this.bitLength,t=this.limbs,r=t.length,n,i,s=new BigNumber;n=e<<1;i=n+31>>5;_bigint_asm.sreset();var a=_bigint_asm.salloc(r<<2),o=_bigint_asm.salloc(i<<2);_bigint_asm.z(o-a+(i<<2),0,a);_bigint_heap.set(t,a>>2);_bigint_asm.sqr(a,r<<2,o);s.limbs=new Uint32Array(_bigint_heap.subarray(o>>2,(o>>2)+i));s.bitLength=n;s.sign=1;return s}divide(e){var t=this.bitLength,r=this.limbs,n=r.length,i=e.bitLength,s=e.limbs,a=s.length,o,f,c=BigNumber.ZERO,u=BigNumber.ZERO;_bigint_asm.sreset();var l=_bigint_asm.salloc(n<<2),h=_bigint_asm.salloc(a<<2),d=_bigint_asm.salloc(n<<2);_bigint_asm.z(d-l+(n<<2),0,l);_bigint_heap.set(r,l>>2);_bigint_heap.set(s,h>>2);_bigint_asm.div(l,n<<2,h,a<<2,d);o=_bigint_asm.tst(d,n<<2)>>2;if(o){c=new BigNumber;c.limbs=new Uint32Array(_bigint_heap.subarray(d>>2,(d>>2)+o));c.bitLength=t<o<<5?t:o<<5;c.sign=this.sign*e.sign}f=_bigint_asm.tst(l,a<<2)>>2;if(f){u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(l>>2,(l>>2)+f));u.bitLength=i<f<<5?i:f<<5;u.sign=this.sign}return{quotient:c,remainder:u}}multiply(e){if(!this.sign||!e.sign)return BigNumber.ZERO;var t=this.bitLength,r=this.limbs,n=r.length,i=e.bitLength,s=e.limbs,a=s.length,o,f,c=new BigNumber;o=t+i;f=o+31>>5;_bigint_asm.sreset();var u=_bigint_asm.salloc(n<<2),l=_bigint_asm.salloc(a<<2),h=_bigint_asm.salloc(f<<2);_bigint_asm.z(h-u+(f<<2),0,u);_bigint_heap.set(r,u>>2);_bigint_heap.set(s,l>>2);_bigint_asm.mul(u,n<<2,l,a<<2,h,f<<2);c.limbs=new Uint32Array(_bigint_heap.subarray(h>>2,(h>>2)+f));c.sign=this.sign*e.sign;c.bitLength=o;return c}isMillerRabinProbablePrime(e){var t=BigNumber.fromConfig(this),r=0;t.limbs[0]-=1;while(t.limbs[r>>5]===0)r+=32;while((t.limbs[r>>5]>>(r&31)&1)===0)r++;t=t.slice(r);var n=new Modulus(this),i=this.subtract(BigNumber.ONE),s=BigNumber.fromConfig(this),a=this.limbs.length-1;while(s.limbs[a]===0)a--;while(--e>=0){getRandomValues(s.limbs);if(s.limbs[0]<2)s.limbs[0]+=2;while(s.compare(i)>=0)s.limbs[a]>>>=1;var o=n.power(s,t);if(o.compare(BigNumber.ONE)===0)continue;if(o.compare(i)===0)continue;var f=r;while(--f>0){o=o.square().divide(n).remainder;if(o.compare(BigNumber.ONE)===0)return false;if(o.compare(i)===0)break}if(f===0)return false}return true}isProbablePrime(e=80){var t=this.limbs;var r=0;if((t[0]&1)===0)return false;if(e<=1)return true;var n=0,i=0,s=0;for(r=0;r<t.length;r++){var a=t[r];while(a){n+=a&3;a>>>=2}var o=t[r];while(o){i+=o&3;o>>>=2;i-=o&3;o>>>=2}var f=t[r];while(f){s+=f&15;f>>>=4;s-=f&15;f>>>=4}}if(!(n%3)||!(i%5)||!(s%17))return false;if(e<=2)return true;return this.isMillerRabinProbablePrime(e>>>1)}}BigNumber.extGCD=BigNumber_extGCD;BigNumber.ZERO=BigNumber.fromNumber(0);BigNumber.ONE=BigNumber.fromNumber(1);class Modulus extends BigNumber{constructor(e){super();this.limbs=e.limbs;this.bitLength=e.bitLength;this.sign=e.sign;if(this.valueOf()<1)throw new RangeError;if(this.bitLength<=32)return;let t;if(this.limbs[0]&1){const e=(this.bitLength+31&-32)+1;const r=new Uint32Array(e+31>>5);r[r.length-1]=1;t=new BigNumber;t.sign=1;t.bitLength=e;t.limbs=r;const n=Number_extGCD(4294967296,this.limbs[0]).y;this.coefficient=n<0?-n:4294967296-n}else{return}this.comodulus=t;this.comodulusRemainder=t.divide(this).remainder;this.comodulusRemainderSquare=t.square().divide(this).remainder}reduce(e){if(e.bitLength<=32&&this.bitLength<=32)return BigNumber.fromNumber(e.valueOf()%this.valueOf());if(e.compare(this)<0)return e;return e.divide(this).remainder}inverse(e){e=this.reduce(e);const t=BigNumber_extGCD(this,e);if(t.gcd.valueOf()!==1)throw new Error("GCD is not 1");if(t.y.sign<0)return t.y.add(this).clamp(this.bitLength);return t.y}power(e,t){let r=0;for(let e=0;e<t.limbs.length;e++){let n=t.limbs[e];while(n){if(n&1)r++;n>>>=1}}let n=8;if(t.bitLength<=4536)n=7;if(t.bitLength<=1736)n=6;if(t.bitLength<=630)n=5;if(t.bitLength<=210)n=4;if(t.bitLength<=60)n=3;if(t.bitLength<=12)n=2;if(r<=1<<n-1)n=1;e=Modulus._Montgomery_reduce(this.reduce(e).multiply(this.comodulusRemainderSquare),this);const i=Modulus._Montgomery_reduce(e.square(),this),s=new Array(1<<n-1);s[0]=e;s[1]=Modulus._Montgomery_reduce(e.multiply(i),this);for(let e=2;e<1<<n-1;e++){s[e]=Modulus._Montgomery_reduce(s[e-1].multiply(i),this)}const a=this.comodulusRemainder;let o=a;for(let e=t.limbs.length-1;e>=0;e--){let r=t.limbs[e];for(let e=32;e>0;){if(r&2147483648){let t=r>>>32-n,i=n;while((t&1)===0){t>>>=1;i--}var f=s[t>>>1];while(t){t>>>=1;if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this)}o=o!==a?Modulus._Montgomery_reduce(o.multiply(f),this):f;r<<=i,e-=i}else{if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this);r<<=1,e--}}}return Modulus._Montgomery_reduce(o,this)}static _Montgomery_reduce(e,t){const r=e.limbs;const n=r.length;const i=t.limbs;const s=i.length;const a=t.coefficient;_bigint_asm.sreset();const o=_bigint_asm.salloc(n<<2),f=_bigint_asm.salloc(s<<2),c=_bigint_asm.salloc(s<<2);_bigint_asm.z(c-o+(s<<2),0,o);_bigint_heap.set(r,o>>2);_bigint_heap.set(i,f>>2);_bigint_asm.mredc(o,n<<2,f,s<<2,a,c);const u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(c>>2,(c>>2)+s));u.bitLength=t.bitLength;u.sign=1;return u}}var sha1_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0;var u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0;var w=new e.Uint8Array(r);function A(e,t,r,f,c,u,l,h,d,p,y,m,g,b,v,w){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;u=u|0;l=l|0;h=h|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;v=v|0;w=w|0;var A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0,B=0,D=0,U=0,L=0,F=0,j=0,H=0,K=0,G=0,V=0,z=0,W=0,X=0,Y=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0,de=0,pe=0,ye=0,me=0,ge=0,be=0,ve=0,we=0,Ae=0,Ee=0,_e=0,Se=0,$e=0,Te=0,Ce=0,Pe=0,xe=0,Ie=0,ke=0,Ne=0,Re=0,Me=0,Oe=0,Be=0,De=0;A=n;E=i;_=s;S=a;$=o;C=e+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=t+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=r+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=f+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=c+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=u+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=l+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=h+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=d+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=p+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=y+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=m+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=g+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=b+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=v+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;C=w+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=b^d^r^e;P=T<<1|T>>>31;C=P+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=v^p^f^t;x=T<<1|T>>>31;C=x+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=w^y^c^r;I=T<<1|T>>>31;C=I+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=P^m^u^f;k=T<<1|T>>>31;C=k+(A<<5|A>>>27)+$+(E&_|~E&S)+0x5a827999|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=x^g^l^c;N=T<<1|T>>>31;C=N+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=I^b^h^u;R=T<<1|T>>>31;C=R+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=k^v^d^l;M=T<<1|T>>>31;C=M+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=N^w^p^h;O=T<<1|T>>>31;C=O+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=R^P^y^d;B=T<<1|T>>>31;C=B+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=M^x^m^p;D=T<<1|T>>>31;C=D+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=O^I^g^y;U=T<<1|T>>>31;C=U+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=B^k^b^m;L=T<<1|T>>>31;C=L+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=D^N^v^g;F=T<<1|T>>>31;C=F+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=U^R^w^b;j=T<<1|T>>>31;C=j+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=L^M^P^v;H=T<<1|T>>>31;C=H+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=F^O^x^w;K=T<<1|T>>>31;C=K+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=j^B^I^P;G=T<<1|T>>>31;C=G+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=H^D^k^x;V=T<<1|T>>>31;C=V+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=K^U^N^I;z=T<<1|T>>>31;C=z+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=G^L^R^k;W=T<<1|T>>>31;C=W+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=V^F^M^N;X=T<<1|T>>>31;C=X+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=z^j^O^R;Y=T<<1|T>>>31;C=Y+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=W^H^B^M;J=T<<1|T>>>31;C=J+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=X^K^D^O;q=T<<1|T>>>31;C=q+(A<<5|A>>>27)+$+(E^_^S)+0x6ed9eba1|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Y^G^U^B;Q=T<<1|T>>>31;C=Q+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=J^V^L^D;Z=T<<1|T>>>31;C=Z+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=q^z^F^U;ee=T<<1|T>>>31;C=ee+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Q^W^j^L;te=T<<1|T>>>31;C=te+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Z^X^H^F;re=T<<1|T>>>31;C=re+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ee^Y^K^j;ne=T<<1|T>>>31;C=ne+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=te^J^G^H;ie=T<<1|T>>>31;C=ie+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=re^q^V^K;se=T<<1|T>>>31;C=se+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ne^Q^z^G;ae=T<<1|T>>>31;C=ae+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ie^Z^W^V;oe=T<<1|T>>>31;C=oe+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=se^ee^X^z;fe=T<<1|T>>>31;C=fe+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ae^te^Y^W;ce=T<<1|T>>>31;C=ce+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=oe^re^J^X;ue=T<<1|T>>>31;C=ue+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=fe^ne^q^Y;le=T<<1|T>>>31;C=le+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ce^ie^Q^J;he=T<<1|T>>>31;C=he+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ue^se^Z^q;de=T<<1|T>>>31;C=de+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=le^ae^ee^Q;pe=T<<1|T>>>31;C=pe+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=he^oe^te^Z;ye=T<<1|T>>>31;C=ye+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=de^fe^re^ee;me=T<<1|T>>>31;C=me+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=pe^ce^ne^te;ge=T<<1|T>>>31;C=ge+(A<<5|A>>>27)+$+(E&_|E&S|_&S)-0x70e44324|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ye^ue^ie^re;be=T<<1|T>>>31;C=be+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=me^le^se^ne;ve=T<<1|T>>>31;C=ve+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ge^he^ae^ie;we=T<<1|T>>>31;C=we+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=be^de^oe^se;Ae=T<<1|T>>>31;C=Ae+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ve^pe^fe^ae;Ee=T<<1|T>>>31;C=Ee+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=we^ye^ce^oe;_e=T<<1|T>>>31;C=_e+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Ae^me^ue^fe;Se=T<<1|T>>>31;C=Se+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Ee^ge^le^ce;$e=T<<1|T>>>31;C=$e+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=_e^be^he^ue;Te=T<<1|T>>>31;C=Te+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Se^ve^de^le;Ce=T<<1|T>>>31;C=Ce+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=$e^we^pe^he;Pe=T<<1|T>>>31;C=Pe+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Te^Ae^ye^de;xe=T<<1|T>>>31;C=xe+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Ce^Ee^me^pe;Ie=T<<1|T>>>31;C=Ie+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Pe^_e^ge^ye;ke=T<<1|T>>>31;C=ke+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=xe^Se^be^me;Ne=T<<1|T>>>31;C=Ne+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Ie^$e^ve^ge;Re=T<<1|T>>>31;C=Re+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=ke^Te^we^be;Me=T<<1|T>>>31;C=Me+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Ne^Ce^Ae^ve;Oe=T<<1|T>>>31;C=Oe+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Re^Pe^Ee^we;Be=T<<1|T>>>31;C=Be+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;T=Me^xe^_e^Ae;De=T<<1|T>>>31;C=De+(A<<5|A>>>27)+$+(E^_^S)-0x359d3e2a|0;$=S;S=_;_=E<<30|E>>>2;E=A;A=C;n=n+A|0;i=i+E|0;s=s+_|0;a=a+S|0;o=o+$|0}function E(e){e=e|0;A(w[e|0]<<24|w[e|1]<<16|w[e|2]<<8|w[e|3],w[e|4]<<24|w[e|5]<<16|w[e|6]<<8|w[e|7],w[e|8]<<24|w[e|9]<<16|w[e|10]<<8|w[e|11],w[e|12]<<24|w[e|13]<<16|w[e|14]<<8|w[e|15],w[e|16]<<24|w[e|17]<<16|w[e|18]<<8|w[e|19],w[e|20]<<24|w[e|21]<<16|w[e|22]<<8|w[e|23],w[e|24]<<24|w[e|25]<<16|w[e|26]<<8|w[e|27],w[e|28]<<24|w[e|29]<<16|w[e|30]<<8|w[e|31],w[e|32]<<24|w[e|33]<<16|w[e|34]<<8|w[e|35],w[e|36]<<24|w[e|37]<<16|w[e|38]<<8|w[e|39],w[e|40]<<24|w[e|41]<<16|w[e|42]<<8|w[e|43],w[e|44]<<24|w[e|45]<<16|w[e|46]<<8|w[e|47],w[e|48]<<24|w[e|49]<<16|w[e|50]<<8|w[e|51],w[e|52]<<24|w[e|53]<<16|w[e|54]<<8|w[e|55],w[e|56]<<24|w[e|57]<<16|w[e|58]<<8|w[e|59],w[e|60]<<24|w[e|61]<<16|w[e|62]<<8|w[e|63])}function _(e){e=e|0;w[e|0]=n>>>24;w[e|1]=n>>>16&255;w[e|2]=n>>>8&255;w[e|3]=n&255;w[e|4]=i>>>24;w[e|5]=i>>>16&255;w[e|6]=i>>>8&255;w[e|7]=i&255;w[e|8]=s>>>24;w[e|9]=s>>>16&255;w[e|10]=s>>>8&255;w[e|11]=s&255;w[e|12]=a>>>24;w[e|13]=a>>>16&255;w[e|14]=a>>>8&255;w[e|15]=a&255;w[e|16]=o>>>24;w[e|17]=o>>>16&255;w[e|18]=o>>>8&255;w[e|19]=o&255}function S(){n=0x67452301;i=0xefcdab89;s=0x98badcfe;a=0x10325476;o=0xc3d2e1f0;f=c=0}function $(e,t,r,u,l,h,d){e=e|0;t=t|0;r=r|0;u=u|0;l=l|0;h=h|0;d=d|0;n=e;i=t;s=r;a=u;o=l;f=h;c=d}function T(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){E(e);e=e+64|0;t=t-64|0;r=r+64|0}f=f+r|0;if(f>>>0<r>>>0)c=c+1|0;return r|0}function C(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){n=T(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;f=f+t|0;if(f>>>0<t>>>0)c=c+1|0;w[e|t]=0x80;if((t|0)>=56){for(i=t+1|0;(i|0)<64;i=i+1|0)w[e|i]=0x00;E(e);t=0;w[e|0]=0}for(i=t+1|0;(i|0)<59;i=i+1|0)w[e|i]=0;w[e|56]=c>>>21&255;w[e|57]=c>>>13&255;w[e|58]=c>>>5&255;w[e|59]=c<<3&255|f>>>29;w[e|60]=f>>>21&255;w[e|61]=f>>>13&255;w[e|62]=f>>>5&255;w[e|63]=f<<3&255;E(e);if(~r)_(r);return n|0}function P(){n=u;i=l;s=h;a=d;o=p;f=64;c=0}function x(){n=y;i=m;s=g;a=b;o=v;f=64;c=0}function I(e,t,r,w,E,_,$,T,C,P,x,I,k,N,R,M){e=e|0;t=t|0;r=r|0;w=w|0;E=E|0;_=_|0;$=$|0;T=T|0;C=C|0;P=P|0;x=x|0;I=I|0;k=k|0;N=N|0;R=R|0;M=M|0;S();A(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,w^0x5c5c5c5c,E^0x5c5c5c5c,_^0x5c5c5c5c,$^0x5c5c5c5c,T^0x5c5c5c5c,C^0x5c5c5c5c,P^0x5c5c5c5c,x^0x5c5c5c5c,I^0x5c5c5c5c,k^0x5c5c5c5c,N^0x5c5c5c5c,R^0x5c5c5c5c,M^0x5c5c5c5c);y=n;m=i;g=s;b=a;v=o;S();A(e^0x36363636,t^0x36363636,r^0x36363636,w^0x36363636,E^0x36363636,_^0x36363636,$^0x36363636,T^0x36363636,C^0x36363636,P^0x36363636,x^0x36363636,I^0x36363636,k^0x36363636,N^0x36363636,R^0x36363636,M^0x36363636);u=n;l=i;h=s;d=a;p=o;f=64;c=0}function k(e,t,r){e=e|0;t=t|0;r=r|0;var f=0,c=0,u=0,l=0,h=0,d=0;if(e&63)return-1;if(~r)if(r&31)return-1;d=C(e,t,-1)|0;f=n,c=i,u=s,l=a,h=o;x();A(f,c,u,l,h,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~r)_(r);return d|0}function N(e,t,r,f,c){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;var u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0;if(e&63)return-1;if(~c)if(c&31)return-1;w[e+t|0]=r>>>24;w[e+t+1|0]=r>>>16&255;w[e+t+2|0]=r>>>8&255;w[e+t+3|0]=r&255;k(e,t+4|0,-1)|0;u=y=n,l=m=i,h=g=s,d=b=a,p=v=o;f=f-1|0;while((f|0)>0){P();A(y,m,g,b,v,0x80000000,0,0,0,0,0,0,0,0,0,672);y=n,m=i,g=s,b=a,v=o;x();A(y,m,g,b,v,0x80000000,0,0,0,0,0,0,0,0,0,672);y=n,m=i,g=s,b=a,v=o;u=u^n;l=l^i;h=h^s;d=d^a;p=p^o;f=f-1|0}n=u;i=l;s=h;a=d;o=p;if(~c)_(c);return 0}return{reset:S,init:$,process:T,finish:C,hmac_reset:P,hmac_init:I,hmac_finish:k,pbkdf2_generate_block:N}};class Hash{constructor(){this.pos=0;this.len=0}reset(){this.result=null;this.pos=0;this.len=0;this.asm.reset();return this}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");let t=this.asm;let r=this.heap;let n=this.pos;let i=this.len;let s=0;let a=e.length;let o=0;while(a>0){o=_heap_write(r,n+i,e,s,a);i+=o;s+=o;a-=o;o=t.process(n,i);n+=o;i-=o;if(!i)n=0}this.pos=n;this.len=i;return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.asm.finish(this.pos,this.len,0);this.result=new Uint8Array(this.HASH_SIZE);this.result.set(this.heap.subarray(0,this.HASH_SIZE));this.pos=0;this.len=0;return this}}const _sha1_block_size=64;const _sha1_hash_size=20;class Sha1 extends Hash{constructor(){super();this.NAME="sha1";this.BLOCK_SIZE=_sha1_block_size;this.HASH_SIZE=_sha1_hash_size;this.heap=_heap_init();this.asm=sha1_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha1.NAME="sha1";var sha256_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0;var d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0;var x=new e.Uint8Array(r);function I(e,t,r,l,h,d,p,y,m,g,b,v,w,A,E,_){e=e|0;t=t|0;r=r|0;l=l|0;h=h|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;v=v|0;w=w|0;A=A|0;E=E|0;_=_|0;var S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0;S=n;$=i;T=s;C=a;P=o;x=f;I=c;k=u;k=e+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0x428a2f98|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;I=t+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0x71374491|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;x=r+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0xb5c0fbcf|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;P=l+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0xe9b5dba5|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;C=h+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x3956c25b|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;T=d+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0x59f111f1|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;$=p+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x923f82a4|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;S=y+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0xab1c5ed5|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;k=m+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0xd807aa98|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;I=g+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0x12835b01|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;x=b+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0x243185be|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;P=v+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0x550c7dc3|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;C=w+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x72be5d74|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;T=A+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0x80deb1fe|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;$=E+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x9bdc06a7|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;S=_+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0xc19bf174|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+e+g|0;k=e+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0xe49b69c1|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;I=t+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0xefbe4786|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+v|0;x=r+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0x0fc19dc6|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;P=l+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0x240ca1cc|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+A|0;C=h+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x2de92c6f|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+E|0;T=d+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0x4a7484aa|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x5cb0a9dc|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0x76f988da|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;k=m+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0x983e5152|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;I=g+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0xa831c66d|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;b=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;x=b+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0xb00327c8|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+h|0;P=v+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0xbf597fc7|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;C=w+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0xc6e00bf3|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;A=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+A+p|0;T=A+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0xd5a79147|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+E+y|0;$=E+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x06ca6351|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+_+m|0;S=_+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0x14292967|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+e+g|0;k=e+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0x27b70a85|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;I=t+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0x2e1b2138|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+v|0;x=r+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0x4d2c6dfc|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;P=l+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0x53380d13|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+A|0;C=h+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x650a7354|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+E|0;T=d+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0x766a0abb|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x81c2c92e|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0x92722c85|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;k=m+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0xa2bfe8a1|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;I=g+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0xa81a664b|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;b=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;x=b+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0xc24b8b70|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+h|0;P=v+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0xc76c51a3|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;C=w+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0xd192e819|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;A=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+A+p|0;T=A+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0xd6990624|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+E+y|0;$=E+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0xf40e3585|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+_+m|0;S=_+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0x106aa070|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+e+g|0;k=e+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0x19a4c116|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+t+b|0;I=t+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0x1e376c08|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;r=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+v|0;x=r+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0x2748774c|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+l+w|0;P=l+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0x34b0bcb5|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+h+A|0;C=h+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x391c0cb3|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+d+E|0;T=d+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0x4ed8aa4a|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;p=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+p+_|0;$=p+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0x5b9cca4f|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;y=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+y+e|0;S=y+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0x682e6ff3|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;k=m+k+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(x^I))+0x748f82ee|0;C=C+k|0;k=k+(S&$^T&(S^$))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+g+r|0;I=g+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(x^C&(P^x))+0x78a5636f|0;T=T+I|0;I=I+(k&S^$&(k^S))+(k>>>2^k>>>13^k>>>22^k<<30^k<<19^k<<10)|0;b=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+b+l|0;x=b+x+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(P^T&(C^P))+0x84c87814|0;$=$+x|0;x=x+(I&k^S&(I^k))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;v=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+v+h|0;P=v+P+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(C^$&(T^C))+0x8cc70208|0;S=S+P|0;P=P+(x&I^k&(x^I))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+w+d|0;C=w+C+(S>>>6^S>>>11^S>>>25^S<<26^S<<21^S<<7)+(T^S&($^T))+0x90befffa|0;k=k+C|0;C=C+(P&x^I&(P^x))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;A=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+A+p|0;T=A+T+(k>>>6^k>>>11^k>>>25^k<<26^k<<21^k<<7)+($^k&(S^$))+0xa4506ceb|0;I=I+T|0;T=T+(C&P^x&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+E+y|0;$=E+$+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(S^I&(k^S))+0xbef9a3f7|0;x=x+$|0;$=$+(T&C^P&(T^C))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;_=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+_+m|0;S=_+S+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(k^x&(I^k))+0xc67178f2|0;P=P+S|0;S=S+($&T^C&($^T))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;n=n+S|0;i=i+$|0;s=s+T|0;a=a+C|0;o=o+P|0;f=f+x|0;c=c+I|0;u=u+k|0}function k(e){e=e|0;I(x[e|0]<<24|x[e|1]<<16|x[e|2]<<8|x[e|3],x[e|4]<<24|x[e|5]<<16|x[e|6]<<8|x[e|7],x[e|8]<<24|x[e|9]<<16|x[e|10]<<8|x[e|11],x[e|12]<<24|x[e|13]<<16|x[e|14]<<8|x[e|15],x[e|16]<<24|x[e|17]<<16|x[e|18]<<8|x[e|19],x[e|20]<<24|x[e|21]<<16|x[e|22]<<8|x[e|23],x[e|24]<<24|x[e|25]<<16|x[e|26]<<8|x[e|27],x[e|28]<<24|x[e|29]<<16|x[e|30]<<8|x[e|31],x[e|32]<<24|x[e|33]<<16|x[e|34]<<8|x[e|35],x[e|36]<<24|x[e|37]<<16|x[e|38]<<8|x[e|39],x[e|40]<<24|x[e|41]<<16|x[e|42]<<8|x[e|43],x[e|44]<<24|x[e|45]<<16|x[e|46]<<8|x[e|47],x[e|48]<<24|x[e|49]<<16|x[e|50]<<8|x[e|51],x[e|52]<<24|x[e|53]<<16|x[e|54]<<8|x[e|55],x[e|56]<<24|x[e|57]<<16|x[e|58]<<8|x[e|59],x[e|60]<<24|x[e|61]<<16|x[e|62]<<8|x[e|63])}function N(e){e=e|0;x[e|0]=n>>>24;x[e|1]=n>>>16&255;x[e|2]=n>>>8&255;x[e|3]=n&255;x[e|4]=i>>>24;x[e|5]=i>>>16&255;x[e|6]=i>>>8&255;x[e|7]=i&255;x[e|8]=s>>>24;x[e|9]=s>>>16&255;x[e|10]=s>>>8&255;x[e|11]=s&255;x[e|12]=a>>>24;x[e|13]=a>>>16&255;x[e|14]=a>>>8&255;x[e|15]=a&255;x[e|16]=o>>>24;x[e|17]=o>>>16&255;x[e|18]=o>>>8&255;x[e|19]=o&255;x[e|20]=f>>>24;x[e|21]=f>>>16&255;x[e|22]=f>>>8&255;x[e|23]=f&255;x[e|24]=c>>>24;x[e|25]=c>>>16&255;x[e|26]=c>>>8&255;x[e|27]=c&255;x[e|28]=u>>>24;x[e|29]=u>>>16&255;x[e|30]=u>>>8&255;x[e|31]=u&255}function R(){n=0x6a09e667;i=0xbb67ae85;s=0x3c6ef372;a=0xa54ff53a;o=0x510e527f;f=0x9b05688c;c=0x1f83d9ab;u=0x5be0cd19;l=h=0}function M(e,t,r,d,p,y,m,g,b,v){e=e|0;t=t|0;r=r|0;d=d|0;p=p|0;y=y|0;m=m|0;g=g|0;b=b|0;v=v|0;n=e;i=t;s=r;a=d;o=p;f=y;c=m;u=g;l=b;h=v}function O(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){k(e);e=e+64|0;t=t-64|0;r=r+64|0}l=l+r|0;if(l>>>0<r>>>0)h=h+1|0;return r|0}function B(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){n=O(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;l=l+t|0;if(l>>>0<t>>>0)h=h+1|0;x[e|t]=0x80;if((t|0)>=56){for(i=t+1|0;(i|0)<64;i=i+1|0)x[e|i]=0x00;k(e);t=0;x[e|0]=0}for(i=t+1|0;(i|0)<59;i=i+1|0)x[e|i]=0;x[e|56]=h>>>21&255;x[e|57]=h>>>13&255;x[e|58]=h>>>5&255;x[e|59]=h<<3&255|l>>>29;x[e|60]=l>>>21&255;x[e|61]=l>>>13&255;x[e|62]=l>>>5&255;x[e|63]=l<<3&255;k(e);if(~r)N(r);return n|0}function D(){n=d;i=p;s=y;a=m;o=g;f=b;c=v;u=w;l=64;h=0}function U(){n=A;i=E;s=_;a=S;o=$;f=T;c=C;u=P;l=64;h=0}function L(e,t,r,x,k,N,M,O,B,D,U,L,F,j,H,K){e=e|0;t=t|0;r=r|0;x=x|0;k=k|0;N=N|0;M=M|0;O=O|0;B=B|0;D=D|0;U=U|0;L=L|0;F=F|0;j=j|0;H=H|0;K=K|0;R();I(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,x^0x5c5c5c5c,k^0x5c5c5c5c,N^0x5c5c5c5c,M^0x5c5c5c5c,O^0x5c5c5c5c,B^0x5c5c5c5c,D^0x5c5c5c5c,U^0x5c5c5c5c,L^0x5c5c5c5c,F^0x5c5c5c5c,j^0x5c5c5c5c,H^0x5c5c5c5c,K^0x5c5c5c5c);A=n;E=i;_=s;S=a;$=o;T=f;C=c;P=u;R();I(e^0x36363636,t^0x36363636,r^0x36363636,x^0x36363636,k^0x36363636,N^0x36363636,M^0x36363636,O^0x36363636,B^0x36363636,D^0x36363636,U^0x36363636,L^0x36363636,F^0x36363636,j^0x36363636,H^0x36363636,K^0x36363636);d=n;p=i;y=s;m=a;g=o;b=f;v=c;w=u;l=64;h=0}function F(e,t,r){e=e|0;t=t|0;r=r|0;var l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0;if(e&63)return-1;if(~r)if(r&31)return-1;v=B(e,t,-1)|0;l=n,h=i,d=s,p=a,y=o,m=f,g=c,b=u;U();I(l,h,d,p,y,m,g,b,0x80000000,0,0,0,0,0,0,768);if(~r)N(r);return v|0}function j(e,t,r,l,h){e=e|0;t=t|0;r=r|0;l=l|0;h=h|0;var d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0;if(e&63)return-1;if(~h)if(h&31)return-1;x[e+t|0]=r>>>24;x[e+t+1|0]=r>>>16&255;x[e+t+2|0]=r>>>8&255;x[e+t+3|0]=r&255;F(e,t+4|0,-1)|0;d=A=n,p=E=i,y=_=s,m=S=a,g=$=o,b=T=f,v=C=c,w=P=u;l=l-1|0;while((l|0)>0){D();I(A,E,_,S,$,T,C,P,0x80000000,0,0,0,0,0,0,768);A=n,E=i,_=s,S=a,$=o,T=f,C=c,P=u;U();I(A,E,_,S,$,T,C,P,0x80000000,0,0,0,0,0,0,768);A=n,E=i,_=s,S=a,$=o,T=f,C=c,P=u;d=d^n;p=p^i;y=y^s;m=m^a;g=g^o;b=b^f;v=v^c;w=w^u;l=l-1|0}n=d;i=p;s=y;a=m;o=g;f=b;c=v;u=w;if(~h)N(h);return 0}return{reset:R,init:M,process:O,finish:B,hmac_reset:D,hmac_init:L,hmac_finish:F,pbkdf2_generate_block:j}};const _sha256_block_size=64;const _sha256_hash_size=32;class Sha256 extends Hash{constructor(){super();this.NAME="sha256";this.BLOCK_SIZE=_sha256_block_size;this.HASH_SIZE=_sha256_hash_size;this.heap=_heap_init();this.asm=sha256_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha256.NAME="sha256";var sha512_asm=function(e,t,r){"use asm";var n=0,i=0,s=0,a=0,o=0,f=0,c=0,u=0,l=0,h=0,d=0,p=0,y=0,m=0,g=0,b=0,v=0,w=0;var A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0,B=0,D=0,U=0,L=0,F=0,j=0,H=0,K=0,G=0,V=0,z=0,W=0,X=0,Y=0,J=0,q=0,Q=0;var Z=new e.Uint8Array(r);function ee(e,t,r,v,w,A,E,_,S,$,T,C,P,x,I,k,N,R,M,O,B,D,U,L,F,j,H,K,G,V,z,W){e=e|0;t=t|0;r=r|0;v=v|0;w=w|0;A=A|0;E=E|0;_=_|0;S=S|0;$=$|0;T=T|0;C=C|0;P=P|0;x=x|0;I=I|0;k=k|0;N=N|0;R=R|0;M=M|0;O=O|0;B=B|0;D=D|0;U=U|0;L=L|0;F=F|0;j=j|0;H=H|0;K=K|0;G=G|0;V=V|0;z=z|0;W=W|0;var X=0,Y=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ne=0,ie=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,le=0,he=0;X=n;Y=i;J=s;q=a;Q=o;Z=f;ee=c;te=u;re=l;ne=h;ie=d;se=p;ae=y;oe=m;fe=g;ce=b;le=0xd728ae22+t|0;ue=0x428a2f98+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x23ef65cd+v|0;ue=0x71374491+r+(le>>>0<v>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xec4d3b2f+A|0;ue=0xb5c0fbcf+w+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x8189dbbc+_|0;ue=0xe9b5dba5+E+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xf348b538+$|0;ue=0x3956c25b+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xb605d019+C|0;ue=0x59f111f1+T+(le>>>0<C>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xaf194f9b+x|0;ue=0x923f82a4+P+(le>>>0<x>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xda6d8118+k|0;ue=0xab1c5ed5+I+(le>>>0<k>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xa3030242+R|0;ue=0xd807aa98+N+(le>>>0<R>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x45706fbe+O|0;ue=0x12835b01+M+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x4ee4b28c+D|0;ue=0x243185be+B+(le>>>0<D>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xd5ffb4e2+L|0;ue=0x550c7dc3+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xf27b896f+j|0;ue=0x72be5d74+F+(le>>>0<j>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x3b1696b1+K|0;ue=0x80deb1fe+H+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0x25c71235+V|0;ue=0x9bdc06a7+G+(le>>>0<V>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;le=0xcf692694+W|0;ue=0xc19bf174+z+(le>>>0<W>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;t=t+O|0;e=e+M+(t>>>0<O>>>0?1:0)|0;he=(v>>>1|r<<31)^(v>>>8|r<<24)^(v>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|v<<31)^(r>>>8|v<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(V>>>19|G<<13)^(V<<3|G>>>29)^(V>>>6|G<<26)|0;t=t+he|0;e=e+((G>>>19|V<<13)^(G<<3|V>>>29)^G>>>6)+(t>>>0<he>>>0?1:0)|0;le=0x9ef14ad2+t|0;ue=0xe49b69c1+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;v=v+D|0;r=r+B+(v>>>0<D>>>0?1:0)|0;he=(A>>>1|w<<31)^(A>>>8|w<<24)^(A>>>7|w<<25)|0;v=v+he|0;r=r+((w>>>1|A<<31)^(w>>>8|A<<24)^w>>>7)+(v>>>0<he>>>0?1:0)|0;he=(W>>>19|z<<13)^(W<<3|z>>>29)^(W>>>6|z<<26)|0;v=v+he|0;r=r+((z>>>19|W<<13)^(z<<3|W>>>29)^z>>>6)+(v>>>0<he>>>0?1:0)|0;le=0x384f25e3+v|0;ue=0xefbe4786+r+(le>>>0<v>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;A=A+L|0;w=w+U+(A>>>0<L>>>0?1:0)|0;he=(_>>>1|E<<31)^(_>>>8|E<<24)^(_>>>7|E<<25)|0;A=A+he|0;w=w+((E>>>1|_<<31)^(E>>>8|_<<24)^E>>>7)+(A>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;A=A+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x8b8cd5b5+A|0;ue=0xfc19dc6+w+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;_=_+j|0;E=E+F+(_>>>0<j>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;E=E+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(v>>>19|r<<13)^(v<<3|r>>>29)^(v>>>6|r<<26)|0;_=_+he|0;E=E+((r>>>19|v<<13)^(r<<3|v>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0x77ac9c65+_|0;ue=0x240ca1cc+E+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;$=$+K|0;S=S+H+($>>>0<K>>>0?1:0)|0;he=(C>>>1|T<<31)^(C>>>8|T<<24)^(C>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|C<<31)^(T>>>8|C<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(A>>>19|w<<13)^(A<<3|w>>>29)^(A>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|A<<13)^(w<<3|A>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x592b0275+$|0;ue=0x2de92c6f+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;C=C+V|0;T=T+G+(C>>>0<V>>>0?1:0)|0;he=(x>>>1|P<<31)^(x>>>8|P<<24)^(x>>>7|P<<25)|0;C=C+he|0;T=T+((P>>>1|x<<31)^(P>>>8|x<<24)^P>>>7)+(C>>>0<he>>>0?1:0)|0;he=(_>>>19|E<<13)^(_<<3|E>>>29)^(_>>>6|E<<26)|0;C=C+he|0;T=T+((E>>>19|_<<13)^(E<<3|_>>>29)^E>>>6)+(C>>>0<he>>>0?1:0)|0;le=0x6ea6e483+C|0;ue=0x4a7484aa+T+(le>>>0<C>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;x=x+W|0;P=P+z+(x>>>0<W>>>0?1:0)|0;he=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;x=x+he|0;P=P+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(x>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;x=x+he|0;P=P+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(x>>>0<he>>>0?1:0)|0;le=0xbd41fbd4+x|0;ue=0x5cb0a9dc+P+(le>>>0<x>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;k=k+t|0;I=I+e+(k>>>0<t>>>0?1:0)|0;he=(R>>>1|N<<31)^(R>>>8|N<<24)^(R>>>7|N<<25)|0;k=k+he|0;I=I+((N>>>1|R<<31)^(N>>>8|R<<24)^N>>>7)+(k>>>0<he>>>0?1:0)|0;he=(C>>>19|T<<13)^(C<<3|T>>>29)^(C>>>6|T<<26)|0;k=k+he|0;I=I+((T>>>19|C<<13)^(T<<3|C>>>29)^T>>>6)+(k>>>0<he>>>0?1:0)|0;le=0x831153b5+k|0;ue=0x76f988da+I+(le>>>0<k>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;R=R+v|0;N=N+r+(R>>>0<v>>>0?1:0)|0;he=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;R=R+he|0;N=N+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(R>>>0<he>>>0?1:0)|0;he=(x>>>19|P<<13)^(x<<3|P>>>29)^(x>>>6|P<<26)|0;R=R+he|0;N=N+((P>>>19|x<<13)^(P<<3|x>>>29)^P>>>6)+(R>>>0<he>>>0?1:0)|0;le=0xee66dfab+R|0;ue=0x983e5152+N+(le>>>0<R>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;O=O+A|0;M=M+w+(O>>>0<A>>>0?1:0)|0;he=(D>>>1|B<<31)^(D>>>8|B<<24)^(D>>>7|B<<25)|0;O=O+he|0;M=M+((B>>>1|D<<31)^(B>>>8|D<<24)^B>>>7)+(O>>>0<he>>>0?1:0)|0;he=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;O=O+he|0;M=M+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x2db43210+O|0;ue=0xa831c66d+M+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;D=D+_|0;B=B+E+(D>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;D=D+he|0;B=B+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(D>>>0<he>>>0?1:0)|0;he=(R>>>19|N<<13)^(R<<3|N>>>29)^(R>>>6|N<<26)|0;D=D+he|0;B=B+((N>>>19|R<<13)^(N<<3|R>>>29)^N>>>6)+(D>>>0<he>>>0?1:0)|0;le=0x98fb213f+D|0;ue=0xb00327c8+B+(le>>>0<D>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(j>>>1|F<<31)^(j>>>8|F<<24)^(j>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;L=L+he|0;U=U+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(L>>>0<he>>>0?1:0)|0;le=0xbeef0ee4+L|0;ue=0xbf597fc7+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;j=j+C|0;F=F+T+(j>>>0<C>>>0?1:0)|0;he=(K>>>1|H<<31)^(K>>>8|H<<24)^(K>>>7|H<<25)|0;j=j+he|0;F=F+((H>>>1|K<<31)^(H>>>8|K<<24)^H>>>7)+(j>>>0<he>>>0?1:0)|0;he=(D>>>19|B<<13)^(D<<3|B>>>29)^(D>>>6|B<<26)|0;j=j+he|0;F=F+((B>>>19|D<<13)^(B<<3|D>>>29)^B>>>6)+(j>>>0<he>>>0?1:0)|0;le=0x3da88fc2+j|0;ue=0xc6e00bf3+F+(le>>>0<j>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;K=K+x|0;H=H+P+(K>>>0<x>>>0?1:0)|0;he=(V>>>1|G<<31)^(V>>>8|G<<24)^(V>>>7|G<<25)|0;K=K+he|0;H=H+((G>>>1|V<<31)^(G>>>8|V<<24)^G>>>7)+(K>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;K=K+he|0;H=H+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(K>>>0<he>>>0?1:0)|0;le=0x930aa725+K|0;ue=0xd5a79147+H+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;V=V+k|0;G=G+I+(V>>>0<k>>>0?1:0)|0;he=(W>>>1|z<<31)^(W>>>8|z<<24)^(W>>>7|z<<25)|0;V=V+he|0;G=G+((z>>>1|W<<31)^(z>>>8|W<<24)^z>>>7)+(V>>>0<he>>>0?1:0)|0;he=(j>>>19|F<<13)^(j<<3|F>>>29)^(j>>>6|F<<26)|0;V=V+he|0;G=G+((F>>>19|j<<13)^(F<<3|j>>>29)^F>>>6)+(V>>>0<he>>>0?1:0)|0;le=0xe003826f+V|0;ue=0x6ca6351+G+(le>>>0<V>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;W=W+R|0;z=z+N+(W>>>0<R>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;W=W+he|0;z=z+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(W>>>0<he>>>0?1:0)|0;he=(K>>>19|H<<13)^(K<<3|H>>>29)^(K>>>6|H<<26)|0;W=W+he|0;z=z+((H>>>19|K<<13)^(H<<3|K>>>29)^H>>>6)+(W>>>0<he>>>0?1:0)|0;le=0xa0e6e70+W|0;ue=0x14292967+z+(le>>>0<W>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;t=t+O|0;e=e+M+(t>>>0<O>>>0?1:0)|0;he=(v>>>1|r<<31)^(v>>>8|r<<24)^(v>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|v<<31)^(r>>>8|v<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(V>>>19|G<<13)^(V<<3|G>>>29)^(V>>>6|G<<26)|0;t=t+he|0;e=e+((G>>>19|V<<13)^(G<<3|V>>>29)^G>>>6)+(t>>>0<he>>>0?1:0)|0;le=0x46d22ffc+t|0;ue=0x27b70a85+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;v=v+D|0;r=r+B+(v>>>0<D>>>0?1:0)|0;he=(A>>>1|w<<31)^(A>>>8|w<<24)^(A>>>7|w<<25)|0;v=v+he|0;r=r+((w>>>1|A<<31)^(w>>>8|A<<24)^w>>>7)+(v>>>0<he>>>0?1:0)|0;he=(W>>>19|z<<13)^(W<<3|z>>>29)^(W>>>6|z<<26)|0;v=v+he|0;r=r+((z>>>19|W<<13)^(z<<3|W>>>29)^z>>>6)+(v>>>0<he>>>0?1:0)|0;le=0x5c26c926+v|0;ue=0x2e1b2138+r+(le>>>0<v>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;A=A+L|0;w=w+U+(A>>>0<L>>>0?1:0)|0;he=(_>>>1|E<<31)^(_>>>8|E<<24)^(_>>>7|E<<25)|0;A=A+he|0;w=w+((E>>>1|_<<31)^(E>>>8|_<<24)^E>>>7)+(A>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;A=A+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(A>>>0<he>>>0?1:0)|0;le=0x5ac42aed+A|0;ue=0x4d2c6dfc+w+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;_=_+j|0;E=E+F+(_>>>0<j>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;E=E+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(v>>>19|r<<13)^(v<<3|r>>>29)^(v>>>6|r<<26)|0;_=_+he|0;E=E+((r>>>19|v<<13)^(r<<3|v>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0x9d95b3df+_|0;ue=0x53380d13+E+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;$=$+K|0;S=S+H+($>>>0<K>>>0?1:0)|0;he=(C>>>1|T<<31)^(C>>>8|T<<24)^(C>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|C<<31)^(T>>>8|C<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(A>>>19|w<<13)^(A<<3|w>>>29)^(A>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|A<<13)^(w<<3|A>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x8baf63de+$|0;ue=0x650a7354+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;C=C+V|0;T=T+G+(C>>>0<V>>>0?1:0)|0;he=(x>>>1|P<<31)^(x>>>8|P<<24)^(x>>>7|P<<25)|0;C=C+he|0;T=T+((P>>>1|x<<31)^(P>>>8|x<<24)^P>>>7)+(C>>>0<he>>>0?1:0)|0;he=(_>>>19|E<<13)^(_<<3|E>>>29)^(_>>>6|E<<26)|0;C=C+he|0;T=T+((E>>>19|_<<13)^(E<<3|_>>>29)^E>>>6)+(C>>>0<he>>>0?1:0)|0;le=0x3c77b2a8+C|0;ue=0x766a0abb+T+(le>>>0<C>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;x=x+W|0;P=P+z+(x>>>0<W>>>0?1:0)|0;he=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;x=x+he|0;P=P+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(x>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;x=x+he|0;P=P+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(x>>>0<he>>>0?1:0)|0;le=0x47edaee6+x|0;ue=0x81c2c92e+P+(le>>>0<x>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;k=k+t|0;I=I+e+(k>>>0<t>>>0?1:0)|0;he=(R>>>1|N<<31)^(R>>>8|N<<24)^(R>>>7|N<<25)|0;k=k+he|0;I=I+((N>>>1|R<<31)^(N>>>8|R<<24)^N>>>7)+(k>>>0<he>>>0?1:0)|0;he=(C>>>19|T<<13)^(C<<3|T>>>29)^(C>>>6|T<<26)|0;k=k+he|0;I=I+((T>>>19|C<<13)^(T<<3|C>>>29)^T>>>6)+(k>>>0<he>>>0?1:0)|0;le=0x1482353b+k|0;ue=0x92722c85+I+(le>>>0<k>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;R=R+v|0;N=N+r+(R>>>0<v>>>0?1:0)|0;he=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;R=R+he|0;N=N+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(R>>>0<he>>>0?1:0)|0;he=(x>>>19|P<<13)^(x<<3|P>>>29)^(x>>>6|P<<26)|0;R=R+he|0;N=N+((P>>>19|x<<13)^(P<<3|x>>>29)^P>>>6)+(R>>>0<he>>>0?1:0)|0;le=0x4cf10364+R|0;ue=0xa2bfe8a1+N+(le>>>0<R>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;O=O+A|0;M=M+w+(O>>>0<A>>>0?1:0)|0;he=(D>>>1|B<<31)^(D>>>8|B<<24)^(D>>>7|B<<25)|0;O=O+he|0;M=M+((B>>>1|D<<31)^(B>>>8|D<<24)^B>>>7)+(O>>>0<he>>>0?1:0)|0;he=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;O=O+he|0;M=M+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(O>>>0<he>>>0?1:0)|0;le=0xbc423001+O|0;ue=0xa81a664b+M+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;D=D+_|0;B=B+E+(D>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;D=D+he|0;B=B+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(D>>>0<he>>>0?1:0)|0;he=(R>>>19|N<<13)^(R<<3|N>>>29)^(R>>>6|N<<26)|0;D=D+he|0;B=B+((N>>>19|R<<13)^(N<<3|R>>>29)^N>>>6)+(D>>>0<he>>>0?1:0)|0;le=0xd0f89791+D|0;ue=0xc24b8b70+B+(le>>>0<D>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(j>>>1|F<<31)^(j>>>8|F<<24)^(j>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;L=L+he|0;U=U+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x654be30+L|0;ue=0xc76c51a3+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;j=j+C|0;F=F+T+(j>>>0<C>>>0?1:0)|0;he=(K>>>1|H<<31)^(K>>>8|H<<24)^(K>>>7|H<<25)|0;j=j+he|0;F=F+((H>>>1|K<<31)^(H>>>8|K<<24)^H>>>7)+(j>>>0<he>>>0?1:0)|0;he=(D>>>19|B<<13)^(D<<3|B>>>29)^(D>>>6|B<<26)|0;j=j+he|0;F=F+((B>>>19|D<<13)^(B<<3|D>>>29)^B>>>6)+(j>>>0<he>>>0?1:0)|0;le=0xd6ef5218+j|0;ue=0xd192e819+F+(le>>>0<j>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;K=K+x|0;H=H+P+(K>>>0<x>>>0?1:0)|0;he=(V>>>1|G<<31)^(V>>>8|G<<24)^(V>>>7|G<<25)|0;K=K+he|0;H=H+((G>>>1|V<<31)^(G>>>8|V<<24)^G>>>7)+(K>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;K=K+he|0;H=H+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(K>>>0<he>>>0?1:0)|0;le=0x5565a910+K|0;ue=0xd6990624+H+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;V=V+k|0;G=G+I+(V>>>0<k>>>0?1:0)|0;he=(W>>>1|z<<31)^(W>>>8|z<<24)^(W>>>7|z<<25)|0;V=V+he|0;G=G+((z>>>1|W<<31)^(z>>>8|W<<24)^z>>>7)+(V>>>0<he>>>0?1:0)|0;he=(j>>>19|F<<13)^(j<<3|F>>>29)^(j>>>6|F<<26)|0;V=V+he|0;G=G+((F>>>19|j<<13)^(F<<3|j>>>29)^F>>>6)+(V>>>0<he>>>0?1:0)|0;le=0x5771202a+V|0;ue=0xf40e3585+G+(le>>>0<V>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;W=W+R|0;z=z+N+(W>>>0<R>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;W=W+he|0;z=z+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(W>>>0<he>>>0?1:0)|0;he=(K>>>19|H<<13)^(K<<3|H>>>29)^(K>>>6|H<<26)|0;W=W+he|0;z=z+((H>>>19|K<<13)^(H<<3|K>>>29)^H>>>6)+(W>>>0<he>>>0?1:0)|0;le=0x32bbd1b8+W|0;ue=0x106aa070+z+(le>>>0<W>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;t=t+O|0;e=e+M+(t>>>0<O>>>0?1:0)|0;he=(v>>>1|r<<31)^(v>>>8|r<<24)^(v>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|v<<31)^(r>>>8|v<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(V>>>19|G<<13)^(V<<3|G>>>29)^(V>>>6|G<<26)|0;t=t+he|0;e=e+((G>>>19|V<<13)^(G<<3|V>>>29)^G>>>6)+(t>>>0<he>>>0?1:0)|0;le=0xb8d2d0c8+t|0;ue=0x19a4c116+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;v=v+D|0;r=r+B+(v>>>0<D>>>0?1:0)|0;he=(A>>>1|w<<31)^(A>>>8|w<<24)^(A>>>7|w<<25)|0;v=v+he|0;r=r+((w>>>1|A<<31)^(w>>>8|A<<24)^w>>>7)+(v>>>0<he>>>0?1:0)|0;he=(W>>>19|z<<13)^(W<<3|z>>>29)^(W>>>6|z<<26)|0;v=v+he|0;r=r+((z>>>19|W<<13)^(z<<3|W>>>29)^z>>>6)+(v>>>0<he>>>0?1:0)|0;le=0x5141ab53+v|0;ue=0x1e376c08+r+(le>>>0<v>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;A=A+L|0;w=w+U+(A>>>0<L>>>0?1:0)|0;he=(_>>>1|E<<31)^(_>>>8|E<<24)^(_>>>7|E<<25)|0;A=A+he|0;w=w+((E>>>1|_<<31)^(E>>>8|_<<24)^E>>>7)+(A>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;A=A+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(A>>>0<he>>>0?1:0)|0;le=0xdf8eeb99+A|0;ue=0x2748774c+w+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;_=_+j|0;E=E+F+(_>>>0<j>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;E=E+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(v>>>19|r<<13)^(v<<3|r>>>29)^(v>>>6|r<<26)|0;_=_+he|0;E=E+((r>>>19|v<<13)^(r<<3|v>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0xe19b48a8+_|0;ue=0x34b0bcb5+E+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;$=$+K|0;S=S+H+($>>>0<K>>>0?1:0)|0;he=(C>>>1|T<<31)^(C>>>8|T<<24)^(C>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|C<<31)^(T>>>8|C<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(A>>>19|w<<13)^(A<<3|w>>>29)^(A>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|A<<13)^(w<<3|A>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0xc5c95a63+$|0;ue=0x391c0cb3+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;C=C+V|0;T=T+G+(C>>>0<V>>>0?1:0)|0;he=(x>>>1|P<<31)^(x>>>8|P<<24)^(x>>>7|P<<25)|0;C=C+he|0;T=T+((P>>>1|x<<31)^(P>>>8|x<<24)^P>>>7)+(C>>>0<he>>>0?1:0)|0;he=(_>>>19|E<<13)^(_<<3|E>>>29)^(_>>>6|E<<26)|0;C=C+he|0;T=T+((E>>>19|_<<13)^(E<<3|_>>>29)^E>>>6)+(C>>>0<he>>>0?1:0)|0;le=0xe3418acb+C|0;ue=0x4ed8aa4a+T+(le>>>0<C>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;x=x+W|0;P=P+z+(x>>>0<W>>>0?1:0)|0;he=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;x=x+he|0;P=P+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(x>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;x=x+he|0;P=P+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(x>>>0<he>>>0?1:0)|0;le=0x7763e373+x|0;ue=0x5b9cca4f+P+(le>>>0<x>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;k=k+t|0;I=I+e+(k>>>0<t>>>0?1:0)|0;he=(R>>>1|N<<31)^(R>>>8|N<<24)^(R>>>7|N<<25)|0;k=k+he|0;I=I+((N>>>1|R<<31)^(N>>>8|R<<24)^N>>>7)+(k>>>0<he>>>0?1:0)|0;he=(C>>>19|T<<13)^(C<<3|T>>>29)^(C>>>6|T<<26)|0;k=k+he|0;I=I+((T>>>19|C<<13)^(T<<3|C>>>29)^T>>>6)+(k>>>0<he>>>0?1:0)|0;le=0xd6b2b8a3+k|0;ue=0x682e6ff3+I+(le>>>0<k>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;R=R+v|0;N=N+r+(R>>>0<v>>>0?1:0)|0;he=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;R=R+he|0;N=N+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(R>>>0<he>>>0?1:0)|0;he=(x>>>19|P<<13)^(x<<3|P>>>29)^(x>>>6|P<<26)|0;R=R+he|0;N=N+((P>>>19|x<<13)^(P<<3|x>>>29)^P>>>6)+(R>>>0<he>>>0?1:0)|0;le=0x5defb2fc+R|0;ue=0x748f82ee+N+(le>>>0<R>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;O=O+A|0;M=M+w+(O>>>0<A>>>0?1:0)|0;he=(D>>>1|B<<31)^(D>>>8|B<<24)^(D>>>7|B<<25)|0;O=O+he|0;M=M+((B>>>1|D<<31)^(B>>>8|D<<24)^B>>>7)+(O>>>0<he>>>0?1:0)|0;he=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;O=O+he|0;M=M+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x43172f60+O|0;ue=0x78a5636f+M+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;D=D+_|0;B=B+E+(D>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;D=D+he|0;B=B+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(D>>>0<he>>>0?1:0)|0;he=(R>>>19|N<<13)^(R<<3|N>>>29)^(R>>>6|N<<26)|0;D=D+he|0;B=B+((N>>>19|R<<13)^(N<<3|R>>>29)^N>>>6)+(D>>>0<he>>>0?1:0)|0;le=0xa1f0ab72+D|0;ue=0x84c87814+B+(le>>>0<D>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(j>>>1|F<<31)^(j>>>8|F<<24)^(j>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;L=L+he|0;U=U+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x1a6439ec+L|0;ue=0x8cc70208+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;j=j+C|0;F=F+T+(j>>>0<C>>>0?1:0)|0;he=(K>>>1|H<<31)^(K>>>8|H<<24)^(K>>>7|H<<25)|0;j=j+he|0;F=F+((H>>>1|K<<31)^(H>>>8|K<<24)^H>>>7)+(j>>>0<he>>>0?1:0)|0;he=(D>>>19|B<<13)^(D<<3|B>>>29)^(D>>>6|B<<26)|0;j=j+he|0;F=F+((B>>>19|D<<13)^(B<<3|D>>>29)^B>>>6)+(j>>>0<he>>>0?1:0)|0;le=0x23631e28+j|0;ue=0x90befffa+F+(le>>>0<j>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;K=K+x|0;H=H+P+(K>>>0<x>>>0?1:0)|0;he=(V>>>1|G<<31)^(V>>>8|G<<24)^(V>>>7|G<<25)|0;K=K+he|0;H=H+((G>>>1|V<<31)^(G>>>8|V<<24)^G>>>7)+(K>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;K=K+he|0;H=H+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(K>>>0<he>>>0?1:0)|0;le=0xde82bde9+K|0;ue=0xa4506ceb+H+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;V=V+k|0;G=G+I+(V>>>0<k>>>0?1:0)|0;he=(W>>>1|z<<31)^(W>>>8|z<<24)^(W>>>7|z<<25)|0;V=V+he|0;G=G+((z>>>1|W<<31)^(z>>>8|W<<24)^z>>>7)+(V>>>0<he>>>0?1:0)|0;he=(j>>>19|F<<13)^(j<<3|F>>>29)^(j>>>6|F<<26)|0;V=V+he|0;G=G+((F>>>19|j<<13)^(F<<3|j>>>29)^F>>>6)+(V>>>0<he>>>0?1:0)|0;le=0xb2c67915+V|0;ue=0xbef9a3f7+G+(le>>>0<V>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;W=W+R|0;z=z+N+(W>>>0<R>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;W=W+he|0;z=z+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(W>>>0<he>>>0?1:0)|0;he=(K>>>19|H<<13)^(K<<3|H>>>29)^(K>>>6|H<<26)|0;W=W+he|0;z=z+((H>>>19|K<<13)^(H<<3|K>>>29)^H>>>6)+(W>>>0<he>>>0?1:0)|0;le=0xe372532b+W|0;ue=0xc67178f2+z+(le>>>0<W>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;t=t+O|0;e=e+M+(t>>>0<O>>>0?1:0)|0;he=(v>>>1|r<<31)^(v>>>8|r<<24)^(v>>>7|r<<25)|0;t=t+he|0;e=e+((r>>>1|v<<31)^(r>>>8|v<<24)^r>>>7)+(t>>>0<he>>>0?1:0)|0;he=(V>>>19|G<<13)^(V<<3|G>>>29)^(V>>>6|G<<26)|0;t=t+he|0;e=e+((G>>>19|V<<13)^(G<<3|V>>>29)^G>>>6)+(t>>>0<he>>>0?1:0)|0;le=0xea26619c+t|0;ue=0xca273ece+e+(le>>>0<t>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;v=v+D|0;r=r+B+(v>>>0<D>>>0?1:0)|0;he=(A>>>1|w<<31)^(A>>>8|w<<24)^(A>>>7|w<<25)|0;v=v+he|0;r=r+((w>>>1|A<<31)^(w>>>8|A<<24)^w>>>7)+(v>>>0<he>>>0?1:0)|0;he=(W>>>19|z<<13)^(W<<3|z>>>29)^(W>>>6|z<<26)|0;v=v+he|0;r=r+((z>>>19|W<<13)^(z<<3|W>>>29)^z>>>6)+(v>>>0<he>>>0?1:0)|0;le=0x21c0c207+v|0;ue=0xd186b8c7+r+(le>>>0<v>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;A=A+L|0;w=w+U+(A>>>0<L>>>0?1:0)|0;he=(_>>>1|E<<31)^(_>>>8|E<<24)^(_>>>7|E<<25)|0;A=A+he|0;w=w+((E>>>1|_<<31)^(E>>>8|_<<24)^E>>>7)+(A>>>0<he>>>0?1:0)|0;he=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;A=A+he|0;w=w+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(A>>>0<he>>>0?1:0)|0;le=0xcde0eb1e+A|0;ue=0xeada7dd6+w+(le>>>0<A>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;_=_+j|0;E=E+F+(_>>>0<j>>>0?1:0)|0;he=($>>>1|S<<31)^($>>>8|S<<24)^($>>>7|S<<25)|0;_=_+he|0;E=E+((S>>>1|$<<31)^(S>>>8|$<<24)^S>>>7)+(_>>>0<he>>>0?1:0)|0;he=(v>>>19|r<<13)^(v<<3|r>>>29)^(v>>>6|r<<26)|0;_=_+he|0;E=E+((r>>>19|v<<13)^(r<<3|v>>>29)^r>>>6)+(_>>>0<he>>>0?1:0)|0;le=0xee6ed178+_|0;ue=0xf57d4f7f+E+(le>>>0<_>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;$=$+K|0;S=S+H+($>>>0<K>>>0?1:0)|0;he=(C>>>1|T<<31)^(C>>>8|T<<24)^(C>>>7|T<<25)|0;$=$+he|0;S=S+((T>>>1|C<<31)^(T>>>8|C<<24)^T>>>7)+($>>>0<he>>>0?1:0)|0;he=(A>>>19|w<<13)^(A<<3|w>>>29)^(A>>>6|w<<26)|0;$=$+he|0;S=S+((w>>>19|A<<13)^(w<<3|A>>>29)^w>>>6)+($>>>0<he>>>0?1:0)|0;le=0x72176fba+$|0;ue=0x6f067aa+S+(le>>>0<$>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;C=C+V|0;T=T+G+(C>>>0<V>>>0?1:0)|0;he=(x>>>1|P<<31)^(x>>>8|P<<24)^(x>>>7|P<<25)|0;C=C+he|0;T=T+((P>>>1|x<<31)^(P>>>8|x<<24)^P>>>7)+(C>>>0<he>>>0?1:0)|0;he=(_>>>19|E<<13)^(_<<3|E>>>29)^(_>>>6|E<<26)|0;C=C+he|0;T=T+((E>>>19|_<<13)^(E<<3|_>>>29)^E>>>6)+(C>>>0<he>>>0?1:0)|0;le=0xa2c898a6+C|0;ue=0xa637dc5+T+(le>>>0<C>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;x=x+W|0;P=P+z+(x>>>0<W>>>0?1:0)|0;he=(k>>>1|I<<31)^(k>>>8|I<<24)^(k>>>7|I<<25)|0;x=x+he|0;P=P+((I>>>1|k<<31)^(I>>>8|k<<24)^I>>>7)+(x>>>0<he>>>0?1:0)|0;he=($>>>19|S<<13)^($<<3|S>>>29)^($>>>6|S<<26)|0;x=x+he|0;P=P+((S>>>19|$<<13)^(S<<3|$>>>29)^S>>>6)+(x>>>0<he>>>0?1:0)|0;le=0xbef90dae+x|0;ue=0x113f9804+P+(le>>>0<x>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;k=k+t|0;I=I+e+(k>>>0<t>>>0?1:0)|0;he=(R>>>1|N<<31)^(R>>>8|N<<24)^(R>>>7|N<<25)|0;k=k+he|0;I=I+((N>>>1|R<<31)^(N>>>8|R<<24)^N>>>7)+(k>>>0<he>>>0?1:0)|0;he=(C>>>19|T<<13)^(C<<3|T>>>29)^(C>>>6|T<<26)|0;k=k+he|0;I=I+((T>>>19|C<<13)^(T<<3|C>>>29)^T>>>6)+(k>>>0<he>>>0?1:0)|0;le=0x131c471b+k|0;ue=0x1b710b35+I+(le>>>0<k>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;R=R+v|0;N=N+r+(R>>>0<v>>>0?1:0)|0;he=(O>>>1|M<<31)^(O>>>8|M<<24)^(O>>>7|M<<25)|0;R=R+he|0;N=N+((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)+(R>>>0<he>>>0?1:0)|0;he=(x>>>19|P<<13)^(x<<3|P>>>29)^(x>>>6|P<<26)|0;R=R+he|0;N=N+((P>>>19|x<<13)^(P<<3|x>>>29)^P>>>6)+(R>>>0<he>>>0?1:0)|0;le=0x23047d84+R|0;ue=0x28db77f5+N+(le>>>0<R>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;O=O+A|0;M=M+w+(O>>>0<A>>>0?1:0)|0;he=(D>>>1|B<<31)^(D>>>8|B<<24)^(D>>>7|B<<25)|0;O=O+he|0;M=M+((B>>>1|D<<31)^(B>>>8|D<<24)^B>>>7)+(O>>>0<he>>>0?1:0)|0;he=(k>>>19|I<<13)^(k<<3|I>>>29)^(k>>>6|I<<26)|0;O=O+he|0;M=M+((I>>>19|k<<13)^(I<<3|k>>>29)^I>>>6)+(O>>>0<he>>>0?1:0)|0;le=0x40c72493+O|0;ue=0x32caab7b+M+(le>>>0<O>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;D=D+_|0;B=B+E+(D>>>0<_>>>0?1:0)|0;he=(L>>>1|U<<31)^(L>>>8|U<<24)^(L>>>7|U<<25)|0;D=D+he|0;B=B+((U>>>1|L<<31)^(U>>>8|L<<24)^U>>>7)+(D>>>0<he>>>0?1:0)|0;he=(R>>>19|N<<13)^(R<<3|N>>>29)^(R>>>6|N<<26)|0;D=D+he|0;B=B+((N>>>19|R<<13)^(N<<3|R>>>29)^N>>>6)+(D>>>0<he>>>0?1:0)|0;le=0x15c9bebc+D|0;ue=0x3c9ebe0a+B+(le>>>0<D>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;L=L+$|0;U=U+S+(L>>>0<$>>>0?1:0)|0;he=(j>>>1|F<<31)^(j>>>8|F<<24)^(j>>>7|F<<25)|0;L=L+he|0;U=U+((F>>>1|j<<31)^(F>>>8|j<<24)^F>>>7)+(L>>>0<he>>>0?1:0)|0;he=(O>>>19|M<<13)^(O<<3|M>>>29)^(O>>>6|M<<26)|0;L=L+he|0;U=U+((M>>>19|O<<13)^(M<<3|O>>>29)^M>>>6)+(L>>>0<he>>>0?1:0)|0;le=0x9c100d4c+L|0;ue=0x431d67c4+U+(le>>>0<L>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;j=j+C|0;F=F+T+(j>>>0<C>>>0?1:0)|0;he=(K>>>1|H<<31)^(K>>>8|H<<24)^(K>>>7|H<<25)|0;j=j+he|0;F=F+((H>>>1|K<<31)^(H>>>8|K<<24)^H>>>7)+(j>>>0<he>>>0?1:0)|0;he=(D>>>19|B<<13)^(D<<3|B>>>29)^(D>>>6|B<<26)|0;j=j+he|0;F=F+((B>>>19|D<<13)^(B<<3|D>>>29)^B>>>6)+(j>>>0<he>>>0?1:0)|0;le=0xcb3e42b6+j|0;ue=0x4cc5d4be+F+(le>>>0<j>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;K=K+x|0;H=H+P+(K>>>0<x>>>0?1:0)|0;he=(V>>>1|G<<31)^(V>>>8|G<<24)^(V>>>7|G<<25)|0;K=K+he|0;H=H+((G>>>1|V<<31)^(G>>>8|V<<24)^G>>>7)+(K>>>0<he>>>0?1:0)|0;he=(L>>>19|U<<13)^(L<<3|U>>>29)^(L>>>6|U<<26)|0;K=K+he|0;H=H+((U>>>19|L<<13)^(U<<3|L>>>29)^U>>>6)+(K>>>0<he>>>0?1:0)|0;le=0xfc657e2a+K|0;ue=0x597f299c+H+(le>>>0<K>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;V=V+k|0;G=G+I+(V>>>0<k>>>0?1:0)|0;he=(W>>>1|z<<31)^(W>>>8|z<<24)^(W>>>7|z<<25)|0;V=V+he|0;G=G+((z>>>1|W<<31)^(z>>>8|W<<24)^z>>>7)+(V>>>0<he>>>0?1:0)|0;he=(j>>>19|F<<13)^(j<<3|F>>>29)^(j>>>6|F<<26)|0;V=V+he|0;G=G+((F>>>19|j<<13)^(F<<3|j>>>29)^F>>>6)+(V>>>0<he>>>0?1:0)|0;le=0x3ad6faec+V|0;ue=0x5fcb6fab+G+(le>>>0<V>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;W=W+R|0;z=z+N+(W>>>0<R>>>0?1:0)|0;he=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;W=W+he|0;z=z+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(W>>>0<he>>>0?1:0)|0;he=(K>>>19|H<<13)^(K<<3|H>>>29)^(K>>>6|H<<26)|0;W=W+he|0;z=z+((H>>>19|K<<13)^(H<<3|K>>>29)^H>>>6)+(W>>>0<he>>>0?1:0)|0;le=0x4a475817+W|0;ue=0x6c44198c+z+(le>>>0<W>>>0?1:0)|0;le=le+ce|0;ue=ue+fe+(le>>>0<ce>>>0?1:0)|0;he=(ne>>>14|re<<18)^(ne>>>18|re<<14)^(ne<<23|re>>>9)|0;le=le+he|0;ue=ue+((re>>>14|ne<<18)^(re>>>18|ne<<14)^(re<<23|ne>>>9))+(le>>>0<he>>>0?1:0)|0;he=oe^ne&(se^oe)|0;le=le+he|0;ue=ue+(ae^re&(ie^ae))+(le>>>0<he>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ie;se=ne;ie=re;ne=te+le|0;re=ee+ue+(ne>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=Y;J=X;Y=le+(q&Z^te&(q^Z))|0;X=ue+(J&Q^ee&(J^Q))+(Y>>>0<le>>>0?1:0)|0;he=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;Y=Y+he|0;X=X+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(Y>>>0<he>>>0?1:0)|0;i=i+Y|0;n=n+X+(i>>>0<Y>>>0?1:0)|0;a=a+q|0;s=s+J+(a>>>0<q>>>0?1:0)|0;f=f+Z|0;o=o+Q+(f>>>0<Z>>>0?1:0)|0;u=u+te|0;c=c+ee+(u>>>0<te>>>0?1:0)|0;h=h+ne|0;l=l+re+(h>>>0<ne>>>0?1:0)|0;p=p+se|0;d=d+ie+(p>>>0<se>>>0?1:0)|0;m=m+oe|0;y=y+ae+(m>>>0<oe>>>0?1:0)|0;b=b+ce|0;g=g+fe+(b>>>0<ce>>>0?1:0)|0}function te(e){e=e|0;ee(Z[e|0]<<24|Z[e|1]<<16|Z[e|2]<<8|Z[e|3],Z[e|4]<<24|Z[e|5]<<16|Z[e|6]<<8|Z[e|7],Z[e|8]<<24|Z[e|9]<<16|Z[e|10]<<8|Z[e|11],Z[e|12]<<24|Z[e|13]<<16|Z[e|14]<<8|Z[e|15],Z[e|16]<<24|Z[e|17]<<16|Z[e|18]<<8|Z[e|19],Z[e|20]<<24|Z[e|21]<<16|Z[e|22]<<8|Z[e|23],Z[e|24]<<24|Z[e|25]<<16|Z[e|26]<<8|Z[e|27],Z[e|28]<<24|Z[e|29]<<16|Z[e|30]<<8|Z[e|31],Z[e|32]<<24|Z[e|33]<<16|Z[e|34]<<8|Z[e|35],Z[e|36]<<24|Z[e|37]<<16|Z[e|38]<<8|Z[e|39],Z[e|40]<<24|Z[e|41]<<16|Z[e|42]<<8|Z[e|43],Z[e|44]<<24|Z[e|45]<<16|Z[e|46]<<8|Z[e|47],Z[e|48]<<24|Z[e|49]<<16|Z[e|50]<<8|Z[e|51],Z[e|52]<<24|Z[e|53]<<16|Z[e|54]<<8|Z[e|55],Z[e|56]<<24|Z[e|57]<<16|Z[e|58]<<8|Z[e|59],Z[e|60]<<24|Z[e|61]<<16|Z[e|62]<<8|Z[e|63],Z[e|64]<<24|Z[e|65]<<16|Z[e|66]<<8|Z[e|67],Z[e|68]<<24|Z[e|69]<<16|Z[e|70]<<8|Z[e|71],Z[e|72]<<24|Z[e|73]<<16|Z[e|74]<<8|Z[e|75],Z[e|76]<<24|Z[e|77]<<16|Z[e|78]<<8|Z[e|79],Z[e|80]<<24|Z[e|81]<<16|Z[e|82]<<8|Z[e|83],Z[e|84]<<24|Z[e|85]<<16|Z[e|86]<<8|Z[e|87],Z[e|88]<<24|Z[e|89]<<16|Z[e|90]<<8|Z[e|91],Z[e|92]<<24|Z[e|93]<<16|Z[e|94]<<8|Z[e|95],Z[e|96]<<24|Z[e|97]<<16|Z[e|98]<<8|Z[e|99],Z[e|100]<<24|Z[e|101]<<16|Z[e|102]<<8|Z[e|103],Z[e|104]<<24|Z[e|105]<<16|Z[e|106]<<8|Z[e|107],Z[e|108]<<24|Z[e|109]<<16|Z[e|110]<<8|Z[e|111],Z[e|112]<<24|Z[e|113]<<16|Z[e|114]<<8|Z[e|115],Z[e|116]<<24|Z[e|117]<<16|Z[e|118]<<8|Z[e|119],Z[e|120]<<24|Z[e|121]<<16|Z[e|122]<<8|Z[e|123],Z[e|124]<<24|Z[e|125]<<16|Z[e|126]<<8|Z[e|127])}function re(e){e=e|0;Z[e|0]=n>>>24;Z[e|1]=n>>>16&255;Z[e|2]=n>>>8&255;Z[e|3]=n&255;Z[e|4]=i>>>24;Z[e|5]=i>>>16&255;Z[e|6]=i>>>8&255;Z[e|7]=i&255;Z[e|8]=s>>>24;Z[e|9]=s>>>16&255;Z[e|10]=s>>>8&255;Z[e|11]=s&255;Z[e|12]=a>>>24;Z[e|13]=a>>>16&255;Z[e|14]=a>>>8&255;Z[e|15]=a&255;Z[e|16]=o>>>24;Z[e|17]=o>>>16&255;Z[e|18]=o>>>8&255;Z[e|19]=o&255;Z[e|20]=f>>>24;Z[e|21]=f>>>16&255;Z[e|22]=f>>>8&255;Z[e|23]=f&255;Z[e|24]=c>>>24;Z[e|25]=c>>>16&255;Z[e|26]=c>>>8&255;Z[e|27]=c&255;Z[e|28]=u>>>24;Z[e|29]=u>>>16&255;Z[e|30]=u>>>8&255;Z[e|31]=u&255;Z[e|32]=l>>>24;Z[e|33]=l>>>16&255;Z[e|34]=l>>>8&255;Z[e|35]=l&255;Z[e|36]=h>>>24;Z[e|37]=h>>>16&255;Z[e|38]=h>>>8&255;Z[e|39]=h&255;Z[e|40]=d>>>24;Z[e|41]=d>>>16&255;Z[e|42]=d>>>8&255;Z[e|43]=d&255;Z[e|44]=p>>>24;Z[e|45]=p>>>16&255;Z[e|46]=p>>>8&255;Z[e|47]=p&255;Z[e|48]=y>>>24;Z[e|49]=y>>>16&255;Z[e|50]=y>>>8&255;Z[e|51]=y&255;Z[e|52]=m>>>24;Z[e|53]=m>>>16&255;Z[e|54]=m>>>8&255;Z[e|55]=m&255;Z[e|56]=g>>>24;Z[e|57]=g>>>16&255;Z[e|58]=g>>>8&255;Z[e|59]=g&255;Z[e|60]=b>>>24;Z[e|61]=b>>>16&255;Z[e|62]=b>>>8&255;Z[e|63]=b&255}function ne(){n=0x6a09e667;i=0xf3bcc908;s=0xbb67ae85;a=0x84caa73b;o=0x3c6ef372;f=0xfe94f82b;c=0xa54ff53a;u=0x5f1d36f1;l=0x510e527f;h=0xade682d1;d=0x9b05688c;p=0x2b3e6c1f;y=0x1f83d9ab;m=0xfb41bd6b;g=0x5be0cd19;b=0x137e2179;v=w=0}function ie(e,t,r,A,E,_,S,$,T,C,P,x,I,k,N,R,M,O){e=e|0;t=t|0;r=r|0;A=A|0;E=E|0;_=_|0;S=S|0;$=$|0;T=T|0;C=C|0;P=P|0;x=x|0;I=I|0;k=k|0;N=N|0;R=R|0;M=M|0;O=O|0;n=e;i=t;s=r;a=A;o=E;f=_;c=S;u=$;l=T;h=C;d=P;p=x;y=I;m=k;g=N;b=R;v=M;w=O}function se(e,t){e=e|0;t=t|0;var r=0;if(e&127)return-1;while((t|0)>=128){te(e);e=e+128|0;t=t-128|0;r=r+128|0}v=v+r|0;if(v>>>0<r>>>0)w=w+1|0;return r|0}function ae(e,t,r){e=e|0;t=t|0;r=r|0;var n=0,i=0;if(e&127)return-1;if(~r)if(r&63)return-1;if((t|0)>=128){n=se(e,t)|0;if((n|0)==-1)return-1;e=e+n|0;t=t-n|0}n=n+t|0;v=v+t|0;if(v>>>0<t>>>0)w=w+1|0;Z[e|t]=0x80;if((t|0)>=112){for(i=t+1|0;(i|0)<128;i=i+1|0)Z[e|i]=0x00;te(e);t=0;Z[e|0]=0}for(i=t+1|0;(i|0)<123;i=i+1|0)Z[e|i]=0;Z[e|120]=w>>>21&255;Z[e|121]=w>>>13&255;Z[e|122]=w>>>5&255;Z[e|123]=w<<3&255|v>>>29;Z[e|124]=v>>>21&255;Z[e|125]=v>>>13&255;Z[e|126]=v>>>5&255;Z[e|127]=v<<3&255;te(e);if(~r)re(r);return n|0}function oe(){n=A;i=E;s=_;a=S;o=$;f=T;c=C;u=P;l=x;h=I;d=k;p=N;y=R;m=M;g=O;b=B;v=128;w=0}function fe(){n=D;i=U;s=L;a=F;o=j;f=H;c=K;u=G;l=V;h=z;d=W;p=X;y=Y;m=J;g=q;b=Q;v=128;w=0}function ce(e,t,r,Z,te,re,ie,se,ae,oe,fe,ce,ue,le,he,de,pe,ye,me,ge,be,ve,we,Ae,Ee,_e,Se,$e,Te,Ce,Pe,xe){e=e|0;t=t|0;r=r|0;Z=Z|0;te=te|0;re=re|0;ie=ie|0;se=se|0;ae=ae|0;oe=oe|0;fe=fe|0;ce=ce|0;ue=ue|0;le=le|0;he=he|0;de=de|0;pe=pe|0;ye=ye|0;me=me|0;ge=ge|0;be=be|0;ve=ve|0;we=we|0;Ae=Ae|0;Ee=Ee|0;_e=_e|0;Se=Se|0;$e=$e|0;Te=Te|0;Ce=Ce|0;Pe=Pe|0;xe=xe|0;ne();ee(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,Z^0x5c5c5c5c,te^0x5c5c5c5c,re^0x5c5c5c5c,ie^0x5c5c5c5c,se^0x5c5c5c5c,ae^0x5c5c5c5c,oe^0x5c5c5c5c,fe^0x5c5c5c5c,ce^0x5c5c5c5c,ue^0x5c5c5c5c,le^0x5c5c5c5c,he^0x5c5c5c5c,de^0x5c5c5c5c,pe^0x5c5c5c5c,ye^0x5c5c5c5c,me^0x5c5c5c5c,ge^0x5c5c5c5c,be^0x5c5c5c5c,ve^0x5c5c5c5c,we^0x5c5c5c5c,Ae^0x5c5c5c5c,Ee^0x5c5c5c5c,_e^0x5c5c5c5c,Se^0x5c5c5c5c,$e^0x5c5c5c5c,Te^0x5c5c5c5c,Ce^0x5c5c5c5c,Pe^0x5c5c5c5c,xe^0x5c5c5c5c);D=n;U=i;L=s;F=a;j=o;H=f;K=c;G=u;V=l;z=h;W=d;X=p;Y=y;J=m;q=g;Q=b;ne();ee(e^0x36363636,t^0x36363636,r^0x36363636,Z^0x36363636,te^0x36363636,re^0x36363636,ie^0x36363636,se^0x36363636,ae^0x36363636,oe^0x36363636,fe^0x36363636,ce^0x36363636,ue^0x36363636,le^0x36363636,he^0x36363636,de^0x36363636,pe^0x36363636,ye^0x36363636,me^0x36363636,ge^0x36363636,be^0x36363636,ve^0x36363636,we^0x36363636,Ae^0x36363636,Ee^0x36363636,_e^0x36363636,Se^0x36363636,$e^0x36363636,Te^0x36363636,Ce^0x36363636,Pe^0x36363636,xe^0x36363636);A=n;E=i;_=s;S=a;$=o;T=f;C=c;P=u;x=l;I=h;k=d;N=p;R=y;M=m;O=g;B=b;v=128;w=0}function ue(e,t,r){e=e|0;t=t|0;r=r|0;var v=0,w=0,A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0;if(e&127)return-1;if(~r)if(r&63)return-1;O=ae(e,t,-1)|0;v=n;w=i;A=s;E=a;_=o;S=f;$=c;T=u;C=l;P=h;x=d;I=p;k=y;N=m;R=g;M=b;fe();ee(v,w,A,E,_,S,$,T,C,P,x,I,k,N,R,M,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);if(~r)re(r);return O|0}function le(e,t,r,v,w){e=e|0;t=t|0;r=r|0;v=v|0;w=w|0;var A=0,E=0,_=0,S=0,$=0,T=0,C=0,P=0,x=0,I=0,k=0,N=0,R=0,M=0,O=0,B=0,D=0,U=0,L=0,F=0,j=0,H=0,K=0,G=0,V=0,z=0,W=0,X=0,Y=0,J=0,q=0,Q=0;if(e&127)return-1;if(~w)if(w&63)return-1;Z[e+t|0]=r>>>24;Z[e+t+1|0]=r>>>16&255;Z[e+t+2|0]=r>>>8&255;Z[e+t+3|0]=r&255;ue(e,t+4|0,-1)|0;A=D=n;E=U=i;_=L=s;S=F=a;$=j=o;T=H=f;C=K=c;P=G=u;x=V=l;I=z=h;k=W=d;N=X=p;R=Y=y;M=J=m;O=q=g;B=Q=b;v=v-1|0;while((v|0)>0){oe();ee(D,U,L,F,j,H,K,G,V,z,W,X,Y,J,q,Q,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);D=n;U=i;L=s;F=a;j=o;H=f;K=c;G=u;V=l;z=h;W=d;X=p;Y=y;J=m;q=g;Q=b;fe();ee(D,U,L,F,j,H,K,G,V,z,W,X,Y,J,q,Q,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);D=n;U=i;L=s;F=a;j=o;H=f;K=c;G=u;V=l;z=h;W=d;X=p;Y=y;J=m;q=g;Q=b;A=A^n;E=E^i;_=_^s;S=S^a;$=$^o;T=T^f;C=C^c;P=P^u;x=x^l;I=I^h;k=k^d;N=N^p;R=R^y;M=M^m;O=O^g;B=B^b;v=v-1|0}n=A;i=E;s=_;a=S;o=$;f=T;c=C;u=P;l=x;h=I;d=k;p=N;y=R;m=M;g=O;b=B;if(~w)re(w);return 0}return{reset:ne,init:ie,process:se,finish:ae,hmac_reset:oe,hmac_init:ce,hmac_finish:ue,pbkdf2_generate_block:le}};const _sha512_block_size=128;const _sha512_hash_size=64;class Sha512 extends Hash{constructor(){super();this.NAME="sha512";this.BLOCK_SIZE=_sha512_block_size;this.HASH_SIZE=_sha512_hash_size;this.heap=_heap_init();this.asm=sha512_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha512.NAME="sha512";class Hmac{constructor(e,t,r){if(!e.HASH_SIZE)throw new SyntaxError("option 'hash' supplied doesn't seem to be a valid hash function");this.hash=e;this.BLOCK_SIZE=this.hash.BLOCK_SIZE;this.HMAC_SIZE=this.hash.HASH_SIZE;this.result=null;this.key=_hmac_key(this.hash,t);const n=new Uint8Array(this.key);for(let e=0;e<n.length;++e)n[e]^=54;this.hash.reset().process(n);if(r!==undefined){this._hmac_init_verify(r)}else{this.verify=null}}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.hash.process(e);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash.finish().result;const t=new Uint8Array(this.key);for(let e=0;e<t.length;++e)t[e]^=92;const r=this.verify;const n=this.hash.reset().process(t).process(e).finish().result;if(r){if(r.length===n.length){let e=0;for(let t=0;t<r.length;t++){e|=r[t]^n[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}this.result=n;return this}_hmac_init_verify(e){if(e.length!==this.HMAC_SIZE)throw new IllegalArgumentError("illegal verification tag size");this.verify=e}}function _hmac_key(e,t){const r=new Uint8Array(e.BLOCK_SIZE);if(t.length>e.BLOCK_SIZE){r.set(e.reset().process(t).finish().result)}else{r.set(t)}return r}class HmacSha1 extends Hmac{constructor(e,t){const r=new Sha1;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){this.result=null;const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha1_hash_size);i.set(r.subarray(0,_sha1_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}class HmacSha256 extends Hmac{constructor(e,t){const r=new Sha256;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha256_hash_size);i.set(r.subarray(0,_sha256_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}class HmacSha512 extends Hmac{constructor(e,t){const r=new Sha512;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63],e[64]<<24|e[65]<<16|e[66]<<8|e[67],e[68]<<24|e[69]<<16|e[70]<<8|e[71],e[72]<<24|e[73]<<16|e[74]<<8|e[75],e[76]<<24|e[77]<<16|e[78]<<8|e[79],e[80]<<24|e[81]<<16|e[82]<<8|e[83],e[84]<<24|e[85]<<16|e[86]<<8|e[87],e[88]<<24|e[89]<<16|e[90]<<8|e[91],e[92]<<24|e[93]<<16|e[94]<<8|e[95],e[96]<<24|e[97]<<16|e[98]<<8|e[99],e[100]<<24|e[101]<<16|e[102]<<8|e[103],e[104]<<24|e[105]<<16|e[106]<<8|e[107],e[108]<<24|e[109]<<16|e[110]<<8|e[111],e[112]<<24|e[113]<<16|e[114]<<8|e[115],e[116]<<24|e[117]<<16|e[118]<<8|e[119],e[120]<<24|e[121]<<16|e[122]<<8|e[123],e[124]<<24|e[125]<<16|e[126]<<8|e[127]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const n=this.verify;const i=new Uint8Array(_sha512_hash_size);i.set(r.subarray(0,_sha512_hash_size));if(n){if(n.length===i.length){let e=0;for(let t=0;t<n.length;t++){e|=n[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=i}return this}}function Pbkdf2HmacSha1(e,t,r,n){const i=new HmacSha1(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha256(e,t,r,n){const i=new HmacSha256(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha512(e,t,r,n){const i=new HmacSha512(e);const s=new Uint8Array(n);const a=Math.ceil(n/i.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*i.HMAC_SIZE;const f=(e<a?0:n%i.HMAC_SIZE)||i.HMAC_SIZE;i.reset().process(t);i.hash.asm.pbkdf2_generate_block(i.hash.pos,i.hash.len,e,r,0);s.set(i.hash.heap.subarray(0,f),o)}return s}class RSA{constructor(e){const t=e.length;if(t!==2&&t!==3&&t!==8)throw new SyntaxError("unexpected key type");const r=new Modulus(new BigNumber(e[0]));const n=new BigNumber(e[1]);this.key={0:r,1:n};if(t>2){this.key[2]=new BigNumber(e[2])}if(t>3){this.key[3]=new Modulus(new BigNumber(e[3]));this.key[4]=new Modulus(new BigNumber(e[4]));this.key[5]=new BigNumber(e[5]);this.key[6]=new BigNumber(e[6]);this.key[7]=new BigNumber(e[7])}}encrypt(e){if(!this.key)throw new IllegalStateError("no key is associated with the instance");if(this.key[0].compare(e)<=0)throw new RangeError("data too large");const t=this.key[0];const r=this.key[1];let n=t.power(e,r).toBytes();const i=t.bitLength+7>>3;if(n.length<i){const e=new Uint8Array(i);e.set(n,i-n.length);n=e}this.result=n;return this}decrypt(e){if(this.key[0].compare(e)<=0)throw new RangeError("data too large");let t;let r;if(this.key[3]!==undefined){r=this.key[0];const n=this.key[3];const i=this.key[4];const s=this.key[5];const a=this.key[6];const o=this.key[7];const f=n.power(e,s);const c=i.power(e,a);let u=f.subtract(c);while(u.sign<0)u=u.add(n);const l=n.reduce(o.multiply(u));t=l.multiply(i).add(c).clamp(r.bitLength).toBytes()}else{r=this.key[0];const n=this.key[2];t=r.power(e,n).toBytes()}const n=r.bitLength+7>>3;if(t.length<n){let e=new Uint8Array(n);e.set(t,n-t.length);t=e}this.result=t;return this}}class RSA_OAEP{constructor(e,t,r){this.rsa=new RSA(e);this.hash=t;if(r!==undefined){this.label=r.length>0?r:null}else{this.label=null}}encrypt(e,t){const r=Math.ceil(this.rsa.key[0].bitLength/8);const n=this.hash.HASH_SIZE;const i=e.byteLength||e.length||0;const s=r-i-2*n-2;if(i>r-2*this.hash.HASH_SIZE-2)throw new IllegalArgumentError("data too large");const a=new Uint8Array(r);const o=a.subarray(1,n+1);const f=a.subarray(n+1);f.set(e,n+s+1);f.set(this.hash.process(this.label||new Uint8Array(0)).finish().result,0);f[n+s]=1;if(t!==undefined){if(o.length!==t.length)throw new IllegalArgumentError("random size must equal the hash size");o.set(t)}else{getRandomValues(o)}const c=this.RSA_MGF1_generate(o,f.length);for(let e=0;e<f.length;e++)f[e]^=c[e];const u=this.RSA_MGF1_generate(f,o.length);for(let e=0;e<o.length;e++)o[e]^=u[e];this.rsa.encrypt(new BigNumber(a));return new Uint8Array(this.rsa.result)}decrypt(e){if(!this.rsa.key)throw new IllegalStateError("no key is associated with the instance");const t=Math.ceil(this.rsa.key[0].bitLength/8);const r=this.hash.HASH_SIZE;const n=e.byteLength||e.length||0;if(n!==t)throw new IllegalArgumentError("bad data");this.rsa.decrypt(new BigNumber(e));const i=this.rsa.result[0];const s=this.rsa.result.subarray(1,r+1);const a=this.rsa.result.subarray(r+1);if(i!==0)throw new SecurityError("decryption failed");const o=this.RSA_MGF1_generate(a,s.length);for(let e=0;e<s.length;e++)s[e]^=o[e];const f=this.RSA_MGF1_generate(s,a.length);for(let e=0;e<a.length;e++)a[e]^=f[e];const c=this.hash.reset().process(this.label||new Uint8Array(0)).finish().result;for(let e=0;e<r;e++){if(c[e]!==a[e])throw new SecurityError("decryption failed")}let u=r;for(;u<a.length;u++){const e=a[u];if(e===1)break;if(e!==0)throw new SecurityError("decryption failed")}if(u===a.length)throw new SecurityError("decryption failed");this.rsa.result=a.subarray(u+1);return new Uint8Array(this.rsa.result)}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const n=new Uint8Array(t);const i=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){i[0]=t>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255;const s=n.subarray(t*r);let a=this.hash.reset().process(e).process(i).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return n}}class RSA_PSS{constructor(e,t,r=4){this.rsa=new RSA(e);this.hash=t;this.saltLength=r;if(this.saltLength<0)throw new TypeError("saltLength should be a non-negative number");if(this.rsa.key!==null&&Math.ceil((this.rsa.key[0].bitLength-1)/8)<this.hash.HASH_SIZE+this.saltLength+2)throw new SyntaxError("saltLength is too large")}sign(e,t){const r=this.rsa.key[0].bitLength;const n=this.hash.HASH_SIZE;const i=Math.ceil((r-1)/8);const s=this.saltLength;const a=i-s-n-2;const o=new Uint8Array(i);const f=o.subarray(i-n-1,i-1);const c=o.subarray(0,i-n-1);const u=c.subarray(a+1);const l=new Uint8Array(8+n+s);const h=l.subarray(8,8+n);const d=l.subarray(8+n);h.set(this.hash.process(e).finish().result);if(s>0){if(t!==undefined){if(d.length!==t.length)throw new IllegalArgumentError("random size must equal the salt size");d.set(t)}else{getRandomValues(d)}}c[a]=1;u.set(d);f.set(this.hash.reset().process(l).finish().result);const p=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=p[e];o[i-1]=188;const y=8*i-r+1;if(y%8)o[0]&=255>>>y;this.rsa.decrypt(new BigNumber(o));return this.rsa.result}verify(e,t){const r=this.rsa.key[0].bitLength;const n=this.hash.HASH_SIZE;const i=Math.ceil((r-1)/8);const s=this.saltLength;const a=i-s-n-2;this.rsa.encrypt(new BigNumber(e));const o=this.rsa.result;if(o[i-1]!==188)throw new SecurityError("bad signature");const f=o.subarray(i-n-1,i-1);const c=o.subarray(0,i-n-1);const u=c.subarray(a+1);const l=8*i-r+1;if(l%8&&o[0]>>>8-l)throw new SecurityError("bad signature");const h=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=h[e];if(l%8)o[0]&=255>>>l;for(let e=0;e<a;e++){if(c[e]!==0)throw new SecurityError("bad signature")}if(c[a]!==1)throw new SecurityError("bad signature");const d=new Uint8Array(8+n+s);const p=d.subarray(8,8+n);const y=d.subarray(8+n);p.set(this.hash.reset().process(t).finish().result);y.set(u);const m=this.hash.reset().process(d).finish().result;for(let e=0;e<n;e++){if(f[e]!==m[e])throw new SecurityError("bad signature")}}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const n=new Uint8Array(t);const i=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){i[0]=t>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=t&255;const s=n.subarray(t*r);let a=this.hash.reset().process(e).process(i).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return n}}class RSA_PKCS1_v1_5{constructor(e,t){this.rsa=new RSA(e);this.hash=t}sign(e){if(!this.rsa.key){throw new IllegalStateError("no key is associated with the instance")}const t=getHashPrefix(this.hash);const r=this.hash.HASH_SIZE;const n=t.length+r;const i=this.rsa.key[0].bitLength+7>>3;if(i<n+11){throw new Error("Message too long")}const s=new Uint8Array(r);s.set(this.hash.process(e).finish().result);const a=new Uint8Array(i);let o=0;a[o++]=0;a[o++]=1;for(o;o<i-n-1;o++){a[o]=255}a[o++]=0;a.set(t,o);a.set(s,a.length-r);this.rsa.decrypt(new BigNumber(a));return this.rsa.result}verify(e,t){const r=getHashPrefix(this.hash);const n=this.hash.HASH_SIZE;const i=r.length+n;const s=this.rsa.key[0].bitLength+7>>3;if(s<i+11){throw new SecurityError("Bad signature")}this.rsa.encrypt(new BigNumber(e));const a=new Uint8Array(n);a.set(this.hash.process(t).finish().result);let o=1;const f=this.rsa.result;let c=0;o&=f[c++]===0?1:0;o&=f[c++]===1?1:0;for(c;c<s-i-1;c++){o&=f[c]===255?1:0}o&=f[c++]===0?1:0;let u=0;let l=c+r.length;for(c;c<l;c++){o&=f[c]===r[u++]?1:0}u=0;l=c+a.length;for(c;c<l;c++){o&=f[c]===a[u++]?1:0}if(!o){throw new SecurityError("Bad signature")}}}const HASH_PREFIXES={sha1:new Uint8Array([48,33,48,9,6,5,43,14,3,2,26,5,0,4,20]),sha256:new Uint8Array([48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32]),sha384:new Uint8Array([48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48]),sha512:new Uint8Array([48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64])};function getHashPrefix(e){const t=HASH_PREFIXES[e.NAME];if(!t){throw new Error("Cannot get hash prefix for hash algorithm '"+e.NAME+"'")}return t}const asmcrypto_all_es8=Object.freeze({__proto__:null,string_to_bytes,hex_to_bytes,base64_to_bytes,bytes_to_string,bytes_to_hex,bytes_to_base64,IllegalStateError,IllegalArgumentError,SecurityError,AES_CBC,AES_CCM,AES_CFB,AES_CMAC,AES_CTR,AES_ECB,AES_GCM,AES_OFB,BigNumber,Modulus,Sha1,Sha256,Sha512,HmacSha1,HmacSha256,HmacSha512,Pbkdf2HmacSha1,Pbkdf2HmacSha256,Pbkdf2HmacSha512,RSA_OAEP,RSA_PKCS1_v1_5,RSA_PSS,RSA});var bn=createCommonjsModule$2((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=i}else{t.BN=i}i.BN=i;i.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$3.Buffer}}catch(e){}i.isBN=function e(t){if(t instanceof i){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)};i.max=function e(t,r){if(t.cmp(r)>0)return t;return r};i.min=function e(t,r){if(t.cmp(r)<0)return t;return r};i.prototype._init=function e(t,n,i){if(typeof t==="number"){return this._initNumber(t,n,i)}if(typeof t==="object"){return this._initArray(t,n,i)}if(n==="hex"){n=16}r(n===(n|0)&&n>=2&&n<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(n===16){this._parseHex(t,s,i)}else{this._parseBase(t,n,s);if(i==="le"){this._initArray(this.toArray(),n,i)}}}};i.prototype._initNumber=function e(t,n,i){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(i!=="le")return;this._initArray(this.toArray(),n,i)};i.prototype._initArray=function e(t,n,i){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(i==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(i==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this.strip()};function a(e,t){var r=e.charCodeAt(t);if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{return r-48&15}}function o(e,t,r){var n=a(e,r);if(r-1>=t){n|=a(e,r-1)<<4}return n}i.prototype._parseHex=function e(t,r,n){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var i=0;i<this.length;i++){this.words[i]=0}var s=0;var a=0;var f;if(n==="be"){for(i=t.length-1;i>=r;i-=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(i=c%2===0?r+1:r;i<t.length;i+=2){f=o(t,r,i)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this.strip()};function f(e,t,r,n){var i=0;var s=Math.min(e.length,r);for(var a=t;a<s;a++){var o=e.charCodeAt(a)-48;i*=n;if(o>=49){i+=o-49+10}else if(o>=17){i+=o-17+10}else{i+=o}}return i}i.prototype._parseBase=function e(t,r,n){this.words=[0];this.length=1;for(var i=0,s=1;s<=67108863;s*=r){i++}i--;s=s/r|0;var a=t.length-n;var o=a%i;var c=Math.min(a,a-o)+n;var u=0;for(var l=n;l<c;l+=i){u=f(t,l,l+i,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var h=1;u=f(t,l,t.length,r);for(l=0;l<o;l++){h*=r}this.imuln(h);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this.strip()};i.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};i.prototype.clone=function e(){var t=new i(null);this.copy(t);return t};i.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};i.prototype.strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};i.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};i.prototype.inspect=function e(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function e(t,n){t=t||10;n=n|0||1;var i;if(t===16||t==="hex"){i="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var h=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;if(a!==0||o!==this.length-1){i=c[6-h.length]+h+i}else{i=h+i}s+=2;if(s>=26){s-=26;o--}}if(a!==0){i=a.toString(16)+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}if(t===(t|0)&&t>=2&&t<=36){var d=u[t];var p=l[t];i="";var y=this.clone();y.negative=0;while(!y.isZero()){var m=y.modn(p).toString(t);y=y.idivn(p);if(!y.isZero()){i=c[d-m.length]+m+i}else{i=m+i}}if(this.isZero()){i="0"+i}while(i.length%n!==0){i="0"+i}if(this.negative!==0){i="-"+i}return i}r(false,"Base should be between 2 and 36")};i.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};i.prototype.toJSON=function e(){return this.toString(16)};i.prototype.toBuffer=function e(t,n){r(typeof s!=="undefined");return this.toArrayLike(s,t,n)};i.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};i.prototype.toArrayLike=function e(t,n,i){var s=this.byteLength();var a=i||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");this.strip();var o=n==="le";var f=new t(a);var c,u;var l=this.clone();if(!o){for(u=0;u<a-s;u++){f[u]=0}for(u=0;!l.isZero();u++){c=l.andln(255);l.iushrn(8);f[a-u-1]=c}}else{for(u=0;!l.isZero();u++){c=l.andln(255);l.iushrn(8);f[u]=c}for(;u<a;u++){f[u]=0}}return f};if(Math.clz32){i.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{i.prototype._countBits=function e(t){var r=t;var n=0;if(r>=4096){n+=13;r>>>=13}if(r>=64){n+=7;r>>>=7}if(r>=8){n+=4;r>>>=4}if(r>=2){n+=2;r>>>=2}return n+r}}i.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var n=0;if((r&8191)===0){n+=13;r>>>=13}if((r&127)===0){n+=7;r>>>=7}if((r&15)===0){n+=4;r>>>=4}if((r&3)===0){n+=2;r>>>=2}if((r&1)===0){n++}return n};i.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function h(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var n=r/26|0;var i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}i.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);t+=n;if(n!==26)break}return t};i.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};i.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};i.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};i.prototype.isNeg=function e(){return this.negative!==0};i.prototype.neg=function e(){return this.clone().ineg()};i.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};i.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this.strip()};i.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};i.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};i.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};i.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var n=0;n<r.length;n++){this.words[n]=this.words[n]&t.words[n]}this.length=r.length;return this.strip()};i.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};i.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};i.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};i.prototype.iuxor=function e(t){var r;var n;if(this.length>t.length){r=this;n=t}else{r=t;n=this}for(var i=0;i<n.length;i++){this.words[i]=r.words[i]^n.words[i]}if(this!==r){for(;i<r.length;i++){this.words[i]=r.words[i]}}this.length=r.length;return this.strip()};i.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};i.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};i.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};i.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var n=Math.ceil(t/26)|0;var i=t%26;this._expand(n);if(i>0){n--}for(var s=0;s<n;s++){this.words[s]=~this.words[s]&67108863}if(i>0){this.words[s]=~this.words[s]&67108863>>26-i}return this.strip()};i.prototype.notn=function e(t){return this.clone().inotn(t)};i.prototype.setn=function e(t,n){r(typeof t==="number"&&t>=0);var i=t/26|0;var s=t%26;this._expand(i+1);if(n){this.words[i]=this.words[i]|1<<s}else{this.words[i]=this.words[i]&~(1<<s)}return this.strip()};i.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var n,i;if(this.length>t.length){n=this;i=t}else{n=t;i=this}var s=0;for(var a=0;a<i.length;a++){r=(n.words[a]|0)+(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<n.length;a++){r=(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=n.length;if(s!==0){this.words[this.length]=s;this.length++}else if(n!==this){for(;a<n.length;a++){this.words[a]=n.words[a]}}return this};i.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};i.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var n=this.cmp(t);if(n===0){this.negative=0;this.length=1;this.words[0]=0;return this}var i,s;if(n>0){i=this;s=t}else{i=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(i.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<i.length;o++){r=(i.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<i.length&&i!==this){for(;o<i.length;o++){this.words[o]=i.words[o]}}this.length=Math.max(this.length,o);if(i!==this){this.negative=1}return this.strip()};i.prototype.sub=function e(t){return this.clone().isub(t)};function d(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n;n=n-1|0;var i=e.words[0]|0;var s=t.words[0]|0;var a=i*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){var u=f>>>26;var l=f&67108863;var h=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;i=e.words[p]|0;s=t.words[d]|0;a=i*s+l;u+=a/67108864|0;l=a&67108863}r.words[c]=l|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r.strip()}var p=function e(t,r,n){var i=t.words;var s=r.words;var a=n.words;var o=0;var f;var c;var u;var l=i[0]|0;var h=l&8191;var d=l>>>13;var p=i[1]|0;var y=p&8191;var m=p>>>13;var g=i[2]|0;var b=g&8191;var v=g>>>13;var w=i[3]|0;var A=w&8191;var E=w>>>13;var _=i[4]|0;var S=_&8191;var $=_>>>13;var T=i[5]|0;var C=T&8191;var P=T>>>13;var x=i[6]|0;var I=x&8191;var k=x>>>13;var N=i[7]|0;var R=N&8191;var M=N>>>13;var O=i[8]|0;var B=O&8191;var D=O>>>13;var U=i[9]|0;var L=U&8191;var F=U>>>13;var j=s[0]|0;var H=j&8191;var K=j>>>13;var G=s[1]|0;var V=G&8191;var z=G>>>13;var W=s[2]|0;var X=W&8191;var Y=W>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ne=re&8191;var ie=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var le=s[8]|0;var he=le&8191;var de=le>>>13;var pe=s[9]|0;var ye=pe&8191;var me=pe>>>13;n.negative=t.negative^r.negative;n.length=19;f=Math.imul(h,H);c=Math.imul(h,K);c=c+Math.imul(d,H)|0;u=Math.imul(d,K);var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(y,H);c=Math.imul(y,K);c=c+Math.imul(m,H)|0;u=Math.imul(m,K);f=f+Math.imul(h,V)|0;c=c+Math.imul(h,z)|0;c=c+Math.imul(d,V)|0;u=u+Math.imul(d,z)|0;var be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(be>>>26)|0;be&=67108863;f=Math.imul(b,H);c=Math.imul(b,K);c=c+Math.imul(v,H)|0;u=Math.imul(v,K);f=f+Math.imul(y,V)|0;c=c+Math.imul(y,z)|0;c=c+Math.imul(m,V)|0;u=u+Math.imul(m,z)|0;f=f+Math.imul(h,X)|0;c=c+Math.imul(h,Y)|0;c=c+Math.imul(d,X)|0;u=u+Math.imul(d,Y)|0;var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(A,H);c=Math.imul(A,K);c=c+Math.imul(E,H)|0;u=Math.imul(E,K);f=f+Math.imul(b,V)|0;c=c+Math.imul(b,z)|0;c=c+Math.imul(v,V)|0;u=u+Math.imul(v,z)|0;f=f+Math.imul(y,X)|0;c=c+Math.imul(y,Y)|0;c=c+Math.imul(m,X)|0;u=u+Math.imul(m,Y)|0;f=f+Math.imul(h,q)|0;c=c+Math.imul(h,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(S,H);c=Math.imul(S,K);c=c+Math.imul($,H)|0;u=Math.imul($,K);f=f+Math.imul(A,V)|0;c=c+Math.imul(A,z)|0;c=c+Math.imul(E,V)|0;u=u+Math.imul(E,z)|0;f=f+Math.imul(b,X)|0;c=c+Math.imul(b,Y)|0;c=c+Math.imul(v,X)|0;u=u+Math.imul(v,Y)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(h,ee)|0;c=c+Math.imul(h,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(C,H);c=Math.imul(C,K);c=c+Math.imul(P,H)|0;u=Math.imul(P,K);f=f+Math.imul(S,V)|0;c=c+Math.imul(S,z)|0;c=c+Math.imul($,V)|0;u=u+Math.imul($,z)|0;f=f+Math.imul(A,X)|0;c=c+Math.imul(A,Y)|0;c=c+Math.imul(E,X)|0;u=u+Math.imul(E,Y)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(v,q)|0;u=u+Math.imul(v,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(h,ne)|0;c=c+Math.imul(h,ie)|0;c=c+Math.imul(d,ne)|0;u=u+Math.imul(d,ie)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(I,H);c=Math.imul(I,K);c=c+Math.imul(k,H)|0;u=Math.imul(k,K);f=f+Math.imul(C,V)|0;c=c+Math.imul(C,z)|0;c=c+Math.imul(P,V)|0;u=u+Math.imul(P,z)|0;f=f+Math.imul(S,X)|0;c=c+Math.imul(S,Y)|0;c=c+Math.imul($,X)|0;u=u+Math.imul($,Y)|0;f=f+Math.imul(A,q)|0;c=c+Math.imul(A,Q)|0;c=c+Math.imul(E,q)|0;u=u+Math.imul(E,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(v,ee)|0;u=u+Math.imul(v,te)|0;f=f+Math.imul(y,ne)|0;c=c+Math.imul(y,ie)|0;c=c+Math.imul(m,ne)|0;u=u+Math.imul(m,ie)|0;f=f+Math.imul(h,ae)|0;c=c+Math.imul(h,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(R,H);c=Math.imul(R,K);c=c+Math.imul(M,H)|0;u=Math.imul(M,K);f=f+Math.imul(I,V)|0;c=c+Math.imul(I,z)|0;c=c+Math.imul(k,V)|0;u=u+Math.imul(k,z)|0;f=f+Math.imul(C,X)|0;c=c+Math.imul(C,Y)|0;c=c+Math.imul(P,X)|0;u=u+Math.imul(P,Y)|0;f=f+Math.imul(S,q)|0;c=c+Math.imul(S,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(A,ee)|0;c=c+Math.imul(A,te)|0;c=c+Math.imul(E,ee)|0;u=u+Math.imul(E,te)|0;f=f+Math.imul(b,ne)|0;c=c+Math.imul(b,ie)|0;c=c+Math.imul(v,ne)|0;u=u+Math.imul(v,ie)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(h,ce)|0;c=c+Math.imul(h,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(B,H);c=Math.imul(B,K);c=c+Math.imul(D,H)|0;u=Math.imul(D,K);f=f+Math.imul(R,V)|0;c=c+Math.imul(R,z)|0;c=c+Math.imul(M,V)|0;u=u+Math.imul(M,z)|0;f=f+Math.imul(I,X)|0;c=c+Math.imul(I,Y)|0;c=c+Math.imul(k,X)|0;u=u+Math.imul(k,Y)|0;f=f+Math.imul(C,q)|0;c=c+Math.imul(C,Q)|0;c=c+Math.imul(P,q)|0;u=u+Math.imul(P,Q)|0;f=f+Math.imul(S,ee)|0;c=c+Math.imul(S,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(A,ne)|0;c=c+Math.imul(A,ie)|0;c=c+Math.imul(E,ne)|0;u=u+Math.imul(E,ie)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(v,ae)|0;u=u+Math.imul(v,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(h,he)|0;c=c+Math.imul(h,de)|0;c=c+Math.imul(d,he)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(L,H);c=Math.imul(L,K);c=c+Math.imul(F,H)|0;u=Math.imul(F,K);f=f+Math.imul(B,V)|0;c=c+Math.imul(B,z)|0;c=c+Math.imul(D,V)|0;u=u+Math.imul(D,z)|0;f=f+Math.imul(R,X)|0;c=c+Math.imul(R,Y)|0;c=c+Math.imul(M,X)|0;u=u+Math.imul(M,Y)|0;f=f+Math.imul(I,q)|0;c=c+Math.imul(I,Q)|0;c=c+Math.imul(k,q)|0;u=u+Math.imul(k,Q)|0;f=f+Math.imul(C,ee)|0;c=c+Math.imul(C,te)|0;c=c+Math.imul(P,ee)|0;u=u+Math.imul(P,te)|0;f=f+Math.imul(S,ne)|0;c=c+Math.imul(S,ie)|0;c=c+Math.imul($,ne)|0;u=u+Math.imul($,ie)|0;f=f+Math.imul(A,ae)|0;c=c+Math.imul(A,oe)|0;c=c+Math.imul(E,ae)|0;u=u+Math.imul(E,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(v,ce)|0;u=u+Math.imul(v,ue)|0;f=f+Math.imul(y,he)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(m,he)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(h,ye)|0;c=c+Math.imul(h,me)|0;c=c+Math.imul(d,ye)|0;u=u+Math.imul(d,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(L,V);c=Math.imul(L,z);c=c+Math.imul(F,V)|0;u=Math.imul(F,z);f=f+Math.imul(B,X)|0;c=c+Math.imul(B,Y)|0;c=c+Math.imul(D,X)|0;u=u+Math.imul(D,Y)|0;f=f+Math.imul(R,q)|0;c=c+Math.imul(R,Q)|0;c=c+Math.imul(M,q)|0;u=u+Math.imul(M,Q)|0;f=f+Math.imul(I,ee)|0;c=c+Math.imul(I,te)|0;c=c+Math.imul(k,ee)|0;u=u+Math.imul(k,te)|0;f=f+Math.imul(C,ne)|0;c=c+Math.imul(C,ie)|0;c=c+Math.imul(P,ne)|0;u=u+Math.imul(P,ie)|0;f=f+Math.imul(S,ae)|0;c=c+Math.imul(S,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(A,ce)|0;c=c+Math.imul(A,ue)|0;c=c+Math.imul(E,ce)|0;u=u+Math.imul(E,ue)|0;f=f+Math.imul(b,he)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(v,he)|0;u=u+Math.imul(v,de)|0;f=f+Math.imul(y,ye)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(m,ye)|0;u=u+Math.imul(m,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(L,X);c=Math.imul(L,Y);c=c+Math.imul(F,X)|0;u=Math.imul(F,Y);f=f+Math.imul(B,q)|0;c=c+Math.imul(B,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(R,ee)|0;c=c+Math.imul(R,te)|0;c=c+Math.imul(M,ee)|0;u=u+Math.imul(M,te)|0;f=f+Math.imul(I,ne)|0;c=c+Math.imul(I,ie)|0;c=c+Math.imul(k,ne)|0;u=u+Math.imul(k,ie)|0;f=f+Math.imul(C,ae)|0;c=c+Math.imul(C,oe)|0;c=c+Math.imul(P,ae)|0;u=u+Math.imul(P,oe)|0;f=f+Math.imul(S,ce)|0;c=c+Math.imul(S,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(A,he)|0;c=c+Math.imul(A,de)|0;c=c+Math.imul(E,he)|0;u=u+Math.imul(E,de)|0;f=f+Math.imul(b,ye)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(v,ye)|0;u=u+Math.imul(v,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(L,q);c=Math.imul(L,Q);c=c+Math.imul(F,q)|0;u=Math.imul(F,Q);f=f+Math.imul(B,ee)|0;c=c+Math.imul(B,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(R,ne)|0;c=c+Math.imul(R,ie)|0;c=c+Math.imul(M,ne)|0;u=u+Math.imul(M,ie)|0;f=f+Math.imul(I,ae)|0;c=c+Math.imul(I,oe)|0;c=c+Math.imul(k,ae)|0;u=u+Math.imul(k,oe)|0;f=f+Math.imul(C,ce)|0;c=c+Math.imul(C,ue)|0;c=c+Math.imul(P,ce)|0;u=u+Math.imul(P,ue)|0;f=f+Math.imul(S,he)|0;c=c+Math.imul(S,de)|0;c=c+Math.imul($,he)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(A,ye)|0;c=c+Math.imul(A,me)|0;c=c+Math.imul(E,ye)|0;u=u+Math.imul(E,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(L,ee);c=Math.imul(L,te);c=c+Math.imul(F,ee)|0;u=Math.imul(F,te);f=f+Math.imul(B,ne)|0;c=c+Math.imul(B,ie)|0;c=c+Math.imul(D,ne)|0;u=u+Math.imul(D,ie)|0;f=f+Math.imul(R,ae)|0;c=c+Math.imul(R,oe)|0;c=c+Math.imul(M,ae)|0;u=u+Math.imul(M,oe)|0;f=f+Math.imul(I,ce)|0;c=c+Math.imul(I,ue)|0;c=c+Math.imul(k,ce)|0;u=u+Math.imul(k,ue)|0;f=f+Math.imul(C,he)|0;c=c+Math.imul(C,de)|0;c=c+Math.imul(P,he)|0;u=u+Math.imul(P,de)|0;f=f+Math.imul(S,ye)|0;c=c+Math.imul(S,me)|0;c=c+Math.imul($,ye)|0;u=u+Math.imul($,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(L,ne);c=Math.imul(L,ie);c=c+Math.imul(F,ne)|0;u=Math.imul(F,ie);f=f+Math.imul(B,ae)|0;c=c+Math.imul(B,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(R,ce)|0;c=c+Math.imul(R,ue)|0;c=c+Math.imul(M,ce)|0;u=u+Math.imul(M,ue)|0;f=f+Math.imul(I,he)|0;c=c+Math.imul(I,de)|0;c=c+Math.imul(k,he)|0;u=u+Math.imul(k,de)|0;f=f+Math.imul(C,ye)|0;c=c+Math.imul(C,me)|0;c=c+Math.imul(P,ye)|0;u=u+Math.imul(P,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(L,ae);c=Math.imul(L,oe);c=c+Math.imul(F,ae)|0;u=Math.imul(F,oe);f=f+Math.imul(B,ce)|0;c=c+Math.imul(B,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(R,he)|0;c=c+Math.imul(R,de)|0;c=c+Math.imul(M,he)|0;u=u+Math.imul(M,de)|0;f=f+Math.imul(I,ye)|0;c=c+Math.imul(I,me)|0;c=c+Math.imul(k,ye)|0;u=u+Math.imul(k,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(L,ce);c=Math.imul(L,ue);c=c+Math.imul(F,ce)|0;u=Math.imul(F,ue);f=f+Math.imul(B,he)|0;c=c+Math.imul(B,de)|0;c=c+Math.imul(D,he)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(R,ye)|0;c=c+Math.imul(R,me)|0;c=c+Math.imul(M,ye)|0;u=u+Math.imul(M,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(L,he);c=Math.imul(L,de);c=c+Math.imul(F,he)|0;u=Math.imul(F,de);f=f+Math.imul(B,ye)|0;c=c+Math.imul(B,me)|0;c=c+Math.imul(D,ye)|0;u=u+Math.imul(D,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(L,ye);c=Math.imul(L,me);c=c+Math.imul(F,ye)|0;u=Math.imul(F,me);var Oe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Oe>>>26)|0;Oe&=67108863;a[0]=ge;a[1]=be;a[2]=ve;a[3]=we;a[4]=Ae;a[5]=Ee;a[6]=_e;a[7]=Se;a[8]=$e;a[9]=Te;a[10]=Ce;a[11]=Pe;a[12]=xe;a[13]=Ie;a[14]=ke;a[15]=Ne;a[16]=Re;a[17]=Me;a[18]=Oe;if(o!==0){a[19]=o;n.length++}return n};if(!Math.imul){p=d}function y(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var n=0;var i=0;for(var s=0;s<r.length-1;s++){var a=i;i=0;var o=n&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var l=e.words[u]|0;var h=t.words[c]|0;var d=l*h;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;i+=a>>>26;a&=67108863}r.words[s]=o;n=a;a=i}if(n!==0){r.words[s]=n}else{r.length--}return r.strip()}function m(e,t,r){var n=new g;return n.mulp(e,t,r)}i.prototype.mulTo=function e(t,r){var n;var i=this.length+t.length;if(this.length===10&&t.length===10){n=p(this,t,r)}else if(i<63){n=d(this,t,r)}else if(i<1024){n=y(this,t,r)}else{n=m(this,t,r)}return n};function g(e,t){this.x=e;this.y=t}g.prototype.makeRBT=function e(t){var r=new Array(t);var n=i.prototype._countBits(t)-1;for(var s=0;s<t;s++){r[s]=this.revBin(s,n,t)}return r};g.prototype.revBin=function e(t,r,n){if(t===0||t===n-1)return t;var i=0;for(var s=0;s<r;s++){i|=(t&1)<<r-s-1;t>>=1}return i};g.prototype.permute=function e(t,r,n,i,s,a){for(var o=0;o<a;o++){i[o]=r[t[o]];s[o]=n[t[o]]}};g.prototype.transform=function e(t,r,n,i,s,a){this.permute(a,t,r,n,i,s);for(var o=1;o<s;o<<=1){var f=o<<1;var c=Math.cos(2*Math.PI/f);var u=Math.sin(2*Math.PI/f);for(var l=0;l<s;l+=f){var h=c;var d=u;for(var p=0;p<o;p++){var y=n[l+p];var m=i[l+p];var g=n[l+p+o];var b=i[l+p+o];var v=h*g-d*b;b=h*b+d*g;g=v;n[l+p]=y+g;i[l+p]=m+b;n[l+p+o]=y-g;i[l+p+o]=m-b;if(p!==f){v=c*h-u*d;d=c*d+u*h;h=v}}}}};g.prototype.guessLen13b=function e(t,r){var n=Math.max(r,t)|1;var i=n&1;var s=0;for(n=n/2|0;n;n=n>>>1){s++}return 1<<s+1+i};g.prototype.conjugate=function e(t,r,n){if(n<=1)return;for(var i=0;i<n/2;i++){var s=t[i];t[i]=t[n-i-1];t[n-i-1]=s;s=r[i];r[i]=-r[n-i-1];r[n-i-1]=-s}};g.prototype.normalize13b=function e(t,r){var n=0;for(var i=0;i<r/2;i++){var s=Math.round(t[2*i+1]/r)*8192+Math.round(t[2*i]/r)+n;t[i]=s&67108863;if(s<67108864){n=0}else{n=s/67108864|0}}return t};g.prototype.convert13b=function e(t,n,i,s){var a=0;for(var o=0;o<n;o++){a=a+(t[o]|0);i[2*o]=a&8191;a=a>>>13;i[2*o+1]=a&8191;a=a>>>13}for(o=2*n;o<s;++o){i[o]=0}r(a===0);r((a&~8191)===0)};g.prototype.stub=function e(t){var r=new Array(t);for(var n=0;n<t;n++){r[n]=0}return r};g.prototype.mulp=function e(t,r,n){var i=2*this.guessLen13b(t.length,r.length);var s=this.makeRBT(i);var a=this.stub(i);var o=new Array(i);var f=new Array(i);var c=new Array(i);var u=new Array(i);var l=new Array(i);var h=new Array(i);var d=n.words;d.length=i;this.convert13b(t.words,t.length,o,i);this.convert13b(r.words,r.length,u,i);this.transform(o,a,f,c,i,s);this.transform(u,a,l,h,i,s);for(var p=0;p<i;p++){var y=f[p]*l[p]-c[p]*h[p];c[p]=f[p]*h[p]+c[p]*l[p];f[p]=y}this.conjugate(f,c,i);this.transform(f,c,d,a,i,s);this.conjugate(d,a,i);this.normalize13b(d,i);n.negative=t.negative^r.negative;n.length=t.length+r.length;return n.strip()};i.prototype.mul=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};i.prototype.mulf=function e(t){var r=new i(null);r.words=new Array(this.length+t.length);return m(this,t,r)};i.prototype.imul=function e(t){return this.clone().mulTo(t,this)};i.prototype.imuln=function e(t){r(typeof t==="number");r(t<67108864);var n=0;for(var i=0;i<this.length;i++){var s=(this.words[i]|0)*t;var a=(s&67108863)+(n&67108863);n>>=26;n+=s/67108864|0;n+=a>>>26;this.words[i]=a&67108863}if(n!==0){this.words[i]=n;this.length++}return this};i.prototype.muln=function e(t){return this.clone().imuln(t)};i.prototype.sqr=function e(){return this.mul(this)};i.prototype.isqr=function e(){return this.imul(this.clone())};i.prototype.pow=function e(t){var r=h(t);if(r.length===0)return new i(1);var n=this;for(var s=0;s<r.length;s++,n=n.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=n.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;n=n.mul(a)}}return n};i.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=67108863>>>26-n<<26-n;var a;if(n!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<n;this.words[a]=c|o;o=f>>>26-n}if(o){this.words[a]=o;this.length++}}if(i!==0){for(a=this.length-1;a>=0;a--){this.words[a+i]=this.words[a]}for(a=0;a<i;a++){this.words[a]=0}this.length+=i}return this.strip()};i.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};i.prototype.iushrn=function e(t,n,i){r(typeof t==="number"&&t>=0);var s;if(n){s=(n-n%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=i;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=s);u--){var h=this.words[u]|0;this.words[u]=l<<26-a|h>>>a;l=h&f}if(c&&l!==0){c.words[c.length++]=l}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};i.prototype.ishrn=function e(t,n,i){r(this.negative===0);return this.iushrn(t,n,i)};i.prototype.shln=function e(t){return this.clone().ishln(t)};i.prototype.ushln=function e(t){return this.clone().iushln(t)};i.prototype.shrn=function e(t){return this.clone().ishrn(t)};i.prototype.ushrn=function e(t){return this.clone().iushrn(t)};i.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i)return false;var a=this.words[i];return!!(a&s)};i.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var n=t%26;var i=(t-n)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=i){return this}if(n!==0){i++}this.length=Math.min(i,this.length);if(n!==0){var s=67108863^67108863>>>n<<n;this.words[this.length-1]&=s}return this.strip()};i.prototype.maskn=function e(t){return this.clone().imaskn(t)};i.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};i.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};i.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var n=0;n<this.length&&this.words[n]<0;n++){this.words[n]+=67108864;this.words[n+1]-=1}}return this.strip()};i.prototype.addn=function e(t){return this.clone().iaddn(t)};i.prototype.subn=function e(t){return this.clone().isubn(t)};i.prototype.iabs=function e(){this.negative=0;return this};i.prototype.abs=function e(){return this.clone().iabs()};i.prototype._ishlnsubmul=function e(t,n,i){var s=t.length+i;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+i]|0)+f;var c=(t.words[a]|0)*n;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+i]=o&67108863}for(;a<this.length-i;a++){o=(this.words[a+i]|0)+f;f=o>>26;this.words[a+i]=o&67108863}if(f===0)return this.strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this.strip()};i.prototype._wordDiv=function e(t,r){var n=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);n=26-f;if(n!==0){a=a.ushln(n);s.iushln(n);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new i(null);u.length=c+1;u.words=new Array(u.length);for(var l=0;l<u.length;l++){u.words[l]=0}}var h=s.clone()._ishlnsubmul(a,1,c);if(h.negative===0){s=h;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u.strip()}s.strip();if(r!=="div"&&n!==0){s.iushrn(n)}return{div:u||null,mod:s}};i.prototype.divmod=function e(t,n,s){r(!t.isZero());if(this.isZero()){return{div:new i(0),mod:new i(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,n);if(n!=="mod"){a=f.div.neg()}if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),n);if(n!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),n);if(n!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new i(0),mod:this}}if(t.length===1){if(n==="div"){return{div:this.divn(t.words[0]),mod:null}}if(n==="mod"){return{div:null,mod:new i(this.modn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new i(this.modn(t.words[0]))}}return this._wordDiv(t,n)};i.prototype.div=function e(t){return this.divmod(t,"div",false).div};i.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};i.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};i.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod;var i=t.ushrn(1);var s=t.andln(1);var a=n.cmp(i);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};i.prototype.modn=function e(t){r(t<=67108863);var n=(1<<26)%t;var i=0;for(var s=this.length-1;s>=0;s--){i=(n*i+(this.words[s]|0))%t}return i};i.prototype.idivn=function e(t){r(t<=67108863);var n=0;for(var i=this.length-1;i>=0;i--){var s=(this.words[i]|0)+n*67108864;this.words[i]=s/t|0;n=s%t}return this.strip()};i.prototype.divn=function e(t){return this.clone().idivn(t)};i.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=new i(0);var c=new i(1);var u=0;while(n.isEven()&&s.isEven()){n.iushrn(1);s.iushrn(1);++u}var l=s.clone();var h=n.clone();while(!n.isZero()){for(var d=0,p=1;(n.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){n.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(l);o.isub(h)}a.iushrn(1);o.iushrn(1)}}for(var y=0,m=1;(s.words[0]&m)===0&&y<26;++y,m<<=1);if(y>0){s.iushrn(y);while(y-- >0){if(f.isOdd()||c.isOdd()){f.iadd(l);c.isub(h)}f.iushrn(1);c.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(f);o.isub(c)}else{s.isub(n);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};i.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var n=this;var s=t.clone();if(n.negative!==0){n=n.umod(t)}else{n=n.clone()}var a=new i(1);var o=new i(0);var f=s.clone();while(n.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(n.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){n.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var l=0,h=1;(s.words[0]&h)===0&&l<26;++l,h<<=1);if(l>0){s.iushrn(l);while(l-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(n.cmp(s)>=0){n.isub(s);a.isub(o)}else{s.isub(n);o.isub(a)}}var d;if(n.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};i.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var n=t.clone();r.negative=0;n.negative=0;for(var i=0;r.isEven()&&n.isEven();i++){r.iushrn(1);n.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(n.isEven()){n.iushrn(1)}var s=r.cmp(n);if(s<0){var a=r;r=n;n=a}else if(s===0||n.cmpn(1)===0){break}r.isub(n)}while(true);return n.iushln(i)};i.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};i.prototype.isEven=function e(){return(this.words[0]&1)===0};i.prototype.isOdd=function e(){return(this.words[0]&1)===1};i.prototype.andln=function e(t){return this.words[0]&t};i.prototype.bincn=function e(t){r(typeof t==="number");var n=t%26;var i=(t-n)/26;var s=1<<n;if(this.length<=i){this._expand(i+1);this.words[i]|=s;return this}var a=s;for(var o=i;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};i.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};i.prototype.cmpn=function e(t){var n=t<0;if(this.negative!==0&&!n)return-1;if(this.negative===0&&n)return 1;this.strip();var i;if(this.length>1){i=1}else{if(n){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;i=s===t?0:s<t?-1:1}if(this.negative!==0)return-i|0;return i};i.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};i.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var n=this.length-1;n>=0;n--){var i=this.words[n]|0;var s=t.words[n]|0;if(i===s)continue;if(i<s){r=-1}else if(i>s){r=1}break}return r};i.prototype.gtn=function e(t){return this.cmpn(t)===1};i.prototype.gt=function e(t){return this.cmp(t)===1};i.prototype.gten=function e(t){return this.cmpn(t)>=0};i.prototype.gte=function e(t){return this.cmp(t)>=0};i.prototype.ltn=function e(t){return this.cmpn(t)===-1};i.prototype.lt=function e(t){return this.cmp(t)===-1};i.prototype.lten=function e(t){return this.cmpn(t)<=0};i.prototype.lte=function e(t){return this.cmp(t)<=0};i.prototype.eqn=function e(t){return this.cmpn(t)===0};i.prototype.eq=function e(t){return this.cmp(t)===0};i.red=function e(t){return new S(t)};i.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};i.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};i.prototype._forceRed=function e(t){this.red=t;return this};i.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};i.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};i.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};i.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};i.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};i.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};i.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};i.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};i.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};i.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};i.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};i.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};i.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};i.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e;this.p=new i(t,16);this.n=this.p.bitLength();this.k=new i(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}v.prototype._tmp=function e(){var t=new i(null);t.words=new Array(Math.ceil(this.n/13));return t};v.prototype.ireduce=function e(t){var r=t;var n;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);n=r.bitLength()}while(n>this.n);var i=n<this.n?-1:r.ucmp(this.p);if(i===0){r.words[0]=0;r.length=1}else if(i>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};v.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};v.prototype.imulK=function e(t){return t.imul(this.k)};function w(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(w,v);w.prototype.split=function e(t,r){var n=4194303;var i=Math.min(t.length,9);for(var s=0;s<i;s++){r.words[s]=t.words[s]}r.length=i;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&n;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&n)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};w.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var n=0;n<t.length;n++){var i=t.words[n]|0;r+=i*977;t.words[n]=r&67108863;r=i*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function A(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(A,v);function E(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(E,v);function _(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(_,v);_.prototype.imulK=function e(t){var r=0;for(var n=0;n<t.length;n++){var i=(t.words[n]|0)*19+r;var s=i&67108863;i>>>=26;t.words[n]=s;r=i}if(r!==0){t.words[t.length++]=r}return t};i._prime=function e(t){if(b[t])return b[t];var e;if(t==="k256"){e=new w}else if(t==="p224"){e=new A}else if(t==="p192"){e=new E}else if(t==="p25519"){e=new _}else{throw new Error("Unknown prime "+t)}b[t]=e;return e};function S(e){if(typeof e==="string"){var t=i._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}S.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};S.prototype._verify2=function e(t,n){r((t.negative|n.negative)===0,"red works only with positives");r(t.red&&t.red===n.red,"red works only with red numbers")};S.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);return t.umod(this.m)._forceRed(this)};S.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};S.prototype.add=function e(t,r){this._verify2(t,r);var n=t.add(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n._forceRed(this)};S.prototype.iadd=function e(t,r){this._verify2(t,r);var n=t.iadd(r);if(n.cmp(this.m)>=0){n.isub(this.m)}return n};S.prototype.sub=function e(t,r){this._verify2(t,r);var n=t.sub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n._forceRed(this)};S.prototype.isub=function e(t,r){this._verify2(t,r);var n=t.isub(r);if(n.cmpn(0)<0){n.iadd(this.m)}return n};S.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};S.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};S.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};S.prototype.isqr=function e(t){return this.imul(t,t.clone())};S.prototype.sqr=function e(t){return this.mul(t,t)};S.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var n=this.m.andln(3);r(n%2===1);if(n===3){var s=this.m.add(new i(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new i(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var l=this.m.bitLength();l=new i(2*l*l).toRed(this);while(this.pow(l,u).cmp(c)!==0){l.redIAdd(c)}var h=this.pow(l,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var y=o;while(p.cmp(f)!==0){var m=p;for(var g=0;m.cmp(f)!==0;g++){m=m.redSqr()}r(g<y);var b=this.pow(h,new i(1).iushln(y-g-1));d=d.redMul(b);h=b.redSqr();p=p.redMul(h);y=g}return d};S.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};S.prototype.pow=function e(t,r){if(r.isZero())return new i(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4;var s=new Array(1<<n);s[0]=new i(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var l=r.words[a];for(var h=u-1;h>=0;h--){var d=l>>h&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==n&&(a!==0||h!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};S.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};S.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};i.mont=function e(t){return new $(t)};function $(e){S.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new i(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}n($,S);$.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};$.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};$.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var n=t.imul(r);var i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=n.isub(i).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};$.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new i(0)._forceRed(this);var n=t.mul(r);var s=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=n.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};$.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));var utils_1$1=createCommonjsModule$2((function(e,t){var r=t;function n(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var n=0;n<e.length;n++)r[n]=e[n]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else{for(var n=0;n<e.length;n++){var i=e.charCodeAt(n);var s=i>>8;var a=i&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=n;function i(e){if(e.length===1)return"0"+e;else return e}r.zero2=i;function s(e){var t="";for(var r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toHex=s;r.encode=function e(t,r){if(r==="hex")return s(t);else return t}}));var utils_1=createCommonjsModule$2((function(e,t){var r=t;r.assert=minimalisticAssert$1;r.toArray=utils_1$1.toArray;r.zero2=utils_1$1.zero2;r.toHex=utils_1$1.toHex;r.encode=utils_1$1.encode;function n(e,t){var r=[];var n=1<<t+1;var i=e.clone();while(i.cmpn(1)>=0){var s;if(i.isOdd()){var a=i.andln(n-1);if(a>(n>>1)-1)s=(n>>1)-a;else s=a;i.isubn(s)}else{s=0}r.push(s);var o=i.cmpn(0)!==0&&i.andln(n-1)===0?t+1:1;for(var f=1;f<o;f++)r.push(0);i.iushrn(o)}return r}r.getNAF=n;function i(e,t){var r=[[],[]];e=e.clone();t=t.clone();var n=0;var i=0;while(e.cmpn(-n)>0||t.cmpn(-i)>0){var s=e.andln(3)+n&3;var a=t.andln(3)+i&3;if(s===3)s=-1;if(a===3)a=-1;var o;if((s&1)===0){o=0}else{var f=e.andln(7)+n&7;if((f===3||f===5)&&a===2)o=-s;else o=s}r[0].push(o);var c;if((a&1)===0){c=0}else{var f=t.andln(7)+i&7;if((f===3||f===5)&&s===2)c=-a;else c=a}r[1].push(c);if(2*n===o+1)n=1-n;if(2*i===c+1)i=1-i;e.iushrn(1);t.iushrn(1)}return r}r.getJSF=i;function s(e,t,r){var n="_"+t;e.prototype[t]=function e(){return this[n]!==undefined?this[n]:this[n]=r.call(this)}}r.cachedProperty=s;function a(e){return typeof e==="string"?r.toArray(e,"hex"):e}r.parseBytes=a;function o(e){return new bn(e,"hex","le")}r.intFromLE=o}));var r;var brorand=function e(t){if(!r)r=new Rand(null);return r.generate(t)};function Rand(e){this.rand=e}var Rand_1=Rand;Rand.prototype.generate=function e(t){return this._rand(t)};Rand.prototype._rand=function e(t){if(this.rand.getBytes)return this.rand.getBytes(t);var r=new Uint8Array(t);for(var n=0;n<r.length;n++)r[n]=this.rand.getByte();return r};if(typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.crypto.getRandomValues(r);return r}}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.msCrypto.getRandomValues(r);return r}}else if(typeof window==="object"){Rand.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var crypto$4=require$$3;if(typeof crypto$4.randomBytes!=="function")throw new Error("Not supported");Rand.prototype._rand=function e(t){return crypto$4.randomBytes(t)}}catch(e){}}brorand.Rand=Rand_1;var getNAF=utils_1.getNAF;var getJSF=utils_1.getJSF;var assert$8=utils_1.assert;function BaseCurve(e,t){this.type=e;this.p=new bn(t.p,16);this.red=t.prime?bn.red(t.prime):bn.mont(this.p);this.zero=new bn(0).toRed(this.red);this.one=new bn(1).toRed(this.red);this.two=new bn(2).toRed(this.red);this.n=t.n&&new bn(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$4=BaseCurve;BaseCurve.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function e(t,r){assert$8(t.precomputed);var n=t._getDoubles();var i=getNAF(r,1);var s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[];for(var o=0;o<i.length;o+=n.step){var f=0;for(var r=o+n.step-1;r>=o;r--)f=(f<<1)+i[r];a.push(f)}var c=this.jpoint(null,null,null);var u=this.jpoint(null,null,null);for(var l=s;l>0;l--){for(var o=0;o<a.length;o++){var f=a[o];if(f===l)u=u.mixedAdd(n.points[o]);else if(f===-l)u=u.mixedAdd(n.points[o].neg())}c=c.add(u)}return c.toP()};BaseCurve.prototype._wnafMul=function e(t,r){var n=4;var i=t._getNAFPoints(n);n=i.wnd;var s=i.points;var a=getNAF(r,n);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var r=0;f>=0&&a[f]===0;f--)r++;if(f>=0)r++;o=o.dblp(r);if(f<0)break;var c=a[f];assert$8(c!==0);if(t.type==="affine"){if(c>0)o=o.mixedAdd(s[c-1>>1]);else o=o.mixedAdd(s[-c-1>>1].neg())}else{if(c>0)o=o.add(s[c-1>>1]);else o=o.add(s[-c-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve.prototype._wnafMulAdd=function e(t,r,n,i,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;for(var u=0;u<i;u++){var l=r[u];var h=l._getNAFPoints(t);a[u]=h.wnd;o[u]=h.points}for(var u=i-1;u>=1;u-=2){var d=u-1;var p=u;if(a[d]!==1||a[p]!==1){f[d]=getNAF(n[d],a[d]);f[p]=getNAF(n[p],a[p]);c=Math.max(f[d].length,c);c=Math.max(f[p].length,c);continue}var y=[r[d],null,null,r[p]];if(r[d].y.cmp(r[p].y)===0){y[1]=r[d].add(r[p]);y[2]=r[d].toJ().mixedAdd(r[p].neg())}else if(r[d].y.cmp(r[p].y.redNeg())===0){y[1]=r[d].toJ().mixedAdd(r[p]);y[2]=r[d].add(r[p].neg())}else{y[1]=r[d].toJ().mixedAdd(r[p]);y[2]=r[d].toJ().mixedAdd(r[p].neg())}var m=[-3,-1,-5,-7,0,7,5,1,3];var g=getJSF(n[d],n[p]);c=Math.max(g[0].length,c);f[d]=new Array(c);f[p]=new Array(c);for(var b=0;b<c;b++){var v=g[0][b]|0;var w=g[1][b]|0;f[d][b]=m[(v+1)*3+(w+1)];f[p][b]=0;o[d]=y}}var A=this.jpoint(null,null,null);var E=this._wnafT4;for(var u=c;u>=0;u--){var _=0;while(u>=0){var S=true;for(var b=0;b<i;b++){E[b]=f[b][u]|0;if(E[b]!==0)S=false}if(!S)break;_++;u--}if(u>=0)_++;A=A.dblp(_);if(u<0)break;for(var b=0;b<i;b++){var $=E[b];var l;if($===0)continue;else if($>0)l=o[b][$-1>>1];else if($<0)l=o[b][-$-1>>1].neg();if(l.type==="affine")A=A.mixedAdd(l);else A=A.add(l)}}for(var u=0;u<i;u++)o[u]=null;if(s)return A;else return A.toP()};function BasePoint(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function e(t,r){t=utils_1.toArray(t,r);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){if(t[0]===6)assert$8(t[t.length-1]%2===0);else if(t[0]===7)assert$8(t[t.length-1]%2===1);var i=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return i}else if((t[0]===2||t[0]===3)&&t.length-1===n){return this.pointFromX(t.slice(1,1+n),t[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint.prototype._encode=function e(t){var r=this.curve.p.byteLength();var n=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(n);return[4].concat(n,this.getY().toArray("be",r))};BasePoint.prototype.encode=function e(t,r){return utils_1.encode(this._encode(r),t)};BasePoint.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var n=[this];var i=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)i=i.dbl();n.push(i)}return{step:t,points:n}};BasePoint.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var n=(1<<t)-1;var i=n===1?null:this.dbl();for(var s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:t,points:r}};BasePoint.prototype._getBeta=function e(){return null};BasePoint.prototype.dblp=function e(t){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r};var assert$7=utils_1.assert;function ShortCurve(e){base$4.call(this,"short",e);this.a=new bn(e.a,16).toRed(this.red);this.b=new bn(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits_browser$1(ShortCurve,base$4);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var n;if(t.beta){r=new bn(t.beta,16).toRed(this.red)}else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1];r=r.toRed(this.red)}if(t.lambda){n=new bn(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){n=s[0]}else{n=s[1];assert$7(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new bn(e.a,16),b:new bn(e.b,16)}}))}else{a=this._getEndoBasis(n)}return{beta:r,lambda:n,basis:a}};ShortCurve.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:bn.mont(t);var n=new bn(2).toRed(r).redInvm();var i=n.redNeg();var s=new bn(3).toRed(r).redNeg().redSqrt().redMul(n);var a=i.redAdd(s).fromRed();var o=i.redSub(s).fromRed();return[a,o]};ShortCurve.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var n=t;var i=this.n.clone();var s=new bn(1);var a=new bn(0);var o=new bn(0);var f=new bn(1);var c;var u;var l;var h;var d;var p;var y;var m=0;var g;var b;while(n.cmpn(0)!==0){var v=i.div(n);g=i.sub(v.mul(n));b=o.sub(v.mul(s));var w=f.sub(v.mul(a));if(!l&&g.cmp(r)<0){c=y.neg();u=s;l=g.neg();h=b}else if(l&&++m===2){break}y=g;i=n;n=g;o=s;s=b;f=a;a=w}d=g.neg();p=b;var A=l.sqr().add(h.sqr());var E=d.sqr().add(p.sqr());if(E.cmp(A)>=0){d=c;p=u}if(l.negative){l=l.neg();h=h.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:l,b:h},{a:d,b:p}]};ShortCurve.prototype._endoSplit=function e(t){var r=this.endo.basis;var n=r[0];var i=r[1];var s=i.b.mul(t).divRound(this.n);var a=n.b.neg().mul(t).divRound(this.n);var o=s.mul(n.a);var f=a.mul(i.a);var c=s.mul(n.b);var u=a.mul(i.b);var l=t.sub(o).sub(f);var h=c.add(u).neg();return{k1:l,k2:h}};ShortCurve.prototype.pointFromX=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();if(r&&!s||!r&&s)i=i.redNeg();return this.point(t,i)};ShortCurve.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var n=t.y;var i=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function e(t,r,n){var i=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}i[a*2]=f;i[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,i,s,a*2,n);for(var l=0;l<a*2;l++){i[l]=null;s[l]=null}return u};function Point$2(e,t,r,n){base$4.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new bn(t,16);this.y=new bn(r,16);if(n){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits_browser$1(Point$2,base$4.BasePoint);ShortCurve.prototype.point=function e(t,r,n){return new Point$2(this,t,r,n)};ShortCurve.prototype.pointFromJSON=function e(t,r){return Point$2.fromJSON(this,t,r)};Point$2.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve;var i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return r};Point$2.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$2.fromJSON=function e(t,r,n){if(typeof r==="string")r=JSON.parse(r);var i=t.point(r[0],r[1],n);if(!r[2])return i;function s(e){return t.point(e[0],e[1],n)}var a=r[2];i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}};return i};Point$2.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function e(){return this.inf};Point$2.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var n=r.redSqr().redISub(this.x).redISub(t.x);var i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Point$2.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var n=this.x.redSqr();var i=t.redInvm();var s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$2.prototype.getX=function e(){return this.x.fromRed()};Point$2.prototype.getY=function e(){return this.y.fromRed()};Point$2.prototype.mul=function e(t){t=new bn(t,16);if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$2.prototype.mulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s);else return this.curve._wnafMulAdd(1,i,s,2)};Point$2.prototype.jmulAdd=function e(t,r,n){var i=[this,r];var s=[t,n];if(this.curve.endo)return this.curve._endoWnafMulAdd(i,s,true);else return this.curve._wnafMulAdd(1,i,s,2,true)};Point$2.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$2.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed;var i=function(e){return e.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Point$2.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint(e,t,r,n){base$4.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&n===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn(0)}else{this.x=new bn(t,16);this.y=new bn(r,16);this.z=new bn(n,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits_browser$1(JPoint,base$4.BasePoint);ShortCurve.prototype.jpoint=function e(t,r,n){return new JPoint(this,t,r,n)};JPoint.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var n=this.x.redMul(r);var i=this.y.redMul(r).redMul(t);return this.curve.point(n,i)};JPoint.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var n=this.z.redSqr();var i=this.x.redMul(r);var s=t.x.redMul(n);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(n.redMul(this.z));var f=i.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var l=u.redMul(f);var h=i.redMul(u);var d=c.redSqr().redIAdd(l).redISub(h).redISub(h);var p=c.redMul(h.redISub(d)).redISub(a.redMul(l));var y=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,y)};JPoint.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var n=this.x;var i=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=n.redSub(i);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var l=n.redMul(c);var h=f.redSqr().redIAdd(u).redISub(l).redISub(l);var d=f.redMul(l.redISub(h)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(h,d,p)};JPoint.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var n=0;n<t;n++)r=r.dbl();return r}var i=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(var n=0;n<t;n++){var l=a.redSqr();var h=u.redSqr();var d=h.redSqr();var p=l.redAdd(l).redIAdd(l).redIAdd(i.redMul(c));var y=a.redMul(h);var m=p.redSqr().redISub(y.redAdd(y));var g=y.redISub(m);var b=p.redMul(g);b=b.redIAdd(b).redISub(d);var v=u.redMul(f);if(n+1<t)c=c.redMul(d);a=m;f=v;u=b}return this.curve.jpoint(a,u.redMul(s),f)};JPoint.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.x.redSqr();var h=this.y.redSqr();var d=h.redSqr();var p=this.x.redAdd(h).redSqr().redISub(l).redISub(d);p=p.redIAdd(p);var y=l.redAdd(l).redIAdd(l);var m=y.redSqr();var g=d.redIAdd(d);g=g.redIAdd(g);g=g.redIAdd(g);t=m.redISub(p).redISub(p);r=y.redMul(p.redISub(t)).redISub(g);n=this.y.redMul(this.z);n=n.redIAdd(n)}return this.curve.jpoint(t,r,n)};JPoint.prototype._threeDbl=function e(){var t;var r;var n;if(this.zOne){var i=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(i).redISub(a);o=o.redIAdd(o);var f=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);n=this.y.redAdd(this.y)}else{var l=this.z.redSqr();var h=this.y.redSqr();var d=this.x.redMul(h);var p=this.x.redSub(l).redMul(this.x.redAdd(l));p=p.redAdd(p).redIAdd(p);var y=d.redIAdd(d);y=y.redIAdd(y);var m=y.redAdd(y);t=p.redSqr().redISub(m);n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var g=h.redSqr();g=g.redIAdd(g);g=g.redIAdd(g);g=g.redIAdd(g);r=p.redMul(y.redISub(t)).redISub(g)}return this.curve.jpoint(t,r,n)};JPoint.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var n=this.y;var i=this.z;var s=i.redSqr().redSqr();var a=r.redSqr();var o=n.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var l=f.redSqr().redISub(u.redAdd(u));var h=u.redISub(l);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(h).redISub(d);var y=n.redAdd(n).redMul(i);return this.curve.jpoint(l,p,y)};JPoint.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();var i=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(i);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=i.redIAdd(i);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var l=r.redMul(u);l=l.redIAdd(l);l=l.redIAdd(l);var h=this.x.redMul(f).redISub(l);h=h.redIAdd(h);h=h.redIAdd(h);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(f);return this.curve.jpoint(h,d,p)};JPoint.prototype.mul=function e(t,r){t=new bn(t,r);return this.curve._wnafMul(this,t)};JPoint.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var i=r.redMul(this.z);var s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(i)).cmpn(0)===0};JPoint.prototype.eqXToP=function e(t){var r=this.z.redSqr();var n=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return true;var i=t.clone();var s=this.curve.redN.redMul(r);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;n.redIAdd(s);if(this.x.cmp(n)===0)return true}};JPoint.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};function MontCurve(e){base$4.call(this,"mont",e);this.a=new bn(e.a,16).toRed(this.red);this.b=new bn(e.b,16).toRed(this.red);this.i4=new bn(4).toRed(this.red).redInvm();this.two=new bn(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits_browser$1(MontCurve,base$4);var mont=MontCurve;MontCurve.prototype.validate=function e(t){var r=t.normalize().x;var n=r.redSqr();var i=n.redMul(r).redAdd(n.redMul(this.a)).redAdd(r);var s=i.redSqrt();return s.redSqr().cmp(i)===0};function Point$1(e,t,r){base$4.BasePoint.call(this,e,"projective");if(t===null&&r===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new bn(t,16);this.z=new bn(r,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}inherits_browser$1(Point$1,base$4.BasePoint);MontCurve.prototype.decodePoint=function e(t,r){var t=utils_1.toArray(t,r);if(t.length===33&&t[0]===64)t=t.slice(1,33).reverse();if(t.length!==32)throw new Error("Unknown point compression format");return this.point(t,1)};MontCurve.prototype.point=function e(t,r){return new Point$1(this,t,r)};MontCurve.prototype.pointFromJSON=function e(t){return Point$1.fromJSON(this,t)};Point$1.prototype.precompute=function e(){};Point$1.prototype._encode=function e(t){var r=this.curve.p.byteLength();if(t){return[64].concat(this.getX().toArray("le",r))}else{return this.getX().toArray("be",r)}};Point$1.fromJSON=function e(t,r){return new Point$1(t,r[0],r[1]||t.one)};Point$1.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function e(){var t=this.x.redAdd(this.z);var r=t.redSqr();var n=this.x.redSub(this.z);var i=n.redSqr();var s=r.redSub(i);var a=r.redMul(i);var o=s.redMul(i.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};Point$1.prototype.add=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function e(t,r){var n=this.x.redAdd(this.z);var i=this.x.redSub(this.z);var s=t.x.redAdd(t.z);var a=t.x.redSub(t.z);var o=a.redMul(n);var f=s.redMul(i);var c=r.z.redMul(o.redAdd(f).redSqr());var u=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(c,u)};Point$1.prototype.mul=function e(t){t=new bn(t,16);var r=t.clone();var n=this;var i=this.curve.point(null,null);var s=this;for(var a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--){if(a[o]===0){n=n.diffAdd(i,s);i=i.dbl()}else{i=n.diffAdd(i,s);n=n.dbl()}}return i};Point$1.prototype.mulAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function e(t){return this.getX().cmp(t.getX())===0};Point$1.prototype.normalize=function e(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};Point$1.prototype.getX=function e(){this.normalize();return this.x.fromRed()};var assert$6=utils_1.assert;function EdwardsCurve(e){this.twisted=(e.a|0)!==1;this.mOneA=this.twisted&&(e.a|0)===-1;this.extended=this.mOneA;base$4.call(this,"edwards",e);this.a=new bn(e.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new bn(e.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new bn(e.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert$6(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(e.c|0)===1}inherits_browser$1(EdwardsCurve,base$4);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function e(t){if(this.mOneA)return t.redNeg();else return this.a.redMul(t)};EdwardsCurve.prototype._mulC=function e(t){if(this.oneC)return t;else return this.c.redMul(t)};EdwardsCurve.prototype.jpoint=function e(t,r,n,i){return this.point(t,r,n,i)};EdwardsCurve.prototype.pointFromX=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr();var i=this.c2.redSub(this.a.redMul(n));var s=this.one.redSub(this.c2.redMul(this.d).redMul(n));var a=i.redMul(s.redInvm());var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();if(r&&!f||!r&&f)o=o.redNeg();return this.point(t,o)};EdwardsCurve.prototype.pointFromY=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var n=t.redSqr();var i=n.redSub(this.c2);var s=n.redMul(this.d).redMul(this.c2).redSub(this.a);var a=i.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");else return this.point(this.zero,t)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");if(o.fromRed().isOdd()!==r)o=o.redNeg();return this.point(o,t)};EdwardsCurve.prototype.validate=function e(t){if(t.isInfinity())return true;t.normalize();var r=t.x.redSqr();var n=t.y.redSqr();var i=r.redMul(this.a).redAdd(n);var s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(n)));return i.cmp(s)===0};function Point(e,t,r,n,i){base$4.BasePoint.call(this,e,"projective");if(t===null&&r===null&&n===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new bn(t,16);this.y=new bn(r,16);this.z=n?new bn(n,16):this.curve.one;this.t=i&&new bn(i,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}inherits_browser$1(Point,base$4.BasePoint);EdwardsCurve.prototype.pointFromJSON=function e(t){return Point.fromJSON(this,t)};EdwardsCurve.prototype.point=function e(t,r,n,i){return new Point(this,t,r,n,i)};Point.fromJSON=function e(t,r){return new Point(t,r[0],r[1],r[2])};Point.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function e(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function e(){var t=this.x.redSqr();var r=this.y.redSqr();var n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(t);var s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r);var a=i.redAdd(r);var o=a.redSub(n);var f=i.redSub(r);var c=s.redMul(o);var u=a.redMul(f);var l=s.redMul(f);var h=o.redMul(a);return this.curve.point(c,u,h,l)};Point.prototype._projDbl=function e(){var t=this.x.redAdd(this.y).redSqr();var r=this.x.redSqr();var n=this.y.redSqr();var i;var s;var a;if(this.curve.twisted){var o=this.curve._mulA(r);var f=o.redAdd(n);if(this.zOne){i=t.redSub(r).redSub(n).redMul(f.redSub(this.curve.two));s=f.redMul(o.redSub(n));a=f.redSqr().redSub(f).redSub(f)}else{var c=this.z.redSqr();var u=f.redSub(c).redISub(c);i=t.redSub(r).redISub(n).redMul(u);s=f.redMul(o.redSub(n));a=f.redMul(u)}}else{var o=r.redAdd(n);var c=this.curve._mulC(this.z).redSqr();var u=o.redSub(c).redSub(c);i=this.curve._mulC(t.redISub(o)).redMul(u);s=this.curve._mulC(o).redMul(r.redISub(n));a=o.redMul(u)}return this.curve.point(i,s,a)};Point.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};Point.prototype._extAdd=function e(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x));var n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x));var i=this.t.redMul(this.curve.dd).redMul(t.t);var s=this.z.redMul(t.z.redAdd(t.z));var a=n.redSub(r);var o=s.redSub(i);var f=s.redAdd(i);var c=n.redAdd(r);var u=a.redMul(o);var l=f.redMul(c);var h=a.redMul(c);var d=o.redMul(f);return this.curve.point(u,l,d,h)};Point.prototype._projAdd=function e(t){var r=this.z.redMul(t.z);var n=r.redSqr();var i=this.x.redMul(t.x);var s=this.y.redMul(t.y);var a=this.curve.d.redMul(i).redMul(s);var o=n.redSub(a);var f=n.redAdd(a);var c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(i).redISub(s);var u=r.redMul(o).redMul(c);var l;var h;if(this.curve.twisted){l=r.redMul(f).redMul(s.redSub(this.curve._mulA(i)));h=o.redMul(f)}else{l=r.redMul(f).redMul(s.redSub(i));h=this.curve._mulC(o).redMul(f)}return this.curve.point(u,l,h)};Point.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.curve.extended)return this._extAdd(t);else return this._projAdd(t)};Point.prototype.mul=function e(t){if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else return this.curve._wnafMul(this,t)};Point.prototype.mulAdd=function e(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,false)};Point.prototype.jmulAdd=function e(t,r,n){return this.curve._wnafMulAdd(1,[this,r],[t,n],2,true)};Point.prototype.normalize=function e(){if(this.zOne)return this;var t=this.z.redInvm();this.x=this.x.redMul(t);this.y=this.y.redMul(t);if(this.t)this.t=this.t.redMul(t);this.z=this.curve.one;this.zOne=true;return this};Point.prototype.neg=function e(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function e(){this.normalize();return this.x.fromRed()};Point.prototype.getY=function e(){this.normalize();return this.y.fromRed()};Point.prototype.eq=function e(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};Point.prototype.eqXToP=function e(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return true;var n=t.clone();var i=this.curve.redN.redMul(this.z);for(;;){n.iadd(this.curve.n);if(n.cmp(this.curve.p)>=0)return false;r.redIAdd(i);if(this.x.cmp(r)===0)return true}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;var curve_1=createCommonjsModule$2((function(e,t){var r=t;r.base=base$4;r.short=short_1;r.mont=mont;r.edwards=edwards}));var secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};var curves_1=createCommonjsModule$2((function(e,t){var r=t;var n=utils_1.assert;function i(e){if(e.type==="short")this.curve=new curve_1.short(e);else if(e.type==="edwards")this.curve=new curve_1.edwards(e);else if(e.type==="mont")this.curve=new curve_1.mont(e);else throw new Error("Unknown curve type.");this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;n(this.g.validate(),"Invalid curve");n(this.g.mul(this.n).isInfinity(),"Invalid curve, n*G != O")}r.PresetCurve=i;function s(e,t){Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function(){var n=new i(t);Object.defineProperty(r,e,{configurable:true,enumerable:true,value:n});return n}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1$2.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1$2.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1$2.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1$2.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1$2.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:hash_1$2.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:hash_1$2.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});s("brainpoolP256r1",{type:"short",prime:null,p:"A9FB57DB A1EEA9BC 3E660A90 9D838D72 6E3BF623 D5262028 2013481D 1F6E5377",a:"7D5A0975 FC2C3057 EEF67530 417AFFE7 FB8055C1 26DC5C6C E94A4B44 F330B5D9",b:"26DC5C6C E94A4B44 F330B5D9 BBD77CBF 95841629 5CF7E1CE 6BCCDC18 FF8C07B6",n:"A9FB57DB A1EEA9BC 3E660A90 9D838D71 8C397AA3 B561A6F7 901E0E82 974856A7",hash:hash_1$2.sha256,gRed:false,g:["8BD2AEB9CB7E57CB2C4B482FFC81B7AFB9DE27E1E3BD23C23A4453BD9ACE3262","547EF835C3DAC4FD97F8461A14611DC9C27745132DED8E545C1D54C72F046997"]});s("brainpoolP384r1",{type:"short",prime:null,p:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B4 12B1DA19 7FB71123"+"ACD3A729 901D1A71 87470013 3107EC53",a:"7BC382C6 3D8C150C 3C72080A CE05AFA0 C2BEA28E 4FB22787 139165EF BA91F90F"+"8AA5814A 503AD4EB 04A8C7DD 22CE2826",b:"04A8C7DD 22CE2826 8B39B554 16F0447C 2FB77DE1 07DCD2A6 2E880EA5 3EEB62D5"+"7CB43902 95DBC994 3AB78696 FA504C11",n:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B3 1F166E6C AC0425A7"+"CF3AB6AF 6B7FC310 3B883202 E9046565",hash:hash_1$2.sha384,gRed:false,g:["1D1C64F068CF45FFA2A63A81B7C13F6B8847A3E77EF14FE3DB7FCAFE0CBD10"+"E8E826E03436D646AAEF87B2E247D4AF1E","8ABE1D7520F9C2A45CB1EB8E95CFD55262B70B29FEEC5864E19C054FF99129"+"280E4646217791811142820341263C5315"]});s("brainpoolP512r1",{type:"short",prime:null,p:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330871"+"7D4D9B00 9BC66842 AECDA12A E6A380E6 2881FF2F 2D82C685 28AA6056 583A48F3",a:"7830A331 8B603B89 E2327145 AC234CC5 94CBDD8D 3DF91610 A83441CA EA9863BC"+"2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7 2BF2C7B9 E7C1AC4D 77FC94CA",b:"3DF91610 A83441CA EA9863BC 2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7"+"2BF2C7B9 E7C1AC4D 77FC94CA DC083E67 984050B7 5EBAE5DD 2809BD63 8016F723",n:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330870"+"553E5C41 4CA92619 41866119 7FAC1047 1DB1D381 085DDADD B5879682 9CA90069",hash:hash_1$2.sha512,gRed:false,g:["81AEE4BDD82ED9645A21322E9C4C6A9385ED9F70B5D916C1B43B62EEF4D009"+"8EFF3B1F78E2D0D48D50D1687B93B97D5F7C6D5047406A5E688B352209BCB9F822","7DDE385D566332ECC0EABFA9CF7822FDF209F70024A57B1AA000C55B881F81"+"11B2DCDE494A5F485E5BCA4BD88A2763AED1CA2B2FA8F0540678CD1E0F3AD80892"]});var a;try{a=secp256k1}catch(e){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1$2.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function HmacDRBG(e){if(!(this instanceof HmacDRBG))return new HmacDRBG(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils_1$1.toArray(e.entropy,e.entropyEnc||"hex");var r=utils_1$1.toArray(e.nonce,e.nonceEnc||"hex");var n=utils_1$1.toArray(e.pers,e.persEnc||"hex");minimalisticAssert$1(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,n)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function e(t,r,n){var i=t.concat(r).concat(n);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(i);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function e(){return new hash_1$2.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG.prototype.reseed=function e(t,r,n,i){if(typeof r!=="string"){i=n;n=r;r=null}t=utils_1$1.toArray(t,r);n=utils_1$1.toArray(n,i);minimalisticAssert$1(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(n||[]));this._reseed=1};HmacDRBG.prototype.generate=function e(t,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){i=n;n=r;r=null}if(n){n=utils_1$1.toArray(n,i||"hex");this._update(n)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(n);this._reseed++;return utils_1$1.encode(a,r)};var assert$5=utils_1.assert;function KeyPair$1(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$1=KeyPair$1;KeyPair$1.fromPublic=function e(t,r,n){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{pub:r,pubEnc:n})};KeyPair$1.fromPrivate=function e(t,r,n){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{priv:r,privEnc:n})};KeyPair$1.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$1.prototype.getPublic=function e(t,r){if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!t)return this.pub;return this.pub.encode(t,r)};KeyPair$1.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$1.prototype._importPrivate=function e(t,r){this.priv=new bn(t,r||16);if(this.ec.curve.type==="mont"){var n=this.ec.curve.one;var i=n.ushln(255-3).sub(n).ushln(3);this.priv=this.priv.or(n.ushln(255-1));this.priv=this.priv.and(i)}else this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$1.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$5(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$5(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$1.prototype.derive=function e(t){return t.mul(this.priv).getX()};KeyPair$1.prototype.sign=function e(t,r,n){return this.ec.sign(t,this,r,n)};KeyPair$1.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$1.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1.assert;function Signature$1(e,t){if(e instanceof Signature$1)return e;if(this._importDER(e,t))return;assert$4(e.r&&e.s,"Signature without r or s");this.r=new bn(e.r,16);this.s=new bn(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$1=Signature$1;function Position(){this.place=0}function getLength(e,t){var r=e[t.place++];if(!(r&128)){return r}var n=r&15;var i=0;for(var s=0,a=t.place;s<n;s++,a++){i<<=8;i|=e[a]}t.place=a;return i}function rmPadding(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$1.prototype._importDER=function e(t,r){t=utils_1.toArray(t,r);var n=new Position;if(t[n.place++]!==48){return false}var i=getLength(t,n);if(i+n.place!==t.length){return false}if(t[n.place++]!==2){return false}var s=getLength(t,n);var a=t.slice(n.place,s+n.place);n.place+=s;if(t[n.place++]!==2){return false}var o=getLength(t,n);if(t.length!==o+n.place){return false}var f=t.slice(n.place,o+n.place);if(a[0]===0&&a[1]&128){a=a.slice(1)}if(f[0]===0&&f[1]&128){f=f.slice(1)}this.r=new bn(a);this.s=new bn(f);this.recoveryParam=null;return true};function constructLength(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$1.prototype.toDER=function e(t){var r=this.r.toArray();var n=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(n[0]&128)n=[0].concat(n);r=rmPadding(r);n=rmPadding(n);while(!n[0]&&!(n[1]&128)){n=n.slice(1)}var i=[2];constructLength(i,r.length);i=i.concat(r);i.push(2);constructLength(i,n.length);var s=i.concat(n);var a=[48];constructLength(a,s.length);a=a.concat(s);return utils_1.encode(a,t)};var assert$3=utils_1.assert;function EC(e){if(!(this instanceof EC))return new EC(e);if(typeof e==="string"){assert$3(curves_1.hasOwnProperty(e),"Unknown curve "+e);e=curves_1[e]}if(e instanceof curves_1.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec=EC;EC.prototype.keyPair=function e(t){return new key$1(this,t)};EC.prototype.keyFromPrivate=function e(t,r){return key$1.fromPrivate(this,t,r)};EC.prototype.keyFromPublic=function e(t,r){return key$1.fromPublic(this,t,r)};EC.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||brorand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});if(this.curve.type==="mont"){var n=new bn(r.generate(32));return this.keyFromPrivate(n)}var i=this.n.byteLength();var s=this.n.sub(new bn(2));do{var n=new bn(r.generate(i));if(n.cmp(s)>0)continue;n.iaddn(1);return this.keyFromPrivate(n)}while(true)};EC.prototype._truncateToN=function e(t,r){var n=t.byteLength()*8-this.n.bitLength();if(n>0)t=t.ushrn(n);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC.prototype.sign=function e(t,r,n,i){if(typeof n==="object"){i=n;n=null}if(!i)i={};r=this.keyFromPrivate(r,n);t=this._truncateToN(new bn(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new hmacDrbg({hash:this.hash,entropy:a,nonce:o,pers:i.pers,persEnc:i.persEnc||"utf8"});var c=this.n.sub(new bn(1));for(var u=0;true;u++){var l=i.k?i.k(u):new bn(f.generate(this.n.byteLength()));l=this._truncateToN(l,true);if(l.cmpn(1)<=0||l.cmp(c)>=0)continue;var h=this.g.mul(l);if(h.isInfinity())continue;var d=h.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var y=l.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));y=y.umod(this.n);if(y.cmpn(0)===0)continue;var m=(h.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(i.canonical&&y.cmp(this.nh)>0){y=this.n.sub(y);m^=1}return new signature$1({r:p,s:y,recoveryParam:m})}};EC.prototype.verify=function e(t,r,n,i){t=this._truncateToN(new bn(t,16));n=this.keyFromPublic(n,i);r=new signature$1(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);if(!this.curve._maxwellTrick){var u=this.g.mulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}var u=this.g.jmulAdd(f,n.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC.prototype.recoverPubKey=function(e,t,r,n){assert$3((3&r)===r,"The recovery param is more than two bits");t=new signature$1(t,n);var i=this.n;var s=new bn(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(i);var l=i.sub(s).mul(u).umod(i);var h=o.mul(u).umod(i);return this.g.mulAdd(l,a,h)};EC.prototype.getKeyRecoveryParam=function(e,t,r,n){t=new signature$1(t,n);if(t.recoveryParam!==null)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var assert$2=utils_1.assert;var parseBytes$2=utils_1.parseBytes;var cachedProperty$1=utils_1.cachedProperty;function KeyPair(e,t){this.eddsa=e;if(t.hasOwnProperty("secret"))this._secret=parseBytes$2(t.secret);if(e.isPoint(t.pub))this._pub=t.pub;else{this._pubBytes=parseBytes$2(t.pub);if(this._pubBytes&&this._pubBytes.length===33&&this._pubBytes[0]===64){this._pubBytes=this._pubBytes.slice(1,33)}if(this._pubBytes&&this._pubBytes.length!==32)throw new Error("Unknown point compression format")}}KeyPair.fromPublic=function e(t,r){if(r instanceof KeyPair)return r;return new KeyPair(t,{pub:r})};KeyPair.fromSecret=function e(t,r){if(r instanceof KeyPair)return r;return new KeyPair(t,{secret:r})};KeyPair.prototype.secret=function e(){return this._secret};cachedProperty$1(KeyPair,"pubBytes",(function e(){return this.eddsa.encodePoint(this.pub())}));cachedProperty$1(KeyPair,"pub",(function e(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}));cachedProperty$1(KeyPair,"privBytes",(function e(){var t=this.eddsa;var r=this.hash();var n=t.encodingLength-1;var i=r.slice(0,t.encodingLength);i[0]&=248;i[n]&=127;i[n]|=64;return i}));cachedProperty$1(KeyPair,"priv",(function e(){return this.eddsa.decodeInt(this.privBytes())}));cachedProperty$1(KeyPair,"hash",(function e(){return this.eddsa.hash().update(this.secret()).digest()}));cachedProperty$1(KeyPair,"messagePrefix",(function e(){return this.hash().slice(this.eddsa.encodingLength)}));KeyPair.prototype.sign=function e(t){assert$2(this._secret,"KeyPair can only verify");return this.eddsa.sign(t,this)};KeyPair.prototype.verify=function e(t,r){return this.eddsa.verify(t,r,this)};KeyPair.prototype.getSecret=function e(t){assert$2(this._secret,"KeyPair is public only");return utils_1.encode(this.secret(),t)};KeyPair.prototype.getPublic=function e(t,r){return utils_1.encode((r?[64]:[]).concat(this.pubBytes()),t)};var key=KeyPair;var assert$1=utils_1.assert;var cachedProperty=utils_1.cachedProperty;var parseBytes$1=utils_1.parseBytes;function Signature(e,t){this.eddsa=e;if(typeof t!=="object")t=parseBytes$1(t);if(Array.isArray(t)){t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}}assert$1(t.R&&t.S,"Signature without R or S");if(e.isPoint(t.R))this._R=t.R;if(t.S instanceof bn)this._S=t.S;this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded;this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty(Signature,"S",(function e(){return this.eddsa.decodeInt(this.Sencoded())}));cachedProperty(Signature,"R",(function e(){return this.eddsa.decodePoint(this.Rencoded())}));cachedProperty(Signature,"Rencoded",(function e(){return this.eddsa.encodePoint(this.R())}));cachedProperty(Signature,"Sencoded",(function e(){return this.eddsa.encodeInt(this.S())}));Signature.prototype.toBytes=function e(){return this.Rencoded().concat(this.Sencoded())};Signature.prototype.toHex=function e(){return utils_1.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature;var assert=utils_1.assert;var parseBytes=utils_1.parseBytes;function EDDSA(e){assert(e==="ed25519","only tested with ed25519 so far");if(!(this instanceof EDDSA))return new EDDSA(e);var e=curves_1[e].curve;this.curve=e;this.g=e.g;this.g.precompute(e.n.bitLength()+1);this.pointClass=e.point().constructor;this.encodingLength=Math.ceil(e.n.bitLength()/8);this.hash=hash_1$2.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function e(t,r){t=parseBytes(t);var n=this.keyFromSecret(r);var i=this.hashInt(n.messagePrefix(),t);var s=this.g.mul(i);var a=this.encodePoint(s);var o=this.hashInt(a,n.pubBytes(),t).mul(n.priv());var f=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};EDDSA.prototype.verify=function e(t,r,n){t=parseBytes(t);r=this.makeSignature(r);var i=this.keyFromPublic(n);var s=this.hashInt(r.Rencoded(),i.pubBytes(),t);var a=this.g.mul(r.S());var o=r.R().add(i.pub().mul(s));return o.eq(a)};EDDSA.prototype.hashInt=function e(){var t=this.hash();for(var r=0;r<arguments.length;r++)t.update(arguments[r]);return utils_1.intFromLE(t.digest()).umod(this.curve.n)};EDDSA.prototype.keyPair=function e(t){return new key(this,t)};EDDSA.prototype.keyFromPublic=function e(t){return key.fromPublic(this,t)};EDDSA.prototype.keyFromSecret=function e(t){return key.fromSecret(this,t)};EDDSA.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||elliptic_1.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.curve.n.toArray()});return this.keyFromSecret(r.generate(this.hash.outSize>>3))};EDDSA.prototype.makeSignature=function e(t){if(t instanceof signature)return t;return new signature(this,t)};EDDSA.prototype.encodePoint=function e(t){var r=t.getY().toArray("le",this.encodingLength);r[this.encodingLength-1]|=t.getX().isOdd()?128:0;return r};EDDSA.prototype.decodePoint=function e(t){t=utils_1.parseBytes(t);var r=t.length-1;var n=t.slice(0,r).concat(t[r]&~128);var i=(t[r]&128)!==0;var s=utils_1.intFromLE(n);return this.curve.pointFromY(s,i)};EDDSA.prototype.encodeInt=function e(t){return t.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function e(t){return utils_1.intFromLE(t)};EDDSA.prototype.isPoint=function e(t){return t instanceof this.pointClass};var elliptic_1=createCommonjsModule$2((function(e,t){var r=t;r.utils=utils_1;r.rand=brorand;r.curve=curve_1;r.curves=curves_1;r.ec=ec;r.eddsa=eddsa}));var int_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){var r=e>>>16&65535,n=e&65535;var i=t>>>16&65535,s=t&65535;return n*s+(r*s+n*i<<16>>>0)|0}t.mul=Math.imul||r;function n(e,t){return e+t|0}t.add=n;function i(e,t){return e-t|0}t.sub=i;function s(e,t){return e<<t|e>>>32-t}t.rotl=s;function a(e,t){return e<<32-t|e>>>t}t.rotr=a;function o(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}t.isInteger=Number.isInteger||o;t.MAX_SAFE_INTEGER=9007199254740991;t.isSafeInteger=function(e){return t.isInteger(e)&&(e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER)}}));var binary=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])<<16>>16}t.readInt16BE=r;function n(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])>>>0}t.readUint16BE=n;function i(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])<<16>>16}t.readInt16LE=i;function s(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])>>>0}t.readUint16LE=s;function a(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>8;t[r+1]=e>>>0;return t}t.writeUint16BE=a;t.writeInt16BE=a;function o(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;return t}t.writeUint16LE=o;t.writeInt16LE=o;function f(e,t){if(t===void 0){t=0}return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}t.readInt32BE=f;function c(e,t){if(t===void 0){t=0}return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.readUint32BE=c;function u(e,t){if(t===void 0){t=0}return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}t.readInt32LE=u;function l(e,t){if(t===void 0){t=0}return(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}t.readUint32LE=l;function h(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>24;t[r+1]=e>>>16;t[r+2]=e>>>8;t[r+3]=e>>>0;return t}t.writeUint32BE=h;t.writeInt32BE=h;function d(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;t[r+2]=e>>>16;t[r+3]=e>>>24;return t}t.writeUint32LE=d;t.writeInt32LE=d;function p(e,t){if(t===void 0){t=0}var r=f(e,t);var n=f(e,t+4);return r*4294967296+n-(n>>31)*4294967296}t.readInt64BE=p;function y(e,t){if(t===void 0){t=0}var r=c(e,t);var n=c(e,t+4);return r*4294967296+n}t.readUint64BE=y;function m(e,t){if(t===void 0){t=0}var r=u(e,t);var n=u(e,t+4);return n*4294967296+r-(r>>31)*4294967296}t.readInt64LE=m;function g(e,t){if(t===void 0){t=0}var r=l(e,t);var n=l(e,t+4);return n*4294967296+r}t.readUint64LE=g;function b(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}h(e/4294967296>>>0,t,r);h(e>>>0,t,r+4);return t}t.writeUint64BE=b;t.writeInt64BE=b;function v(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}d(e>>>0,t,r);d(e/4294967296>>>0,t,r+4);return t}t.writeUint64LE=v;t.writeInt64LE=v;function w(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintBE: array is too short for the given bitLength")}var n=0;var i=1;for(var s=e/8+r-1;s>=r;s--){n+=t[s]*i;i*=256}return n}t.readUintBE=w;function A(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintLE: array is too short for the given bitLength")}var n=0;var i=1;for(var s=r;s<r+e/8;s++){n+=t[s]*i;i*=256}return n}t.readUintLE=A;function E(e,t,r,n){if(r===void 0){r=new Uint8Array(e/8)}if(n===void 0){n=0}if(e%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintBE value must be an integer")}var i=1;for(var s=e/8+n-1;s>=n;s--){r[s]=t/i&255;i*=256}return r}t.writeUintBE=E;function _(e,t,r,n){if(r===void 0){r=new Uint8Array(e/8)}if(n===void 0){n=0}if(e%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintLE value must be an integer")}var i=1;for(var s=n;s<n+e/8;s++){r[s]=t/i&255;i*=256}return r}t.writeUintLE=_;function S(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}t.readFloat32BE=S;function $(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,true)}t.readFloat32LE=$;function T(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}t.readFloat64BE=T;function C(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,true)}t.readFloat64LE=C;function P(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat32(r,e);return t}t.writeFloat32BE=P;function x(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat32(r,e,true);return t}t.writeFloat32LE=x;function I(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat64(r,e);return t}t.writeFloat64BE=I;function k(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setFloat64(r,e,true);return t}t.writeFloat64LE=k}));var wipe_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){for(var t=0;t<e.length;t++){e[t]=0}return e}t.wipe=r}));var sha3=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:true});var n=function(){function e(e){if(e===void 0){e=32}this.capacity=e;this._sh=new Int32Array(25);this._sl=new Int32Array(25);this._state=new Uint8Array(200);this._pos=0;this._finished=false;this.clean=this.reset;if(e<=0||e>128){throw new Error("SHA3: incorrect capacity")}this.blockSize=200-e}e.prototype.reset=function(){wipe_1.wipe(this._sh);wipe_1.wipe(this._sl);wipe_1.wipe(this._state);this._pos=0;this._finished=false;return this};e.prototype.update=function(e){if(this._finished){throw new Error("SHA3: can't update because hash was finished")}for(var t=0;t<e.length;t++){this._state[this._pos++]^=e[t];if(this._pos>=this.blockSize){y(this._sh,this._sl,this._state);this._pos=0}}return this};e.prototype._padAndPermute=function(e){this._state[this._pos]^=e;this._state[this.blockSize-1]^=128;y(this._sh,this._sl,this._state);this._finished=true;this._pos=0};e.prototype._squeeze=function(e){if(!this._finished){throw new Error("SHA3: squeezing before padAndPermute")}for(var t=0;t<e.length;t++){if(this._pos===this.blockSize){y(this._sh,this._sl,this._state);this._pos=0}e[t]=this._state[this._pos++]}};return e}();t.Keccak=n;var i=function(e){r(t,e);function t(t){if(t===void 0){t=32}var r=e.call(this,t*2)||this;r.digestLength=t;return r}t.prototype.finish=function(e){if(!this._finished){this._padAndPermute(6)}else{this._pos=0}this._squeeze(e);return this};t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);this.finish(e);return e};t.prototype.saveState=function(){if(this._finished){throw new Error("SHA3: cannot save finished state")}return new Uint8Array(this._state.subarray(0,this._pos))};t.prototype.restoreState=function(e){this._state.set(e);this._pos=e.length;this._finished=false;return this};t.prototype.cleanSavedState=function(e){wipe_1.wipe(e)};return t}(n);t.SHA3=i;var s=function(e){r(t,e);function t(){return e.call(this,224/8)||this}return t}(i);t.SHA3224=s;var a=function(e){r(t,e);function t(){return e.call(this,256/8)||this}return t}(i);t.SHA3256=a;var o=function(e){r(t,e);function t(){return e.call(this,384/8)||this}return t}(i);t.SHA3384=o;var f=function(e){r(t,e);function t(){return e.call(this,512/8)||this}return t}(i);t.SHA3512=f;function c(e,t){var r=new i(e);r.update(t);var n=r.digest();r.clean();return n}t.hash=c;t.hash224=function(e){return c(224/8,e)};t.hash256=function(e){return c(256/8,e)};t.hash384=function(e){return c(384/8,e)};t.hash512=function(e){return c(512/8,e)};var u=function(e){r(t,e);function t(t){var r=e.call(this,t/8*2)||this;r.bitSize=t;return r}t.prototype.stream=function(e){if(!this._finished){this._padAndPermute(31)}this._squeeze(e)};return t}(n);t.SHAKE=u;var l=function(e){r(t,e);function t(){return e.call(this,128)||this}return t}(u);t.SHAKE128=l;var h=function(e){r(t,e);function t(){return e.call(this,256)||this}return t}(u);t.SHAKE256=h;var d=new Int32Array([0,0,2147483648,2147483648,0,0,2147483648,2147483648,0,0,0,0,0,2147483648,2147483648,2147483648,2147483648,2147483648,0,2147483648,2147483648,2147483648,0,2147483648]);var p=new Int32Array([1,32898,32906,2147516416,32907,2147483649,2147516545,32777,138,136,2147516425,2147483658,2147516555,139,32905,32771,32770,128,32778,2147483658,2147516545,32896,2147483649,2147516424]);function y(e,t,r){var n,i,s,a,o;var f,c,u,l,h;var y,m;for(var g=0;g<25;g++){t[g]=binary.readUint32LE(r,g*8);e[g]=binary.readUint32LE(r,g*8+4)}for(var b=0;b<24;b++){n=e[0]^e[5]^e[10]^e[15]^e[20];i=e[1]^e[6]^e[11]^e[16]^e[21];s=e[2]^e[7]^e[12]^e[17]^e[22];a=e[3]^e[8]^e[13]^e[18]^e[23];o=e[4]^e[9]^e[14]^e[19]^e[24];f=t[0]^t[5]^t[10]^t[15]^t[20];c=t[1]^t[6]^t[11]^t[16]^t[21];u=t[2]^t[7]^t[12]^t[17]^t[22];l=t[3]^t[8]^t[13]^t[18]^t[23];h=t[4]^t[9]^t[14]^t[19]^t[24];y=o^(i<<1|c>>>32-1);m=h^(c<<1|i>>>32-1);e[0]^=y;e[5]^=y;e[10]^=y;e[15]^=y;e[20]^=y;t[0]^=m;t[5]^=m;t[10]^=m;t[15]^=m;t[20]^=m;y=n^(s<<1|u>>>32-1);m=f^(u<<1|s>>>32-1);e[1]^=y;e[6]^=y;e[11]^=y;e[16]^=y;e[21]^=y;t[1]^=m;t[6]^=m;t[11]^=m;t[16]^=m;t[21]^=m;y=i^(a<<1|l>>>32-1);m=c^(l<<1|a>>>32-1);e[2]^=y;e[7]^=y;e[12]^=y;e[17]^=y;e[22]^=y;t[2]^=m;t[7]^=m;t[12]^=m;t[17]^=m;t[22]^=m;y=s^(o<<1|h>>>32-1);m=u^(h<<1|o>>>32-1);e[3]^=y;t[3]^=m;e[8]^=y;t[8]^=m;e[13]^=y;t[13]^=m;e[18]^=y;t[18]^=m;e[23]^=y;t[23]^=m;y=a^(n<<1|f>>>32-1);m=l^(f<<1|n>>>32-1);e[4]^=y;e[9]^=y;e[14]^=y;e[19]^=y;e[24]^=y;t[4]^=m;t[9]^=m;t[14]^=m;t[19]^=m;t[24]^=m;y=e[1];m=t[1];n=e[10];f=t[10];e[10]=y<<1|m>>>32-1;t[10]=m<<1|y>>>32-1;y=n;m=f;n=e[7];f=t[7];e[7]=y<<3|m>>>32-3;t[7]=m<<3|y>>>32-3;y=n;m=f;n=e[11];f=t[11];e[11]=y<<6|m>>>32-6;t[11]=m<<6|y>>>32-6;y=n;m=f;n=e[17];f=t[17];e[17]=y<<10|m>>>32-10;t[17]=m<<10|y>>>32-10;y=n;m=f;n=e[18];f=t[18];e[18]=y<<15|m>>>32-15;t[18]=m<<15|y>>>32-15;y=n;m=f;n=e[3];f=t[3];e[3]=y<<21|m>>>32-21;t[3]=m<<21|y>>>32-21;y=n;m=f;n=e[5];f=t[5];e[5]=y<<28|m>>>32-28;t[5]=m<<28|y>>>32-28;y=n;m=f;n=e[16];f=t[16];e[16]=m<<4|y>>>32-4;t[16]=y<<4|m>>>32-4;y=n;m=f;n=e[8];f=t[8];e[8]=m<<13|y>>>32-13;t[8]=y<<13|m>>>32-13;y=n;m=f;n=e[21];f=t[21];e[21]=m<<23|y>>>32-23;t[21]=y<<23|m>>>32-23;y=n;m=f;n=e[24];f=t[24];e[24]=y<<2|m>>>32-2;t[24]=m<<2|y>>>32-2;y=n;m=f;n=e[4];f=t[4];e[4]=y<<14|m>>>32-14;t[4]=m<<14|y>>>32-14;y=n;m=f;n=e[15];f=t[15];e[15]=y<<27|m>>>32-27;t[15]=m<<27|y>>>32-27;y=n;m=f;n=e[23];f=t[23];e[23]=m<<9|y>>>32-9;t[23]=y<<9|m>>>32-9;y=n;m=f;n=e[19];f=t[19];e[19]=m<<24|y>>>32-24;t[19]=y<<24|m>>>32-24;y=n;m=f;n=e[13];f=t[13];e[13]=y<<8|m>>>32-8;t[13]=m<<8|y>>>32-8;y=n;m=f;n=e[12];f=t[12];e[12]=y<<25|m>>>32-25;t[12]=m<<25|y>>>32-25;y=n;m=f;n=e[2];f=t[2];e[2]=m<<11|y>>>32-11;t[2]=y<<11|m>>>32-11;y=n;m=f;n=e[20];f=t[20];e[20]=m<<30|y>>>32-30;t[20]=y<<30|m>>>32-30;y=n;m=f;n=e[14];f=t[14];e[14]=y<<18|m>>>32-18;t[14]=m<<18|y>>>32-18;y=n;m=f;n=e[22];f=t[22];e[22]=m<<7|y>>>32-7;t[22]=y<<7|m>>>32-7;y=n;m=f;n=e[9];f=t[9];e[9]=m<<29|y>>>32-29;t[9]=y<<29|m>>>32-29;y=n;m=f;n=e[6];f=t[6];e[6]=y<<20|m>>>32-20;t[6]=m<<20|y>>>32-20;y=n;m=f;n=e[1];f=t[1];e[1]=m<<12|y>>>32-12;t[1]=y<<12|m>>>32-12;y=n;m=f;n=e[0];i=e[1];s=e[2];a=e[3];o=e[4];e[0]^=~i&s;e[1]^=~s&a;e[2]^=~a&o;e[3]^=~o&n;e[4]^=~n&i;f=t[0];c=t[1];u=t[2];l=t[3];h=t[4];t[0]^=~c&u;t[1]^=~u&l;t[2]^=~l&h;t[3]^=~h&f;t[4]^=~f&c;n=e[5];i=e[6];s=e[7];a=e[8];o=e[9];e[5]^=~i&s;e[6]^=~s&a;e[7]^=~a&o;e[8]^=~o&n;e[9]^=~n&i;f=t[5];c=t[6];u=t[7];l=t[8];h=t[9];t[5]^=~c&u;t[6]^=~u&l;t[7]^=~l&h;t[8]^=~h&f;t[9]^=~f&c;n=e[10];i=e[11];s=e[12];a=e[13];o=e[14];e[10]^=~i&s;e[11]^=~s&a;e[12]^=~a&o;e[13]^=~o&n;e[14]^=~n&i;f=t[10];c=t[11];u=t[12];l=t[13];h=t[14];t[10]^=~c&u;t[11]^=~u&l;t[12]^=~l&h;t[13]^=~h&f;t[14]^=~f&c;n=e[15];i=e[16];s=e[17];a=e[18];o=e[19];e[15]^=~i&s;e[16]^=~s&a;e[17]^=~a&o;e[18]^=~o&n;e[19]^=~n&i;f=t[15];c=t[16];u=t[17];l=t[18];h=t[19];t[15]^=~c&u;t[16]^=~u&l;t[17]^=~l&h;t[18]^=~h&f;t[19]^=~f&c;n=e[20];i=e[21];s=e[22];a=e[23];o=e[24];e[20]^=~i&s;e[21]^=~s&a;e[22]^=~a&o;e[23]^=~o&n;e[24]^=~n&i;f=t[20];c=t[21];u=t[22];l=t[23];h=t[24];t[20]^=~c&u;t[21]^=~u&l;t[22]^=~l&h;t[23]^=~h&f;t[24]^=~f&c;e[0]^=d[b];t[0]^=p[b]}for(var g=0;g<25;g++){binary.writeUint32LE(t[g],r,g*8);binary.writeUint32LE(e[g],r,g*8+4)}}}));var readUInt32BE=function e(t,r){var n=t[0+r]<<24|t[1+r]<<16|t[2+r]<<8|t[3+r];return n>>>0};var writeUInt32BE=function e(t,r,n){t[0+n]=r>>>24;t[1+n]=r>>>16&255;t[2+n]=r>>>8&255;t[3+n]=r&255};var ip=function e(t,r,n,i){var s=0;var a=0;for(var o=6;o>=0;o-=2){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>>f+o&1}}for(var o=6;o>=0;o-=2){for(var f=1;f<=25;f+=8){a<<=1;a|=r>>>f+o&1}for(var f=1;f<=25;f+=8){a<<=1;a|=t>>>f+o&1}}n[i+0]=s>>>0;n[i+1]=a>>>0};var rip=function e(t,r,n,i){var s=0;var a=0;for(var o=0;o<4;o++){for(var f=24;f>=0;f-=8){s<<=1;s|=r>>>f+o&1;s<<=1;s|=t>>>f+o&1}}for(var o=4;o<8;o++){for(var f=24;f>=0;f-=8){a<<=1;a|=r>>>f+o&1;a<<=1;a|=t>>>f+o&1}}n[i+0]=s>>>0;n[i+1]=a>>>0};var pc1=function e(t,r,n,i){var s=0;var a=0;for(var o=7;o>=5;o--){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>f+o&1}}for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var o=1;o<=3;o++){for(var f=0;f<=24;f+=8){a<<=1;a|=r>>f+o&1}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}n[i+0]=s>>>0;n[i+1]=a>>>0};var r28shl=function e(t,r){return t<<r&268435455|t>>>28-r};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];var pc2=function e(t,r,n,i){var s=0;var a=0;var o=pc2table.length>>>1;for(var f=0;f<o;f++){s<<=1;s|=t>>>pc2table[f]&1}for(var f=o;f<pc2table.length;f++){a<<=1;a|=r>>>pc2table[f]&1}n[i+0]=s>>>0;n[i+1]=a>>>0};var expand=function e(t,r,n){var i=0;var s=0;i=(t&1)<<5|t>>>27;for(var a=23;a>=15;a-=4){i<<=6;i|=t>>>a&63}for(var a=11;a>=3;a-=4){s|=t>>>a&63;s<<=6}s|=(t&31)<<1|t>>>31;r[n+0]=i>>>0;r[n+1]=s>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];var substitute=function e(t,r){var n=0;for(var i=0;i<4;i++){var s=t>>>18-i*6&63;var a=sTable[i*64+s];n<<=4;n|=a}for(var i=0;i<4;i++){var s=r>>>18-i*6&63;var a=sTable[4*64+i*64+s];n<<=4;n|=a}return n>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];var permute=function e(t){var r=0;for(var n=0;n<permuteTable.length;n++){r<<=1;r|=t>>>permuteTable[n]&1}return r>>>0};var padSplit=function e(t,r,n){var i=t.toString(2);while(i.length<r)i="0"+i;var s=[];for(var a=0;a<r;a+=n)s.push(i.slice(a,a+n));return s.join(" ")};var utils$5={readUInt32BE,writeUInt32BE,ip,rip,pc1,r28shl,pc2,expand,substitute,permute,padSplit};function Cipher$1(e){this.options=e;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0}var cipher=Cipher$1;Cipher$1.prototype._init=function e(){};Cipher$1.prototype.update=function e(t){if(t.length===0)return[];if(this.type==="decrypt")return this._updateDecrypt(t);else return this._updateEncrypt(t)};Cipher$1.prototype._buffer=function e(t,r){var n=Math.min(this.buffer.length-this.bufferOff,t.length-r);for(var i=0;i<n;i++)this.buffer[this.bufferOff+i]=t[r+i];this.bufferOff+=n;return n};Cipher$1.prototype._flushBuffer=function e(t,r){this._update(this.buffer,0,t,r);this.bufferOff=0;return this.blockSize};Cipher$1.prototype._updateEncrypt=function e(t){var r=0;var n=0;var i=(this.bufferOff+t.length)/this.blockSize|0;var s=new Array(i*this.blockSize);if(this.bufferOff!==0){r+=this._buffer(t,r);if(this.bufferOff===this.buffer.length)n+=this._flushBuffer(s,n)}var a=t.length-(t.length-r)%this.blockSize;for(;r<a;r+=this.blockSize){this._update(t,r,s,n);n+=this.blockSize}for(;r<t.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=t[r];return s};Cipher$1.prototype._updateDecrypt=function e(t){var r=0;var n=0;var i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1;var s=new Array(i*this.blockSize);for(;i>0;i--){r+=this._buffer(t,r);n+=this._flushBuffer(s,n)}r+=this._buffer(t,r);return s};Cipher$1.prototype.final=function e(t){var r;if(t)r=this.update(t);var n;if(this.type==="encrypt")n=this._finalEncrypt();else n=this._finalDecrypt();if(r)return r.concat(n);else return n};Cipher$1.prototype._pad=function e(t,r){if(r===0)return false;while(r<t.length)t[r++]=0;return true};Cipher$1.prototype._finalEncrypt=function e(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);this._update(this.buffer,0,t,0);return t};Cipher$1.prototype._unpad=function e(t){return t};Cipher$1.prototype._finalDecrypt=function e(){minimalisticAssert$1.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);this._flushBuffer(t,0);return this._unpad(t)};function DESState(){this.tmp=new Array(2);this.keys=null}function DES$1(e){cipher.call(this,e);var t=new DESState;this._desState=t;this.deriveKeys(t,e.key)}inherits_browser$1(DES$1,cipher);var des$1=DES$1;DES$1.create=function e(t){return new DES$1(t)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$1.prototype.deriveKeys=function e(t,r){t.keys=new Array(16*2);minimalisticAssert$1.equal(r.length,this.blockSize,"Invalid key length");var n=utils$5.readUInt32BE(r,0);var i=utils$5.readUInt32BE(r,4);utils$5.pc1(n,i,t.tmp,0);n=t.tmp[0];i=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=shiftTable[s>>>1];n=utils$5.r28shl(n,a);i=utils$5.r28shl(i,a);utils$5.pc2(n,i,t.keys,s)}};DES$1.prototype._update=function e(t,r,n,i){var s=this._desState;var a=utils$5.readUInt32BE(t,r);var o=utils$5.readUInt32BE(t,r+4);utils$5.ip(a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];if(this.type==="encrypt")this._encrypt(s,a,o,s.tmp,0);else this._decrypt(s,a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];utils$5.writeUInt32BE(n,a,i);utils$5.writeUInt32BE(n,o,i+4)};DES$1.prototype._pad=function e(t,r){var n=t.length-r;for(var i=r;i<t.length;i++)t[i]=n;return true};DES$1.prototype._unpad=function e(t){var r=t[t.length-1];for(var n=t.length-r;n<t.length;n++)minimalisticAssert$1.equal(t[n],r);return t.slice(0,t.length-r)};DES$1.prototype._encrypt=function e(t,r,n,i,s){var a=r;var o=n;for(var f=0;f<t.keys.length;f+=2){var c=t.keys[f];var u=t.keys[f+1];utils$5.expand(o,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var l=utils$5.substitute(c,u);var h=utils$5.permute(l);var d=o;o=(a^h)>>>0;a=d}utils$5.rip(o,a,i,s)};DES$1.prototype._decrypt=function e(t,r,n,i,s){var a=n;var o=r;for(var f=t.keys.length-2;f>=0;f-=2){var c=t.keys[f];var u=t.keys[f+1];utils$5.expand(a,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var l=utils$5.substitute(c,u);var h=utils$5.permute(l);var d=a;a=(o^h)>>>0;o=d}utils$5.rip(a,o,i,s)};var proto={};function CBCState(e){minimalisticAssert$1.equal(e.length,8,"Invalid IV length");this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function instantiate$2(e){function t(t){e.call(this,t);this._cbcInit()}inherits_browser$1(t,e);var r=Object.keys(proto);for(var n=0;n<r.length;n++){var i=r[n];t.prototype[i]=proto[i]}t.create=function e(r){return new t(r)};return t}var instantiate_1$1=instantiate$2;proto._cbcInit=function e(){var t=new CBCState(this.options.iv);this._cbcState=t};proto._update=function e(t,r,n,i){var s=this._cbcState;var a=this.constructor.super_.prototype;var o=s.iv;if(this.type==="encrypt"){for(var f=0;f<this.blockSize;f++)o[f]^=t[r+f];a._update.call(this,o,0,n,i);for(var f=0;f<this.blockSize;f++)o[f]=n[i+f]}else{a._update.call(this,t,r,n,i);for(var f=0;f<this.blockSize;f++)n[i+f]^=o[f];for(var f=0;f<this.blockSize;f++)o[f]=t[r+f]}};var cbc={instantiate:instantiate_1$1};function EDEState(e,t){minimalisticAssert$1.equal(t.length,24,"Invalid key length");var r=t.slice(0,8);var n=t.slice(8,16);var i=t.slice(16,24);if(e==="encrypt"){this.ciphers=[des$1.create({type:"encrypt",key:r}),des$1.create({type:"decrypt",key:n}),des$1.create({type:"encrypt",key:i})]}else{this.ciphers=[des$1.create({type:"decrypt",key:i}),des$1.create({type:"encrypt",key:n}),des$1.create({type:"decrypt",key:r})]}}function EDE$1(e){cipher.call(this,e);var t=new EDEState(this.type,this.options.key);this._edeState=t}inherits_browser$1(EDE$1,cipher);var ede=EDE$1;EDE$1.create=function e(t){return new EDE$1(t)};EDE$1.prototype._update=function e(t,r,n,i){var s=this._edeState;s.ciphers[0]._update(t,r,n,i);s.ciphers[1]._update(n,i,n,i);s.ciphers[2]._update(n,i,n,i)};EDE$1.prototype._pad=des$1.prototype._pad;EDE$1.prototype._unpad=des$1.prototype._unpad;var utils$4=utils$5;var Cipher=cipher;var DES=des$1;var CBC=cbc;var EDE=ede;var des={utils:utils$4,Cipher,DES,CBC,EDE};const core=getAugmentedNamespace(webcryptoCore_es);const tslib_1=getAugmentedNamespace(tslib_es6$1);const asn1Schema=getAugmentedNamespace(es2015);const jsonSchema=getAugmentedNamespace(index_es);const asmCrypto=getAugmentedNamespace(asmcrypto_all_es8);var build=createCommonjsModule$2((function(e,t){function r(e){var t=Object.create(null);if(e){Object.keys(e).forEach((function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:true,get:function(){return e[r]}})}}))}t.default=e;return Object.freeze(t)}var n=r(core);var i=r(asmCrypto);var s=r(elliptic_1);var a=r(des);let o={};if(typeof self!=="undefined"){o=self}t.nativeCrypto=o["msCrypto"]||o.crypto||{};t.nativeSubtle=null;try{t.nativeSubtle=(t.nativeCrypto===null||t.nativeCrypto===void 0?void 0:t.nativeCrypto.subtle)||(t.nativeCrypto===null||t.nativeCrypto===void 0?void 0:t.nativeCrypto["webkitSubtle"])||null}catch(e){console.warn("Cannot get subtle from crypto",e)}function f(e){t.nativeCrypto=e;t.nativeSubtle=e.subtle}class c{static get enabled(){return typeof self!=="undefined"&&self.PV_WEBCRYPTO_LINER_LOG}static log(...e){if(this.enabled){console.log.apply(console,e)}}static error(...e){if(this.enabled){console.error.apply(console,e)}}static info(...e){if(this.enabled){console.info.apply(console,e)}}static warn(...e){if(this.enabled){console.warn.apply(console,e)}}static trace(...e){if(this.enabled){console.trace.apply(console,e)}}}var u;(function(e){e["Unknown"]="Unknown";e["IE"]="Internet Explorer";e["Safari"]="Safari";e["Edge"]="Edge";e["Chrome"]="Chrome";e["Firefox"]="Firefox Mozilla";e["Mobile"]="Mobile"})(u||(u={}));function l(){const e={name:u.Unknown,version:"0"};if(typeof self==="undefined"){return e}const t=self.navigator.userAgent;let r;if(r=/edge\/([\d\.]+)/i.exec(t)){e.name=u.Edge;e.version=r[1]}else if(/msie/i.test(t)){e.name=u.IE;e.version=/msie ([\d\.]+)/i.exec(t)[1]}else if(/Trident/i.test(t)){e.name=u.IE;e.version=/rv:([\d\.]+)/i.exec(t)[1]}else if(/chrome/i.test(t)){e.name=u.Chrome;e.version=/chrome\/([\d\.]+)/i.exec(t)[1]}else if(/firefox/i.test(t)){e.name=u.Firefox;e.version=/firefox\/([\d\.]+)/i.exec(t)[1]}else if(/mobile/i.test(t)){e.name=u.Mobile;e.version=/mobile\/([\w]+)/i.exec(t)[1]}else if(/safari/i.test(t)){e.name=u.Safari;e.version=/version\/([\d\.]+)/i.exec(t)[1]}return e}function h(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,n)=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}class d extends n.CryptoKey{constructor(e,t,r,n){super();this.extractable=t;this.type=r;this.usages=n;this.algorithm=Object.assign({},e)}}function p(e,t){return e.name.toUpperCase()===t.toUpperCase()}class y extends d{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:build$1.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new n.AlgorithmError("Unsupported algorithm name")}}}class m{static checkCryptoKey(e){if(!(e instanceof y)){throw new TypeError("key: Is not AesCryptoKey")}}static generateKey(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const i=t.nativeCrypto.getRandomValues(new Uint8Array(e.length/8));return new y(e,r,n,i)}))}static encrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n.BufferSourceConverter.toUint8Array(r),true)}))}static decrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,n.BufferSourceConverter.toUint8Array(r),false)}))}static exportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new n.OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let e;if(n.isJWK(t)){e=build$1.Convert.FromBase64Url(t.k)}else{e=n.BufferSourceConverter.toArrayBuffer(t)}switch(e.byteLength<<3){case 128:case 192:case 256:break;default:throw new n.OperationError("keyData: Is wrong key length")}const a=new y({name:r.name,length:e.byteLength<<3},i,s,new Uint8Array(e));return a}))}static cipher(e,t,r,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const a=s?"encrypt":"decrypt";let o;if(p(e,m.AesCBC)){const s=n.BufferSourceConverter.toUint8Array(e.iv);o=i.AES_CBC[a](r,t.raw,undefined,s)}else if(p(e,m.AesGCM)){const s=n.BufferSourceConverter.toUint8Array(e.iv);let f;if(e.additionalData){f=n.BufferSourceConverter.toUint8Array(e.additionalData)}const c=(e.tagLength||128)/8;o=i.AES_GCM[a](r,t.raw,s,f,c)}else if(p(e,m.AesECB)){o=i.AES_ECB[a](r,t.raw,true)}else{throw new n.OperationError(`algorithm: Is not recognized`)}return n.BufferSourceConverter.toArrayBuffer(o)}))}}m.AesCBC="AES-CBC";m.AesECB="AES-ECB";m.AesGCM="AES-GCM";class g extends n.AesCbcProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.generateKey(e,t,r)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.encrypt(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.decrypt(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);m.checkCryptoKey(e)}}class b extends n.AesEcbProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.generateKey(e,t,r)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.encrypt(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.decrypt(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);m.checkCryptoKey(e)}}class v extends n.AesGcmProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.generateKey(e,t,r)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.encrypt(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.decrypt(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);m.checkCryptoKey(e)}}class w extends n.AesCtrProvider{onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=new i.AES_CTR(t.raw,n.BufferSourceConverter.toUint8Array(e.counter)).encrypt(n.BufferSourceConverter.toUint8Array(r));return n.BufferSourceConverter.toArrayBuffer(s)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=new i.AES_CTR(t.raw,n.BufferSourceConverter.toUint8Array(e.counter)).decrypt(n.BufferSourceConverter.toUint8Array(r));return n.BufferSourceConverter.toArrayBuffer(s)}))}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return m.importKey(e,t,r,n,i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);m.checkCryptoKey(e)}}class A extends n.AesKwProvider{onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);m.checkCryptoKey(e)}}class E extends d{constructor(e,t,r,n,i){super(e,t,r,n);this.data=i}}class _{static checkCryptoKey(e){if(!(e instanceof E)){throw new TypeError("key: Is not RsaCryptoKey")}}static generateKey(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const i={name:"RSA-PSS",hash:"SHA-256",publicExponent:e.publicExponent,modulusLength:e.modulusLength};const s=yield t.nativeSubtle.generateKey(i,true,["sign","verify"]);const a=new ce;const o=yield a.subtle.exportKey("pkcs8",s.privateKey);const f=yield a.subtle.importKey("pkcs8",o,e,r,n.filter((e=>this.privateUsages.includes(e))));const c=yield a.subtle.exportKey("spki",s.publicKey);const u=yield a.subtle.importKey("spki",c,e,true,n.filter((e=>this.publicUsages.includes(e))));return{privateKey:f,publicKey:u}}))}static exportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);default:throw new n.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let a;switch(e){case"pkcs8":a=this.importPkcs8Key(t);break;case"spki":a=this.importSpkiKey(t);break;case"jwk":a=this.importJwkKey(t);break;default:throw new n.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}const o=new E(Object.assign({publicExponent:a[1][1]===1?a[1].slice(1):a[1].slice(3),modulusLength:a[0].byteLength<<3},r),i,a.length===2?"public":"private",s,a);return o}))}static randomNonZeroValues(e){e=t.nativeCrypto.getRandomValues(e);return e.map((e=>{while(!e){e=t.nativeCrypto.getRandomValues(new Uint8Array(1))[0]}return e}))}static exportPkcs8Key(e){const t=new n.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";t.privateKeyAlgorithm.parameters=null;t.privateKey=asn1Schema.AsnConvert.serialize(this.exportAsmKey(e.data));return asn1Schema.AsnConvert.serialize(t)}static importPkcs8Key(e){const t=asn1Schema.AsnConvert.parse(e,n.asn1.PrivateKeyInfo);const r=asn1Schema.AsnConvert.parse(t.privateKey,n.asn1.RsaPrivateKey);return this.importAsmKey(r)}static importSpkiKey(e){const t=asn1Schema.AsnConvert.parse(e,n.asn1.PublicKeyInfo);const r=asn1Schema.AsnConvert.parse(t.publicKey,n.asn1.RsaPublicKey);return this.importAsmKey(r)}static exportSpkiKey(e){const t=new n.asn1.RsaPublicKey;t.modulus=e.data[0].buffer;t.publicExponent=e.data[1][1]===1?e.data[1].buffer.slice(1):e.data[1].buffer.slice(3);const r=new n.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.publicKeyAlgorithm.parameters=null;r.publicKey=asn1Schema.AsnConvert.serialize(t);return asn1Schema.AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=jsonSchema.JsonParser.fromJSON(e,{targetSchema:n.asn1.RsaPrivateKey})}else{t=jsonSchema.JsonParser.fromJSON(e,{targetSchema:n.asn1.RsaPublicKey})}return this.importAsmKey(t)}static exportJwkKey(e){const t=this.exportAsmKey(e.data);const r=jsonSchema.JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.kty="RSA";r.alg=this.getJwkAlgorithm(e.algorithm);return r}static getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":const t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${t!=="1"?`-${t}`:""}`;case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSAES-PKCS1-V1_5":return`PS1`;default:throw new n.OperationError("algorithm: Is not recognized")}}static exportAsmKey(e){let t;if(e.length>2){const r=new n.asn1.RsaPrivateKey;r.privateExponent=e[2].buffer;r.prime1=e[3].buffer;r.prime2=e[4].buffer;r.exponent1=e[5].buffer;r.exponent2=e[6].buffer;r.coefficient=e[7].buffer;t=r}else{t=new n.asn1.RsaPublicKey}t.modulus=e[0].buffer;t.publicExponent=e[1][1]===1?e[1].buffer.slice(1):e[1].buffer.slice(3);return t}static importAsmKey(e){const t=new Uint8Array(4-e.publicExponent.byteLength);const r=[new Uint8Array(e.modulus),h(t,new Uint8Array(e.publicExponent))];if(e instanceof n.asn1.RsaPrivateKey){r.push(new Uint8Array(e.privateExponent));r.push(new Uint8Array(e.prime1));r.push(new Uint8Array(e.prime2));r.push(new Uint8Array(e.exponent1));r.push(new Uint8Array(e.exponent2));r.push(new Uint8Array(e.coefficient))}return r}}_.RsaSsa="RSASSA-PKCS1-v1_5";_.RsaPss="RSA-PSS";_.RsaOaep="RSA-OAEP";_.privateUsages=["sign","decrypt","unwrapKey"];_.publicUsages=["verify","encrypt","wrapKey"];class S{static getDigest(e){switch(e){case"SHA-1":return new i.Sha1;case"SHA-256":return new i.Sha256;case"SHA-512":return new i.Sha512;default:throw new n.AlgorithmError("keyAlgorithm.hash: Is not recognized")}}static digest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const r=this.getDigest(e.name);const i=r.process(n.BufferSourceConverter.toUint8Array(t)).finish().result;return n.BufferSourceConverter.toArrayBuffer(i)}))}}class $ extends n.RsaOaepProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);_.checkCryptoKey(e)}cipher(e,t,r){const s=S.getDigest(t.algorithm.hash.name);let a;if(e.label){a=n.BufferSourceConverter.toUint8Array(e.label)}const o=new i.RSA_OAEP(t.data,s,a);let f;const c=n.BufferSourceConverter.toUint8Array(r);if(t.type==="public"){f=o.encrypt(c)}else{f=o.decrypt(c)}return n.BufferSourceConverter.toArrayBuffer(f)}}class T extends n.RsaPssProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.importKey(e,t,r,n,i)}))}onSign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=new i.RSA_PSS(t.data,S.getDigest(t.algorithm.hash.name),e.saltLength);const a=s.sign(n.BufferSourceConverter.toUint8Array(r));return n.BufferSourceConverter.toArrayBuffer(a)}))}onVerify(e,t,r,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const a=new i.RSA_PSS(t.data,S.getDigest(t.algorithm.hash.name),e.saltLength);try{a.verify(n.BufferSourceConverter.toUint8Array(r),n.BufferSourceConverter.toUint8Array(s))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);_.checkCryptoKey(e)}}class C extends n.RsaSsaProvider{onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.importKey(e,t,r,n,i)}))}onSign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const e=new i.RSA_PKCS1_v1_5(t.data,S.getDigest(t.algorithm.hash.name));const s=e.sign(n.BufferSourceConverter.toUint8Array(r));return n.BufferSourceConverter.toArrayBuffer(s)}))}onVerify(e,t,r,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const e=new i.RSA_PKCS1_v1_5(t.data,S.getDigest(t.algorithm.hash.name));try{e.verify(n.BufferSourceConverter.toUint8Array(r),n.BufferSourceConverter.toUint8Array(s))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);_.checkCryptoKey(e)}}class P extends n.ProviderCrypto{constructor(){super(...arguments);this.name="RSAES-PKCS1-v1_5";this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]};this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.generateKey(e,t,r)}))}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=build$1.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");switch(e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const e=new i.RSA(t.data).decrypt(new i.BigNumber(n.BufferSourceConverter.toUint8Array(r))).result;const s=t.algorithm.modulusLength>>3;if(r.byteLength!==s){throw new n.CryptoError("Decryption error. Encrypted message size doesn't match to key length")}let a=0;if(e[a++]||e[a++]!==2){throw new n.CryptoError("Decryption error")}do{if(e[a++]===0){break}}while(a<e.length);if(a<11){throw new n.CryptoError("Decryption error. PS is less than 8 octets.")}if(a===e.length){throw new n.CryptoError("Decryption error. There is no octet with hexadecimal value 0x00 to separate PS from M")}return e.buffer.slice(a)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const e=t.algorithm.modulusLength>>3;if(r.byteLength>e-11){throw new n.CryptoError("Message too long")}const s=e-r.byteLength-3;const a=_.randomNonZeroValues(new Uint8Array(s));const o=new Uint8Array(e);o[0]=0;o[1]=2;o.set(a,2);o[2+s]=0;o.set(new Uint8Array(r),3+s);const f=new i.RSA(t.data).encrypt(new i.BigNumber(o)).result;return n.BufferSourceConverter.toArrayBuffer(f)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return _.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=yield _.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),n,i);return s}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);_.checkCryptoKey(e)}prepareSignData(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const r=new ce;return r.subtle.digest(e.hash,t)}))}}const x={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13"};function I(e){const t=x[e];if(!t){throw new n.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class k extends d{constructor(e,t,r,n,i){super(e,t,r,n);this.data=i}}class N{static checkLib(){if(typeof s==="undefined"){throw new n.OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static generateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const n=this.initEcKey(e.namedCurve);const i=n.genKeyPair();i.getPublic();const s=new k(Object.assign({},e),t,"private",r.filter((e=>~this.privateUsages.indexOf(e))),i);const a=new k(Object.assign({},e),true,"public",r.filter((e=>~this.publicUsages.indexOf(e))),i);return{privateKey:s,publicKey:a}}))}static checkCryptoKey(e){if(!(e instanceof k)){throw new TypeError("key: Is not EcCryptoKey")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,n)=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}static exportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);case"raw":return new Uint8Array(t.data.getPublic("der")).buffer;default:throw new n.OperationError("format: Must be 'jwk', 'raw, 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();let a;switch(e){case"pkcs8":a=this.importPkcs8Key(t,r.namedCurve);break;case"spki":a=this.importSpkiKey(t,r.namedCurve);break;case"raw":a=this.importEcKey(new n.asn1.EcPublicKey(t),r.namedCurve);break;case"jwk":a=this.importJwkKey(t);break;default:throw new n.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}const o=new k(Object.assign({},r),i,a.priv?"private":"public",s,a);return o}))}static getNamedCurve(e){const t=e.toUpperCase();let r="";if(["P-256","P-384","P-521"].indexOf(t)>-1){r=t.replace("-","").toLowerCase()}else if(t==="K-256"){r="secp256k1"}else if(["brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"].includes(e)){r=e}else{throw new n.OperationError(`Unsupported named curve '${e}'`)}return r}static initEcKey(e){return s.ec(this.getNamedCurve(e))}static exportPkcs8Key(e){const t=new n.asn1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=this.ASN_ALGORITHM;t.privateKeyAlgorithm.parameters=asn1Schema.AsnConvert.serialize(new n.asn1.ObjectIdentifier(I(e.algorithm.namedCurve)));t.privateKey=asn1Schema.AsnConvert.serialize(this.exportEcKey(e));return asn1Schema.AsnConvert.serialize(t)}static importPkcs8Key(e,t){const r=asn1Schema.AsnConvert.parse(e,n.asn1.PrivateKeyInfo);const i=asn1Schema.AsnConvert.parse(r.privateKey,n.asn1.EcPrivateKey);return this.importEcKey(i,t)}static importSpkiKey(e,t){const r=asn1Schema.AsnConvert.parse(e,n.asn1.PublicKeyInfo);const i=new n.asn1.EcPublicKey(r.publicKey);return this.importEcKey(i,t)}static exportSpkiKey(e){const t=new n.asn1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer);const r=new n.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=this.ASN_ALGORITHM;r.publicKeyAlgorithm.parameters=asn1Schema.AsnConvert.serialize(new n.asn1.ObjectIdentifier(I(e.algorithm.namedCurve)));r.publicKey=t.value;return asn1Schema.AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=jsonSchema.JsonParser.fromJSON(e,{targetSchema:n.asn1.EcPrivateKey})}else{t=jsonSchema.JsonParser.fromJSON(e,{targetSchema:n.asn1.EcPublicKey})}return this.importEcKey(t,e.crv)}static exportJwkKey(e){const t=this.exportEcKey(e);const r=jsonSchema.JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.crv=e.algorithm.namedCurve;r.kty="EC";return r}static exportEcKey(e){if(e.type==="private"){const t=new n.asn1.EcPrivateKey;const r=new Uint8Array(e.data.getPrivate("der").toArray());const i=new Uint8Array(this.getPointSize(e.algorithm.namedCurve)-r.length);t.privateKey=h(i,r);t.publicKey=new Uint8Array(e.data.getPublic("der"));return t}else if(e.data.pub){return new n.asn1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer)}else{throw new Error("Cannot get private or public key")}}static importEcKey(e,t){const r=this.initEcKey(t);if(e instanceof n.asn1.EcPublicKey){return r.keyFromPublic(new Uint8Array(e.value))}return r.keyFromPrivate(new Uint8Array(e.privateKey))}static getPointSize(e){switch(e){case"P-256":case"K-256":return 32;case"P-384":return 48;case"P-521":return 66}throw new Error("namedCurve: Is not recognized")}}N.privateUsages=["sign","deriveKey","deriveBits"];N.publicUsages=["verify"];N.ASN_ALGORITHM="1.2.840.10045.2.1";class R extends n.EcdhProvider{constructor(){super(...arguments);this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.importKey(e,t,r,n,i)}))}onDeriveBits(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){N.checkLib();const n=t.data.derive(e.public.data.getPublic());let i=new Uint8Array(n.toArray());let s=i.length;s=s>32?s>48?66:48:32;if(i.length<s){i=N.concat(new Uint8Array(s-i.length),i)}const a=i.slice(0,r/8).buffer;return a}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}}function M(e){const t=new Uint8Array(e);const r=[];for(let e=0;e<t.length;e++){r.push(t[e])}return r}class O extends n.EcdsaProvider{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","SHA3-256","SHA3-384","SHA3-512"];this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return N.importKey(e,t,r,n,i)}))}onSign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){N.checkLib();const i=new ce;let s;const a=yield i.subtle.digest(e.hash,r);s=M(a);const o=yield t.data.sign(s);const f=new n.asn1.EcDsaSignature;f.r=new Uint8Array(o.r.toArray()).buffer;f.s=new Uint8Array(o.s.toArray()).buffer;return f.toWebCryptoSignature()}))}onVerify(e,t,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){N.checkLib();const i=new ce;const s={r:new Uint8Array(r.slice(0,r.byteLength/2)),s:new Uint8Array(r.slice(r.byteLength/2))};const a=yield i.subtle.digest(e.hash,n);const o=M(a);return t.data.verify(o,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);N.checkCryptoKey(e)}}const B={[n.asn1.idEd448]:"Ed448",ed448:n.asn1.idEd448,[n.asn1.idX448]:"X448",x448:n.asn1.idX448,[n.asn1.idEd25519]:"Ed25519",ed25519:n.asn1.idEd25519,[n.asn1.idX25519]:"X25519",x25519:n.asn1.idX25519};function D(e){const t=B[e.toLowerCase()];if(!t){throw new n.OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class U extends d{constructor(e,t,r,n){super(e,t,"private",r);this.data=n}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{d:build$1.Convert.ToBase64Url(build$1.Convert.FromHex(/^ed/i.test(e.crv)?this.data.getSecret("hex"):this.data.getPrivate("hex")))})}fromJSON(e){if(!e.d){throw new n.OperationError(`Cannot get private data from JWK. Property 'd' is required`)}if(!e.crv){throw new n.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=build$1.Convert.ToHex(build$1.Convert.FromBase64Url(e.d));{const e=new s.eddsa("ed25519");this.data=e.keyFromSecret(t)}return this}}class L extends d{constructor(e,t,r,n){super(e,t,"public",r);this.data=n}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{x:build$1.Convert.ToBase64Url(build$1.Convert.FromHex(this.data.getPublic("hex")))})}fromJSON(e){if(!e.crv){throw new n.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}if(!e.x){throw new n.OperationError(`Cannot get property from JWK. Property 'x' is required`)}const t=build$1.Convert.ToHex(build$1.Convert.FromBase64Url(e.x));if(/^ed/i.test(e.crv)){const r=new s.eddsa(e.crv.toLowerCase());this.data=r.keyFromPublic(t,"hex")}else{const r=s.ec(e.crv.replace(/^x/i,"curve"));this.data=r.keyFromPublic(t,"hex")}return this}}class F{static checkLib(){if(typeof s==="undefined"){throw new n.OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,n)=>{for(let n=0;n<e.length;n++){t[r+n]=e[n]}r+=e.length}));return t}static generateKey(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const i="ed25519";let a;{const e=t.nativeCrypto.getRandomValues(new Uint8Array(32));const r=new s.eddsa(i);a=r.keyFromSecret(e)}const o=new U(e,r,n.filter((e=>this.privateKeyUsages.indexOf(e)!==-1)),a);const f=new L(e,true,n.filter((e=>this.publicKeyUsages.indexOf(e)!==-1)),a);return{privateKey:o,publicKey:f}}))}static sign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const e=M(r);const n=t.data.sign(e).toHex();return build$1.Convert.FromHex(n)}))}static verify(e,t,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const e=M(n);const i=t.data.verify(e,build$1.Convert.ToHex(r));return i}))}static deriveBits(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const n=new Uint8Array(build$1.Convert.FromHex(t.data.getSecret("hex")));const i=new s.ec("curve25519");const a=i.keyFromPrivate(build$1.Convert.ToHex(n),"hex");const o=e.public.data.getPublic("hex");new Uint8Array(build$1.Convert.FromHex(o));const f=e.public.data.getPublic();const c=a.derive(f);let u=new Uint8Array(c.toArray());let l=u.length;l=l>32?l>48?66:48:32;if(u.length<l){u=F.concat(new Uint8Array(l-u.length),u)}const h=u.slice(0,r/8).buffer;return h}))}static exportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":return jsonSchema.JsonSerializer.toJSON(t);case"pkcs8":{const e=build$1.Convert.FromHex(t.data.getSecret("hex"));const r=new n.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=D(t.algorithm.namedCurve);r.privateKey=asn1Schema.AsnConvert.serialize(new asn1Schema.OctetString(e));return asn1Schema.AsnConvert.serialize(r)}case"spki":{const e=build$1.Convert.FromHex(t.data.getPublic("hex"));const r=new n.asn1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=D(t.algorithm.namedCurve);r.publicKey=e;return asn1Schema.AsnConvert.serialize(r)}case"raw":{return build$1.Convert.FromHex(t.data.getPublic("hex"))}default:throw new n.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=jsonSchema.JsonParser.fromJSON(t,{targetSchema:n.asn1.CurvePrivateKey});return this.importPrivateKey(e,r,i,s)}else{if(!e.x){throw new TypeError("keyData: Cannot get required 'x' field")}return this.importPublicKey(build$1.Convert.FromBase64Url(e.x),r,i,s)}}case"raw":{return this.importPublicKey(t,r,i,s)}case"spki":{const e=asn1Schema.AsnConvert.parse(new Uint8Array(t),n.asn1.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,i,s)}case"pkcs8":{const e=asn1Schema.AsnConvert.parse(new Uint8Array(t),n.asn1.PrivateKeyInfo);const a=asn1Schema.AsnConvert.parse(e.privateKey,n.asn1.CurvePrivateKey);return this.importPrivateKey(a,r,i,s)}default:throw new n.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}))}static importPrivateKey(e,t,r,n){const i=new U(Object.assign({},t),r,n,null);i.fromJSON({crv:t.namedCurve,d:build$1.Convert.ToBase64Url(e.d)});return i}static importPublicKey(e,t,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const i=new L(Object.assign({},t),r,n,null);i.fromJSON({crv:t.namedCurve,x:build$1.Convert.ToBase64Url(e)});return i}))}}F.publicKeyUsages=["verify"];F.privateKeyUsages=["sign","deriveKey","deriveBits"];class j extends n.EdDsaProvider{constructor(){super(...arguments);this.namedCurves=["Ed25519"]}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const n=yield F.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return n}))}onSign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return F.sign(e,t,new Uint8Array(r))}))}onVerify(e,t,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return F.verify(e,t,new Uint8Array(r),new Uint8Array(n))}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return F.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=yield F.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),n,i);return s}))}}class H extends n.EcdhEsProvider{constructor(){super(...arguments);this.namedCurves=["X25519"]}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const n=yield F.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^x/i,"X")},t,r);return n}))}onDeriveBits(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const n=yield F.deriveBits(Object.assign(Object.assign({},e),{public:e.public}),t,r);return n}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return F.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const s=yield F.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),n,i);return s}))}}class K extends n.ProviderCrypto{constructor(){super(...arguments);this.name="SHA-1";this.usages=[]}onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return S.digest(e,t)}))}}class G extends K{constructor(){super(...arguments);this.name="SHA-256"}}class V extends K{constructor(){super(...arguments);this.name="SHA-512"}}class z extends n.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-256";this.usages=[]}onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return sha3.hash256(new Uint8Array(t)).buffer}))}}class W extends n.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-384";this.usages=[]}onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return sha3.hash384(new Uint8Array(t)).buffer}))}}class X extends n.ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-512";this.usages=[]}onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return sha3.hash512(new Uint8Array(t)).buffer}))}}class Y extends n.Shake128Provider{onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new sha3.SHAKE128).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class J extends n.Shake256Provider{onDigest(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new sha3.SHAKE256).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class q extends d{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}}class Q extends n.Pbkdf2Provider{onImportKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return new q(r,i,s,n.BufferSourceConverter.toUint8Array(t))}))}onDeriveBits(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let s;const a=n.BufferSourceConverter.toUint8Array(e.salt);const o=t.raw;switch(e.hash.name.toUpperCase()){case"SHA-1":s=i.Pbkdf2HmacSha1(o,a,e.iterations,r>>3);break;case"SHA-256":s=i.Pbkdf2HmacSha256(o,a,e.iterations,r>>3);break;case"SHA-512":s=i.Pbkdf2HmacSha512(o,a,e.iterations,r>>3);break;default:throw new n.OperationError(`algorithm.hash: '${e.hash.name}' hash algorithm is not supported`)}return n.BufferSourceConverter.toArrayBuffer(s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof q)){throw new TypeError("key: Is not PbkdfCryptoKey")}}}class Z extends d{constructor(e,t,r,n){super(e,t,"secret",r);this.raw=n}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:build$1.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return`DES-CBC`;case"DES-EDE3-CBC":return`3DES-CBC`;default:throw new n.AlgorithmError("Unsupported algorithm name")}}}class ee{static checkLib(){if(typeof a==="undefined"){throw new n.OperationError("Cannot implement DES mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/des.js' script to your project")}}static checkCryptoKey(e){if(!(e instanceof Z)){throw new TypeError("key: Is not DesCryptoKey")}}static generateKey(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const i=t.nativeCrypto.getRandomValues(new Uint8Array(e.length/8));return new Z(e,r,n,i)}))}static exportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new n.OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();let e;if(n.isJWK(t)){e=build$1.Convert.FromBase64Url(t.k)}else{e=n.BufferSourceConverter.toArrayBuffer(t)}if(r.name==="DES-CBC"&&e.byteLength!==8||r.name==="DES-EDE3-CBC"&&e.byteLength!==24){throw new n.OperationError("keyData: Is wrong key length")}const a=new Z({name:r.name,length:e.byteLength<<3},i,s,new Uint8Array(e));return a}))}static encrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,r,true)}))}static decrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.cipher(e,t,r,false)}))}static cipher(e,t,r,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.checkLib();const s=i?"encrypt":"decrypt";let o;const f=n.BufferSourceConverter.toUint8Array(e.iv);switch(e.name.toUpperCase()){case"DES-CBC":o=a.CBC.instantiate(a.DES).create({key:t.raw,type:s,iv:f});break;case"DES-EDE3-CBC":o=a.CBC.instantiate(a.EDE).create({key:t.raw,type:s,iv:f});break;default:throw new n.OperationError("algorithm: Is not recognized")}const c=o.update(new Uint8Array(r)).concat(o.final());return new Uint8Array(c).buffer}))}}class te extends n.DesProvider{constructor(){super(...arguments);this.keySizeBits=64;this.ivSize=8;this.name="DES-CBC"}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.encrypt(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);ee.checkCryptoKey(e)}}class re extends n.DesProvider{constructor(){super(...arguments);this.keySizeBits=192;this.ivSize=8;this.name="DES-EDE3-CBC"}onGenerateKey(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.generateKey(e,t,r)}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.exportKey(e,t)}))}onImportKey(e,t,r,n,i){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.importKey(e,t,r,n,i)}))}onEncrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.encrypt(e,t,r)}))}onDecrypt(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return ee.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);ee.checkCryptoKey(e)}}const ne={fromJSON:e=>Buffer.from(build$1.Convert.FromBase64Url(e)),toJSON:e=>build$1.Convert.ToBase64Url(e)};class ie extends d{get alg(){const e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}constructor(e={name:"HMAC"},t=false,r=[],n=new Uint8Array(0)){super(e,t,"secret",r);this.kty="oct";this.data=n}}tslib_1.__decorate([jsonSchema.JsonProp({name:"ext",type:jsonSchema.JsonPropTypes.Boolean,optional:true})],ie.prototype,"extractable",void 0);tslib_1.__decorate([jsonSchema.JsonProp({name:"key_ops",type:jsonSchema.JsonPropTypes.String,repeated:true,optional:true})],ie.prototype,"usages",void 0);tslib_1.__decorate([jsonSchema.JsonProp({name:"k",converter:ne})],ie.prototype,"data",void 0);tslib_1.__decorate([jsonSchema.JsonProp({type:jsonSchema.JsonPropTypes.String})],ie.prototype,"kty",void 0);tslib_1.__decorate([jsonSchema.JsonProp({type:jsonSchema.JsonPropTypes.String})],ie.prototype,"alg",null);class se extends n.HmacProvider{onGenerateKey(e,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const i=e.length||this.getDefaultLength(e.hash.name);const s=t.nativeCrypto.getRandomValues(new Uint8Array(i>>3));const a=new ie(e,r,n,s);return a}))}onSign(e,t,r){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let e;switch(t.algorithm.hash.name.toUpperCase()){case"SHA-1":e=i.HmacSha1;break;case"SHA-256":e=i.HmacSha256;break;case"SHA-512":e=i.HmacSha512;break;default:throw new n.OperationError("key.algorithm.hash: Is not recognized")}const s=new e(t.data).process(n.BufferSourceConverter.toUint8Array(r)).finish().result;return n.BufferSourceConverter.toArrayBuffer(s)}))}onVerify(e,t,r,n){return tslib_1.__awaiter(this,void 0,void 0,(function*(){const i=yield this.onSign(e,t,n);return build$1.Convert.ToHex(i)===build$1.Convert.ToHex(r)}))}onImportKey(e,t,r,i,s){return tslib_1.__awaiter(this,void 0,void 0,(function*(){let a;switch(e.toLowerCase()){case"jwk":a=jsonSchema.JsonParser.fromJSON(t,{targetSchema:ie});break;case"raw":if(!n.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBuffer or ArrayBufferView")}a=new ie(r,i,s,n.BufferSourceConverter.toUint8Array(t));break;default:throw new n.OperationError("format: Must be 'jwk' or 'raw'")}a.algorithm={hash:{name:r.hash.name},name:this.name,length:a.data.length<<3};a.extractable=i;a.usages=s;return a}))}onExportKey(e,t){return tslib_1.__awaiter(this,void 0,void 0,(function*(){switch(e.toLowerCase()){case"jwk":const e=jsonSchema.JsonSerializer.toJSON(t);return e;case"raw":return new Uint8Array(t.data).buffer;default:throw new n.OperationError("format: Must be 'jwk' or 'raw'")}}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof ie)){throw new TypeError("key: Is not HMAC CryptoKey")}}}var ae;class oe extends d{constructor(e,t,r,n,i){super(e,t,r,n);ae.set(this,void 0);tslib_1.__classPrivateFieldSet(this,ae,i,"f")}getNative(){return tslib_1.__classPrivateFieldGet(this,ae,"f")}}ae=new WeakMap;class fe extends n.SubtleCrypto{static isAnotherKey(e){if(typeof e==="object"&&typeof e.type==="string"&&typeof e.extractable==="boolean"&&typeof e.algorithm==="object"){return!(e instanceof d)}return false}constructor(){super();this.browserInfo=l();this.providers.set(new g);this.providers.set(new w);this.providers.set(new b);this.providers.set(new v);this.providers.set(new A);this.providers.set(new te);this.providers.set(new re);this.providers.set(new C);this.providers.set(new T);this.providers.set(new $);this.providers.set(new P);this.providers.set(new O);this.providers.set(new R);this.providers.set(new K);this.providers.set(new G);this.providers.set(new V);this.providers.set(new Q);this.providers.set(new se);this.providers.set(new j);this.providers.set(new H);this.providers.set(new z);this.providers.set(new W);this.providers.set(new X);this.providers.set(new Y);this.providers.set(new J)}digest(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("digest",...e)}))}importKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){this.fixFirefoxEcImportPkcs8(e);return this.wrapNative("importKey",...e)}))}exportKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return(yield this.fixFirefoxEcExportPkcs8(e))||(yield this.wrapNative("exportKey",...e))}))}generateKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("generateKey",...e)}))}sign(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("sign",...e)}))}verify(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("verify",...e)}))}encrypt(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("encrypt",...e)}))}decrypt(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("decrypt",...e)}))}wrapKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("wrapKey",...e)}))}unwrapKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("unwrapKey",...e)}))}deriveBits(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("deriveBits",...e)}))}deriveKey(...e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){return this.wrapNative("deriveKey",...e)}))}wrapNative(e,...r){const n=e=>super[e];return tslib_1.__awaiter(this,void 0,void 0,(function*(){if(~["generateKey","unwrapKey","deriveKey","importKey"].indexOf(e)){this.fixAlgorithmName(r)}try{if(e!=="digest"||!r.some((e=>e instanceof d))){const n=this.fixNativeArguments(e,r);c.info(`Call native '${e}' method`,n);const i=yield t.nativeSubtle[e].apply(t.nativeSubtle,n);return this.fixNativeResult(e,r,i)}}catch(t){c.warn(`Error on native '${e}' calling. ${t.message}`,t)}if(e==="wrapKey"){try{c.info(`Trying to wrap key by using native functions`,r);const e=yield this.exportKey(r[0],r[1]);const t=r[0]==="jwk"?build$1.Convert.FromUtf8String(JSON.stringify(e)):e;const n=yield this.encrypt(r[3],r[2],t);return n}catch(e){c.warn(`Cannot wrap key by native functions. ${e.message}`,e)}}if(e==="unwrapKey"){try{c.info(`Trying to unwrap key by using native functions`,r);const e=yield this.decrypt(r[3],r[2],r[1]);const t=r[0]==="jwk"?JSON.parse(build$1.Convert.ToUtf8String(e)):e;const n=yield this.importKey(r[0],t,r[4],r[5],r[6]);return n}catch(e){c.warn(`Cannot unwrap key by native functions. ${e.message}`,e)}}if(e==="deriveKey"){try{c.info(`Trying to derive key by using native functions`,r);const e=yield this.deriveBits(r[0],r[1],r[2].length);const t=yield this.importKey("raw",e,r[2],r[3],r[4]);return t}catch(e){c.warn(`Cannot derive key by native functions. ${e.message}`,e)}}if(e==="deriveBits"||e==="deriveKey"){for(const e of r){if(typeof e==="object"&&e.public&&fe.isAnotherKey(e.public)){e.public=yield this.castKey(e.public)}}}for(let e=0;e<r.length;e++){const t=r[e];if(fe.isAnotherKey(t)){r[e]=yield this.castKey(t)}}const i=n(e);if(typeof i==="function"){return i.apply(this,r)}throw new Error("Incorrect type of 'method'. Must be 'function'.")}))}fixNativeArguments(e,t){var r,n,i,s,a,o,f,c;const l=[...t];if(e==="importKey"){if(this.browserInfo.name===u.IE&&((n=(r=l[0])===null||r===void 0?void 0:r.toLowerCase)===null||n===void 0?void 0:n.call(r))==="jwk"&&!build$1.BufferSourceConverter.isBufferSource(l[1])){l[1]=build$1.Convert.FromUtf8String(JSON.stringify(l[1]))}}if(this.browserInfo.name===u.IE&&t[1]instanceof oe){switch(e){case"sign":case"verify":case"encrypt":case"decrypt":l[0]=Object.assign(Object.assign({},this.prepareAlgorithm(l[0])),{hash:(a=(s=(i=l[1])===null||i===void 0?void 0:i.algorithm)===null||s===void 0?void 0:s.hash)===null||a===void 0?void 0:a.name});break;case"wrapKey":case"unwrapKey":l[4]=Object.assign(Object.assign({},this.prepareAlgorithm(l[4])),{hash:(c=(f=(o=l[3])===null||o===void 0?void 0:o.algorithm)===null||f===void 0?void 0:f.hash)===null||c===void 0?void 0:c.name});break}}for(let e=0;e<l.length;e++){const t=l[e];if(t instanceof oe){l[e]=t.getNative()}}return l}fixNativeResult(e,t,r){var i,s;if(this.browserInfo.name===u.IE){if(e==="exportKey"){if(((s=(i=t[0])===null||i===void 0?void 0:i.toLowerCase)===null||s===void 0?void 0:s.call(i))==="jwk"&&r instanceof ArrayBuffer){return JSON.parse(build$1.Convert.ToUtf8String(r))}}if("privateKey"in r){const e=["sign","decrypt","unwrapKey","deriveKey","deriveBits"];const n=["verify","encrypt","wrapKey"];return{privateKey:this.wrapNativeKey(r.privateKey,t[0],t[1],t[2].filter((t=>e.includes(t)))),publicKey:this.wrapNativeKey(r.publicKey,t[0],t[1],t[2].filter((e=>n.includes(e))))}}else if("extractable"in r){let i;let s;switch(e){case"importKey":i=t[2];s=t[4];break;case"unwrapKey":i=t[4];s=t[6];break;case"generateKey":i=t[0];s=t[2];break;default:throw new n.OperationError("Cannot wrap native key. Unsupported method in use")}return this.wrapNativeKey(r,i,r.extractable,s)}}return r}wrapNativeKey(e,t,r,i){if(this.browserInfo.name===u.IE){const s=["RSASSA-PKCS1-v1_5","RSA-PSS","RSA-OAEP","AES-CBC","AES-CTR","AES-KW","HMAC"];const a=s.map((e=>e.toLowerCase())).indexOf(e.algorithm.name.toLowerCase());if(a!==-1){const o=this.prepareAlgorithm(t);const f=Object.assign(Object.assign({},e.algorithm),{name:s[a]});if(n.SubtleCrypto.isHashedAlgorithm(o)){f.hash={name:o.hash.name.toUpperCase()}}c.info(`Wrapping ${s[a]} crypto key to WrappedNativeCryptoKey`);return new oe(f,r,e.type,i,e)}}return e}castKey(e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){c.info("Cast native CryptoKey to linter key.",e);if(!e.extractable){throw new Error("Cannot cast unextractable crypto key")}const t=this.getProvider(e.algorithm.name);const r=yield this.exportKey("jwk",e);return t.importKey("jwk",r,e.algorithm,true,e.usages)}))}fixAlgorithmName(e){if(this.browserInfo.name===u.Edge){for(let t=0;t<e.length;t++){const r=e[0];if(typeof r==="string"){for(const n of this.providers.algorithms){if(n.toLowerCase()===r.toLowerCase()){e[t]=n;break}}}else if(typeof r==="object"&&typeof r.name==="string"){for(const e of this.providers.algorithms){if(e.toLowerCase()===r.name.toLowerCase()){r.name=e}if(typeof r.hash==="string"&&e.toLowerCase()===r.hash.toLowerCase()||typeof r.hash==="object"&&typeof r.hash.name==="string"&&e.toLowerCase()===r.hash.name.toLowerCase()){r.hash={name:e}}}}}}}fixFirefoxEcImportPkcs8(e){const t=this.prepareAlgorithm(e[2]);const r=t.name.toUpperCase();if(this.browserInfo.name===u.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(r)&&~["P-256","P-384","P-521"].indexOf(t.namedCurve)){if(!n.BufferSourceConverter.isBufferSource(e[1])){throw new TypeError("data: Is not ArrayBuffer or ArrayBufferView")}const r=n.BufferSourceConverter.toArrayBuffer(e[1]);const i=asn1Schema.AsnConvert.parse(r,n.asn1.PrivateKeyInfo);const s=asn1Schema.AsnConvert.parse(i.privateKey,n.asn1.EcPrivateKey);const a=jsonSchema.JsonSerializer.toJSON(s);a.ext=true;a.key_ops=e[4];a.crv=t.namedCurve;a.kty="EC";e[0]="jwk";e[1]=a}}fixFirefoxEcExportPkcs8(e){return tslib_1.__awaiter(this,void 0,void 0,(function*(){try{if(this.browserInfo.name===u.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(e[1].algorithm.name)&&~["P-256","P-384","P-521"].indexOf(e[1].algorithm.namedCurve)){const t=yield this.exportKey("jwk",e[1]);const r=jsonSchema.JsonParser.fromJSON(t,{targetSchema:n.asn1.EcPrivateKey});const i=new n.asn1.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm=N.ASN_ALGORITHM;i.privateKeyAlgorithm.parameters=asn1Schema.AsnConvert.serialize(new n.asn1.ObjectIdentifier(I(e[1].algorithm.namedCurve)));i.privateKey=asn1Schema.AsnConvert.serialize(r);return asn1Schema.AsnConvert.serialize(i)}}catch(e){c.error(e);return null}}))}}fe.methods=["digest","importKey","exportKey","sign","verify","generateKey","encrypt","decrypt","deriveBits","deriveKey","wrapKey","unwrapKey"];class ce extends n.Crypto{constructor(){super(...arguments);this.subtle=new fe}get nativeCrypto(){return t.nativeCrypto}getRandomValues(e){return t.nativeCrypto.getRandomValues(e)}}function ue(e,t){const r=e[t];e[t]=function(){const n=arguments;return new Promise(((i,s)=>{const a=r.apply(e,n);a.oncomplete=e=>{i(e.target.result)};a.onerror=e=>{s(`Error on running '${t}' function`)}}))}}if(typeof self!=="undefined"&&self["msCrypto"]){ue(t.nativeSubtle,"generateKey");ue(t.nativeSubtle,"digest");ue(t.nativeSubtle,"sign");ue(t.nativeSubtle,"verify");ue(t.nativeSubtle,"encrypt");ue(t.nativeSubtle,"decrypt");ue(t.nativeSubtle,"importKey");ue(t.nativeSubtle,"exportKey");ue(t.nativeSubtle,"wrapKey");ue(t.nativeSubtle,"unwrapKey");ue(t.nativeSubtle,"deriveKey");ue(t.nativeSubtle,"deriveBits")}if(!Math.imul){Math.imul=function e(t,r){const n=t>>>16&65535;const i=t&65535;const s=r>>>16&65535;const a=r&65535;return i*a+(n*a+i*s<<16>>>0)|0}}if(t.nativeCrypto){Object.freeze(t.nativeCrypto.getRandomValues)}const le=new ce;t.Crypto=ce;t.CryptoKey=d;t.crypto=le;t.setCrypto=f}));const crypto$3=new build.Crypto;Application.setEngine("WebCryptoLiner",crypto$3);cryptoProvider.set(crypto$3);class DSigValidator{async getSignerKey(e){const t=e.getXmlString();let r=Parse(t);let n=r.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig#","Signature");if(!n.length){console.log("No DSIG detected, skipping signature validation");return false}try{const e=new SignedXml(r);e.LoadXml(n[0]);const t=await e.Verify();if(t){const t=await e.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyValue)).exportKey();const r=e.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyInfoX509Data));const n=await this.keyToHex(t);if(r&&r.Certificates.length>0){console.info("DSIG validator: Signature includes certificate, verifying chain.");if(r.Certificates.length>1){const e=await this.keyToHex(await this.verifyCertificateChain(r.Certificates,n));return{authoritiveKey:e,signingKey:n}}else{const e=new X509Certificate(r.Certificates[0].GetRaw());const t=await this.getSignerPublicKeyFromCertificate(e);const i=await this.keyToHex(t);if(!await e.verify({publicKey:t}))throw new Error("x509 certificate verification failed!");const s=await this.keyToHex(await e.publicKey.export());if(s!=n)throw new Error("Certificate subject public key does not match XML signing key");return{authoritiveKey:i,signingKey:n}}}return{authoritiveKey:n,signingKey:n}}else{throw new Error("DSIG verification failed!")}}catch(e){console.warn("Signature validation failed: ");console.warn(e);return false}}async keyToHex(e){return"0x"+uint8tohex(new Uint8Array(await crypto$3.subtle.exportKey(e.algorithm.name==="ECDSA"?"raw":"spki",e)))}async verifyCertificateChain(e,t){for(let[r,n]of e.entries()){if(t===await this.keyToHex(await n.exportKey())){e=e.splice(r);const t=new X509ChainBuilder({certificates:e.map((e=>new X509Certificate(e.GetRaw())))});const i=await t.build(new X509Certificate(n.GetRaw()));return this.getSignerPublicKeyFromCertificate(i[i.length-1])}}throw new Error("The x509 certificate corresponding to the public key was not found")}async getSignerPublicKeyFromCertificate(e){const t=e.getExtension("2.5.29.18");if(!t)throw new Error("Root certificate does not contain issuerAltName extension");return await crypto$3.subtle.importKey("raw",new Uint8Array(t.value),{name:"ECDSA",namedCurve:"K-256"},true,["verify"])}}async function*batch(e,t=1){let r=[];if(t<1){t=1}for await(const n of e){r.push(n);while(r.length>=t){yield r.slice(0,t);r=r.slice(t)}}while(r.length){yield r.slice(0,t);r=r.slice(t)}}var itBatch=batch;async function*parallelBatch(e,t=1){for await(const r of itBatch(e,t)){const e=r.map((e=>e().then((e=>({ok:true,value:e})),(e=>({ok:false,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(r.ok){yield r.value}else{throw r.err}}}}var itParallelBatch=parallelBatch;var isPlainObj=e=>{if(Object.prototype.toString.call(e)!=="[object Object]"){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype};const{hasOwnProperty}=Object.prototype;const{propertyIsEnumerable}=Object;const defineProperty=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:true,enumerable:true,configurable:true});const globalThis$1=commonjsGlobal;const defaultMergeOptions={concatArrays:false,ignoreUndefined:false};const getEnumerableOwnPropertyKeys=e=>{const t=[];for(const r in e){if(hasOwnProperty.call(e,r)){t.push(r)}}if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r){if(propertyIsEnumerable.call(e,n)){t.push(n)}}}return t};function clone(e){if(Array.isArray(e)){return cloneArray(e)}if(isPlainObj(e)){return cloneOptionObject(e)}return e}function cloneArray(e){const t=e.slice(0,0);getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}function cloneOptionObject(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}const mergeKeys=(e,t,r,n)=>{r.forEach((r=>{if(typeof t[r]==="undefined"&&n.ignoreUndefined){return}if(r in e&&e[r]!==Object.getPrototypeOf(e)){defineProperty(e,r,merge(e[r],t[r],n))}else{defineProperty(e,r,clone(t[r]))}}));return e};const concatArrays=(e,t,r)=>{let n=e.slice(0,0);let i=0;[e,t].forEach((t=>{const s=[];for(let r=0;r<t.length;r++){if(!hasOwnProperty.call(t,r)){continue}s.push(String(r));if(t===e){defineProperty(n,i++,t[r])}else{defineProperty(n,i++,clone(t[r]))}}n=mergeKeys(n,t,getEnumerableOwnPropertyKeys(t).filter((e=>!s.includes(e))),r)}));return n};function merge(e,t,r){if(r.concatArrays&&Array.isArray(e)&&Array.isArray(t)){return concatArrays(e,t,r)}if(!isPlainObj(t)||!isPlainObj(e)){return clone(t)}return mergeKeys(e,t,getEnumerableOwnPropertyKeys(t),r)}var mergeOptions$1=function(...e){const t=merge(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const n of e){if(n===undefined){continue}if(!isPlainObj(n)){throw new TypeError("`"+n+"` is not an Option Object")}r=merge(r,{_:n},t)}return r._};function assign$1(e,t){for(const r in t){Object.defineProperty(e,r,{value:t[r],enumerable:true,configurable:true})}return e}function createError(e,t,r){if(!e||typeof e==="string"){throw new TypeError("Please pass an Error to err-code")}if(!r){r={}}if(typeof t==="object"){r=t;t=""}if(t){r.code=t}try{return assign$1(e,r)}catch(t){r.message=e.message;r.stack=e.stack;const n=function(){};n.prototype=Object.create(Object.getPrototypeOf(e));const i=assign$1(new n,r);return i}}var errCode=createError;function base$3(e){if(e.length>=255){throw new TypeError("Alphabet too long")}var t=new Uint8Array(256);for(var r=0;r<t.length;r++){t[r]=255}for(var n=0;n<e.length;n++){var i=e.charAt(n);var s=i.charCodeAt(0);if(t[s]!==255){throw new TypeError(i+" is ambiguous")}t[s]=n}var a=e.length;var o=e.charAt(0);var f=Math.log(a)/Math.log(256);var c=Math.log(256)/Math.log(a);function u(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var i=0;var s=t.length;while(i!==s&&t[i]===0){i++;r++}var f=(s-i)*c+1>>>0;var u=new Uint8Array(f);while(i!==s){var l=t[i];var h=0;for(var d=f-1;(l!==0||h<n)&&d!==-1;d--,h++){l+=256*u[d]>>>0;u[d]=l%a>>>0;l=l/a>>>0}if(l!==0){throw new Error("Non-zero carry")}n=h;i++}var p=f-n;while(p!==f&&u[p]===0){p++}var y=o.repeat(r);for(;p<f;++p){y+=e.charAt(u[p])}return y}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var r=0;if(e[r]===" "){return}var n=0;var i=0;while(e[r]===o){n++;r++}var s=(e.length-r)*f+1>>>0;var c=new Uint8Array(s);while(e[r]){var u=t[e.charCodeAt(r)];if(u===255){return}var l=0;for(var h=s-1;(u!==0||l<i)&&h!==-1;h--,l++){u+=a*c[h]>>>0;c[h]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}i=l;r++}if(e[r]===" "){return}var d=s-i;while(d!==s&&c[d]===0){d++}var p=new Uint8Array(n+(s-d));var y=n;while(d!==s){p[y++]=c[d++]}return p}function h(e){var t=l(e);if(t){return t}throw new Error("Non-base"+a+" character")}return{encode:u,decodeUnsafe:l,decode:h}}var src$c=base$3;const textDecoder=new TextDecoder;const decodeText$1=e=>textDecoder.decode(e);const textEncoder=new TextEncoder;const encodeText$2=e=>textEncoder.encode(e);function concat(e,t){const r=new Uint8Array(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return r}var util$4={decodeText:decodeText$1,encodeText:encodeText$2,concat};const{encodeText:encodeText$1}=util$4;class Base{constructor(e,t,r,n){this.name=e;this.code=t;this.codeBuf=encodeText$1(this.code);this.alphabet=n;this.codec=r(n)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e){if(this.alphabet&&this.alphabet.indexOf(t)<0){throw new Error(`invalid character '${t}' in '${e}'`)}}return this.codec.decode(e)}}var base$2=Base;const decode$4=(e,t,r)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let i=e.length;while(e[i-1]==="="){--i}const s=new Uint8Array(i*r/8|0);let a=0;let o=0;let f=0;for(let t=0;t<i;++t){const i=n[e[t]];if(i===undefined){throw new SyntaxError("Invalid character "+e[t])}o=o<<r|i;a+=r;if(a>=8){a-=8;s[f++]=255&o>>a}}if(a>=r||255&o<<8-a){throw new SyntaxError("Unexpected end of data")}return s};const encode$5=(e,t,r)=>{const n=t[t.length-1]==="=";const i=(1<<r)-1;let s="";let a=0;let o=0;for(let n=0;n<e.length;++n){o=o<<8|e[n];a+=8;while(a>r){a-=r;s+=t[i&o>>a]}}if(a){s+=t[i&o<<r-a]}if(n){while(s.length*r&7){s+="="}}return s};const rfc4648$1=e=>t=>({encode(r){return encode$5(r,t,e)},decode(r){return decode$4(r,t,e)}});var rfc4648_1={rfc4648:rfc4648$1};const{rfc4648}=rfc4648_1;const{decodeText,encodeText}=util$4;const identity$1=()=>({encode:decodeText,decode:encodeText});const constants$3=[["identity","\0",identity$1,""],["base2","0",rfc4648(1),"01"],["base8","7",rfc4648(3),"01234567"],["base10","9",src$c,"0123456789"],["base16","f",rfc4648(4),"0123456789abcdef"],["base16upper","F",rfc4648(4),"0123456789ABCDEF"],["base32hex","v",rfc4648(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",src$c,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",src$c,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",src$c,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",src$c,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]];const names$2=constants$3.reduce(((e,t)=>{e[t[0]]=new base$2(t[0],t[1],t[2],t[3]);return e}),{});const codes$1=constants$3.reduce(((e,t)=>{e[t[1]]=names$2[t[0]];return e}),{});var constants_1={names:names$2,codes:codes$1};var src$b=createCommonjsModule$2((function(e,t){const{encodeText:r,decodeText:n,concat:i}=util$4;function s(e,t){if(!t){throw new Error("requires an encoded Uint8Array")}const{name:r,codeBuf:n}=u(e);c(r,t);return i([n,t],n.length+t.length)}function a(e,t){const n=u(e);const s=r(n.encode(t));return i([n.codeBuf,s],n.codeBuf.length+s.length)}function o(e){if(e instanceof Uint8Array){e=n(e)}const t=e[0];if(["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)){e=e.toLowerCase()}const r=u(e[0]);return r.decode(e.substring(1))}function f(e){if(e instanceof Uint8Array){e=n(e)}if(Object.prototype.toString.call(e)!=="[object String]"){return false}try{const t=u(e[0]);return t.name}catch(e){return false}}function c(e,t){const r=u(e);r.decode(n(t))}function u(e){if(Object.prototype.hasOwnProperty.call(constants_1.names,e)){return constants_1.names[e]}else if(Object.prototype.hasOwnProperty.call(constants_1.codes,e)){return constants_1.codes[e]}else{throw new Error(`Unsupported encoding: ${e}`)}}function l(e){if(e instanceof Uint8Array){e=n(e)}return u(e[0])}t=e.exports=s;t.encode=a;t.decode=o;t.isEncoded=f;t.encoding=u;t.encodingFromData=l;const h=Object.freeze(constants_1.names);const d=Object.freeze(constants_1.codes);t.names=h;t.codes=d}));var encode_1$2=encode$4;var MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$4(e,t,r){t=t||[];r=r||0;var n=r;while(e>=INT$2){t[r++]=e&255|MSB$4;e/=128}while(e&MSBALL$2){t[r++]=e&255|MSB$4;e>>>=7}t[r]=e|0;encode$4.bytes=r-n+1;return t}var decode$3=read$3;var MSB$3=128,REST$3=127;function read$3(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a){read$3.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST$3)<<n:(s&REST$3)*Math.pow(2,n);n+=7}while(s>=MSB$3);read$3.bytes=i-t;return r}var N1$2=Math.pow(2,7);var N2$2=Math.pow(2,14);var N3$2=Math.pow(2,21);var N4$2=Math.pow(2,28);var N5$2=Math.pow(2,35);var N6$2=Math.pow(2,42);var N7$2=Math.pow(2,49);var N8$2=Math.pow(2,56);var N9$2=Math.pow(2,63);var length$2=function(e){return e<N1$2?1:e<N2$2?2:e<N3$2?3:e<N4$2?4:e<N5$2?5:e<N6$2?6:e<N7$2?7:e<N8$2?8:e<N9$2?9:10};var varint$3={encode:encode_1$2,decode:decode$3,encodingLength:length$2};const names$1=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants$1={names:names$1};function base$1(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var n=0;n<r.length;n++){r[n]=255}for(var i=0;i<e.length;i++){var s=e.charAt(i);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=i}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function l(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var n=0;var i=0;var s=t.length;while(i!==s&&t[i]===0){i++;r++}var a=(s-i)*u+1>>>0;var c=new Uint8Array(a);while(i!==s){var l=t[i];var h=0;for(var d=a-1;(l!==0||h<n)&&d!==-1;d--,h++){l+=256*c[d]>>>0;c[d]=l%o>>>0;l=l/o>>>0}if(l!==0){throw new Error("Non-zero carry")}n=h;i++}var p=a-n;while(p!==a&&c[p]===0){p++}var y=f.repeat(r);for(;p<a;++p){y+=e.charAt(c[p])}return y}function h(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var n=0;var i=0;while(e[t]===f){n++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var l=0;for(var h=s-1;(u!==0||l<i)&&h!==-1;h--,l++){u+=o*a[h]>>>0;a[h]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}i=l;t++}if(e[t]===" "){return}var d=s-i;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(n+(s-d));var y=n;while(d!==s){p[y++]=a[d++]}return p}function d(e){var r=h(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:d}}var src$a=base$1;var _brrp__multiformats_scope_baseX=src$a;var baseX=_brrp__multiformats_scope_baseX;var bytes=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const n=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const i=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=i;t.fromString=f;t.isBinary=o;t.toHex=n;t.toString=c}));var base=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class n{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class i{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new i({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,i,s){this.name=e;this.prefix=t;this.baseEncode=i;this.baseDecode=s;this.encoder=new r(e,t,i);this.decoder=new n(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:n})=>new a(e,t,r,n);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=baseX(r,t);return o({prefix:e,name:t,encode:n,decode:e=>bytes.coerce(i(e))})};const c=(e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e){i[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=i[e[t]];if(s===undefined){throw new SyntaxError(`Non-${n} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const n=t[t.length-1]==="=";const i=(1<<r)-1;let s="";let a=0;let o=0;for(let n=0;n<e.length;++n){o=o<<8|e[n];a+=8;while(a>r){a-=r;s+=t[i&o>>a]}}if(a){s+=t[i&o<<r-a]}if(n){while(s.length*r&7){s+="="}}return s};const l=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>o({prefix:t,name:e,encode(e){return u(e,n,r)},decode(t){return c(t,n,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=l}));var identity_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.from({prefix:"\0",name:"identity",encode:e=>bytes.toString(e),decode:e=>bytes.fromString(e)});t.identity=r}));var base2_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const n=base.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=n}));var base32_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const n=base.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const i=base.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=i;t.base32padupper=s;t.base32upper=n;t.base32z=u}));var base36_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const n=base.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=n}));var base58=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const n=base.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=n}));var base64_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const n=base.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const i=base.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=n;t.base64url=i;t.base64urlpad=s}));var base256emoji_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂");const n=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const i=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=n[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=i[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base.from({prefix:"🚀",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$1=encode$3;var MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$3(e,t,r){t=t||[];r=r||0;var n=r;while(e>=INT$1){t[r++]=e&255|MSB$2;e/=128}while(e&MSBALL$1){t[r++]=e&255|MSB$2;e>>>=7}t[r]=e|0;encode$3.bytes=r-n+1;return t}var decode$2=read$2;var MSB$1$1=128,REST$1$1=127;function read$2(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a){read$2.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST$1$1)<<n:(s&REST$1$1)*Math.pow(2,n);n+=7}while(s>=MSB$1$1);read$2.bytes=i-t;return r}var N1$1=Math.pow(2,7);var N2$1=Math.pow(2,14);var N3$1=Math.pow(2,21);var N4$1=Math.pow(2,28);var N5$1=Math.pow(2,35);var N6$1=Math.pow(2,42);var N7$1=Math.pow(2,49);var N8$1=Math.pow(2,56);var N9$1=Math.pow(2,63);var length$1=function(e){return e<N1$1?1:e<N2$1?2:e<N3$1?3:e<N4$1?4:e<N5$1?5:e<N6$1?6:e<N7$1?7:e<N8$1?8:e<N9$1?9:10};var varint$2={encode:encode_1$1,decode:decode$2,encodingLength:length$1};var _brrp_varint=varint$2;var varint$1$1=_brrp_varint;var varint_1=varint$1$1;var varint$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1.decode(e,t);return[r,varint_1.decode.bytes]};const n=(e,t,r=0)=>{varint_1.encode(e,t,r);return t};const i=e=>varint_1.encodingLength(e);t.decode=r;t.encodeTo=n;t.encodingLength=i}));var digest$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const n=varint$1.encodingLength(e);const i=n+varint$1.encodingLength(r);const a=new Uint8Array(i+r);varint$1.encodeTo(e,a,0);varint$1.encodeTo(r,a,n);a.set(t,i);return new s(e,r,t,a)};const n=e=>{const t=bytes.coerce(e);const[r,n]=varint$1.decode(t);const[i,a]=varint$1.decode(t.subarray(n));const o=t.subarray(n+a);if(o.byteLength!==i){throw new Error("Incorrect length")}return new s(r,i,o,t)};const i=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,n){this.code=e;this.size=t;this.digest=r;this.bytes=n}}t.Digest=s;t.create=r;t.decode=n;t.equals=i}));var hasher=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new n(e,t,r);class n{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$1.create(this.code,t):t.then((e=>digest$1.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=n;t.from=r}));var sha2Browser=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const n=hasher.from({name:"sha2-256",code:18,encode:r("SHA-256")});const i=hasher.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=n;t.sha512=i}));var identity_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const n="identity";const i=bytes.coerce;const s=e=>digest$1.create(r,i(e));const a={code:r,name:n,encode:i,digest:s};t.identity=a}));var raw=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const n=85;const i=e=>bytes.coerce(e);const s=e=>bytes.coerce(e);t.code=n;t.decode=s;t.encode=i;t.name=r}));var json=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const n=new TextDecoder;const i="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(n.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=i}));var cid$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,n){this.code=t;this.version=e;this.multihash=r;this.bytes=n;this.byteOffset=n.byteOffset;this.byteLength=n.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:l,byteLength:l,code:u,version:u,multihash:u,bytes:u,_baseCache:l,asCID:l})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const n=digest$1.create(e,t);return r.createV1(this.code,n)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$1.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return i(t,n,e||base58.base58btc.encoder);default:return s(t,n,e||base32_1.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:n,multihash:i,bytes:s}=e;return new r(t,n,i,s||f(t,n,i.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:n,code:i}=e;const s=digest$1.decode(n);return r.create(t,i,s)}else{return null}}static create(e,t,n){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,n,n.bytes)}}case 1:{const i=f(e,t,n.bytes);return new r(e,t,n,i)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,n]=r.decodeFirst(e);if(n.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const n=t.size-t.multihashSize;const i=bytes.coerce(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=i.subarray(t.multihashSize-t.digestSize);const a=new digest$1.Digest(t.multihashCode,t.digestSize,s,i);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=varint$1.decode(e.subarray(t));t+=n;return r};let n=r();let i=a;if(n===18){n=0;t=0}else if(n===1){i=r()}if(n!==0&&n!==1){throw new RangeError(`Invalid CID version ${n}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:n,codec:i,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[i,s]=n(e,t);const a=r.decode(s);a._baseCache.set(i,e);return a}}const n=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58.base58btc;return[base58.base58btc.prefix,r.decode(`${base58.base58btc.prefix}${e}`)]}case base58.base58btc.prefix:{const r=t||base58.base58btc;return[base58.base58btc.prefix,r.decode(e)]}case base32_1.base32.prefix:{const r=t||base32_1.base32;return[base32_1.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const i=(e,t,r)=>{const{prefix:n}=r;if(n!==base58.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const i=t.get(n);if(i==null){const i=r.encode(e).slice(1);t.set(n,i);return i}else{return i}};const s=(e,t,r)=>{const{prefix:n}=r;const i=t.get(n);if(i==null){const i=r.encode(e);t.set(n,i);return i}else{return i}};const a=112;const o=18;const f=(e,t,r)=>{const n=varint$1.encodingLength(e);const i=n+varint$1.encodingLength(t);const s=new Uint8Array(i+r.byteLength);varint$1.encodeTo(e,s,0);varint$1.encodeTo(t,s,n);s.set(r,i);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const l={writable:false,enumerable:false,configurable:false};const h="0.0.0-dev";const d=(e,t)=>{if(e.test(h)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));var src$9=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$2.CID;t.varint=varint$1;t.bytes=bytes;t.hasher=hasher;t.digest=digest$1}));var basics=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$1,...base2_1,...base8_1,...base10_1,...base16_1,...base32_1,...base36_1,...base58,...base64_1$1,...base256emoji_1};const n={...sha2Browser,...identity_1};const i={raw,json};t.CID=cid$2.CID;t.hasher=hasher;t.digest=digest$1;t.varint=varint$1;t.bytes=bytes;t.bases=r;t.codecs=i;t.hashes=n}));var asUint8array$4=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$4=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function n(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=n}));function createCodec$5(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$5=createCodec$5("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$5=createCodec$5("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$4.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$5={utf8:string$5,"utf-8":string$5,hex:basics.bases.base16,latin1:ascii$5,ascii:ascii$5,binary:ascii$5,...basics.bases};var bases$5=BASES$5;var toString_1$3=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$5[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var fromString_1$4=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$5[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));var concat_1$3=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$4.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$4.asUint8Array(r)}t.concat=r}));const{names}=constants$1;const{toString:uint8ArrayToString$2}=toString_1$3;const{fromString:uint8ArrayFromString$3}=fromString_1$4;const{concat:uint8ArrayConcat$3}=concat_1$3;const codes={};for(const e in names){const t=e;codes[names[t]]=t}Object.freeze(codes);function toHexString(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$2(e,"base16")}function fromHexString(e){return uint8ArrayFromString$3(e,"base16")}function toB58String(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$2(src$b.encode("base58btc",e)).slice(1)}function fromB58String(e){const t=e instanceof Uint8Array?uint8ArrayToString$2(e):e;return src$b.decode("z"+t)}function decode$1(e){if(!(e instanceof Uint8Array)){throw new Error("multihash must be a Uint8Array")}if(e.length<2){throw new Error("multihash too short. must be > 2 bytes.")}const t=varint$3.decode(e);if(!isValidCode(t)){throw new Error(`multihash unknown function code: 0x${t.toString(16)}`)}e=e.slice(varint$3.decode.bytes);const r=varint$3.decode(e);if(r<0){throw new Error(`multihash invalid length: ${r}`)}e=e.slice(varint$3.decode.bytes);if(e.length!==r){throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString$2(e,"base16")}`)}return{code:t,name:codes[t],length:r,digest:e}}function encode$2(e,t,r){if(!e||t===undefined){throw new Error("multihash encode requires at least two args: digest, code")}const n=coerceCode(t);if(!(e instanceof Uint8Array)){throw new Error("digest should be a Uint8Array")}if(r==null){r=e.length}if(r&&e.length!==r){throw new Error("digest length should be equal to specified length.")}const i=varint$3.encode(n);const s=varint$3.encode(r);return uint8ArrayConcat$3([i,s,e],i.length+s.length+e.length)}function coerceCode(e){let t=e;if(typeof e==="string"){if(names[e]===undefined){throw new Error(`Unrecognized hash function named: ${e}`)}t=names[e]}if(typeof t!=="number"){throw new Error(`Hash function code should be a number. Got: ${t}`)}if(codes[t]===undefined&&!isAppCode(t)){throw new Error(`Unrecognized function code: ${t}`)}return t}function isAppCode(e){return e>0&&e<16}function isValidCode(e){if(isAppCode(e)){return true}if(codes[e]){return true}return false}function validate(e){decode$1(e)}function prefix(e){validate(e);return e.subarray(0,2)}var src$8={names,codes,toHexString,fromHexString,toB58String,fromB58String,decode:decode$1,encode:encode$2,coerceCode,isAppCode,validate,prefix,isValidCode};var murmurHash3js=createCommonjsModule$2((function(e,t){(function(r,n){var i={version:"3.0.0",x86:{},x64:{},inputValidation:true};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e)){return false}for(var t=0;t<e.length;t++){if(!Number.isInteger(e[t])||e[t]<0||e[t]>255){return false}}return true}function a(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function f(e){e^=e>>>16;e=a(e,2246822507);e^=e>>>13;e=a(e,3266489909);e^=e>>>16;return e}function c(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]+t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]+t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]+t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]+t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]*t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]*t[3];r[1]+=r[2]>>>16;r[2]&=65535;r[2]+=e[3]*t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]*t[3];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[2]*t[2];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[3]*t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){t%=64;if(t===32){return[e[1],e[0]]}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]}else{t-=32;return[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]}}function h(e,t){t%=64;if(t===0){return e}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t]}else{return[e[1]<<t-32,0]}}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){e=d(e,[0,e[0]>>>1]);e=u(e,[4283543511,3981806797]);e=d(e,[0,e[0]>>>1]);e=u(e,[3301882366,444984403]);e=d(e,[0,e[0]>>>1]);return e}i.x86.hash32=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%4;var c=e.length-r;var u=t;var l=0;var h=3432918353;var d=461845907;for(var p=0;p<c;p=p+4){l=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24;l=a(l,h);l=o(l,15);l=a(l,d);u^=l;u=o(u,13);u=a(u,5)+3864292196}l=0;switch(r){case 3:l^=e[p+2]<<16;case 2:l^=e[p+1]<<8;case 1:l^=e[p];l=a(l,h);l=o(l,15);l=a(l,d);u^=l}u^=e.length;u=f(u);return u>>>0};i.x86.hash128=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%16;var c=e.length-r;var u=t;var l=t;var h=t;var d=t;var p=0;var y=0;var m=0;var g=0;var b=597399067;var v=2869860233;var w=951274213;var A=2716044179;for(var E=0;E<c;E=E+16){p=e[E]|e[E+1]<<8|e[E+2]<<16|e[E+3]<<24;y=e[E+4]|e[E+5]<<8|e[E+6]<<16|e[E+7]<<24;m=e[E+8]|e[E+9]<<8|e[E+10]<<16|e[E+11]<<24;g=e[E+12]|e[E+13]<<8|e[E+14]<<16|e[E+15]<<24;p=a(p,b);p=o(p,15);p=a(p,v);u^=p;u=o(u,19);u+=l;u=a(u,5)+1444728091;y=a(y,v);y=o(y,16);y=a(y,w);l^=y;l=o(l,17);l+=h;l=a(l,5)+197830471;m=a(m,w);m=o(m,17);m=a(m,A);h^=m;h=o(h,15);h+=d;h=a(h,5)+2530024501;g=a(g,A);g=o(g,18);g=a(g,b);d^=g;d=o(d,13);d+=u;d=a(d,5)+850148119}p=0;y=0;m=0;g=0;switch(r){case 15:g^=e[E+14]<<16;case 14:g^=e[E+13]<<8;case 13:g^=e[E+12];g=a(g,A);g=o(g,18);g=a(g,b);d^=g;case 12:m^=e[E+11]<<24;case 11:m^=e[E+10]<<16;case 10:m^=e[E+9]<<8;case 9:m^=e[E+8];m=a(m,w);m=o(m,17);m=a(m,A);h^=m;case 8:y^=e[E+7]<<24;case 7:y^=e[E+6]<<16;case 6:y^=e[E+5]<<8;case 5:y^=e[E+4];y=a(y,v);y=o(y,16);y=a(y,w);l^=y;case 4:p^=e[E+3]<<24;case 3:p^=e[E+2]<<16;case 2:p^=e[E+1]<<8;case 1:p^=e[E];p=a(p,b);p=o(p,15);p=a(p,v);u^=p}u^=e.length;l^=e.length;h^=e.length;d^=e.length;u+=l;u+=h;u+=d;l+=u;h+=u;d+=u;u=f(u);l=f(l);h=f(h);d=f(d);u+=l;u+=h;u+=d;l+=u;h+=u;d+=u;return("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)};i.x64.hash128=function(e,t){if(i.inputValidation&&!s(e)){return n}t=t||0;var r=e.length%16;var a=e.length-r;var o=[0,t];var f=[0,t];var y=[0,0];var m=[0,0];var g=[2277735313,289559509];var b=[1291169091,658871167];for(var v=0;v<a;v=v+16){y=[e[v+4]|e[v+5]<<8|e[v+6]<<16|e[v+7]<<24,e[v]|e[v+1]<<8|e[v+2]<<16|e[v+3]<<24];m=[e[v+12]|e[v+13]<<8|e[v+14]<<16|e[v+15]<<24,e[v+8]|e[v+9]<<8|e[v+10]<<16|e[v+11]<<24];y=u(y,g);y=l(y,31);y=u(y,b);o=d(o,y);o=l(o,27);o=c(o,f);o=c(u(o,[0,5]),[0,1390208809]);m=u(m,b);m=l(m,33);m=u(m,g);f=d(f,m);f=l(f,31);f=c(f,o);f=c(u(f,[0,5]),[0,944331445])}y=[0,0];m=[0,0];switch(r){case 15:m=d(m,h([0,e[v+14]],48));case 14:m=d(m,h([0,e[v+13]],40));case 13:m=d(m,h([0,e[v+12]],32));case 12:m=d(m,h([0,e[v+11]],24));case 11:m=d(m,h([0,e[v+10]],16));case 10:m=d(m,h([0,e[v+9]],8));case 9:m=d(m,[0,e[v+8]]);m=u(m,b);m=l(m,33);m=u(m,g);f=d(f,m);case 8:y=d(y,h([0,e[v+7]],56));case 7:y=d(y,h([0,e[v+6]],48));case 6:y=d(y,h([0,e[v+5]],40));case 5:y=d(y,h([0,e[v+4]],32));case 4:y=d(y,h([0,e[v+3]],24));case 3:y=d(y,h([0,e[v+2]],16));case 2:y=d(y,h([0,e[v+1]],8));case 1:y=d(y,[0,e[v]]);y=u(y,g);y=l(y,31);y=u(y,b);o=d(o,y)}o=d(o,[0,e.length]);f=d(f,[0,e.length]);o=c(o,f);f=c(f,o);o=p(o);f=p(f);o=c(o,f);f=c(f,o);return("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)};{if(e.exports){t=e.exports=i}t.murmurHash3=i}})()}));var murmurhash3jsRevisited=murmurHash3js;const crypto$2=self.crypto||self.msCrypto;const digest=async(e,t)=>{if(typeof self==="undefined"||!crypto$2){throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context")}switch(t){case"sha1":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await crypto$2.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var sha_browser={factory:e=>async t=>digest(t,e),digest,multihashing:async(e,t,r)=>{const n=await digest(e,t);return src$8.encode(n,t,r)}};const fromNumberTo32BitBuf$1=e=>{const t=new Uint8Array(4);for(let r=0;r<4;r++){t[r]=e&255;e=e>>8}return t};var utils$3={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1};var asUint8array$3=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$3=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function n(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=n}));function createCodec$4(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$4=createCodec$4("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$4=createCodec$4("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$3.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$4={utf8:string$4,"utf-8":string$4,hex:basics.bases.base16,latin1:ascii$4,ascii:ascii$4,binary:ascii$4,...basics.bases};var bases$4=BASES$4;var fromString_1$3=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$4[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(e){let t;if(e instanceof Uint8Array){t=e}else if(typeof e==="string"){const r=new TextEncoder;t=r.encode(e)}else{throw new Error(ERROR_MSG_INPUT)}return t}function toHex(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")}function uint32ToHex(e){return(4294967296+e).toString(16).substring(1)}function debugPrint(e,t,r){let n="\n"+e+" = ";for(let i=0;i<t.length;i+=2){if(r===32){n+=uint32ToHex(t[i]).toUpperCase();n+=" ";n+=uint32ToHex(t[i+1]).toUpperCase()}else if(r===64){n+=uint32ToHex(t[i+1]).toUpperCase();n+=uint32ToHex(t[i]).toUpperCase()}else throw new Error("Invalid size "+r);if(i%6===4){n+="\n"+new Array(e.length+4).join(" ")}else if(i<t.length-2){n+=" "}}console.log(n)}function testSpeed(e,t,r){let n=(new Date).getTime();const i=new Uint8Array(t);for(let e=0;e<t;e++){i[e]=e%256}const s=(new Date).getTime();console.log("Generated random input in "+(s-n)+"ms");n=s;for(let s=0;s<r;s++){const r=e(i);const s=(new Date).getTime();const a=s-n;n=s;console.log("Hashed in "+a+"ms: "+r.substring(0,20)+"...");console.log(Math.round(t/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}var util$3={normalizeInput,toHex,debugPrint,testSpeed};function ADD64AA(e,t,r){const n=e[t]+e[r];let i=e[t+1]+e[r+1];if(n>=4294967296){i++}e[t]=n;e[t+1]=i}function ADD64AC(e,t,r,n){let i=e[t]+r;if(r<0){i+=4294967296}let s=e[t+1]+n;if(i>=4294967296){s++}e[t]=i;e[t+1]=s}function B2B_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2B_G(e,t,r,n,i,s){const a=m$1[i];const o=m$1[i+1];const f=m$1[s];const c=m$1[s+1];ADD64AA(v$1,e,t);ADD64AC(v$1,e,a,o);let u=v$1[n]^v$1[e];let l=v$1[n+1]^v$1[e+1];v$1[n]=l;v$1[n+1]=u;ADD64AA(v$1,r,n);u=v$1[t]^v$1[r];l=v$1[t+1]^v$1[r+1];v$1[t]=u>>>24^l<<8;v$1[t+1]=l>>>24^u<<8;ADD64AA(v$1,e,t);ADD64AC(v$1,e,f,c);u=v$1[n]^v$1[e];l=v$1[n+1]^v$1[e+1];v$1[n]=u>>>16^l<<16;v$1[n+1]=l>>>16^u<<16;ADD64AA(v$1,r,n);u=v$1[t]^v$1[r];l=v$1[t+1]^v$1[r+1];v$1[t]=l>>>31^u<<1;v$1[t+1]=u>>>31^l<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]);const SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3];const SIGMA82=new Uint8Array(SIGMA8.map((function(e){return e*2})));const v$1=new Uint32Array(32);const m$1=new Uint32Array(32);function blake2bCompress(e,t){let r=0;for(r=0;r<16;r++){v$1[r]=e.h[r];v$1[r+16]=BLAKE2B_IV32[r]}v$1[24]=v$1[24]^e.t;v$1[25]=v$1[25]^e.t/4294967296;if(t){v$1[28]=~v$1[28];v$1[29]=~v$1[29]}for(r=0;r<32;r++){m$1[r]=B2B_GET32(e.b,4*r)}for(r=0;r<12;r++){B2B_G(0,8,16,24,SIGMA82[r*16+0],SIGMA82[r*16+1]);B2B_G(2,10,18,26,SIGMA82[r*16+2],SIGMA82[r*16+3]);B2B_G(4,12,20,28,SIGMA82[r*16+4],SIGMA82[r*16+5]);B2B_G(6,14,22,30,SIGMA82[r*16+6],SIGMA82[r*16+7]);B2B_G(0,10,20,30,SIGMA82[r*16+8],SIGMA82[r*16+9]);B2B_G(2,12,22,24,SIGMA82[r*16+10],SIGMA82[r*16+11]);B2B_G(4,14,16,26,SIGMA82[r*16+12],SIGMA82[r*16+13]);B2B_G(6,8,18,28,SIGMA82[r*16+14],SIGMA82[r*16+15])}for(r=0;r<16;r++){e.h[r]=e.h[r]^v$1[r]^v$1[r+16]}}const parameterBlock=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function blake2bInit(e,t,r,n){if(e===0||e>64){throw new Error("Illegal output length, expected 0 < length <= 64")}if(t&&t.length>64){throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64")}if(r&&r.length!==16){throw new Error("Illegal salt, expected Uint8Array with length is 16")}if(n&&n.length!==16){throw new Error("Illegal personal, expected Uint8Array with length is 16")}const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};parameterBlock.fill(0);parameterBlock[0]=e;if(t)parameterBlock[1]=t.length;parameterBlock[2]=1;parameterBlock[3]=1;if(r)parameterBlock.set(r,32);if(n)parameterBlock.set(n,48);for(let e=0;e<16;e++){i.h[e]=BLAKE2B_IV32[e]^B2B_GET32(parameterBlock,e*4)}if(t){blake2bUpdate(i,t);i.c=128}return i}function blake2bUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===128){e.t+=e.c;blake2bCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2bFinal(e){e.t+=e.c;while(e.c<128){e.b[e.c++]=0}blake2bCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)}return t}function blake2b$1(e,t,r,n,i){r=r||64;e=util$3.normalizeInput(e);if(n){n=util$3.normalizeInput(n)}if(i){i=util$3.normalizeInput(i)}const s=blake2bInit(r,t,n,i);blake2bUpdate(s,e);return blake2bFinal(s)}function blake2bHex(e,t,r,n,i){const s=blake2b$1(e,t,r,n,i);return util$3.toHex(s)}var blake2b_1={blake2b:blake2b$1,blake2bHex,blake2bInit,blake2bUpdate,blake2bFinal};function B2S_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2S_G(e,t,r,n,i,s){v[e]=v[e]+v[t]+i;v[n]=ROTR32(v[n]^v[e],16);v[r]=v[r]+v[n];v[t]=ROTR32(v[t]^v[r],12);v[e]=v[e]+v[t]+s;v[n]=ROTR32(v[n]^v[e],8);v[r]=v[r]+v[n];v[t]=ROTR32(v[t]^v[r],7)}function ROTR32(e,t){return e>>>t^e<<32-t}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]);const v=new Uint32Array(16);const m=new Uint32Array(16);function blake2sCompress(e,t){let r=0;for(r=0;r<8;r++){v[r]=e.h[r];v[r+8]=BLAKE2S_IV[r]}v[12]^=e.t;v[13]^=e.t/4294967296;if(t){v[14]=~v[14]}for(r=0;r<16;r++){m[r]=B2S_GET32(e.b,4*r)}for(r=0;r<10;r++){B2S_G(0,4,8,12,m[SIGMA[r*16+0]],m[SIGMA[r*16+1]]);B2S_G(1,5,9,13,m[SIGMA[r*16+2]],m[SIGMA[r*16+3]]);B2S_G(2,6,10,14,m[SIGMA[r*16+4]],m[SIGMA[r*16+5]]);B2S_G(3,7,11,15,m[SIGMA[r*16+6]],m[SIGMA[r*16+7]]);B2S_G(0,5,10,15,m[SIGMA[r*16+8]],m[SIGMA[r*16+9]]);B2S_G(1,6,11,12,m[SIGMA[r*16+10]],m[SIGMA[r*16+11]]);B2S_G(2,7,8,13,m[SIGMA[r*16+12]],m[SIGMA[r*16+13]]);B2S_G(3,4,9,14,m[SIGMA[r*16+14]],m[SIGMA[r*16+15]])}for(r=0;r<8;r++){e.h[r]^=v[r]^v[r+8]}}function blake2sInit(e,t){if(!(e>0&&e<=32)){throw new Error("Incorrect output length, should be in [1, 32]")}const r=t?t.length:0;if(t&&!(r>0&&r<=32)){throw new Error("Incorrect key length, should be in [1, 32]")}const n={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:e};n.h[0]^=16842752^r<<8^e;if(r>0){blake2sUpdate(n,t);n.c=64}return n}function blake2sUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===64){e.t+=e.c;blake2sCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2sFinal(e){e.t+=e.c;while(e.c<64){e.b[e.c++]=0}blake2sCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)&255}return t}function blake2s$1(e,t,r){r=r||32;e=util$3.normalizeInput(e);const n=blake2sInit(r,t);blake2sUpdate(n,e);return blake2sFinal(n)}function blake2sHex(e,t,r){const n=blake2s$1(e,t,r);return util$3.toHex(n)}var blake2s_1={blake2s:blake2s$1,blake2sHex,blake2sInit,blake2sUpdate,blake2sFinal};var blakejs={blake2b:blake2b_1.blake2b,blake2bHex:blake2b_1.blake2bHex,blake2bInit:blake2b_1.blake2bInit,blake2bUpdate:blake2b_1.blake2bUpdate,blake2bFinal:blake2b_1.blake2bFinal,blake2s:blake2s_1.blake2s,blake2sHex:blake2s_1.blake2sHex,blake2sInit:blake2s_1.blake2sInit,blake2sUpdate:blake2s_1.blake2sUpdate,blake2sFinal:blake2s_1.blake2sFinal};const minB=45569;const minS=45633;const blake2b={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal};const blake2s={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal};const makeB2Hash=(e,t)=>async r=>{const n=t.init(e,null);t.update(n,r);return t.digest(n)};var blake_1=e=>{for(let t=0;t<64;t++){e[minB+t]=makeB2Hash(t+1,blake2b)}for(let t=0;t<32;t++){e[minS+t]=makeB2Hash(t+1,blake2s)}};const{factory:sha}=sha_browser;const{fromNumberTo32BitBuf}=utils$3;const{fromString:uint8ArrayFromString$2}=fromString_1$3;const hash=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(sha3$1.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(sha3$1.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(sha3$1.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(sha3$1.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(sha3$1.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(sha3$1.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(sha3$1.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(sha3$1.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(sha3$1.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(sha3$1.keccak512.arrayBuffer(t));case"murmur3-128":return uint8ArrayFromString$2(murmurhash3jsRevisited.x64.hash128(t),"base16");case"murmur3-32":return fromNumberTo32BitBuf(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};const identity=e=>e;var crypto$1={identity,sha1:sha("sha1"),sha2256:sha("sha2-256"),sha2512:sha("sha2-512"),dblSha2256:sha("dbl-sha2-256"),sha3224:hash("sha3-224"),sha3256:hash("sha3-256"),sha3384:hash("sha3-384"),sha3512:hash("sha3-512"),shake128:hash("shake-128"),shake256:hash("shake-256"),keccak224:hash("keccak-224"),keccak256:hash("keccak-256"),keccak384:hash("keccak-384"),keccak512:hash("keccak-512"),murmur3128:hash("murmur3-128"),murmur332:hash("murmur3-32"),addBlake:blake_1};var equals_1$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}t.equals=r}));const{equals:equals$1}=equals_1$2;async function Multihashing(e,t,r){const n=await Multihashing.digest(e,t,r);return src$8.encode(n,t,r)}Multihashing.multihash=src$8;Multihashing.digest=async(e,t,r)=>{const n=Multihashing.createHash(t);const i=await n(e);return r?i.slice(0,r):i};Multihashing.createHash=function(e){if(!e){const e=errCode(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");throw e}const t=src$8.coerceCode(e);if(!Multihashing.functions[t]){throw errCode(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED")}return Multihashing.functions[t]};Multihashing.functions={0:crypto$1.identity,17:crypto$1.sha1,18:crypto$1.sha2256,19:crypto$1.sha2512,20:crypto$1.sha3512,21:crypto$1.sha3384,22:crypto$1.sha3256,23:crypto$1.sha3224,24:crypto$1.shake128,25:crypto$1.shake256,26:crypto$1.keccak224,27:crypto$1.keccak256,28:crypto$1.keccak384,29:crypto$1.keccak512,34:crypto$1.murmur3128,35:crypto$1.murmur332,86:crypto$1.dblSha2256};crypto$1.addBlake(Multihashing.functions);Multihashing.validate=async(e,t)=>{const r=await Multihashing(e,src$8.decode(t).name);return equals$1(t,r)};var src$7=Multihashing;const mergeOptions=mergeOptions$1.bind({ignoreUndefined:true});async function hamtHashFn(e){const t=await src$7(e,"murmur3-128");const r=t.slice(2,10);const n=r.length;const i=new Uint8Array(n);for(let e=0;e<n;e++){i[n-e-1]=r[e]}return i}const defaultOptions={chunker:"fixed",strategy:"balanced",rawLeaves:false,onlyHash:false,reduceSingleLeafToSelf:true,hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:false,pin:false,recursive:false,hidden:false,preload:false,timeout:undefined,hamtHashFn,hamtHashCode:34,hamtBucketBits:8};var options=function(e={}){return mergeOptions(defaultOptions,e)};var aspromise=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=true;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function i(a,o){r[n]=function e(t){if(s){s=false;if(t)o(t);else{var r=new Array(arguments.length-1),n=0;while(n<r.length)r[n++]=arguments[n];a.apply(null,r)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}var base64_1=createCommonjsModule$2((function(e,t){var r=t;r.length=function e(t){var r=t.length;if(!r)return 0;var n=0;while(--r%4>1&&t.charAt(r)==="=")++n;return Math.ceil(t.length*3)/4-n};var n=new Array(64);var i=new Array(123);for(var s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function e(t,r,i){var s=null,a=[];var o=0,f=0,c;while(r<i){var u=t[r++];switch(f){case 0:a[o++]=n[u>>2];c=(u&3)<<4;f=1;break;case 1:a[o++]=n[c|u>>4];c=(u&15)<<2;f=2;break;case 2:a[o++]=n[c|u>>6];a[o++]=n[u&63];f=0;break}if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(f){a[o++]=n[c];a[o++]=61;if(f===1)a[o++]=61}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function e(t,r,n){var s=n;var o=0,f;for(var c=0;c<t.length;){var u=t.charCodeAt(c++);if(u===61&&o>1)break;if((u=i[u])===undefined)throw Error(a);switch(o){case 0:f=u;o=1;break;case 1:r[n++]=f<<2|(u&48)>>4;f=u;o=2;break;case 2:r[n++]=(f&15)<<4|(u&60)>>2;f=u;o=3;break;case 3:r[n++]=(f&3)<<6|u;o=0;break}}if(o===1)throw Error(a);return n-s};r.test=function e(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}));var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function e(t,r,n){(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this});return this};EventEmitter.prototype.off=function e(t,r){if(t===undefined)this._listeners={};else{if(r===undefined)this._listeners[t]=[];else{var n=this._listeners[t];for(var i=0;i<n.length;)if(n[i].fn===r)n.splice(i,1);else++i}}return this};EventEmitter.prototype.emit=function e(t){var r=this._listeners[t];if(r){var n=[],i=1;for(;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this};var float_1=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3]}function s(e,n,i){t[0]=e;n[i]=r[3];n[i+1]=r[2];n[i+2]=r[1];n[i+3]=r[0]}e.writeFloatLE=n?i:s;e.writeFloatBE=n?s:i;function a(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function o(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?a:o;e.readFloatBE=n?o:a})();else(function(){function t(e,t,r,n){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|a)>>>0,r,n)}}e.writeFloatLE=t.bind(null,writeUintLE);e.writeFloatBE=t.bind(null,writeUintBE);function r(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=n&8388607;return s===255?a?NaN:i*Infinity:s===0?i*1401298464324817e-60*a:i*Math.pow(2,s-150)*(a+8388608)}e.readFloatLE=r.bind(null,readUintLE);e.readFloatBE=r.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3];n[i+4]=r[4];n[i+5]=r[5];n[i+6]=r[6];n[i+7]=r[7]}function s(e,n,i){t[0]=e;n[i]=r[7];n[i+1]=r[6];n[i+2]=r[5];n[i+3]=r[4];n[i+4]=r[3];n[i+5]=r[2];n[i+6]=r[1];n[i+7]=r[0]}e.writeDoubleLE=n?i:s;e.writeDoubleBE=n?s:i;function a(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function o(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?a:o;e.readDoubleBE=n?o:a})();else(function(){function t(e,t,r,n,i,s){var a=n<0?1:0;if(a)n=-n;if(n===0){e(0,i,s+t);e(1/n>0?0:2147483648,i,s+r)}else if(isNaN(n)){e(0,i,s+t);e(2146959360,i,s+r)}else if(n>17976931348623157e292){e(0,i,s+t);e((a<<31|2146435072)>>>0,i,s+r)}else{var o;if(n<22250738585072014e-324){o=n/5e-324;e(o>>>0,i,s+t);e((a<<31|o/4294967296)>>>0,i,s+r)}else{var f=Math.floor(Math.log(n)/Math.LN2);if(f===1024)f=1023;o=n*Math.pow(2,-f);e(o*4503599627370496>>>0,i,s+t);e((a<<31|f+1023<<20|o*1048576&1048575)>>>0,i,s+r)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4);e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function r(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r);var o=(a>>31)*2+1,f=a>>>20&2047,c=4294967296*(a&1048575)+s;return f===2047?c?NaN:o*Infinity:f===0?o*5e-324*c:o*Math.pow(2,f-1075)*(c+4503599627370496)}e.readDoubleLE=r.bind(null,readUintLE,0,4);e.readDoubleBE=r.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule$2((function(e,t){var r=t;r.length=function e(t){var r=0,n=0;for(var i=0;i<t.length;++i){n=t.charCodeAt(i);if(n<128)r+=1;else if(n<2048)r+=2;else if((n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320){++i;r+=4}else r+=3}return r};r.read=function e(t,r,n){var i=n-r;if(i<1)return"";var s=null,a=[],o=0,f;while(r<n){f=t[r++];if(f<128)a[o++]=f;else if(f>191&&f<224)a[o++]=(f&31)<<6|t[r++]&63;else if(f>239&&f<365){f=((f&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536;a[o++]=55296+(f>>10);a[o++]=56320+(f&1023)}else a[o++]=(f&15)<<12|(t[r++]&63)<<6|t[r++]&63;if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};r.write=function e(t,r,n){var i=n,s,a;for(var o=0;o<t.length;++o){s=t.charCodeAt(o);if(s<128){r[n++]=s}else if(s<2048){r[n++]=s>>6|192;r[n++]=s&63|128}else if((s&64512)===55296&&((a=t.charCodeAt(o+1))&64512)===56320){s=65536+((s&1023)<<10)+(a&1023);++o;r[n++]=s>>18|240;r[n++]=s>>12&63|128;r[n++]=s>>6&63|128;r[n++]=s&63|128}else{r[n++]=s>>12|224;r[n++]=s>>6&63|128;r[n++]=s&63|128}}return n-i}}));var pool_1=pool;function pool(e,t,r){var n=r||8192;var i=n>>>1;var s=null;var a=n;return function r(o){if(o<1||o>i)return e(o);if(a+o>n){s=e(n);a=0}var f=t.call(s,a,a+=o);if(a&7)a=(a|7)+1;return f}}var longbits=LongBits$2;function LongBits$2(e,t){this.lo=e>>>0;this.hi=t>>>0}var zero$2=LongBits$2.zero=new LongBits$2(0,0);zero$2.toNumber=function(){return 0};zero$2.zzEncode=zero$2.zzDecode=function(){return this};zero$2.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function e(t){if(t===0)return zero$2;var r=t<0;if(r)t=-t;var n=t>>>0,i=(t-n)/4294967296>>>0;if(r){i=~i>>>0;n=~n>>>0;if(++n>4294967295){n=0;if(++i>4294967295)i=0}}return new LongBits$2(n,i)};LongBits$2.from=function e(t){if(typeof t==="number")return LongBits$2.fromNumber(t);if(minimal$1.isString(t)){if(minimal$1.Long)t=minimal$1.Long.fromString(t);else return LongBits$2.fromNumber(parseInt(t,10))}return t.low||t.high?new LongBits$2(t.low>>>0,t.high>>>0):zero$2};LongBits$2.prototype.toNumber=function e(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;if(!r)n=n+1>>>0;return-(r+n*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function e(t){return minimal$1.Long?new minimal$1.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function e(t){if(t===zeroHash)return zero$2;return new LongBits$2((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)};LongBits$2.prototype.toHash=function e(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function e(){var t=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0;this.lo=(this.lo<<1^t)>>>0;return this};LongBits$2.prototype.zzDecode=function e(){var t=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0;this.hi=(this.hi>>>1^t)>>>0;return this};LongBits$2.prototype.length=function e(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10};var minimal$1=createCommonjsModule$2((function(e,t){var r=t;r.asPromise=aspromise;r.base64=base64_1;r.EventEmitter=eventemitter;r.float=float_1;r.inquire=inquire_1;r.utf8=utf8_1;r.pool=pool_1;r.LongBits=longbits;r.isNode=Boolean(typeof commonjsGlobal!=="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node);r.global=r.isNode&&commonjsGlobal||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||commonjsGlobal;r.emptyArray=Object.freeze?Object.freeze([]):[];r.emptyObject=Object.freeze?Object.freeze({}):{};r.isInteger=Number.isInteger||function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};r.isString=function e(t){return typeof t==="string"||t instanceof String};r.isObject=function e(t){return t&&typeof t==="object"};r.isset=r.isSet=function e(t,r){var n=t[r];if(n!=null&&t.hasOwnProperty(r))return typeof n!=="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0;return false};r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();r._Buffer_from=null;r._Buffer_allocUnsafe=null;r.newBuffer=function e(t){return typeof t==="number"?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):typeof Uint8Array==="undefined"?t:new Uint8Array(t)};r.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long");r.key2Re=/^true|false|0|1$/;r.key32Re=/^-?(?:0|[1-9][0-9]*)$/;r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;r.longToHash=function e(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash};r.longFromHash=function e(t,n){var i=r.LongBits.fromHash(t);if(r.Long)return r.Long.fromBits(i.lo,i.hi,n);return i.toNumber(Boolean(n))};function n(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}r.merge=n;r.lcFirst=function e(t){return t.charAt(0).toLowerCase()+t.substring(1)};function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,t);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(r)n(this,r)}(t.prototype=Object.create(Error.prototype)).constructor=t;Object.defineProperty(t.prototype,"name",{get:function(){return e}});t.prototype.toString=function e(){return this.name+": "+this.message};return t}r.newError=i;r.ProtocolError=i("ProtocolError");r.oneOfGetter=function e(t){var r={};for(var n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==undefined&&this[e[t]]!==null)return e[t]}};r.oneOfSetter=function e(t){return function(e){for(var r=0;r<t.length;++r)if(t[r]!==e)delete this[t[r]]}};r.toJSONOptions={longs:String,enums:String,bytes:String,json:true};r._configure=function(){var e=r.Buffer;if(!e){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=e.from!==Uint8Array.from&&e.from||function t(r,n){return new e(r,n)};r._Buffer_allocUnsafe=e.allocUnsafe||function t(r){return new e(r)}}}));var writer=Writer;var BufferWriter$1;var LongBits$1=minimal$1.LongBits,base64=minimal$1.base64,utf8$1=minimal$1.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var create$3=function e(){return minimal$1.Buffer?function e(){return(Writer.create=function e(){return new BufferWriter$1})()}:function e(){return new Writer}};Writer.create=create$3();Writer.alloc=function e(t){return new minimal$1.Array(t)};if(minimal$1.Array!==Array)Writer.alloc=minimal$1.pool(Writer.alloc,minimal$1.Array.prototype.subarray);Writer.prototype._push=function e(t,r,n){this.tail=this.tail.next=new Op(t,r,n);this.len+=r;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function e(t){this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len;return this};Writer.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function e(t){var r=LongBits$1.from(t);return this._push(writeVarint64,r.length(),r)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function e(t){var r=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function e(t){var r=LongBits$1.from(t);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function e(t){return this._push(minimal$1.float.writeFloatLE,4,t)};Writer.prototype.double=function e(t){return this._push(minimal$1.float.writeDoubleLE,8,t)};var writeBytes=minimal$1.Array.prototype.set?function e(t,r,n){r.set(t,n)}:function e(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};Writer.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(writeByte,1,0);if(minimal$1.isString(t)){var n=Writer.alloc(r=base64.length(t));base64.decode(t,n,0);t=n}return this.uint32(r)._push(writeBytes,r,t)};Writer.prototype.string=function e(t){var r=utf8$1.length(t);return r?this.uint32(r)._push(utf8$1.write,r,t):this._push(writeByte,1,0)};Writer.prototype.fork=function e(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function e(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function e(){var t=this.head,r=this.tail,n=this.len;this.reset().uint32(n);if(n){this.tail.next=t.next;this.tail=r;this.len+=n}return this};Writer.prototype.finish=function e(){var t=this.head.next,r=this.constructor.alloc(this.len),n=0;while(t){t.fn(t.val,r,n);n+=t.len;t=t.next}return r};Writer._configure=function(e){BufferWriter$1=e;Writer.create=create$3();BufferWriter$1._configure()};var writer_buffer=BufferWriter;(BufferWriter.prototype=Object.create(writer.prototype)).constructor=BufferWriter;function BufferWriter(){writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=minimal$1._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=minimal$1.Buffer&&minimal$1.Buffer.prototype instanceof Uint8Array&&minimal$1.Buffer.prototype.set.name==="set"?function e(t,r,n){r.set(t,n)}:function e(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};BufferWriter.prototype.bytes=function e(t){if(minimal$1.isString(t))t=minimal$1._Buffer_from(t,"base64");var r=t.length>>>0;this.uint32(r);if(r)this._push(BufferWriter.writeBytesBuffer,r,t);return this};function writeStringBuffer(e,t,r){if(e.length<40)minimal$1.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function e(t){var r=minimal$1.Buffer.byteLength(t);this.uint32(r);if(r)this._push(writeStringBuffer,r,t);return this};BufferWriter._configure();var reader=Reader;var BufferReader$1;var LongBits=minimal$1.LongBits,utf8=minimal$1.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var create_array=typeof Uint8Array!=="undefined"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")};var create$2=function e(){return minimal$1.Buffer?function e(t){return(Reader.create=function e(t){return minimal$1.Buffer.isBuffer(t)?new BufferReader$1(t):create_array(t)})(t)}:create_array};Reader.create=create$2();Reader.prototype._slice=minimal$1.Array.prototype.subarray||minimal$1.Array.prototype.slice;Reader.prototype.uint32=function e(){var t=4294967295;return function e(){t=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return t}}();Reader.prototype.int32=function e(){return this.uint32()|0};Reader.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readFloatLE(this.buf,this.pos);this.pos+=4;return t};Reader.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return t};Reader.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw indexOutOfRange(this,t);this.pos+=t;if(Array.isArray(this.buf))return this.buf.slice(r,n);return r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Reader.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader.prototype.skip=function e(t){if(typeof t==="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){BufferReader$1=e;Reader.create=create$2();BufferReader$1._configure();var t=minimal$1.Long?"toLong":"toNumber";minimal$1.merge(Reader.prototype,{int64:function e(){return readLongVarint.call(this)[t](false)},uint64:function e(){return readLongVarint.call(this)[t](true)},sint64:function e(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function e(){return readFixed64.call(this)[t](true)},sfixed64:function e(){return readFixed64.call(this)[t](false)}})};var reader_buffer=BufferReader;(BufferReader.prototype=Object.create(reader.prototype)).constructor=BufferReader;function BufferReader(e){reader.call(this,e)}BufferReader._configure=function(){if(minimal$1.Buffer)BufferReader.prototype._slice=minimal$1.Buffer.prototype.slice};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var service=Service;(Service.prototype=Object.create(minimal$1.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");minimal$1.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function e(t,r,n,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return minimal$1.asPromise(e,a,t,r,n,i);if(!a.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function e(r,i){if(r){a.emit("error",r,t);return s(r)}if(i===null){a.end(true);return undefined}if(!(i instanceof n)){try{i=n[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(r){a.emit("error",r,t);return s(r)}}a.emit("data",i,t);return s(null,i)}))}catch(e){a.emit("error",e,t);setTimeout((function(){s(e)}),0);return undefined}};Service.prototype.end=function e(t){if(this.rpcImpl){if(!t)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this};var rpc_1=createCommonjsModule$2((function(e,t){var r=t;r.Service=service}));var roots={};var indexMinimal=createCommonjsModule$2((function(e,t){var r=t;r.build="minimal";r.Writer=writer;r.BufferWriter=writer_buffer;r.Reader=reader;r.BufferReader=reader_buffer;r.util=minimal$1;r.rpc=rpc_1;r.roots=roots;r.configure=n;function n(){r.util._configure();r.Writer._configure(r.BufferWriter);r.Reader._configure(r.BufferReader)}n()}));var minimal=indexMinimal;var $Reader$1=minimal.Reader,$Writer$1=minimal.Writer,$util$1=minimal.util;var $root$1=minimal.roots["ipfs-unixfs"]||(minimal.roots["ipfs-unixfs"]={});$root$1.Data=function(){function e(e){this.blocksizes=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Type=0;e.prototype.Data=$util$1.newBuffer([]);e.prototype.filesize=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.blocksizes=$util$1.emptyArray;e.prototype.hashType=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.fanout=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.mode=0;e.prototype.mtime=null;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int32(t.Type);if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(18).bytes(t.Data);if(t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize"))r.uint32(24).uint64(t.filesize);if(t.blocksizes!=null&&t.blocksizes.length){for(var n=0;n<t.blocksizes.length;++n)r.uint32(32).uint64(t.blocksizes[n])}if(t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType"))r.uint32(40).uint64(t.hashType);if(t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout"))r.uint32(48).uint64(t.fanout);if(t.mode!=null&&Object.hasOwnProperty.call(t,"mode"))r.uint32(56).uint32(t.mode);if(t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime"))$root$1.UnixTime.encode(t.mtime,r.uint32(66).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.Data;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Type=t.int32();break;case 2:i.Data=t.bytes();break;case 3:i.filesize=t.uint64();break;case 4:if(!(i.blocksizes&&i.blocksizes.length))i.blocksizes=[];if((s&7)===2){var a=t.uint32()+t.pos;while(t.pos<a)i.blocksizes.push(t.uint64())}else i.blocksizes.push(t.uint64());break;case 5:i.hashType=t.uint64();break;case 6:i.fanout=t.uint64();break;case 7:i.mode=t.uint32();break;case 8:i.mtime=$root$1.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!i.hasOwnProperty("Type"))throw $util$1.ProtocolError("missing required 'Type'",{instance:i});return i};e.fromObject=function e(t){if(t instanceof $root$1.Data)return t;var r=new $root$1.Data;switch(t.Type){case"Raw":case 0:r.Type=0;break;case"Directory":case 1:r.Type=1;break;case"File":case 2:r.Type=2;break;case"Metadata":case 3:r.Type=3;break;case"Symlink":case 4:r.Type=4;break;case"HAMTShard":case 5:r.Type=5;break}if(t.Data!=null){if(typeof t.Data==="string")$util$1.base64.decode(t.Data,r.Data=$util$1.newBuffer($util$1.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}if(t.filesize!=null){if($util$1.Long)(r.filesize=$util$1.Long.fromValue(t.filesize)).unsigned=true;else if(typeof t.filesize==="string")r.filesize=parseInt(t.filesize,10);else if(typeof t.filesize==="number")r.filesize=t.filesize;else if(typeof t.filesize==="object")r.filesize=new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true)}if(t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");r.blocksizes=[];for(var n=0;n<t.blocksizes.length;++n){if($util$1.Long)(r.blocksizes[n]=$util$1.Long.fromValue(t.blocksizes[n])).unsigned=true;else if(typeof t.blocksizes[n]==="string")r.blocksizes[n]=parseInt(t.blocksizes[n],10);else if(typeof t.blocksizes[n]==="number")r.blocksizes[n]=t.blocksizes[n];else if(typeof t.blocksizes[n]==="object")r.blocksizes[n]=new $util$1.LongBits(t.blocksizes[n].low>>>0,t.blocksizes[n].high>>>0).toNumber(true)}}if(t.hashType!=null){if($util$1.Long)(r.hashType=$util$1.Long.fromValue(t.hashType)).unsigned=true;else if(typeof t.hashType==="string")r.hashType=parseInt(t.hashType,10);else if(typeof t.hashType==="number")r.hashType=t.hashType;else if(typeof t.hashType==="object")r.hashType=new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true)}if(t.fanout!=null){if($util$1.Long)(r.fanout=$util$1.Long.fromValue(t.fanout)).unsigned=true;else if(typeof t.fanout==="string")r.fanout=parseInt(t.fanout,10);else if(typeof t.fanout==="number")r.fanout=t.fanout;else if(typeof t.fanout==="object")r.fanout=new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true)}if(t.mode!=null){r.mode=t.mode>>>0}if(t.mtime!=null){if(typeof t.mtime!=="object")throw TypeError(".Data.mtime: object expected");r.mtime=$root$1.UnixTime.fromObject(t.mtime)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.arrays||r.defaults){n.blocksizes=[]}if(r.defaults){n.Type=r.enums===String?"Raw":0;if(r.bytes===String)n.Data="";else{n.Data=[];if(r.bytes!==Array)n.Data=$util$1.newBuffer(n.Data)}if($util$1.Long){var i=new $util$1.Long(0,0,true);n.filesize=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.filesize=r.longs===String?"0":0;if($util$1.Long){var i=new $util$1.Long(0,0,true);n.hashType=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.hashType=r.longs===String?"0":0;if($util$1.Long){var i=new $util$1.Long(0,0,true);n.fanout=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.fanout=r.longs===String?"0":0;n.mode=0;n.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")){n.Type=r.enums===String?$root$1.Data.DataType[t.Type]:t.Type}if(t.Data!=null&&t.hasOwnProperty("Data")){n.Data=r.bytes===String?$util$1.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.filesize!=null&&t.hasOwnProperty("filesize")){if(typeof t.filesize==="number")n.filesize=r.longs===String?String(t.filesize):t.filesize;else n.filesize=r.longs===String?$util$1.Long.prototype.toString.call(t.filesize):r.longs===Number?new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true):t.filesize}if(t.blocksizes&&t.blocksizes.length){n.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s){if(typeof t.blocksizes[s]==="number")n.blocksizes[s]=r.longs===String?String(t.blocksizes[s]):t.blocksizes[s];else n.blocksizes[s]=r.longs===String?$util$1.Long.prototype.toString.call(t.blocksizes[s]):r.longs===Number?new $util$1.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(true):t.blocksizes[s]}}if(t.hashType!=null&&t.hasOwnProperty("hashType")){if(typeof t.hashType==="number")n.hashType=r.longs===String?String(t.hashType):t.hashType;else n.hashType=r.longs===String?$util$1.Long.prototype.toString.call(t.hashType):r.longs===Number?new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true):t.hashType}if(t.fanout!=null&&t.hasOwnProperty("fanout")){if(typeof t.fanout==="number")n.fanout=r.longs===String?String(t.fanout):t.fanout;else n.fanout=r.longs===String?$util$1.Long.prototype.toString.call(t.fanout):r.longs===Number?new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true):t.fanout}if(t.mode!=null&&t.hasOwnProperty("mode")){n.mode=t.mode}if(t.mtime!=null&&t.hasOwnProperty("mtime")){n.mtime=$root$1.UnixTime.toObject(t.mtime,r)}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};e.DataType=function(){var e={},t=Object.create(e);t[e[0]="Raw"]=0;t[e[1]="Directory"]=1;t[e[2]="File"]=2;t[e[3]="Metadata"]=3;t[e[4]="Symlink"]=4;t[e[5]="HAMTShard"]=5;return t}();return e}();$root$1.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Seconds=$util$1.Long?$util$1.Long.fromBits(0,0,false):0;e.prototype.FractionalNanoseconds=0;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int64(t.Seconds);if(t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds"))r.uint32(21).fixed32(t.FractionalNanoseconds);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.UnixTime;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Seconds=t.int64();break;case 2:i.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!i.hasOwnProperty("Seconds"))throw $util$1.ProtocolError("missing required 'Seconds'",{instance:i});return i};e.fromObject=function e(t){if(t instanceof $root$1.UnixTime)return t;var r=new $root$1.UnixTime;if(t.Seconds!=null){if($util$1.Long)(r.Seconds=$util$1.Long.fromValue(t.Seconds)).unsigned=false;else if(typeof t.Seconds==="string")r.Seconds=parseInt(t.Seconds,10);else if(typeof t.Seconds==="number")r.Seconds=t.Seconds;else if(typeof t.Seconds==="object")r.Seconds=new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber()}if(t.FractionalNanoseconds!=null){r.FractionalNanoseconds=t.FractionalNanoseconds>>>0}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){if($util$1.Long){var i=new $util$1.Long(0,0,false);n.Seconds=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.Seconds=r.longs===String?"0":0;n.FractionalNanoseconds=0}if(t.Seconds!=null&&t.hasOwnProperty("Seconds")){if(typeof t.Seconds==="number")n.Seconds=r.longs===String?String(t.Seconds):t.Seconds;else n.Seconds=r.longs===String?$util$1.Long.prototype.toString.call(t.Seconds):r.longs===Number?new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds}if(t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")){n.FractionalNanoseconds=t.FractionalNanoseconds}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();$root$1.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.MimeType="";e.encode=function e(t,r){if(!r)r=$Writer$1.create();if(t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType"))r.uint32(10).string(t.MimeType);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root$1.Metadata;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.MimeType=t.string();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root$1.Metadata)return t;var r=new $root$1.Metadata;if(t.MimeType!=null){r.MimeType=String(t.MimeType)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){n.MimeType=""}if(t.MimeType!=null&&t.hasOwnProperty("MimeType")){n.MimeType=t.MimeType}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();var unixfs=$root$1;const{Data:PBData}=unixfs;const types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"];const dirTypes=["directory","hamt-sharded-directory"];const DEFAULT_FILE_MODE=parseInt("0644",8);const DEFAULT_DIRECTORY_MODE=parseInt("0755",8);function parseMode(e){if(e==null){return undefined}if(typeof e==="number"){return e&4095}e=e.toString();if(e.substring(0,1)==="0"){return parseInt(e,8)&4095}return parseInt(e,10)&4095}function parseMtime(e){if(e==null){return undefined}let t;if(e.secs!=null){t={secs:e.secs,nsecs:e.nsecs}}if(e.Seconds!=null){t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}}if(Array.isArray(e)){t={secs:e[0],nsecs:e[1]}}if(e instanceof Date){const r=e.getTime();const n=Math.floor(r/1e3);t={secs:n,nsecs:(r-n*1e3)*1e3}}if(!Object.prototype.hasOwnProperty.call(t,"secs")){return undefined}if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999)){throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS")}return t}class Data{static unmarshal(e){const t=PBData.decode(e);const r=PBData.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const n=new Data({type:types[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:undefined});n._originalMode=r.mode||0;return n}constructor(e={type:"file"}){const{type:t,data:r,blockSizes:n,hashType:i,fanout:s,mtime:a,mode:o}=e;if(t&&!types.includes(t)){throw errCode(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}this.type=t||"file";this.data=r;this.hashType=i;this.fanout=s;this.blockSizes=n||[];this._originalMode=0;this.mode=parseMode(o);if(a){this.mtime=parseMtime(a);if(this.mtime&&!this.mtime.nsecs){this.mtime.nsecs=0}}}set mode(e){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const t=parseMode(e);if(t!==undefined){this._mode=t}}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&dirTypes.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory()){return 0}let e=0;this.blockSizes.forEach((t=>{e+=t}));if(this.data){e+=this.data.length}return e}marshal(){let e;switch(this.type){case"raw":e=PBData.DataType.Raw;break;case"directory":e=PBData.DataType.Directory;break;case"file":e=PBData.DataType.File;break;case"metadata":e=PBData.DataType.Metadata;break;case"symlink":e=PBData.DataType.Symlink;break;case"hamt-sharded-directory":e=PBData.DataType.HAMTShard;break;default:throw errCode(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;if(!this.data||!this.data.length){t=undefined}let r;if(this.mode!=null){r=this._originalMode&4294963200|(parseMode(this.mode)||0);if(r===DEFAULT_FILE_MODE&&!this.isDirectory()){r=undefined}if(r===DEFAULT_DIRECTORY_MODE&&this.isDirectory()){r=undefined}}let n;if(this.mtime!=null){const e=parseMtime(this.mtime);if(e){n={Seconds:e.secs,FractionalNanoseconds:e.nsecs};if(n.FractionalNanoseconds===0){delete n.FractionalNanoseconds}}}const i={Type:e,Data:t,filesize:this.isDirectory()?undefined:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:r,mtime:n};return PBData.encode(i).finish()}}var src$6={UnixFS:Data,parseMode,parseMtime};var encode_1=encode$1;var MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$1(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER){encode$1.bytes=0;throw new RangeError("Could not encode varint")}t=t||[];r=r||0;var n=r;while(e>=INT){t[r++]=e&255|MSB$1;e/=128}while(e&MSBALL){t[r++]=e&255|MSB$1;e>>>=7}t[r]=e|0;encode$1.bytes=r-n+1;return t}var decode=read$1;var MSB=128,REST=127;function read$1(e,t){var r=0,t=t||0,n=0,i=t,s,a=e.length;do{if(i>=a||n>49){read$1.bytes=0;throw new RangeError("Could not decode varint")}s=e[i++];r+=n<28?(s&REST)<<n:(s&REST)*Math.pow(2,n);n+=7}while(s>=MSB);read$1.bytes=i-t;return r}var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);var length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10};var varint={encode:encode_1,decode,encodingLength:length};var asUint8array$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function n(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=n}));var concat_1$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$2.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$2.asUint8Array(r)}t.concat=r}));function createCodec$3(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$3=createCodec$3("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$3=createCodec$3("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$2.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$3={utf8:string$3,"utf-8":string$3,hex:basics.bases.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3,...basics.bases};var bases$3=BASES$3;var toString_1$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$3[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var fromString_1$2=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$3[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const{toString:uint8ArrayToString$1}=toString_1$2;const{fromString:uint8ArrayFromString$1}=fromString_1$2;var util$2={numberToUint8Array,uint8ArrayToNumber,varintUint8ArrayEncode,varintEncode:varintEncode$1};function uint8ArrayToNumber(e){return parseInt(uint8ArrayToString$1(e,"base16"),16)}function numberToUint8Array(e){let t=e.toString(16);if(t.length%2===1){t="0"+t}return uint8ArrayFromString$1(t,"base16")}function varintUint8ArrayEncode(e){return Uint8Array.from(varint.encode(uint8ArrayToNumber(e)))}function varintEncode$1(e){return Uint8Array.from(varint.encode(e))}const baseTable$1=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592});var generatedTable={baseTable:baseTable$1};const{baseTable}=generatedTable;const varintEncode=util$2.varintEncode;const nameToVarint$1={};const constantToCode$1={};const codeToName$1={};for(const e in baseTable){const t=e;const r=baseTable[t];nameToVarint$1[t]=varintEncode(r);const n=t.toUpperCase().replace(/-/g,"_");constantToCode$1[n]=r;if(!codeToName$1[r]){codeToName$1[r]=t}}Object.freeze(nameToVarint$1);Object.freeze(constantToCode$1);Object.freeze(codeToName$1);const nameToCode$1=Object.freeze(baseTable);var maps={nameToVarint:nameToVarint$1,constantToCode:constantToCode$1,nameToCode:nameToCode$1,codeToName:codeToName$1};const{concat:uint8ArrayConcat$2}=concat_1$2;const{nameToVarint,constantToCode,nameToCode,codeToName}=maps;function addPrefix(e,t){let r;if(e instanceof Uint8Array){r=util$2.varintUint8ArrayEncode(e)}else{if(nameToVarint[e]){r=nameToVarint[e]}else{throw new Error("multicodec not recognized")}}return uint8ArrayConcat$2([r,t],r.length+t.length)}function rmPrefix(e){varint.decode(e);return e.slice(varint.decode.bytes)}function getNameFromData(e){const t=varint.decode(e);const r=codeToName[t];if(r===undefined){throw new Error(`Code "${t}" not found`)}return r}function getNameFromCode(e){return codeToName[e]}function getCodeFromName(e){const t=nameToCode[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getCodeFromData(e){return varint.decode(e)}function getVarintFromName(e){const t=nameToVarint[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getVarintFromCode(e){return util$2.varintEncode(e)}function getCodec(e){return getNameFromData(e)}function getName(e){return getNameFromCode(e)}function getNumber(e){return getCodeFromName(e)}function getCode(e){return getCodeFromData(e)}function getCodeVarint(e){return getVarintFromName(e)}function getVarint(e){return Array.from(getVarintFromCode(e))}var src$5={addPrefix,rmPrefix,getNameFromData,getNameFromCode,getCodeFromName,getCodeFromData,getVarintFromName,getVarintFromCode,getCodec,getName,getNumber,getCode,getCodeVarint,getVarint,...constantToCode,nameToVarint,nameToCode,codeToName};const CIDUtil={checkCIDComponents:function(e){if(e==null){return"null values are not valid CIDs"}if(!(e.version===0||e.version===1)){return"Invalid version, must be a number equal to 1 or 0"}if(typeof e.codec!=="string"){return"codec must be string"}if(e.version===0){if(e.codec!=="dag-pb"){return"codec must be 'dag-pb' for CIDv0"}if(e.multibaseName!=="base58btc"){return"multibaseName must be 'base58btc' for CIDv0"}}if(!(e.multihash instanceof Uint8Array)){return"multihash must be a Uint8Array"}try{src$8.validate(e.multihash)}catch(e){let t=e.message;if(!t){t="Multihash validation failed"}return t}}};var cidUtil=CIDUtil;var asUint8array$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$1.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function n(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$1.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=n}));var concat_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$1.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array$1.asUint8Array(r)}t.concat=r}));function createCodec$2(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$2=createCodec$2("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$1.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$2={utf8:string$2,"utf-8":string$2,hex:basics.bases.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...basics.bases};var bases$2=BASES$2;var toString_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$2[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var equals_1$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}t.equals=r}));const{concat:uint8ArrayConcat$1}=concat_1$1;const{toString:uint8ArrayToString}=toString_1$1;const{equals:uint8ArrayEquals}=equals_1$1;const codecs=src$5.nameToCode;const codecInts=Object.keys(codecs).reduce(((e,t)=>{e[codecs[t]]=t;return e}),{});const symbol$1=Symbol.for("@ipld/js-cid/CID");class CID{constructor(e,t,r,n){Object.defineProperty(this,symbol$1,{value:true});if(CID.isCID(e)){const t=e;this.version=t.version;this.codec=t.codec;this.multihash=t.multihash;this.multibaseName=t.multibaseName||(t.version===0?"base58btc":"base32");return}if(typeof e==="string"){const t=src$b.isEncoded(e);if(t){const r=src$b.decode(e);this.version=parseInt(r[0].toString(),16);this.codec=src$5.getCodec(r.slice(1));this.multihash=src$5.rmPrefix(r.slice(1));this.multibaseName=t}else{this.version=0;this.codec="dag-pb";this.multihash=src$8.fromB58String(e);this.multibaseName="base58btc"}CID.validateCID(this);Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(t===1){const r=e;this.version=t;this.codec=src$5.getCodec(r.slice(1));this.multihash=src$5.rmPrefix(r.slice(1));this.multibaseName="base32"}else{this.version=0;this.codec="dag-pb";this.multihash=e;this.multibaseName="base58btc"}CID.validateCID(this);return}this.version=e;if(typeof t==="number"){t=codecInts[t]}this.codec=t;this.multihash=r;this.multibaseName=n||(e===0?"base58btc":"base32");CID.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0){e=this.multihash}else if(this.version===1){const t=src$5.getCodeVarint(this.codec);e=uint8ArrayConcat$1([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}else{throw new Error("unsupported version")}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=src$5.getCodeVarint(this.codec);const t=src$8.prefix(this.multihash);const r=uint8ArrayConcat$1([[this.version],e,t],1+e.byteLength+t.byteLength);return r}get code(){return codecs[this.codec]}toV0(){if(this.codec!=="dag-pb"){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}const{name:e,length:t}=src$8.decode(this.multihash);if(e!=="sha2-256"){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}if(t!==32){throw new Error("Cannot convert non 32 byte multihash CID to CIDv0")}return new CID(0,this.codec,this.multihash)}toV1(){return new CID(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName){return this.string}let t;if(this.version===0){if(e!=="base58btc"){throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()")}t=src$8.toB58String(this.multihash)}else if(this.version===1){t=uint8ArrayToString(src$b.encode(e,this.bytes))}else{throw new Error("unsupported version")}if(e===this.multibaseName){Object.defineProperty(this,"string",{value:t})}return t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&uint8ArrayEquals(this.multihash,e.multihash)}static validateCID(e){const t=cidUtil.checkCIDComponents(e);if(t){throw new Error(t)}}static isCID(e){return e instanceof CID||Boolean(e&&e[symbol$1])}}CID.codecs=codecs;var src$4=CID;const persist=async(e,t,r)=>{if(!r.codec){r.codec="dag-pb"}if(!r.cidVersion){r.cidVersion=0}if(!r.hashAlg){r.hashAlg="sha2-256"}if(r.hashAlg!=="sha2-256"){r.cidVersion=1}const n=await src$7(e,r.hashAlg);const i=new src$4(r.cidVersion,r.codec,n);if(!r.onlyHash){await t.put(e,{pin:r.pin,preload:r.preload,timeout:r.timeout,cid:i})}return i};var persist_1=persist;var $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util;var $root=minimal.roots["default"]||(minimal.roots["default"]={});$root.PBLink=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Hash=$util.newBuffer([]);e.prototype.Name="";e.prototype.Tsize=$util.Long?$util.Long.fromBits(0,0,true):0;e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Hash!=null&&Object.hasOwnProperty.call(t,"Hash"))r.uint32(10).bytes(t.Hash);if(t.Name!=null&&Object.hasOwnProperty.call(t,"Name"))r.uint32(18).string(t.Name);if(t.Tsize!=null&&Object.hasOwnProperty.call(t,"Tsize"))r.uint32(24).uint64(t.Tsize);return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root.PBLink;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 1:i.Hash=t.bytes();break;case 2:i.Name=t.string();break;case 3:i.Tsize=t.uint64();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root.PBLink)return t;var r=new $root.PBLink;if(t.Hash!=null){if(typeof t.Hash==="string")$util.base64.decode(t.Hash,r.Hash=$util.newBuffer($util.base64.length(t.Hash)),0);else if(t.Hash.length)r.Hash=t.Hash}if(t.Name!=null){r.Name=String(t.Name)}if(t.Tsize!=null){if($util.Long)(r.Tsize=$util.Long.fromValue(t.Tsize)).unsigned=true;else if(typeof t.Tsize==="string")r.Tsize=parseInt(t.Tsize,10);else if(typeof t.Tsize==="number")r.Tsize=t.Tsize;else if(typeof t.Tsize==="object")r.Tsize=new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true)}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.defaults){if(r.bytes===String)n.Hash="";else{n.Hash=[];if(r.bytes!==Array)n.Hash=$util.newBuffer(n.Hash)}n.Name="";if($util.Long){var i=new $util.Long(0,0,true);n.Tsize=r.longs===String?i.toString():r.longs===Number?i.toNumber():i}else n.Tsize=r.longs===String?"0":0}if(t.Hash!=null&&t.hasOwnProperty("Hash")){n.Hash=r.bytes===String?$util.base64.encode(t.Hash,0,t.Hash.length):r.bytes===Array?Array.prototype.slice.call(t.Hash):t.Hash}if(t.Name!=null&&t.hasOwnProperty("Name")){n.Name=t.Name}if(t.Tsize!=null&&t.hasOwnProperty("Tsize")){if(typeof t.Tsize==="number")n.Tsize=r.longs===String?String(t.Tsize):t.Tsize;else n.Tsize=r.longs===String?$util.Long.prototype.toString.call(t.Tsize):r.longs===Number?new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true):t.Tsize}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();$root.PBNode=function(){function e(e){this.Links=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Links=$util.emptyArray;e.prototype.Data=$util.newBuffer([]);e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(10).bytes(t.Data);if(t.Links!=null&&t.Links.length){for(var n=0;n<t.Links.length;++n)$root.PBLink.encode(t.Links[n],r.uint32(18).fork()).ldelim()}return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var n=r===undefined?t.len:t.pos+r,i=new $root.PBNode;while(t.pos<n){var s=t.uint32();switch(s>>>3){case 2:if(!(i.Links&&i.Links.length))i.Links=[];i.Links.push($root.PBLink.decode(t,t.uint32()));break;case 1:i.Data=t.bytes();break;default:t.skipType(s&7);break}}return i};e.fromObject=function e(t){if(t instanceof $root.PBNode)return t;var r=new $root.PBNode;if(t.Links){if(!Array.isArray(t.Links))throw TypeError(".PBNode.Links: array expected");r.Links=[];for(var n=0;n<t.Links.length;++n){if(typeof t.Links[n]!=="object")throw TypeError(".PBNode.Links: object expected");r.Links[n]=$root.PBLink.fromObject(t.Links[n])}}if(t.Data!=null){if(typeof t.Data==="string")$util.base64.decode(t.Data,r.Data=$util.newBuffer($util.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}return r};e.toObject=function e(t,r){if(!r)r={};var n={};if(r.arrays||r.defaults){n.Links=[]}if(r.defaults){if(r.bytes===String)n.Data="";else{n.Data=[];if(r.bytes!==Array)n.Data=$util.newBuffer(n.Data)}}if(t.Data!=null&&t.hasOwnProperty("Data")){n.Data=r.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.Links&&t.Links.length){n.Links=[];for(var i=0;i<t.Links.length;++i){n.Links[i]=$root.PBLink.toObject(t.Links[i],r)}}return n};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();var dag=$root;const{bases:bases$1}=basics;function createCodec$1(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$1=createCodec$1("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};var bases_1=BASES$1;function fromString(e,t="utf8"){const r=bases_1[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.decoder.decode(`${r.prefix}${e}`)}var fromString_1$1=fromString;class DAGLink$3{constructor(e,t,r){if(!r){throw new Error("A link requires a cid to point to")}this.Name=e||"";this.Tsize=t;this.Hash=new src$4(r);Object.defineProperties(this,{_nameBuf:{value:null,writable:true,enumerable:false}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){if(!this._json){this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})}return Object.assign({},this._json)}get nameAsBuffer(){if(this._nameBuf!=null){return this._nameBuf}this._nameBuf=fromString_1$1(this.Name);return this._nameBuf}}var dagLink=DAGLink$3;var stable=createCommonjsModule$2((function(e,t){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//! © 2018 Angry Bytes and contributors. MIT licensed.
(function(t,r){e.exports=r()})(commonjsGlobal,(function(){var e=function(e,r){return t(e.slice(),r)};e.inplace=function(e,n){var i=t(e,n);if(i!==e){r(i,null,e.length,e)}return e};function t(e,t){if(typeof t!=="function"){t=function(e,t){return String(e).localeCompare(t)}}var n=e.length;if(n<=1){return e}var i=new Array(n);for(var s=1;s<n;s*=2){r(e,t,s,i);var a=e;e=i;i=a}return e}var r=function(e,t,r,n){var i=e.length;var s=0;var a=r*2;var o,f,c;var u,l;for(o=0;o<i;o+=a){f=o+r;c=f+r;if(f>i)f=i;if(c>i)c=i;u=o;l=f;while(true){if(u<f&&l<c){if(t(e[u],e[l])<=0){n[s++]=e[u++]}else{n[s++]=e[l++]}}else if(u<f){n[s++]=e[u++]}else if(l<c){n[s++]=e[l++]}else{break}}}};return e}))}));function compare(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r]){return-1}if(e[r]>t[r]){return 1}}if(e.byteLength>t.byteLength){return 1}if(e.byteLength<t.byteLength){return-1}return 0}var compare_1=compare;const linkSort=(e,t)=>{const r=e.nameAsBuffer;const n=t.nameAsBuffer;return compare_1(r,n)};const sortLinks=e=>{stable.inplace(e,linkSort)};var sortLinks_1=sortLinks;function createDagLinkFromB58EncodedHash$2(e){return new dagLink(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}var util$1={createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$2};const{PBLink}=dag;const{createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$1}=util$1;const toProtoBuf=e=>{const t={};if(e.Data&&e.Data.byteLength>0){t.Data=e.Data}else{t.Data=null}if(e.Links&&e.Links.length>0){t.Links=e.Links.map((e=>({Hash:e.Hash.bytes,Name:e.Name,Tsize:e.Tsize})))}else{t.Links=null}return t};const serializeDAGNode$2=e=>encode(toProtoBuf(e));const serializeDAGNodeLike$1=(e,t=[])=>{const r={Data:e,Links:t.map((e=>createDagLinkFromB58EncodedHash$1(e)))};return encode(toProtoBuf(r))};var serialize$1={serializeDAGNode:serializeDAGNode$2,serializeDAGNodeLike:serializeDAGNodeLike$1};function encode(e){const t=minimal.Writer.create();if(e.Links!=null){for(let r=0;r<e.Links.length;r++){PBLink.encode(e.Links[r],t.uint32(18).fork()).ldelim()}}if(e.Data!=null){t.uint32(10).bytes(e.Data)}return t.finish()}const{multihash}=src$7;const codec=src$5.DAG_PB;const defaultHashAlg=multihash.names["sha2-256"];const cid$1=async(e,t={})=>{const r={cidVersion:t.cidVersion==null?1:t.cidVersion,hashAlg:t.hashAlg==null?defaultHashAlg:t.hashAlg};const n=multihash.codes[r.hashAlg];const i=await src$7(e,n);const s=src$5.getNameFromCode(codec);const a=new src$4(r.cidVersion,s,i);return a};var genCid={codec,defaultHashAlg,cid:cid$1};const toDAGLink=async(e,t={})=>{const r=e.serialize();const n=await genCid.cid(r,t);return new dagLink(t.name||"",e.size,n)};var toDagLink=toDAGLink;const asDAGLink=e=>{if(e instanceof dagLink){return e}if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e)){throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.")}return new dagLink(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)};const addLink=(e,t)=>{const r=asDAGLink(t);e.Links.push(r);sortLinks_1(e.Links)};var addLink_1=addLink;function equals(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}var equals_1=equals;const rmLink=(e,t)=>{let r=null;if(typeof t==="string"){r=e=>e.Name===t}else if(t instanceof Uint8Array){r=e=>equals_1(e.Hash.bytes,t)}else if(src$4.isCID(t)){r=e=>equals_1(e.Hash.bytes,t.bytes)}if(r){const t=e.Links;let n=0;while(n<t.length){const e=t[n];if(r(e)){t.splice(n,1)}else{n++}}}else{throw new Error("second arg needs to be a name or CID")}};var rmLink_1=rmLink;function toString$2(e,t="utf8"){const r=bases_1[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.encoder.encode(e).substring(1)}var toString_1=toString$2;const{createDagLinkFromB58EncodedHash}=util$1;const{serializeDAGNode:serializeDAGNode$1}=serialize$1;class DAGNode$5{constructor(e,t=[],r=null){if(!e){e=new Uint8Array(0)}if(typeof e==="string"){e=fromString_1$1(e)}if(!(e instanceof Uint8Array)){throw new Error("Passed 'data' is not a Uint8Array or a String!")}if(r!==null&&typeof r!=="number"){throw new Error("Passed 'serializedSize' must be a number!")}const n=t.map((e=>e instanceof dagLink?e:createDagLinkFromB58EncodedHash(e)));sortLinks_1(n);this.Data=e;this.Links=n;Object.defineProperties(this,{_serializedSize:{value:r,writable:true,enumerable:false},_size:{value:null,writable:true,enumerable:false}})}toJSON(){if(!this._json){this._json=Object.freeze({data:this.Data,links:this.Links.map((e=>e.toJSON())),size:this.size})}return Object.assign({},this._json)}toString(){return`DAGNode <data: "${toString_1(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null;this._size=null}addLink(e){this._invalidateCached();return addLink_1(this,e)}rmLink(e){this._invalidateCached();return rmLink_1(this,e)}toDAGLink(e){return toDagLink(this,e)}serialize(){const e=serializeDAGNode$1(this);this._serializedSize=e.length;return e}get size(){if(this._size==null){let e;if(e==null){this._serializedSize=this.serialize().length;e=this._serializedSize}this._size=this.Links.reduce(((e,t)=>e+t.Tsize),e)}return this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}}var dagNode=DAGNode$5;const{PBNode}=dag;const{serializeDAGNode,serializeDAGNodeLike}=serialize$1;const cid=(e,t)=>genCid.cid(e,t);const serialize=e=>{if(e instanceof dagNode){return serializeDAGNode(e)}else{return serializeDAGNodeLike(e.Data,e.Links)}};const deserialize=e=>{const t=PBNode.decode(e);const r=PBNode.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const n=r.Links.map((e=>new dagLink(e.Name,e.Tsize,e.Hash)));const i=r.Data==null?new Uint8Array(0):r.Data;return new dagNode(i,n,e.byteLength)};var util={codec:genCid.codec,defaultHashAlg:genCid.defaultHashAlg,serialize,deserialize,cid};var resolve=(e,t="/")=>{let r=util.deserialize(e);const n=t.split("/").filter(Boolean);while(n.length){const e=n.shift();if(r[e]===undefined){for(const t of r.Links){if(t.Name===e){return{value:t.Hash,remainderPath:n.join("/")}}}throw new Error(`Object has no property '${e}'`)}r=r[e];if(src$4.isCID(r)){return{value:r,remainderPath:n.join("/")}}}return{value:r,remainderPath:""}};var tree=function*(e){const t=util.deserialize(e);yield"Data";yield"Links";for(let e=0;e<t.Links.length;e++){yield`Links/${e}`;yield`Links/${e}/Name`;yield`Links/${e}/Tsize`;yield`Links/${e}/Hash`}};var resolver$1={resolve,tree};const format={DAGNode:dagNode,DAGLink:dagLink,resolver:resolver$1,util,codec:util.codec,defaultHashAlg:util.defaultHashAlg};var src$3=format;const{UnixFS:UnixFS$4}=src$6;const{DAGNode:DAGNode$4}=src$3;const dirBuilder=async(e,t,r)=>{const n=new UnixFS$4({type:"directory",mtime:e.mtime,mode:e.mode});const i=new DAGNode$4(n.marshal()).serialize();const s=await persist_1(i,t,r);const a=e.path;return{cid:s,path:a,unixfs:n,size:i.length}};var dir$1=dirBuilder;const all=async e=>{const t=[];for await(const r of e){t.push(r)}return t};var itAll=all;var flat=async function(e,t){return t(await itAll(e))};function balanced(e,t,r){return reduceToParents(e,t,r)}async function reduceToParents(e,t,r){const n=[];for await(const i of itBatch(e,r.maxChildrenPerNode)){n.push(await t(i))}if(n.length>1){return reduceToParents(n,t,r)}return n[0]}var balanced_1=balanced;var trickle=async function e(t,r,n){const i=new Root(n.layerRepeat);let s=0;let a=1;let o=i;for await(const e of itBatch(t,n.maxChildrenPerNode)){if(o.isFull()){if(o!==i){i.addChild(await o.reduce(r))}if(s&&s%n.layerRepeat===0){a++}o=new SubTree(a,n.layerRepeat,s);s++}o.append(e)}if(o&&o!==i){i.addChild(await o.reduce(r))}return i.reduce(r)};class SubTree{constructor(e,t,r=0){this.maxDepth=e;this.layerRepeat=t;this.currentDepth=1;this.iteration=r;this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data){return false}if(this.currentDepth<this.maxDepth&&this.node.maxChildren){this._addNextNodeToParent(this.node);return false}const e=this._findParent(this.node,this.currentDepth);if(e){this._addNextNodeToParent(e);return false}return true}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t);this.currentDepth=t.depth;this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];if(e.children.length){r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))}return t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(!r||r.depth===0){return}if(r.children.length===r.maxChildren||!r.maxChildren){return this._findParent(r,t)}return r}}class Root extends SubTree{constructor(e){super(0,e);this.root.depth=0;this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}const{UnixFS:UnixFS$3}=src$6;const{DAGNode:DAGNode$3}=src$3;async function*bufferImporter(e,t,r){for await(let n of e.content){yield async()=>{r.progress(n.length,e.path);let i;const s={codec:"dag-pb",cidVersion:r.cidVersion,hashAlg:r.hashAlg,onlyHash:r.onlyHash};if(r.rawLeaves){s.codec="raw";s.cidVersion=1}else{i=new UnixFS$3({type:r.leafType,data:n,mtime:e.mtime,mode:e.mode});n=new DAGNode$3(i.marshal()).serialize()}return{cid:await persist_1(n,t,s),unixfs:i,size:n.length}}}}var bufferImporter_1=bufferImporter;const{UnixFS:UnixFS$2}=src$6;const{DAGNode:DAGNode$2,DAGLink:DAGLink$2}=src$3;const mh=src$7.multihash;const dagBuilders={flat,balanced:balanced_1,trickle};async function*buildFileBatch(e,t,r){let n=-1;let i;let s;if(typeof r.bufferImporter==="function"){s=r.bufferImporter}else{s=bufferImporter_1}for await(const a of itParallelBatch(s(e,t,r),r.blockWriteConcurrency)){n++;if(n===0){i=a;continue}else if(n===1&&i){yield i;i=null}yield a}if(i){i.single=true;yield i}}const reduce=(e,t,r)=>{async function n(n){if(n.length===1&&n[0].single&&r.reduceSingleLeafToSelf){const i=n[0];if(i.cid.codec==="raw"&&(e.mtime!==undefined||e.mode!==undefined)){let{data:n}=await t.get(i.cid,r);i.unixfs=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode,data:n});const s=mh.decode(i.cid.multihash);n=new DAGNode$2(i.unixfs.marshal()).serialize();i.cid=await persist_1(n,t,{...r,codec:"dag-pb",hashAlg:s.name,cidVersion:r.cidVersion});i.size=n.length}return{cid:i.cid,path:e.path,unixfs:i.unixfs,size:i.size}}const i=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode});const s=n.filter((e=>{if(e.cid.codec==="raw"&&e.size){return true}if(e.unixfs&&!e.unixfs.data&&e.unixfs.fileSize()){return true}return Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((e=>{if(e.cid.codec==="raw"){i.addBlockSize(e.size);return new DAGLink$2("",e.size,e.cid)}if(!e.unixfs||!e.unixfs.data){i.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0)}else{i.addBlockSize(e.unixfs.data.length)}return new DAGLink$2("",e.size,e.cid)}));const a=new DAGNode$2(i.marshal(),s);const o=a.serialize();const f=await persist_1(o,t,r);return{cid:f,path:e.path,unixfs:i,size:o.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}}return n};function fileBuilder(e,t,r){const n=dagBuilders[r.strategy];if(!n){throw errCode(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY")}return n(buildFileBatch(e,t,r),reduce(e,t,r),r)}var file=fileBuilder;var byteLength_1=byteLength;var toByteArray_1=toByteArray;var fromByteArray_1=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var n=r===t?0:4-r%4;return[r,n]}function byteLength(e){var t=getLens(e);var r=t[0];var n=t[1];return(r+n)*3/4-n}function _byteLength(e,t,r){return(t+r)*3/4-r}function toByteArray(e){var t;var r=getLens(e);var n=r[0];var i=r[1];var s=new Arr(_byteLength(e,n,i));var a=0;var o=i>0?n-4:n;var f;for(f=0;f<o;f+=4){t=revLookup[e.charCodeAt(f)]<<18|revLookup[e.charCodeAt(f+1)]<<12|revLookup[e.charCodeAt(f+2)]<<6|revLookup[e.charCodeAt(f+3)];s[a++]=t>>16&255;s[a++]=t>>8&255;s[a++]=t&255}if(i===2){t=revLookup[e.charCodeAt(f)]<<2|revLookup[e.charCodeAt(f+1)]>>4;s[a++]=t&255}if(i===1){t=revLookup[e.charCodeAt(f)]<<10|revLookup[e.charCodeAt(f+1)]<<4|revLookup[e.charCodeAt(f+2)]>>2;s[a++]=t>>8&255;s[a++]=t&255}return s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){var n;var i=[];for(var s=t;s<r;s+=3){n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255);i.push(tripletToBase64(n))}return i.join("")}function fromByteArray(e){var t;var r=e.length;var n=r%3;var i=[];var s=16383;for(var a=0,o=r-n;a<o;a+=s){i.push(encodeChunk(e,a,a+s>o?o:a+s))}if(n===1){t=e[r-1];i.push(lookup[t>>2]+lookup[t<<4&63]+"==")}else if(n===2){t=(e[r-2]<<8)+e[r-1];i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")}return i.join("")}var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var read=function(e,t,r,n,i){var s,a;var o=i*8-n-1;var f=(1<<o)-1;var c=f>>1;var u=-7;var l=r?i-1:0;var h=r?-1:1;var d=e[t+l];l+=h;s=d&(1<<-u)-1;d>>=-u;u+=o;for(;u>0;s=s*256+e[t+l],l+=h,u-=8){}a=s&(1<<-u)-1;s>>=-u;u+=n;for(;u>0;a=a*256+e[t+l],l+=h,u-=8){}if(s===0){s=1-c}else if(s===f){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,n);s=s-c}return(d?-1:1)*a*Math.pow(2,s-n)};var write=function(e,t,r,n,i,s){var a,o,f;var c=s*8-i-1;var u=(1<<c)-1;var l=u>>1;var h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=n?0:s-1;var p=n?1:-1;var y=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=u}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-a))<1){a--;f*=2}if(a+l>=1){t+=h/f}else{t+=h*Math.pow(2,1-l)}if(t*f>=2){a++;f/=2}if(a+l>=u){o=0;a=u}else if(a+l>=1){o=(t*f-1)*Math.pow(2,i);a=a+l}else{o=t*Math.pow(2,l-1)*Math.pow(2,i);a=0}}for(;i>=8;e[r+d]=o&255,d+=p,o/=256,i-=8){}a=a<<i|o;c+=i;for(;c>0;e[r+d]=a&255,d+=p,a/=256,c-=8){}e[r+d-p]|=y*128};var ieee754={read,write};var buffer=createCommonjsModule$2((function(e,t){const r=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=a;t.SlowBuffer=g;t.INSPECT_MAX_BYTES=50;const n=2147483647;t.kMaxLength=n;a.TYPED_ARRAY_SUPPORT=i();if(!a.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function i(){try{const e=new Uint8Array(1);const t={foo:function(){return 42}};Object.setPrototypeOf(t,Uint8Array.prototype);Object.setPrototypeOf(e,t);return e.foo()===42}catch(e){return false}}Object.defineProperty(a.prototype,"parent",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.byteOffset}});function s(e){if(e>n){throw new RangeError('The value "'+e+'" is invalid for option "size"')}const t=new Uint8Array(e);Object.setPrototypeOf(t,a.prototype);return t}function a(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return u(e)}return o(e,t,r)}a.poolSize=8192;function o(e,t,r){if(typeof e==="string"){return l(e,t)}if(ArrayBuffer.isView(e)){return d(e)}if(e==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(ne(e,ArrayBuffer)||e&&ne(e.buffer,ArrayBuffer)){return p(e,t,r)}if(typeof SharedArrayBuffer!=="undefined"&&(ne(e,SharedArrayBuffer)||e&&ne(e.buffer,SharedArrayBuffer))){return p(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}const n=e.valueOf&&e.valueOf();if(n!=null&&n!==e){return a.from(n,t,r)}const i=y(e);if(i)return i;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return a.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}a.from=function(e,t,r){return o(e,t,r)};Object.setPrototypeOf(a.prototype,Uint8Array.prototype);Object.setPrototypeOf(a,Uint8Array);function f(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function c(e,t,r){f(e);if(e<=0){return s(e)}if(t!==undefined){return typeof r==="string"?s(e).fill(t,r):s(e).fill(t)}return s(e)}a.alloc=function(e,t,r){return c(e,t,r)};function u(e){f(e);return s(e<0?0:m(e)|0)}a.allocUnsafe=function(e){return u(e)};a.allocUnsafeSlow=function(e){return u(e)};function l(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!a.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}const r=b(e,t)|0;let n=s(r);const i=n.write(e,t);if(i!==r){n=n.slice(0,i)}return n}function h(e){const t=e.length<0?0:m(e.length)|0;const r=s(t);for(let n=0;n<t;n+=1){r[n]=e[n]&255}return r}function d(e){if(ne(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}function p(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}let n;if(t===undefined&&r===undefined){n=new Uint8Array(e)}else if(r===undefined){n=new Uint8Array(e,t)}else{n=new Uint8Array(e,t,r)}Object.setPrototypeOf(n,a.prototype);return n}function y(e){if(a.isBuffer(e)){const t=m(e.length)|0;const r=s(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||ie(e.length)){return s(0)}return h(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return h(e.data)}}function m(e){if(e>=n){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+n.toString(16)+" bytes")}return e|0}function g(e){if(+e!=e){e=0}return a.alloc(+e)}a.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==a.prototype};a.compare=function e(t,r){if(ne(t,Uint8Array))t=a.from(t,t.offset,t.byteLength);if(ne(r,Uint8Array))r=a.from(r,r.offset,r.byteLength);if(!a.isBuffer(t)||!a.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;let n=t.length;let i=r.length;for(let e=0,s=Math.min(n,i);e<s;++e){if(t[e]!==r[e]){n=t[e];i=r[e];break}}if(n<i)return-1;if(i<n)return 1;return 0};a.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};a.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return a.alloc(0)}let n;if(r===undefined){r=0;for(n=0;n<t.length;++n){r+=t[n].length}}const i=a.allocUnsafe(r);let s=0;for(n=0;n<t.length;++n){let e=t[n];if(ne(e,Uint8Array)){if(s+e.length>i.length){if(!a.isBuffer(e))e=a.from(e);e.copy(i,s)}else{Uint8Array.prototype.set.call(i,e,s)}}else if(!a.isBuffer(e)){throw new TypeError('"list" argument must be an Array of Buffers')}else{e.copy(i,s)}s+=e.length}return i};function b(e,t){if(a.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||ne(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}const r=e.length;const n=arguments.length>2&&arguments[2]===true;if(!n&&r===0)return 0;let i=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return te(e).length;default:if(i){return n?-1:Q(e).length}t=(""+t).toLowerCase();i=true}}}a.byteLength=b;function v(e,t,r){let n=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return N(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();n=true}}}a.prototype._isBuffer=true;function w(e,t,r){const n=e[t];e[t]=e[r];e[r]=n}a.prototype.swap16=function e(){const t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(let e=0;e<t;e+=2){w(this,e,e+1)}return this};a.prototype.swap32=function e(){const t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(let e=0;e<t;e+=4){w(this,e,e+3);w(this,e+1,e+2)}return this};a.prototype.swap64=function e(){const t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(let e=0;e<t;e+=8){w(this,e,e+7);w(this,e+1,e+6);w(this,e+2,e+5);w(this,e+3,e+4)}return this};a.prototype.toString=function e(){const t=this.length;if(t===0)return"";if(arguments.length===0)return x(this,0,t);return v.apply(this,arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function e(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return a.compare(this,t)===0};a.prototype.inspect=function e(){let r="";const n=t.INSPECT_MAX_BYTES;r=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim();if(this.length>n)r+=" ... ";return"<Buffer "+r+">"};if(r){a.prototype[r]=a.prototype.inspect}a.prototype.compare=function e(t,r,n,i,s){if(ne(t,Uint8Array)){t=a.from(t,t.offset,t.byteLength)}if(!a.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(n===undefined){n=t?t.length:0}if(i===undefined){i=0}if(s===undefined){s=this.length}if(r<0||n>t.length||i<0||s>this.length){throw new RangeError("out of range index")}if(i>=s&&r>=n){return 0}if(i>=s){return-1}if(r>=n){return 1}r>>>=0;n>>>=0;i>>>=0;s>>>=0;if(this===t)return 0;let o=s-i;let f=n-r;const c=Math.min(o,f);const u=this.slice(i,s);const l=t.slice(r,n);for(let e=0;e<c;++e){if(u[e]!==l[e]){o=u[e];f=l[e];break}}if(o<f)return-1;if(f<o)return 1;return 0};function A(e,t,r,n,i){if(e.length===0)return-1;if(typeof r==="string"){n=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(ie(r)){r=i?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(i)return-1;else r=e.length-1}else if(r<0){if(i)r=0;else return-1}if(typeof t==="string"){t=a.from(t,n)}if(a.isBuffer(t)){if(t.length===0){return-1}return E(e,t,r,n,i)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(i){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return E(e,[t],r,n,i)}throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,n,i){let s=1;let a=e.length;let o=t.length;if(n!==undefined){n=String(n).toLowerCase();if(n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;a/=2;o/=2;r/=2}}function f(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}let c;if(i){let n=-1;for(c=r;c<a;c++){if(f(e,c)===f(t,n===-1?0:c-n)){if(n===-1)n=c;if(c-n+1===o)return n*s}else{if(n!==-1)c-=c-n;n=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){let r=true;for(let n=0;n<o;n++){if(f(e,c+n)!==f(t,n)){r=false;break}}if(r)return c}}return-1}a.prototype.includes=function e(t,r,n){return this.indexOf(t,r,n)!==-1};a.prototype.indexOf=function e(t,r,n){return A(this,t,r,n,true)};a.prototype.lastIndexOf=function e(t,r,n){return A(this,t,r,n,false)};function _(e,t,r,n){r=Number(r)||0;const i=e.length-r;if(!n){n=i}else{n=Number(n);if(n>i){n=i}}const s=t.length;if(n>s/2){n=s/2}let a;for(a=0;a<n;++a){const n=parseInt(t.substr(a*2,2),16);if(ie(n))return a;e[r+a]=n}return a}function S(e,t,r,n){return re(Q(t,e.length-r),e,r,n)}function $(e,t,r,n){return re(Z(t),e,r,n)}function T(e,t,r,n){return re(te(t),e,r,n)}function C(e,t,r,n){return re(ee(t,e.length-r),e,r,n)}a.prototype.write=function e(t,r,n,i){if(r===undefined){i="utf8";n=this.length;r=0}else if(n===undefined&&typeof r==="string"){i=r;n=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(n)){n=n>>>0;if(i===undefined)i="utf8"}else{i=n;n=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}const s=this.length-r;if(n===undefined||n>s)n=s;if(t.length>0&&(n<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!i)i="utf8";let a=false;for(;;){switch(i){case"hex":return _(this,t,r,n);case"utf8":case"utf-8":return S(this,t,r,n);case"ascii":case"latin1":case"binary":return $(this,t,r,n);case"base64":return T(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase();a=true}}};a.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,t,r){if(t===0&&r===e.length){return base64Js.fromByteArray(e)}else{return base64Js.fromByteArray(e.slice(t,r))}}function x(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;while(i<r){const t=e[i];let s=null;let a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,f;switch(a){case 1:if(t<128){s=t}break;case 2:r=e[i+1];if((r&192)===128){f=(t&31)<<6|r&63;if(f>127){s=f}}break;case 3:r=e[i+1];n=e[i+2];if((r&192)===128&&(n&192)===128){f=(t&15)<<12|(r&63)<<6|n&63;if(f>2047&&(f<55296||f>57343)){s=f}}break;case 4:r=e[i+1];n=e[i+2];o=e[i+3];if((r&192)===128&&(n&192)===128&&(o&192)===128){f=(t&15)<<18|(r&63)<<12|(n&63)<<6|o&63;if(f>65535&&f<1114112){s=f}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;n.push(s>>>10&1023|55296);s=56320|s&1023}n.push(s);i+=a}return k(n)}const I=4096;function k(e){const t=e.length;if(t<=I){return String.fromCharCode.apply(String,e)}let r="";let n=0;while(n<t){r+=String.fromCharCode.apply(String,e.slice(n,n+=I))}return r}function N(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i){n+=String.fromCharCode(e[i]&127)}return n}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i){n+=String.fromCharCode(e[i])}return n}function M(e,t,r){const n=e.length;if(!t||t<0)t=0;if(!r||r<0||r>n)r=n;let i="";for(let n=t;n<r;++n){i+=se[e[n]]}return i}function O(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2){i+=String.fromCharCode(n[e]+n[e+1]*256)}return i}a.prototype.slice=function e(t,r){const n=this.length;t=~~t;r=r===undefined?n:~~r;if(t<0){t+=n;if(t<0)t=0}else if(t>n){t=n}if(r<0){r+=n;if(r<0)r=0}else if(r>n){r=n}if(r<t)r=t;const i=this.subarray(t,r);Object.setPrototypeOf(i,a.prototype);return i};function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);let i=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}return i};a.prototype.readUintBE=a.prototype.readUIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n){B(t,r,this.length)}let i=this[t+--r];let s=1;while(r>0&&(s*=256)){i+=this[t+--r]*s}return i};a.prototype.readUint8=a.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);return this[t]};a.prototype.readUint16LE=a.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]|this[t+1]<<8};a.prototype.readUint16BE=a.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);return this[t]<<8|this[t+1]};a.prototype.readUint32LE=a.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};a.prototype.readUint32BE=a.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};a.prototype.readBigUInt64LE=ae((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Y(t,this.length-8)}const i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24;const s=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))}));a.prototype.readBigUInt64BE=ae((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Y(t,this.length-8)}const i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t];const s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)}));a.prototype.readIntLE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);let i=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){i+=this[t+a]*s}s*=128;if(i>=s)i-=Math.pow(2,8*r);return i};a.prototype.readIntBE=function e(t,r,n){t=t>>>0;r=r>>>0;if(!n)B(t,r,this.length);let i=r;let s=1;let a=this[t+--i];while(i>0&&(s*=256)){a+=this[t+--i]*s}s*=128;if(a>=s)a-=Math.pow(2,8*r);return a};a.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)B(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};a.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};a.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)B(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};a.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};a.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};a.prototype.readBigInt64LE=ae((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Y(t,this.length-8)}const i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}));a.prototype.readBigInt64BE=ae((function e(t){t=t>>>0;X(t,"offset");const r=this[t];const n=this[t+7];if(r===undefined||n===undefined){Y(t,this.length-8)}const i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}));a.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return ieee754.read(this,t,true,23,4)};a.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)B(t,4,this.length);return ieee754.read(this,t,false,23,4)};a.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return ieee754.read(this,t,true,52,8)};a.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)B(t,8,this.length);return ieee754.read(this,t,false,52,8)};function D(e,t,r,n,i,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){const e=Math.pow(2,8*n)-1;D(this,t,r,n,e,0)}let s=1;let a=0;this[r]=t&255;while(++a<n&&(s*=256)){this[r+a]=t/s&255}return r+n};a.prototype.writeUintBE=a.prototype.writeUIntBE=function e(t,r,n,i){t=+t;r=r>>>0;n=n>>>0;if(!i){const e=Math.pow(2,8*n)-1;D(this,t,r,n,e,0)}let s=n-1;let a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255}return r+n};a.prototype.writeUint8=a.prototype.writeUInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,1,255,0);this[r]=t&255;return r+1};a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function U(e,t,r,n,i){W(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;return r}function L(e,t,r,n,i){W(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s;s=s>>8;e[r+6]=s;s=s>>8;e[r+5]=s;s=s>>8;e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r+3]=a;a=a>>8;e[r+2]=a;a=a>>8;e[r+1]=a;a=a>>8;e[r]=a;return r+8}a.prototype.writeBigUInt64LE=ae((function e(t,r=0){return U(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeBigUInt64BE=ae((function e(t,r=0){return L(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeIntLE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){const e=Math.pow(2,8*n-1);D(this,t,r,n,e-1,-e)}let s=0;let a=1;let o=0;this[r]=t&255;while(++s<n&&(a*=256)){if(t<0&&o===0&&this[r+s-1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+n};a.prototype.writeIntBE=function e(t,r,n,i){t=+t;r=r>>>0;if(!i){const e=Math.pow(2,8*n-1);D(this,t,r,n,e-1,-e)}let s=n-1;let a=1;let o=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&o===0&&this[r+s+1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+n};a.prototype.writeInt8=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};a.prototype.writeInt16LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};a.prototype.writeInt16BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};a.prototype.writeInt32LE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};a.prototype.writeInt32BE=function e(t,r,n){t=+t;r=r>>>0;if(!n)D(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};a.prototype.writeBigInt64LE=ae((function e(t,r=0){return U(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));a.prototype.writeBigInt64BE=ae((function e(t,r=0){return L(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function F(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,n,i){t=+t;r=r>>>0;if(!i){F(e,t,r,4)}ieee754.write(e,t,r,n,23,4);return r+4}a.prototype.writeFloatLE=function e(t,r,n){return j(this,t,r,true,n)};a.prototype.writeFloatBE=function e(t,r,n){return j(this,t,r,false,n)};function H(e,t,r,n,i){t=+t;r=r>>>0;if(!i){F(e,t,r,8)}ieee754.write(e,t,r,n,52,8);return r+8}a.prototype.writeDoubleLE=function e(t,r,n){return H(this,t,r,true,n)};a.prototype.writeDoubleBE=function e(t,r,n){return H(this,t,r,false,n)};a.prototype.copy=function e(t,r,n,i){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!n)n=0;if(!i&&i!==0)i=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(i>0&&i<n)i=n;if(i===n)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");if(i>this.length)i=this.length;if(t.length-r<i-n){i=t.length-r+n}const s=i-n;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,n,i)}else{Uint8Array.prototype.set.call(t,this.subarray(n,i),r)}return s};a.prototype.fill=function e(t,r,n,i){if(typeof t==="string"){if(typeof r==="string"){i=r;r=0;n=this.length}else if(typeof n==="string"){i=n;n=this.length}if(i!==undefined&&typeof i!=="string"){throw new TypeError("encoding must be a string")}if(typeof i==="string"&&!a.isEncoding(i)){throw new TypeError("Unknown encoding: "+i)}if(t.length===1){const e=t.charCodeAt(0);if(i==="utf8"&&e<128||i==="latin1"){t=e}}}else if(typeof t==="number"){t=t&255}else if(typeof t==="boolean"){t=Number(t)}if(r<0||this.length<r||this.length<n){throw new RangeError("Out of range index")}if(n<=r){return this}r=r>>>0;n=n===undefined?this.length:n>>>0;if(!t)t=0;let s;if(typeof t==="number"){for(s=r;s<n;++s){this[s]=t}}else{const e=a.isBuffer(t)?t:a.from(t,i);const o=e.length;if(o===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(s=0;s<n-r;++s){this[s+r]=e[s%o]}}return this};const K={};function G(e,t,r){K[e]=class n extends r{constructor(){super();Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:true,configurable:true});this.name=`${this.name} [${e}]`;delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:e,writable:true})}toString(){return`${this.name} [${e}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){if(e){return`${e} is outside of buffer bounds`}return"Attempt to access memory outside buffer bounds"}),RangeError);G("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError);G("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`;let i=r;if(Number.isInteger(r)&&Math.abs(r)>2**32){i=V(String(r))}else if(typeof r==="bigint"){i=String(r);if(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32))){i=V(i)}i+="n"}n+=` It must be ${t}. Received ${i}`;return n}),RangeError);function V(e){let t="";let r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3){t=`_${e.slice(r-3,r)}${t}`}return`${e.slice(0,r)}${t}`}function z(e,t,r){X(t,"offset");if(e[t]===undefined||e[t+r]===undefined){Y(t,e.length-(r+1))}}function W(e,t,r,n,i,s){if(e>r||e<t){const n=typeof t==="bigint"?"n":"";let i;if(s>3){if(t===0||t===BigInt(0)){i=`>= 0${n} and < 2${n} ** ${(s+1)*8}${n}`}else{i=`>= -(2${n} ** ${(s+1)*8-1}${n}) and < 2 ** `+`${(s+1)*8-1}${n}`}}else{i=`>= ${t}${n} and <= ${r}${n}`}throw new K.ERR_OUT_OF_RANGE("value",i,e)}z(n,i,s)}function X(e,t){if(typeof e!=="number"){throw new K.ERR_INVALID_ARG_TYPE(t,"number",e)}}function Y(e,t,r){if(Math.floor(e)!==e){X(e,r);throw new K.ERR_OUT_OF_RANGE(r||"offset","an integer",e)}if(t<0){throw new K.ERR_BUFFER_OUT_OF_BOUNDS}throw new K.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}const J=/[^+/0-9A-Za-z-_]/g;function q(e){e=e.split("=")[0];e=e.trim().replace(J,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Q(e,t){t=t||Infinity;let r;const n=e.length;let i=null;const s=[];for(let a=0;a<n;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!i){if(r>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(a+1===n){if((t-=3)>-1)s.push(239,191,189);continue}i=r;continue}if(r<56320){if((t-=3)>-1)s.push(239,191,189);i=r;continue}r=(i-55296<<10|r-56320)+65536}else if(i){if((t-=3)>-1)s.push(239,191,189)}i=null;if(r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return s}function Z(e){const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function ee(e,t){let r,n,i;const s=[];for(let a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);n=r>>8;i=r%256;s.push(i);s.push(n)}return s}function te(e){return base64Js.toByteArray(q(e))}function re(e,t,r,n){let i;for(i=0;i<n;++i){if(i+r>=t.length||i>=e.length)break;t[i+r]=e[i]}return i}function ne(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function ie(e){return e!==e}const se=function(){const e="0123456789abcdef";const t=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let i=0;i<16;++i){t[n+i]=e[r]+e[i]}}return t}();function ae(e){return typeof BigInt==="undefined"?oe:e}function oe(){throw new Error("BigInt not supported")}}));const{Buffer:Buffer$1}=buffer;const symbol=Symbol.for("BufferList");function BufferList(e){if(!(this instanceof BufferList)){return new BufferList(e)}BufferList._init.call(this,e)}BufferList._init=function e(t){Object.defineProperty(this,symbol,{value:true});this._bufs=[];this.length=0;if(t){this.append(t)}};BufferList.prototype._new=function e(t){return new BufferList(t)};BufferList.prototype._offset=function e(t){if(t===0){return[0,0]}let r=0;for(let e=0;e<this._bufs.length;e++){const n=r+this._bufs[e].length;if(t<n||e===this._bufs.length-1){return[e,t-r]}r=n}};BufferList.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++){r+=this._bufs[e].length}return r};BufferList.prototype.get=function e(t){if(t>this.length||t<0){return undefined}const r=this._offset(t);return this._bufs[r[0]][r[1]]};BufferList.prototype.slice=function e(t,r){if(typeof t==="number"&&t<0){t+=this.length}if(typeof r==="number"&&r<0){r+=this.length}return this.copy(null,0,t,r)};BufferList.prototype.copy=function e(t,r,n,i){if(typeof n!=="number"||n<0){n=0}if(typeof i!=="number"||i>this.length){i=this.length}if(n>=this.length){return t||Buffer$1.alloc(0)}if(i<=0){return t||Buffer$1.alloc(0)}const e=!!t;const s=this._offset(n);const a=i-n;let o=a;let f=e&&r||0;let c=s[1];if(n===0&&i===this.length){if(!e){return this._bufs.length===1?this._bufs[0]:Buffer$1.concat(this._bufs,this.length)}for(let e=0;e<this._bufs.length;e++){this._bufs[e].copy(t,f);f+=this._bufs[e].length}return t}if(o<=this._bufs[s[0]].length-c){return e?this._bufs[s[0]].copy(t,r,c,c+o):this._bufs[s[0]].slice(c,c+o)}if(!e){t=Buffer$1.allocUnsafe(a)}for(let e=s[0];e<this._bufs.length;e++){const r=this._bufs[e].length-c;if(o>r){this._bufs[e].copy(t,f,c);f+=r}else{this._bufs[e].copy(t,f,c,c+o);f+=r;break}o-=r;if(c){c=0}}if(t.length>f)return t.slice(0,f);return t};BufferList.prototype.shallowSlice=function e(t,r){t=t||0;r=typeof r!=="number"?this.length:r;if(t<0){t+=this.length}if(r<0){r+=this.length}if(t===r){return this._new()}const n=this._offset(t);const i=this._offset(r);const s=this._bufs.slice(n[0],i[0]+1);if(i[1]===0){s.pop()}else{s[s.length-1]=s[s.length-1].slice(0,i[1])}if(n[1]!==0){s[0]=s[0].slice(n[1])}return this._new(s)};BufferList.prototype.toString=function e(t,r,n){return this.slice(r,n).toString(t)};BufferList.prototype.consume=function e(t){t=Math.trunc(t);if(Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(t>=this._bufs[0].length){t-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(t);this.length-=t;break}}return this};BufferList.prototype.duplicate=function e(){const t=this._new();for(let e=0;e<this._bufs.length;e++){t.append(this._bufs[e])}return t};BufferList.prototype.append=function e(t){if(t==null){return this}if(t.buffer){this._appendBuffer(Buffer$1.from(t.buffer,t.byteOffset,t.byteLength))}else if(Array.isArray(t)){for(let e=0;e<t.length;e++){this.append(t[e])}}else if(this._isBufferList(t)){for(let e=0;e<t._bufs.length;e++){this.append(t._bufs[e])}}else{if(typeof t==="number"){t=t.toString()}this._appendBuffer(Buffer$1.from(t))}return this};BufferList.prototype._appendBuffer=function e(t){this._bufs.push(t);this.length+=t.length};BufferList.prototype.indexOf=function(e,t,r){if(r===undefined&&typeof t==="string"){r=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=Buffer$1.from([e])}else if(typeof e==="string"){e=Buffer$1.from(e,r)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)}else if(!Buffer$1.isBuffer(e)){e=Buffer$1.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const n=this._offset(t);let i=n[0];let s=n[1];for(;i<this._bufs.length;i++){const t=this._bufs[i];while(s<t.length){const r=t.length-s;if(r>=e.length){const r=t.indexOf(e,s);if(r!==-1){return this._reverseOffset([i,r])}s=t.length-e.length+1}else{const t=this._reverseOffset([i,s]);if(this._match(t,e)){return t}s++}}s=0}return-1};BufferList.prototype._match=function(e,t){if(this.length-e<t.length){return false}for(let r=0;r<t.length;r++){if(this.get(e+r)!==t[r]){return false}}return true};(function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e){(function(t){if(e[t]===null){BufferList.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}}else{BufferList.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}})(t)}})();BufferList.prototype._isBufferList=function e(t){return t instanceof BufferList||BufferList.isBufferList(t)};BufferList.isBufferList=function e(t){return t!=null&&t[symbol]};var BufferList_1=BufferList;class Rabin{constructor(e,t=12,r=8*1024,n=32*1024,i=64,s){this.bits=t;this.min=r;this.max=n;this.asModule=e;this.rabin=new e.Rabin(t,r,n,i,s);this.polynomial=s}fingerprint(e){const{__retain:t,__release:r,__allocArray:n,__getInt32Array:i,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule;const o=new Int32Array(Math.ceil(e.length/this.min));const f=t(n(s,o));const c=t(n(a,e));const u=this.rabin.fingerprint(c,f);const l=i(u);r(c);r(f);const h=l.indexOf(0);return h>=0?l.subarray(0,h):l}}var rabin$1=Rabin;const ID_OFFSET=-8;const SIZE_OFFSET=-4;const ARRAYBUFFER_ID=0;const STRING_ID=1;const ARRAYBUFFERVIEW=1<<0;const ARRAY=1<<1;const VAL_ALIGN_OFFSET=5;const VAL_SIGNED=1<<10;const VAL_FLOAT=1<<11;const VAL_MANAGED=1<<13;const ARRAYBUFFERVIEW_BUFFER_OFFSET=0;const ARRAYBUFFERVIEW_DATASTART_OFFSET=4;const ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8;const ARRAYBUFFERVIEW_SIZE=12;const ARRAY_LENGTH_OFFSET=12;const ARRAY_SIZE=16;const BIGINT=typeof BigUint64Array!=="undefined";const THIS=Symbol();const CHUNKSIZE=1024;function getStringImpl(e,t){const r=new Uint32Array(e);const n=new Uint16Array(e);var i=r[t+SIZE_OFFSET>>>2]>>>1;var s=t>>>1;if(i<=CHUNKSIZE)return String.fromCharCode.apply(String,n.subarray(s,s+i));const a=[];do{const e=n[s+CHUNKSIZE-1];const t=e>=55296&&e<56320?CHUNKSIZE-1:CHUNKSIZE;a.push(String.fromCharCode.apply(String,n.subarray(s,s+=t)));i-=t}while(i>CHUNKSIZE);return a.join("")+String.fromCharCode.apply(String,n.subarray(s,s+i))}function preInstantiate(e){const t={};function r(e,t){if(!e)return"<yet unknown>";return getStringImpl(e.buffer,t)}const n=e.env=e.env||{};n.abort=n.abort||function e(i,s,a,o){const f=t.memory||n.memory;throw Error("abort: "+r(f,i)+" at "+r(f,s)+":"+a+":"+o)};n.trace=n.trace||function e(i,s){const a=t.memory||n.memory;console.log("trace: "+r(a,i)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))};e.Math=e.Math||Math;e.Date=e.Date||Date;return t}function postInstantiate(e,t){const r=t.exports;const n=r.memory;const i=r.table;const s=r["__alloc"];const a=r["__retain"];const o=r["__rtti_base"]||~0;function f(e){const t=new Uint32Array(n.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2]}function c(e){const t=new Uint32Array(n.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2+1]}function u(e){return 31-Math.clz32(e>>>VAL_ALIGN_OFFSET&31)}function l(e){const t=e.length;const r=s(t<<1,STRING_ID);const i=new Uint16Array(n.buffer);for(var a=0,o=r>>>1;a<t;++a)i[o+a]=e.charCodeAt(a);return r}e.__allocString=l;function h(e){const t=n.buffer;const r=new Uint32Array(t)[e+ID_OFFSET>>>2];if(r!==STRING_ID)throw Error("not a string: "+e);return getStringImpl(t,e)}e.__getString=h;function d(e,t,r){const i=n.buffer;if(r){switch(e){case 2:return new Float32Array(i);case 3:return new Float64Array(i)}}else{switch(e){case 0:return new(t?Int8Array:Uint8Array)(i);case 1:return new(t?Int16Array:Uint16Array)(i);case 2:return new(t?Int32Array:Uint32Array)(i);case 3:return new(t?BigInt64Array:BigUint64Array)(i)}}throw Error("unsupported align: "+e)}function p(e,t){const r=f(e);if(!(r&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+e+" @ "+r);const i=u(r);const o=t.length;const c=s(o<<i,ARRAYBUFFER_ID);const l=s(r&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,e);const h=new Uint32Array(n.buffer);h[l+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=a(c);h[l+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=c;h[l+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=o<<i;if(r&ARRAY)h[l+ARRAY_LENGTH_OFFSET>>>2]=o;const p=d(i,r&VAL_SIGNED,r&VAL_FLOAT);if(r&VAL_MANAGED){for(let e=0;e<o;++e)p[(c>>>i)+e]=a(t[e])}else{p.set(t,c>>>i)}return l}e.__allocArray=p;function y(e){const t=new Uint32Array(n.buffer);const r=t[e+ID_OFFSET>>>2];const i=f(r);if(!(i&ARRAYBUFFERVIEW))throw Error("not an array: "+r);const s=u(i);var a=t[e+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const o=i&ARRAY?t[e+ARRAY_LENGTH_OFFSET>>>2]:t[a+SIZE_OFFSET>>>2]>>>s;return d(s,i&VAL_SIGNED,i&VAL_FLOAT).subarray(a>>>=s,a+o)}e.__getArrayView=y;function m(e){const t=y(e);const r=t.length;const n=new Array(r);for(let e=0;e<r;e++)n[e]=t[e];return n}e.__getArray=m;function g(e){const t=n.buffer;const r=new Uint32Array(t)[e+SIZE_OFFSET>>>2];return t.slice(e,e+r)}e.__getArrayBuffer=g;function b(e,t,r){return new e(v(e,t,r))}function v(e,t,r){const i=n.buffer;const s=new Uint32Array(i);const a=s[r+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new e(i,a,s[a+SIZE_OFFSET>>>2]>>>t)}e.__getInt8Array=b.bind(null,Int8Array,0);e.__getInt8ArrayView=v.bind(null,Int8Array,0);e.__getUint8Array=b.bind(null,Uint8Array,0);e.__getUint8ArrayView=v.bind(null,Uint8Array,0);e.__getUint8ClampedArray=b.bind(null,Uint8ClampedArray,0);e.__getUint8ClampedArrayView=v.bind(null,Uint8ClampedArray,0);e.__getInt16Array=b.bind(null,Int16Array,1);e.__getInt16ArrayView=v.bind(null,Int16Array,1);e.__getUint16Array=b.bind(null,Uint16Array,1);e.__getUint16ArrayView=v.bind(null,Uint16Array,1);e.__getInt32Array=b.bind(null,Int32Array,2);e.__getInt32ArrayView=v.bind(null,Int32Array,2);e.__getUint32Array=b.bind(null,Uint32Array,2);e.__getUint32ArrayView=v.bind(null,Uint32Array,2);if(BIGINT){e.__getInt64Array=b.bind(null,BigInt64Array,3);e.__getInt64ArrayView=v.bind(null,BigInt64Array,3);e.__getUint64Array=b.bind(null,BigUint64Array,3);e.__getUint64ArrayView=v.bind(null,BigUint64Array,3)}e.__getFloat32Array=b.bind(null,Float32Array,2);e.__getFloat32ArrayView=v.bind(null,Float32Array,2);e.__getFloat64Array=b.bind(null,Float64Array,3);e.__getFloat64ArrayView=v.bind(null,Float64Array,3);function w(e,t){const r=new Uint32Array(n.buffer);var i=r[e+ID_OFFSET>>>2];if(i<=r[o>>>2]){do{if(i==t)return true}while(i=c(i))}return false}e.__instanceof=w;e.memory=e.memory||n;e.table=e.table||i;return demangle(r,e)}function isResponse(e){return typeof Response!=="undefined"&&e instanceof Response}async function instantiate$1(e,t){if(isResponse(e=await e))return instantiateStreaming(e,t);return postInstantiate(preInstantiate(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}var instantiate_1=instantiate$1;function instantiateSync(e,t){return postInstantiate(preInstantiate(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}var instantiateSync_1=instantiateSync;async function instantiateStreaming(e,t){if(!WebAssembly.instantiateStreaming){return instantiate$1(isResponse(e=await e)?e.arrayBuffer():e,t)}return postInstantiate(preInstantiate(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)}var instantiateStreaming_1=instantiateStreaming;function demangle(e,t){var r=t?Object.create(t):{};var n=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const i=e[t];let s=t.split(".");let a=r;while(s.length>1){let e=s.shift();if(!Object.prototype.hasOwnProperty.call(a,e))a[e]={};a=a[e]}let o=s[0];let f=o.indexOf("#");if(f>=0){let r=o.substring(0,f);let s=a[r];if(typeof s==="undefined"||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function e(){return this[THIS]}};e.wrap=function(t){return Object.create(e.prototype,{[THIS]:{value:t,writable:false}})};if(s)Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))));a[r]=e}o=o.substring(f+1);a=a[r].prototype;if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){let r=e[t.replace("set:","get:")];let n=e[t.replace("get:","set:")];Object.defineProperty(a,o,{get:function(){return r(this[THIS])},set:function(e){n(this[THIS],e)},enumerable:true})}}else{if(o==="constructor"){(a[o]=(...e)=>{n(e.length);return i(...e)}).original=i}else{(a[o]=function(...e){n(e.length);return i(this[THIS],...e)}).original=i}}}else{if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){Object.defineProperty(a,o,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:true})}}else if(typeof i==="function"&&i!==n){(a[o]=(...e)=>{n(e.length);return i(...e)}).original=i}else{a[o]=i}}}return r}var demangle_1=demangle;var loader={instantiate:instantiate_1,instantiateSync:instantiateSync_1,instantiateStreaming:instantiateStreaming_1,demangle:demangle_1};const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly!=="undefined";function loadWebAssembly(e={}){if(!loadWebAssembly.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([t],{type:"application/wasm"})),e)}var rabinWasm=loadWebAssembly;const create$1=async(e,t,r,n,i)=>{const s=await rabinWasm();return new rabin$1(s,e,t,r,n,i)};var src$2={Rabin:rabin$1,create:create$1};const{create}=src$2;var rabin_1=async function*e(t,r){let n,i,s;if(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize){s=r.avgChunkSize;n=r.minChunkSize;i=r.maxChunkSize}else if(!r.avgChunkSize){throw errCode(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE")}else{s=r.avgChunkSize;n=s/3;i=s+s/2}if(n<16){throw errCode(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE")}if(i<n){i=n}if(s<n){s=n}const a=Math.floor(Math.log2(s));for await(const e of rabin(t,{min:n,max:i,bits:a,window:r.window,polynomial:r.polynomial})){yield e}};async function*rabin(e,t){const r=await create(t.bits,t.min,t.max,t.window);const n=new BufferList_1;for await(const t of e){n.append(t);const e=r.fingerprint(t);for(let t=0;t<e.length;t++){const r=e[t];const i=n.slice(0,r);n.consume(r);yield i}}if(n.length){yield n.slice(0)}}var fixedSize=async function*e(t,r){let n=new BufferList_1;let i=0;let s=false;const a=r.maxChunkSize;for await(const e of t){n.append(e);i+=e.length;while(i>=a){yield n.slice(0,a);s=true;if(a===n.length){n=new BufferList_1;i=0}else{const e=new BufferList_1;e.append(n.shallowSlice(a));n=e;i-=a}}}if(!s||i){yield n.slice(0,i)}};async function*validateChunks(e){for await(const t of e){if(t.length===undefined){throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}if(typeof t==="string"||t instanceof String){yield fromString_1$1(t.toString())}else if(Array.isArray(t)){yield Uint8Array.from(t)}else if(t instanceof Uint8Array){yield t}else{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}}var validateChunks_1=validateChunks;function isIterable(e){return Symbol.iterator in e}function isAsyncIterable(e){return Symbol.asyncIterator in e}function contentAsAsyncIterable(e){try{if(e instanceof Uint8Array){return async function*(){yield e}()}else if(isIterable(e)){return async function*(){yield*e}()}else if(isAsyncIterable(e)){return e}}catch{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(e,t,r){for await(const n of e){if(n.path){if(n.path.substring(0,2)==="./"){r.wrapWithDirectory=true}n.path=n.path.split("/").filter((e=>e&&e!==".")).join("/")}if(n.content){let e;if(typeof r.chunker==="function"){e=r.chunker}else if(r.chunker==="rabin"){e=rabin_1}else{e=fixedSize}let i;if(typeof r.chunkValidator==="function"){i=r.chunkValidator}else{i=validateChunks_1}const s={path:n.path,mtime:n.mtime,mode:n.mode,content:e(i(contentAsAsyncIterable(n.content),r),r)};yield()=>file(s,t,r)}else if(n.path){const e={path:n.path,mtime:n.mtime,mode:n.mode};yield()=>dir$1(e,t,r)}else{throw new Error("Import candidate must have content or path or both")}}}var dagBuilder_1=dagBuilder;class Dir{constructor(e,t){this.options=t||{};this.root=e.root;this.dir=e.dir;this.path=e.path;this.dirty=e.dirty;this.flat=e.flat;this.parent=e.parent;this.parentKey=e.parentKey;this.unixfs=e.unixfs;this.mode=e.mode;this.mtime=e.mtime;this.cid=undefined;this.size=undefined}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}var dir=Dir;const{DAGLink:DAGLink$1,DAGNode:DAGNode$1}=src$3;const{UnixFS:UnixFS$1}=src$6;class DirFlat extends dir{constructor(e,t){super(e,t);this._children={}}async put(e,t){this.cid=undefined;this.size=undefined;this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children);const r=[];for(let n=0;n<t.length;n++){let i=this._children[t[n]];if(i instanceof dir){for await(const t of i.flush(e)){i=t;yield i}}if(i.size!=null&&i.cid){r.push(new DAGLink$1(t[n],i.size,i.cid))}}const n=new UnixFS$1({type:"directory",mtime:this.mtime,mode:this.mode});const i=new DAGNode$1(n.marshal(),r);const s=i.serialize();const a=await persist_1(s,e,this.options);const o=s.length+i.Links.reduce(((e,t)=>e+t.Tsize),0);this.cid=a;this.size=o;yield{cid:a,unixfs:n,path:this.path,size:o}}}var dirFlat=DirFlat;const BITS_PER_BYTE=7;var sparseArray=class e{constructor(){this._bitArrays=[];this._data=[];this._length=0;this._changedLength=false;this._changedData=false}set(e,t){let r=this._internalPositionFor(e,false);if(t===undefined){if(r!==-1){this._unsetInternalPos(r);this._unsetBit(e);this._changedLength=true;this._changedData=true}}else{let n=false;if(r===-1){r=this._data.length;this._setBit(e);this._changedData=true}else{n=true}this._setInternalPos(r,e,t,n);this._changedLength=true}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,true);if(t===-1){return undefined}return this._data[t][1]}push(e){this.set(this.length,e);return this.length}get length(){this._sortData();if(this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0;this._changedLength=false}return this._length}forEach(e){let t=0;while(t<this.length){e(this.get(t),t,this);t++}}map(e){let t=0;let r=new Array(this.length);while(t<this.length){r[t]=e(this.get(t),t,this);t++}return r}reduce(e,t){let r=0;let n=t;while(r<this.length){const t=this.get(r);n=e(n,t,r);r++}return n}find(e){let t=0,r,n;while(t<this.length&&!r){n=this.get(t);r=e(n);t++}return r?n:undefined}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length){return-1}const n=this._bitArrays[r];const i=e-r*BITS_PER_BYTE;const s=(n&1<<i)>0;if(!s){return-1}const a=this._bitArrays.slice(0,r).reduce(popCountReduce,0);const o=~(4294967295<<i+1);const f=popCount(n&o);const c=a+f-1;return c}_bytePosFor(e,t){const r=Math.floor(e/BITS_PER_BYTE);const n=r+1;while(!t&&this._bitArrays.length<n){this._bitArrays.push(0)}return r}_setBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]|=1<<e-t*BITS_PER_BYTE}_unsetBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]&=~(1<<e-t*BITS_PER_BYTE)}_setInternalPos(e,t,r,n){const i=this._data;const s=[t,r];if(n){this._sortData();i[e]=s}else{if(i.length){if(i[i.length-1][0]>=t){i.push(s)}else if(i[0][0]<=t){i.unshift(s)}else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(s).concat(i.slice(e))}}else{this._data.push(s)}this._changedData=true;this._changedLength=true}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){if(this._changedData){this._data.sort(sortInternal)}this._changedData=false}bitField(){const e=[];let t=8;let r=0;let n=0;let i;const s=this._bitArrays.slice();while(s.length||r){if(r===0){i=s.shift();r=7}const a=Math.min(r,t);const o=~(255<<a);const f=i&o;n|=f<<8-t;i=i>>>a;r-=a;t-=a;if(!t||!r&&!s.length){e.push(n);n=0;t=8}}for(var a=e.length-1;a>0;a--){const t=e[a];if(t===0){e.pop()}else{break}}return e}compactArray(){this._sortData();return this._data.map(valueOnly)}};function popCountReduce(e,t){return e+popCount(t)}function popCount(e){let t=e;t=t-(t>>1&1431655765);t=(t&858993459)+(t>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24}function sortInternal(e,t){return e[0]-t[0]}function valueOnly(e){return e[1]}var asUint8array=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function n(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=n}));function createCodec(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES={utf8:string,"utf-8":string,hex:basics.bases.base16,latin1:ascii,ascii,binary:ascii,...basics.bases};var bases=BASES;var fromString_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const{fromString:uint8ArrayFromString}=fromString_1;class Bucket$1{constructor(e,t,r=0){this._options=e;this._popCount=0;this._parent=t;this._posAtParent=r;this._children=new sparseArray;this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t){return t.value}}async del(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r&&r.key===e){t.bucket._delAt(t.pos)}}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>{if(t instanceof Bucket$1){return e+t.leafCount()}return e+1}),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e){if(t instanceof Bucket$1){yield*t.eachLeafSeries()}else{yield t}}return[]}serialize(e,t){const r=[];return t(this._children.reduce(((r,n,i)=>{if(n){if(n instanceof Bucket$1){r.push(n.serialize(e,t))}else{r.push(e(n,i))}}return r}),r))}asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r instanceof Bucket$1){return undefined}if(r&&r.key===e){return r}}async _findPlace(e){const t=this._options.hash(typeof e==="string"?uint8ArrayFromString(e):e);const r=await t.take(this._options.bits);const n=this._children.get(r);if(n instanceof Bucket$1){return n._findPlace(t)}return{bucket:this,pos:r,hash:t,existingChild:n}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const e=new Bucket$1(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);r.bucket._putAt(r,t.existingChild.key,t.existingChild.value);return e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){if(!this._children.get(e)){this._popCount++}this._children.set(e,t)}_delAt(e){if(e===-1){throw new Error("Invalid position")}if(this._children.get(e)){this._popCount--}this._children.unset(e);this._level()}_level(){if(this._parent&&this._popCount<=1){if(this._popCount===1){const e=this._children.find(exists);if(e&&!(e instanceof Bucket$1)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else{this._parent._delAt(this._posAtParent)}}}_at(e){return this._children.get(e)}}function exists(e){return Boolean(e)}function mapNode(e,t){return e.key}function reduceNodes(e){return e}async function asyncTransformBucket(e,t,r){const n=[];for(const i of e._children.compactArray()){if(i instanceof Bucket$1){await asyncTransformBucket(i,t,r)}else{const r=await t(i);n.push({bitField:e._children.bitField(),children:r})}}return r(n)}var bucket=Bucket$1;const START_MASKS=[255,254,252,248,240,224,192,128];const STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class e{constructor(e){this._value=e;this._currentBytePos=e.length-1;this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e;let r=0;while(t&&this._haveBits()){const e=this._value[this._currentBytePos];const n=this._currentBitPos+1;const i=Math.min(n,t);const s=byteBitsToInt(e,n-i,i);r=(r<<i)+s;t-=i;this._currentBitPos-=i;if(this._currentBitPos<0){this._currentBitPos=7;this._currentBytePos--}}return r}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7){this._currentBitPos-=8;this._currentBytePos+=1}}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(e,t,r){const n=maskFor(t,r);return(e&n)>>>t}function maskFor(e,t){return START_MASKS[e]&STOP_MASKS[Math.min(t+e-1,7)]}var concat_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1.allocUnsafe(t);let n=0;for(const t of e){r.set(t,n);n+=t.length}return asUint8array.asUint8Array(r)}t.concat=r}));const{concat:uint8ArrayConcat}=concat_1;function wrapHash(e){function t(t){if(t instanceof InfiniteHash){return t}else{return new InfiniteHash(t,e)}}return t}class InfiniteHash{constructor(e,t){if(!(e instanceof Uint8Array)){throw new Error("can only hash Uint8Arrays")}this._value=e;this._hashFn=t;this._depth=-1;this._availableBits=0;this._currentBufferIndex=0;this._buffers=[]}async take(e){let t=e;while(this._availableBits<t){await this._produceMoreBits()}let r=0;while(t>0){const e=this._buffers[this._currentBufferIndex];const n=Math.min(e.availableBits(),t);const i=e.take(n);r=(r<<n)+i;t-=n;this._availableBits-=n;if(e.availableBits()===0){this._currentBufferIndex++}}return r}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex];const r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r);t-=r;this._availableBits+=r;if(this._currentBufferIndex>0&&e.totalBits()===e.availableBits()){this._depth--;this._currentBufferIndex--}}}async _produceMoreBits(){this._depth++;const e=this._depth?uint8ArrayConcat([this._value,Uint8Array.from([this._depth])]):this._value;const t=await this._hashFn(e);const r=new consumableBuffer(t);this._buffers.push(r);this._availableBits+=r.availableBits()}}var consumableHash=wrapHash;var InfiniteHash_1=InfiniteHash;consumableHash.InfiniteHash=InfiniteHash_1;function createHAMT$1(e){if(!e||!e.hashFn){throw new Error("please define an options.hashFn")}const t={bits:e.bits||8,hash:consumableHash(e.hashFn)};return new bucket(t)}var src$1={createHAMT:createHAMT$1,Bucket:bucket};const{DAGLink,DAGNode}=src$3;const{UnixFS}=src$6;const{createHAMT,Bucket}=src$1;class DirSharded extends dir{constructor(e,t){super(e,t);this._bucket=createHAMT({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries()){yield{key:e,child:t}}}async*flush(e){for await(const t of flush(this._bucket,e,this,this.options)){yield{...t,path:this.path}}}}var dirSharded=DirSharded;async function*flush(e,t,r,n){const i=e._children;const s=[];let a=0;for(let e=0;e<i.length;e++){const r=i.get(e);if(!r){continue}const o=e.toString(16).toUpperCase().padStart(2,"0");if(r instanceof Bucket){let e;for await(const i of await flush(r,t,null,n)){e=i}if(!e){throw new Error("Could not flush sharded directory, no subshard found")}s.push(new DAGLink(o,e.size,e.cid));a+=e.size}else if(typeof r.value.flush==="function"){const e=r.value;let n;for await(const r of e.flush(t)){n=r;yield n}const i=o+r.key;s.push(new DAGLink(i,n.size,n.cid));a+=n.size}else{const e=r.value;if(!e.cid){continue}const t=o+r.key;const n=e.size;s.push(new DAGLink(t,n,e.cid));a+=n}}const o=Uint8Array.from(i.bitField().reverse());const f=new UnixFS({type:"hamt-sharded-directory",data:o,fanout:e.tableSize(),hashType:n.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode});const c=new DAGNode(f.marshal(),s);const u=c.serialize();const l=await persist_1(u,t,n);const h=u.length+a;yield{cid:l,unixfs:f,size:h}}var flatToShard=async function e(t,r,n,i){let s=r;if(r instanceof dirFlat&&r.directChildrenCount()>=n){s=await convertToShard(r,i)}const a=s.parent;if(a){if(s!==r){if(t){t.parent=s}if(!s.parentKey){throw new Error("No parent key found")}await a.put(s.parentKey,s)}return e(s,a,n,i)}return s};async function convertToShard(e,t){const r=new dirSharded({root:e.root,dir:true,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:false,mtime:e.mtime,mode:e.mode},t);for await(const{key:t,child:n}of e.eachChildSeries()){await r.put(t,n)}return r}const toPathComponents=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);var toPathComponents_1=toPathComponents;async function addToTree(e,t,r){const n=toPathComponents_1(e.path||"");const i=n.length-1;let s=t;let a="";for(let o=0;o<n.length;o++){const f=n[o];a+=`${a?"/":""}${f}`;const c=o===i;s.dirty=true;s.cid=undefined;s.size=undefined;if(c){await s.put(f,e);t=await flatToShard(null,s,r.shardSplitThreshold,r)}else{let e=await s.get(f);if(!e||!(e instanceof dir)){e=new dirFlat({root:false,dir:true,parent:s,parentKey:f,path:a,dirty:true,flat:true,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)}await s.put(f,e);s=e}}return t}async function*flushAndYield(e,t){if(!(e instanceof dir)){if(e&&e.unixfs&&e.unixfs.isDirectory()){yield e}return}yield*e.flush(t)}async function*treeBuilder(e,t,r){let n=new dirFlat({root:true,dir:true,path:"",dirty:true,flat:true},r);for await(const t of e){if(!t){continue}n=await addToTree(t,n,r);if(!t.unixfs||!t.unixfs.isDirectory()){yield t}}if(r.wrapWithDirectory){yield*flushAndYield(n,t)}else{for await(const e of n.eachChildSeries()){if(!e){continue}yield*flushAndYield(e.child,t)}}}var treeBuilder_1=treeBuilder;async function*importer$1(e,t,r={}){const n=options(r);let i;if(typeof r.dagBuilder==="function"){i=r.dagBuilder}else{i=dagBuilder_1}let s;if(typeof r.treeBuilder==="function"){s=r.treeBuilder}else{s=treeBuilder_1}let a;if(Symbol.asyncIterator in e||Symbol.iterator in e){a=e}else{a=[e]}for await(const e of s(itParallelBatch(i(a,t,n),n.fileImportConcurrency),t,n)){yield{cid:e.cid,path:e.path,unixfs:e.unixfs,size:e.size}}}var src={importer:importer$1};const{importer}=src;const block={get:async e=>{throw new Error(`unexpected block API get for ${e}`)},put:async()=>{throw new Error("unexpected block API put")}};var of=async(e,t)=>{t=t||{};t.onlyHash=true;if(typeof e==="string"){e=(new TextEncoder).encode(e)}let r;for await(const{cid:n}of importer([{content:e}],block,t)){r=n}return`${r}`};const ACCESS_CONTROL_SCRIPTS_ADMIN="TS_SCRIPT_ADMIN";class TrustedKeyResolver{constructor(e){this.tokenScript=e}getTrustedPublicKey(e,t){const r=this.tokenScript.getEngine().config.trustedKeys;if(!r)return null;const n=computeAddress(e);const i=computeAddress(t);for(const s of r){if(s.valueType==="ethAddress"){if(n.toLowerCase()===s.value.toLowerCase()||i.toLowerCase()===s.value.toLowerCase())return s}else{if(e.toLowerCase()===s.value.toLowerCase()||t.toLowerCase()===s.value.toLowerCase())return s}}return null}async isAdmin(e,t){const r=await this.tokenScript.getEngine().getWalletAdapter();const n=e.getFirstAddress();try{const e=await r.call(n.chain,n.address,"owner",[],["address"]);if(e.toLowerCase()===t.toLocaleLowerCase()){return true}let i=await r.call(n.chain,n.address,"hasRole",[{internalType:"bytes32",name:"0",type:"bytes32",value:HashZero},{internalType:"address",name:"1",type:"address",value:t}],["bool"]);if(i)return true;i=await r.call(n.chain,n.address,"hasRole",[{internalType:"bytes32",name:"0",type:"bytes32",value:keccak256$1(toUtf8Bytes(ACCESS_CONTROL_SCRIPTS_ADMIN))},{internalType:"address",name:"1",type:"address",value:t}],["bool"]);if(i)return true}catch(e){console.error(e)}return false}}var SecurityStatus$1;(function(e){e["VALID"]="valid";e["WARNING"]="warn";e["INVALID"]="invalid"})(SecurityStatus$1||(SecurityStatus$1={}));class SecurityInfo{constructor(e){this.tokenScript=e;this.originStatuses={}}async loadTokenScriptKeyInfo(){this.securityInfo={};const e=await(new DSigValidator).getSignerKey(this.tokenScript);if(e!==false){this.securityInfo.authoritivePublicKey=e.authoritiveKey;this.securityInfo.signerPublicKey=e.signingKey;const t=new TrustedKeyResolver(this.tokenScript);this.securityInfo.trustedKey=t.getTrustedPublicKey(this.securityInfo.authoritivePublicKey,this.securityInfo.signerPublicKey)}this.securityInfo.ipfsCid=await of(this.tokenScript.xmlStr,null);await this.verifyOrigins()}async verifyOrigins(){this.securityInfo.originStatuses=[];const e=this.tokenScript.getOrigins();let t=0;for(const r in e){const n=e[r];const i=await n.getOriginSecurityStatus(this.securityInfo);if(i.status===SecurityStatus$1.INVALID)t++;this.securityInfo.originStatuses.push(i);this.originStatuses[r]=i}if(t===0){this.securityInfo.status=SecurityStatus$1.VALID;this.securityInfo.statusText=this.securityInfo.trustedKey?"The TokenScript is signed by a trusted key":"The TokenScript is authenticated for use with all specified token origins."}else{this.securityInfo.status=SecurityStatus$1.INVALID;if(t<Object.values(e).length){this.securityInfo.statusText="The TokenScript is not authenticated for some token origins. \nTake care when signing transactions for these tokens."}else{this.securityInfo.statusText="The TokenScript is not authenticated for any listed token origins. \nSign any transactions with caution."}}}async checkAndLoad(){if(!this.lock){this.lock=this.loadTokenScriptKeyInfo()}await this.lock}async getInfo(){await this.checkAndLoad();return this.securityInfo}async getOriginInfo(e){await this.checkAndLoad();return this.originStatuses[e]}async getAllOriginInfo(){await this.checkAndLoad();return this.originStatuses}}class SelectionFilter{constructor(e,t){this.tokenScript=e;t=unescape(t.replace(/&#x(\w{4});/g,"%u$1"));const r=t.match(/([a-zA-Z0-9]*)([=<>]*)([a-zA-Z0-9]*)/);if(r.length<4)throw new Error("Malformed selection filter");this.attributeName=r[1];this.conditionOperator=r[2];this.conditionValue=r[3]}async getAttributeValue(e){const t=this.tokenScript.getAttributes();if(!t.hasAttribute(this.attributeName))throw new Error("Selection filter references an undefined attribute, "+this.attributeName);return t.getAttribute(this.attributeName).getValue(false,false,false,e)}async satisfiesFilter(e){const t=await this.getAttributeValue(e);const r=this.sanitiseConditionValue();switch(this.conditionOperator){case"=":return t==r;case"<":return t<r;case">":return t>r;default:throw new Error("Filter condition "+this.conditionOperator+" is not implemented.")}}sanitiseConditionValue(){switch(this.conditionValue){case"TRUE":return true;case"FALSE":return false;default:if(this.isNumeric(this.conditionValue))return BigInt(this.conditionValue)}return this.conditionValue}isNumeric(e){return/^-?\d+$/.test(e)}}class Selection{constructor(e,t){this.tokenScript=e;this.selectionDef=t}getName(){return this.selectionDef.getAttribute("name")}getLabel(){var e;if(!this.label)this.label=new Label(this.selectionDef);return(e=this.label.getValue())!==null&&e!==void 0?e:this.getName()}getFilter(){if(!this.filter)this.filter=new SelectionFilter(this.tokenScript,this.selectionDef.getAttribute("filter"));return this.filter}isInSelection(e){return this.getFilter().satisfiesFilter(e)}}class Selections{constructor(e,t){this.tokenScript=e;this.parentElem=t}getSelections(){if(!this.selections){this.selections={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:selection"));if(e.length>0){for(let t in e){const r=new Selection(this.tokenScript,e[t]);this.selections[r.getName()]=r}}}return this.selections}getSelection(e){if(!this.selections)this.getSelections();if(!this.selections[e])throw new Error("Could not find selection '"+e+"'");return this.selections[e]}[Symbol.iterator](){return Object.values(this.getSelections()).values()}}const abi_1$1=getAugmentedNamespace(lib_esm$c);const address_1$1=getAugmentedNamespace(lib_esm$g);const require$$0$1=getAugmentedNamespace(lib_esm$e);const basex_1$1=getAugmentedNamespace(lib_esm$9);const bytes_1$1=getAugmentedNamespace(lib_esm$k);const hash_1$1=getAugmentedNamespace(lib_esm$d);const hdnode_1$1=getAugmentedNamespace(lib_esm$7);const json_wallets_1$1=getAugmentedNamespace(lib_esm$5);const keccak256_1$1=getAugmentedNamespace(lib_esm$i);const logger_1$1=getAugmentedNamespace(lib_esm$l);const sha2_1$1=getAugmentedNamespace(lib_esm$8);const solidity_1$1=getAugmentedNamespace(lib_esm$2);const random_1$1=getAugmentedNamespace(lib_esm$6);const properties_1$1=getAugmentedNamespace(lib_esm$j);const require$$1$1=getAugmentedNamespace(lib_esm$h);const signing_key_1$1=getAugmentedNamespace(lib_esm$b);const strings_1$1=getAugmentedNamespace(lib_esm$f);const transactions_1$1=getAugmentedNamespace(lib_esm$a);const units_1$1=getAugmentedNamespace(lib_esm$1);const wallet_1$1=getAugmentedNamespace(lib_esm$4);const web_1$1=getAugmentedNamespace(lib_esm$3);var utils$2=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.formatBytes32String=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t._toEscapedUtf8String=t.nameprep=t.hexDataSlice=t.hexDataLength=t.hexZeroPad=t.hexValue=t.hexStripZeros=t.hexConcat=t.isHexString=t.hexlify=t.base64=t.base58=t.TransactionDescription=t.LogDescription=t.Interface=t.SigningKey=t.HDNode=t.defaultPath=t.isBytesLike=t.isBytes=t.zeroPad=t.stripZeros=t.concat=t.arrayify=t.shallowCopy=t.resolveProperties=t.getStatic=t.defineReadOnly=t.deepCopy=t.checkProperties=t.poll=t.fetchJson=t._fetchData=t.RLP=t.Logger=t.checkResultErrors=t.FormatTypes=t.ParamType=t.FunctionFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.Fragment=t.defaultAbiCoder=t.AbiCoder=void 0;t.Indexed=t.Utf8ErrorReason=t.UnicodeNormalizationForm=t.SupportedAlgorithm=t.mnemonicToSeed=t.isValidMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.getAccountPath=t.verifyTypedData=t.verifyMessage=t.recoverPublicKey=t.computePublicKey=t.recoverAddress=t.computeAddress=t.getJsonWalletAddress=t.TransactionTypes=t.serializeTransaction=t.parseTransaction=t.accessListify=t.joinSignature=t.splitSignature=t.soliditySha256=t.solidityKeccak256=t.solidityPack=t.shuffled=t.randomBytes=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.computeHmac=t.commify=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.isAddress=t.getCreate2Address=t.getContractAddress=t.getIcapAddress=t.getAddress=t._TypedDataEncoder=t.id=t.isValidName=t.namehash=t.hashMessage=t.dnsEncode=t.parseBytes32String=void 0;Object.defineProperty(t,"AbiCoder",{enumerable:true,get:function(){return abi_1$1.AbiCoder}});Object.defineProperty(t,"checkResultErrors",{enumerable:true,get:function(){return abi_1$1.checkResultErrors}});Object.defineProperty(t,"ConstructorFragment",{enumerable:true,get:function(){return abi_1$1.ConstructorFragment}});Object.defineProperty(t,"defaultAbiCoder",{enumerable:true,get:function(){return abi_1$1.defaultAbiCoder}});Object.defineProperty(t,"ErrorFragment",{enumerable:true,get:function(){return abi_1$1.ErrorFragment}});Object.defineProperty(t,"EventFragment",{enumerable:true,get:function(){return abi_1$1.EventFragment}});Object.defineProperty(t,"FormatTypes",{enumerable:true,get:function(){return abi_1$1.FormatTypes}});Object.defineProperty(t,"Fragment",{enumerable:true,get:function(){return abi_1$1.Fragment}});Object.defineProperty(t,"FunctionFragment",{enumerable:true,get:function(){return abi_1$1.FunctionFragment}});Object.defineProperty(t,"Indexed",{enumerable:true,get:function(){return abi_1$1.Indexed}});Object.defineProperty(t,"Interface",{enumerable:true,get:function(){return abi_1$1.Interface}});Object.defineProperty(t,"LogDescription",{enumerable:true,get:function(){return abi_1$1.LogDescription}});Object.defineProperty(t,"ParamType",{enumerable:true,get:function(){return abi_1$1.ParamType}});Object.defineProperty(t,"TransactionDescription",{enumerable:true,get:function(){return abi_1$1.TransactionDescription}});Object.defineProperty(t,"getAddress",{enumerable:true,get:function(){return address_1$1.getAddress}});Object.defineProperty(t,"getCreate2Address",{enumerable:true,get:function(){return address_1$1.getCreate2Address}});Object.defineProperty(t,"getContractAddress",{enumerable:true,get:function(){return address_1$1.getContractAddress}});Object.defineProperty(t,"getIcapAddress",{enumerable:true,get:function(){return address_1$1.getIcapAddress}});Object.defineProperty(t,"isAddress",{enumerable:true,get:function(){return address_1$1.isAddress}});var s=i(require$$0$1);t.base64=s;Object.defineProperty(t,"base58",{enumerable:true,get:function(){return basex_1$1.Base58}});Object.defineProperty(t,"arrayify",{enumerable:true,get:function(){return bytes_1$1.arrayify}});Object.defineProperty(t,"concat",{enumerable:true,get:function(){return bytes_1$1.concat}});Object.defineProperty(t,"hexConcat",{enumerable:true,get:function(){return bytes_1$1.hexConcat}});Object.defineProperty(t,"hexDataSlice",{enumerable:true,get:function(){return bytes_1$1.hexDataSlice}});Object.defineProperty(t,"hexDataLength",{enumerable:true,get:function(){return bytes_1$1.hexDataLength}});Object.defineProperty(t,"hexlify",{enumerable:true,get:function(){return bytes_1$1.hexlify}});Object.defineProperty(t,"hexStripZeros",{enumerable:true,get:function(){return bytes_1$1.hexStripZeros}});Object.defineProperty(t,"hexValue",{enumerable:true,get:function(){return bytes_1$1.hexValue}});Object.defineProperty(t,"hexZeroPad",{enumerable:true,get:function(){return bytes_1$1.hexZeroPad}});Object.defineProperty(t,"isBytes",{enumerable:true,get:function(){return bytes_1$1.isBytes}});Object.defineProperty(t,"isBytesLike",{enumerable:true,get:function(){return bytes_1$1.isBytesLike}});Object.defineProperty(t,"isHexString",{enumerable:true,get:function(){return bytes_1$1.isHexString}});Object.defineProperty(t,"joinSignature",{enumerable:true,get:function(){return bytes_1$1.joinSignature}});Object.defineProperty(t,"zeroPad",{enumerable:true,get:function(){return bytes_1$1.zeroPad}});Object.defineProperty(t,"splitSignature",{enumerable:true,get:function(){return bytes_1$1.splitSignature}});Object.defineProperty(t,"stripZeros",{enumerable:true,get:function(){return bytes_1$1.stripZeros}});Object.defineProperty(t,"_TypedDataEncoder",{enumerable:true,get:function(){return hash_1$1._TypedDataEncoder}});Object.defineProperty(t,"dnsEncode",{enumerable:true,get:function(){return hash_1$1.dnsEncode}});Object.defineProperty(t,"hashMessage",{enumerable:true,get:function(){return hash_1$1.hashMessage}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return hash_1$1.id}});Object.defineProperty(t,"isValidName",{enumerable:true,get:function(){return hash_1$1.isValidName}});Object.defineProperty(t,"namehash",{enumerable:true,get:function(){return hash_1$1.namehash}});Object.defineProperty(t,"defaultPath",{enumerable:true,get:function(){return hdnode_1$1.defaultPath}});Object.defineProperty(t,"entropyToMnemonic",{enumerable:true,get:function(){return hdnode_1$1.entropyToMnemonic}});Object.defineProperty(t,"getAccountPath",{enumerable:true,get:function(){return hdnode_1$1.getAccountPath}});Object.defineProperty(t,"HDNode",{enumerable:true,get:function(){return hdnode_1$1.HDNode}});Object.defineProperty(t,"isValidMnemonic",{enumerable:true,get:function(){return hdnode_1$1.isValidMnemonic}});Object.defineProperty(t,"mnemonicToEntropy",{enumerable:true,get:function(){return hdnode_1$1.mnemonicToEntropy}});Object.defineProperty(t,"mnemonicToSeed",{enumerable:true,get:function(){return hdnode_1$1.mnemonicToSeed}});Object.defineProperty(t,"getJsonWalletAddress",{enumerable:true,get:function(){return json_wallets_1$1.getJsonWalletAddress}});Object.defineProperty(t,"keccak256",{enumerable:true,get:function(){return keccak256_1$1.keccak256}});Object.defineProperty(t,"Logger",{enumerable:true,get:function(){return logger_1$1.Logger}});Object.defineProperty(t,"computeHmac",{enumerable:true,get:function(){return sha2_1$1.computeHmac}});Object.defineProperty(t,"ripemd160",{enumerable:true,get:function(){return sha2_1$1.ripemd160}});Object.defineProperty(t,"sha256",{enumerable:true,get:function(){return sha2_1$1.sha256}});Object.defineProperty(t,"sha512",{enumerable:true,get:function(){return sha2_1$1.sha512}});Object.defineProperty(t,"solidityKeccak256",{enumerable:true,get:function(){return solidity_1$1.keccak256}});Object.defineProperty(t,"solidityPack",{enumerable:true,get:function(){return solidity_1$1.pack}});Object.defineProperty(t,"soliditySha256",{enumerable:true,get:function(){return solidity_1$1.sha256}});Object.defineProperty(t,"randomBytes",{enumerable:true,get:function(){return random_1$1.randomBytes}});Object.defineProperty(t,"shuffled",{enumerable:true,get:function(){return random_1$1.shuffled}});Object.defineProperty(t,"checkProperties",{enumerable:true,get:function(){return properties_1$1.checkProperties}});Object.defineProperty(t,"deepCopy",{enumerable:true,get:function(){return properties_1$1.deepCopy}});Object.defineProperty(t,"defineReadOnly",{enumerable:true,get:function(){return properties_1$1.defineReadOnly}});Object.defineProperty(t,"getStatic",{enumerable:true,get:function(){return properties_1$1.getStatic}});Object.defineProperty(t,"resolveProperties",{enumerable:true,get:function(){return properties_1$1.resolveProperties}});Object.defineProperty(t,"shallowCopy",{enumerable:true,get:function(){return properties_1$1.shallowCopy}});var a=i(require$$1$1);t.RLP=a;Object.defineProperty(t,"computePublicKey",{enumerable:true,get:function(){return signing_key_1$1.computePublicKey}});Object.defineProperty(t,"recoverPublicKey",{enumerable:true,get:function(){return signing_key_1$1.recoverPublicKey}});Object.defineProperty(t,"SigningKey",{enumerable:true,get:function(){return signing_key_1$1.SigningKey}});Object.defineProperty(t,"formatBytes32String",{enumerable:true,get:function(){return strings_1$1.formatBytes32String}});Object.defineProperty(t,"nameprep",{enumerable:true,get:function(){return strings_1$1.nameprep}});Object.defineProperty(t,"parseBytes32String",{enumerable:true,get:function(){return strings_1$1.parseBytes32String}});Object.defineProperty(t,"_toEscapedUtf8String",{enumerable:true,get:function(){return strings_1$1._toEscapedUtf8String}});Object.defineProperty(t,"toUtf8Bytes",{enumerable:true,get:function(){return strings_1$1.toUtf8Bytes}});Object.defineProperty(t,"toUtf8CodePoints",{enumerable:true,get:function(){return strings_1$1.toUtf8CodePoints}});Object.defineProperty(t,"toUtf8String",{enumerable:true,get:function(){return strings_1$1.toUtf8String}});Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:true,get:function(){return strings_1$1.Utf8ErrorFuncs}});Object.defineProperty(t,"accessListify",{enumerable:true,get:function(){return transactions_1$1.accessListify}});Object.defineProperty(t,"computeAddress",{enumerable:true,get:function(){return transactions_1$1.computeAddress}});Object.defineProperty(t,"parseTransaction",{enumerable:true,get:function(){return transactions_1$1.parse}});Object.defineProperty(t,"recoverAddress",{enumerable:true,get:function(){return transactions_1$1.recoverAddress}});Object.defineProperty(t,"serializeTransaction",{enumerable:true,get:function(){return transactions_1$1.serialize}});Object.defineProperty(t,"TransactionTypes",{enumerable:true,get:function(){return transactions_1$1.TransactionTypes}});Object.defineProperty(t,"commify",{enumerable:true,get:function(){return units_1$1.commify}});Object.defineProperty(t,"formatEther",{enumerable:true,get:function(){return units_1$1.formatEther}});Object.defineProperty(t,"parseEther",{enumerable:true,get:function(){return units_1$1.parseEther}});Object.defineProperty(t,"formatUnits",{enumerable:true,get:function(){return units_1$1.formatUnits}});Object.defineProperty(t,"parseUnits",{enumerable:true,get:function(){return units_1$1.parseUnits}});Object.defineProperty(t,"verifyMessage",{enumerable:true,get:function(){return wallet_1$1.verifyMessage}});Object.defineProperty(t,"verifyTypedData",{enumerable:true,get:function(){return wallet_1$1.verifyTypedData}});Object.defineProperty(t,"_fetchData",{enumerable:true,get:function(){return web_1$1._fetchData}});Object.defineProperty(t,"fetchJson",{enumerable:true,get:function(){return web_1$1.fetchJson}});Object.defineProperty(t,"poll",{enumerable:true,get:function(){return web_1$1.poll}});var o=sha2_1$1;Object.defineProperty(t,"SupportedAlgorithm",{enumerable:true,get:function(){return o.SupportedAlgorithm}});var f=strings_1$1;Object.defineProperty(t,"UnicodeNormalizationForm",{enumerable:true,get:function(){return f.UnicodeNormalizationForm}});Object.defineProperty(t,"Utf8ErrorReason",{enumerable:true,get:function(){return f.Utf8ErrorReason}})}));class AttestationDefinition{constructor(e,t){this.tokenScript=e;this.elem=t}getTokenScript(){return this.tokenScript}get name(){return this.elem.getAttribute("name")}get type(){return this.elem.getAttribute("type")}get meta(){var e,t,r,n,i,s,a,o,f;const c=(e=this.elem.getElementsByTagName("ts:meta"))===null||e===void 0?void 0:e[0];if(!c)return{name:this.tokenScript.getLabel(),image:"",description:"",attributes:[]};return{name:(n=(r=(t=c.getElementsByTagName("ts:name"))===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.innerHTML)!==null&&n!==void 0?n:this.tokenScript.getLabel(),image:(a=(s=(i=c.getElementsByTagName("ts:image"))===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.innerHTML)!==null&&a!==void 0?a:"",description:(f=(o=c.getElementsByTagName("ts:description"))===null||o===void 0?void 0:o[0].innerHTML)!==null&&f!==void 0?f:"",attributes:Array.from(c.getElementsByTagName("ts:attributeField")).map((e=>({name:e.getAttribute("name"),label:e.innerHTML,display_type:e.getAttribute("display_type")})))}}get keys(){const e=[];const t=this.elem.getElementsByTagName("ts:key");for(const r of t){e.push(r.innerHTML)}return e}get eventId(){var e,t;return(t=(e=this.elem.getElementsByTagName("ts:eventId"))===null||e===void 0?void 0:e[0].innerHTML)!==null&&t!==void 0?t:null}get collectionFields(){var e;const t=(e=this.elem.getElementsByTagName("ts:collectionFields"))===null||e===void 0?void 0:e[0];if(!t)return[];return Array.from(t.getElementsByTagName("ts:collectionField")).map((e=>({name:e.getAttribute("name"),value:e.innerHTML})))}get idFields(){var e;const t=this.elem.getElementsByTagName("ts:idFields");if(!t.length)return[];return(e=t[0].innerHTML.split(","))!==null&&e!==void 0?e:[]}get schemaUID(){const e=this.elem.getElementsByTagName("ts:eas");if(e.length){if(e[0].hasAttribute("schemaUID")){return e[0].getAttribute("schemaUID")}}return"0x0000000000000000000000000000000000000000000000000000000000000000"}calculateAttestationCollectionHashes(){const e=[];let t=this.schemaUID;if(t.indexOf("0x")===0)t=t.substring(2);const r=new TextEncoder;for(let n of this.keys){if(n.indexOf("0x")===-1)n="0x"+n;n=utils$2.computeAddress(n).substring(2).toLowerCase();const i=[];const s=this.collectionFields;if(s.length){for(const e of s){i.push(e.value)}}else if(this.eventId){i.push(this.eventId)}const a=t+n+i.join("");const o=utils$2.keccak256(r.encode(a));e.push(o)}return e}}class AttestationDefinitions{constructor(e,t){this.tokenScript=e;this.elem=t}getDefinitions(){if(!this.definitions){this.definitions={};const e=Array.prototype.slice.call(this.elem.children).filter((e=>e.tagName==="ts:attestation"));for(const t of e){const e=new AttestationDefinition(this.tokenScript,t);this.definitions[e.name]=e}}return this.definitions}getOriginDefinitions(){const e=this.getDefinitions();const t=this.tokenScript.getOrigins();const r={};for(const n in e){if(t[n])r[n]=e[n]}return new OriginAttestationDefinitions(r)}getDefinition(e){const t=this.getDefinitions();return t[e]}[Symbol.iterator](){return Object.values(this.getDefinitions()).values()}}class OriginAttestationDefinitions{constructor(e){this.definitions=e}getDefinitions(){return this.definitions}[Symbol.iterator](){return Object.values(this.getDefinitions()).values()}}const ethers_1=getAugmentedNamespace(lib_esm);var Ownable__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Ownable__factory=void 0;const r=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.Ownable__factory=n}));var access=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Ownable__factory=void 0;Object.defineProperty(t,"Ownable__factory",{enumerable:true,get:function(){return Ownable__factory_1.Ownable__factory}})}));var IERC20Permit__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.IERC20Permit__factory=void 0;const r=[{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.IERC20Permit__factory=n}));var draftIERC20Permit_sol=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.IERC20Permit__factory=void 0;Object.defineProperty(t,"IERC20Permit__factory",{enumerable:true,get:function(){return IERC20Permit__factory_1.IERC20Permit__factory}})}));var IERC20Metadata__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.IERC20Metadata__factory=void 0;const r=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.IERC20Metadata__factory=n}));var extensions=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.IERC20Metadata__factory=t.draftIerc20PermitSol=void 0;t.draftIerc20PermitSol=i(draftIERC20Permit_sol);Object.defineProperty(t,"IERC20Metadata__factory",{enumerable:true,get:function(){return IERC20Metadata__factory_1.IERC20Metadata__factory}})}));var ERC20__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ERC20__factory=void 0;const r=[{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];const n="0x6080604052346200031d5762001095803803806200001d8162000322565b9283398101906040818303126200031d5780516001600160401b03908181116200031d57836200004f91840162000348565b91602093848201518381116200031d576200006b920162000348565b82518281116200021d576003918254916001958684811c9416801562000312575b88851014620002fc578190601f94858111620002a6575b5088908583116001146200023f5760009262000233575b505060001982861b1c191690861b1783555b80519384116200021d5760049586548681811c9116801562000212575b82821014620001fd57838111620001b2575b508092851160011462000144575093839491849260009562000138575b50501b92600019911b1c19161790555b604051610cda9081620003bb8239f35b01519350388062000118565b92919084601f1981168860005285600020956000905b898383106200019757505050106200017c575b50505050811b01905562000128565b01519060f884600019921b161c19169055388080806200016d565b8587015189559097019694850194889350908101906200015a565b87600052816000208480880160051c820192848910620001f3575b0160051c019087905b828110620001e6575050620000fb565b60008155018790620001d6565b92508192620001cd565b602288634e487b7160e01b6000525260246000fd5b90607f1690620000e9565b634e487b7160e01b600052604160045260246000fd5b015190503880620000ba565b90889350601f19831691876000528a6000209260005b8c8282106200028f575050841162000276575b505050811b018355620000cc565b015160001983881b60f8161c1916905538808062000268565b8385015186558c9790950194938401930162000255565b90915085600052886000208580850160051c8201928b8610620002f2575b918a91869594930160051c01915b828110620002e2575050620000a3565b600081558594508a9101620002d2565b92508192620002c4565b634e487b7160e01b600052602260045260246000fd5b93607f16936200008c565b600080fd5b6040519190601f01601f191682016001600160401b038111838210176200021d57604052565b919080601f840112156200031d5782516001600160401b0381116200021d576020906200037e601f8201601f1916830162000322565b928184528282870101116200031d5760005b818110620003a657508260009394955001015290565b85810183015184820184015282016200039056fe608060408181526004918236101561001657600080fd5b600092833560e01c91826306fdde031461075657508163095ea7b31461070e57816318160ddd146106d157816323b872dd146105a3578163313ce5671461056957816339509351146104bf57816370a082311461045e57816395d89b4114610268578163a457c2d71461016257508063a9059cbb146101145763dd62ed3e1461009e57600080fd5b3461011057807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261011057806020926100d86108fe565b6100e0610926565b73ffffffffffffffffffffffffffffffffffffffff91821683526001865283832091168252845220549051908152f35b5080fd5b503461011057807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101105760209061015b6101516108fe565b6024359033610949565b5160018152f35b9050823461026557827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102655761019b6108fe565b918360243592338152600160205281812073ffffffffffffffffffffffffffffffffffffffff861682526020522054908282106101e25760208561015b8585038733610b58565b60849060208651917f08c379a0000000000000000000000000000000000000000000000000000000008352820152602560248201527f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f7760448201527f207a65726f0000000000000000000000000000000000000000000000000000006064820152fd5b80fd5b83833461011057817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261011057805190828454600181811c90808316928315610454575b60209384841081146104285783885287959493929181156103cd5750600114610351575b50505003601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01682019267ffffffffffffffff8411838510176103255750829182610321925282610898565b0390f35b806041867f4e487b71000000000000000000000000000000000000000000000000000000006024945252fd5b8888529193925086917f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b5b8284106103b757505050907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe092601f928201019181936102d3565b805488850187015287945092850192810161037c565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016848701525050151560051b830101905081601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe06102d3565b60248960228c7f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b91607f16916102af565b5050346101105760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610110578060209273ffffffffffffffffffffffffffffffffffffffff6104b06108fe565b16815280845220549051908152f35b82843461026557817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610265576104f76108fe565b338252600160205282822073ffffffffffffffffffffffffffffffffffffffff821683526020528282205491602435830180931161053d5760208461015b858533610b58565b806011867f4e487b71000000000000000000000000000000000000000000000000000000006024945252fd5b50503461011057817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610110576020905160128152f35b839150346101105760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610110576105dd6108fe565b6105e5610926565b91846044359473ffffffffffffffffffffffffffffffffffffffff8416815260016020528181203382526020522054907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff820361064b575b60208661015b878787610949565b84821061067457509183916106696020969561015b95033383610b58565b91939481935061063d565b60649060208751917f08c379a0000000000000000000000000000000000000000000000000000000008352820152601d60248201527f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000006044820152fd5b50503461011057817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610110576020906002549051908152f35b50503461011057807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101105760209061015b61074c6108fe565b6024359033610b58565b8490843461089457827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126108945782600354600181811c9080831692831561088a575b60209384841081146104285783885287959493929181156103cd575060011461080d5750505003601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01682019267ffffffffffffffff8411838510176103255750829182610321925282610898565b600388529193925086917fc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b5b82841061087457505050907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe092601f928201019181936102d3565b8054888501870152879450928501928101610839565b91607f169161079c565b8280fd5b60208082528251818301819052939260005b8581106108ea575050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8460006040809697860101520116010190565b8181018301518482016040015282016108aa565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361092157565b600080fd5b6024359073ffffffffffffffffffffffffffffffffffffffff8216820361092157565b73ffffffffffffffffffffffffffffffffffffffff809116918215610ad45716918215610a50576000828152806020526040812054918083106109cc57604082827fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef958760209652828652038282205586815220818154019055604051908152a3565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f45524332303a207472616e7366657220616d6f756e742065786365656473206260448201527f616c616e636500000000000000000000000000000000000000000000000000006064820152fd5b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602360248201527f45524332303a207472616e7366657220746f20746865207a65726f206164647260448201527f65737300000000000000000000000000000000000000000000000000000000006064820152fd5b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602560248201527f45524332303a207472616e736665722066726f6d20746865207a65726f20616460448201527f64726573730000000000000000000000000000000000000000000000000000006064820152fd5b73ffffffffffffffffffffffffffffffffffffffff809116918215610c4a5716918215610bc65760207f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925918360005260018252604060002085600052825280604060002055604051908152a3565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45524332303a20617070726f766520746f20746865207a65726f20616464726560448201527f73730000000000000000000000000000000000000000000000000000000000006064820152fd5b60846040517f08c379a0000000000000000000000000000000000000000000000000000000008152602060048201526024808201527f45524332303a20617070726f76652066726f6d20746865207a65726f2061646460448201527f72657373000000000000000000000000000000000000000000000000000000006064820152fdfea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.ERC20__factory=s}));var IERC20__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.IERC20__factory=void 0;const r=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"owner",type:"address"},{indexed:true,internalType:"address",name:"spender",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"from",type:"address"},{indexed:true,internalType:"address",name:"to",type:"address"},{indexed:false,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.IERC20__factory=n}));var ERC20=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.IERC20__factory=t.ERC20__factory=t.extensions=void 0;t.extensions=i(extensions);Object.defineProperty(t,"ERC20__factory",{enumerable:true,get:function(){return ERC20__factory_1.ERC20__factory}});Object.defineProperty(t,"IERC20__factory",{enumerable:true,get:function(){return IERC20__factory_1.IERC20__factory}})}));var token=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.erc20=void 0;t.erc20=i(ERC20)}));var contracts$1=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.token=t.access=void 0;t.access=i(access);t.token=i(token)}));var _openzeppelin=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.contracts=void 0;t.contracts=i(contracts$1)}));var PermissionedEIP712Proxy__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.PermissionedEIP712Proxy__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"DeadlineExpired",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"UsedSignature",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"previousOwner",type:"address"},{indexed:true,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttester",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEAS",outputs:[{internalType:"contract IEAS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}];const n="0x6101606040908082523462000388576200255a80380380916200002382856200038d565b83398101908281830312620003885780519060018060a01b03928383169485840362000388576020838101516001600160401b039491939185821162000388570193601f93828587011215620003885785518281116200034e57845196601f199462000096838901871685018a6200038d565b8289528383830101116200038857829060005b8381106200037357505060009188010152835194848601868110848211176200034e57855281600396878152019662302e3160e81b88528681518483012098208860e0526101009b818d524660a052875191858301907f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f9b8c83528a85015260608401524660808401523060a084015260a0835260c0830192808410888511176200034e57838a525190206080523060c052610120998a521562000364575061014098895280519384116200034e57600054926001938481811c9116801562000343575b828210146200032d57838111620002e2575b5080928511600114620002795750839450908392916000946200026d575b50501b9160001990851b1c1916176000555b8154336001600160a01b031982168117909355905194167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a36121a89384620003b28539608051846116e1015260a051846117ad015260c051846116b2015260e05184611730015251836117560152518261170d01525181818161040b015281816105f001528181610ba901528181610d2d01526110c30152f35b015192503880620001bd565b9294849081166000805284600020946000905b88838310620002c75750505010620002ae575b505050811b01600055620001cf565b015160001983871b60f8161c191690553880806200029f565b8587015188559096019594850194879350908101906200028c565b60008052816000208480880160051c82019284891062000323575b0160051c019085905b828110620003165750506200019f565b6000815501859062000306565b92508192620002fd565b634e487b7160e01b600052602260045260246000fd5b90607f16906200018d565b634e487b7160e01b600052604160045260246000fd5b6341bc07ff60e11b8152600490fd5b8181018301518a8201840152849201620000a9565b600080fd5b601f909101601f19168101906001600160401b038211908210176200034e5760405256fe6080604052600436101561001257600080fd5b6000803560e01c80630eabf66014610ffb57806310d736d514610f9d57806312b11a1714610f4457806317d7de7c14610de35780633c04271514610bcd57806365c40b9c14610b5e578063715018a614610abf5780638da5cb5b14610a6d57806395411525146104ca578063a6d4dbc714610310578063b83010d3146102b7578063ed24911d14610276578063f2fde38b146101395763ffa1ad74146100b757600080fd5b3461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610136576101326040516100f481611573565b600381527f302e31000000000000000000000000000000000000000000000000000000000060208201526040519182916020835260208301906114c4565b0390f35b80fd5b50346101365760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365760043573ffffffffffffffffffffffffffffffffffffffff8082168092036102715761019361161c565b81156101ed57600354827fffffffffffffffffffffffff0000000000000000000000000000000000000000821617600355167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0600080a380f35b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f64647265737300000000000000000000000000000000000000000000000000006064820152fd5b600080fd5b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365760206102af61169b565b604051908152f35b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365760206040517f96bdbea8fa280f8a0d0835587e1fbb1470e81d05c44514158443340cea40a05d8152f35b506101007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365761034461161c565b60405161035081611528565b60043580825261035f36612024565b602083015260607fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9c3601126102715760405161039a816115a3565b60643560ff81168103610271578152608435602082015260a4356040820152604083015260c43573ffffffffffffffffffffffffffffffffffffffff90818116810361027157606084015260e43567ffffffffffffffff8116810361027157836104099160808796015261206a565b7f000000000000000000000000000000000000000000000000000000000000000016906040519061043982611573565b815261044436612024565b60208201908152823b156104c5576064849260209460405195869485937f4692626700000000000000000000000000000000000000000000000000000000855251600485015251805160248501520151604483015234905af180156104ba576104aa5750f35b6104b39061158f565b6101365780f35b6040513d84823e3d90fd5b505050fd5b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365767ffffffffffffffff600435818111610a6957610516903690600401611470565b61051e61161c565b61052781611ec7565b9061053560405192836115db565b8082527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe061056282611ec7565b01855b818110610a52575050845b81811061086957506040517f44adc90e0000000000000000000000000000000000000000000000000000000081526024810190602060048201528351809252604481016005926020604482861b85010196019189905b8282106107a4575050505086818073ffffffffffffffffffffffffffffffffffffffff96038134887f0000000000000000000000000000000000000000000000000000000000000000165af1958615610799578796610704575b5050508490855b818110610674578587604051918291602083016020845282518091526020604085019301915b81811061065b575050500390f35b825184528594506020938401939092019160010161064d565b61067f818387611ef9565b61068c6020820182611f68565b905060608992015b898284106106a85750505050600101610627565b819293966106b76040936119ae565b6106c1828d612010565b518352896001948594856020522091167fffffffffffffffffffffffff000000000000000000000000000000000000000082541617905501950190919091610694565b90919295503d8088843e61071881846115db565b82019160208184031261079157805191821161079157019181601f8401121561079557825192602061074985611ec7565b9461075760405196876115db565b808652818601931b82010192831161079157602001905b8282106107815750505092388080610620565b815181526020918201910161076e565b8780fd5b8680fd5b6040513d89823e3d90fd5b909192967fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbc8582030182528a8851916020604082019380518352015192604060208301528351809152606091602083820193838c1b8301019501935b8281106108205750505050506020806001929901920192019092916105c6565b909192939460208061085c837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa087600196030189528951611944565b9701950193929101610800565b610874818386611ef9565b6108816020820182611f68565b9081158015610a3a575b610a10576080830135895b838110610939575050604051926108ac84611573565b3583526108b882611ec7565b916108c660405193846115db565b80835260051b8101602083013682116109355782905b82821061090c57505050506020820152600191906108fa8286612010565b526109058185612010565b5001610570565b81358b8111610931576020916109268392369088016117e8565b8152019101906108dc565b8c80fd5b8a80fd5b6109488160051b840184611911565b906109566040870187611fbc565b8293919310156109e35761096c606088016119ae565b908c851685036109df5773ffffffffffffffffffffffffffffffffffffffff6109d9926109c16001966109b0604051956109a587611528565b8d35875236906117e8565b6020860152369060608802016118d3565b60408401521660608201528c851660808201526119cf565b01610896565b8d80fd5b60248d7f4e487b710000000000000000000000000000000000000000000000000000000081526032600452fd5b60046040517f947d5a84000000000000000000000000000000000000000000000000000000008152fd5b50610a486040840184611fbc565b905082141561088b565b602090610a5d611edf565b82828701015201610565565b8280fd5b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261013657602073ffffffffffffffffffffffffffffffffffffffff60035416604051908152f35b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261013657610af661161c565b600073ffffffffffffffffffffffffffffffffffffffff6003547fffffffffffffffffffffffff00000000000000000000000000000000000000008116600355167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e08280a380f35b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261013657602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b506020907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc9082823601126101365760043567ffffffffffffffff808211610a695760e082600401948336030112610a6957610c2761161c565b60405193610c3485611528565b80359485815260248401928335908111610ddf5791610ca2610cbd9492610c64610ca795600436918a01016117e8565b8a820152610c7536604489016118d3565b6040820152610c9860c460a4890198610c8d8a611507565b6060850152016117d3565b60808201526119cf565b611911565b60405194610cb486611573565b855236906117e8565b92848101938452610d0e6040519485927ff17325e700000000000000000000000000000000000000000000000000000000845287600485015251602484015251604060448401526064830190611944565b0390848473ffffffffffffffffffffffffffffffffffffffff938134867f0000000000000000000000000000000000000000000000000000000000000000165af1938415610dd4578394610da3575b50610d696040916119ae565b92848152600186522091167fffffffffffffffffffffffff0000000000000000000000000000000000000000825416179055604051908152f35b9093508481813d8311610dcd575b610dbb81836115db565b81010312610a69575192610d69610d5d565b503d610db1565b6040513d85823e3d90fd5b8580fd5b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610136576040519080805491600183811c92818516948515610f3a575b6020958686108114610f0d57858852879493929187908215610ecc575050600114610e73575b5050610e5f925003836115db565b6101326040519282849384528301906114c4565b908592508180527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5635b858310610eb4575050610e5f93508201013880610e51565b80548389018501528794508693909201918101610e9c565b91509350610e5f9592507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0091501682840152151560051b8201013880610e51565b6024837f4e487b710000000000000000000000000000000000000000000000000000000081526022600452fd5b93607f1693610e2b565b503461013657807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365760206040517f4120d3b28306666b714826ad7cb70744d9658ad3e6cd873411bedadcf55afda78152f35b50346101365760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365773ffffffffffffffffffffffffffffffffffffffff6040602092600435815260018452205416604051908152f35b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101365760043567ffffffffffffffff811161146c57611046903690600401611470565b9061104f61161c565b61105882611ec7565b9161106660405193846115db565b8083527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe061109382611ec7565b01845b81811061145557505090835b8281106112015750505073ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016803b15610a69579082906040519283917f4cb7e9e5000000000000000000000000000000000000000000000000000000008352602483016020600485015281518091526044840190602060448260051b87010193019186905b82821061116a5750505050828091039134905af180156104ba5761115e575080f35b6111679061158f565b80f35b9295847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbc929593969850030182528451602060608160408501938051865201519360408382015284518094520192019089905b8082106111df575050506020806001929601920192019287959387959361113c565b90919260206040600192828751805183520151838201520194019201906111bd565b61120f818484959794611ef9565b9160a083360312610136576040519361122785611528565b83358552602084013567ffffffffffffffff8111610a69578401601f9436868301121561141c57813561125981611ec7565b9261126760405194856115db565b81845260208085019260061b8201019036821161079557602001915b8183106114245750505060208701918252604081013567ffffffffffffffff81116114205781019536908701121561141c578535956112c187611ec7565b966112cf60405198896115db565b80885260206060818a0192028301019136831161079557602001905b828210611402575050506080611318918760408a015261130d60608201611507565b60608a0152016117d3565b60808701525193845180159182156113f6575b5050610a1057815b84518110156113b957806113b361134c60019388612010565b5188519061135e8460408c0151612010565b5173ffffffffffffffffffffffffffffffffffffffff60608c0151169067ffffffffffffffff60808d015116926040519461139886611528565b8552602085015260408401526060830152608082015261206a565b01611333565b50935160405191969360019392916113d083611573565b825260208201526113e18287612010565b526113ec8186612010565b50019190916110a2565b5114159050388061132b565b602060609161141136856118d3565b8152019101906112eb565b8380fd5b8480fd5b604083360312610795576020604091825161143e81611573565b853581528286013583820152815201920191611283565b602090611460611edf565b82828801015201611096565b5080fd5b9181601f840112156102715782359167ffffffffffffffff8311610271576020808501948460051b01011161027157565b60005b8381106114b45750506000910152565b81810151838201526020016114a4565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f602093611500815180928187528780880191016114a1565b0116010190565b359073ffffffffffffffffffffffffffffffffffffffff8216820361027157565b60a0810190811067ffffffffffffffff82111761154457604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040810190811067ffffffffffffffff82111761154457604052565b67ffffffffffffffff811161154457604052565b6060810190811067ffffffffffffffff82111761154457604052565b6080810190811067ffffffffffffffff82111761154457604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff82111761154457604052565b73ffffffffffffffffffffffffffffffffffffffff60035416330361163d57565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602060248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152fd5b73ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000163014806117aa575b15611703577f000000000000000000000000000000000000000000000000000000000000000090565b60405160208101907f000000000000000000000000000000000000000000000000000000000000000082527f000000000000000000000000000000000000000000000000000000000000000060408201527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260a0815260c0810181811067ffffffffffffffff8211176115445760405251902090565b507f000000000000000000000000000000000000000000000000000000000000000046146116da565b359067ffffffffffffffff8216820361027157565b919060c083820312610271576040519067ffffffffffffffff60c083018181118482101761154457604052829461181e81611507565b845260209261182e8483016117d3565b848601526040820135801515810361027157604086015260608201356060860152608082013583811161027157820181601f8201121561027157803593841161154457604051916118a6867fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f88011601846115db565b84835285858301011161027157848460a09695879660009401838601378301015260808501520135910152565b9190826060910312610271576040516118eb816115a3565b8092803560ff811681036102715760409182918452602081013560208501520135910152565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff4181360301821215610271570190565b9073ffffffffffffffffffffffffffffffffffffffff825116815267ffffffffffffffff60208301511660208201526040820151151560408201526060820151606082015260a0806119a5608085015160c0608086015260c08501906114c4565b93015191015290565b3573ffffffffffffffffffffffffffffffffffffffff811681036102715790565b608081019067ffffffffffffffff808351168015159081611b43575b50611b19576020820151906040938484015193611a0785611dd7565b80519173ffffffffffffffffffffffffffffffffffffffff9485815116918560208301511691898101511515876080606084015193015160208151910120935116938b519560208701987f4120d3b28306666b714826ad7cb70744d9658ad3e6cd873411bedadcf55afda78a528d8801526060870152608086015260a085015260c084015260e0830152610100908183015281526101208101938185109085111761154457611ae395611ac6606094611adb9388978b52519020611d85565b9060ff81511689602083015192015192611ce9565b959095611b50565b015116911603611af05750565b600490517f8baa579f000000000000000000000000000000000000000000000000000000008152fd5b60046040517f1ab7da6b000000000000000000000000000000000000000000000000000000008152fd5b90508142161015386119eb565b6005811015611cba5780611b615750565b60018103611bc75760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152fd5b60028103611c2d5760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152fd5b600314611c3657565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c60448201527f75650000000000000000000000000000000000000000000000000000000000006064820152fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311611d795791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa15611d6c57815173ffffffffffffffffffffffffffffffffffffffff811615611d66579190565b50600190565b50604051903d90823e3d90fd5b50505050600090600390565b611d8d61169b565b906040519060208201927f190100000000000000000000000000000000000000000000000000000000000084526022830152604282015260428152611dd1816115bf565b51902090565b80519060406020820151910151604051917fff00000000000000000000000000000000000000000000000000000000000000602084019460f81b1684526021830152604182015260418152611e2b816115bf565b60ff6040516020818451611e408183896114a1565b810160028152030190205416611e9d57611e68916020916040519384928392519283916114a1565b8101600281520301902060017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055565b60046040517fcce9a824000000000000000000000000000000000000000000000000000000008152fd5b67ffffffffffffffff81116115445760051b60200190565b60405190611eec82611573565b6060602083600081520152565b9190811015611f395760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6181360301821215610271570190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610271570180359067ffffffffffffffff821161027157602001918160051b3603831361027157565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610271570180359067ffffffffffffffff82116102715760200191606082023603831361027157565b8051821015611f395760209160051b010190565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc6040910112610271576040519061205b82611573565b60243582526044356020830152565b608081019067ffffffffffffffff9081835116801515908161218e575b50611b19576020810151918251600052600160205273ffffffffffffffffffffffffffffffffffffffff9260409484866000205416801561216557330361213c5792611adb859493611ac6606094611ae398968a860151936120e885611dd7565b865192519151168b519160208301937f96bdbea8fa280f8a0d0835587e1fbb1470e81d05c44514158443340cea40a05d85528d8401528883015260808201526080815261213481611528565b519020611d85565b600486517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b600487517fc5723b51000000000000000000000000000000000000000000000000000000008152fd5b905082421610153861208756fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.PermissionedEIP712Proxy__factory=s}));var examples$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.PermissionedEIP712Proxy__factory=void 0;Object.defineProperty(t,"PermissionedEIP712Proxy__factory",{enumerable:true,get:function(){return PermissionedEIP712Proxy__factory_1.PermissionedEIP712Proxy__factory}})}));var EIP712Proxy__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.EIP712Proxy__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"string",name:"name",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"DeadlineExpired",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"UsedSignature",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttester",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getEAS",outputs:[{internalType:"contract IEAS",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct MultiDelegatedProxyRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"},{internalType:"uint64",name:"deadline",type:"uint64"}],internalType:"struct DelegatedProxyRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"}];const n="0x61016060409080825234620003505762002239803803809162000023828562000355565b83398101918082840312620003505781516001600160a01b03811693909190848303620003505760208481015190946001600160401b03919082821162000350570194601f838188011215620003505786518381116200031657855197601f199562000096838501881686018b62000355565b828a528483830101116200035057839060005b8381106200033b575050600091890101528451858101908082108583111762000316578391875260038152019662302e3160e81b8852600381518483012098208860e05261010099818b524660a052875191858301907f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f9b8c83528a85015260608401524660808401523060a084015260a0835260c0830192808410888511176200031657838a525190206080523060c052610120998a52156200032c575061014096875280519384116200031657600054926001938481811c911680156200030b575b82821014620002f557838111620002aa575b50809285116001146200024057508394509083929160009462000234575b50501b916000199060031b1c1916176000555b5191611ebf93846200037a8539608051846113d7015260a051846114a3015260c051846113a8015260e051846114260152518361144c015251826114030152518181816102a5015281816104870152818161094f01528181610acb0152610e590152f35b015192503880620001bd565b9294849081166000805284600020946000905b888383106200028f575050501062000275575b505050811b01600055620001d0565b015160001960f88460031b161c1916905538808062000266565b85870151885590960195948501948793509081019062000253565b60008052816000208480880160051c820192848910620002eb575b0160051c019085905b828110620002de5750506200019f565b60008155018590620002ce565b92508192620002c5565b634e487b7160e01b600052602260045260246000fd5b90607f16906200018d565b634e487b7160e01b600052604160045260246000fd5b6341bc07ff60e11b8152600490fd5b8181018301518b8201840152859201620000a9565b600080fd5b601f909101601f19168101906001600160401b03821190821017620003165760405256fe6080604052600436101561001257600080fd5b6000803560e01c80630eabf66014610d9957806310d736d514610d3b57806312b11a1714610ce257806317d7de7c14610b815780633c0427151461097357806365c40b9c146109045780639541152514610369578063a6d4dbc7146101b2578063b83010d314610159578063ed24911d146101185763ffa1ad741461009657600080fd5b3461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610115576101116040516100d3816112e8565b600381527f302e310000000000000000000000000000000000000000000000000000000000602082015260405191829160208352602083019061125a565b0390f35b80fd5b503461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610115576020610151611391565b604051908152f35b503461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101155760206040517f96bdbea8fa280f8a0d0835587e1fbb1470e81d05c44514158443340cea40a05d8152f35b506101007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610115576040516101ea8161129d565b6004358082526101f936611843565b602083015260607fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9c3601126103645760405161023481611318565b60643560ff81168103610364578152608435602082015260a4356040820152604083015260c43573ffffffffffffffffffffffffffffffffffffffff90818116810361036457606084015260e43567ffffffffffffffff8116810361036457836102a391608087960152611c91565b7f00000000000000000000000000000000000000000000000000000000000000001690604051906102d3826112e8565b81526102de36611843565b60208201908152823b1561035f576064849260209460405195869485937f4692626700000000000000000000000000000000000000000000000000000000855251600485015251805160248501520151604483015234905af18015610354576103445750f35b61034d90611304565b6101155780f35b6040513d84823e3d90fd5b505050fd5b600080fd5b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101155767ffffffffffffffff600435818111610900576103b5903690600401611206565b6103be816116e6565b906103cc6040519283611350565b8082527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe06103f9826116e6565b01855b8181106108e9575050845b81811061070057506040517f44adc90e0000000000000000000000000000000000000000000000000000000081526024810190602060048201528351809252604481016005926020604482861b85010196019189905b82821061063b575050505086818073ffffffffffffffffffffffffffffffffffffffff96038134887f0000000000000000000000000000000000000000000000000000000000000000165af195861561063057879661059b575b5050508490855b81811061050b578587604051918291602083016020845282518091526020604085019301915b8181106104f2575050500390f35b82518452859450602093840193909201916001016104e4565b610516818387611718565b6105236020820182611787565b905060608992015b8982841061053f57505050506001016104be565b8192939661054e6040936116c5565b610558828d61182f565b518352896001948594856020522091167fffffffffffffffffffffffff00000000000000000000000000000000000000008254161790550195019091909161052b565b90919295503d8088843e6105af8184611350565b82019160208184031261062857805191821161062857019181601f8401121561062c5782519260206105e0856116e6565b946105ee6040519687611350565b808652818601931b82010192831161062857602001905b82821061061857505050923880806104b7565b8151815260209182019101610605565b8780fd5b8680fd5b6040513d89823e3d90fd5b909192967fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbc8582030182528a8851916020604082019380518352015192604060208301528351809152606091602083820193838c1b8301019501935b8281106106b757505050505060208060019299019201920190929161045d565b90919293946020806106f3837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa08760019603018952895161165b565b9701950193929101610697565b61070b818386611718565b6107186020820182611787565b90811580156108d1575b6108a7576080830135895b8381106107d057505060405192610743846112e8565b35835261074f826116e6565b9161075d6040519384611350565b80835260051b8101602083013682116107cc5782905b8282106107a35750505050602082015260019190610791828661182f565b5261079c818561182f565b5001610407565b81358b81116107c8576020916107bd8392369088016114ff565b815201910190610773565b8c80fd5b8a80fd5b6107df8160051b840184611628565b906107ed60408701876117db565b82939193101561087a57610803606088016116c5565b908c851685036108765773ffffffffffffffffffffffffffffffffffffffff610870926108586001966108476040519561083c8761129d565b8d35875236906114ff565b6020860152369060608802016115ea565b60408401521660608201528c85166080820152611889565b0161072d565b8d80fd5b60248d7f4e487b710000000000000000000000000000000000000000000000000000000081526032600452fd5b60046040517f947d5a84000000000000000000000000000000000000000000000000000000008152fd5b506108df60408401846117db565b9050821415610722565b6020906108f46116fe565b828287010152016103fc565b8280fd5b503461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261011557602060405173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b506020907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc9082823601126101155760043567ffffffffffffffff8082116109005760e08260040194833603011261090057604051936109d28561129d565b80359485815260248401928335908111610b7d5791610a40610a5b9492610a02610a4595600436918a01016114ff565b8a820152610a1336604489016115ea565b6040820152610a3660c460a4890198610a2b8a6114c9565b6060850152016114ea565b6080820152611889565b611628565b60405194610a52866112e8565b855236906114ff565b92848101938452610aac6040519485927ff17325e70000000000000000000000000000000000000000000000000000000084528760048501525160248401525160406044840152606483019061165b565b0390848473ffffffffffffffffffffffffffffffffffffffff938134867f0000000000000000000000000000000000000000000000000000000000000000165af1938415610b72578394610b41575b50610b076040916116c5565b92848152600186522091167fffffffffffffffffffffffff0000000000000000000000000000000000000000825416179055604051908152f35b9093508481813d8311610b6b575b610b598183611350565b81010312610900575192610b07610afb565b503d610b4f565b6040513d85823e3d90fd5b8580fd5b503461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610115576040519080805491600183811c92818516948515610cd8575b6020958686108114610cab57858852879493929187908215610c6a575050600114610c11575b5050610bfd92500383611350565b61011160405192828493845283019061125a565b908592508180527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5635b858310610c52575050610bfd93508201013880610bef565b80548389018501528794508693909201918101610c3a565b91509350610bfd9592507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0091501682840152151560051b8201013880610bef565b6024837f4e487b710000000000000000000000000000000000000000000000000000000081526022600452fd5b93607f1693610bc9565b503461011557807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101155760206040517f4120d3b28306666b714826ad7cb70744d9658ad3e6cd873411bedadcf55afda78152f35b50346101155760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101155773ffffffffffffffffffffffffffffffffffffffff6040602092600435815260018452205416604051908152f35b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101155760043567ffffffffffffffff811161120257610de4903690600401611206565b90610dee826116e6565b91610dfc6040519384611350565b8083527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0610e29826116e6565b01845b8181106111eb57505090835b828110610f975750505073ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016803b15610900579082906040519283917f4cb7e9e5000000000000000000000000000000000000000000000000000000008352602483016020600485015281518091526044840190602060448260051b87010193019186905b828210610f005750505050828091039134905af1801561035457610ef4575080f35b610efd90611304565b80f35b9295847fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffbc929593969850030182528451602060608160408501938051865201519360408382015284518094520192019089905b808210610f755750505060208060019296019201920192879593879593610ed2565b9091926020604060019282875180518352015183820152019401920190610f53565b610fa5818484959794611718565b9160a0833603126101155760405193610fbd8561129d565b83358552602084013567ffffffffffffffff8111610900578401601f943686830112156111b2578135610fef816116e6565b92610ffd6040519485611350565b81845260208085019260061b8201019036821161062c57602001915b8183106111ba5750505060208701918252604081013567ffffffffffffffff81116111b6578101953690870112156111b257853595611057876116e6565b966110656040519889611350565b80885260206060818a0192028301019136831161062c57602001905b8282106111985750505060806110ae918760408a01526110a3606082016114c9565b60608a0152016114ea565b608087015251938451801591821561118c575b50506108a757815b845181101561114f57806111496110e26001938861182f565b518851906110f48460408c015161182f565b5173ffffffffffffffffffffffffffffffffffffffff60608c0151169067ffffffffffffffff60808d015116926040519461112e8661129d565b85526020850152604084015260608301526080820152611c91565b016110c9565b5093516040519196936001939291611166836112e8565b82526020820152611177828761182f565b52611182818661182f565b5001919091610e38565b511415905038806110c1565b60206060916111a736856115ea565b815201910190611081565b8380fd5b8480fd5b60408336031261062c57602060409182516111d4816112e8565b853581528286013583820152815201920191611019565b6020906111f66116fe565b82828801015201610e2c565b5080fd5b9181601f840112156103645782359167ffffffffffffffff8311610364576020808501948460051b01011161036457565b60005b83811061124a5750506000910152565b818101518382015260200161123a565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f60209361129681518092818752878088019101611237565b0116010190565b60a0810190811067ffffffffffffffff8211176112b957604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040810190811067ffffffffffffffff8211176112b957604052565b67ffffffffffffffff81116112b957604052565b6060810190811067ffffffffffffffff8211176112b957604052565b6080810190811067ffffffffffffffff8211176112b957604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176112b957604052565b73ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000163014806114a0575b156113f9577f000000000000000000000000000000000000000000000000000000000000000090565b60405160208101907f000000000000000000000000000000000000000000000000000000000000000082527f000000000000000000000000000000000000000000000000000000000000000060408201527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260a0815260c0810181811067ffffffffffffffff8211176112b95760405251902090565b507f000000000000000000000000000000000000000000000000000000000000000046146113d0565b359073ffffffffffffffffffffffffffffffffffffffff8216820361036457565b359067ffffffffffffffff8216820361036457565b919060c083820312610364576040519067ffffffffffffffff60c08301818111848210176112b9576040528294611535816114c9565b84526020926115458483016114ea565b848601526040820135801515810361036457604086015260608201356060860152608082013583811161036457820181601f820112156103645780359384116112b957604051916115bd867fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8801160184611350565b84835285858301011161036457848460a09695879660009401838601378301015260808501520135910152565b91908260609103126103645760405161160281611318565b8092803560ff811681036103645760409182918452602081013560208501520135910152565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff4181360301821215610364570190565b9073ffffffffffffffffffffffffffffffffffffffff825116815267ffffffffffffffff60208301511660208201526040820151151560408201526060820151606082015260a0806116bc608085015160c0608086015260c085019061125a565b93015191015290565b3573ffffffffffffffffffffffffffffffffffffffff811681036103645790565b67ffffffffffffffff81116112b95760051b60200190565b6040519061170b826112e8565b6060602083600081520152565b91908110156117585760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff6181360301821215610364570190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610364570180359067ffffffffffffffff821161036457602001918160051b3603831361036457565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215610364570180359067ffffffffffffffff82116103645760200191606082023603831361036457565b80518210156117585760209160051b010190565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc6040910112610364576040519061187a826112e8565b60243582526044356020830152565b608081019067ffffffffffffffff8083511680151590816119fd575b506119d35760208201519060409384840151936118c185611dc2565b80519173ffffffffffffffffffffffffffffffffffffffff9485815116918560208301511691898101511515876080606084015193015160208151910120935116938b519560208701987f4120d3b28306666b714826ad7cb70744d9658ad3e6cd873411bedadcf55afda78a528d8801526060870152608086015260a085015260c084015260e083015261010090818301528152610120810193818510908511176112b95761199d956119806060946119959388978b52519020611c3f565b9060ff81511689602083015192015192611ba3565b959095611a0a565b0151169116036119aa5750565b600490517f8baa579f000000000000000000000000000000000000000000000000000000008152fd5b60046040517f1ab7da6b000000000000000000000000000000000000000000000000000000008152fd5b90508142161015386118a5565b6005811015611b745780611a1b5750565b60018103611a815760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152fd5b60028103611ae75760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152fd5b600314611af057565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c60448201527f75650000000000000000000000000000000000000000000000000000000000006064820152fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311611c335791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa15611c2657815173ffffffffffffffffffffffffffffffffffffffff811615611c20579190565b50600190565b50604051903d90823e3d90fd5b50505050600090600390565b611c47611391565b906040519060208201927f190100000000000000000000000000000000000000000000000000000000000084526022830152604282015260428152611c8b81611334565b51902090565b608081019067ffffffffffffffff90818351168015159081611db5575b506119d3576020810151918251600052600160205273ffffffffffffffffffffffffffffffffffffffff92604094848660002054168015611d8c573303611d63579261199585949361198060609461199d98968a86015193611d0f85611dc2565b865192519151168b519160208301937f96bdbea8fa280f8a0d0835587e1fbb1470e81d05c44514158443340cea40a05d85528d84015288830152608082015260808152611d5b8161129d565b519020611c3f565b600486517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b600487517fc5723b51000000000000000000000000000000000000000000000000000000008152fd5b9050824216101538611cae565b80519060406020820151910151604051917fff00000000000000000000000000000000000000000000000000000000000000602084019460f81b1684526021830152604182015260418152611e1681611334565b60ff6040516020818451611e2b818389611237565b810160028152030190205416611e8857611e5391602091604051938492839251928391611237565b8101600281520301902060017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00825416179055565b60046040517fcce9a824000000000000000000000000000000000000000000000000000000008152fdfea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.EIP712Proxy__factory=s}));var proxy=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.EIP712Proxy__factory=t.examples=void 0;t.examples=i(examples$1);Object.defineProperty(t,"EIP712Proxy__factory",{enumerable:true,get:function(){return EIP712Proxy__factory_1.EIP712Proxy__factory}})}));var EIP712Verifier__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.EIP712Verifier__factory=void 0;const r=[{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.EIP712Verifier__factory=n}));var eip712=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.EIP712Verifier__factory=t.proxy=void 0;t.proxy=i(proxy);Object.defineProperty(t,"EIP712Verifier__factory",{enumerable:true,get:function(){return EIP712Verifier__factory_1.EIP712Verifier__factory}})}));var AttestationResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.AttestationResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"OutOfBounds",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"start",type:"uint256"}],name:"toBytes32",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60a03461008957601f61088d38819003918201601f19168301916001600160401b0383118484101761008e5780849260209460405283398101031261008957516001600160a01b0381168082036100895715610077576080526040516107e890816100a5823960805181818161063401526107670152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe6080604052600436101561001e575b361561001957600080fd5b6104a5565b60003560e01c806388e5b2d91461008e57806391db0b7e1461008957806399dd9bd714610084578063ce46e0461461007f578063e49617e11461007a578063e60c3505146100755763ffa1ad740361000e576103d6565b6103bb565b61039e565b610313565b61026b565b610156565b60206100ad61009c366100ed565b926100a892919261061d565b6105da565b6040519015158152f35b9181601f840112156100e85782359167ffffffffffffffff83116100e8576020808501948460051b0101116100e857565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126100e85767ffffffffffffffff916004358381116100e85782610138916004016100b7565b939093926024359182116100e857610152916004016100b7565b9091565b60206100ad610164366100ed565b9261017092919261061d565b610553565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6040810190811067ffffffffffffffff8211176101c057604052565b610175565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176101c057604052565b92919267ffffffffffffffff82116101c0576040519161024e60207fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f84011601846101c5565b8294818452818301116100e8578281602093846000960137010152565b346100e85760407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126100e85760043567ffffffffffffffff81116100e857366023820112156100e8576102cb903690602481600401359101610206565b60243590805160208301116102e95701602090810151604051908152f35b60046040517fb4120f14000000000000000000000000000000000000000000000000000000008152fd5b346100e85760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126100e857602060405160008152f35b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126100e8576004359167ffffffffffffffff83116100e85782610140920301126100e85760040190565b6103a73661034d565b506103b061061d565b602060405160018152f35b60206100ad6103c93661034d565b6103d161061d565b6106aa565b346100e85760007ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126100e8576040805190610413826101a4565b6004825260207f302e323700000000000000000000000000000000000000000000000000000000818401528151928184928352815191828285015260005b83811061048f575050600083830185015250601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518782018701528694508201610451565b60046040517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b919081101561050e5760051b0190565b6104cf565b919081101561050e5760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156100e8570190565b909192349160009182935b8585106105715750505050505050600190565b61057c8583896104fe565b35908082116105b0576105936103d1878987610513565b156105a557906001910394019361055e565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b92600090345b8383106105f257505050505050600190565b6105fd8383876104fe565b358181116105b05760019161061385878a610513565b50039201916105e0565b73ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016330361065c57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b908160209103126100e8575180151581036100e85790565b6040513d6000823e3d90fd5b610120810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1813603018212156100e8570180359067ffffffffffffffff82116100e8576020019080360382136100e85761071661071161074e936020933691610206565b6107cb565b604051809381927fe30bb563000000000000000000000000000000000000000000000000000000008352600483019190602083019252565b038173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165afa9081156107c65760009161079b575090565b6107bc915060203d81116107bf575b6107b481836101c5565b810190610686565b90565b503d6107aa565b61069e565b60208151106102e957602001519056fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t){return super.deploy(e,t||{})}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.AttestationResolver__factory=s}));var AttesterResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.AttesterResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"address",name:"targetAttester",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60c03461009e57601f61062738819003918201601f19168301916001600160401b038311848410176100a357808492604094855283398101031261009e5780516001600160a01b03918282169081830361009e5760200151928316830361009e571561008c5760805260a05260405161056d90816100ba8239608051816104c5015260a0518161053c0152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d91461023657806391db0b7e14610216578063ce46e046146101d9578063e49617e1146101bd578063e60c3505146101985763ffa1ad74146100905750610011565b913461019457827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101945781519082820182811067ffffffffffffffff82111761016857835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061015257505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518882018801528795508201610116565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b6020836101b46101a736610357565b6101af6104ae565b610517565b90519015158152f35b6020836101c936610357565b506101d26104ae565b5160018152f35b50903461021257817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102125751908152602090f35b5080fd5b6020836101b4610225366102ee565b926102319291926104ae565b610427565b5091610241366102ee565b610250969392969491946104ae565b345b878510610263576020875160018152f35b61026e8583886103a8565b35908082116102905790600191610286878b886103e7565b5003940193610252565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f840112156102e95782359167ffffffffffffffff83116102e9576020808501948460051b0101116102e957565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102e95767ffffffffffffffff916004358381116102e95782610339916004016102b8565b939093926024359182116102e957610353916004016102b8565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126102e9576004359167ffffffffffffffff83116102e95782610140920301126102e95760040190565b91908110156103b85760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103b85760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156102e9570190565b909192349160009182935b8585106104455750505050505050600190565b6104508583896103a8565b3590808211610484576104676101af8789876103e7565b15610479579060019103940193610432565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001633036104ed57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b60e0013573ffffffffffffffffffffffffffffffffffffffff8082168092036102e9577f000000000000000000000000000000000000000000000000000000000000000016149056fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.AttesterResolver__factory=s}));var DataResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.DataResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60a03461008257601f6106bc38819003918201601f19168301916001600160401b038311848410176100875780849260209460405283398101031261008257516001600160a01b03811680820361008257156100705760805260405161061e908161009e8239608051816104c50152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d91461023657806391db0b7e14610216578063ce46e046146101d9578063e49617e1146101bd578063e60c3505146101985763ffa1ad74146100905750610011565b913461019457827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101945781519082820182811067ffffffffffffffff82111761016857835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061015257505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518882018801528795508201610116565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b6020836101b46101a736610357565b6101af6104ae565b610568565b90519015158152f35b6020836101c936610357565b506101d26104ae565b5160018152f35b50903461021257817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102125751908152602090f35b5080fd5b6020836101b4610225366102ee565b926102319291926104ae565b610427565b5091610241366102ee565b610250969392969491946104ae565b345b878510610263576020875160018152f35b61026e8583886103a8565b35908082116102905790600191610286878b886103e7565b5003940193610252565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f840112156102e95782359167ffffffffffffffff83116102e9576020808501948460051b0101116102e957565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102e95767ffffffffffffffff916004358381116102e95782610339916004016102b8565b939093926024359182116102e957610353916004016102b8565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126102e9576004359167ffffffffffffffff83116102e95782610140920301126102e95760040190565b91908110156103b85760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103b85760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156102e9570190565b909192349160009182935b8585106104455750505050505050600190565b6104508583896103a8565b3590808211610484576104676101af8789876103e7565b15610479579060019103940193610432565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001633036104ed57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe1813603018212156102e9570180359067ffffffffffffffff82116102e9576020019181360383136102e957565b610120810190600161057a8383610517565b905014918261058857505090565b9091506105958183610517565b919091156103b8577fff0000000000000000000000000000000000000000000000000000000000000080923516159283156105d1575b50505090565b6105dc929350610517565b919091156103b8577f0100000000000000000000000000000000000000000000000000000000000000913516143880806105cb56fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t){return super.deploy(e,t||{})}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.DataResolver__factory=s}));var ExpirationTimeResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ExpirationTimeResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"validAfter",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60c03461009457601f61061038819003918201601f19168301916001600160401b038311848410176100995780849260409485528339810103126100945780516001600160a01b03811691828203610094576020015191156100825760805260a05260405161056090816100b08239608051816104c5015260a0518161052f0152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d91461023657806391db0b7e14610216578063ce46e046146101d9578063e49617e1146101bd578063e60c3505146101985763ffa1ad74146100905750610011565b913461019457827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101945781519082820182811067ffffffffffffffff82111761016857835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061015257505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518882018801528795508201610116565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b6020836101b46101a736610357565b6101af6104ae565b610517565b90519015158152f35b6020836101c936610357565b506101d26104ae565b5160018152f35b50903461021257817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102125751908152602090f35b5080fd5b6020836101b4610225366102ee565b926102319291926104ae565b610427565b5091610241366102ee565b610250969392969491946104ae565b345b878510610263576020875160018152f35b61026e8583886103a8565b35908082116102905790600191610286878b886103e7565b5003940193610252565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f840112156102e95782359167ffffffffffffffff83116102e9576020808501948460051b0101116102e957565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102e95767ffffffffffffffff916004358381116102e95782610339916004016102b8565b939093926024359182116102e957610353916004016102b8565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126102e9576004359167ffffffffffffffff83116102e95782610140920301126102e95760040190565b91908110156103b85760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103b85760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156102e9570190565b909192349160009182935b8585106104455750505050505050600190565b6104508583896103a8565b3590808211610484576104676101af8789876103e7565b15610479579060019103940193610432565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001633036104ed57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b6060013567ffffffffffffffff81168091036102e9577f000000000000000000000000000000000000000000000000000000000000000011159056fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.ExpirationTimeResolver__factory=s}));var PayingResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.PayingResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"incentive",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"InvalidValue",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60c03461009b57601f6108ab38819003918201601f19168301916001600160401b038311848410176100a057808492604094855283398101031261009b5780516001600160a01b0381169182820361009b576020015191156100895760805260a0526040516107f490816100b782396080518161049a015260a05181818161053b015261058b0152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe604060808152600436101561001d575b50361561001b57600080fd5b005b600090813560e01c806388e5b2d91461021357806391db0b7e146101f3578063ce46e046146101ba578063e49617e11461019c578063e60c3505146101755763ffa1ad741461006c575061000f565b3461017157817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261017157805181810181811067ffffffffffffffff821117610144578252600481526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061012e57505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b81810183015188820188015287955082016100f2565b6024847f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b5080fd5b602082610193610184366102d2565b61018c610483565b349061050d565b90519015158152f35b6020826101936101ab366102d2565b6101b3610483565b3490610589565b503461017157817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610171576020905160018152f35b60208261019361020236610269565b9261020e929192610483565b6103a2565b60208261019361022236610269565b9261022e929192610483565b61042d565b9181601f840112156102645782359167ffffffffffffffff8311610264576020808501948460051b01011161026457565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102645767ffffffffffffffff9160043583811161026457826102b491600401610233565b93909392602435918211610264576102ce91600401610233565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc90602082820112610264576004359167ffffffffffffffff83116102645782610140920301126102645760040190565b91908110156103335760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103335760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec181360301821215610264570190565b91926000918291345b8285106103be5750505050505050600190565b6103c9858389610323565b3590808211610403576103e6826103e188878b610362565b61050d565b156103f85790600191039401936103ab565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b91926000918291345b8285106104495750505050505050600190565b610454858389610323565b3590808211610403576104718261046c88878b610362565b610589565b156103f8579060019103940193610436565b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001633036104c257565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b3573ffffffffffffffffffffffffffffffffffffffff811681036102645790565b90610583576000808073ffffffffffffffffffffffffffffffffffffffff61053860e08396016104ec565b167f00000000000000000000000000000000000000000000000000000000000000009082821561057a575bf11561056e57600190565b6040513d6000823e3d90fd5b506108fc610563565b50600090565b7f0000000000000000000000000000000000000000000000000000000000000000908183106107df578183116105c2575b505050600190565b6105e360e073ffffffffffffffffffffffffffffffffffffffff92016104ec565b169082039182116107b0578147106107525760008080809481945af1903d1561074c5767ffffffffffffffff903d82811161071f57604051927fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0603f81601f8501160116840190848210908211176106f257604052825260203d92013e5b1561066e573880806105ba565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f416464726573733a20756e61626c6520746f2073656e642076616c75652c207260448201527f6563697069656e74206d617920686176652072657665727465640000000000006064820152fd5b6024837f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b6024827f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b50610661565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e63650000006044820152fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b50505060009056fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.PayingResolver__factory=s}));var RecipientResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.RecipientResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"address",name:"targetRecipient",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60c03461009e57601f61062738819003918201601f19168301916001600160401b038311848410176100a357808492604094855283398101031261009e5780516001600160a01b03918282169081830361009e5760200151928316830361009e571561008c5760805260a05260405161056d90816100ba8239608051816104c5015260a0518161053c0152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d91461023657806391db0b7e14610216578063ce46e046146101d9578063e49617e1146101bd578063e60c3505146101985763ffa1ad74146100905750610011565b913461019457827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101945781519082820182811067ffffffffffffffff82111761016857835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061015257505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518882018801528795508201610116565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b6020836101b46101a736610357565b6101af6104ae565b610517565b90519015158152f35b6020836101c936610357565b506101d26104ae565b5160018152f35b50903461021257817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102125751908152602090f35b5080fd5b6020836101b4610225366102ee565b926102319291926104ae565b610427565b5091610241366102ee565b610250969392969491946104ae565b345b878510610263576020875160018152f35b61026e8583886103a8565b35908082116102905790600191610286878b886103e7565b5003940193610252565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f840112156102e95782359167ffffffffffffffff83116102e9576020808501948460051b0101116102e957565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102e95767ffffffffffffffff916004358381116102e95782610339916004016102b8565b939093926024359182116102e957610353916004016102b8565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126102e9576004359167ffffffffffffffff83116102e95782610140920301126102e95760040190565b91908110156103b85760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103b85760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156102e9570190565b909192349160009182935b8585106104455750505050505050600190565b6104508583896103a8565b3590808211610484576104676101af8789876103e7565b15610479579060019103940193610432565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001633036104ed57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b60c0013573ffffffffffffffffffffffffffffffffffffffff8082168092036102e9577f000000000000000000000000000000000000000000000000000000000000000016149056fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.RecipientResolver__factory=s}));var RevocationResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.RevocationResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bool",name:"status",type:"bool"}],name:"setRevocation",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60a03461008257601f61064438819003918201601f19168301916001600160401b038311848410176100875780849260209460405283398101031261008257516001600160a01b0381168082036100825715610070576080526040516105a6908161009e8239608051816105470152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d91461030b57806391db0b7e14610289578063ce46e04614610250578063e49617e11461022d578063e60c350514610211578063f545cb66146101a35763ffa1ad741461009b5750610011565b913461019f57827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261019f5781519082820182811067ffffffffffffffff82111761017357835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061015d57505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b8181018301518882018801528795508201610121565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b50823461020d5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261020d573580151580910361020d5760ff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff00835416911617815580f35b5080fd5b60208361021d366103d3565b50610226610530565b5160018152f35b60208360ff8461023c366103d3565b50610245610530565b541690519015158152f35b50903461020d57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261020d5751908152602090f35b50916102943661036a565b6102a396939296949194610530565b345b8785106102b6576020875160018152f35b6102c1858388610424565b35908082116102e357906001916102d9878b88610463565b50039401936102a5565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b60208361032b61031a3661036a565b92610326929192610530565b6104a3565b90519015158152f35b9181601f840112156103655782359167ffffffffffffffff8311610365576020808501948460051b01011161036557565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126103655767ffffffffffffffff9160043583811161036557826103b591600401610334565b93909392602435918211610365576103cf91600401610334565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc90602082820112610365576004359167ffffffffffffffff83116103655782610140920301126103655760040190565b91908110156104345760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156104345760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec181360301821215610365570190565b91929034600091829360ff84541615925b8286106104c8575050505050505050600190565b6104d386838a610424565b359080821161050657846104e888868b610463565b506104fa5790600191039501946104b4565b50505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016330361056f57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fdfea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t){return super.deploy(e,t||{})}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.RevocationResolver__factory=s}));var TokenResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.TokenResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"contract IERC20",name:"targetToken",type:"address"},{internalType:"uint256",name:"targetAmount",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60e0346100b357601f61096e38819003918201601f19168301916001600160401b038311848410176100b8578084926060946040528339810103126100b35780516001600160a01b03808216929091908382036100b357602081015192831683036100b3576040015192156100a15760805260a05260c05260405161089f90816100cf8239608051816104e9015260a051816105e3015260c0518161059b0152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610042575b361561001c57600080fd5b517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b6000803560e01c806388e5b2d9146101a957806391db0b7e14610189578063ce46e0461461014c578063e49617e114610130578063e60c35051461010b5763ffa1ad74146100905750610011565b91903461010757827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101075761010392508051916100d18361031b565b82527f302e32370000000000000000000000000000000000000000000000000000000060208301525191829182610366565b0390f35b8280fd5b60208361012761011a366102ca565b6101226104d2565b61053b565b90519015158152f35b60208361013c366102ca565b506101456104d2565b5160018152f35b50903461018557817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101855751908152602090f35b5080fd5b60208361012761019836610261565b926101a49291926104d2565b61044b565b50916101b436610261565b6101c3969392969491946104d2565b345b8785106101d6576020875160018152f35b6101e18583886103cc565b359080821161020357906001916101f9878b8861040b565b50039401936101c5565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f8401121561025c5782359167ffffffffffffffff831161025c576020808501948460051b01011161025c57565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc82011261025c5767ffffffffffffffff9160043583811161025c57826102ac9160040161022b565b9390939260243591821161025c576102c69160040161022b565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc9060208282011261025c576004359167ffffffffffffffff831161025c57826101409203011261025c5760040190565b6040810190811067ffffffffffffffff82111761033757604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60208082528251818301819052939260005b8581106103b8575050507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8460006040809697860101520116010190565b818101830151848201604001528201610378565b91908110156103dc5760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103dc5760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec18136030182121561025c570190565b909192349160009182935b8585106104695750505050505050600190565b6104748583896103cc565b35908082116104a85761048b61012287898761040b565b1561049d579060019103940193610456565b505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016330361051157565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b60e001359073ffffffffffffffffffffffffffffffffffffffff9182811680910361025c5760405190602091828101917f23b872dd00000000000000000000000000000000000000000000000000000000835260248201523060448201527f000000000000000000000000000000000000000000000000000000000000000060648201526064815260a081019067ffffffffffffffff958183108784111761033757826040527f0000000000000000000000000000000000000000000000000000000000000000169061060d8361031b565b8483527f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c656460c0820152600080948192519082855af13d156107be573d9187831161079157604051927fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0603f81601f8401160116840198848a10908a1117610764576106a69596979860405283528286883d92013e6107ca565b8051806106b7575b50505050600190565b81849181010312610185578201519081159182150361076157506106dd578080806106ae565b608490604051907f08c379a00000000000000000000000000000000000000000000000000000000082526004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e60448201527f6f742073756363656564000000000000000000000000000000000000000000006064820152fd5b80fd5b6024867f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b6024857f4e487b710000000000000000000000000000000000000000000000000000000081526041600452fd5b6106a693949596506060915b9192901561084557508151156107de575090565b3b156107e75790565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e74726163740000006044820152fd5b8251909150156108585750805190602001fd5b61088e906040519182917f08c379a000000000000000000000000000000000000000000000000000000000835260048301610366565b0390fdfea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r,n){return super.deploy(e,t,r,n||{})}getDeployTransaction(e,t,r,n){return super.getDeployTransaction(e,t,r,n||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.TokenResolver__factory=s}));var ValueResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ValueResolver__factory=void 0;const r=[{inputs:[{internalType:"contract IEAS",name:"eas",type:"address"},{internalType:"uint256",name:"targetValue",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];const n="0x60c03461009b57601f6105fd38819003918201601f19168301916001600160401b038311848410176100a057808492604094855283398101031261009b5780516001600160a01b0381169182820361009b576020015191156100895760805260a05260405161054690816100b78239608051816104e7015260a05181818161018e01526104310152f35b6040516341bc07ff60e11b8152600490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe60406080815260049081361015610020575b5050361561001e57600080fd5b005b600091823560e01c806388e5b2d91461023657806391db0b7e1461020d578063ce46e046146101cf578063e49617e1146101b3578063e60c3505146101765763ffa1ad741461006f5750610011565b3461017257827ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101725781519082820182811067ffffffffffffffff82111761014657835281526020907f302e3237000000000000000000000000000000000000000000000000000000008282015282519382859384528251928382860152825b84811061013057505050828201840152601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168101030190f35b81810183015188820188015287955082016100f4565b6024856041847f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8280fd5b60208361018236610356565b5061018b6104d0565b517f000000000000000000000000000000000000000000000000000000000000000034148152f35b6020836101bf36610356565b506101c86104d0565b5160018152f35b50503461020957817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610209576020905160018152f35b5080fd5b60208361022d61021c366102ed565b926102289291926104d0565b610426565b90519015158152f35b50610240366102ed565b61024f969392969491946104d0565b345b878510610262576020875160018152f35b61026d8583886103a7565b359080821161028f5790600191610285878b886103e6565b5003940193610251565b8388517f11011294000000000000000000000000000000000000000000000000000000008152fd5b9181601f840112156102e85782359167ffffffffffffffff83116102e8576020808501948460051b0101116102e857565b600080fd5b60407ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc8201126102e85767ffffffffffffffff916004358381116102e85782610338916004016102b7565b939093926024359182116102e857610352916004016102b7565b9091565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020828201126102e8576004359167ffffffffffffffff83116102e85782610140920301126102e85760040190565b91908110156103b75760051b0190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b91908110156103b75760051b810135907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec1813603018212156102e8570190565b9192903460009182937f0000000000000000000000000000000000000000000000000000000000000000925b828610610466575050505050505050600190565b61047186838a6103a7565b35908082116104a65761048587858a6103e6565b5084820361049a579060019103950194610452565b50505050509250505090565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016330361050f57565b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fdfea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t,r){return super.deploy(e,t,r||{})}getDeployTransaction(e,t,r){return super.getDeployTransaction(e,t,r||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.ValueResolver__factory=s}));var examples=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ValueResolver__factory=t.TokenResolver__factory=t.RevocationResolver__factory=t.RecipientResolver__factory=t.PayingResolver__factory=t.ExpirationTimeResolver__factory=t.DataResolver__factory=t.AttesterResolver__factory=t.AttestationResolver__factory=void 0;Object.defineProperty(t,"AttestationResolver__factory",{enumerable:true,get:function(){return AttestationResolver__factory_1.AttestationResolver__factory}});Object.defineProperty(t,"AttesterResolver__factory",{enumerable:true,get:function(){return AttesterResolver__factory_1.AttesterResolver__factory}});Object.defineProperty(t,"DataResolver__factory",{enumerable:true,get:function(){return DataResolver__factory_1.DataResolver__factory}});Object.defineProperty(t,"ExpirationTimeResolver__factory",{enumerable:true,get:function(){return ExpirationTimeResolver__factory_1.ExpirationTimeResolver__factory}});Object.defineProperty(t,"PayingResolver__factory",{enumerable:true,get:function(){return PayingResolver__factory_1.PayingResolver__factory}});Object.defineProperty(t,"RecipientResolver__factory",{enumerable:true,get:function(){return RecipientResolver__factory_1.RecipientResolver__factory}});Object.defineProperty(t,"RevocationResolver__factory",{enumerable:true,get:function(){return RevocationResolver__factory_1.RevocationResolver__factory}});Object.defineProperty(t,"TokenResolver__factory",{enumerable:true,get:function(){return TokenResolver__factory_1.TokenResolver__factory}});Object.defineProperty(t,"ValueResolver__factory",{enumerable:true,get:function(){return ValueResolver__factory_1.ValueResolver__factory}})}));var ISchemaResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ISchemaResolver__factory=void 0;const r=[{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.ISchemaResolver__factory=n}));var SchemaResolver__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.SchemaResolver__factory=void 0;const r=[{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidEAS",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"attest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[],name:"isPayable",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiAttest",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation[]",name:"attestations",type:"tuple[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"multiRevoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"attestation",type:"tuple"}],name:"revoke",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.SchemaResolver__factory=n}));var resolver=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SchemaResolver__factory=t.ISchemaResolver__factory=t.examples=void 0;t.examples=i(examples);Object.defineProperty(t,"ISchemaResolver__factory",{enumerable:true,get:function(){return ISchemaResolver__factory_1.ISchemaResolver__factory}});Object.defineProperty(t,"SchemaResolver__factory",{enumerable:true,get:function(){return SchemaResolver__factory_1.SchemaResolver__factory}})}));var EAS__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.EAS__factory=void 0;const r=[{inputs:[{internalType:"contract ISchemaRegistry",name:"registry",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"AccessDenied",type:"error"},{inputs:[],name:"AlreadyRevoked",type:"error"},{inputs:[],name:"AlreadyRevokedOffchain",type:"error"},{inputs:[],name:"AlreadyTimestamped",type:"error"},{inputs:[],name:"InsufficientValue",type:"error"},{inputs:[],name:"InvalidAttestation",type:"error"},{inputs:[],name:"InvalidAttestations",type:"error"},{inputs:[],name:"InvalidExpirationTime",type:"error"},{inputs:[],name:"InvalidLength",type:"error"},{inputs:[],name:"InvalidOffset",type:"error"},{inputs:[],name:"InvalidRegistry",type:"error"},{inputs:[],name:"InvalidRevocation",type:"error"},{inputs:[],name:"InvalidRevocations",type:"error"},{inputs:[],name:"InvalidSchema",type:"error"},{inputs:[],name:"InvalidSignature",type:"error"},{inputs:[],name:"InvalidVerifier",type:"error"},{inputs:[],name:"Irrevocable",type:"error"},{inputs:[],name:"NotFound",type:"error"},{inputs:[],name:"NotPayable",type:"error"},{inputs:[],name:"WrongSchema",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schema",type:"bytes32"}],name:"Attested",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schema",type:"bytes32"}],name:"Revoked",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"revoker",type:"address"},{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"RevokedOffchain",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"Timestamped",type:"event"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"}],internalType:"struct AttestationRequest",name:"request",type:"tuple"}],name:"attest",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"}],internalType:"struct DelegatedAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[],name:"getAttestTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttestation",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getName",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"revoker",type:"address"},{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRevokeTypeHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[],name:"getSchemaRegistry",outputs:[{internalType:"contract ISchemaRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"isAttestationValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiAttestationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiAttest",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"}],internalType:"struct MultiDelegatedAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiRevocationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiRevoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"}],internalType:"struct MultiDelegatedRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"}],internalType:"struct RevocationRequest",name:"request",type:"tuple"}],name:"revoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"}],internalType:"struct DelegatedRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"revokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"timestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"}];const n="0x610160346200030457601f19906001600160401b0390601f62004c8938819003918201851683019184831184841017620003095780849260409485528339602093849181010312620003045751916001600160a01b0383168084036200030457818351966200006e886200031f565b60038852818801966245415360e81b885285516200008c816200031f565b6004958187809352019863302e323760e01b8a528a5190209820988860e05261010099808b524660a0528751858101917f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f9b8c84528a83015260608201524660808201523060a082015260a0815260c0810181811085821117620002ef5789525190206080523060c0526101209889528051918211620002da576000938454916001928381811c91168015620002cf575b83821014620002bc57601f811162000271575b5081601f85116001146200020b5750839450908392918694620001ff575b50501b916000199060031b1c19161790555b15620001f15750610140918252519161494d93846200033c8539608051846143dc015260a05184614497015260c051846143ad015260e0518461442b01525183614451015251826144080152518181816102a901528181611e660152818161268e01528181612d9a01526130180152f35b90516311a1e69760e01b8152fd5b0151925038806200016e565b9294849081168780528488209488905b888383106200025657505050106200023c575b505050811b01905562000180565b015160001960f88460031b161c191690553880806200022e565b8587015188559096019594850194879350908101906200021b565b868052828720601f860160051c810191848710620002b1575b601f0160051c019084905b828110620002a557505062000150565b88815501849062000295565b90915081906200028a565b634e487b7160e01b875260228952602487fd5b90607f16906200013d565b604186634e487b7160e01b6000525260246000fd5b604189634e487b7160e01b6000525260246000fd5b600080fd5b634e487b7160e01b600052604160045260246000fd5b604081019081106001600160401b03821117620003095760405256fe61016060406101405280610140515260048036101561001d57600080fd5b600091823560e01c90816312b11a171461118d5750806313893f611461110557806317d7de7c14610fe25780632d0335ab14610f7a57806344adc90e14610e715780634692626714610e125780634cb7e9e514610d095780634d00307014610cc0578063831e05a114610a71578063a3112a6414610a07578063b469318d14610987578063b83010d31461092c578063cf190f34146108e2578063d45c44351461088c578063e13458fc14610790578063e30bb56314610739578063e45d03f9146104b1578063e57a6b1b1461039b578063e71ff36514610310578063ed24911d146102cd578063f10b5cc81461025c578063f17325e7146101ae5763ffa1ad741461012857600080fd5b346101aa57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa5761014051516101a6916101688261141f565b81527f302e3237000000000000000000000000000000000000000000000000000000006020820152610140515191829160208352602083019061123e565b0390f35b5080fd5b50907ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc906020823601126102595782359267ffffffffffffffff84116101aa578301916101405190843603011261025957602061024e8161024786866102296102156114eb565b92610224602436920184611553565b6115d6565b61023283611586565b5261023c82611586565b503491339135611df1565b0151611586565b516101405151908152f35b80fd5b823461025957807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610259576020610140515173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000168152f35b823461025957807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610259576020610306614396565b6101405151908152f35b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa57803567ffffffffffffffff918282116103975761035f913691016111e5565b90914216925b818110610379576020846101405151908152f35b806103918561038b6001948688611a39565b356141be565b01610365565b8380fd5b5060e07ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa576101405151906103d58261139c565b358082526103e236611981565b602083015260607fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9c3601126104ad57610140515161041f81611403565b60643560ff811681036104a9578152608435602082015260a435610140518201526101405183015260c43573ffffffffffffffffffffffffffffffffffffffff8116810361039757610479838260606104a596015261487a565b610481611932565b61048a36611981565b61049382611586565b5261049d81611586565b503492612d4d565b5080f35b8480fd5b8280fd5b506020807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126104ad5767ffffffffffffffff82358181116104a95784926104ff8592369084016111e5565b91903493865b848110610510578780f35b6105208186859a9798999a61189e565b906080823603126107315761014051519761053a8961139c565b82358952858301358a811161073557830196601f973689820112156101aa5761056990369089813591016119c7565b94878b01958652610140518501358c81116104ad5785019836908a0112156101aa57883596610597886114d3565b996105a761014051519b8c611458565b888b52898b018a6060809b0283010191368311610731578b808c9201925b84841061071957505090506105e591508d6101405101978c8952016112a4565b96888d0197885251998a51801591821561070d575b50506106e257825b8a51811015610673578061066d8c8f8b8b8f926106448761063c60019a73ffffffffffffffffffffffffffffffffffffffff9451986115c2565b5193516115c2565b51925116926101405151946106588661139c565b8552840152610140518301528c82015261487a565b01610602565b5099986106d6949897506001955083906106d0939d97929c519073ffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8d018c1494511691612fca565b90611862565b91969195929301610505565b5061014051517f947d5a84000000000000000000000000000000000000000000000000000000008152fd5b51141590508e806105fa565b6107233685611698565b8152019101908b8b916105c5565b8580fd5b8780fd5b5090346102595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261025957602061078483356000526002602052604060002054151590565b61014051519015158152f35b507ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc916020833601126102595767ffffffffffffffff9282358481116104ad5760c08185019282360301126104ad576101405151946107ee8661139c565b82359485875260248301948535928311610259575060209661086b6102479561085860a461024e9a9761082b8d9b986108849836918401016115d6565b8b87015261083c3660448301611698565b61014051870152019361084e856112a4565b60608201526144bd565b6102246108636114eb565b953692611553565b61087484611586565b5261087e83611586565b506116d6565b903492611df1565b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa5760209167ffffffffffffffff913581526003835261014051902054166101405151908152f35b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa5760209061030667ffffffffffffffff421680923533614264565b823461025957807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc36011261025957602061014051517fa98d02348410c9c76735e0d0bb1396f4015ac2bb9615f9c2611d19d7a8a996508152f35b50346101aa57610140517ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa5760209167ffffffffffffffff9173ffffffffffffffffffffffffffffffffffffffff6109e3611281565b16825283526101405181206024358252835261014051902054166101405151908152f35b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa576101a691610a5b91610a47611a49565b503581526002602052610140519020611ae7565b6101405151918291602083526020830190611300565b5060207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa57803567ffffffffffffffff81116104ad57610abb8391369084016111e5565b9092610ac6826116f7565b9383346101205280935b808510610af2576101a6610ae48789614329565b6101405151918291826112c5565b9091929394610b0286838661189e565b610b0f602082018261179e565b80929192158015610ca6575b610c7b578560608301928035915b838110610bbb57505092602092610b829260019695610b7c8d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8b011494610b7461012051956116d6565b9336916117f2565b9061261c565b610b90815161012051611862565b61012052018051610ba1898b6115c2565b52610bac888a6115c2565b50515101950193929190610ad0565b610bca8160051b870187611553565b610bd9610140518401846118de565b831015610c4f576001929173ffffffffffffffffffffffffffffffffffffffff610c4992610c37610c098b6116d6565b91610c26610140515195610c1c8761139c565b8b875236906115d6565b602086015236906060880201611698565b610140518401521660608201526144bd565b01610b29565b60248b60328f7f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b8761014051517f947d5a84000000000000000000000000000000000000000000000000000000008152fd5b50610cb6610140518301836118de565b9050811415610b1b565b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa5760209061030667ffffffffffffffff42168092356141be565b506020807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126104ad57813567ffffffffffffffff928382116104a957610d54913691016111e5565b8493919290345b818610610d66578680f35b610d7186838761175e565b838101357fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe182360301811215610e0e57810191823592868411610e0a578501928060061b36038413610e0a57600193826106d092610e0295610dfb8d7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8b011494339336916119c7565b9035612fca565b950194610d5b565b8980fd5b8880fd5b5060607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa576104a590610e49611932565b90610e5336611981565b610e5c83611586565b52610e6682611586565b503491339135612d4d565b50602090817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126104ad5780359067ffffffffffffffff821161039757610ebe9084923691016111e5565b90610ec8826116f7565b93833490937fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8101905b808610610f06576101a6610ae4888a614329565b90919293949560019085610f51610f488a8888610f24838a8f61175e565b610f41610f338883018361179e565b9390951494339336916117f2565b903561261c565b96875190611862565b95018051610f5f8a8c6115c2565b52610f6a898b6115c2565b5051510196019493929190610ef2565b82346102595760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102595760209073ffffffffffffffffffffffffffffffffffffffff610fca611281565b16815260018252610140519020546101405151908152f35b823461025957807ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126102595761014051519080805461102381611a94565b808552916001918083169081156110bd5750600114611063575b6101a68561104d81870382611458565b610140515191829160208352602083019061123e565b80809450527f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5635b8284106110a557505050810160200161104d826101a661103d565b8054602085870181019190915290930192810161108a565b8695506101a69693506020925061104d9491507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001682840152151560051b820101929361103d565b50346101aa5760207ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa57803567ffffffffffffffff9182821161039757611154913691016111e5565b90914216925b81811061116e576020846101405151908152f35b80611187856111806001948688611a39565b3533614264565b0161115a565b8390346101aa57817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126101aa57807fdbfdf8dc2b135c26253e00d5b6cbe6f20457e003fd526d97cea183883570de6160209252f35b9181601f840112156112165782359167ffffffffffffffff8311611216576020808501948460051b01011161121657565b600080fd5b60005b83811061122e5750506000910152565b818101518382015260200161121e565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f60209361127a8151809281875287808801910161121b565b0116010190565b6004359073ffffffffffffffffffffffffffffffffffffffff8216820361121657565b359073ffffffffffffffffffffffffffffffffffffffff8216820361121657565b6020908160408183019282815285518094520193019160005b8281106112ec575050505090565b8351855293810193928101926001016112de565b9061139991805182526020810151602083015267ffffffffffffffff806040830151166040840152806060830151166060840152608082015116608083015260a081015160a083015273ffffffffffffffffffffffffffffffffffffffff8060c08301511660c084015260e08201511660e08301526101008082015115159083015261012080910151916101408092820152019061123e565b90565b6080810190811067ffffffffffffffff8211176113b857604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b60c0810190811067ffffffffffffffff8211176113b857604052565b6060810190811067ffffffffffffffff8211176113b857604052565b6040810190811067ffffffffffffffff8211176113b857604052565b610140810190811067ffffffffffffffff8211176113b857604052565b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176113b857604052565b67ffffffffffffffff81116113b857601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01660200190565b67ffffffffffffffff81116113b85760051b60200190565b6040908151916114fa8361141f565b60018352829160005b60208082101561154b5783516020929161151c826113e7565b6000825260008183015260008683015260606000818401526080830152600060a0830152828801015201611503565b505091925050565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff4181360301821215611216570190565b8051156115935760200190565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b80518210156115935760209160051b010190565b91909160c08184031261121657604051906115f0826113e7565b81936115fb826112a4565b835260209167ffffffffffffffff8184013581811681036112165784860152604082013580151581036112165760408601526060820135606086015260808201359081116112165781019180601f840112156112165782359261165d84611499565b9161166b6040519384611458565b84835285858301011161121657848460a09695879660009401838601378301015260808501520135910152565b9190826060910312611216576040516116b081611403565b8092803560ff811681036112165760409182918452602081013560208501520135910152565b3573ffffffffffffffffffffffffffffffffffffffff811681036112165790565b90611701826114d3565b61170e6040519182611458565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe061173c82946114d3565b019060005b82811061174d57505050565b806060602080938501015201611741565b91908110156115935760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc181360301821215611216570190565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215611216570180359067ffffffffffffffff821161121657602001918160051b3603831361121657565b929190926117ff846114d3565b9161180d6040519384611458565b829480845260208094019060051b8301928284116112165780915b84831061183757505050505050565b823567ffffffffffffffff811161121657869161185786849386016115d6565b815201920191611828565b9190820391821161186f57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b91908110156115935760051b810135907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8181360301821215611216570190565b9035907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe181360301821215611216570180359067ffffffffffffffff82116112165760200191606082023603831361121657565b6040908151916119418361141f565b600183528291600091825b602080821015611978578251602092916119658261141f565b868252868183015282890101520161194c565b50505091925050565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffdc604091011261121657604051906119b88261141f565b60243582526044356020830152565b9291926119d3826114d3565b6040926119e284519283611458565b819581835260208093019160061b84019381851161121657915b848310611a0b57505050505050565b8583830312611216578386918251611a228161141f565b8535815282860135838201528152019201916119fc565b91908110156115935760051b0190565b60405190611a568261143b565b606061012083600080825280602083015280604083015280848301528060808301528060a08301528060c08301528060e08301526101008201520152565b90600182811c92168015611add575b6020831014611aae57565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b91607f1691611aa3565b9060405191611af58361143b565b828154815260016006818401549360209485850152600281015467ffffffffffffffff908181166040870152818160401c16606087015260801c166080850152600381015460a085015260ff73ffffffffffffffffffffffffffffffffffffffff8060048401541660c0870152600583015490811660e087015260a01c1615156101008501520190604051938492600092815491611b9283611a94565b80875292828116908115611c075750600114611bc1575b505050506101209291611bbd910384611458565b0152565b60009081528381209695945091905b818310611bef57509394509192509082010181611bbd61012038611ba9565b86548884018501529586019587945091830191611bd0565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff001685880152505050151560051b830101905081611bbd61012038611ba9565b60405190611c548261141f565b6060602083600081520152565b90611c6b826114d3565b611c786040519182611458565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0611ca682946114d3565b0190602036910137565b5190811515820361121657565b906020808383031261121657825167ffffffffffffffff938482116112165701926080848403126112165760405193611cf58561139c565b805185528281015173ffffffffffffffffffffffffffffffffffffffff811681036112165783860152611d2a60408201611cb0565b60408601526060810151918211611216570182601f8201121561121657805190611d5382611499565b93611d616040519586611458565b8285528383830101116112165782611d7c938501910161121b565b606082015290565b90611d8e826114d3565b611d9b6040519182611458565b8281527fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0611dc982946114d3565b019060005b828110611dda57505050565b602090611de5611a49565b82828501015201611dce565b9192608052611dfe611c47565b50805190611e0a611c47565b60a052611e1682611c61565b602060a05101526040517fa2ea7c6e00000000000000000000000000000000000000000000000000000000815283600482015260008160248173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165afa801561261057600060e0526125eb575b5060e05151156125c1579091611ead83611d84565b60c052611eb983611c61565b610100526000915b838310611eec575050505050611ee26080516101005160c05160e0516132ba565b60a0515260a05190565b611efc83829793949596976115c2565b519167ffffffffffffffff60208401511680151590816125ac575b5061258257604060e05101511580612575575b61254b5760608301519567ffffffffffffffff6020850151169673ffffffffffffffffffffffffffffffffffffffff85511660408601511515906080870151926040519a611f778c61143b565b60008c528960208d015267ffffffffffffffff421660408d015260608c0152600060808c015260a08b015260c08a015273ffffffffffffffffffffffffffffffffffffffff8a1660e08a015261010089015261012088015260005b602088015160c08901516120db609d60e08c015160408d01518d60608101519161010082015115159061012060a084015193015193604051988996602088019b8c527fffffffffffffffffffffffffffffffffffffffff000000000000000000000000809260601b16604089015260601b1660548701527fffffffffffffffff000000000000000000000000000000000000000000000000809260c01b16606887015260c01b16607085015260f81b6078840152607983015280516120a0816099936020858701910161121b565b8201907fffffffff000000000000000000000000000000000000000000000000000000008860e01b169082015203607d810184520182611458565b51902080600052600260205260406000205415612101575060010163ffffffff16611fd2565b905097969293909495919780845280600052600260205260406000209184518355602085015160018401556121dd6002840167ffffffffffffffff6040880151168154907fffffffffffffffffffffffffffffffff000000000000000000000000000000006fffffffffffffffff000000000000000060608b015160401b1692161717815567ffffffffffffffff6080880151167fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff77ffffffffffffffff0000000000000000000000000000000083549260801b169116179055565b60a085015160038401556004830173ffffffffffffffffffffffffffffffffffffffff60c0870151167fffffffffffffffffffffffff00000000000000000000000000000000000000008254161790556005830173ffffffffffffffffffffffffffffffffffffffff60e0870151168154907fffffffffffffffffffffff00000000000000000000000000000000000000000074ff00000000000000000000000000000000000000006101008a0151151560a01b1692161717905561012085015192835167ffffffffffffffff81116113b85789946122bf6006840154611a94565b601f81116124f0575b50602090601f8311600114612423576006929160009183612418575b50507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8260011b9260031b1c1916179101555b6060810151806123c8575b5073ffffffffffffffffffffffffffffffffffffffff906001956123488660c0516115c2565b526123558560c0516115c2565b5060a081015161236886610100516115c2565b528261237a86602060a05101516115c2565b5251166040519182527f8bf46bf4cfd674fa735a3d63ec1c9ad4153f033c290341f3a588b75685141b35602073ffffffffffffffffffffffffffffffffffffffff8b1693a401919290611ec1565b6123e19193506000526002602052604060002054151590565b156123ee57869138612322565b60046040517fc5723b51000000000000000000000000000000000000000000000000000000008152fd5b0151905038806122e4565b906006840160005260206000209160005b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0851681106124d55750918391600193837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0600697161061249e575b505050811b01910155612317565b01517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60f88460031b161c19169055388080612490565b8183015184558d985060019093019260209283019201612434565b90919293949550600684016000526020600020601f840160051c810160208510612544575b908c979695949392915b601f830160051c820181106125355750506122c8565b600081558d985060010161251f565b5080612515565b60046040517f157bd4c3000000000000000000000000000000000000000000000000000000008152fd5b5060408301511515611f2a565b60046040517f08e8b937000000000000000000000000000000000000000000000000000000008152fd5b905067ffffffffffffffff4216101538611f17565b60046040517fbf37b20e000000000000000000000000000000000000000000000000000000008152fd5b612607903d806000833e6125ff8183611458565b810190611cbd565b60e05238611e98565b6040513d6000823e3d90fd5b9290949391612629611c47565b50855193612635611c47565b9461263f81611c61565b6020870152604051907fa2ea7c6e00000000000000000000000000000000000000000000000000000000825282600483015260008260248173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165afa91821561261057600092612d30575b508151156125c157929790916126d484611d84565b986126de85611c61565b946000935b818510612700575050505050956126fb94959661351e565b815290565b919593989496999092976127148a846115c2565b519a67ffffffffffffffff60208d0151168015159081612d1b575b506125825760408901511580612d0e575b61254b57899860608d01518d602081015167ffffffffffffffff1691815173ffffffffffffffffffffffffffffffffffffffff1690604083015115159260800151936040519e8f906127918261143b565b6000825260208201524267ffffffffffffffff166040820152606001528d608081016000905260a0015260c08d015273ffffffffffffffffffffffffffffffffffffffff8b1660e08d01526101008c01526101208b015260005b60208b01518b6128bc609d60c08301519260e08101519060408101519060608101519161010082015115159061012060a084015193015193604051988996602088019b8c527fffffffffffffffffffffffffffffffffffffffff000000000000000000000000809260601b16604089015260601b1660548701527fffffffffffffffff000000000000000000000000000000000000000000000000809260c01b16606887015260c01b16607085015260f81b6078840152607983015280516120a0816099936020858701910161121b565b519020806000526002602052604060002054156128e2575060010163ffffffff166127eb565b90509d979b9199929a949d9c909698939c80845280600052600260205260406000209184518355602085015160018401556129c46002840167ffffffffffffffff6040880151168154907fffffffffffffffffffffffffffffffff000000000000000000000000000000006fffffffffffffffff000000000000000060608b015160401b1692161717815567ffffffffffffffff6080880151167fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff77ffffffffffffffff0000000000000000000000000000000083549260801b169116179055565b60a085015160038401556004830173ffffffffffffffffffffffffffffffffffffffff60c0870151167fffffffffffffffffffffffff00000000000000000000000000000000000000008254161790556005830173ffffffffffffffffffffffffffffffffffffffff60e0870151168154907fffffffffffffffffffffff00000000000000000000000000000000000000000074ff00000000000000000000000000000000000000006101008a0151151560a01b1692161717905561012085015192835167ffffffffffffffff81116113b8578894612aa66006840154611a94565b601f8111612cb3575b50602090601f8311600114612be6576006929160009183612bdb575b50507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8260011b9260031b1c1916179101555b8d8b8b606084015180612bae575b5086602073ffffffffffffffffffffffffffffffffffffffff95948794612b44848660019e612b3e83612b5c9a6115c2565b526115c2565b50612b548460a0890151926115c2565b5201516115c2565b5251166040519182527f8bf46bf4cfd674fa735a3d63ec1c9ad4153f033c290341f3a588b75685141b35602073ffffffffffffffffffffffffffffffffffffffff881693a4019290919293949a6126e3565b92505050612bcb9193506000526002602052604060002054151590565b156123ee5785918d8b8b38612b0c565b015190503880612acb565b906006840160005260206000209160005b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe085168110612c985750918391600193837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe06006971610612c61575b505050811b01910155612afe565b01517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60f88460031b161c19169055388080612c53565b8183015184558c985060019093019260209283019201612bf7565b90919293949550600684016000526020600020601f840160051c810160208510612d07575b908b979695949392915b601f830160051c82018110612cf8575050612aaf565b600081558c9850600101612ce2565b5080612cd8565b5060408c01511515612740565b905067ffffffffffffffff421610153861272f565b612d469192503d806000833e6125ff8183611458565b90386126bf565b939291936040517fa2ea7c6e00000000000000000000000000000000000000000000000000000000815281600482015260008160248173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165afa90811561261057600091612faf575b508051156125c1578251612dde81611d84565b92612de882611c61565b9460005b838110612e0257505050506113999495506136ff565b612e0c81836115c2565b5190815160005260028060205260406000208054156123ee57856001820154036125c1578c73ffffffffffffffffffffffffffffffffffffffff6005830154911673ffffffffffffffffffffffffffffffffffffffff821603612f855760a01c60ff161561254b5767ffffffffffffffff8282015460801c16612f5b5790810180547fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff164260801b77ffffffffffffffff00000000000000000000000000000000161790556001928c9190612ee082611ae7565b612eea858c6115c2565b52612ef5848b6115c2565b506020810151612f05858d6115c2565b527ff930a6e2523c9cc298691873087a740550b8fc85a0680830414c148ed927f615602073ffffffffffffffffffffffffffffffffffffffff87816004870154169451950154956040519586521693a401612dec565b60046040517f905e7107000000000000000000000000000000000000000000000000000000008152fd5b60046040517f4ca88867000000000000000000000000000000000000000000000000000000008152fd5b612fc491503d806000833e6125ff8183611458565b38612dcb565b90949392916040517fa2ea7c6e00000000000000000000000000000000000000000000000000000000815282600482015260008160248173ffffffffffffffffffffffffffffffffffffffff7f0000000000000000000000000000000000000000000000000000000000000000165afa908115612610576000916131eb575b508051156125c157865161305c81611d84565b9261306682611c61565b9460005b83811061308057505050506113999596506138fe565b61308a818c6115c2565b519081516000526002918260205260406000208054156123ee57846001820154036125c157600581015473ffffffffffffffffffffffffffffffffffffffff871673ffffffffffffffffffffffffffffffffffffffff821603612f855760a01c60ff161561254b5767ffffffffffffffff8482015460801c16612f5b5792830180547fffffffffffffffff0000000000000000ffffffffffffffffffffffffffffffff164260801b77ffffffffffffffff000000000000000000000000000000001617905560019261315b81611ae7565b613165848b6115c2565b52613170838a6115c2565b506020820151613180848c6115c2565b528373ffffffffffffffffffffffffffffffffffffffff6004830154169251910154916040519182527ff930a6e2523c9cc298691873087a740550b8fc85a0680830414c148ed927f615602073ffffffffffffffffffffffffffffffffffffffff891693a40161306a565b61320091503d806000833e6125ff8183611458565b38613049565b60408101906040815282518092526060810160608360051b830101926020809501916000905b82821061326f57505050508281830391015281808451928381520193019160005b82811061325b575050505090565b83518552938101939281019260010161324d565b909192959485806132aa837fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa089600196030186528a51611300565b979801949391909101910161322c565b9092918351936001908186146134fd5773ffffffffffffffffffffffffffffffffffffffff602080950151169182156134cd579560009687915b8083106133bf575050509183929161333d9492876040518097819582947f91db0b7e00000000000000000000000000000000000000000000000000000000845260048401613206565b03925af19081156126105760009161338b575b50905015613361576113999061408f565b60046040517fe8bee839000000000000000000000000000000000000000000000000000000008152fd5b82813d83116133b8575b61339f8183611458565b8101031261025957506133b190611cb0565b8038613350565b503d613395565b909197966133cd89876115c2565b5180151580613447575b61341d578181116133f3578084920398019801909190916132f4565b60046040517f11011294000000000000000000000000000000000000000000000000000000008152fd5b60046040517f1574f9f3000000000000000000000000000000000000000000000000000000008152fd5b50604080517fce46e04600000000000000000000000000000000000000000000000000000000815289816004818b5afa9182156134c3575060009161348e575b50156133d7565b908982813d83116134bc575b6134a48183611458565b8101031261025957506134b690611cb0565b38613487565b503d61349a565b513d6000823e3d90fd5b9594505050905060005b8281106134e75750505050600090565b6134f181836115c2565b5161341d5783016134d7565b6113999550613517915061351090611586565b5191611586565b5191613ad6565b9093918451946001908187146136e25773ffffffffffffffffffffffffffffffffffffffff602080950151169182156136b1579660009788915b80831061360157505050918392916135a19492886040518097819582947f91db0b7e00000000000000000000000000000000000000000000000000000000845260048401613206565b03925af1908115612610576000916135cd575b50905015613361576135c4575090565b6113999061408f565b82813d83116135fa575b6135e18183611458565b8101031261025957506135f390611cb0565b80386135b4565b503d6135d7565b9091989761360f8a876115c2565b5180151580613635575b61341d578181116133f357808492039901990190919091613558565b50604080517fce46e04600000000000000000000000000000000000000000000000000000000815289816004818b5afa9182156134c3575060009161367c575b5015613619565b908982813d83116136aa575b6136928183611458565b8101031261025957506136a490611cb0565b38613675565b503d613688565b969550505091505060005b8281106136cc5750505050600090565b6136d681836115c2565b5161341d5783016136bc565b61139996506136f8915061351090959495611586565b5191613c5d565b9092918351936001908186146138e45773ffffffffffffffffffffffffffffffffffffffff602080950151169182156138b4579560009687915b80831061380457505050918392916137829492876040518097819582947f88e5b2d900000000000000000000000000000000000000000000000000000000845260048401613206565b03925af1908115612610576000916137d0575b509050156137a6576113999061408f565b60046040517fbf2f3a8b000000000000000000000000000000000000000000000000000000008152fd5b82813d83116137fd575b6137e48183611458565b8101031261025957506137f690611cb0565b8038613795565b503d6137da565b9091979661381289876115c2565b5180151580613838575b61341d578181116133f357808492039801980190919091613739565b50604080517fce46e04600000000000000000000000000000000000000000000000000000000815289816004818b5afa9182156134c3575060009161387f575b501561381c565b908982813d83116138ad575b6138958183611458565b8101031261025957506138a790611cb0565b38613878565b503d61388b565b9594505050905060005b8281106138ce5750505050600090565b6138d881836115c2565b5161341d5783016138be565b61139995506138f7915061351090611586565b5191613dc5565b909391845194600190818714613ab95773ffffffffffffffffffffffffffffffffffffffff60208095015116918215613a88579660009788915b8083106139d857505050918392916139819492886040518097819582947f88e5b2d900000000000000000000000000000000000000000000000000000000845260048401613206565b03925af1908115612610576000916139a4575b509050156137a6576135c4575090565b82813d83116139d1575b6139b88183611458565b8101031261025957506139ca90611cb0565b8038613994565b503d6139ae565b909198976139e68a876115c2565b5180151580613a0c575b61341d578181116133f357808492039901990190919091613938565b50604080517fce46e04600000000000000000000000000000000000000000000000000000000815289816004818b5afa9182156134c35750600091613a53575b50156139f0565b908982813d8311613a81575b613a698183611458565b810103126102595750613a7b90611cb0565b38613a4c565b503d613a5f565b969550505091505060005b828110613aa35750505050600090565b613aad81836115c2565b5161341d578301613a93565b6113999650613acf915061351090959495611586565b5191613f3f565b92919273ffffffffffffffffffffffffffffffffffffffff602080920151168015613c505784151580613bd6575b61341d578385116133f357613b52829186946040519586809481937fe60c35050000000000000000000000000000000000000000000000000000000083528760048401526024830190611300565b03925af190811561261057600091613ba2575b50905015613b785781611399910361408f565b60046040517fbd8ba84d000000000000000000000000000000000000000000000000000000008152fd5b82813d8311613bcf575b613bb68183611458565b810103126102595750613bc890611cb0565b8038613b65565b503d613bac565b506040517fce46e0460000000000000000000000000000000000000000000000000000000081528281600481855afa90811561261057600091613c1b575b5015613b04565b908382813d8311613c49575b613c318183611458565b810103126102595750613c4390611cb0565b38613c14565b503d613c27565b5050505061341d57600090565b93919373ffffffffffffffffffffffffffffffffffffffff602080920151168015613db75785151580613d3d575b61341d578486116133f357613cd9829187946040519586809481937fe60c35050000000000000000000000000000000000000000000000000000000083528760048401526024830190611300565b03925af190811561261057600091613d09575b50905015613b78578290613cff57505090565b611399910361408f565b82813d8311613d36575b613d1d8183611458565b810103126102595750613d2f90611cb0565b8038613cec565b503d613d13565b506040517fce46e0460000000000000000000000000000000000000000000000000000000081528281600481855afa90811561261057600091613d82575b5015613c8b565b908382813d8311613db0575b613d988183611458565b810103126102595750613daa90611cb0565b38613d7b565b503d613d8e565b505050505061341d57600090565b92919273ffffffffffffffffffffffffffffffffffffffff602080920151168015613c505784151580613ec5575b61341d578385116133f357613e41829186946040519586809481937fe49617e10000000000000000000000000000000000000000000000000000000083528760048401526024830190611300565b03925af190811561261057600091613e91575b50905015613e675781611399910361408f565b60046040517fccf3bb27000000000000000000000000000000000000000000000000000000008152fd5b82813d8311613ebe575b613ea58183611458565b810103126102595750613eb790611cb0565b8038613e54565b503d613e9b565b506040517fce46e0460000000000000000000000000000000000000000000000000000000081528281600481855afa90811561261057600091613f0a575b5015613df3565b908382813d8311613f38575b613f208183611458565b810103126102595750613f3290611cb0565b38613f03565b503d613f16565b93919373ffffffffffffffffffffffffffffffffffffffff602080920151168015613db75785151580614015575b61341d578486116133f357613fbb829187946040519586809481937fe49617e10000000000000000000000000000000000000000000000000000000083528760048401526024830190611300565b03925af190811561261057600091613fe1575b50905015613e67578290613cff57505090565b82813d831161400e575b613ff58183611458565b81010312610259575061400790611cb0565b8038613fce565b503d613feb565b506040517fce46e0460000000000000000000000000000000000000000000000000000000081528281600481855afa9081156126105760009161405a575b5015613f6d565b908382813d8311614088575b6140708183611458565b81010312610259575061408290611cb0565b38614053565b503d614066565b806140975750565b80471061416057600080808093335af13d1561415b573d6140b781611499565b906140c56040519283611458565b8152600060203d92013e5b156140d757565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f416464726573733a20756e61626c6520746f2073656e642076616c75652c207260448201527f6563697069656e74206d617920686176652072657665727465640000000000006064820152fd5b6140d0565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601d60248201527f416464726573733a20696e73756666696369656e742062616c616e63650000006044820152fd5b6000818152600360205267ffffffffffffffff908160408220541661423a577f5aafceeb1c7ad58e4a84898bdee37c02c0fc46e7d24e6b60e8209449f183459f91838252600360205260408220941693847fffffffffffffffffffffffffffffffffffffffffffffffff000000000000000082541617905580a3565b60046040517f2e267946000000000000000000000000000000000000000000000000000000008152fd5b73ffffffffffffffffffffffffffffffffffffffff166000818152600460205260408120908381528160205267ffffffffffffffff806040832054166142ff577f92a1f7a41a7c585a8b09e25b195e225b1d43248daca46b0faf9e0792777a22299285835260205260408220951694857fffffffffffffffffffffffffffffffffffffffffffffffff000000000000000082541617905580a4565b60046040517fec9d6eeb000000000000000000000000000000000000000000000000000000008152fd5b9061433390611c61565b60009283925b805184101561438e579361434d84866115c2565b519160005b835181101561437d5761436581856115c2565b5161437084876115c2565b5260019283019201614352565b509094600190940193909150614339565b509250905090565b73ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016301480614494575b156143fe577f000000000000000000000000000000000000000000000000000000000000000090565b60405160208101907f000000000000000000000000000000000000000000000000000000000000000082527f000000000000000000000000000000000000000000000000000000000000000060408201527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260a0815261448e816113e7565b51902090565b507f000000000000000000000000000000000000000000000000000000000000000046146143d5565b6020908181015190604080938183015192606081019173ffffffffffffffffffffffffffffffffffffffff948584511660005260018252846000209283549360018501905551928688511667ffffffffffffffff988985820151168882015115159060806060840151930151878151910120938a5198888a019b7fdbfdf8dc2b135c26253e00d5b6cbe6f20457e003fd526d97cea183883570de618d528a01526060890152608088015260a087015260c086015260e085015261010090818501528352610120830196838810908811176113b8576145a886956145bc946145c4998b5251902061482e565b918860ff8351169183015192015192614792565b9490946145f9565b51169116036145d05750565b600490517f8baa579f000000000000000000000000000000000000000000000000000000008152fd5b6005811015614763578061460a5750565b600181036146705760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152fd5b600281036146d65760646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152fd5b6003146146df57565b60846040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c60448201527f75650000000000000000000000000000000000000000000000000000000000006064820152fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b9291907f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a083116148225791608094939160ff602094604051948552168484015260408301526060820152600093849182805260015afa1561481557815173ffffffffffffffffffffffffffffffffffffffff81161561480f579190565b50600190565b50604051903d90823e3d90fd5b50505050600090600390565b614836614396565b906040519060208201927f19010000000000000000000000000000000000000000000000000000000000008452602283015260428201526042815261448e8161139c565b602081015160409182810151916060820173ffffffffffffffffffffffffffffffffffffffff9283825116600052600160205285600020908154916001830190555192519086519160208301947fa98d02348410c9c76735e0d0bb1396f4015ac2bb9615f9c2611d19d7a8a99650865288840152606083015260808201526080815260a081019481861067ffffffffffffffff8711176113b85761492b85946145bc936145c4988a5251902061482e565b9060ff8151168860208301519201519261479256fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e,t){return super.deploy(e,t||{})}getDeployTransaction(e,t){return super.getDeployTransaction(e,t||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.EAS__factory=s}));var IEAS__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.IEAS__factory=void 0;const r=[{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schema",type:"bytes32"}],name:"Attested",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"recipient",type:"address"},{indexed:true,internalType:"address",name:"attester",type:"address"},{indexed:false,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:true,internalType:"bytes32",name:"schema",type:"bytes32"}],name:"Revoked",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"address",name:"revoker",type:"address"},{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"RevokedOffchain",type:"event"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"data",type:"bytes32"},{indexed:true,internalType:"uint64",name:"timestamp",type:"uint64"}],name:"Timestamped",type:"event"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"}],internalType:"struct AttestationRequest",name:"request",type:"tuple"}],name:"attest",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"attester",type:"address"}],internalType:"struct DelegatedAttestationRequest",name:"delegatedRequest",type:"tuple"}],name:"attestByDelegation",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getAttestation",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"bytes32",name:"schema",type:"bytes32"},{internalType:"uint64",name:"time",type:"uint64"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"uint64",name:"revocationTime",type:"uint64"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"address",name:"recipient",type:"address"},{internalType:"address",name:"attester",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Attestation",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"revoker",type:"address"},{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSchemaRegistry",outputs:[{internalType:"contract ISchemaRegistry",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"getTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"isAttestationValid",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiAttestationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiAttest",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint64",name:"expirationTime",type:"uint64"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"bytes32",name:"refUID",type:"bytes32"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct AttestationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"attester",type:"address"}],internalType:"struct MultiDelegatedAttestationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiAttestByDelegation",outputs:[{internalType:"bytes32[]",name:"",type:"bytes32[]"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"}],internalType:"struct MultiRevocationRequest[]",name:"multiRequests",type:"tuple[]"}],name:"multiRevoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData[]",name:"data",type:"tuple[]"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature[]",name:"signatures",type:"tuple[]"},{internalType:"address",name:"revoker",type:"address"}],internalType:"struct MultiDelegatedRevocationRequest[]",name:"multiDelegatedRequests",type:"tuple[]"}],name:"multiRevokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiRevokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32[]",name:"data",type:"bytes32[]"}],name:"multiTimestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"}],internalType:"struct RevocationRequest",name:"request",type:"tuple"}],name:"revoke",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"bytes32",name:"schema",type:"bytes32"},{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],internalType:"struct RevocationRequestData",name:"data",type:"tuple"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct EIP712Signature",name:"signature",type:"tuple"},{internalType:"address",name:"revoker",type:"address"}],internalType:"struct DelegatedRevocationRequest",name:"delegatedRequest",type:"tuple"}],name:"revokeByDelegation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"revokeOffchain",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"data",type:"bytes32"}],name:"timestamp",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.IEAS__factory=n}));var ISchemaRegistry__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.ISchemaRegistry__factory=void 0;const r=[{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:false,internalType:"address",name:"registerer",type:"address"}],name:"Registered",type:"event"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getSchema",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],internalType:"struct SchemaRecord",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"schema",type:"string"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"}],name:"register",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"}];class n{static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.ISchemaRegistry__factory=n}));var SchemaRegistry__factory_1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.SchemaRegistry__factory=void 0;const r=[{inputs:[],name:"AlreadyExists",type:"error"},{anonymous:false,inputs:[{indexed:true,internalType:"bytes32",name:"uid",type:"bytes32"},{indexed:false,internalType:"address",name:"registerer",type:"address"}],name:"Registered",type:"event"},{inputs:[],name:"VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"uid",type:"bytes32"}],name:"getSchema",outputs:[{components:[{internalType:"bytes32",name:"uid",type:"bytes32"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"},{internalType:"string",name:"schema",type:"string"}],internalType:"struct SchemaRecord",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"schema",type:"string"},{internalType:"contract ISchemaResolver",name:"resolver",type:"address"},{internalType:"bool",name:"revocable",type:"bool"}],name:"register",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"nonpayable",type:"function"}];const n="0x60808060405234610016576107b8908161001c8239f35b600080fdfe60806040908082526004918236101561001757600080fd5b600091823560e01c90816360d7a2781461029757508063a2ea7c6e146101045763ffa1ad741461004657600080fd5b3461010057817ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610100578051918183019083821067ffffffffffffffff8311176100d45750926100d093825282527f302e323700000000000000000000000000000000000000000000000000000000602083015251918291602083526020830190610689565b0390f35b806041867f4e487b71000000000000000000000000000000000000000000000000000000006024945252fd5b5080fd5b503461010057602092837ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc360112610293576060808351610144816106cc565b85815285878201528585820152015235825281835280822090805191610169836106cc565b805483526001918282015491868501600273ffffffffffffffffffffffffffffffffffffffff92838616835260ff8589019660a01c16151586520188845196898354936101b585610758565b808b52948381169081156102505750600114610214575b50505050506101e1856100d097980386610717565b606087019485528251978897818952519088015251169085015251151560608401525160808084015260a0830190610689565b908094939b50528983205b82841061023d575050508501909601956101e1886100d087386101cc565b80548985018c0152928a0192810161021f565b7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0016858c01525050505090151560051b86010196506101e1886100d087386101cc565b8280fd5b92939050346106625760607ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc3601126106625780359067ffffffffffffffff80831161065e573660238401121561065e57828201359181831161065a57366024848601011161065a576024359673ffffffffffffffffffffffffffffffffffffffff9182891680990361010057604435978815158099036102935761033b816106cc565b8281526020998a8201908152888201998a52885197848c7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe099818b601f83011601610386908d610717565b808c5280828d019460240185378b0101528b6060840199808b5283518d5115158d519384938185019687915180926103bd92610666565b84019260601b7fffffffffffffffffffffffffffffffffffffffff000000000000000000000000169083015260f81b6034820152036015810182526035016104059082610717565b519020998a8552848c5289852054610632579082918b600294528b8652858d528a8620925183556001968784019251167fffffffffffffffffffffff00000000000000000000000000000000000000000074ff000000000000000000000000000000000000000084549351151560a01b1692161717905501955190815194851161060657506104948654610758565b601f81116105c0575b508891601f8511600114610545578495509084939492919361051a575b50507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff91921b9260031b1c19161790555b817f7d917fcbc9a29a9705ff9936ffa599500e4fd902e4486bae317414fe967b307c848351338152a251908152f35b015191507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff386104ba565b9294849081168785528a8520945b8b888383106105a95750505010610572575b505050811b0190556104eb565b01517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff60f88460031b161c19169055388080610565565b868601518855909601959485019487935001610553565b868352898320601f860160051c8101918b87106105fc575b601f0160051c019084905b8281106105f157505061049d565b8481550184906105e3565b90915081906105d8565b8260416024927f4e487b7100000000000000000000000000000000000000000000000000000000835252fd5b838a517f23369fa6000000000000000000000000000000000000000000000000000000008152fd5b8680fd5b8580fd5b8380fd5b60005b8381106106795750506000910152565b8181015183820152602001610669565b907fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f6020936106c581518092818752878088019101610666565b0116010190565b6080810190811067ffffffffffffffff8211176106e857604052565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b90601f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0910116810190811067ffffffffffffffff8211176106e857604052565b90600182811c921680156107a1575b602083101461077257565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b91607f169161076756fea164736f6c6343000813000a";const i=e=>e.length>1;class s extends ethers_1.ContractFactory{constructor(...e){if(i(e)){super(...e)}else{super(r,n,e[0])}}deploy(e){return super.deploy(e||{})}getDeployTransaction(e){return super.getDeployTransaction(e||{})}attach(e){return super.attach(e)}connect(e){return super.connect(e)}static bytecode=n;static abi=r;static createInterface(){return new ethers_1.utils.Interface(r)}static connect(e,t){return new ethers_1.Contract(e,r,t)}}t.SchemaRegistry__factory=s}));var contracts=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SchemaRegistry__factory=t.ISchemaRegistry__factory=t.IEAS__factory=t.EAS__factory=t.resolver=t.eip712=void 0;t.eip712=i(eip712);t.resolver=i(resolver);Object.defineProperty(t,"EAS__factory",{enumerable:true,get:function(){return EAS__factory_1.EAS__factory}});Object.defineProperty(t,"IEAS__factory",{enumerable:true,get:function(){return IEAS__factory_1.IEAS__factory}});Object.defineProperty(t,"ISchemaRegistry__factory",{enumerable:true,get:function(){return ISchemaRegistry__factory_1.ISchemaRegistry__factory}});Object.defineProperty(t,"SchemaRegistry__factory",{enumerable:true,get:function(){return SchemaRegistry__factory_1.SchemaRegistry__factory}})}));var factories=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.contracts=t.openzeppelin=void 0;t.openzeppelin=i(_openzeppelin);t.contracts=i(contracts)}));var typechainTypes=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[r]}}}Object.defineProperty(e,n,i)}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SchemaRegistry__factory=t.SchemaResolver__factory=t.ISchemaResolver__factory=t.ValueResolver__factory=t.TokenResolver__factory=t.RevocationResolver__factory=t.RecipientResolver__factory=t.PayingResolver__factory=t.ExpirationTimeResolver__factory=t.DataResolver__factory=t.AttesterResolver__factory=t.AttestationResolver__factory=t.ISchemaRegistry__factory=t.IEAS__factory=t.PermissionedEIP712Proxy__factory=t.EIP712Proxy__factory=t.EIP712Verifier__factory=t.EAS__factory=t.IERC20__factory=t.IERC20Metadata__factory=t.IERC20Permit__factory=t.ERC20__factory=t.Ownable__factory=t.factories=void 0;t.factories=i(factories);Object.defineProperty(t,"Ownable__factory",{enumerable:true,get:function(){return Ownable__factory_1.Ownable__factory}});Object.defineProperty(t,"ERC20__factory",{enumerable:true,get:function(){return ERC20__factory_1.ERC20__factory}});Object.defineProperty(t,"IERC20Permit__factory",{enumerable:true,get:function(){return IERC20Permit__factory_1.IERC20Permit__factory}});Object.defineProperty(t,"IERC20Metadata__factory",{enumerable:true,get:function(){return IERC20Metadata__factory_1.IERC20Metadata__factory}});Object.defineProperty(t,"IERC20__factory",{enumerable:true,get:function(){return IERC20__factory_1.IERC20__factory}});Object.defineProperty(t,"EAS__factory",{enumerable:true,get:function(){return EAS__factory_1.EAS__factory}});Object.defineProperty(t,"EIP712Verifier__factory",{enumerable:true,get:function(){return EIP712Verifier__factory_1.EIP712Verifier__factory}});Object.defineProperty(t,"EIP712Proxy__factory",{enumerable:true,get:function(){return EIP712Proxy__factory_1.EIP712Proxy__factory}});Object.defineProperty(t,"PermissionedEIP712Proxy__factory",{enumerable:true,get:function(){return PermissionedEIP712Proxy__factory_1.PermissionedEIP712Proxy__factory}});Object.defineProperty(t,"IEAS__factory",{enumerable:true,get:function(){return IEAS__factory_1.IEAS__factory}});Object.defineProperty(t,"ISchemaRegistry__factory",{enumerable:true,get:function(){return ISchemaRegistry__factory_1.ISchemaRegistry__factory}});Object.defineProperty(t,"AttestationResolver__factory",{enumerable:true,get:function(){return AttestationResolver__factory_1.AttestationResolver__factory}});Object.defineProperty(t,"AttesterResolver__factory",{enumerable:true,get:function(){return AttesterResolver__factory_1.AttesterResolver__factory}});Object.defineProperty(t,"DataResolver__factory",{enumerable:true,get:function(){return DataResolver__factory_1.DataResolver__factory}});Object.defineProperty(t,"ExpirationTimeResolver__factory",{enumerable:true,get:function(){return ExpirationTimeResolver__factory_1.ExpirationTimeResolver__factory}});Object.defineProperty(t,"PayingResolver__factory",{enumerable:true,get:function(){return PayingResolver__factory_1.PayingResolver__factory}});Object.defineProperty(t,"RecipientResolver__factory",{enumerable:true,get:function(){return RecipientResolver__factory_1.RecipientResolver__factory}});Object.defineProperty(t,"RevocationResolver__factory",{enumerable:true,get:function(){return RevocationResolver__factory_1.RevocationResolver__factory}});Object.defineProperty(t,"TokenResolver__factory",{enumerable:true,get:function(){return TokenResolver__factory_1.TokenResolver__factory}});Object.defineProperty(t,"ValueResolver__factory",{enumerable:true,get:function(){return ValueResolver__factory_1.ValueResolver__factory}});Object.defineProperty(t,"ISchemaResolver__factory",{enumerable:true,get:function(){return ISchemaResolver__factory_1.ISchemaResolver__factory}});Object.defineProperty(t,"SchemaResolver__factory",{enumerable:true,get:function(){return SchemaResolver__factory_1.SchemaResolver__factory}});Object.defineProperty(t,"SchemaRegistry__factory",{enumerable:true,get:function(){return SchemaRegistry__factory_1.SchemaRegistry__factory}})}));var utils$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.getTimestampFromOffchainRevocationEvents=t.getTimestampFromTimestampEvents=t.getUIDsFromAttestEvents=t.getUIDFromDelegatedProxyAttestReceipt=t.getUIDFromDelegatedProxyAttestTx=t.getUIDFromMultiDelegatedProxyAttestReceipt=t.getUIDFromMultiDelegatedProxyAttestTx=t.getUIDFromAttestTx=t.getUIDsFromMultiAttestTx=t.getOffchainUID=t.getUID=t.getSchemaUID=t.ZERO_BYTES32=t.ZERO_BYTES=t.ZERO_ADDRESS=void 0;const{solidityKeccak256:r,hexlify:n,toUtf8Bytes:i}=ethers_1.utils;const{AddressZero:s}=ethers_1.constants;t.ZERO_ADDRESS=s;t.ZERO_BYTES="0x";t.ZERO_BYTES32="0x0000000000000000000000000000000000000000000000000000000000000000";const a=(e,t,n)=>r(["string","address","bool"],[e,t,n]);t.getSchemaUID=a;const o=(e,t,s,a,o,f,c,u,l)=>r(["bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[n(i(e)),t,s,a,o,f,c,u,l]);t.getUID=o;const f=(e,s,a,o,f,c,u,l)=>{switch(e){case 0:return r(["bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[n(i(s)),a,t.ZERO_ADDRESS,o,f,c,u,l,0]);case 1:return r(["uint16","bytes","address","address","uint64","uint64","bool","bytes32","bytes","uint32"],[e,n(i(s)),a,t.ZERO_ADDRESS,o,f,c,u,l,0]);default:throw new Error("Unsupported version")}};t.getOffchainUID=f;const c=async e=>{const r=await(await e).wait();return(0,t.getUIDsFromAttestEvents)(r.events)};t.getUIDsFromMultiAttestTx=c;const u=async e=>(await(0,t.getUIDsFromMultiAttestTx)(e))[0];t.getUIDFromAttestTx=u;const l=async e=>(0,t.getUIDFromMultiDelegatedProxyAttestReceipt)((await e).wait());t.getUIDFromMultiDelegatedProxyAttestTx=l;const h=async e=>{const r=await e;const n=new abi_1$1.Interface(typechainTypes.EAS__factory.abi);const i=[];for(const e of r.events||[]){i.push({event:"Attested",args:await n.decodeEventLog("Attested",e.data,e.topics)})}return(0,t.getUIDsFromAttestEvents)(i)};t.getUIDFromMultiDelegatedProxyAttestReceipt=h;const d=async e=>(await(0,t.getUIDFromMultiDelegatedProxyAttestTx)(e))[0];t.getUIDFromDelegatedProxyAttestTx=d;const p=async e=>(await(0,t.getUIDFromMultiDelegatedProxyAttestReceipt)(e))[0];t.getUIDFromDelegatedProxyAttestReceipt=p;const y=e=>{if(!e){return[]}const t=e.filter((e=>e.event==="Attested"));if(t.length===0){throw new Error("Unable to process attestation events")}return t.map((e=>e.args?.uid))};t.getUIDsFromAttestEvents=y;const m=e=>{if(!e){return[]}const t=e.filter((e=>e.event==="Timestamped"));if(t.length===0){throw new Error("Unable to process attestation events")}return t.map((e=>e.args?.timestamp))};t.getTimestampFromTimestampEvents=m;const g=e=>{if(!e){return[]}const t=e.filter((e=>e.event==="RevokedOffchain"));if(t.length===0){throw new Error("Unable to process offchain revocation events")}return t.map((e=>e.args?.timestamp))};t.getTimestampFromOffchainRevocationEvents=g}));var typedDataHandler=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.TypedDataHandler=t.EIP712_DOMAIN=void 0;const{getAddress:r,verifyTypedData:n,hexlify:i,joinSignature:s,splitSignature:a,keccak256:o,toUtf8Bytes:f,defaultAbiCoder:c}=ethers_1.utils;t.EIP712_DOMAIN="EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)";class u{config;constructor(e){this.config=e}getDomainSeparator(){return o(c.encode(["bytes32","bytes32","bytes32","uint256","address"],[o(f(t.EIP712_DOMAIN)),o(f(this.config.name)),o(f(this.config.version)),this.config.chainId,this.config.address]))}getDomainTypedData(){return{name:this.config.name,version:this.config.version,chainId:this.config.chainId,verifyingContract:this.config.address}}async signTypedDataRequest(e,t,r){const n=await r._signTypedData(t.domain,t.types,e);const i=a(n);return{...t,signature:{v:i.v,r:i.r,s:i.s}}}verifyTypedDataRequestSignature(e,t){if(e===utils$1.ZERO_ADDRESS){throw new Error("Invalid address")}const{signature:a}=t;const o=s({v:a.v,r:i(a.r),s:i(a.s)});const f=n(t.domain,t.types,t.message,o);return r(e)===r(f)}}t.TypedDataHandler=u}));var delegated=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Delegated=t.REVOKE_TYPE=t.ATTEST_TYPE=t.REVOKE_PRIMARY_TYPE=t.ATTEST_PRIMARY_TYPE=t.REVOKE_TYPED_SIGNATURE=t.ATTEST_TYPED_SIGNATURE=t.EIP712_NAME=void 0;t.EIP712_NAME="EAS";t.ATTEST_TYPED_SIGNATURE="Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint256 nonce)";t.REVOKE_TYPED_SIGNATURE="Revoke(bytes32 schema,bytes32 uid,uint256 nonce)";t.ATTEST_PRIMARY_TYPE="Attest";t.REVOKE_PRIMARY_TYPE="Revoke";t.ATTEST_TYPE=[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"nonce",type:"uint256"}];t.REVOKE_TYPE=[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"nonce",type:"uint256"}];class r extends typedDataHandler.TypedDataHandler{constructor(e){super({...e,name:t.EIP712_NAME})}signDelegatedAttestation(e,r){return this.signTypedDataRequest(e,{domain:this.getDomainTypedData(),primaryType:t.ATTEST_PRIMARY_TYPE,message:e,types:{Attest:t.ATTEST_TYPE}},r)}verifyDelegatedAttestationSignature(e,t){return this.verifyTypedDataRequestSignature(e,t)}signDelegatedRevocation(e,r){return this.signTypedDataRequest(e,{domain:this.getDomainTypedData(),primaryType:t.REVOKE_PRIMARY_TYPE,message:e,types:{Revoke:t.REVOKE_TYPE}},r)}verifyDelegatedRevocationSignature(e,t){return this.verifyTypedDataRequestSignature(e,t)}}t.Delegated=r}));var delegatedProxy=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.DelegatedProxy=t.REVOKE_PROXY_TYPE=t.ATTEST_PROXY_TYPE=t.REVOKE_PROXY_PRIMARY_TYPE=t.ATTEST_PROXY_PRIMARY_TYPE=t.REVOKE_PROXY_TYPED_SIGNATURE=t.ATTEST_PROXY_TYPED_SIGNATURE=void 0;t.ATTEST_PROXY_TYPED_SIGNATURE="Attest(bytes32 schema,address recipient,uint64 expirationTime,bool revocable,bytes32 refUID,bytes data,uint64 deadline)";t.REVOKE_PROXY_TYPED_SIGNATURE="Revoke(bytes32 schema,bytes32 uid,uint64 deadline)";t.ATTEST_PROXY_PRIMARY_TYPE="Attest";t.REVOKE_PROXY_PRIMARY_TYPE="Revoke";t.ATTEST_PROXY_TYPE=[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"},{name:"deadline",type:"uint64"}];t.REVOKE_PROXY_TYPE=[{name:"schema",type:"bytes32"},{name:"uid",type:"bytes32"},{name:"deadline",type:"uint64"}];class r extends typedDataHandler.TypedDataHandler{constructor(e){super(e)}signDelegatedProxyAttestation(e,r){return this.signTypedDataRequest(e,{domain:this.getDomainTypedData(),primaryType:t.ATTEST_PROXY_PRIMARY_TYPE,message:e,types:{Attest:t.ATTEST_PROXY_TYPE}},r)}verifyDelegatedProxyAttestationSignature(e,t){return this.verifyTypedDataRequestSignature(e,t)}signDelegatedProxyRevocation(e,r){return this.signTypedDataRequest(e,{domain:this.getDomainTypedData(),primaryType:t.REVOKE_PROXY_PRIMARY_TYPE,message:e,types:{Revoke:t.REVOKE_PROXY_TYPE}},r)}verifyDelegatedProxyRevocationSignature(e,t){return this.verifyTypedDataRequestSignature(e,t)}}t.DelegatedProxy=r}));var offchain$1=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Offchain=t.OFFCHAIN_ATTESTATION_TYPES=t.OFFCHAIN_ATTESTATION_VERSION=void 0;const{keccak256:r,toUtf8Bytes:n,defaultAbiCoder:i}=ethers_1.utils;t.OFFCHAIN_ATTESTATION_VERSION=1;const s=0;t.OFFCHAIN_ATTESTATION_TYPES={0:{domainName:"EAS Attestation",primaryType:"Attestation",types:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]},1:{domainName:"EAS Attestation",primaryType:"Attest",types:[{name:"version",type:"uint16"},{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]}};class a extends typedDataHandler.TypedDataHandler{version;type;constructor(e,r){if(r>t.OFFCHAIN_ATTESTATION_VERSION){throw new Error("Unsupported version")}super({...e,name:delegated.EIP712_NAME});this.version=r;this.type=t.OFFCHAIN_ATTESTATION_TYPES[this.version]}getDomainSeparator(){return r(i.encode(["bytes32","bytes32","uint256","address"],[r(n(this.type.domainName)),r(n(this.config.version)),this.config.chainId,this.config.address]))}getDomainTypedData(){return{name:this.type.domainName,version:this.config.version,chainId:this.config.chainId,verifyingContract:this.config.address}}async signOffchainAttestation(e,t){const r=a.getOffchainUID(e);const n=await this.signTypedDataRequest(e,{domain:this.getDomainTypedData(),primaryType:this.type.primaryType,message:e,types:{Attest:this.type.types}},t);return{...n,uid:r}}verifyOffchainAttestationSignature(e,t){return t.uid===a.getOffchainUID(t.message)&&this.verifyTypedDataRequestSignature(e,t)}static getOffchainUID(e){return(0,utils$1.getOffchainUID)(e.version??s,e.schema,e.recipient,e.time,e.expirationTime,e.revocable,e.refUID,e.data)}}t.Offchain=a}));var offchain=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});tslib_1.__exportStar(delegated,t);tslib_1.__exportStar(delegatedProxy,t);tslib_1.__exportStar(offchain$1,t)}));var request=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.NO_EXPIRATION=void 0;t.NO_EXPIRATION=0}));var transaction=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.Base=t.Transaction=void 0;class r{tx;waitCallback;constructor(e,t){this.tx=e;this.waitCallback=t}async wait(e){const t=await this.tx.wait(e);return this.waitCallback(t)}}t.Transaction=r;class n{contract;constructor(e,t,r){this.contract=e.attach(t);if(r){this.connect(r)}}connect(e){this.contract=this.contract.connect(e);return this}async getChainId(){return(await this.contract.provider.getNetwork()).chainId}}t.Base=n}));var eas=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.EAS=void 0;tslib_1.__exportStar(request,t);class r extends transaction.Base{proxy;delegated;offchain;constructor(e,t){const{signerOrProvider:r,proxy:n}=t||{};super(new typechainTypes.EAS__factory,e,r);if(n){this.proxy=n}}connect(e){delete this.delegated;delete this.offchain;super.connect(e);return this}getVersion(){return this.contract.VERSION()}getAttestation(e){return this.contract.getAttestation(e)}isAttestationValid(e){return this.contract.isAttestationValid(e)}async isAttestationRevoked(e){const t=await this.contract.getAttestation(e);if(t.uid===utils$1.ZERO_BYTES32){throw new Error("Invalid attestation")}return!t.revocationTime.isZero()}getTimestamp(e){return this.contract.getTimestamp(e)}getRevocationOffchain(e,t){return this.contract.getRevokeOffchain(e,t)}getEIP712Proxy(){return this.proxy}getDelegated(){if(this.delegated){return this.delegated}return this.setDelegated()}getOffchain(){if(this.offchain){return this.offchain}return this.setOffchain()}async attest({schema:e,data:{recipient:t,data:r,expirationTime:n=request.NO_EXPIRATION,revocable:i=true,refUID:s=utils$1.ZERO_BYTES32,value:a=0}},o){const f=await this.contract.attest({schema:e,data:{recipient:t,expirationTime:n,revocable:i,refUID:s,data:r,value:a}},{value:a,...o});return new transaction.Transaction(f,(async e=>(await(0,utils$1.getUIDsFromAttestEvents)(e.events))[0]))}async attestByDelegation({schema:e,data:{recipient:t,data:r,expirationTime:n=request.NO_EXPIRATION,revocable:i=true,refUID:s=utils$1.ZERO_BYTES32,value:a=0},attester:o,signature:f},c){const u=await this.contract.attestByDelegation({schema:e,data:{recipient:t,expirationTime:n,revocable:i,refUID:s,data:r,value:a},signature:f,attester:o},{value:a,...c});return new transaction.Transaction(u,(async e=>(await(0,utils$1.getUIDsFromAttestEvents)(e.events))[0]))}async multiAttest(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({recipient:e.recipient,expirationTime:e.expirationTime??request.NO_EXPIRATION,revocable:e.revocable??true,refUID:e.refUID??utils$1.ZERO_BYTES32,data:e.data??utils$1.ZERO_BYTES32,value:e.value??0})))})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e.add(t.value)),ethers_1.BigNumber.from(0));return e.add(r)}),ethers_1.BigNumber.from(0));const i=await this.contract.multiAttest(r,{value:n,...t});return new transaction.Transaction(i,(async e=>(0,utils$1.getUIDsFromAttestEvents)(e.events)))}async multiAttestByDelegation(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({recipient:e.recipient,expirationTime:e.expirationTime??request.NO_EXPIRATION,revocable:e.revocable??true,refUID:e.refUID??utils$1.ZERO_BYTES32,data:e.data??utils$1.ZERO_BYTES32,value:e.value??0}))),signatures:e.signatures,attester:e.attester})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e.add(t.value)),ethers_1.BigNumber.from(0));return e.add(r)}),ethers_1.BigNumber.from(0));const i=await this.contract.multiAttestByDelegation(r,{value:n,...t});return new transaction.Transaction(i,(async e=>(0,utils$1.getUIDsFromAttestEvents)(e.events)))}async revoke({schema:e,data:{uid:t,value:r=0}},n){const i=await this.contract.revoke({schema:e,data:{uid:t,value:r}},{value:r,...n});return new transaction.Transaction(i,(async()=>{}))}async revokeByDelegation({schema:e,data:{uid:t,value:r=0},signature:n,revoker:i},s){const a=await this.contract.revokeByDelegation({schema:e,data:{uid:t,value:r},signature:n,revoker:i},{value:r,...s});return new transaction.Transaction(a,(async()=>{}))}async multiRevoke(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({uid:e.uid,value:e.value??0})))})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e.add(t.value)),ethers_1.BigNumber.from(0));return e.add(r)}),ethers_1.BigNumber.from(0));const i=await this.contract.multiRevoke(r,{value:n,...t});return new transaction.Transaction(i,(async()=>{}))}async multiRevokeByDelegation(e,t){const r=e.map((e=>({schema:e.schema,data:e.data.map((e=>({uid:e.uid,value:e.value??0}))),signatures:e.signatures,revoker:e.revoker})));const n=r.reduce(((e,{data:t})=>{const r=t.reduce(((e,t)=>e.add(t.value)),ethers_1.BigNumber.from(0));return e.add(r)}),ethers_1.BigNumber.from(0));const i=await this.contract.multiRevokeByDelegation(r,{value:n,...t});return new transaction.Transaction(i,(async()=>{}))}attestByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.attestByDelegationProxy(e,t)}multiAttestByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.multiAttestByDelegationProxy(e,t)}revokeByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.revokeByDelegationProxy(e,t)}multiRevokeByDelegationProxy(e,t){if(!this.proxy){throw new Error("Proxy wasn't set")}return this.proxy.multiRevokeByDelegationProxy(e,t)}async timestamp(e,t){const r=await this.contract.timestamp(e,t??{});return new transaction.Transaction(r,(async e=>(await(0,utils$1.getTimestampFromTimestampEvents)(e.events))[0]))}async multiTimestamp(e,t){const r=await this.contract.multiTimestamp(e,t??{});return new transaction.Transaction(r,(async e=>(0,utils$1.getTimestampFromTimestampEvents)(e.events)))}async revokeOffchain(e,t){const r=await this.contract.revokeOffchain(e,t??{});return new transaction.Transaction(r,(async e=>(await(0,utils$1.getTimestampFromOffchainRevocationEvents)(e.events))[0]))}async multiRevokeOffchain(e,t){const r=await this.contract.multiRevokeOffchain(e,t??{});return new transaction.Transaction(r,(async e=>(0,utils$1.getTimestampFromOffchainRevocationEvents)(e.events)))}getDomainSeparator(){return this.contract.getDomainSeparator()}getNonce(e){return this.contract.getNonce(e)}getAttestTypeHash(){return this.contract.getAttestTypeHash()}getRevokeTypeHash(){return this.contract.getRevokeTypeHash()}async setDelegated(){this.delegated=new offchain.Delegated({address:this.contract.address,version:await this.getVersion(),chainId:await this.getChainId()});return this.delegated}async setOffchain(){this.offchain=new offchain.Offchain({address:this.contract.address,version:await this.getVersion(),chainId:await this.getChainId()},offchain.OFFCHAIN_ATTESTATION_VERSION);return this.offchain}}t.EAS=r}));var schemaEncoder=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.SchemaEncoder=void 0;const{FunctionFragment:r,defaultAbiCoder:n,isBytesLike:i,formatBytes32String:s}=ethers_1.utils;const a="tuple";const o="tuple[]";class f{schema;constructor(e){this.schema=[];const t=e.replace(/ipfsHash/g,"bytes32");const i=r.from(`func(${t})`);n.getDefaultValue(i.inputs);for(const e of i.inputs){const{name:t,components:r}=e;let{type:n}=e;let i=t?`${n} ${t}`:n;const s=t?` ${t}`:"";let c=n;const u=`(${(r||[]).map((e=>e.type)).join(",")})`;const l=`(${(r||[]).map((e=>e.name?`${e.type} ${e.name}`:e.type)).join(",")})`;if(n===a){n=u;i=`${l}${s}`}else if(n===o){n=`${u}[]`;i=`${l}[]${s}`}else if(n.includes("[]")){c=c.replace("[]","")}const h=f.getDefaultValueForTypeName(c);this.schema.push({name:t,type:n,signature:i,value:n.includes("[]")?[]:h})}}encodeData(e){if(e.length!==this.schema.length){throw new Error("Invalid number or values")}const t=[];for(const[r,n]of this.schema.entries()){const{type:a,name:o,value:c}=e[r];const u=a.replace(/\s/g,"");if(u!==n.type&&u!==n.signature&&!(u==="ipfsHash"&&n.type==="bytes32")){throw new Error(`Incompatible param type: ${u}`)}if(o!==n.name){throw new Error(`Incompatible param name: ${o}`)}t.push(n.type==="bytes32"&&n.name==="ipfsHash"?f.decodeIpfsValue(c):n.type==="bytes32"&&typeof c==="string"&&!i(c)?s(c):c)}return n.encode(this.signatures(),t)}decodeData(e){const t=n.decode(this.signatures(),e);return this.schema.map(((e,n)=>{const i=r.from(`func(${e.signature})`);if(i.inputs.length!==1){throw new Error(`Unexpected inputs: ${i.inputs}`)}let s=t[n];const a=i.inputs[0];const{components:o}=a;if(s.length>0&&o){if(Array.isArray(s[0])){const t=[];for(const e of s){const r=[];const n=e.filter((e=>typeof e!=="object"));for(const[e,t]of n.entries()){const n=o[e];r.push({name:n.name,type:n.type,value:t})}t.push(r)}s={name:e.name,type:e.type,value:t}}else{const t=[];const r=s.filter((e=>typeof e!=="object"));for(const[e,n]of r.entries()){const r=o[e];t.push({name:r.name,type:r.type,value:n})}s={name:e.name,type:e.type,value:t}}}else{s={name:e.name,type:e.type,value:s}}return{name:e.name,type:e.type,signature:e.signature,value:s}}))}isEncodedDataValid(e){try{this.decodeData(e);return true}catch(e){return false}}static isCID(e){try{src$9.CID.parse(e);return true}catch{return false}}static encodeQmHash(e){const t=src$9.CID.parse(e);return n.encode(["bytes32"],[t.multihash.digest])}static decodeQmHash(e){const t=Uint8Array.from(Buffer.from(e.slice(2),"hex"));const r={digest:t,code:18,size:32,bytes:Uint8Array.from([18,32,...t])};const n=src$9.CID.createV0(r);return n.toString()}static getDefaultValueForTypeName(e){return e==="bool"?false:e.includes("uint")?"0":e==="address"?utils$1.ZERO_ADDRESS:""}static decodeIpfsValue(e){if(i(e)){return f.encodeBytes32Value(e)}try{const t=src$9.CID.parse(e);const r=n.encode(["bytes32"],[t.multihash.digest]);return r}catch{return f.encodeBytes32Value(e)}}static encodeBytes32Value(e){try{n.encode(["bytes32"],[e]);return e}catch(t){return s(e)}}signatures(){return this.schema.map((e=>e.signature))}}t.SchemaEncoder=f}));var schemaRegistry=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.SchemaRegistry=void 0;class r extends transaction.Base{constructor(e,t){const{signerOrProvider:r}=t||{};super(new typechainTypes.SchemaRegistry__factory,e,r)}getVersion(){return this.contract.VERSION()}async register({schema:e,resolverAddress:t=utils$1.ZERO_ADDRESS,revocable:r=true}){const n=await this.contract.register(e,t,r);return new transaction.Transaction(n,(async n=>(0,utils$1.getSchemaUID)(e,t,r)))}async getSchema({uid:e}){const t=await this.contract.getSchema(e);if(t.uid===utils$1.ZERO_BYTES32){throw new Error("Schema not found")}return t}}t.SchemaRegistry=r}));var dist=createCommonjsModule$2((function(e,t){Object.defineProperty(t,"__esModule",{value:true});tslib_1.__exportStar(eas,t);tslib_1.__exportStar(offchain,t);tslib_1.__exportStar(request,t);tslib_1.__exportStar(schemaEncoder,t);tslib_1.__exportStar(schemaRegistry,t);tslib_1.__exportStar(utils$1,t)}));
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4;const Z_BINARY=0;const Z_TEXT=1;const Z_UNKNOWN$1=2;function zero$1(e){let t=e.length;while(--t>=0){e[t]=0}}const STORED_BLOCK=0;const STATIC_TREES=1;const DYN_TREES=2;const MIN_MATCH$1=3;const MAX_MATCH$1=258;const LENGTH_CODES$1=29;const LITERALS$1=256;const L_CODES$1=LITERALS$1+1+LENGTH_CODES$1;const D_CODES$1=30;const BL_CODES$1=19;const HEAP_SIZE$1=2*L_CODES$1+1;const MAX_BITS$1=15;const Buf_size=16;const MAX_BL_BITS=7;const END_BLOCK=256;const REP_3_6=16;const REPZ_3_10=17;const REPZ_11_138=18;const extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);const extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);const extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);const bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);const DIST_CODE_LEN=512;const static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(e,t,r,n,i){this.static_tree=e;this.extra_bits=t;this.extra_base=r;this.elems=n;this.max_length=i;this.has_stree=e&&e.length}let static_l_desc;let static_d_desc;let static_bl_desc;function TreeDesc(e,t){this.dyn_tree=e;this.max_code=0;this.stat_desc=t}const d_code=e=>e<256?_dist_code[e]:_dist_code[256+(e>>>7)];const put_short=(e,t)=>{e.pending_buf[e.pending++]=t&255;e.pending_buf[e.pending++]=t>>>8&255};const send_bits=(e,t,r)=>{if(e.bi_valid>Buf_size-r){e.bi_buf|=t<<e.bi_valid&65535;put_short(e,e.bi_buf);e.bi_buf=t>>Buf_size-e.bi_valid;e.bi_valid+=r-Buf_size}else{e.bi_buf|=t<<e.bi_valid&65535;e.bi_valid+=r}};const send_code=(e,t,r)=>{send_bits(e,r[t*2],r[t*2+1])};const bi_reverse=(e,t)=>{let r=0;do{r|=e&1;e>>>=1;r<<=1}while(--t>0);return r>>>1};const bi_flush=e=>{if(e.bi_valid===16){put_short(e,e.bi_buf);e.bi_buf=0;e.bi_valid=0}else if(e.bi_valid>=8){e.pending_buf[e.pending++]=e.bi_buf&255;e.bi_buf>>=8;e.bi_valid-=8}};const gen_bitlen=(e,t)=>{const r=t.dyn_tree;const n=t.max_code;const i=t.stat_desc.static_tree;const s=t.stat_desc.has_stree;const a=t.stat_desc.extra_bits;const o=t.stat_desc.extra_base;const f=t.stat_desc.max_length;let c;let u,l;let h;let d;let p;let y=0;for(h=0;h<=MAX_BITS$1;h++){e.bl_count[h]=0}r[e.heap[e.heap_max]*2+1]=0;for(c=e.heap_max+1;c<HEAP_SIZE$1;c++){u=e.heap[c];h=r[r[u*2+1]*2+1]+1;if(h>f){h=f;y++}r[u*2+1]=h;if(u>n){continue}e.bl_count[h]++;d=0;if(u>=o){d=a[u-o]}p=r[u*2];e.opt_len+=p*(h+d);if(s){e.static_len+=p*(i[u*2+1]+d)}}if(y===0){return}do{h=f-1;while(e.bl_count[h]===0){h--}e.bl_count[h]--;e.bl_count[h+1]+=2;e.bl_count[f]--;y-=2}while(y>0);for(h=f;h!==0;h--){u=e.bl_count[h];while(u!==0){l=e.heap[--c];if(l>n){continue}if(r[l*2+1]!==h){e.opt_len+=(h-r[l*2+1])*r[l*2];r[l*2+1]=h}u--}}};const gen_codes=(e,t,r)=>{const n=new Array(MAX_BITS$1+1);let i=0;let s;let a;for(s=1;s<=MAX_BITS$1;s++){i=i+r[s-1]<<1;n[s]=i}for(a=0;a<=t;a++){let t=e[a*2+1];if(t===0){continue}e[a*2]=bi_reverse(n[t]++,t)}};const tr_static_init=()=>{let e;let t;let r;let n;let i;const s=new Array(MAX_BITS$1+1);r=0;for(n=0;n<LENGTH_CODES$1-1;n++){base_length[n]=r;for(e=0;e<1<<extra_lbits[n];e++){_length_code[r++]=n}}_length_code[r-1]=n;i=0;for(n=0;n<16;n++){base_dist[n]=i;for(e=0;e<1<<extra_dbits[n];e++){_dist_code[i++]=n}}i>>=7;for(;n<D_CODES$1;n++){base_dist[n]=i<<7;for(e=0;e<1<<extra_dbits[n]-7;e++){_dist_code[256+i++]=n}}for(t=0;t<=MAX_BITS$1;t++){s[t]=0}e=0;while(e<=143){static_ltree[e*2+1]=8;e++;s[8]++}while(e<=255){static_ltree[e*2+1]=9;e++;s[9]++}while(e<=279){static_ltree[e*2+1]=7;e++;s[7]++}while(e<=287){static_ltree[e*2+1]=8;e++;s[8]++}gen_codes(static_ltree,L_CODES$1+1,s);for(e=0;e<D_CODES$1;e++){static_dtree[e*2+1]=5;static_dtree[e*2]=bi_reverse(e,5)}static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)};const init_block=e=>{let t;for(t=0;t<L_CODES$1;t++){e.dyn_ltree[t*2]=0}for(t=0;t<D_CODES$1;t++){e.dyn_dtree[t*2]=0}for(t=0;t<BL_CODES$1;t++){e.bl_tree[t*2]=0}e.dyn_ltree[END_BLOCK*2]=1;e.opt_len=e.static_len=0;e.sym_next=e.matches=0};const bi_windup=e=>{if(e.bi_valid>8){put_short(e,e.bi_buf)}else if(e.bi_valid>0){e.pending_buf[e.pending++]=e.bi_buf}e.bi_buf=0;e.bi_valid=0};const smaller=(e,t,r,n)=>{const i=t*2;const s=r*2;return e[i]<e[s]||e[i]===e[s]&&n[t]<=n[r]};const pqdownheap=(e,t,r)=>{const n=e.heap[r];let i=r<<1;while(i<=e.heap_len){if(i<e.heap_len&&smaller(t,e.heap[i+1],e.heap[i],e.depth)){i++}if(smaller(t,n,e.heap[i],e.depth)){break}e.heap[r]=e.heap[i];r=i;i<<=1}e.heap[r]=n};const compress_block=(e,t,r)=>{let n;let i;let s=0;let a;let o;if(e.sym_next!==0){do{n=e.pending_buf[e.sym_buf+s++]&255;n+=(e.pending_buf[e.sym_buf+s++]&255)<<8;i=e.pending_buf[e.sym_buf+s++];if(n===0){send_code(e,i,t)}else{a=_length_code[i];send_code(e,a+LITERALS$1+1,t);o=extra_lbits[a];if(o!==0){i-=base_length[a];send_bits(e,i,o)}n--;a=d_code(n);send_code(e,a,r);o=extra_dbits[a];if(o!==0){n-=base_dist[a];send_bits(e,n,o)}}}while(s<e.sym_next)}send_code(e,END_BLOCK,t)};const build_tree=(e,t)=>{const r=t.dyn_tree;const n=t.stat_desc.static_tree;const i=t.stat_desc.has_stree;const s=t.stat_desc.elems;let a,o;let f=-1;let c;e.heap_len=0;e.heap_max=HEAP_SIZE$1;for(a=0;a<s;a++){if(r[a*2]!==0){e.heap[++e.heap_len]=f=a;e.depth[a]=0}else{r[a*2+1]=0}}while(e.heap_len<2){c=e.heap[++e.heap_len]=f<2?++f:0;r[c*2]=1;e.depth[c]=0;e.opt_len--;if(i){e.static_len-=n[c*2+1]}}t.max_code=f;for(a=e.heap_len>>1;a>=1;a--){pqdownheap(e,r,a)}c=s;do{a=e.heap[1];e.heap[1]=e.heap[e.heap_len--];pqdownheap(e,r,1);o=e.heap[1];e.heap[--e.heap_max]=a;e.heap[--e.heap_max]=o;r[c*2]=r[a*2]+r[o*2];e.depth[c]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1;r[a*2+1]=r[o*2+1]=c;e.heap[1]=c++;pqdownheap(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1];gen_bitlen(e,t);gen_codes(r,f,e.bl_count)};const scan_tree=(e,t,r)=>{let n;let i=-1;let s;let a=t[0*2+1];let o=0;let f=7;let c=4;if(a===0){f=138;c=3}t[(r+1)*2+1]=65535;for(n=0;n<=r;n++){s=a;a=t[(n+1)*2+1];if(++o<f&&s===a){continue}else if(o<c){e.bl_tree[s*2]+=o}else if(s!==0){if(s!==i){e.bl_tree[s*2]++}e.bl_tree[REP_3_6*2]++}else if(o<=10){e.bl_tree[REPZ_3_10*2]++}else{e.bl_tree[REPZ_11_138*2]++}o=0;i=s;if(a===0){f=138;c=3}else if(s===a){f=6;c=3}else{f=7;c=4}}};const send_tree=(e,t,r)=>{let n;let i=-1;let s;let a=t[0*2+1];let o=0;let f=7;let c=4;if(a===0){f=138;c=3}for(n=0;n<=r;n++){s=a;a=t[(n+1)*2+1];if(++o<f&&s===a){continue}else if(o<c){do{send_code(e,s,e.bl_tree)}while(--o!==0)}else if(s!==0){if(s!==i){send_code(e,s,e.bl_tree);o--}send_code(e,REP_3_6,e.bl_tree);send_bits(e,o-3,2)}else if(o<=10){send_code(e,REPZ_3_10,e.bl_tree);send_bits(e,o-3,3)}else{send_code(e,REPZ_11_138,e.bl_tree);send_bits(e,o-11,7)}o=0;i=s;if(a===0){f=138;c=3}else if(s===a){f=6;c=3}else{f=7;c=4}}};const build_bl_tree=e=>{let t;scan_tree(e,e.dyn_ltree,e.l_desc.max_code);scan_tree(e,e.dyn_dtree,e.d_desc.max_code);build_tree(e,e.bl_desc);for(t=BL_CODES$1-1;t>=3;t--){if(e.bl_tree[bl_order[t]*2+1]!==0){break}}e.opt_len+=3*(t+1)+5+5+4;return t};const send_all_trees=(e,t,r,n)=>{let i;send_bits(e,t-257,5);send_bits(e,r-1,5);send_bits(e,n-4,4);for(i=0;i<n;i++){send_bits(e,e.bl_tree[bl_order[i]*2+1],3)}send_tree(e,e.dyn_ltree,t-1);send_tree(e,e.dyn_dtree,r-1)};const detect_data_type=e=>{let t=4093624447;let r;for(r=0;r<=31;r++,t>>>=1){if(t&1&&e.dyn_ltree[r*2]!==0){return Z_BINARY}}if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0){return Z_TEXT}for(r=32;r<LITERALS$1;r++){if(e.dyn_ltree[r*2]!==0){return Z_TEXT}}return Z_BINARY};let static_init_done=false;const _tr_init$1=e=>{if(!static_init_done){tr_static_init();static_init_done=true}e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc);e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc);e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc);e.bi_buf=0;e.bi_valid=0;init_block(e)};const _tr_stored_block$1=(e,t,r,n)=>{send_bits(e,(STORED_BLOCK<<1)+(n?1:0),3);bi_windup(e);put_short(e,r);put_short(e,~r);if(r){e.pending_buf.set(e.window.subarray(t,t+r),e.pending)}e.pending+=r};const _tr_align$1=e=>{send_bits(e,STATIC_TREES<<1,3);send_code(e,END_BLOCK,static_ltree);bi_flush(e)};const _tr_flush_block$1=(e,t,r,n)=>{let i,s;let a=0;if(e.level>0){if(e.strm.data_type===Z_UNKNOWN$1){e.strm.data_type=detect_data_type(e)}build_tree(e,e.l_desc);build_tree(e,e.d_desc);a=build_bl_tree(e);i=e.opt_len+3+7>>>3;s=e.static_len+3+7>>>3;if(s<=i){i=s}}else{i=s=r+5}if(r+4<=i&&t!==-1){_tr_stored_block$1(e,t,r,n)}else if(e.strategy===Z_FIXED$1||s===i){send_bits(e,(STATIC_TREES<<1)+(n?1:0),3);compress_block(e,static_ltree,static_dtree)}else{send_bits(e,(DYN_TREES<<1)+(n?1:0),3);send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1);compress_block(e,e.dyn_ltree,e.dyn_dtree)}init_block(e);if(n){bi_windup(e)}};const _tr_tally$1=(e,t,r)=>{e.pending_buf[e.sym_buf+e.sym_next++]=t;e.pending_buf[e.sym_buf+e.sym_next++]=t>>8;e.pending_buf[e.sym_buf+e.sym_next++]=r;if(t===0){e.dyn_ltree[r*2]++}else{e.matches++;t--;e.dyn_ltree[(_length_code[r]+LITERALS$1+1)*2]++;e.dyn_dtree[d_code(t)*2]++}return e.sym_next===e.sym_end};var _tr_init_1=_tr_init$1;var _tr_stored_block_1=_tr_stored_block$1;var _tr_flush_block_1=_tr_flush_block$1;var _tr_tally_1=_tr_tally$1;var _tr_align_1=_tr_align$1;var trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(e,t,r,n)=>{let i=e&65535|0,s=e>>>16&65535|0,a=0;while(r!==0){a=r>2e3?2e3:r;r-=a;do{i=i+t[n++]|0;s=s+i|0}while(--a);i%=65521;s%=65521}return i|s<<16|0};var adler32_1=adler32;const makeTable=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++){e=e&1?3988292384^e>>>1:e>>>1}t[r]=e}return t};const crcTable=new Uint32Array(makeTable());const crc32=(e,t,r,n)=>{const i=crcTable;const s=n+r;e^=-1;for(let r=n;r<s;r++){e=e>>>8^i[(e^t[r])&255]}return e^-1};var crc32_1=crc32;var messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees;const{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2;const MAX_MEM_LEVEL=9;const MAX_WBITS$1=15;const DEF_MEM_LEVEL=8;const LENGTH_CODES=29;const LITERALS=256;const L_CODES=LITERALS+1+LENGTH_CODES;const D_CODES=30;const BL_CODES=19;const HEAP_SIZE=2*L_CODES+1;const MAX_BITS=15;const MIN_MATCH=3;const MAX_MATCH=258;const MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;const PRESET_DICT=32;const INIT_STATE=42;const GZIP_STATE=57;const EXTRA_STATE=69;const NAME_STATE=73;const COMMENT_STATE=91;const HCRC_STATE=103;const BUSY_STATE=113;const FINISH_STATE=666;const BS_NEED_MORE=1;const BS_BLOCK_DONE=2;const BS_FINISH_STARTED=3;const BS_FINISH_DONE=4;const OS_CODE=3;const err=(e,t)=>{e.msg=messages[t];return t};const rank=e=>e*2-(e>4?9:0);const zero=e=>{let t=e.length;while(--t>=0){e[t]=0}};const slide_hash=e=>{let t,r;let n;let i=e.w_size;t=e.hash_size;n=t;do{r=e.head[--n];e.head[n]=r>=i?r-i:0}while(--t);t=i;n=t;do{r=e.prev[--n];e.prev[n]=r>=i?r-i:0}while(--t)};let HASH_ZLIB=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;let HASH=HASH_ZLIB;const flush_pending=e=>{const t=e.state;let r=t.pending;if(r>e.avail_out){r=e.avail_out}if(r===0){return}e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out);e.next_out+=r;t.pending_out+=r;e.total_out+=r;e.avail_out-=r;t.pending-=r;if(t.pending===0){t.pending_out=0}};const flush_block_only=(e,t)=>{_tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t);e.block_start=e.strstart;flush_pending(e.strm)};const put_byte=(e,t)=>{e.pending_buf[e.pending++]=t};const putShortMSB=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255;e.pending_buf[e.pending++]=t&255};const read_buf=(e,t,r,n)=>{let i=e.avail_in;if(i>n){i=n}if(i===0){return 0}e.avail_in-=i;t.set(e.input.subarray(e.next_in,e.next_in+i),r);if(e.state.wrap===1){e.adler=adler32_1(e.adler,t,i,r)}else if(e.state.wrap===2){e.adler=crc32_1(e.adler,t,i,r)}e.next_in+=i;e.total_in+=i;return i};const longest_match=(e,t)=>{let r=e.max_chain_length;let n=e.strstart;let i;let s;let a=e.prev_length;let o=e.nice_match;const f=e.strstart>e.w_size-MIN_LOOKAHEAD?e.strstart-(e.w_size-MIN_LOOKAHEAD):0;const c=e.window;const u=e.w_mask;const l=e.prev;const h=e.strstart+MAX_MATCH;let d=c[n+a-1];let p=c[n+a];if(e.prev_length>=e.good_match){r>>=2}if(o>e.lookahead){o=e.lookahead}do{i=t;if(c[i+a]!==p||c[i+a-1]!==d||c[i]!==c[n]||c[++i]!==c[n+1]){continue}n+=2;i++;do{}while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<h);s=MAX_MATCH-(h-n);n=h-MAX_MATCH;if(s>a){e.match_start=t;a=s;if(s>=o){break}d=c[n+a-1];p=c[n+a]}}while((t=l[t&u])>f&&--r!==0);if(a<=e.lookahead){return a}return e.lookahead};const fill_window=e=>{const t=e.w_size;let r,n,i;do{n=e.window_size-e.lookahead-e.strstart;if(e.strstart>=t+(t-MIN_LOOKAHEAD)){e.window.set(e.window.subarray(t,t+t-n),0);e.match_start-=t;e.strstart-=t;e.block_start-=t;if(e.insert>e.strstart){e.insert=e.strstart}slide_hash(e);n+=t}if(e.strm.avail_in===0){break}r=read_buf(e.strm,e.window,e.strstart+e.lookahead,n);e.lookahead+=r;if(e.lookahead+e.insert>=MIN_MATCH){i=e.strstart-e.insert;e.ins_h=e.window[i];e.ins_h=HASH(e,e.ins_h,e.window[i+1]);while(e.insert){e.ins_h=HASH(e,e.ins_h,e.window[i+MIN_MATCH-1]);e.prev[i&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=i;i++;e.insert--;if(e.lookahead+e.insert<MIN_MATCH){break}}}}while(e.lookahead<MIN_LOOKAHEAD&&e.strm.avail_in!==0)};const deflate_stored=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5;let n,i,s,a=0;let o=e.strm.avail_in;do{n=65535;s=e.bi_valid+42>>3;if(e.strm.avail_out<s){break}s=e.strm.avail_out-s;i=e.strstart-e.block_start;if(n>i+e.strm.avail_in){n=i+e.strm.avail_in}if(n>s){n=s}if(n<r&&(n===0&&t!==Z_FINISH$3||t===Z_NO_FLUSH$2||n!==i+e.strm.avail_in)){break}a=t===Z_FINISH$3&&n===i+e.strm.avail_in?1:0;_tr_stored_block(e,0,0,a);e.pending_buf[e.pending-4]=n;e.pending_buf[e.pending-3]=n>>8;e.pending_buf[e.pending-2]=~n;e.pending_buf[e.pending-1]=~n>>8;flush_pending(e.strm);if(i){if(i>n){i=n}e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out);e.strm.next_out+=i;e.strm.avail_out-=i;e.strm.total_out+=i;e.block_start+=i;n-=i}if(n){read_buf(e.strm,e.strm.output,e.strm.next_out,n);e.strm.next_out+=n;e.strm.avail_out-=n;e.strm.total_out+=n}}while(a===0);o-=e.strm.avail_in;if(o){if(o>=e.w_size){e.matches=2;e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0);e.strstart=e.w_size;e.insert=e.strstart}else{if(e.window_size-e.strstart<=o){e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}if(e.insert>e.strstart){e.insert=e.strstart}}e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart);e.strstart+=o;e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o}e.block_start=e.strstart}if(e.high_water<e.strstart){e.high_water=e.strstart}if(a){return BS_FINISH_DONE}if(t!==Z_NO_FLUSH$2&&t!==Z_FINISH$3&&e.strm.avail_in===0&&e.strstart===e.block_start){return BS_BLOCK_DONE}s=e.window_size-e.strstart;if(e.strm.avail_in>s&&e.block_start>=e.w_size){e.block_start-=e.w_size;e.strstart-=e.w_size;e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0);if(e.matches<2){e.matches++}s+=e.w_size;if(e.insert>e.strstart){e.insert=e.strstart}}if(s>e.strm.avail_in){s=e.strm.avail_in}if(s){read_buf(e.strm,e.window,e.strstart,s);e.strstart+=s;e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s}if(e.high_water<e.strstart){e.high_water=e.strstart}s=e.bi_valid+42>>3;s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s;r=s>e.w_size?e.w_size:s;i=e.strstart-e.block_start;if(i>=r||(i||t===Z_FINISH$3)&&t!==Z_NO_FLUSH$2&&e.strm.avail_in===0&&i<=s){n=i>s?s:i;a=t===Z_FINISH$3&&e.strm.avail_in===0&&n===i?1:0;_tr_stored_block(e,e.block_start,n,a);e.block_start+=n;flush_pending(e.strm)}return a?BS_FINISH_STARTED:BS_NEED_MORE};const deflate_fast=(e,t)=>{let r;let n;for(;;){if(e.lookahead<MIN_LOOKAHEAD){fill_window(e);if(e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}r=0;if(e.lookahead>=MIN_MATCH){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}if(r!==0&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD){e.match_length=longest_match(e,r)}if(e.match_length>=MIN_MATCH){n=_tr_tally(e,e.strstart-e.match_start,e.match_length-MIN_MATCH);e.lookahead-=e.match_length;if(e.match_length<=e.max_lazy_match&&e.lookahead>=MIN_MATCH){e.match_length--;do{e.strstart++;e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}while(--e.match_length!==0);e.strstart++}else{e.strstart+=e.match_length;e.match_length=0;e.ins_h=e.window[e.strstart];e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+1])}}else{n=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(n){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_slow=(e,t)=>{let r;let n;let i;for(;;){if(e.lookahead<MIN_LOOKAHEAD){fill_window(e);if(e.lookahead<MIN_LOOKAHEAD&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}r=0;if(e.lookahead>=MIN_MATCH){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}e.prev_length=e.match_length;e.prev_match=e.match_start;e.match_length=MIN_MATCH-1;if(r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-MIN_LOOKAHEAD){e.match_length=longest_match(e,r);if(e.match_length<=5&&(e.strategy===Z_FILTERED||e.match_length===MIN_MATCH&&e.strstart-e.match_start>4096)){e.match_length=MIN_MATCH-1}}if(e.prev_length>=MIN_MATCH&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-MIN_MATCH;n=_tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-MIN_MATCH);e.lookahead-=e.prev_length-1;e.prev_length-=2;do{if(++e.strstart<=i){e.ins_h=HASH(e,e.ins_h,e.window[e.strstart+MIN_MATCH-1]);r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h];e.head[e.ins_h]=e.strstart}}while(--e.prev_length!==0);e.match_available=0;e.match_length=MIN_MATCH-1;e.strstart++;if(n){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}else if(e.match_available){n=_tr_tally(e,0,e.window[e.strstart-1]);if(n){flush_block_only(e,false)}e.strstart++;e.lookahead--;if(e.strm.avail_out===0){return BS_NEED_MORE}}else{e.match_available=1;e.strstart++;e.lookahead--}}if(e.match_available){n=_tr_tally(e,0,e.window[e.strstart-1]);e.match_available=0}e.insert=e.strstart<MIN_MATCH-1?e.strstart:MIN_MATCH-1;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_rle=(e,t)=>{let r;let n;let i,s;const a=e.window;for(;;){if(e.lookahead<=MAX_MATCH){fill_window(e);if(e.lookahead<=MAX_MATCH&&t===Z_NO_FLUSH$2){return BS_NEED_MORE}if(e.lookahead===0){break}}e.match_length=0;if(e.lookahead>=MIN_MATCH&&e.strstart>0){i=e.strstart-1;n=a[i];if(n===a[++i]&&n===a[++i]&&n===a[++i]){s=e.strstart+MAX_MATCH;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);e.match_length=MAX_MATCH-(s-i);if(e.match_length>e.lookahead){e.match_length=e.lookahead}}}if(e.match_length>=MIN_MATCH){r=_tr_tally(e,1,e.match_length-MIN_MATCH);e.lookahead-=e.match_length;e.strstart+=e.match_length;e.match_length=0}else{r=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++}if(r){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=0;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};const deflate_huff=(e,t)=>{let r;for(;;){if(e.lookahead===0){fill_window(e);if(e.lookahead===0){if(t===Z_NO_FLUSH$2){return BS_NEED_MORE}break}}e.match_length=0;r=_tr_tally(e,0,e.window[e.strstart]);e.lookahead--;e.strstart++;if(r){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}}e.insert=0;if(t===Z_FINISH$3){flush_block_only(e,true);if(e.strm.avail_out===0){return BS_FINISH_STARTED}return BS_FINISH_DONE}if(e.sym_next){flush_block_only(e,false);if(e.strm.avail_out===0){return BS_NEED_MORE}}return BS_BLOCK_DONE};function Config(e,t,r,n,i){this.good_length=e;this.max_lazy=t;this.nice_length=r;this.max_chain=n;this.func=i}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];const lm_init=e=>{e.window_size=2*e.w_size;zero(e.head);e.max_lazy_match=configuration_table[e.level].max_lazy;e.good_match=configuration_table[e.level].good_length;e.nice_match=configuration_table[e.level].nice_length;e.max_chain_length=configuration_table[e.level].max_chain;e.strstart=0;e.block_start=0;e.lookahead=0;e.insert=0;e.match_length=e.prev_length=MIN_MATCH-1;e.match_available=0;e.ins_h=0};function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED$2;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(HEAP_SIZE*2);this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2);this.bl_tree=new Uint16Array((2*BL_CODES+1)*2);zero(this.dyn_ltree);zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(MAX_BITS+1);this.heap=new Uint16Array(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*L_CODES+1);zero(this.depth);this.sym_buf=0;this.lit_bufsize=0;this.sym_next=0;this.sym_end=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}const deflateStateCheck=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.status!==INIT_STATE&&t.status!==GZIP_STATE&&t.status!==EXTRA_STATE&&t.status!==NAME_STATE&&t.status!==COMMENT_STATE&&t.status!==HCRC_STATE&&t.status!==BUSY_STATE&&t.status!==FINISH_STATE){return 1}return 0};const deflateResetKeep=e=>{if(deflateStateCheck(e)){return err(e,Z_STREAM_ERROR$2)}e.total_in=e.total_out=0;e.data_type=Z_UNKNOWN;const t=e.state;t.pending=0;t.pending_out=0;if(t.wrap<0){t.wrap=-t.wrap}t.status=t.wrap===2?GZIP_STATE:t.wrap?INIT_STATE:BUSY_STATE;e.adler=t.wrap===2?0:1;t.last_flush=-2;_tr_init(t);return Z_OK$3};const deflateReset=e=>{const t=deflateResetKeep(e);if(t===Z_OK$3){lm_init(e.state)}return t};const deflateSetHeader=(e,t)=>{if(deflateStateCheck(e)||e.state.wrap!==2){return Z_STREAM_ERROR$2}e.state.gzhead=t;return Z_OK$3};const deflateInit2=(e,t,r,n,i,s)=>{if(!e){return Z_STREAM_ERROR$2}let a=1;if(t===Z_DEFAULT_COMPRESSION$1){t=6}if(n<0){a=0;n=-n}else if(n>15){a=2;n-=16}if(i<1||i>MAX_MEM_LEVEL||r!==Z_DEFLATED$2||n<8||n>15||t<0||t>9||s<0||s>Z_FIXED||n===8&&a!==1){return err(e,Z_STREAM_ERROR$2)}if(n===8){n=9}const o=new DeflateState;e.state=o;o.strm=e;o.status=INIT_STATE;o.wrap=a;o.gzhead=null;o.w_bits=n;o.w_size=1<<o.w_bits;o.w_mask=o.w_size-1;o.hash_bits=i+7;o.hash_size=1<<o.hash_bits;o.hash_mask=o.hash_size-1;o.hash_shift=~~((o.hash_bits+MIN_MATCH-1)/MIN_MATCH);o.window=new Uint8Array(o.w_size*2);o.head=new Uint16Array(o.hash_size);o.prev=new Uint16Array(o.w_size);o.lit_bufsize=1<<i+6;o.pending_buf_size=o.lit_bufsize*4;o.pending_buf=new Uint8Array(o.pending_buf_size);o.sym_buf=o.lit_bufsize;o.sym_end=(o.lit_bufsize-1)*3;o.level=t;o.strategy=s;o.method=r;return deflateReset(e)};const deflateInit=(e,t)=>deflateInit2(e,t,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1);const deflate$2=(e,t)=>{if(deflateStateCheck(e)||t>Z_BLOCK$1||t<0){return e?err(e,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2}const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===FINISH_STATE&&t!==Z_FINISH$3){return err(e,e.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2)}const n=r.last_flush;r.last_flush=t;if(r.pending!==0){flush_pending(e);if(e.avail_out===0){r.last_flush=-1;return Z_OK$3}}else if(e.avail_in===0&&rank(t)<=rank(n)&&t!==Z_FINISH$3){return err(e,Z_BUF_ERROR$1)}if(r.status===FINISH_STATE&&e.avail_in!==0){return err(e,Z_BUF_ERROR$1)}if(r.status===INIT_STATE&&r.wrap===0){r.status=BUSY_STATE}if(r.status===INIT_STATE){let t=Z_DEFLATED$2+(r.w_bits-8<<4)<<8;let n=-1;if(r.strategy>=Z_HUFFMAN_ONLY||r.level<2){n=0}else if(r.level<6){n=1}else if(r.level===6){n=2}else{n=3}t|=n<<6;if(r.strstart!==0){t|=PRESET_DICT}t+=31-t%31;putShortMSB(r,t);if(r.strstart!==0){putShortMSB(r,e.adler>>>16);putShortMSB(r,e.adler&65535)}e.adler=1;r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}if(r.status===GZIP_STATE){e.adler=0;put_byte(r,31);put_byte(r,139);put_byte(r,8);if(!r.gzhead){put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,0);put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0);put_byte(r,OS_CODE);r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}else{put_byte(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(!r.gzhead.extra?0:4)+(!r.gzhead.name?0:8)+(!r.gzhead.comment?0:16));put_byte(r,r.gzhead.time&255);put_byte(r,r.gzhead.time>>8&255);put_byte(r,r.gzhead.time>>16&255);put_byte(r,r.gzhead.time>>24&255);put_byte(r,r.level===9?2:r.strategy>=Z_HUFFMAN_ONLY||r.level<2?4:0);put_byte(r,r.gzhead.os&255);if(r.gzhead.extra&&r.gzhead.extra.length){put_byte(r,r.gzhead.extra.length&255);put_byte(r,r.gzhead.extra.length>>8&255)}if(r.gzhead.hcrc){e.adler=crc32_1(e.adler,r.pending_buf,r.pending,0)}r.gzindex=0;r.status=EXTRA_STATE}}if(r.status===EXTRA_STATE){if(r.gzhead.extra){let t=r.pending;let n=(r.gzhead.extra.length&65535)-r.gzindex;while(r.pending+n>r.pending_buf_size){let i=r.pending_buf_size-r.pending;r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending);r.pending=r.pending_buf_size;if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex+=i;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0;n-=i}let i=new Uint8Array(r.gzhead.extra);r.pending_buf.set(i.subarray(r.gzindex,r.gzindex+n),r.pending);r.pending+=n;if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex=0}r.status=NAME_STATE}if(r.status===NAME_STATE){if(r.gzhead.name){let t=r.pending;let n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0}if(r.gzindex<r.gzhead.name.length){n=r.gzhead.name.charCodeAt(r.gzindex++)&255}else{n=0}put_byte(r,n)}while(n!==0);if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}r.gzindex=0}r.status=COMMENT_STATE}if(r.status===COMMENT_STATE){if(r.gzhead.comment){let t=r.pending;let n;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}t=0}if(r.gzindex<r.gzhead.comment.length){n=r.gzhead.comment.charCodeAt(r.gzindex++)&255}else{n=0}put_byte(r,n)}while(n!==0);if(r.gzhead.hcrc&&r.pending>t){e.adler=crc32_1(e.adler,r.pending_buf,r.pending-t,t)}}r.status=HCRC_STATE}if(r.status===HCRC_STATE){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size){flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}put_byte(r,e.adler&255);put_byte(r,e.adler>>8&255);e.adler=0}r.status=BUSY_STATE;flush_pending(e);if(r.pending!==0){r.last_flush=-1;return Z_OK$3}}if(e.avail_in!==0||r.lookahead!==0||t!==Z_NO_FLUSH$2&&r.status!==FINISH_STATE){let n=r.level===0?deflate_stored(r,t):r.strategy===Z_HUFFMAN_ONLY?deflate_huff(r,t):r.strategy===Z_RLE?deflate_rle(r,t):configuration_table[r.level].func(r,t);if(n===BS_FINISH_STARTED||n===BS_FINISH_DONE){r.status=FINISH_STATE}if(n===BS_NEED_MORE||n===BS_FINISH_STARTED){if(e.avail_out===0){r.last_flush=-1}return Z_OK$3}if(n===BS_BLOCK_DONE){if(t===Z_PARTIAL_FLUSH){_tr_align(r)}else if(t!==Z_BLOCK$1){_tr_stored_block(r,0,0,false);if(t===Z_FULL_FLUSH$1){zero(r.head);if(r.lookahead===0){r.strstart=0;r.block_start=0;r.insert=0}}}flush_pending(e);if(e.avail_out===0){r.last_flush=-1;return Z_OK$3}}}if(t!==Z_FINISH$3){return Z_OK$3}if(r.wrap<=0){return Z_STREAM_END$3}if(r.wrap===2){put_byte(r,e.adler&255);put_byte(r,e.adler>>8&255);put_byte(r,e.adler>>16&255);put_byte(r,e.adler>>24&255);put_byte(r,e.total_in&255);put_byte(r,e.total_in>>8&255);put_byte(r,e.total_in>>16&255);put_byte(r,e.total_in>>24&255)}else{putShortMSB(r,e.adler>>>16);putShortMSB(r,e.adler&65535)}flush_pending(e);if(r.wrap>0){r.wrap=-r.wrap}return r.pending!==0?Z_OK$3:Z_STREAM_END$3};const deflateEnd=e=>{if(deflateStateCheck(e)){return Z_STREAM_ERROR$2}const t=e.state.status;e.state=null;return t===BUSY_STATE?err(e,Z_DATA_ERROR$2):Z_OK$3};const deflateSetDictionary=(e,t)=>{let r=t.length;if(deflateStateCheck(e)){return Z_STREAM_ERROR$2}const n=e.state;const i=n.wrap;if(i===2||i===1&&n.status!==INIT_STATE||n.lookahead){return Z_STREAM_ERROR$2}if(i===1){e.adler=adler32_1(e.adler,t,r,0)}n.wrap=0;if(r>=n.w_size){if(i===0){zero(n.head);n.strstart=0;n.block_start=0;n.insert=0}let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0);t=e;r=n.w_size}const s=e.avail_in;const a=e.next_in;const o=e.input;e.avail_in=r;e.next_in=0;e.input=t;fill_window(n);while(n.lookahead>=MIN_MATCH){let e=n.strstart;let t=n.lookahead-(MIN_MATCH-1);do{n.ins_h=HASH(n,n.ins_h,n.window[e+MIN_MATCH-1]);n.prev[e&n.w_mask]=n.head[n.ins_h];n.head[n.ins_h]=e;e++}while(--t);n.strstart=e;n.lookahead=MIN_MATCH-1;fill_window(n)}n.strstart+=n.lookahead;n.block_start=n.strstart;n.insert=n.lookahead;n.lookahead=0;n.match_length=n.prev_length=MIN_MATCH-1;n.match_available=0;e.next_in=a;e.input=o;e.avail_in=s;n.wrap=i;return Z_OK$3};var deflateInit_1=deflateInit;var deflateInit2_1=deflateInit2;var deflateReset_1=deflateReset;var deflateResetKeep_1=deflateResetKeep;var deflateSetHeader_1=deflateSetHeader;var deflate_2$1=deflate$2;var deflateEnd_1=deflateEnd;var deflateSetDictionary_1=deflateSetDictionary;var deflateInfo="pako deflate (from Nodeca project)";var deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var assign=function(e){const t=Array.prototype.slice.call(arguments,1);while(t.length){const r=t.shift();if(!r){continue}if(typeof r!=="object"){throw new TypeError(r+"must be non-object")}for(const t in r){if(_has(r,t)){e[t]=r[t]}}}return e};var flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++){t+=e[r].length}const r=new Uint8Array(t);for(let t=0,n=0,i=e.length;t<i;t++){let i=e[t];r.set(i,n);n+=i.length}return r};var common={assign,flattenChunks};let STR_APPLY_UIA_OK=true;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){STR_APPLY_UIA_OK=false}const _utf8len=new Uint8Array(256);for(let e=0;e<256;e++){_utf8len[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1}_utf8len[254]=_utf8len[254]=1;var string2buf=e=>{if(typeof TextEncoder==="function"&&TextEncoder.prototype.encode){return(new TextEncoder).encode(e)}let t,r,n,i,s,a=e.length,o=0;for(i=0;i<a;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}o+=r<128?1:r<2048?2:r<65536?3:4}t=new Uint8Array(o);for(s=0,i=0;s<o;i++){r=e.charCodeAt(i);if((r&64512)===55296&&i+1<a){n=e.charCodeAt(i+1);if((n&64512)===56320){r=65536+(r-55296<<10)+(n-56320);i++}}if(r<128){t[s++]=r}else if(r<2048){t[s++]=192|r>>>6;t[s++]=128|r&63}else if(r<65536){t[s++]=224|r>>>12;t[s++]=128|r>>>6&63;t[s++]=128|r&63}else{t[s++]=240|r>>>18;t[s++]=128|r>>>12&63;t[s++]=128|r>>>6&63;t[s++]=128|r&63}}return t};const buf2binstring=(e,t)=>{if(t<65534){if(e.subarray&&STR_APPLY_UIA_OK){return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t))}}let r="";for(let n=0;n<t;n++){r+=String.fromCharCode(e[n])}return r};var buf2string=(e,t)=>{const r=t||e.length;if(typeof TextDecoder==="function"&&TextDecoder.prototype.decode){return(new TextDecoder).decode(e.subarray(0,t))}let n,i;const s=new Array(r*2);for(i=0,n=0;n<r;){let t=e[n++];if(t<128){s[i++]=t;continue}let a=_utf8len[t];if(a>4){s[i++]=65533;n+=a-1;continue}t&=a===2?31:a===3?15:7;while(a>1&&n<r){t=t<<6|e[n++]&63;a--}if(a>1){s[i++]=65533;continue}if(t<65536){s[i++]=t}else{t-=65536;s[i++]=55296|t>>10&1023;s[i++]=56320|t&1023}}return buf2binstring(s,i)};var utf8border=(e,t)=>{t=t||e.length;if(t>e.length){t=e.length}let r=t-1;while(r>=0&&(e[r]&192)===128){r--}if(r<0){return t}if(r===0){return t}return r+_utf8len[e[r]]>t?r:t};var strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString;const{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(e){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},e||{});let t=this.options;if(t.raw&&t.windowBits>0){t.windowBits=-t.windowBits}else if(t.gzip&&t.windowBits>0&&t.windowBits<16){t.windowBits+=16}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let r=deflate_1$2.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Z_OK$2){throw new Error(messages[r])}if(t.header){deflate_1$2.deflateSetHeader(this.strm,t.header)}if(t.dictionary){let e;if(typeof t.dictionary==="string"){e=strings.string2buf(t.dictionary)}else if(toString$1.call(t.dictionary)==="[object ArrayBuffer]"){e=new Uint8Array(t.dictionary)}else{e=t.dictionary}r=deflate_1$2.deflateSetDictionary(this.strm,e);if(r!==Z_OK$2){throw new Error(messages[r])}this._dict_set=true}}Deflate$1.prototype.push=function(e,t){const r=this.strm;const n=this.options.chunkSize;let i,s;if(this.ended){return false}if(t===~~t)s=t;else s=t===true?Z_FINISH$2:Z_NO_FLUSH$1;if(typeof e==="string"){r.input=strings.string2buf(e)}else if(toString$1.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(n);r.next_out=0;r.avail_out=n}if((s===Z_SYNC_FLUSH||s===Z_FULL_FLUSH)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out));r.avail_out=0;continue}i=deflate_1$2.deflate(r,s);if(i===Z_STREAM_END$2){if(r.next_out>0){this.onData(r.output.subarray(0,r.next_out))}i=deflate_1$2.deflateEnd(this.strm);this.onEnd(i);this.ended=true;return i===Z_OK$2}if(r.avail_out===0){this.onData(r.output);continue}if(s>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out));r.avail_out=0;continue}if(r.avail_in===0)break}return true};Deflate$1.prototype.onData=function(e){this.chunks.push(e)};Deflate$1.prototype.onEnd=function(e){if(e===Z_OK$2){this.result=common.flattenChunks(this.chunks)}this.chunks=[];this.err=e;this.msg=this.strm.msg};const BAD$1=16209;const TYPE$1=16191;var inffast=function e(t,r){let n;let i;let s;let a;let o;let f;let c;let u;let l;let h;let d;let p;let y;let m;let g;let b;let v;let w;let A;let E;let _;let S;let $,T;const C=t.state;n=t.next_in;$=t.input;i=n+(t.avail_in-5);s=t.next_out;T=t.output;a=s-(r-t.avail_out);o=s+(t.avail_out-257);f=C.dmax;c=C.wsize;u=C.whave;l=C.wnext;h=C.window;d=C.hold;p=C.bits;y=C.lencode;m=C.distcode;g=(1<<C.lenbits)-1;b=(1<<C.distbits)-1;e:do{if(p<15){d+=$[n++]<<p;p+=8;d+=$[n++]<<p;p+=8}v=y[d&g];t:for(;;){w=v>>>24;d>>>=w;p-=w;w=v>>>16&255;if(w===0){T[s++]=v&65535}else if(w&16){A=v&65535;w&=15;if(w){if(p<w){d+=$[n++]<<p;p+=8}A+=d&(1<<w)-1;d>>>=w;p-=w}if(p<15){d+=$[n++]<<p;p+=8;d+=$[n++]<<p;p+=8}v=m[d&b];r:for(;;){w=v>>>24;d>>>=w;p-=w;w=v>>>16&255;if(w&16){E=v&65535;w&=15;if(p<w){d+=$[n++]<<p;p+=8;if(p<w){d+=$[n++]<<p;p+=8}}E+=d&(1<<w)-1;if(E>f){t.msg="invalid distance too far back";C.mode=BAD$1;break e}d>>>=w;p-=w;w=s-a;if(E>w){w=E-w;if(w>u){if(C.sane){t.msg="invalid distance too far back";C.mode=BAD$1;break e}}_=0;S=h;if(l===0){_+=c-w;if(w<A){A-=w;do{T[s++]=h[_++]}while(--w);_=s-E;S=T}}else if(l<w){_+=c+l-w;w-=l;if(w<A){A-=w;do{T[s++]=h[_++]}while(--w);_=0;if(l<A){w=l;A-=w;do{T[s++]=h[_++]}while(--w);_=s-E;S=T}}}else{_+=l-w;if(w<A){A-=w;do{T[s++]=h[_++]}while(--w);_=s-E;S=T}}while(A>2){T[s++]=S[_++];T[s++]=S[_++];T[s++]=S[_++];A-=3}if(A){T[s++]=S[_++];if(A>1){T[s++]=S[_++]}}}else{_=s-E;do{T[s++]=T[_++];T[s++]=T[_++];T[s++]=T[_++];A-=3}while(A>2);if(A){T[s++]=T[_++];if(A>1){T[s++]=T[_++]}}}}else if((w&64)===0){v=m[(v&65535)+(d&(1<<w)-1)];continue r}else{t.msg="invalid distance code";C.mode=BAD$1;break e}break}}else if((w&64)===0){v=y[(v&65535)+(d&(1<<w)-1)];continue t}else if(w&32){C.mode=TYPE$1;break e}else{t.msg="invalid literal/length code";C.mode=BAD$1;break e}break}}while(n<i&&s<o);A=p>>3;n-=A;p-=A<<3;d&=(1<<p)-1;t.next_in=n;t.next_out=s;t.avail_in=n<i?5+(i-n):5-(n-i);t.avail_out=s<o?257+(o-s):257-(s-o);C.hold=d;C.bits=p;return};const MAXBITS=15;const ENOUGH_LENS$1=852;const ENOUGH_DISTS$1=592;const CODES$1=0;const LENS$1=1;const DISTS$1=2;const lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]);const lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]);const dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]);const dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);const inflate_table=(e,t,r,n,i,s,a,o)=>{const f=o.bits;let c=0;let u=0;let l=0,h=0;let d=0;let p=0;let y=0;let m=0;let g=0;let b=0;let v;let w;let A;let E;let _;let S=null;let $;const T=new Uint16Array(MAXBITS+1);const C=new Uint16Array(MAXBITS+1);let P=null;let x,I,k;for(c=0;c<=MAXBITS;c++){T[c]=0}for(u=0;u<n;u++){T[t[r+u]]++}d=f;for(h=MAXBITS;h>=1;h--){if(T[h]!==0){break}}if(d>h){d=h}if(h===0){i[s++]=1<<24|64<<16|0;i[s++]=1<<24|64<<16|0;o.bits=1;return 0}for(l=1;l<h;l++){if(T[l]!==0){break}}if(d<l){d=l}m=1;for(c=1;c<=MAXBITS;c++){m<<=1;m-=T[c];if(m<0){return-1}}if(m>0&&(e===CODES$1||h!==1)){return-1}C[1]=0;for(c=1;c<MAXBITS;c++){C[c+1]=C[c]+T[c]}for(u=0;u<n;u++){if(t[r+u]!==0){a[C[t[r+u]]++]=u}}if(e===CODES$1){S=P=a;$=20}else if(e===LENS$1){S=lbase;P=lext;$=257}else{S=dbase;P=dext;$=0}b=0;u=0;c=l;_=s;p=d;y=0;A=-1;g=1<<d;E=g-1;if(e===LENS$1&&g>ENOUGH_LENS$1||e===DISTS$1&&g>ENOUGH_DISTS$1){return 1}for(;;){x=c-y;if(a[u]+1<$){I=0;k=a[u]}else if(a[u]>=$){I=P[a[u]-$];k=S[a[u]-$]}else{I=32+64;k=0}v=1<<c-y;w=1<<p;l=w;do{w-=v;i[_+(b>>y)+w]=x<<24|I<<16|k|0}while(w!==0);v=1<<c-1;while(b&v){v>>=1}if(v!==0){b&=v-1;b+=v}else{b=0}u++;if(--T[c]===0){if(c===h){break}c=t[r+a[u]]}if(c>d&&(b&E)!==A){if(y===0){y=d}_+=l;p=c-y;m=1<<p;while(p+y<h){m-=T[p+y];if(m<=0){break}p++;m<<=1}g+=1<<p;if(e===LENS$1&&g>ENOUGH_LENS$1||e===DISTS$1&&g>ENOUGH_DISTS$1){return 1}A=b&E;i[A]=d<<24|p<<16|_-s|0}}if(b!==0){i[_+b]=c-y<<24|64<<16|0}o.bits=d;return 0};var inftrees=inflate_table;const CODES=0;const LENS=1;const DISTS=2;const{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2;const HEAD=16180;const FLAGS=16181;const TIME=16182;const OS=16183;const EXLEN=16184;const EXTRA=16185;const NAME=16186;const COMMENT=16187;const HCRC=16188;const DICTID=16189;const DICT=16190;const TYPE=16191;const TYPEDO=16192;const STORED=16193;const COPY_=16194;const COPY=16195;const TABLE=16196;const LENLENS=16197;const CODELENS=16198;const LEN_=16199;const LEN=16200;const LENEXT=16201;const DIST=16202;const DISTEXT=16203;const MATCH=16204;const LIT=16205;const CHECK=16206;const LENGTH=16207;const DONE=16208;const BAD=16209;const MEM=16210;const SYNC=16211;const ENOUGH_LENS=852;const ENOUGH_DISTS=592;const MAX_WBITS=15;const DEF_WBITS=MAX_WBITS;const zswap32=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function InflateState(){this.strm=null;this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new Uint16Array(320);this.work=new Uint16Array(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}const inflateStateCheck=e=>{if(!e){return 1}const t=e.state;if(!t||t.strm!==e||t.mode<HEAD||t.mode>SYNC){return 1}return 0};const inflateResetKeep=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const t=e.state;e.total_in=e.total_out=t.total=0;e.msg="";if(t.wrap){e.adler=t.wrap&1}t.mode=HEAD;t.last=0;t.havedict=0;t.flags=-1;t.dmax=32768;t.head=null;t.hold=0;t.bits=0;t.lencode=t.lendyn=new Int32Array(ENOUGH_LENS);t.distcode=t.distdyn=new Int32Array(ENOUGH_DISTS);t.sane=1;t.back=-1;return Z_OK$1};const inflateReset=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const t=e.state;t.wsize=0;t.whave=0;t.wnext=0;return inflateResetKeep(e)};const inflateReset2=(e,t)=>{let r;if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const n=e.state;if(t<0){r=0;t=-t}else{r=(t>>4)+5;if(t<48){t&=15}}if(t&&(t<8||t>15)){return Z_STREAM_ERROR$1}if(n.window!==null&&n.wbits!==t){n.window=null}n.wrap=r;n.wbits=t;return inflateReset(e)};const inflateInit2=(e,t)=>{if(!e){return Z_STREAM_ERROR$1}const r=new InflateState;e.state=r;r.strm=e;r.window=null;r.mode=HEAD;const n=inflateReset2(e,t);if(n!==Z_OK$1){e.state=null}return n};const inflateInit=e=>inflateInit2(e,DEF_WBITS);let virgin=true;let lenfix,distfix;const fixedtables=e=>{if(virgin){lenfix=new Int32Array(512);distfix=new Int32Array(32);let t=0;while(t<144){e.lens[t++]=8}while(t<256){e.lens[t++]=9}while(t<280){e.lens[t++]=7}while(t<288){e.lens[t++]=8}inftrees(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9});t=0;while(t<32){e.lens[t++]=5}inftrees(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5});virgin=false}e.lencode=lenfix;e.lenbits=9;e.distcode=distfix;e.distbits=5};const updatewindow=(e,t,r,n)=>{let i;const s=e.state;if(s.window===null){s.wsize=1<<s.wbits;s.wnext=0;s.whave=0;s.window=new Uint8Array(s.wsize)}if(n>=s.wsize){s.window.set(t.subarray(r-s.wsize,r),0);s.wnext=0;s.whave=s.wsize}else{i=s.wsize-s.wnext;if(i>n){i=n}s.window.set(t.subarray(r-n,r-n+i),s.wnext);n-=i;if(n){s.window.set(t.subarray(r-n,r),0);s.wnext=n;s.whave=s.wsize}else{s.wnext+=i;if(s.wnext===s.wsize){s.wnext=0}if(s.whave<s.wsize){s.whave+=i}}}return 0};const inflate$2=(e,t)=>{let r;let n,i;let s;let a;let o,f;let c;let u;let l,h;let d;let p;let y;let m=0;let g,b,v;let w,A,E;let _;let S;const $=new Uint8Array(4);let T;let C;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(e)||!e.output||!e.input&&e.avail_in!==0){return Z_STREAM_ERROR$1}r=e.state;if(r.mode===TYPE){r.mode=TYPEDO}a=e.next_out;i=e.output;f=e.avail_out;s=e.next_in;n=e.input;o=e.avail_in;c=r.hold;u=r.bits;l=o;h=f;S=Z_OK$1;e:for(;;){switch(r.mode){case HEAD:if(r.wrap===0){r.mode=TYPEDO;break}while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&2&&c===35615){if(r.wbits===0){r.wbits=15}r.check=0;$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0);c=0;u=0;r.mode=FLAGS;break}if(r.head){r.head.done=false}if(!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check";r.mode=BAD;break}if((c&15)!==Z_DEFLATED){e.msg="unknown compression method";r.mode=BAD;break}c>>>=4;u-=4;_=(c&15)+8;if(r.wbits===0){r.wbits=_}if(_>15||_>r.wbits){e.msg="invalid window size";r.mode=BAD;break}r.dmax=1<<r.wbits;r.flags=0;e.adler=r.check=1;r.mode=c&512?DICTID:TYPE;c=0;u=0;break;case FLAGS:while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.flags=c;if((r.flags&255)!==Z_DEFLATED){e.msg="unknown compression method";r.mode=BAD;break}if(r.flags&57344){e.msg="unknown header flags set";r.mode=BAD;break}if(r.head){r.head.text=c>>8&1}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0;r.mode=TIME;case TIME:while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.head){r.head.time=c}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;$[2]=c>>>16&255;$[3]=c>>>24&255;r.check=crc32_1(r.check,$,4,0)}c=0;u=0;r.mode=OS;case OS:while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.head){r.head.xflags=c&255;r.head.os=c>>8}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0;r.mode=EXLEN;case EXLEN:if(r.flags&1024){while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.length=c;if(r.head){r.head.extra_len=c}if(r.flags&512&&r.wrap&4){$[0]=c&255;$[1]=c>>>8&255;r.check=crc32_1(r.check,$,2,0)}c=0;u=0}else if(r.head){r.head.extra=null}r.mode=EXTRA;case EXTRA:if(r.flags&1024){d=r.length;if(d>o){d=o}if(d){if(r.head){_=r.head.extra_len-r.length;if(!r.head.extra){r.head.extra=new Uint8Array(r.head.extra_len)}r.head.extra.set(n.subarray(s,s+d),_)}if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;r.length-=d}if(r.length){break e}}r.length=0;r.mode=NAME;case NAME:if(r.flags&2048){if(o===0){break e}d=0;do{_=n[s+d++];if(r.head&&_&&r.length<65536){r.head.name+=String.fromCharCode(_)}}while(_&&d<o);if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;if(_){break e}}else if(r.head){r.head.name=null}r.length=0;r.mode=COMMENT;case COMMENT:if(r.flags&4096){if(o===0){break e}d=0;do{_=n[s+d++];if(r.head&&_&&r.length<65536){r.head.comment+=String.fromCharCode(_)}}while(_&&d<o);if(r.flags&512&&r.wrap&4){r.check=crc32_1(r.check,n,d,s)}o-=d;s+=d;if(_){break e}}else if(r.head){r.head.comment=null}r.mode=HCRC;case HCRC:if(r.flags&512){while(u<16){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&4&&c!==(r.check&65535)){e.msg="header crc mismatch";r.mode=BAD;break}c=0;u=0}if(r.head){r.head.hcrc=r.flags>>9&1;r.head.done=true}e.adler=r.check=0;r.mode=TYPE;break;case DICTID:while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}e.adler=r.check=zswap32(c);c=0;u=0;r.mode=DICT;case DICT:if(r.havedict===0){e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;return Z_NEED_DICT$1}e.adler=r.check=1;r.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES){break e}case TYPEDO:if(r.last){c>>>=u&7;u-=u&7;r.mode=CHECK;break}while(u<3){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.last=c&1;c>>>=1;u-=1;switch(c&3){case 0:r.mode=STORED;break;case 1:fixedtables(r);r.mode=LEN_;if(t===Z_TREES){c>>>=2;u-=2;break e}break;case 2:r.mode=TABLE;break;case 3:e.msg="invalid block type";r.mode=BAD}c>>>=2;u-=2;break;case STORED:c>>>=u&7;u-=u&7;while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths";r.mode=BAD;break}r.length=c&65535;c=0;u=0;r.mode=COPY_;if(t===Z_TREES){break e}case COPY_:r.mode=COPY;case COPY:d=r.length;if(d){if(d>o){d=o}if(d>f){d=f}if(d===0){break e}i.set(n.subarray(s,s+d),a);o-=d;s+=d;f-=d;a+=d;r.length-=d;break}r.mode=TYPE;break;case TABLE:while(u<14){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.nlen=(c&31)+257;c>>>=5;u-=5;r.ndist=(c&31)+1;c>>>=5;u-=5;r.ncode=(c&15)+4;c>>>=4;u-=4;if(r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols";r.mode=BAD;break}r.have=0;r.mode=LENLENS;case LENLENS:while(r.have<r.ncode){while(u<3){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.lens[P[r.have++]]=c&7;c>>>=3;u-=3}while(r.have<19){r.lens[P[r.have++]]=0}r.lencode=r.lendyn;r.lenbits=7;T={bits:r.lenbits};S=inftrees(CODES,r.lens,0,19,r.lencode,0,r.work,T);r.lenbits=T.bits;if(S){e.msg="invalid code lengths set";r.mode=BAD;break}r.have=0;r.mode=CODELENS;case CODELENS:while(r.have<r.nlen+r.ndist){for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;b=m>>>16&255;v=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(v<16){c>>>=g;u-=g;r.lens[r.have++]=v}else{if(v===16){C=g+2;while(u<C){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;if(r.have===0){e.msg="invalid bit length repeat";r.mode=BAD;break}_=r.lens[r.have-1];d=3+(c&3);c>>>=2;u-=2}else if(v===17){C=g+3;while(u<C){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;_=0;d=3+(c&7);c>>>=3;u-=3}else{C=g+7;while(u<C){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=g;u-=g;_=0;d=11+(c&127);c>>>=7;u-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat";r.mode=BAD;break}while(d--){r.lens[r.have++]=_}}}if(r.mode===BAD){break}if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block";r.mode=BAD;break}r.lenbits=9;T={bits:r.lenbits};S=inftrees(LENS,r.lens,0,r.nlen,r.lencode,0,r.work,T);r.lenbits=T.bits;if(S){e.msg="invalid literal/lengths set";r.mode=BAD;break}r.distbits=6;r.distcode=r.distdyn;T={bits:r.distbits};S=inftrees(DISTS,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T);r.distbits=T.bits;if(S){e.msg="invalid distances set";r.mode=BAD;break}r.mode=LEN_;if(t===Z_TREES){break e}case LEN_:r.mode=LEN;case LEN:if(o>=6&&f>=258){e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;inffast(e,h);a=e.next_out;i=e.output;f=e.avail_out;s=e.next_in;n=e.input;o=e.avail_in;c=r.hold;u=r.bits;if(r.mode===TYPE){r.back=-1}break}r.back=0;for(;;){m=r.lencode[c&(1<<r.lenbits)-1];g=m>>>24;b=m>>>16&255;v=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(b&&(b&240)===0){w=g;A=b;E=v;for(;;){m=r.lencode[E+((c&(1<<w+A)-1)>>w)];g=m>>>24;b=m>>>16&255;v=m&65535;if(w+g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=w;u-=w;r.back+=w}c>>>=g;u-=g;r.back+=g;r.length=v;if(b===0){r.mode=LIT;break}if(b&32){r.back=-1;r.mode=TYPE;break}if(b&64){e.msg="invalid literal/length code";r.mode=BAD;break}r.extra=b&15;r.mode=LENEXT;case LENEXT:if(r.extra){C=r.extra;while(u<C){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.length+=c&(1<<r.extra)-1;c>>>=r.extra;u-=r.extra;r.back+=r.extra}r.was=r.length;r.mode=DIST;case DIST:for(;;){m=r.distcode[c&(1<<r.distbits)-1];g=m>>>24;b=m>>>16&255;v=m&65535;if(g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if((b&240)===0){w=g;A=b;E=v;for(;;){m=r.distcode[E+((c&(1<<w+A)-1)>>w)];g=m>>>24;b=m>>>16&255;v=m&65535;if(w+g<=u){break}if(o===0){break e}o--;c+=n[s++]<<u;u+=8}c>>>=w;u-=w;r.back+=w}c>>>=g;u-=g;r.back+=g;if(b&64){e.msg="invalid distance code";r.mode=BAD;break}r.offset=v;r.extra=b&15;r.mode=DISTEXT;case DISTEXT:if(r.extra){C=r.extra;while(u<C){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}r.offset+=c&(1<<r.extra)-1;c>>>=r.extra;u-=r.extra;r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back";r.mode=BAD;break}r.mode=MATCH;case MATCH:if(f===0){break e}d=h-f;if(r.offset>d){d=r.offset-d;if(d>r.whave){if(r.sane){e.msg="invalid distance too far back";r.mode=BAD;break}}if(d>r.wnext){d-=r.wnext;p=r.wsize-d}else{p=r.wnext-d}if(d>r.length){d=r.length}y=r.window}else{y=i;p=a-r.offset;d=r.length}if(d>f){d=f}f-=d;r.length-=d;do{i[a++]=y[p++]}while(--d);if(r.length===0){r.mode=LEN}break;case LIT:if(f===0){break e}i[a++]=r.length;f--;r.mode=LEN;break;case CHECK:if(r.wrap){while(u<32){if(o===0){break e}o--;c|=n[s++]<<u;u+=8}h-=f;e.total_out+=h;r.total+=h;if(r.wrap&4&&h){e.adler=r.check=r.flags?crc32_1(r.check,i,h,a-h):adler32_1(r.check,i,h,a-h)}h=f;if(r.wrap&4&&(r.flags?c:zswap32(c))!==r.check){e.msg="incorrect data check";r.mode=BAD;break}c=0;u=0}r.mode=LENGTH;case LENGTH:if(r.wrap&&r.flags){while(u<32){if(o===0){break e}o--;c+=n[s++]<<u;u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){e.msg="incorrect length check";r.mode=BAD;break}c=0;u=0}r.mode=DONE;case DONE:S=Z_STREAM_END$1;break e;case BAD:S=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}}e.next_out=a;e.avail_out=f;e.next_in=s;e.avail_in=o;r.hold=c;r.bits=u;if(r.wsize||h!==e.avail_out&&r.mode<BAD&&(r.mode<CHECK||t!==Z_FINISH$1)){if(updatewindow(e,e.output,e.next_out,h-e.avail_out));}l-=e.avail_in;h-=e.avail_out;e.total_in+=l;e.total_out+=h;r.total+=h;if(r.wrap&4&&h){e.adler=r.check=r.flags?crc32_1(r.check,i,h,e.next_out-h):adler32_1(r.check,i,h,e.next_out-h)}e.data_type=r.bits+(r.last?64:0)+(r.mode===TYPE?128:0)+(r.mode===LEN_||r.mode===COPY_?256:0);if((l===0&&h===0||t===Z_FINISH$1)&&S===Z_OK$1){S=Z_BUF_ERROR}return S};const inflateEnd=e=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}let t=e.state;if(t.window){t.window=null}e.state=null;return Z_OK$1};const inflateGetHeader=(e,t)=>{if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}const r=e.state;if((r.wrap&2)===0){return Z_STREAM_ERROR$1}r.head=t;t.done=false;return Z_OK$1};const inflateSetDictionary=(e,t)=>{const r=t.length;let n;let i;let s;if(inflateStateCheck(e)){return Z_STREAM_ERROR$1}n=e.state;if(n.wrap!==0&&n.mode!==DICT){return Z_STREAM_ERROR$1}if(n.mode===DICT){i=1;i=adler32_1(i,t,r,0);if(i!==n.check){return Z_DATA_ERROR$1}}s=updatewindow(e,t,r,r);if(s){n.mode=MEM;return Z_MEM_ERROR$1}n.havedict=1;return Z_OK$1};var inflateReset_1=inflateReset;var inflateReset2_1=inflateReset2;var inflateResetKeep_1=inflateResetKeep;var inflateInit_1=inflateInit;var inflateInit2_1=inflateInit2;var inflate_2$1=inflate$2;var inflateEnd_1=inflateEnd;var inflateGetHeader_1=inflateGetHeader;var inflateSetDictionary_1=inflateSetDictionary;var inflateInfo="pako inflate (from Nodeca project)";var inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=false}var gzheader=GZheader;const toString=Object.prototype.toString;const{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(e){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;if(t.raw&&t.windowBits>=0&&t.windowBits<16){t.windowBits=-t.windowBits;if(t.windowBits===0){t.windowBits=-15}}if(t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)){t.windowBits+=32}if(t.windowBits>15&&t.windowBits<48){if((t.windowBits&15)===0){t.windowBits|=15}}this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;let r=inflate_1$2.inflateInit2(this.strm,t.windowBits);if(r!==Z_OK){throw new Error(messages[r])}this.header=new gzheader;inflate_1$2.inflateGetHeader(this.strm,this.header);if(t.dictionary){if(typeof t.dictionary==="string"){t.dictionary=strings.string2buf(t.dictionary)}else if(toString.call(t.dictionary)==="[object ArrayBuffer]"){t.dictionary=new Uint8Array(t.dictionary)}if(t.raw){r=inflate_1$2.inflateSetDictionary(this.strm,t.dictionary);if(r!==Z_OK){throw new Error(messages[r])}}}}Inflate$1.prototype.push=function(e,t){const r=this.strm;const n=this.options.chunkSize;const i=this.options.dictionary;let s,a,o;if(this.ended)return false;if(t===~~t)a=t;else a=t===true?Z_FINISH:Z_NO_FLUSH;if(toString.call(e)==="[object ArrayBuffer]"){r.input=new Uint8Array(e)}else{r.input=e}r.next_in=0;r.avail_in=r.input.length;for(;;){if(r.avail_out===0){r.output=new Uint8Array(n);r.next_out=0;r.avail_out=n}s=inflate_1$2.inflate(r,a);if(s===Z_NEED_DICT&&i){s=inflate_1$2.inflateSetDictionary(r,i);if(s===Z_OK){s=inflate_1$2.inflate(r,a)}else if(s===Z_DATA_ERROR){s=Z_NEED_DICT}}while(r.avail_in>0&&s===Z_STREAM_END&&r.state.wrap>0&&e[r.next_in]!==0){inflate_1$2.inflateReset(r);s=inflate_1$2.inflate(r,a)}switch(s){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:this.onEnd(s);this.ended=true;return false}o=r.avail_out;if(r.next_out){if(r.avail_out===0||s===Z_STREAM_END){if(this.options.to==="string"){let e=strings.utf8border(r.output,r.next_out);let t=r.next_out-e;let i=strings.buf2string(r.output,e);r.next_out=t;r.avail_out=n-t;if(t)r.output.set(r.output.subarray(e,e+t),0);this.onData(i)}else{this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out))}}}if(s===Z_OK&&o===0)continue;if(s===Z_STREAM_END){s=inflate_1$2.inflateEnd(this.strm);this.onEnd(s);this.ended=true;return true}if(r.avail_in===0)break}return true};Inflate$1.prototype.onData=function(e){this.chunks.push(e)};Inflate$1.prototype.onEnd=function(e){if(e===Z_OK){if(this.options.to==="string"){this.result=this.chunks.join("")}else{this.result=common.flattenChunks(this.chunks)}}this.chunks=[];this.err=e;this.msg=this.strm.msg};function inflate$1(e,t){const r=new Inflate$1(t);r.push(e);if(r.err)throw r.msg||messages[r.err];return r.result}function inflateRaw$1(e,t){t=t||{};t.raw=true;return inflate$1(e,t)}var Inflate_1$1=Inflate$1;var inflate_2=inflate$1;var inflateRaw_1$1=inflateRaw$1;var ungzip$1=inflate$1;var constants=constants$2;var inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants};const{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var inflate_1=inflate;function decodeBase64ZippedBase64(e){const t=base64ToUint8array(e);const r=inflate_1(t,{to:"string"});const n=JSON.parse(r);return uncompactOffchainAttestationPackage(n)}function uncompactOffchainAttestationPackage(e){return{sig:{domain:{name:"EAS Attestation",version:e[0],chainId:e[1],verifyingContract:e[2]},primaryType:"Attestation",types:{Attest:[{name:"schema",type:"bytes32"},{name:"recipient",type:"address"},{name:"time",type:"uint64"},{name:"expirationTime",type:"uint64"},{name:"revocable",type:"bool"},{name:"refUID",type:"bytes32"},{name:"data",type:"bytes"}]},signature:{r:e[3],s:e[4],v:e[5]},uid:e[7],message:{version:1,schema:e[8],recipient:e[9]==="0"?AddressZero:e[9],time:e[10],expirationTime:e[11],refUID:e[12]==="0"?HashZero:e[12],revocable:e[13],data:e[14],nonce:e[15]}},signer:e[6]}}const EAS_RPC_CONFIG={1:"https://eth-mainnet.g.alchemy.com/v2/2bJxn0VGXp9U5EOfA6CoMGU-rrd-BIIT",11155111:"https://sepolia.infura.io/v3/9f79b2f9274344af90b8d4e244b580ef",42161:"https://arb1.arbitrum.io/rpc"};const EAS_REGISTRY_CONFIG={1:"0xA7b39296258348C78294F95B872b282326A97BDF",11155111:"0x0a7E2Ff54e76B8E6659aedc9103FB21c038050D0",42161:"0xA310da9c5B885E7fb3fbA9D66E9Ba6Df512b78eB"};class Attestation{constructor(e,t,r={}){this.type=e;this.base64Attestation=t;this.meta=r;const n=decodeBase64ZippedBase64(t);this.attestation=n.sig;const i=this.attestation.domain;if(!EAS_RPC_CONFIG[i.chainId])throw new Error(`EAS chain ID ${i.chainId} is not supported`);if(!EAS_REGISTRY_CONFIG[i.chainId])throw new Error(`EAS schema registry address not available for chain ID ${i.chainId}`);this.offChain=new dist.Offchain({version:i.version,address:i.verifyingContract,chainId:i.chainId},1);const s=new StaticJsonRpcProvider(EAS_RPC_CONFIG[i.chainId],i.chainId);this.eas=new dist.EAS(i.verifyingContract,{signerOrProvider:s});this.schemaRegistry=new dist.SchemaRegistry(EAS_REGISTRY_CONFIG[i.chainId],{signerOrProvider:s});this.recoverSignerInfo()}recoverSignerInfo(){const e=TypedDataEncoder.hash(this.offChain.getDomainTypedData(),{Attest:dist.OFFCHAIN_ATTESTATION_TYPES[0].types},this.attestation.message);this.signerPublicKey=recoverPublicKey(e,this.attestation.signature);this.signerAddress=recoverAddress(e,this.attestation.signature);console.log("Signer key: ",this.signerPublicKey)}async getSchemaRecord(){if(!this.schemaRecord){this.schemaRecord=await this.schemaRegistry.getSchema({uid:this.attestation.message.schema})}return this.schemaRecord}async verifyAttestation(){const e=Math.round(Date.now()/1e3);if(e<this.attestation.message.time)throw new Error("Attestation not yet valid.");if(this.attestation.message.expirationTime>0&&e>this.attestation.message.expirationTime)throw new Error("Attestation has expired.");const t=await this.getSchemaRecord();if(!t.revocable)return;const r=await this.eas.getRevocationOffchain(this.signerAddress,this.attestation.uid);if(BigNumber$1.from(r).gt(0)){const e="Attestation has been revoked :-(";throw new Error(e)}}async getAttestationData(){if(!this.decodedData){const e=await this.getSchemaRecord();const t=new dist.SchemaEncoder((await e).schema);const r=t.decodeData(this.attestation.message.data);this.decodedData={};let n=0;for(const e of r){this.decodedData[e.name]=r[n].value.value;n++}}return this.decodedData}getAttestationField(e){const t=this.getAttestationData();if(!t[e]){throw new Error("The attestation does not contain data field '"+e+"'")}return t[e]}async getAttestationId(e){if(!e.length){return this.attestation.uid}const t=await this.getAttestationData();const r=[];for(const n of e){if(t[n])r.push(t[n])}return r.join("-")}async getCollectionHash(e){const t=[];t.push(this.attestation.message.schema.substring(2));t.push(this.signerAddress.substring(2).toLowerCase());const r=await this.getAttestationData();const n=e.collectionFields;if(n.length){for(const e of n){t.push(r[e.name])}}else if(e.eventId&&r.eventId){t.push(r.eventId)}const i=new TextEncoder;return utils$2.keccak256(i.encode(t.join("")))}async getDatabaseRecord(e){return{collectionId:await this.getCollectionHash(e),tokenId:await this.getAttestationId(e.idFields),type:"eas",token:this.base64Attestation,decodedToken:this.attestation,decodedData:await this.getAttestationData(),meta:this.meta,dt:Date.now()}}static getAbiEncodedEasAttestation(e){const t=utils$2.defaultAbiCoder.encode(e.types.Attest.map((e=>e.type)),e.types.Attest.map((t=>e.message[t.name])));const r=utils$2.defaultAbiCoder.encode(["string","uint256","address"],[e.domain.version,e.domain.chainId,e.domain.verifyingContract]);return{attestation:t,domain:r,signature:utils$2.joinSignature(e.signature)}}}var AuthenticationType;(function(e){e["NONE"]="none";e["IPFS_CID"]="ipfsCid";e["XML_DSIG"]="dsig"})(AuthenticationType||(AuthenticationType={}));class Origin{constructor(e,t,r){this.tokenScript=e;this.name=t;this.type=r}async getOriginSecurityStatus(e){if(!this.securityStatus){console.log("Validating token origin: "+this.name);if(e.authoritivePublicKey)await this.validateBySignerKey(e.authoritivePublicKey,e.trustedKey);if(!this.securityStatus&&this.type==="contract")await this.validateByContractScriptUri(e.ipfsCid);if(!this.securityStatus)this.securityStatus={type:AuthenticationType.NONE,status:SecurityStatus$1.INVALID,statusText:"The TokenScript is not signed by the "+(this.type=="attestation"?"attestation issuer":"contract deployer")};this.securityStatus.signingKey=this.signingKey}return this.securityStatus}async validateBySignerKey(e,t){if(t){this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript is signed by a trusted key",trustedKey:t};return}if(this.type==="contract"){const t=this.tokenScript.getContractByName(this.name);try{const r=computeAddress(e);const n=await new TrustedKeyResolver(this.tokenScript).isAdmin(t,r);if(n){this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript signer matches the contract deployer for this token",trustedKey:{issuerName:"Contract owner",valueType:"ethAddress",value:r}};console.log("DSIG validator: DSIG matched successfully")}else{console.warn(`DSIG validator: contract key does not match DSIG( publicKeyHex: ${e}, address: ${r})`)}}catch(e){console.warn(e)}}else{const t=this.tokenScript.getAttestationDefinitions().getDefinition(this.name);this.signingKey=t.keys.join(", ");for(const r of t.keys){console.log("DSIG Validator: matching attestation issuer key: ",r);if(e.replace("0x","").toLowerCase()!==r.replace("0x","").toLowerCase()){console.warn("DSIG Validator: attestation issuer key does not match DSIG: ",e);return}}this.securityStatus={type:AuthenticationType.XML_DSIG,status:SecurityStatus$1.VALID,statusText:"The TokenScript is signed by the attestation issuer"}}}async validateByContractScriptUri(e){var t;const r=this.tokenScript.getContractByName(this.name);const n=this.tokenScript.getSourceInfo();const[i,s]=((t=n.tsId)!==null&&t!==void 0?t:"").split("-");const a=r.getAddresses();for(const t in a){const r=a[t];let o=null;if(s&&n.source==="scriptUri"&&r.address===s&&r.chain===parseInt(i)){o=n.sourceUrl}else{return}console.log("IPFS Validator: checking source URL ",o);if(!o){console.warn("IPFS Validator: source URL not set");return}const f=o.match(/^.*[\/=]?([a-zA-z1-9]{46})[\/?&.]?.*$/);if(!f){console.log("IPFS Validator: Not an IPFS URL, skipping");return}if(e!==f[1]){console.warn("IPFS Validator: CID does not match source URL");return}}this.securityStatus={type:AuthenticationType.IPFS_CID,status:SecurityStatus$1.VALID,statusText:"The TokenScript IPFS CID matches the scriptURI specified by the contract"}}}class Meta{constructor(e){this.parentElem=e;this.meta={};const t=e.getElementsByTagName("ts:meta");if(t.length&&t[0].children.length){for(const e of Meta.META_TAGS){const r=[].slice.call(t[0].getElementsByTagName("ts:"+e));if(!r.length)continue;const n=r.filter((e=>e.getAttribute("xml:lang")==="en"));this.meta[e]=n.length?n[0].textContent:r[0].textContent}}}getValue(e){if(!this.meta[e])return null;return this.meta[e]}get description(){return this.getValue("description")}get aboutUrl(){return this.getValue("aboutUrl")}get iconUrl(){return this.getValue("iconUrl")}}Meta.META_TAGS=["description","aboutUrl","iconUrl"];var __rest=undefined&&undefined.__rest||function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};class TokenScript{constructor(e,t,r,n,i,s,a){this.engine=e;this.tokenDef=t;this.xmlStr=r;this.source=n;this.sourceId=i;this.sourceUrl=s;this.viewBinding=a;this.eventHandlers={};this.securityInfo=new SecurityInfo(this)}getSourceInfo(){return{tsId:this.sourceId,source:this.source,sourceUrl:this.sourceUrl}}emitEvent(e,t){if(this.eventHandlers[e])for(const r of Object.values(this.eventHandlers[e])){r(t)}}on(e,t,r="default"){if(!this.eventHandlers[e])this.eventHandlers[e]={};this.eventHandlers[e][r]=t}off(e,t){if(!t){delete this.eventHandlers[e];return}delete this.eventHandlers[e][t]}getXmlString(){return this.xmlStr}getXml(){return this.tokenDef}getEngine(){return this.engine}getSecurityInfo(){return this.securityInfo}hasViewBinding(){return!!this.viewBinding}setViewBinding(e){this.viewBinding=e;this.viewController=null}getViewBinding(){return this.viewBinding}getViewController(e){if(e)return new ViewController(this,e);if(!this.viewController){if(!this.viewBinding)throw new Error("View binding has not been provided");this.viewController=new ViewController(this,this.viewBinding)}return this.viewController}async showOrExecuteTokenCard(e,t){await this.getViewController().showOrExecuteCard(e,t)}getName(){return this.tokenDef.documentElement.getAttribute("name")}getLabel(){var e,t;if(!this.label)this.label=new Label(this.tokenDef.documentElement);return(t=(e=this.label.getValue())!==null&&e!==void 0?e:this.getName())!==null&&t!==void 0?t:"Unnamed TokenScript"}getMetadata(){if(!this.meta)this.meta=new Meta(this.tokenDef.documentElement);return this.meta}getCards(e){var t;if(!e)e=(t=this.getCurrentTokenContext())===null||t===void 0?void 0:t.originId;if(!this.cards){let e=this.tokenDef.documentElement.getElementsByTagName("ts:card");this.cards=[];for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Card(this,e[t]);this.cards.push(r)}}if(e){return this.cards.filter((t=>t.origins.length===0||t.origins.indexOf(e)>-1))}return this.cards}getContracts(e=false){if(!this.contracts){let e=this.tokenDef.documentElement.getElementsByTagName("ts:contract");this.contracts={};for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Contract(e[t]);this.contracts[r.getName()]=r}}if(e){const e=this.getOrigins();const t={};for(const r in this.contracts){if(e[r])t[r]=this.contracts[r]}return t}return this.contracts}getOrigins(){if(!this.origins){const e=this.tokenDef.documentElement.getElementsByTagName("ts:origins");this.origins={};for(let t in e[0].children){const r=e[0].children[t];if(!r.tagName)continue;if(r.tagName=="ts:ethereum"){const e=r.getAttribute("contract");this.origins[e]=new Origin(this,e,"contract")}else if(r.tagName=="ts:attestation"){const e=r.getAttribute("name");this.origins[e]=new Origin(this,e,"attestation")}else{console.warn("Token origin with tag "+r.tagName+" is not supported")}}}return this.origins}getContractByName(e){const t=this.getContracts();if(!t[e])throw new Error("Contract with name "+e+" was not found in the TSML");return t[e]}getViewContent(e){const t=this.tokenDef.documentElement.getElementsByTagName("ts:viewContent");for(let r in t){if(t[r].getAttribute("name")===e){return t[r].children}}return null}async getTokenMetadata(e=false,t=false){if(!this.tokenMetadata||e){this.emitEvent("TOKENS_LOADING");const e=await this.resolveTokenMetadata(t);this.tokenMetadata={};for(let t of e){this.tokenMetadata[t.originId]=t}for(const e of this.getAttestationDefinitions()){const t=e.name;const r={originId:t,blockChain:"offchain",chainId:0,tokenType:"eas",tokenDetails:[],name:e.meta.name,image:e.meta.image,description:e.meta.description,decimals:0,balance:0};for(const t of await this.engine.getAttestationManager().getAttestations(e)){r.balance++;const e=t.meta,{name:n,description:i,image:s,attributes:a}=e,o=__rest(e,["name","description","image","attributes"]);const f=Object.assign(Object.assign({},t),{meta:o,abiEncoded:Attestation.getAbiEncodedEasAttestation(t.decodedToken)});r.tokenDetails.push({collectionDetails:r,collectionId:t.collectionId,tokenId:t.tokenId,name:n,description:i,image:s,attributes:a,data:f})}this.tokenMetadata[r.originId]=r}this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}return this.tokenMetadata}setTokenMetadata(e){const t={};for(let r of e){t[r.originId]=r}this.tokenMetadata=t;this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}async resolveTokenMetadata(e){var t;const r=(t=this.tokenDiscoveryAdapter)!==null&&t!==void 0?t:await this.engine.getTokenDiscoveryAdapter();const n=this.buildTokenDiscoveryData();if(!n.length)return[];return await r.getTokens(n,e)}getTokenOriginData(){return this.buildTokenDiscoveryData()}async getTokenContextData(e){var t,r,n,i,s,a;let o;if(e){o=this.tokenMetadata[e.originId];let t=undefined;if(o.tokenDetails)for(const[r,n]of Object.entries(o.tokenDetails)){if(n.tokenId===e.selectedTokenId){t=r;break}}o=Object.assign(Object.assign({},this.tokenMetadata[e.originId]),{selectedTokenId:e.selectedTokenId,selectedTokenIndex:t})}else{o=this.tokenContext}let f;if(o){const e=o.selectedTokenIndex!==undefined?o.tokenDetails[o.selectedTokenIndex]:null;f={name:(t=e===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:o.name,description:(r=e===null||e===void 0?void 0:e.description)!==null&&r!==void 0?r:o.description,label:o.name,symbol:o.symbol,_count:o.balance?o.balance.toString():"1",contractAddress:o.contractAddress,chainId:o.chainId,tokenId:o.selectedTokenId,ownerAddress:await this.getCurrentOwnerAddress(),image_preview_url:(n=e===null||e===void 0?void 0:e.image)!==null&&n!==void 0?n:o.image};if(e){f.tokenInfo={collectionId:e.collectionId,tokenId:e.tokenId,type:o.tokenType,name:(i=e.name)!==null&&i!==void 0?i:e.data.title,description:e.description,image:e.image,attributes:(s=e.attributes)!==null&&s!==void 0?s:[],data:e.data};if((a=e===null||e===void 0?void 0:e.data)===null||a===void 0?void 0:a.abiEncoded){f.attestation=e.data.abiEncoded.attestation;f.attestationSig=e.data.abiEncoded.signature}}}else{const e=this.getContracts(true);const t=e[Object.keys(e)[0]].getFirstAddress();f={name:this.getName(),label:this.getLabel(),contractAddress:t===null||t===void 0?void 0:t.address,chainId:t===null||t===void 0?void 0:t.chain,ownerAddress:await this.getCurrentOwnerAddress()}}return f}async getCurrentOwnerAddress(){try{const e=await this.engine.getWalletAdapter();return await e.getCurrentWalletAddress()}catch(e){console.warn(e)}return AddressZero}buildTokenDiscoveryData(e=true){const t=this.getContracts(e);const r=[];for(let e in t){const n=t[e];const i=n.getAddresses();for(let t in i){r.push({originId:e,blockChain:"eth",tokenType:n.getInterface(),chainId:i[t].chain,contractAddress:i[t].address})}}return r}setTokenDiscoveryAdapter(e){this.tokenDiscoveryAdapter=e}setCurrentTokenContext(e,t=null){var r;if(!this.tokenMetadata[e]){throw new Error("Cannot set token context: contractName was not found")}if(t==null){this.tokenContext=this.tokenMetadata[e];return}if(!((r=this.tokenMetadata[e].tokenDetails)===null||r===void 0?void 0:r[t])){throw new Error("Cannot set token context: contractName was not found")}this.tokenContext=this.tokenMetadata[e];this.tokenContext.originId=e;this.tokenContext.selectedTokenIndex=t;this.tokenContext.selectedTokenId=this.tokenMetadata[e].tokenDetails[t].tokenId;if(this.hasViewBinding()){const e=this.getViewController().getCurrentCard();if(e){this.getViewController().updateCardData()}}}getCurrentTokenContext(){return this.tokenContext}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this,this.tokenDef.documentElement)}return this.attributes}getAttestationDefinitions(e=true){if(!this.attestationDefinitions){this.attestationDefinitions=new AttestationDefinitions(this,this.tokenDef.documentElement)}if(e)this.attestationDefinitions.getOriginDefinitions();return this.attestationDefinitions}getSelections(){if(!this.selections){this.selections=new Selections(this,this.tokenDef.documentElement)}return this.selections}getAsnModuleDefinition(e){const t=this.tokenDef.getElementsByTagName("asnx:module")[0];return t.querySelector("[name="+e+"]")}async executeTransaction(e,t,r=true){var n,i,s;t({status:"started"});try{const a=await this.engine.getWalletAdapter();const o=e.getTransactionInfo();const f=(i=(n=this.getCurrentTokenContext())===null||n===void 0?void 0:n.chainId)!==null&&i!==void 0?i:await a.getChain();const c=o.contract.getAddressByChain(f,true);const u=o.contract.getAbi("error");const l=[];for(let e in o.args){l.push(await o.args[e].getEthersArgument(this.getCurrentTokenContext(),e.toString()))}const h=o.value?await((s=o===null||o===void 0?void 0:o.value)===null||s===void 0?void 0:s.getValue(this.getCurrentTokenContext())):null;await a.sendTransaction(c.chain,c.address,o.function,l,[],h,r,t,u)}catch(e){if(e.message.indexOf("ACTION_REJECTED")>-1)throw new Error("Transaction rejected");throw e}}}class AttestationManager{constructor(e,t){this.engine=e;this.storageAdapter=t}async readMagicLink(e){var t;const r=(t=e.get("ticket"))!==null&&t!==void 0?t:e.get("attestation");const n=e.get("secret");const i=e.has("id")?e.get("id"):e.get("mail");const s=e.has("type")?e.get("type"):"eas";if(s!=="eas")throw new Error("Attestation type "+s+" is not supported");if(!r)throw new Error("Incomplete token params in URL.");const a=new Attestation(s,r,{commitmentId:i,commitmentSecret:n});await a.verifyAttestation();return a}async saveAttestation(e,t){const r=await t.getDatabaseRecord(e);r.authoritativeTokenScript=e.getTokenScript().getSourceInfo();return this.storageAdapter.saveAttestation(r)}async getAttestations(e){const t=e.calculateAttestationCollectionHashes();const r=await this.storageAdapter.getAttestations(t);for(const t of r){const r=e.meta;t.meta=Object.assign(Object.assign({},t.meta),{name:r.name,description:r.description,image:r.image,attributes:this.getMetaAttributes(r,t)})}return r}getMetaAttributes(e,t){const r=[];for(const n of e.attributes){const e=n.name.split(".");let i=null;switch(e[0]){case"data":if(t.decodedData[e[1]])i=t.decodedData[e[1]];break;case"meta":if(t.meta[e[1]])i=t.meta[e[1]];break;default:if(t.decodedToken.message[e[0]])i=t.decodedToken.message[e[0]]}if(!i){console.warn("attribute field value for "+n.name+" was not found");continue}r.push({trait_type:n.label,display_type:n.display_type,value:i})}return r}async removeAttestation(e,t){return this.storageAdapter.removeAttestation(e,t)}}const DEFAULT_CONFIG={ipfsGateway:"https://ipfs.io/ipfs/",noLocalStorage:false,trustedKeys:[]};var ScriptSourceType;(function(e){e["SCRIPT_URI"]="scriptUri";e["URL"]="url";e["UNKNOWN"]="unknown"})(ScriptSourceType||(ScriptSourceType={}));class TokenScriptEngine{constructor(e,t,r,n){this.getWalletAdapter=e;this.getTokenDiscoveryAdapter=t;this.getAttestationStorageAdapter=r;this.config=n;this.repo=new Repo(this);this.IPFS_REPLACE_GATEWAYS=["ipfs://","https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/"];if(this.config){this.config=Object.assign(Object.assign({},DEFAULT_CONFIG),this.config)}else{this.config=DEFAULT_CONFIG}if(this.getAttestationStorageAdapter)this.attestationManager=new AttestationManager(this,this.getAttestationStorageAdapter())}getAttestationManager(){if(!this.attestationManager)throw new Error("Attestation storage adapter not provided");return this.attestationManager}async importAttestationUsingTokenScript(e){const t=await this.getAttestationManager().readMagicLink(e);let r;if(e.has("scriptURI")){r=e.get("scriptURI")}else{const e=await t.getAttestationData();if(e.scriptURI){r=e.scriptURI}else{throw new Error("scriptURI parameter not provided")}}const n=await this.getTokenScriptFromUrl(this.processIpfsUrl(r));const i=n.getAttestationDefinitions();for(const e of i){const r=await t.getCollectionHash(e);const i=e.calculateAttestationCollectionHashes();if(i.indexOf(r)===-1)continue;console.log("Successfully matched collection hash to tokenscript attestation definition!");await this.attestationManager.saveAttestation(e,t);return{definition:e,tokenScript:n}}throw new Error("The provided TokenScript does not contain an attestation definition for the included attestation.")}async getTokenScript(e,t,r){const n=await this.repo.getTokenScript(e,r);return await this.initializeTokenScriptObject(n.xml,ScriptSourceType.SCRIPT_URI,e,n.sourceUrl,t)}async getTokenScriptFromUrl(e,t){const r=await fetch(e);if(r.status<200||r.status>399){throw new Error("Failed to load URL: "+r.statusText)}return await this.initializeTokenScriptObject(await r.text(),ScriptSourceType.URL,e,e,t)}async loadTokenScript(e,t,r=ScriptSourceType.UNKNOWN,n,i){return await this.initializeTokenScriptObject(e,r,n,i,t)}async initializeTokenScriptObject(e,t,r,n,i){try{let s;if(typeof process!=="undefined"&&process.release.name==="node"){const{JSDOM:e}=await import("./p-4a25d7e2.js").then((function(e){return e.a}));const t=new e;s=new t.window.DOMParser}else{s=new DOMParser}let a=s.parseFromString(e,"text/xml");return new TokenScript(this,a,e,t,r,n,i)}catch(e){throw new Error("Failed to parse tokenscript definition: "+e.message)}}async signPersonalMessage(e){try{return await(await this.getWalletAdapter()).signPersonalMessage(e)}catch(e){throw new Error("Signing failed: "+e.message)}}processIpfsUrl(e){for(let t of this.IPFS_REPLACE_GATEWAYS){if(this.config.ipfsGateway.indexOf(t)===0){continue}if(e.indexOf(t)===0){e=e.replace(t,this.config.ipfsGateway);break}}return e}async getScriptUri(e,t){var r,n;const i=await fetch(`https://store-backend.smartlayer.network/tokenscript/${t.toLowerCase()}/chain/${e}/script-uri`);const s=await i.json();if(!s.scriptURI)return null;if((r=s.scriptURI.erc5169)===null||r===void 0?void 0:r.length)return s.scriptURI.erc5169[0];if((n=s.scriptURI.offchain)===null||n===void 0?void 0:n.length)return s.scriptURI.offchain[0];return null}}var e;!function(e){e[e.UserError=0]="UserError",e[e.EmptyError=1]="EmptyError",e[e.RevertError=2]="RevertError",e[e.PanicError=3]="PanicError",e[e.UnknownError=4]="UnknownError",e[e.CustomError=5]="CustomError"}(e||(e={}));var t=function(t,r){var n,i;if(!(t instanceof Error))return{type:e.UnknownError,error:null!=(n=t.message)?n:"Unexpected error",data:void 0};try{i=function(e){var t,r,n=null!=(t=e.data)?t:null==(r=e.error)?void 0:r.data;if(void 0===n)throw e;var i="string"==typeof n?n:n.data;if("object"==typeof i&&i.data&&(i=i.data),void 0===i||"string"!=typeof i)throw e;return i}(t)}catch(r){return t.message?t.message.includes("user rejected transaction")?{type:e.UserError,error:"User has rejected the transaction",data:i}:{type:e.UnknownError,error:t.message,data:i}:{type:e.UnknownError,error:"Unknown error",data:i}}if("0x"===i)return{type:e.EmptyError,error:"Empty error data returned",data:i};if(i.startsWith("0x08c379a0")){var s=i.slice(10);try{var a=defaultAbiCoder.decode(["string"],"0x"+s)[0];return{type:e.RevertError,error:a,data:i}}catch(t){return{type:e.UnknownError,error:"Unknown error returned",data:i}}}else{if(!i.startsWith("0x4e487b71")){if(!r)return{type:e.CustomError,error:i.slice(0,10),data:i};var o=(r instanceof Interface?r:new Interface(r)).parseError(i);return{type:e.CustomError,error:o.name,args:o.args,data:i}}var f=i.slice(10);try{var c,u=null!=(c=function(e){switch(e.toNumber()){case 1:return"Assertion error";case 17:return"Arithmetic operation underflowed or overflowed outside of an unchecked block";case 18:return"Division or modulo division by zero";case 33:return"Tried to convert a value into an enum, but the value was too big or negative";case 34:return"Incorrectly encoded storage byte array";case 49:return".pop() was called on an empty array";case 50:return"Array accessed at an out-of-bounds or negative index";case 65:return"Too much memory was allocated, or an array was created that is too large";case 81:return"Called a zero-initialized variable of internal function type";default:return}}(defaultAbiCoder.decode(["uint256"],"0x"+f)[0]))?c:"Unknown panic code";return{type:e.PanicError,error:u,data:i}}catch(t){return{type:e.UnknownError,error:"Unknown panic error",data:i}}}};class EthersAdapter{constructor(e,t){this.getWalletEthersProvider=e;this.chainConfig=t}async getEthersProvider(){this.ethersProvider=await this.getWalletEthersProvider();return this.ethersProvider}async signPersonalMessage(e){const t=await this.getEthersProvider();return await t.getSigner().signMessage(e)}async call(e,t,r,n,i,s=[]){console.log("Call ethereum method. chain "+e+"; contract "+t+"; method "+r+";");const a=await this.getEthersContractInstance(e,t,r,n,i,"view",s);r=`${r}(${n.map((e=>e.type)).join(",")})`;return await a[r](...n.map((e=>e.value)))}async sendTransaction(e,r,n,i,s,a,o=true,f,c=[]){console.log("Send ethereum transaction. chain "+e+"; contract "+r+"; method "+n+"; value "+a+"; args",i);await this.switchChain(e);const u=await this.getEthersContractInstance(e,r,n,i,s,a?"payable":"nonpayable",c);const l={};if(a)l.value=a;let h;try{h=await u[n](...i.map((e=>e.value)),l)}catch(e){const r=t(e,c);console.error(e);console.log("Decoded error: ",r);if(r.type>0){const t=r.type===4&&typeof e==="string"?e:"Contract execution failed: "+r.error;if(typeof e==="string"){e=new Error(t)}else{e.message=t}}throw e}console.log("Transaction submitted: "+h.hash);f({status:"submitted",txNumber:h.hash});if(o)await h.wait().then((t=>{if(t.status!==1){console.error(t);throw new Error("Transaction failed: "+t.status)}console.log("Transaction completed!");f({status:"confirmed",txNumber:h.hash,txLink:this.chainConfig[e].explorer?this.chainConfig[e].explorer+h.hash:null});return t}));return h}async getEthersContractInstance(e,t,r,n,i,s,a=[]){const o={name:r,inputs:n,outputs:typeof i[0]==="string"?i.map(((e,t)=>{var r;const n=e==="uint"?"uint256":e;return{name:(r=e.name)!==null&&r!==void 0?r:t.toString(),type:n,internalType:n}})):i,stateMutability:s,type:"function"};console.log(o);const f=s==="view"?new StaticJsonRpcProvider(this.getRpcUrl(e),e):(await this.getEthersProvider()).getSigner();return new Contract$1(t,[o,...a],f)}getRpcUrl(e){if(!this.chainConfig[e])throw new Error("RPC URL is not configured for ethereum chain: "+e);return this.chainConfig[e].rpc}async getChain(){if(!this.ethersProvider)return 1;const e=await this.getEthersProvider();const t=await e.getNetwork();return t.chainId}async switchChain(e){const t=await this.getEthersProvider();if(e!=await this.getChain()){console.log("Switch chain: ",e);try{await t.send("wallet_switchEthereumChain",[{chainId:"0x"+e.toString(16)}])}catch(t){console.error(t);throw new Error("Connected to wrong chain, please switch the chain to chainId: "+e+", error: "+t.message)}}}async getCurrentWalletAddress(){const e=await this.getEthersProvider();const t=await e.listAccounts();if(!(t===null||t===void 0?void 0:t.length)){throw new Error("Wallet could not connect or there is no accounts created")}return t[0]}async getEvents(e,t,r,n){console.log("Get ethereum events. chain "+e+"; contract "+t+"; event "+r+";");console.log(n);const i=new StaticJsonRpcProvider(this.getRpcUrl(e),e);const s=new Contract$1(t,[{name:r,type:"event",inputs:n}],i);const a=n.map((e=>e.value));return await s.queryFilter(s.filters[r](...a))}async rpcProxy(e){return(await this.getEthersProvider()).provider.request(e)}}class AttestationStorageAdapter{async getAttestations(e){return(await dbProvider.attestations.where("collectionId").anyOf(e)).toArray()}async removeAttestation(e,t){await dbProvider.attestations.where({collectionId:e,tokenId:t}).delete()}async saveAttestation(e){await dbProvider.attestations.put(e)}}const DEFAULT_TARGET_ORIGIN="*";const DEFAULT_TIMEOUT_MILLISECONDS=12e4;const JSON_RPC_VERSION="2.0";function getUniqueId(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}class IFrameEthereumProvider{get isIFrame(){return true}get currentProvider(){return this}constructor({targetOrigin:e=DEFAULT_TARGET_ORIGIN,timeoutMilliseconds:t=DEFAULT_TIMEOUT_MILLISECONDS,eventSource:r=window,eventTarget:n=window.parent}={}){this._isSigner=true;this.completers={};this.handleEventSourceMessage=e=>{if(this.targetOrigin!=="*"&&e.origin.indexOf(this.targetOrigin)!==0)return;const t=e.data;if(!t){return}const r=t;if(r.jsonrpc!==JSON_RPC_VERSION){return}console.log("[IFRAME_RPC] response received: ",t);if(typeof r.id!=="undefined"&&r.id!==null){const e=this.completers[""+r.id];if(e){if("error"in r||"result"in r){e.resolve(r)}else{e.reject(new Error("Response from provider did not have error or result key"))}delete this.completers[r.id]}}};this.targetOrigin=e;this.timeoutMilliseconds=t;this.eventSource=r;this.eventTarget=n;this.eventSource.addEventListener("message",this.handleEventSourceMessage)}async execute(e,t){const r=getUniqueId();const n=Object.assign({jsonrpc:JSON_RPC_VERSION,id:r,method:e},typeof t==="undefined"?null:{params:t});const i=new Promise(((e,t)=>this.completers[r]={resolve:e,reject:t}));this.eventTarget.postMessage(n,this.targetOrigin);console.log("[IFRAME_RPC] request: ",n);setTimeout((()=>{if(this.completers[r]){this.completers[r].reject(new Error(`RPC ID "${r}" timed out after ${this.timeoutMilliseconds} milliseconds`));delete this.completers[r]}}),this.timeoutMilliseconds);return i}send(e,t){this.execute(e.method,e.params).then((e=>{if("error"in e){t(e.error.code+": "+e.error.message,null)}else{t(null,e.result)}}))}async sendAsync(e,t){try{const r=await this.execute(e.method,e.params);t(null,r)}catch(e){t(e.code+": "+e.message,null)}}}const appCss=":host{height:100dvh}.app-container{min-height:100dvh;display:flex;flex-direction:column}header{background:#000;color:white;height:56px;display:flex;align-items:center;box-shadow:0 2px 5px 0 rgba(0, 0, 0, 0.26)}.header-icon{height:35px;width:auto;padding-left:25px}header h1{margin:5px 0 0}h1{font-size:1.4rem;font-weight:500;padding:0 12px}main{display:flex;flex-direction:column;flex-grow:1}#ts-loader{display:none;position:absolute;z-index:100;top:0;width:100%;height:100%;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}";const IFRAME_PROVIDER_VIEWS=["joyid-token","sts-token"];const initViewerType=e=>{let t;switch(e.get("viewType")){case"integration":t="integration";break;case"tabbed":t="tabbed";break;case"joyid-token":t="joyid-token";break;case"opensea":t="opensea";break;case"sts-token":t="sts-token";break;case"alphawallet":t="alphawallet";break;case"new":default:t="new"}return t};const AppRoot=class{constructor(e){registerInstance(this,e);this.discoveryAdapter=new DiscoveryAdapter;this.attestationStorageAdapter=new AttestationStorageAdapter;this.params=new URLSearchParams(document.location.search);this.viewerType=initViewerType(this.params);dbProvider.checkCompatibility();this.tsEngine=new TokenScriptEngine((async()=>this.getWalletAdapter()),(async()=>this.discoveryAdapter),(()=>this.attestationStorageAdapter),{noLocalStorage:this.viewerType==="opensea",trustedKeys:[{issuerName:"Smart Token Labs",valueType:"ethAddress",value:"0x1c18e4eF0C9740e258835Dbb26E6C5fB4684C7a0"},{issuerName:"Smart Token Labs",valueType:"ethAddress",value:"0xf68b9DbfC6C3EE3323Eb9A3D4Ed8eb9d2Cb45A30"}]})}async getWalletAdapter(){let e;if(IFRAME_PROVIDER_VIEWS.indexOf(this.viewerType)>-1&&!this.params.has("noIframeProvider")){e=async()=>{if(!this.iframeProvider)this.iframeProvider=new Web3Provider$1(new IFrameEthereumProvider,"any");return this.iframeProvider}}else if(this.viewerType==="opensea"){e=async()=>{throw new Error("PROVIDER DISABLED")}}else if(this.viewerType==="alphawallet"){e=async()=>{const e=(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider;if(!e.isWalletConnected())await e.connectWith("MetaMask");return(await e.getWallet(true)).provider}}else{e=async()=>(await(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider.getWallet(true)).provider}return new EthersAdapter(e,CHAIN_CONFIG)}showLoaderHandler(e){this.showTsLoader()}showTsLoader(){document.getElementById("ts-loader").style.display="flex"}hideLoaderHandler(e){this.hideTsLoader()}hideTsLoader(){document.getElementById("ts-loader").style.display="none"}async loadTokenscript(e,t,r){switch(e){case"resolve":return this.tsEngine.getTokenScript(t);case"file":if(typeof r==="string"){return this.tsEngine.loadTokenScript(r)}else{return this.loadTokenScriptFromFile(r)}case"url":return this.tsEngine.getTokenScriptFromUrl(t)}}async loadTokenScriptFromFile(e){return new Promise(((t,r)=>{if(e){this.showTsLoader();const n=new FileReader;n.onload=async function(e){if(typeof e.target.result==="string"){try{t(await this.tsEngine.loadTokenScript(e.target.result))}catch(e){r("Failed to load TokenScript: "+e.message)}}}.bind(this);n.onerror=function(e){r("Failed to load file: "+e.message)}.bind(this);n.readAsText(e,"UTF-8");return}r("No file selected")}))}showToastHandler(e){this.showToast(e.detail.type,e.detail.title,e.detail.description)}async showToast(e,t,r){return showToastNotification(e,t,r)}async componentDidLoad(){if(IFRAME_PROVIDER_VIEWS.indexOf(this.viewerType)===-1&&!this.params.has("noIframeProvider")&&this.viewerType!=="opensea"){const e=(await Promise.resolve().then((function(){return Web3WalletProvider$1}))).Web3WalletProvider;e.setWalletSelectorCallback((async()=>this.walletSelector.connectWallet()));await e.loadConnections()}}render(){return h(Host,null,h("div",{class:"app-container"},h("cb-toast",{class:"toast",style:{zIndex:"500"}}),h("header",null,h("img",{class:"header-icon",alt:"TokenScript icon",src:"assets/icon/tokenscript-logo.svg"})),h("main",null,this.viewerType==="tabbed"?h("tabbed-viewer",{app:this}):"",this.viewerType==="integration"?h("integration-viewer",{app:this}):"",this.viewerType==="new"?h("new-viewer",{app:this}):"",this.viewerType==="joyid-token"?h("token-viewer",{app:this}):"",this.viewerType==="sts-token"?h("sts-viewer",{app:this}):"",this.viewerType==="opensea"?h("opensea-viewer",{app:this}):"",this.viewerType==="alphawallet"?h("alphawallet-viewer",{app:this}):""),h("div",{id:"ts-loader"},h("loading-spinner",null))),IFRAME_PROVIDER_VIEWS.indexOf(this.viewerType)===-1&&!this.params.has("noIframeProvider")&&this.viewerType!=="opensea"?h("wallet-selector",{ref:e=>this.walletSelector=e}):"")}get host(){return getElement(this)}};AppRoot.style=appCss;const attributeTableCss=":host{background:none;border:none}.attribute-widget{position:relative;display:inline-block;min-width:50px;min-height:50px}.attribute-container{position:relative}.btn-close-attributes{width:25px;height:25px;font-size:16px;line-height:16px;margin:10px}table{background:#fff;text-align:left;border:#000 solid 1px}.attribute-table td,.attribute-table th{padding:8px}";const AttributeTable=class{constructor(e){registerInstance(this,e);this.isOpen=false}render(){return h("div",{class:"attribute-widget"},h("div",{class:"attribute-container",style:{display:this.isOpen?"block":"none"}},h("table",{class:"attribute-table"}),h("button",{class:"close-btn btn-close-attributes",title:"Close attributes",onClick:()=>{this.isOpen=false}},"X")),h("button",{class:"close-btn",style:{display:this.isOpen?"none":"block"},title:"View TokenScript attributes",onClick:()=>{this.isOpen=true}},"?"))}};AttributeTable.style=attributeTableCss;const cardModalCss=".close-btn{position:absolute;right:0;top:0;margin:20px;font-size:22px;font-weight:bold;width:35px;height:35px;border:#a6a6a6;color:#676767;border-radius:5px;padding:4px 6px;cursor:pointer !important}.view-container{width:100%;padding:20px;position:fixed;top:0;min-height:100%;background:#1a1a1ae0;z-index:100;height:100%}@media screen and (max-width: 480px){.view-container{padding:5px}.close-btn{margin:10px}}.view-container attribute-table{position:absolute;bottom:10px}";const CardModal=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.tokenScript=undefined}async loadTs(){if(!this.viewBinding){this.viewBinding=new ViewBinding$1(this.host,this.showToast)}this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}componentDidLoad(){if(this.tokenScript)this.loadTs()}render(){return h(Host,{class:"view-container",style:{display:"none"}},h("button",{class:"close-btn",onClick:()=>{this.tokenScript.getViewController().unloadTokenCard()}},"X"),h("card-view",null),h("attribute-table",null))}get host(){return getElement(this)}static get watchers(){return{tokenScript:["loadTs"]}}};CardModal.style=cardModalCss;const cardPopoverCss="card-popover .popover-container{padding:0 !important}.card-container{position:relative;max-width:500px;border-radius:4px;max-height:700px;display:flex;flex-direction:column;height:calc(100dvh - 80px);overflow:hidden}.view-loader{z-index:50;position:absolute;left:0;top:0;width:100%;height:100%;border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.50)}.iframe-wrapper{position:relative;flex-grow:1;display:flex}.tokenscript-frame{background:#fff;width:100%;flex-grow:1;border:none;border-radius:4px;box-sizing:border-box}.action-bar{height:35px;margin:4px 0;padding:0 5px}.action-btn{width:100%;height:100%}";const CardPopover=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.tokenScript=undefined;this.loading=false;this.currentCard=undefined}async loadTs(){this.tokenScript.setViewBinding(this)}componentDidLoad(){if(this.tokenScript)this.loadTs();window.addEventListener("message",this.handlePostMessageFromView.bind(this));this.iframe.onload=()=>{this.hideLoader()}}hideLoader(){setTimeout((()=>this.loading=false),200)}getViewBindingJavascript(){return VIEW_BINDING_JAVASCRIPT}handlePostMessageFromView(e){var t,r;if(!this.iframe)return;if(e.source!==this.iframe.contentWindow){return}if(!((t=e.data)===null||t===void 0?void 0:t.method))return;this.handleMessageFromView(e.data.method,(r=e.data)===null||r===void 0?void 0:r.params)}async handleMessageFromView(e,t){console.log("Request from view: ",e,t);switch(e){case RequestFromView.ETH_RPC:this.currentCard.rpcProxy(t);break;case RequestFromView.SIGN_PERSONAL_MESSAGE:this.currentCard.signPersonalMessage(t.id,t.data);break;case RequestFromView.PUT_USER_INPUT:await this.tokenScript.getViewController().setUserEntryValues(t);break;case RequestFromView.CLOSE:this.unloadTokenView();break;default:throw new Error("TokenScript view API method: "+e+" is not implemented.")}}async dispatchViewEvent(e,t,r){switch(e){case ViewEvent.TOKENS_UPDATED:const n={currentInstance:t};console.log("ViewEvent.TOKENS_UPDATED");this.postMessageToView(e,{oldTokens:n,updatedTokens:n,cardId:r});this.hideLoader();return;case ViewEvent.EXECUTE_CALLBACK:case ViewEvent.GET_USER_INPUT:case ViewEvent.ON_CONFIRM:this.postMessageToView(e,Object.assign(Object.assign({},t),{id:r}));return}}postMessageToView(e,t){this.iframe.contentWindow.postMessage({method:e,params:t},"*")}dispatchRpcResult(e){return this.iframe.contentWindow.postMessage(e,"*")}async showTokenView(e,t){this.loading=true;await this.dialog.openDialog((()=>this.unloadTokenView()));this.currentCard=e;await AbstractViewBinding.injectContentView(this.iframe,e)}async unloadTokenView(){await this.dialog.closeDialog();this.currentCard=null;this.iframe.contentWindow.location.replace("data:text/html;base64,PCFET0NUWVBFIGh0bWw+");const e=new URL(document.location.href);e.hash="";history.replaceState(undefined,undefined,e)}viewError(e){this.loading=false}viewLoading(){this.loading=true}async confirmAction(){const e=this.currentCard.getTransaction();this.loading=true;if(e){console.log(e.getTransactionInfo());try{await this.currentCard.executeTransaction((e=>{this.postMessageToView(ViewEvent.TRANSACTION_EVENT,e);showTransactionNotification(e,this.showToast)}))}catch(e){this.postMessageToView(ViewEvent.TRANSACTION_EVENT,{status:"error",message:e.message});handleTransactionError(e,this.showToast)}}else{this.postMessageToView(ViewEvent.ON_CONFIRM,{})}this.loading=false}render(){var e,t,r;return h("popover-dialog",{ref:e=>this.dialog=e},h("div",{slot:"outer-content",class:"view-loader",style:{display:this.loading?"flex":"none"}},h("loading-spinner",null)),h("div",{class:"card-container view-container"},h("div",{class:"iframe-wrapper"},h("iframe",{ref:e=>this.iframe=e,class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h("div",{class:"action-bar",style:{display:((e=this.currentCard)===null||e===void 0?void 0:e.type)=="action"&&((t=this.currentCard)===null||t===void 0?void 0:t.uiButton)?"block":"none"}},h("button",{class:"action-btn btn btn-primary",onClick:()=>this.confirmAction()},(r=this.currentCard)===null||r===void 0?void 0:r.label))))}static get watchers(){return{tokenScript:["loadTs"]}}};CardPopover.style=cardPopoverCss;const cardViewCss=".card-container{position:relative;max-width:500px;margin:40px auto;border-radius:4px;max-height:700px;display:flex;flex-direction:column;height:calc(100% - 60px)}.view-loader{position:absolute;left:0;top:0;width:100%;height:100%;border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}.iframe-wrapper{position:relative;flex-grow:1;display:flex}.tokenscript-frame{background:#fff;width:100%;flex-grow:1;border-radius:4px;box-sizing:border-box}.action-bar{height:35px;margin-top:4px}.action-btn{width:100%;height:100%}";const CardView=class{constructor(e){registerInstance(this,e)}render(){return h("div",{class:"card-container"},h("div",{class:"iframe-wrapper"},h("div",{class:"view-loader",style:{display:"none"}},h("loading-spinner",null)),h("iframe",{class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h("div",{class:"action-bar",style:{display:"none"}},h("button",{class:"action-btn btn btn-primary"})))}};CardView.style=cardViewCss;const cbToastCss='/*! tailwindcss v3.1.8 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body,button{line-height:inherit;margin:0}button{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;padding:0;text-transform:none}[type=button],button{-webkit-appearance:button;background-color:transparent;background-image:none}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}p{margin:0}button{cursor:pointer}object,svg{display:block;vertical-align:middle}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}.top{left:0;margin-left:auto;margin-right:auto;right:0;top:.5rem}.top-right{right:.5rem;top:.5rem}.successBgColor{--tw-bg-opacity:1;background-color:rgb(16 185 129/var(--tw-bg-opacity))}.infoBgColor{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity))}.warningBgColor{--tw-bg-opacity:1;background-color:rgb(234 179 8/var(--tw-bg-opacity))}.errorBgColor{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.successTextColor{--tw-text-opacity:1;color:rgb(16 185 129/var(--tw-text-opacity))}.infoTextColor{--tw-text-opacity:1;color:rgb(59 130 246/var(--tw-text-opacity))}.warningTextColor{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity))}.errorTextColor{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.fixed{position:fixed}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.-mx-3{margin-left:-.75rem;margin-right:-.75rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mt-4{margin-top:1rem}.box-border{box-sizing:border-box}.flex{display:flex}.h-6{height:1.5rem}.w-80{width:20rem}.w-full{width:100%}.w-12{width:3rem}.w-6{width:1.5rem}.w-72{width:18rem}.max-w-sm{max-width:24rem}.flex-grow{flex-grow:1}.grow-0{flex-grow:0}.cursor-pointer{cursor:pointer}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.rounded-lg{border-radius:.5rem}.bg-green-700{--tw-bg-opacity:1;background-color:rgb(21 128 61/var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity))}.bg-yellow-700{--tw-bg-opacity:1;background-color:rgb(161 98 7/var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity:1;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.fill-current{fill:currentColor}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity))}.opacity-100{opacity:1}.opacity-0{opacity:0}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-700{transition-duration:.7s}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}';const CbToast=class{constructor(e){registerInstance(this,e);this.timeOut=3e3;this.position="top-right"}async Toast(e){if(e.timeOut!==undefined&&e.timeOut!==""){this.timeOut=e["timeOut"]}if(e.position!==undefined&&e.position!==""){this.position=e["position"]}let t=document.createElement("cb-toastcontent");this.rootElement.append(t);t.setParams({title:e["title"],description:e["description"],type:e["type"]});setTimeout((()=>{let e=t.firstElementChild;e.classList.remove("opacity-100");e.classList.add("opacity-0");setTimeout((()=>{t.remove()}),500)}),this.timeOut)}render(){return h("div",{class:this.position+" fixed w-80  max-w-sm box-border",ref:e=>this.rootElement=e})}};CbToast.style=cbToastCss;const cbToastcontentCss="";const CbToastcontent=class{constructor(e){registerInstance(this,e);this.title="Success";this.description="success message";this.type="success";this.toastType=[{type:"success",typeBgColor:"successBgColor",typeTextColor:"successTextColor",typeIcon:()=>h("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM16.6667 28.3333L8.33337 20L10.6834 17.65L16.6667 23.6166L29.3167 10.9666L31.6667 13.3333L16.6667 28.3333Z"})},{type:"info",typeBgColor:"infoBgColor",typeTextColor:"infoTextColor",typeIcon:()=>h("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM21.6667 28.3333H18.3334V25H21.6667V28.3333ZM21.6667 21.6666H18.3334V11.6666H21.6667V21.6666Z"})},{type:"warning",typeBgColor:"warningBgColor",typeTextColor:"warningTextColor",typeIcon:()=>h("path",{d:"M20 3.33331C10.8 3.33331 3.33337 10.8 3.33337 20C3.33337 29.2 10.8 36.6666 20 36.6666C29.2 36.6666 36.6667 29.2 36.6667 20C36.6667 10.8 29.2 3.33331 20 3.33331ZM21.6667 28.3333H18.3334V25H21.6667V28.3333ZM21.6667 21.6666H18.3334V11.6666H21.6667V21.6666Z"})},{type:"error",typeBgColor:"errorBgColor",typeTextColor:"errorTextColor",typeIcon:()=>h("path",{d:"M20 3.36667C10.8167 3.36667 3.3667 10.8167 3.3667 20C3.3667 29.1833 10.8167 36.6333 20 36.6333C29.1834 36.6333 36.6334 29.1833 36.6334 20C36.6334 10.8167 29.1834 3.36667 20 3.36667ZM19.1334 33.3333V22.9H13.3334L21.6667 6.66667V17.1H27.25L19.1334 33.3333Z"})}];this.typeBgColor=this.toastType[0]["typeBgColor"];this.typeTextColor=this.toastType[0]["typeTextColor"];this.typeIcon=this.toastType[0]["typeIcon"]();this.closeToast=e=>{e.target.parentNode.closest("cb-toastcontent").remove()};this.buildToast=()=>h("div",{class:" transition-all duration-700  ease-in opacity-100   flex w-full max-w-sm mx-auto overflow-hidden bg-white rounded-lg shadow-md z-50 mt-4",ref:e=>this.el=e},h("div",{class:this.typeBgColor+" flex grow-0 items-center justify-center w-12"},h("svg",{class:"w-6 h-6 text-white fill-current",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg"},this.typeIcon)),h("div",{class:"flex-grow w-72 px-4 py-2 -mx-3"},h("div",{class:"mx-3"},h("span",{class:this.typeTextColor+" font-semibold"},this.title),h("p",{class:"text-sm text-gray-600 "},this.description))),h("div",{class:"flex items-start justify-center"},h("svg",{onClick:e=>this.closeToast(e),class:this.typeTextColor+' "w-6 h-6 fill-current cursor-pointer',viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},h("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}))))}async setParams(e){if(e.title!==undefined&&e.title!==""){this.title=e["title"]}if(e.description!==undefined&&e.description!==""){this.description=e["description"]}if(e.type!==undefined&&e.type!==""){this.type=e["type"];for(var t=0;t<this.toastType.length;t++){if(this.type===this.toastType[t]["type"]){this.typeBgColor=this.toastType[t]["typeBgColor"];this.typeTextColor=this.toastType[t]["typeTextColor"];this.typeIcon=this.toastType[t]["typeIcon"]();break}}}}render(){return h(Host,null,this.buildToast())}};CbToastcontent.style=cbToastcontentCss;const ConfirmStep=class{constructor(e){registerInstance(this,e);this.viewer=undefined;this.tokenScript=undefined;this.securityInfo=undefined}async componentWillLoad(){}render(){var e;return h("div",null,h("div",{style:{textAlign:"center"}},h("div",null,h("p",null,h("span",null,(e=document.referrer)!==null&&e!==void 0?e:"https://somesite.com/"),"wants to you to perform an action with the following TokenScript:",h("br",null),"(TokenScript request details displayed)")),h("div",null,h("button",{class:"btn btn-primary accept-btn",onClick:()=>{this.viewer.step="token"}},"Accept"),h("button",{class:"btn btn-secondary deny-btn",onClick:()=>{this.viewer.returnResultToRequester({error:"User denied the action"})}},"Deny")),h("security-status",{tokenScript:this.tokenScript})))}};const fieldCss$1=".input-container{position:relative;padding:10px 0}.input-container>label{position:absolute;background:white;font-size:11px;left:10px;top:5px;padding:0 4px}.input-container>input,.input-container>select{width:100%;height:50px !important;border-radius:4px;border:1px solid #B0B0B0;padding:0 10px}.input-container>select{cursor:pointer}.input-container>select:hover,.input-container>select:focus{background:unset}.input-container>input:focus{border:1px solid #001AFF;outline:none}.input-container:focus-within>label{color:#001AFF}input[type=file]{border:none !important}input::file-selector-button{border-radius:10px;height:36px;min-width:73px;border:none;cursor:pointer;background:#EEEEEE;padding:8px 12px}";const InputField=class{constructor(e){registerInstance(this,e);this.name=undefined;this.label=undefined;this.type=undefined;this.required=false;this.pattern=undefined;this.value=undefined}async getFile(){return this.file}render(){return h("div",{class:"input-container"},this.type!="file"?h("label",null,this.label):"",h("input",{name:this.name,type:this.type,required:this.required,pattern:this.pattern,onChange:e=>{if(this.type==="file")this.file=e.target.files[0];this.value=e.target.value}}))}};InputField.style=fieldCss$1;function findCardByUrlParam(e,t){const r=t.getCards();for(let[t,n]of r.entries()){if(n.name==e)return{card:n,index:t}}const n=parseInt(e);if(!isNaN(n)&&r[n])return{card:r[n],index:n};return null}const IntegrationViewer=class{constructor(e){registerInstance(this,e);this.app=undefined;this.tokenScript=undefined;this.step=undefined}componentWillLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;this.verifyRequest();this.processUrlLoad()}catch(e){console.error(e)}}verifyRequest(){if(!this.urlRequest.has("callbackUri")){this.messageTarget=window.parent?window.parent:window.opener;console.log(this.messageTarget);if(!this.messageTarget)throw new Error("Cannot return message to requester, no callbackUrl supplied or window parent & opener is null.")}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("tokenscriptUrl")){this.openTokenScript("url",t.get("tokenscriptUrl"));return true}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");this.openTokenScript("resolve",e);return true}throw new Error("Could not locate TokenScript using the values provided in the URL")}async openTokenScript(e,t){this.app.showTsLoader();try{this.tokenScript=await this.app.loadTokenscript(e,t);this.card=findCardByUrlParam(this.urlRequest.get("card"),this.tokenScript).card;if(!this.card)throw new Error("Card "+this.urlRequest.get("card")+" could not be found.");this.step="confirm"}catch(e){console.error(e);alert("Failed to load TokenScript: "+e.message)}this.app.hideTsLoader()}returnResultToRequester(e){if(this.messageTarget){this.messageTarget.postMessage(e,"*")}else{const t=new URL(this.urlRequest.get("callbackUri"));const r=new URLSearchParams(t.hash.substring(1));r.set("tn-action","ts-callback");for(const[t,n]of Object.entries(e)){r.set("tn-"+t,typeof n==="object"?JSON.stringify(n):n.toString())}t.hash=r.toString();document.location.href=t.href}}render(){if(this.tokenScript){switch(this.step){case"confirm":return h("confirm-step",{viewer:this,tokenScript:this.tokenScript});case"token":return h("select-step",{viewer:this,tokenScript:this.tokenScript,card:this.card});case"view":return h("view-step",{viewer:this,tokenScript:this.tokenScript,card:this.card})}}return""}};const loadingSpinnerCss=".lds-ring{display:inline-block;position:relative;width:80px;height:80px}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite}.small{height:50px;margin-top:-10px;transform:scale(0.5)}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}";const LoadingSpinner=class{constructor(e){registerInstance(this,e);this.color="#fff";this.size="large"}render(){const e=this.color+" transparent transparent transparent";return h("div",{class:"lds-ring "+(this.size==="small"?"small":"")},h("div",{style:{borderColor:e}}),h("div",{style:{borderColor:e}}),h("div",{style:{borderColor:e}}),h("div",{style:{borderColor:e}}))}};LoadingSpinner.style=loadingSpinnerCss;const knownTokenScripts=[{tokenScriptId:"ENS",loadType:"resolve",name:"ENS",iconUrl:"/assets/tokenscript-icons/ENS.png"},{tokenScriptId:"DAI",loadType:"resolve",name:"DAI",iconUrl:"/assets/tokenscript-icons/DAI.png"},{tokenScriptId:"137-0xD5cA946AC1c1F24Eb26dae9e1A53ba6a02bd97Fe",loadType:"resolve",name:"SmartCat",iconUrl:"/assets/tokenscript-icons/smart-cat.png"},{tokenScriptId:"137-0x0D86C720e1Eb8CAb197707fDCFF9D7B218612a60",loadType:"resolve",name:"SmartCat Loot",iconUrl:"/assets/tokenscripts/smart-cat/loot-meta/contract.png"},{tokenScriptId:"1-0xAFb979d9afAd1aD27C5eFf4E27226E3AB9e5dCC9",loadType:"resolve",name:"Sablier Ethereum",iconUrl:"https://api.thegraph.com/ipfs/api/v0/cat?arg=QmZCYxNUHghpEg7V59a2dXYC1C7DdxEayiwrYpJV9jwoaN"},{tokenScriptId:"137-0x5f0e1dea4A635976ef51eC2a2ED41490d1eBa003",loadType:"resolve",name:"Sablier Polygon",iconUrl:"https://api.thegraph.com/ipfs/api/v0/cat?arg=QmZCYxNUHghpEg7V59a2dXYC1C7DdxEayiwrYpJV9jwoaN"}];const getKnownTokenScriptMetaById=e=>{for(const t of knownTokenScripts){if(e===t.tokenScriptId)return t}return null};const newViewerCss="new-viewer{padding:10px 25px;position:relative;flex-grow:1}.toolbar{display:flex;padding:5px 0;justify-content:space-between;align-items:start;flex-wrap:wrap}";const NewViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.app=undefined;this.myTokenScripts={};this.scriptsLoading=true;this.popularTokenscripts=[]}componentWillLoad(){Web3WalletProvider.registerWalletChangeListener((async e=>{for(const t in this.myTokenScripts){if(e){this.myTokenScripts[t].tokenScript.getTokenMetadata(true)}else{this.myTokenScripts[t].tokenScript.setTokenMetadata([])}}}));this.init();this.processUrlLoad()}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return;const t=new URLSearchParams(e);let r;if(t.has("ticket")||t.has("attestation")){this.app.showTsLoader();try{const{definition:e,tokenScript:n}=await this.app.tsEngine.importAttestationUsingTokenScript(t);r=await this.addFormSubmit("url",{tsId:n.getSourceInfo().tsId,image:e.meta.image});window.history.replaceState({},document.title,"/");this.showToast.emit({type:"success",title:"Attestation imported",description:"Successfully imported "+e.meta.name})}catch(e){console.error(e);this.app.hideTsLoader();this.showToast.emit({type:"error",title:"Failed to import attestation",description:e.message});return}}else if(t.has("tokenscriptUrl")){r=await this.addFormSubmit("url",{tsId:t.get("tokenscriptUrl")})}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");r=await this.addFormSubmit("resolve",{tsId:e})}else if(t.has("emulator")){const e=t.get("emulator")?new URL(t.get("emulator")).origin:document.location.origin;const n=e+"/tokenscript.tsml";r=await this.addFormSubmit("url",{tsId:n});this.connectEmulatorSocket(n,e)}console.log("open TS",r);if(r)this.viewerPopover.open(r.tokenScript)}connectEmulatorSocket(e,t){try{const r=new WebSocket("ws://"+new URL(t).host+"/ws");r.onopen=e=>{console.log("connected: ",e.type);r.send("Websocket client connected!")};r.onmessage=async t=>{if(t.data!="BUILD_UPDATED")return;try{const t=await this.addFormSubmit("url",{tsId:e});await this.viewerPopover.close();this.viewerPopover.open(t.tokenScript)}catch(e){console.error(e);alert("Failed to reload TokenScript changes")}}}catch(e){console.error(e)}}async init(){const e={};for(const t of await dbProvider.myTokenScripts.toArray()){try{const r=await this.app.loadTokenscript(t.loadType,t.tokenScriptId,t.xml);e[t.tokenScriptId]=Object.assign(Object.assign({},t),{tokenScript:r})}catch(e){console.error("Failed to load TokenScript definition: ",t.name);this.showToast.emit({type:"error",title:"Failed to load TokenScript",description:e.message})}}this.myTokenScripts=e;this.scriptsLoading=false}recalculatePopularTokenScripts(){this.popularTokenscripts=knownTokenScripts.filter((e=>!this.myTokenScripts[e.tokenScriptId]))}async addPopularTokenScript(e){this.app.showTsLoader();try{const t=await this.app.loadTokenscript("resolve",e.tokenScriptId);await this.addTokenScript(e,t)}catch(e){console.error(e);alert(e.message)}this.app.hideTsLoader()}async addTokenScript(e,t){await dbProvider.myTokenScripts.put(e);const r=Object.assign(Object.assign({},e),{tokenScript:t});this.myTokenScripts=Object.assign(Object.assign({},this.myTokenScripts),{[r.tokenScriptId]:r})}async removeTokenScript(e){if(!confirm("Are you sure you want to remove this TokenScript?"))return;await dbProvider.myTokenScripts.where("tokenScriptId").equals(e).delete();const t=this.myTokenScripts;delete t[e];this.myTokenScripts=Object.assign({},this.myTokenScripts)}async addFormSubmit(e,t){var r,n,i,s;this.app.showTsLoader();try{const a=await this.app.loadTokenscript(e,t.tsId,t.xml);const o=(r=t.tsId)!==null&&r!==void 0?r:a.getName();let f=getKnownTokenScriptMetaById(o);if(!f){f={tokenScriptId:(n=t.tsId)!==null&&n!==void 0?n:a.getName(),loadType:e,name:(s=(i=a.getLabel())!==null&&i!==void 0?i:a.getName())!==null&&s!==void 0?s:"Unknown TokenScript",xml:e==="file"?a.getXmlString():null};if(t.image){f.iconUrl=t.image}else{const e=a.getTokenOriginData()[0];if(e&&CHAIN_MAP[e.chainId]){const t=new DiscoveryAdapter;try{const r=await t.getCollectionMeta(e,CHAIN_MAP[e.chainId]);if(!f.iconUrl)f.iconUrl=r.image}catch(e){console.error("Failed to load tokenscript icon from collection metadata",e)}}}}await this.addTokenScript(f,a);await this.addDialog.closeDialog();this.app.hideTsLoader();return Object.assign(Object.assign({},f),{tokenScript:a})}catch(e){console.error(e);this.app.hideTsLoader();this.showToast.emit({type:"error",title:"Failed to load TokenScript",description:e.message})}}render(){return h(Host,null,h("h3",null,"Smart Token Viewer"),h("p",null,"Connect your wallet to use your TokenScript enabled tokens. ",h("a",{onClick:()=>this.aboutDialog.openDialog()},"Learn More"),"."),h("div",{class:"toolbar"},h("wallet-button",null),h("button",{class:"btn",onClick:()=>{this.addDialog.openDialog()}},"+ Add Token")),h("div",{style:{padding:"10px 0"}},h("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},h("h4",null,"Your Tokens"),h("button",{class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>{for(const e in this.myTokenScripts){this.myTokenScripts[e].tokenScript.getTokenMetadata(true,true)}}},"↻")),this.scriptsLoading?h("loading-spinner",{color:"#1A42FF",size:"small"}):Object.values(this.myTokenScripts).length>0?h("tokenscript-grid",null,Object.values(this.myTokenScripts).map((e=>h("tokenscript-button",{key:e.tokenScriptId,tsId:e.tokenScriptId,name:e.name,imageUrl:e.iconUrl,tokenScript:e.tokenScript,onClick:()=>{this.viewerPopover.open(e.tokenScript)},onRemove:async e=>{this.removeTokenScript(e)}})))):h("div",null,h("strong",{style:{fontSize:"13px"}},"You don't have any TokenScripts in your library yet"),h("br",null),h("span",{style:{fontSize:"12px"}},"Add TokenScripts by selecting popular ones below or adding them manually via the Add Tokens button."))),this.popularTokenscripts.length>0?h("div",null,h("h4",null,"Popular Smart Tokens"),h("tokenscript-grid",null,this.popularTokenscripts.map((e=>h("tokenscript-button",{name:e.name,imageUrl:e.iconUrl,onClick:()=>{this.addPopularTokenScript(e)}}))))):"",h("add-selector",{ref:e=>this.addDialog=e,onFormSubmit:this.addFormSubmit.bind(this)}),h("viewer-popover",{ref:e=>this.viewerPopover=e}),h("popover-dialog",{ref:e=>this.aboutDialog=e},h("about-tokenscript",null)))}static get watchers(){return{myTokenScripts:["recalculatePopularTokenScripts"]}}};NewViewer.style=newViewerCss;const openseaViewerCss="header{display:none}body{overflow:hidden}.opensea-header{height:30px;background:#000;color:#fff;display:flex;align-items:center}.opensea-header span{font-size:12px;padding-left:10px;font-weight:bold}.opensea-header .header-icon{height:20px !important;padding-left:5px;padding-top:2px}.opensea-img-container{display:flex;flex-grow:1;background-size:cover;background-repeat:no-repeat;background-position:top}.info-button,.close-button{font-size:30px;background:#000;color:#fff;width:40px;height:40px;border-radius:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}.info-button{animation:borderFlash 3s infinite}@keyframes borderFlash{50%{box-shadow:0 0 20px #001AFF}}.info-button img{width:90%}.info-button-container{position:absolute;top:0;left:0;z-index:30;height:40px;width:40px;margin:20px;display:flex;align-items:center;justify-content:center}.close-button{position:absolute;top:0;right:0;z-index:50;margin:20px;text-align:center;display:table-cell}.card-overlay{position:absolute;top:0;width:100%;height:100%;z-index:40}opensea-viewer,.opensea-viewer{position:relative}opensea-viewer,.opensea-viewer,card-view,.card-container{display:flex !important;flex-direction:column;flex-grow:1}.card-container{max-width:unset !important;margin:0 auto !important;max-height:unset !important;width:100%}.tokenscript-frame{border:none !important}";const OpenseaViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.showInfoCard=false}async componentWillLoad(){this.app.showTsLoader()}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad();this.loadTokenScript()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}this.app.hideTsLoader()}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.viewBinding=new ViewBinding$1(this.host,this.showToast);this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}}catch(e){console.warn(e.message)}}displayInfoCard(){const e=this.tokenScript.getCards().find((e=>e.type==="token"));if(e){this.tokenScript.showOrExecuteTokenCard(e);this.showInfoCard=true}}render(){return h(Host,null,h("div",{class:"opensea-viewer"},this.tokenDetails?[h("div",{class:"opensea-img-container",style:{backgroundImage:"url("+this.tokenDetails.image+")"},title:this.tokenDetails.name},h("div",{class:"info-button-container"},this.tokenScript?h("div",{class:"info-button",title:"Token Information",onClick:()=>this.displayInfoCard()},h("img",{alt:"Smart Layer",title:"Token Information",src:"/assets/icon/sl-icon-white.png"})):h("loading-spinner",{size:"small"}))),h("div",{class:"card-overlay",style:{display:this.showInfoCard?"flex":"none"}},h("div",{class:"close-button",onClick:()=>{this.showInfoCard=false;this.tokenScript.getViewController().unloadTokenCard()}},"x"),h("card-view",null))]:""),h("div",{class:"opensea-header"},h("span",null,"XNFT by"),h("img",{class:"header-icon",alt:"TokenScript icon",src:"assets/icon/smart-layer-icon.png"})))}get host(){return getElement(this)}};OpenseaViewer.style=openseaViewerCss;const popoverDialogCss=".popover-modal{position:fixed;left:0;height:100dvh;width:100vw;top:0;background-color:#00000082;align-items:center;justify-content:center;display:none;overflow:hidden;z-index:100}.popover-modal.open{display:flex !important;animation:fadeIn 0.25s}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}.popover-modal.open .popover-container{top:unset !important;animation:slideIn 0.25s}@keyframes slideIn{0%{transform:translateY(500px);animation-timing-function:ease-out}100%{transform:translateY(0px);animation-timing-function:ease-in}}.popover-container{box-sizing:border-box;position:absolute;max-width:500px;max-height:calc(100dvh - 80px);width:100%;background:#fff;min-height:300px;border-radius:8px;padding:10px;top:110dvh;animation:slideIn 0.5s reverse;display:flex;flex-direction:column}.close-btn{position:absolute;top:-36px;right:10px;font-size:24px;background:none;border:none;color:#fff;cursor:pointer;font-weight:bold;line-height:24px}.close-btn:hover{color:#cacaca}.popover-inner{position:relative;overflow:auto;display:flex;flex-direction:column;flex-grow:1;overflow-x:hidden}@media (max-width: 500px){.popover-modal{align-items:end}.popover-container{border-radius:8px 8px 0 0 !important}}";const PopoverDialog=class{constructor(e){registerInstance(this,e);this.open=false;this.dialogStyles={}}async openDialog(e){this.open=true;this.dismissCallback=e}async closeDialog(){this.open=false}render(){return h("div",{class:"popover-modal"+(this.open?" open":"")},h("div",{class:"popover-container",style:this.dialogStyles},h("button",{class:"close-btn",onClick:()=>{this.open=false;if(this.dismissCallback){this.dismissCallback();this.dismissCallback=null}}},"x"),h("slot",{name:"outer-content"}),h("div",{class:"popover-inner"},h("slot",null))))}};PopoverDialog.style=popoverDialogCss;const abi_1=getAugmentedNamespace(lib_esm$x);const address_1=getAugmentedNamespace(lib_esm$B);const require$$0=getAugmentedNamespace(lib_esm$z);const basex_1=getAugmentedNamespace(lib_esm$u);const bytes_1=getAugmentedNamespace(lib_esm$F);const hash_1=getAugmentedNamespace(lib_esm$y);const hdnode_1=getAugmentedNamespace(lib_esm$s);const json_wallets_1=getAugmentedNamespace(lib_esm$q);const keccak256_1=getAugmentedNamespace(lib_esm$D);const logger_1=getAugmentedNamespace(lib_esm$G);const sha2_1=getAugmentedNamespace(lib_esm$t);const solidity_1=getAugmentedNamespace(lib_esm$n);const random_1=getAugmentedNamespace(lib_esm$r);const properties_1=getAugmentedNamespace(lib_esm$E);const require$$1=getAugmentedNamespace(lib_esm$C);const signing_key_1=getAugmentedNamespace(lib_esm$w);const strings_1=getAugmentedNamespace(lib_esm$A);const transactions_1=getAugmentedNamespace(lib_esm$v);const units_1=getAugmentedNamespace(lib_esm$m);const wallet_1=getAugmentedNamespace(lib_esm$p);const web_1=getAugmentedNamespace(lib_esm$o);var utils=createCommonjsModule$2((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))r(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.formatBytes32String=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t._toEscapedUtf8String=t.nameprep=t.hexDataSlice=t.hexDataLength=t.hexZeroPad=t.hexValue=t.hexStripZeros=t.hexConcat=t.isHexString=t.hexlify=t.base64=t.base58=t.TransactionDescription=t.LogDescription=t.Interface=t.SigningKey=t.HDNode=t.defaultPath=t.isBytesLike=t.isBytes=t.zeroPad=t.stripZeros=t.concat=t.arrayify=t.shallowCopy=t.resolveProperties=t.getStatic=t.defineReadOnly=t.deepCopy=t.checkProperties=t.poll=t.fetchJson=t._fetchData=t.RLP=t.Logger=t.checkResultErrors=t.FormatTypes=t.ParamType=t.FunctionFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.Fragment=t.defaultAbiCoder=t.AbiCoder=void 0;t.Indexed=t.Utf8ErrorReason=t.UnicodeNormalizationForm=t.SupportedAlgorithm=t.mnemonicToSeed=t.isValidMnemonic=t.entropyToMnemonic=t.mnemonicToEntropy=t.getAccountPath=t.verifyTypedData=t.verifyMessage=t.recoverPublicKey=t.computePublicKey=t.recoverAddress=t.computeAddress=t.getJsonWalletAddress=t.TransactionTypes=t.serializeTransaction=t.parseTransaction=t.accessListify=t.joinSignature=t.splitSignature=t.soliditySha256=t.solidityKeccak256=t.solidityPack=t.shuffled=t.randomBytes=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.computeHmac=t.commify=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.isAddress=t.getCreate2Address=t.getContractAddress=t.getIcapAddress=t.getAddress=t._TypedDataEncoder=t.id=t.isValidName=t.namehash=t.hashMessage=t.dnsEncode=t.parseBytes32String=void 0;Object.defineProperty(t,"AbiCoder",{enumerable:true,get:function(){return abi_1.AbiCoder}});Object.defineProperty(t,"checkResultErrors",{enumerable:true,get:function(){return abi_1.checkResultErrors}});Object.defineProperty(t,"ConstructorFragment",{enumerable:true,get:function(){return abi_1.ConstructorFragment}});Object.defineProperty(t,"defaultAbiCoder",{enumerable:true,get:function(){return abi_1.defaultAbiCoder}});Object.defineProperty(t,"ErrorFragment",{enumerable:true,get:function(){return abi_1.ErrorFragment}});Object.defineProperty(t,"EventFragment",{enumerable:true,get:function(){return abi_1.EventFragment}});Object.defineProperty(t,"FormatTypes",{enumerable:true,get:function(){return abi_1.FormatTypes}});Object.defineProperty(t,"Fragment",{enumerable:true,get:function(){return abi_1.Fragment}});Object.defineProperty(t,"FunctionFragment",{enumerable:true,get:function(){return abi_1.FunctionFragment}});Object.defineProperty(t,"Indexed",{enumerable:true,get:function(){return abi_1.Indexed}});Object.defineProperty(t,"Interface",{enumerable:true,get:function(){return abi_1.Interface}});Object.defineProperty(t,"LogDescription",{enumerable:true,get:function(){return abi_1.LogDescription}});Object.defineProperty(t,"ParamType",{enumerable:true,get:function(){return abi_1.ParamType}});Object.defineProperty(t,"TransactionDescription",{enumerable:true,get:function(){return abi_1.TransactionDescription}});Object.defineProperty(t,"getAddress",{enumerable:true,get:function(){return address_1.getAddress}});Object.defineProperty(t,"getCreate2Address",{enumerable:true,get:function(){return address_1.getCreate2Address}});Object.defineProperty(t,"getContractAddress",{enumerable:true,get:function(){return address_1.getContractAddress}});Object.defineProperty(t,"getIcapAddress",{enumerable:true,get:function(){return address_1.getIcapAddress}});Object.defineProperty(t,"isAddress",{enumerable:true,get:function(){return address_1.isAddress}});var s=i(require$$0);t.base64=s;Object.defineProperty(t,"base58",{enumerable:true,get:function(){return basex_1.Base58}});Object.defineProperty(t,"arrayify",{enumerable:true,get:function(){return bytes_1.arrayify}});Object.defineProperty(t,"concat",{enumerable:true,get:function(){return bytes_1.concat}});Object.defineProperty(t,"hexConcat",{enumerable:true,get:function(){return bytes_1.hexConcat}});Object.defineProperty(t,"hexDataSlice",{enumerable:true,get:function(){return bytes_1.hexDataSlice}});Object.defineProperty(t,"hexDataLength",{enumerable:true,get:function(){return bytes_1.hexDataLength}});Object.defineProperty(t,"hexlify",{enumerable:true,get:function(){return bytes_1.hexlify}});Object.defineProperty(t,"hexStripZeros",{enumerable:true,get:function(){return bytes_1.hexStripZeros}});Object.defineProperty(t,"hexValue",{enumerable:true,get:function(){return bytes_1.hexValue}});Object.defineProperty(t,"hexZeroPad",{enumerable:true,get:function(){return bytes_1.hexZeroPad}});Object.defineProperty(t,"isBytes",{enumerable:true,get:function(){return bytes_1.isBytes}});Object.defineProperty(t,"isBytesLike",{enumerable:true,get:function(){return bytes_1.isBytesLike}});Object.defineProperty(t,"isHexString",{enumerable:true,get:function(){return bytes_1.isHexString}});Object.defineProperty(t,"joinSignature",{enumerable:true,get:function(){return bytes_1.joinSignature}});Object.defineProperty(t,"zeroPad",{enumerable:true,get:function(){return bytes_1.zeroPad}});Object.defineProperty(t,"splitSignature",{enumerable:true,get:function(){return bytes_1.splitSignature}});Object.defineProperty(t,"stripZeros",{enumerable:true,get:function(){return bytes_1.stripZeros}});Object.defineProperty(t,"_TypedDataEncoder",{enumerable:true,get:function(){return hash_1._TypedDataEncoder}});Object.defineProperty(t,"dnsEncode",{enumerable:true,get:function(){return hash_1.dnsEncode}});Object.defineProperty(t,"hashMessage",{enumerable:true,get:function(){return hash_1.hashMessage}});Object.defineProperty(t,"id",{enumerable:true,get:function(){return hash_1.id}});Object.defineProperty(t,"isValidName",{enumerable:true,get:function(){return hash_1.isValidName}});Object.defineProperty(t,"namehash",{enumerable:true,get:function(){return hash_1.namehash}});Object.defineProperty(t,"defaultPath",{enumerable:true,get:function(){return hdnode_1.defaultPath}});Object.defineProperty(t,"entropyToMnemonic",{enumerable:true,get:function(){return hdnode_1.entropyToMnemonic}});Object.defineProperty(t,"getAccountPath",{enumerable:true,get:function(){return hdnode_1.getAccountPath}});Object.defineProperty(t,"HDNode",{enumerable:true,get:function(){return hdnode_1.HDNode}});Object.defineProperty(t,"isValidMnemonic",{enumerable:true,get:function(){return hdnode_1.isValidMnemonic}});Object.defineProperty(t,"mnemonicToEntropy",{enumerable:true,get:function(){return hdnode_1.mnemonicToEntropy}});Object.defineProperty(t,"mnemonicToSeed",{enumerable:true,get:function(){return hdnode_1.mnemonicToSeed}});Object.defineProperty(t,"getJsonWalletAddress",{enumerable:true,get:function(){return json_wallets_1.getJsonWalletAddress}});Object.defineProperty(t,"keccak256",{enumerable:true,get:function(){return keccak256_1.keccak256}});Object.defineProperty(t,"Logger",{enumerable:true,get:function(){return logger_1.Logger}});Object.defineProperty(t,"computeHmac",{enumerable:true,get:function(){return sha2_1.computeHmac}});Object.defineProperty(t,"ripemd160",{enumerable:true,get:function(){return sha2_1.ripemd160}});Object.defineProperty(t,"sha256",{enumerable:true,get:function(){return sha2_1.sha256}});Object.defineProperty(t,"sha512",{enumerable:true,get:function(){return sha2_1.sha512}});Object.defineProperty(t,"solidityKeccak256",{enumerable:true,get:function(){return solidity_1.keccak256}});Object.defineProperty(t,"solidityPack",{enumerable:true,get:function(){return solidity_1.pack}});Object.defineProperty(t,"soliditySha256",{enumerable:true,get:function(){return solidity_1.sha256}});Object.defineProperty(t,"randomBytes",{enumerable:true,get:function(){return random_1.randomBytes}});Object.defineProperty(t,"shuffled",{enumerable:true,get:function(){return random_1.shuffled}});Object.defineProperty(t,"checkProperties",{enumerable:true,get:function(){return properties_1.checkProperties}});Object.defineProperty(t,"deepCopy",{enumerable:true,get:function(){return properties_1.deepCopy}});Object.defineProperty(t,"defineReadOnly",{enumerable:true,get:function(){return properties_1.defineReadOnly}});Object.defineProperty(t,"getStatic",{enumerable:true,get:function(){return properties_1.getStatic}});Object.defineProperty(t,"resolveProperties",{enumerable:true,get:function(){return properties_1.resolveProperties}});Object.defineProperty(t,"shallowCopy",{enumerable:true,get:function(){return properties_1.shallowCopy}});var a=i(require$$1);t.RLP=a;Object.defineProperty(t,"computePublicKey",{enumerable:true,get:function(){return signing_key_1.computePublicKey}});Object.defineProperty(t,"recoverPublicKey",{enumerable:true,get:function(){return signing_key_1.recoverPublicKey}});Object.defineProperty(t,"SigningKey",{enumerable:true,get:function(){return signing_key_1.SigningKey}});Object.defineProperty(t,"formatBytes32String",{enumerable:true,get:function(){return strings_1.formatBytes32String}});Object.defineProperty(t,"nameprep",{enumerable:true,get:function(){return strings_1.nameprep}});Object.defineProperty(t,"parseBytes32String",{enumerable:true,get:function(){return strings_1.parseBytes32String}});Object.defineProperty(t,"_toEscapedUtf8String",{enumerable:true,get:function(){return strings_1._toEscapedUtf8String}});Object.defineProperty(t,"toUtf8Bytes",{enumerable:true,get:function(){return strings_1.toUtf8Bytes}});Object.defineProperty(t,"toUtf8CodePoints",{enumerable:true,get:function(){return strings_1.toUtf8CodePoints}});Object.defineProperty(t,"toUtf8String",{enumerable:true,get:function(){return strings_1.toUtf8String}});Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:true,get:function(){return strings_1.Utf8ErrorFuncs}});Object.defineProperty(t,"accessListify",{enumerable:true,get:function(){return transactions_1.accessListify}});Object.defineProperty(t,"computeAddress",{enumerable:true,get:function(){return transactions_1.computeAddress}});Object.defineProperty(t,"parseTransaction",{enumerable:true,get:function(){return transactions_1.parse}});Object.defineProperty(t,"recoverAddress",{enumerable:true,get:function(){return transactions_1.recoverAddress}});Object.defineProperty(t,"serializeTransaction",{enumerable:true,get:function(){return transactions_1.serialize}});Object.defineProperty(t,"TransactionTypes",{enumerable:true,get:function(){return transactions_1.TransactionTypes}});Object.defineProperty(t,"commify",{enumerable:true,get:function(){return units_1.commify}});Object.defineProperty(t,"formatEther",{enumerable:true,get:function(){return units_1.formatEther}});Object.defineProperty(t,"parseEther",{enumerable:true,get:function(){return units_1.parseEther}});Object.defineProperty(t,"formatUnits",{enumerable:true,get:function(){return units_1.formatUnits}});Object.defineProperty(t,"parseUnits",{enumerable:true,get:function(){return units_1.parseUnits}});Object.defineProperty(t,"verifyMessage",{enumerable:true,get:function(){return wallet_1.verifyMessage}});Object.defineProperty(t,"verifyTypedData",{enumerable:true,get:function(){return wallet_1.verifyTypedData}});Object.defineProperty(t,"_fetchData",{enumerable:true,get:function(){return web_1._fetchData}});Object.defineProperty(t,"fetchJson",{enumerable:true,get:function(){return web_1.fetchJson}});Object.defineProperty(t,"poll",{enumerable:true,get:function(){return web_1.poll}});var o=sha2_1;Object.defineProperty(t,"SupportedAlgorithm",{enumerable:true,get:function(){return o.SupportedAlgorithm}});var f=strings_1;Object.defineProperty(t,"UnicodeNormalizationForm",{enumerable:true,get:function(){return f.UnicodeNormalizationForm}});Object.defineProperty(t,"Utf8ErrorReason",{enumerable:true,get:function(){return f.Utf8ErrorReason}})}));const securityStatusCss=".security-status{box-sizing:border-box;margin:0 5px;padding:5px 5px;border-radius:10px;font-size:20px;width:36px;height:36px;text-align:center;cursor:pointer;display:flex;align-items:center;justify-content:center}.security-popover-icon{font-size:50px;margin:0 0 10px}";const SecurityStatus=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.securityInfo=undefined;this.statusColor=undefined;this.statusIcon=undefined}async componentWillLoad(){this.securityInfo=await this.tokenScript.getSecurityInfo().getInfo()}updateStatusState(){switch(this.securityInfo.status){case SecurityStatus$1.VALID:this.statusColor="#3bd23b";this.statusIcon="✔";break;case SecurityStatus$1.WARNING:this.statusColor="#ff871d";this.statusIcon="✗";break;case SecurityStatus$1.INVALID:this.statusColor="#ff4f4f";this.statusIcon="✗";break}}getDetailedSecurityInfo(){const e=this.securityInfo.originStatuses.reduce(((e,t)=>{if(e.indexOf(t.type)===-1)e.push(t.type);return e}),[]);return"TokenScript security information\n"+(this.securityInfo.trustedKey?"\nIssued by: "+this.securityInfo.trustedKey.issuerName+"\n":"")+(this.securityInfo.authoritivePublicKey?"\nAuthoritative Key: "+utils.computeAddress(this.securityInfo.authoritivePublicKey)+"\n("+this.securityInfo.authoritivePublicKey+")":"")+(this.securityInfo.signerPublicKey?"\nSigner Key: "+utils.computeAddress(this.securityInfo.signerPublicKey):"")+"\nAuthentication: "+e.join(", ")}render(){return this.securityInfo?h(Host,null,h("div",{class:"security-status",style:{background:this.statusColor},title:this.securityInfo.statusText+"\n\n"+this.getDetailedSecurityInfo(),onClick:()=>this.dialog.openDialog()},this.statusIcon),h("popover-dialog",{ref:e=>this.dialog=e},h("h1",{class:"security-popover-icon",style:{color:this.statusColor}},this.statusIcon),h("strong",null,this.securityInfo.statusText),h("p",{style:{wordWrap:"break-word"},innerHTML:this.getDetailedSecurityInfo().replaceAll("\n","<br/>")}))):""}static get watchers(){return{securityInfo:["updateStatusState"]}}};SecurityStatus.style=securityStatusCss;const fieldCss=".input-container{position:relative;padding:10px 0}.input-container>label{position:absolute;background:white;font-size:11px;left:10px;top:5px;padding:0 4px}.input-container>input,.input-container>select{width:100%;height:50px !important;border-radius:4px;border:1px solid #B0B0B0;padding:0 10px}.input-container>select{cursor:pointer}.input-container>select:hover,.input-container>select:focus{background:unset}.input-container>input:focus{border:1px solid #001AFF;outline:none}.input-container:focus-within>label{color:#001AFF}input[type=file]{border:none !important}input::file-selector-button{border-radius:10px;height:36px;min-width:73px;border:none;cursor:pointer;background:#EEEEEE;padding:8px 12px}";const SelectField=class{constructor(e){registerInstance(this,e);this.name=undefined;this.label=undefined;this.options=undefined;this.value=undefined}componentWillLoad(){if(!this.value&&this.options.length>0)this.value=this.options[0].value}render(){return h("div",{class:"input-container"},h("label",null,this.label),h("select",{name:this.name,onChange:e=>{this.value=e.target.value}},this.options.map((e=>h("option",{value:e.value,selected:this.value===e.value},e.label)))))}};SelectField.style=fieldCss;function getTokensFlat(e){return Object.keys(e).reduce(((t,r)=>{if(e[r].tokenDetails){const n=e[r].tokenDetails.map(((e,t)=>Object.assign(Object.assign({},e),{contextId:r+"-"+t,originId:r})));t.push(...n)}else{const n=Object.assign(Object.assign({},e[r]),{contextId:r,originId:r});t.push(n)}return t}),[])}const selectStepCss=".select-grid{display:flex;flex-wrap:wrap;justify-content:center}";const SelectStep=class{constructor(e){registerInstance(this,e);this.viewer=undefined;this.tokenScript=undefined;this.card=undefined;this.currentTokensFlat=undefined;this.tokenButtons=undefined;Web3WalletProvider.registerWalletChangeListener(this.handleWalletChange.bind(this))}handleWalletChange(e){if(e){this.tokenScript.getTokenMetadata(true)}else{this.tokenScript.setTokenMetadata([])}}async componentWillLoad(){await this.populateTokens(await this.tokenScript.getTokenMetadata());this.tokenScript.on("TOKENS_UPDATED",(e=>{this.populateTokens(e.tokens)}),"token-button")}async populateTokens(e){this.viewer.app.showTsLoader();this.currentTokens=e;this.currentTokensFlat=getTokensFlat(this.currentTokens);const t=[];this.tokenButtons=[];for(let e of this.currentTokensFlat){const r={originId:e.originId,chainId:"chainId"in e?e.chainId:e.collectionDetails.chainId,selectedNftId:"tokenId"in e?e.tokenId:undefined};const n=await this.card.isEnabledOrReason(r);if(n===true){t.push(e)}if(n===false)continue;this.tokenButtons.push({token:e,enabled:n===true,buttonTitle:n!==true?n:this.card.label})}if(t.length===0){this.viewer.returnResultToRequester({action:"ts-callback",error:"You do not have any tokens that support this action"});return}if(t.length===1){const e=t[0].contextId.split("-");this.tokenScript.setCurrentTokenContext(e[0],e.length>1?parseInt(e[1]):null);this.viewer.step="view"}this.viewer.app.hideTsLoader()}render(){return h("div",null,h("wallet-button",null),h("div",{class:"select-grid"},this.tokenButtons?this.tokenButtons.map((e=>h("token-button",{token:e.token,enabled:e.enabled,buttonTitle:e.buttonTitle,clickHandler:e=>{const t=e.contextId.split("-");this.tokenScript.setCurrentTokenContext(t[0],t.length>1?parseInt(t[1]):null);this.viewer.step="view"}}))):""),h("div",{id:"tn-integration"}))}};SelectStep.style=selectStepCss;const startTabCss="#start-tab{padding:20px}.start-section{padding:15px 0}.start-sub-section{margin-bottom:15px}input::file-selector-button{border-radius:5px;height:36px;min-width:112px;border:none;cursor:pointer;color:#fff;background:linear-gradient(234.79deg, #001AFF 37.73%, #4F95FF 118.69%), #8A9CB8}input::file-selector-button:hover{background:linear-gradient(214.82deg, #001AFF -21.14%, #4F95FF 89.22%)}";const StartTab$1=class{constructor(e){registerInstance(this,e);this.tabView=undefined;this.tabId=undefined}componentDidLoad(){}render(){return h("div",null,h("div",{class:"start-section"},h("about-tokenscript",null)),h("div",{class:"start-section"},h("h3",null,"Load a TokenScript"),h("div",{class:"start-sub-section"},h("h4",null,"Load with contract ID"),h("label",{htmlFor:"ts-id"},"Tokenscript ID: "),h("input",{style:{marginRight:"15px"},id:"ts-id",type:"text",value:""}),h("label",{htmlFor:"ts-chain"},"Chain: "),h("select",{id:"ts-chain",style:{marginRight:"15px"}},Object.entries(CHAIN_NAME_MAP).map((e=>h("option",{value:e[0]},e[1])))),h("button",{id:"ts-resolve-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-chain").value+"-"+document.getElementById("ts-id").value;this.tabView.openTokenScriptTab("resolve",e)}},"Resolve")),h("div",{class:"start-sub-section"},h("h4",null,"Load from URL"),h("label",{htmlFor:"ts-url"},"URL: "),h("input",{id:"ts-url",type:"text",style:{marginRight:"15px"}}),h("button",{id:"ts-load-url-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-url").value;this.tabView.openTokenScriptTab("url",e)}},"Load")),h("div",{class:"start-sub-section"},h("h4",null,"Load from file"),h("label",{htmlFor:"ts-file"},"Load XML: "),h("input",{id:"ts-file",type:"file",accept:".xml,.tsml,text/xml",onChange:()=>{const e=document.getElementById("ts-file").files[0];this.tabView.openTokenScriptTab("file",null,e)}})),h("div",{class:"start-sub-section"},h("h4",null,"Load Predefined TokenScripts "),h("label",{htmlFor:"ts-predefined"}),h("select",{id:"ts-predefined",style:{marginRight:"15px"}},h("option",{value:"DAI"},"DAI"),h("option",{value:"ENS"},"ENS")),h("button",{id:"ts-load-predefined-btn",type:"button",class:"btn btn-primary",onClick:()=>{const e=document.getElementById("ts-predefined").value;this.tabView.openTokenScriptTab("resolve",e)}},"Load"))))}};StartTab$1.style=startTabCss;const stsViewerCss="header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.token-viewer{max-width:650px;width:100%;margin:0 auto;display:flex;flex-direction:column}.details-container{flex-grow:1}.image-container{min-height:100px}.token-viewer img{max-width:100%}.token-viewer .main-info{border-bottom:1px solid #F7F6F0}.main-info h1{font-size:16px;font-weight:700;line-height:20px;margin:16px 0 0;padding:0}.extra-info{display:flex;flex-direction:column;gap:16px}.main-info{padding:0 16px 16px;display:flex;flex-direction:column;gap:8px}.main-info .collection-details{display:flex;align-items:center;gap:8px}.main-info .owner-count{color:#3D45FB;font-size:12px;font-weight:700;line-height:14px;letter-spacing:0.24px}.collection-details h4{font-size:14px;margin:0;font-weight:600;line-height:20px;flex-grow:1}.collection-details span{font-size:12px;font-weight:600;line-height:20px}.extra-info{padding:8px 16px 16px}.extra-info p{margin:0 0 16px}.attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border-radius:8px;border:1px solid #8D98F8;min-height:64px;padding:6px 4px;overflow:hidden}.attribute-item h5{font-size:12px;font-weight:500;line-height:16px;margin:0}.attribute-item span{font-size:12px;font-weight:400;line-height:16px;word-break:break-word}.popover-container{max-height:calc(100dvh - 50px) !important}.card-container{height:calc(100dvh - 50px) !important}.actions{display:flex;flex-direction:column;gap:10px;padding:10px 15px}";const SmartTokenStoreViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");let r;if(this.urlRequest.has("tokenscriptUrl")){r=await this.app.loadTokenscript("url",this.urlRequest.get("tokenscriptUrl"))}else{const n=e+"-"+t;r=await this.app.loadTokenscript("resolve",n)}const n=r.getTokenOriginData();let i;for(const r of n){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){i=r;r.tokenDetails=[this.tokenDetails];break}}if(i){r.setTokenMetadata(n);class e{getTokens(e,t){return Promise.resolve(n)}}this.app.discoveryAdapter=new e;r.setCurrentTokenContext(i.originId,0);this.tokenScript=r;this.tokenScript.on("TOKENS_UPDATED",(e=>{this.cardButtons=null;this.overflowCardButtons=null;this.loadCards()}),"grid");this.loadCards()}}catch(e){console.warn(e.message)}}async loadCards(){const e=[];const t=[];const r=this.tokenScript.getCards();for(let[n,i]of r.entries()){let r=i.label;if(r==="Unnamed Card")r=i.type==="token"?"Token Info":i.type+" Card";try{const s=await i.isEnabledOrReason();if(s===false)continue;const a=h("button",{class:"btn "+getCardButtonClass(i,n),onClick:()=>this.showCard(i),disabled:s!==true,title:s!==true?s:r},r);if(s!==true||e.length>2){t.push(a)}else{e.push(a)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t}async showCard(e){window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}}render(){var e,t,r;return h(Host,null,h("div",{class:"token-viewer"},this.tokenDetails?h("div",null,h("div",{class:"details-container"},h("div",{class:"image-container"},h("token-icon",{style:{minHeight:"100px;"},src:this.tokenDetails.image,imageTitle:this.tokenDetails.name})),h("div",{class:"info-container"},h("div",{class:"main-info"},h("h1",null,this.tokenDetails.name),h("div",{class:"owner-count"},h("span",{style:{color:"#3D45FB"}},this.tokenDetails.collectionDetails.tokenType==="erc1155"?"balance: "+this.tokenDetails.balance:"#"+this.tokenDetails.tokenId)),h("div",{class:"collection-details"},h("token-icon",{style:{width:"24px",borderRadius:"4px"},src:this.tokenDetails.collectionDetails.image,imageTitle:this.tokenDetails.collectionDetails.name}),h("h4",null,(e=this.tokenDetails.collectionDetails.name)!==null&&e!==void 0?e:this.tokenDetails.name),h("span",null,this.tokenDetails.collectionDetails.tokenType.toUpperCase()))),h("div",{class:"extra-info"},h("p",null,this.tokenDetails.description),h("div",{class:"attribute-container"},((t=this.tokenDetails.attributes)===null||t===void 0?void 0:t.length)?this.tokenDetails.attributes.map((e=>h("div",{class:"attribute-item",title:e.trait_type+": "+e.value},h("h5",null,e.trait_type),h("span",null,e.value)))):"")))),h("div",{class:"actions"},this.cardButtons?this.cardButtons:h("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((r=this.overflowCardButtons)===null||r===void 0?void 0:r.length)?[h("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h("action-overflow-modal",{ref:e=>this.overflowDialog=e},h("div",{class:"actions"},this.overflowCardButtons))]:""),h("div",{style:{padding:"0 10px"}},this.tokenScript?h("security-status",{tokenScript:this.tokenScript}):"")):""),h("card-popover",{tokenScript:this.tokenScript}))}};SmartTokenStoreViewer.style=stsViewerCss;const tabHeaderItemCss=":host{background:none;border:none;border-bottom:2px solid white;border-radius:0;margin:0;color:#ccc;max-width:200px;flex-grow:1;align-content:center;justify-content:center;padding:5px 10px;box-sizing:border-box;cursor:pointer !important}:host>.tab-button{height:40px;display:flex;flex-direction:row;align-items:center}.tab-button span{flex-grow:1;display:inline-block;color:inherit;font-weight:bold;margin-top:4px;text-overflow:ellipsis ellipsis;overflow:hidden;white-space:nowrap}.tab-button button{border-color:#a6a6a6 !important;border:none;color:#676767;border-radius:5px;padding:4px 6px;font-weight:bold;cursor:pointer !important}.tab-button button:hover{background:linear-gradient(0deg, #CECECE, #CECECE), #DDDDDD}:host(.active){border-bottom:2px solid #001AFF;color:#333 !important}";const StartTab=class{constructor(e){registerInstance(this,e);this.tabView=undefined;this.tabId=undefined;this.tabTitle=undefined;this.closable=true}render(){return h("div",{class:"tab-button",onClick:()=>this.tabView.showTab(this.tabId),title:this.tabTitle},h("span",null,this.tabTitle),this.closable===true?h("button",{onClick:()=>this.tabView.closeTab(this.tabId)},"X"):"")}};StartTab.style=tabHeaderItemCss;const tabbedViewerCss="tabbed-viewer{display:flex;flex-direction:column;flex-grow:1}#tab-header{display:flex;border-bottom:1px solid #000}#tab-content{position:relative;flex-grow:1}#tab-content>*{display:none}#tab-content>.active{display:block !important}";const TabbedViewer=class{constructor(e){registerInstance(this,e);this.tabs={};this.app=undefined}async showTab(e){if(e!=="start-tab"&&!this.tabs[e])return;let t=this.host.querySelector("#tab-header").children;for(let e=0;e<t.length;e++)t[e].classList.remove("active");t=this.host.querySelector("#tab-content").children;for(let e=0;e<t.length;e++)t[e].classList.remove("active");if(e==="start-tab"){this.host.querySelector("#start-tab-header").classList.add("active");this.host.querySelector("#start-tab").classList.add("active")}else{this.tabs[e].tabHeader.classList.add("active");this.tabs[e].content.classList.add("active")}}async closeTab(e){if(!this.tabs[e])return;const t=this.tabs[e];t.tabHeader.remove();t.content.remove();delete this.tabs[e];const r=Object.keys(this.tabs);await this.showTab(r.length===0?"start-tab":r[r.length-1])}async openTokenScriptTab(e,t,r,n){this.app.showTsLoader();try{const r=await this.app.loadTokenscript(e,t);this.addTab(r,n)}catch(e){console.error(e);alert("Failed to load TokenScript: "+e.message)}this.app.hideTsLoader()}addTab(e,t){const r=Date.now().toString();new URLSearchParams(document.location.search);const n=this.tabs[r]={tabHeader:document.createElement("tab-header-item",{is:"tab-header-item"}),content:document.createElement("viewer-tab",{is:"viewer-tab"})};n.tabHeader.tabView=this;n.tabHeader.tabId=r;n.tabHeader.tabTitle=e.getLabel();n.content.app=this.app;n.content.tabId=r;n.content.tokenScript=e;this.host.querySelector("#tab-header").appendChild(n.tabHeader);this.host.querySelector("#tab-content").appendChild(n.content);this.showTab(r);if(t)this.connectEmulatorSocket(r,t)}async connectEmulatorSocket(e,t){try{const r=new WebSocket("ws://"+new URL(t).host+"/ws");r.onopen=e=>{console.log("connected: ",e.type);r.send("Websocket client connected!")};r.onmessage=async r=>{if(r.data!="BUILD_UPDATED")return;try{this.tabs[e].content.tokenScript=await this.app.loadTokenscript("url",t+"/tokenscript.tsml")}catch(e){console.error(e);alert("Failed to reload TokenScript changes")}}}catch(e){console.error(e)}}processUrlLoad(){console.log("loading from URL: "+document.location.hash);const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("emulator")){console.log("Emulator mode enabled!");let e=t.get("emulator");if(e){e=new URL(e).origin;console.log("Using remote host for tokenscript dev server: "+e)}else{e=document.location.origin}this.openTokenScriptTab("url",e+"/tokenscript.tsml",null,e);return true}else if(t.has("tokenscriptUrl")){this.openTokenScriptTab("url",t.get("tokenscriptUrl"));return true}else if(t.has("chain")&&t.has("contract")){const e=t.get("chain")+"-"+t.get("contract");this.openTokenScriptTab("resolve",e);return true}return false}componentDidLoad(){this.processUrlLoad()}render(){return[h("div",{id:"tab-header"},h("tab-header-item",{id:"start-tab-header",class:"active",tabId:"start-tab",tabView:this,tabTitle:"Start",closable:false})),h("div",{id:"tab-content"},h("start-tab",{id:"start-tab",tabId:"start-tab",class:"active",tabView:this}))]}get host(){return getElement(this)}};TabbedViewer.style=tabbedViewerCss;const tokenButtonCss=".token-button{width:300px;height:96px;display:flex;justify-content:left;align-items:center;margin:10px;border:1px #000 solid;border-radius:5px;overflow:hidden}.token-button.disabled{opacity:0.8}.token-details{padding:10px}h5{margin:5px 0}token-icon{width:100px;height:100px}";const TokenButton=class{constructor(e){registerInstance(this,e);this.token=undefined;this.enabled=undefined;this.buttonTitle=undefined;this.clickHandler=undefined}componentWillLoad(){}render(){return h("div",{class:"token-button"+(this.enabled?"":" disabled"),title:this.buttonTitle,onClick:this.enabled?()=>this.clickHandler(this.token):null,style:{cursor:this.enabled?"pointer":"not-allowed"}},h("token-icon",{src:this.token.image,imageTitle:this.token.name}),h("div",{class:"token-details"},h("h5",null,this.token.name),"tokenId"in this.token&&this.token.tokenId?h("span",{title:this.token.tokenId.toString()},"#",this.token.tokenId):""))}};TokenButton.style=tokenButtonCss;const tokenIconCss=':host{display:flex;align-items:center;justify-content:center;position:relative;height:auto;overflow:hidden}img{width:100%}div{display:flex;position:relative;overflow:hidden;width:100%;aspect-ratio:1 / 1;flex-direction:column;justify-content:center}.shimmer{display:inline-block;background-color:#dddbdd;height:100%;width:100%}.shimmer:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translateX(-100%);background-image:linear-gradient(\n\t\t90deg,\n\t\trgba(255, 255, 255, 0) 0,\n\t\trgba(255, 255, 255, 0.2) 20%,\n\t\trgba(255, 255, 255, 0.5) 60%,\n\t\trgba(255, 255, 255, 0)\n\t);animation:shimmer 2s infinite;content:""}@keyframes shimmer{100%{transform:translateX(100%)}}';const TokenIcon=class{constructor(e){registerInstance(this,e);this.src=undefined;this.imageTitle=undefined;this.image=undefined;this.loaded=false}connectedCallback(){this.loadImage()}loadImage(){let e=this.src;let t;if(e&&e!=="undefined"){t=h("img",{alt:this.imageTitle,src:e,onLoad:()=>{this.loaded=true},onError:e=>{this.image=this.createAvatar();this.loaded=true}})}else{t=this.createAvatar();this.loaded=true}this.image=t}createAvatar(){var e;const t=(e=this.imageTitle)!==null&&e!==void 0?e:"Unknown Token";return h("img",{alt:t,src:this.generateAvatar(t)})}generateAvatar(e){const t=document.createElement("canvas");const r=t.getContext("2d");t.width=300;t.height=300;if(!r)return"";r.fillStyle=this.getRandomBackgroundColor();r.fillRect(0,0,t.width,t.height);r.font="bold 150px 'Arial', sans-serif";r.fillStyle="#fff";r.textAlign="center";r.textBaseline="middle";let n=e.split(" ");let i="";for(let e=0;i.length<2&&e<n.length;e++){let t=n[e].split("");if(t.length)i+=t[0].toUpperCase()}r.fillText(i,t.width/2,t.height/2);return t.toDataURL("image/png")}getRandomBackgroundColor(){return"#0029a7"}render(){return h("div",{class:this.loaded?"":"shimmer",title:this.imageTitle},this.image)}static get watchers(){return{src:["loadImage"]}}};TokenIcon.style=tokenIconCss;const tokenInfoPopoverCss=".attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border:2px solid #001AFF;border-radius:5px;min-height:80px;padding:5px;overflow:hidden}.attribute-item h5{margin:2px 0 5px}.attribute-item span{display:block;overflow:hidden;text-overflow:ellipsis;font-size:14px}";const TokenInfoPopover=class{constructor(e){registerInstance(this,e);this.token=undefined;this.tsAttributes=[];this.tokenScript=undefined}async openDialog(e){this.token=e;const[t,r]=this.token.contextId.split("-");this.tokenScript.setCurrentTokenContext(t,r?parseInt(r):null);const n=[];for(const e of this.tokenScript.getAttributes()){const t=await e.getCurrentValue();if(t!==undefined)n.push({label:e.getLabel(),value:t})}this.tsAttributes=n;await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}render(){return h("popover-dialog",{ref:e=>this.dialog=e},this.token?h("div",null,h("h4",null,this.token.name),h("p",null,this.token.description!==this.token.name?this.token.description:""),"attributes"in this.token&&this.token.attributes.length?h("div",{class:"attribute-container"},this.token.attributes.map((e=>{let t=e.value;switch(e.display_type){case"date":const e=new Date(parseInt(t)*1e3);t=e.toLocaleDateString()+" "+e.toLocaleTimeString();break}return h("div",{class:"attribute-item"},h("h5",null,e.trait_type),h("span",{title:t},t))}))):"",this.tsAttributes.length?h("div",null,h("h4",null,"TokenScript Attributes"),h("div",{class:"attribute-container"},this.tsAttributes.filter((({label:e,value:t})=>e&&typeof t!=="object")).map((({label:e,value:t})=>h("div",{class:"attribute-item"},h("h5",null,e),h("span",{title:t.toString()},t.toString())))))):""):"")}};TokenInfoPopover.style=tokenInfoPopoverCss;const tokenSecurityStatusCss=".token-security-status{box-sizing:border-box;border-radius:25px;font-size:16px;width:25px;height:25px;text-align:center;cursor:pointer;display:flex;align-items:center;justify-content:center}.security-popover-icon{font-size:50px;margin:0 0 10px}";const TokenSecurityStatus=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.originId=undefined;this.securityInfo=undefined;this.statusColor=undefined;this.statusIcon=undefined}async componentWillLoad(){this.securityInfo=await this.tokenScript.getSecurityInfo().getOriginInfo(this.originId)}updateStatusState(){var e;switch((e=this.securityInfo)===null||e===void 0?void 0:e.status){case SecurityStatus$1.VALID:this.statusColor="#3bd23b";this.statusIcon="✔";break;case SecurityStatus$1.INVALID:default:this.statusColor="#ff4f4f";this.statusIcon="✗";break}}getDetailedSecurityInfo(){return(this.securityInfo.trustedKey?"Issued by: "+this.securityInfo.trustedKey.issuerName+"\n\n"+"Signer key: "+this.securityInfo.trustedKey.value:"")+(this.securityInfo.signingKey?"Signer Key: "+this.securityInfo.signingKey:"")}render(){return this.securityInfo?h(Host,null,h("div",{class:"token-security-status",style:{background:this.statusColor},title:this.securityInfo.statusText+"\n\n"+this.getDetailedSecurityInfo(),onClick:()=>this.dialog.openDialog()},this.statusIcon),h("popover-dialog",{ref:e=>this.dialog=e},h("h1",{class:"security-popover-icon",style:{color:this.statusColor}},this.statusIcon),h("strong",null,this.securityInfo.statusText),h("p",{style:{wordWrap:"break-word"},innerHTML:this.getDetailedSecurityInfo().replaceAll("\n","<br/>")}))):""}static get watchers(){return{securityInfo:["updateStatusState"]}}};TokenSecurityStatus.style=tokenSecurityStatusCss;const tokenViewerCss="@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap'); header{display:none}*{font-family:'Space Grotesk', sans-serif;color:#333}.token-viewer{max-width:650px;width:100%;margin:0 auto 90px;display:flex;flex-direction:column}.details-container{flex-grow:1}.image-container{min-height:100px}.token-viewer img{max-width:100%}.token-viewer .main-info{border-bottom:1px solid #F7F6F0}.main-info h1{font-size:16px;font-weight:700;line-height:20px;margin:16px 0 0;padding:0}.extra-info{display:flex;flex-direction:column;gap:16px}.main-info{padding:0 16px 16px;display:flex;flex-direction:column;gap:8px}.main-info .collection-details{display:flex;align-items:center;gap:8px}.main-info .owner-count{color:#3D45FB;font-size:12px;font-weight:700;line-height:14px;letter-spacing:0.24px}.collection-details h4{font-size:14px;margin:0;font-weight:600;line-height:20px;flex-grow:1}.collection-details span{font-size:12px;font-weight:600;line-height:20px}.extra-info{padding:8px 16px 16px}.extra-info p{margin:0 0 16px}.attribute-container{display:grid;grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));grid-gap:10px}.attribute-item{border-radius:8px;border:1px solid #8D98F8;min-height:64px;padding:6px 4px;overflow:hidden}.attribute-item h5{font-size:12px;font-weight:500;line-height:16px;margin:0}.attribute-item span{font-size:12px;font-weight:400;line-height:16px;word-break:break-word}.jid-btn{display:flex;height:44px;padding:14px 25px;justify-content:center;align-items:center;border-radius:16px;gap:10px;flex:1 0 0;border:1px solid #333 !important;background:#FFF;font-size:14px;font-weight:700;letter-spacing:0.28px;color:#333;cursor:pointer}.jid-btn:disabled{border:1px solid rgba(32, 31, 34, 0.40);background:rgba(32, 31, 34, 0.20);color:#201F2266}.popover-container .close-btn{top:10px !important;color:#000 !important;width:24px;height:24px;font-size:14px;display:flex;align-items:center;justify-content:center;border:1px solid #000;border-radius:25px;z-index:50;text-transform:uppercase}.popover-container .close-btn:hover{color:#2a2a2a !important;border-color:#2a2a2a}.popover-inner{margin-top:20px !important}.popover-container{max-height:calc(100dvh - 50px) !important}.card-container{height:calc(100dvh - 50px) !important}action-bar{position:fixed;width:100%;left:0;bottom:0;background:#fff}";const TokenViewer=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.app=undefined;this.tokenDetails=undefined;this.tokenScript=undefined;this.cardButtons=undefined;this.actionsEnabled=true}async componentDidLoad(){try{const e=new URLSearchParams(document.location.search.substring(1));const t=new URLSearchParams(document.location.hash.substring(1));for(const[r,n]of t.entries()){e.set(r,n)}this.urlRequest=e;await this.processUrlLoad()}catch(e){console.error(e);this.showToast.emit({type:"error",title:"Failed to load token details",description:e.message})}}async processUrlLoad(){const e=document.location.search.substring(1);if(!e)return false;const t=new URLSearchParams(e);if(t.has("chain")&&t.has("contract")&&t.has("tokenId")){if(t.get("actionsEnabled")==="false")this.actionsEnabled=false;this.app.showTsLoader();this.tokenDetails=await getSingleTokenMetadata(parseInt(t.get("chain")),t.get("contract"),t.get("tokenId"));console.log("Token meta loaded!",this.tokenDetails);this.app.hideTsLoader();this.loadTokenScript();return true}throw new Error("Could not locate token details using the values provided in the URL")}async loadTokenScript(){try{const e=parseInt(this.urlRequest.get("chain"));const t=this.urlRequest.get("contract");const r=e+"-"+t;const n=await this.app.loadTokenscript("resolve",r);const i=n.getTokenOriginData();let s;for(const r of i){if(r.chainId===e&&t.toLowerCase()===t.toLowerCase()){s=r;r.tokenDetails=[this.tokenDetails];break}}if(s){n.setTokenMetadata(i);class e{getTokens(e,t){return Promise.resolve(i)}}this.app.discoveryAdapter=new e;n.setCurrentTokenContext(s.originId,0);this.tokenScript=n}}catch(e){console.warn(e.message)}}render(){var e,t;return h(Host,null,h("div",{class:"token-viewer"},this.tokenDetails?h("div",null,h("div",{class:"details-container"},h("div",{class:"image-container"},h("token-icon",{style:{minHeight:"100px;"},src:this.tokenDetails.image,imageTitle:this.tokenDetails.name})),h("div",{class:"info-container"},h("div",{class:"main-info"},h("h1",null,this.tokenDetails.name),h("div",{class:"owner-count"},h("span",{style:{color:"#3D45FB"}},this.tokenDetails.collectionDetails.tokenType==="erc1155"?"balance: "+this.tokenDetails.balance:"#"+this.tokenDetails.tokenId)),h("div",{class:"collection-details"},h("token-icon",{style:{width:"24px",borderRadius:"4px"},src:this.tokenDetails.collectionDetails.image,imageTitle:this.tokenDetails.collectionDetails.name}),h("h4",null,(e=this.tokenDetails.collectionDetails.name)!==null&&e!==void 0?e:this.tokenDetails.name),h("span",null,this.tokenDetails.collectionDetails.tokenType.toUpperCase()))),h("div",{class:"extra-info"},h("p",null,this.tokenDetails.description),h("div",{class:"attribute-container"},((t=this.tokenDetails.attributes)===null||t===void 0?void 0:t.length)?this.tokenDetails.attributes.map((e=>h("div",{class:"attribute-item",title:e.trait_type+": "+e.value},h("h5",null,e.trait_type),h("span",null,e.value)))):"")))),h("action-bar",{engine:this.app.tsEngine,tokenDetails:this.tokenDetails,tokenScript:this.tokenScript,actionsEnabled:this.actionsEnabled})):""),h("card-popover",{tokenScript:this.tokenScript}))}};TokenViewer.style=tokenViewerCss;const tokensGridCss=".tokens-grid{display:flex;flex-wrap:wrap;padding:15px;margin:0 auto;position:relative}@media (max-width: 768px) and (min-width: 571px){.tokens-grid{justify-content:space-evenly}.tokens-grid-item{width:250px !important}}@media (max-width: 570px){.tokens-grid{justify-content:center}.tokens-grid-item{width:100% !important}}";const TokensGrid=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.tokenScript=undefined;this.currentTokensFlat=undefined;this.loading=true}async componentDidLoad(){await this.initTokenScript()}async initTokenScript(){this.tokenScript.on("TOKENS_UPDATED",(e=>{this.populateTokens(e.tokens)}),"grid");this.tokenScript.on("TOKENS_LOADING",(()=>{this.loading=true;this.currentTokensFlat=null;console.log("Tokens loading")}),"grid");setTimeout((async()=>{await this.populateTokens(await this.tokenScript.getTokenMetadata());this.invokeUrlAction()}),500)}async populateTokens(e){this.loading=false;this.currentTokens=e;this.currentTokensFlat=getTokensFlat(this.currentTokens)}async invokeUrlAction(){const e=new URLSearchParams(document.location.hash.substring(1));if(!e.has("card"))return;const t=e.get("card");const r=findCardByUrlParam(t,this.tokenScript);if(!r){this.showToast.emit({type:"error",title:"Card not found",description:"The card '"+t+"' cannot be found."});return}for(let e of this.currentTokensFlat){const t={originId:e.originId,chainId:"chainId"in e?e.chainId:e.collectionDetails.chainId,selectedTokenId:"tokenId"in e?e.tokenId:undefined};if(r.card.isAvailableForOrigin(e.originId)&&await r.card.isEnabledOrReason(t)===true){this.showCard(r.card,e,r.index);return}}this.showToast.emit({type:"error",title:"No supported tokens",description:"None of your tokens support the "+t+" action."})}async showCard(e,t,r){var n;const i=t.contextId.split("-");this.tokenScript.setCurrentTokenContext(i[0],i.length>1?parseInt(i[1]):null);window.scrollTo(0,0);try{await this.tokenScript.showOrExecuteTokenCard(e,(async e=>{if(e.status==="started")this.showLoader.emit();if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}if(e.view)history.replaceState(undefined,undefined,"#card="+((n=e.name)!==null&&n!==void 0?n:r))}render(){var e;return h(Host,null,h("div",{class:"tokens-grid"},h("loading-spinner",{color:"#1A42FF",size:"small",style:{display:this.loading?"block":"none"}}),((e=this.currentTokensFlat)===null||e===void 0?void 0:e.length)?this.currentTokensFlat.map((e=>h("tokens-grid-item",{key:e.contextId,tokenScript:this.tokenScript,token:e,showCard:this.showCard.bind(this)}))):!this.loading?h("h3",null,Web3WalletProvider.isWalletConnected()?"You don't have any tokens associated with this TokenScript":"Connect wallet to load tokens"):""),h("token-info-popover",{id:"token-info-popover",tokenScript:this.tokenScript}))}static get watchers(){return{tokenScript:["initTokenScript"]}}};TokensGrid.style=tokensGridCss;const tokensGridItemCss=".tokens-grid-item{margin:10px;border-radius:10px;box-shadow:0 4px 16px rgba(0, 0, 0, 0.08);width:300px;max-width:350px;overflow:hidden;background:#FFFEFE;position:relative}.tokens-grid-item img{width:100%}.tg-item-details{padding:10px;overflow:hidden;position:relative}.tokens-grid-item h5{margin:10px 0 0 0;font-size:18px}.tokens-grid-item span{font-size:14px;margin-bottom:5px;display:inline-block}.tokens-grid-item span,.tokens-grid-item h5{overflow:hidden;max-width:100%;text-overflow:ellipsis ellipsis}.actions{text-align:center}.actions>button{display:block;width:100%;margin:8px 0}.more-actions-btn{background:none !important;border:none !important;font-weight:bold;color:rgb(84, 84, 84)}.info-btn{position:absolute;right:0;top:0;width:25px;min-width:unset !important;font-weight:bold;height:25px !important;margin:18px 10px;border-radius:25px !important;border:none !important;padding:0}.info-btn img:hover{filter:opacity(80%)}token-security-status{position:absolute;top:0;left:0;margin:10px}.delete-attest-btn{position:absolute;top:0;right:0;margin:10px;background:none;border:none;font-weight:bold;font-size:20px;cursor:pointer}.tokens-grid-item>token-icon{background:#0000000a}";const TokensGridItem=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined;this.token=undefined;this.showCard=undefined;this.cardButtons=undefined;this.overflowCardButtons=undefined}async componentDidLoad(){await this.loadCardButtons()}async loadCardButtons(){const e=[];const t=[];const r={originId:this.token.originId,chainId:"chainId"in this.token?this.token.chainId:this.token.collectionDetails.chainId,selectedTokenId:"tokenId"in this.token?this.token.tokenId:undefined};const n=this.tokenScript.getCards(this.token.originId);for(let[i,s]of n.entries()){let n=s.label;if(n==="Unnamed Card")n=s.type==="token"?"Token Info":s.type+" Card";try{const a=await s.isEnabledOrReason(r);if(a===false)continue;const o=h("button",{class:"btn "+getCardButtonClass(s,i),onClick:()=>this.showCard(s,this.token,i),disabled:a!==true,title:a!==true?a:n},n);if(a!==true||e.length>2){t.push(o)}else{e.push(o)}}catch(e){console.error("Failed to check if card is available",e)}}this.cardButtons=e;this.overflowCardButtons=t}showTokenInfo(e){document.getElementById("token-info-popover").openDialog(e)}async deleteAttestation(){if("collectionId"in this.token&&confirm("Are you sure you want to delete this attestation?")){await this.tokenScript.getEngine().getAttestationManager().removeAttestation(this.token.collectionId,this.token.tokenId);this.tokenScript.getTokenMetadata(true)}}render(){var e,t,r;let n;let i;if("tokenId"in this.token&&this.token.tokenId){n="#"+this.token.tokenId;i=this.token.name}else{n=this.token.name;if("decimals"in this.token)i="Balance: "+EthUtils.calculateDecimalValue(this.token.balance,this.token.decimals)}return h(Host,{class:"tokens-grid-item"},h("token-icon",{src:this.token.image,imageTitle:this.token.name}),h("div",{class:"tg-item-details"},h("h5",null,n),i?h("span",{title:i},i):"",h("button",{class:"btn btn-secondary info-btn",onClick:()=>this.showTokenInfo(this.token)},h("img",{alt:"info",src:"/assets/icon/info.svg"})),h("div",{class:"actions"},this.cardButtons?this.cardButtons:h("loading-spinner",{color:"#595959",size:"small",style:{textAlign:"center"}}),((e=this.overflowCardButtons)===null||e===void 0?void 0:e.length)?[h("button",{class:"btn more-actions-btn",onClick:()=>this.overflowDialog.openDialog()},"+ More actions"),h("action-overflow-modal",{ref:e=>this.overflowDialog=e},h("div",{class:"actions"},this.overflowCardButtons))]:"")),h("token-security-status",{tokenScript:this.tokenScript,originId:this.token.originId}),((r=(t=this.token)===null||t===void 0?void 0:t.data)===null||r===void 0?void 0:r.type)==="eas"?h("button",{class:"delete-attest-btn",title:"Delete attestation",onClick:()=>this.deleteAttestation()},"X"):"")}static get watchers(){return{tokenScript:["loadCardButtons"]}}};TokensGridItem.style=tokensGridItemCss;const tokenscriptButtonCss=".ts-button{width:250px;height:60px;display:flex;justify-content:left;align-items:center;background-color:#FFFEFE;box-shadow:0 4px 12px rgba(0, 0, 0, 0.08);border-radius:10px;overflow:hidden}@media screen and (max-width: 768px){.ts-button{width:300px}}@media screen and (max-width: 480px){.ts-button{min-width:250px;width:100%}}.ts-button.disabled{opacity:0.8}.ts-details{padding:10px;flex-grow:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.ts-details>span{font-size:12px;color:#545454}.ts-details>h5{margin:2px 0}.ts-button>token-icon{margin-left:5px;border-radius:5px;width:50px;height:50px;flex-shrink:0}.ts-button>.remove-btn{align-self:start;background:none;font-weight:bold;border:none;cursor:pointer;color:#0B0B0B}";const TokenscriptButton=class{constructor(e){registerInstance(this,e);this.tsId=undefined;this.name=undefined;this.tokenScript=undefined;this.subText=undefined;this.imageUrl=undefined;this.enabled=true;this.onRemove=undefined}async connectedCallback(){if(!this.tokenScript)return;this.subText="loading...";const e=await this.tokenScript.getTokenMetadata();this.updateTokenStatus(e);this.tokenScript.on("TOKENS_UPDATED",(e=>{this.updateTokenStatus(e.tokens)}),"ts-button");this.tokenScript.on("TOKENS_LOADING",(()=>{this.subText="loading..."}),"ts-button")}updateTokenStatus(e){const t=getTokensFlat(e);this.subText=`${t.length} Tokens`;this.enabled=t.length>0}render(){return h(Host,{class:"ts-button"+(this.enabled?"":" disabled"),title:this.name,style:{cursor:this.enabled?"pointer":"not-allowed"}},h("token-icon",{src:this.imageUrl,imageTitle:this.name}),h("div",{class:"ts-details"},h("h5",null,this.name),this.subText?h("span",null,this.subText):""),this.onRemove?h("button",{class:"remove-btn",onClick:e=>{e.stopPropagation();this.onRemove(this.tsId)}},"X"):"")}};TokenscriptButton.style=tokenscriptButtonCss;const tokenscriptGridCss=".ts-grid{display:flex;gap:10px;flex-wrap:wrap}@media (max-width: 768px){.ts-grid{justify-content:space-evenly}}";const TokenscriptGrid=class{constructor(e){registerInstance(this,e)}render(){return h(Host,{class:"ts-grid"},h("slot",null))}};TokenscriptGrid.style=tokenscriptGridCss;const transferDialogCss=".token-viewer .transfer-form{display:flex;flex-direction:column;min-height:300px}.token-viewer .transfer-form>div{flex-grow:1;margin:0 10px}.token-viewer .transfer-form>button{flex-grow:0;margin:0 10px 10px}.token-viewer .transfer-form h3{text-align:center}.token-viewer .form-field{margin-bottom:16px}.token-viewer .form-field label{font-size:12px;padding-bottom:20px;font-weight:700;color:rgba(32, 31, 34, 0.4)}.token-viewer .form-field input,.token-viewer .form-field textarea{display:block;outline:transparent solid 2px;outline-offset:2px;border:1px solid #333;border-radius:12px;padding-inline:16px;background:#F7F6F0;width:100%;height:40px}";const TransferDialog=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.showLoader=createEvent(this,"showLoader",7);this.hideLoader=createEvent(this,"hideLoader",7);this.engine=undefined;this.tokenDetails=undefined;this.recipient="";this.amount=1}async openDialog(){await this.dialog.openDialog()}async closeDialog(){await this.dialog.closeDialog()}async transferToken(){const e=await this.engine.getWalletAdapter();const t="safeTransferFrom";const r=[{name:"from",type:"address",value:await e.getCurrentWalletAddress()},{name:"to",type:"address",value:this.recipient},{name:"tokenId",type:"uint256",value:BigInt(this.tokenDetails.tokenId)}];if(this.tokenDetails.collectionDetails.tokenType==="erc1155"){r.push({name:"amount",type:"uint256",value:BigInt(this.amount)},{name:"data",type:"bytes",value:"0x00"})}this.showLoader.emit();try{await e.sendTransaction(this.tokenDetails.collectionDetails.chainId,this.tokenDetails.collectionDetails.contractAddress,t,r,[],null,true,(async e=>{if(e.status==="confirmed")this.hideLoader.emit();await showTransactionNotification(e,this.showToast)}))}catch(e){console.error(e);this.hideLoader.emit();handleTransactionError(e,this.showToast);return}this.closeDialog()}render(){return h("popover-dialog",{ref:e=>this.dialog=e,dialogStyles:{maxWidth:"400px"}},h("form",{class:"transfer-form",onSubmit:e=>{e.preventDefault();this.transferToken()}},h("div",null,h("h3",null,"Send"),h("div",{class:"form-field"},h("label",null,"Send to"),h("input",{type:"text",value:this.recipient,placeholder:"Ethereum address",onChange:e=>this.recipient=e.target.value,required:true})),this.tokenDetails.collectionDetails.tokenType==="erc1155"?h("div",{class:"form-field"},h("label",null,"Amount"),h("input",{type:"number",value:this.amount,placeholder:"Amount",onChange:e=>this.amount=parseInt(e.target.value),required:true})):""),h("button",{type:"submit",class:"jid-btn jid-transfer-btn"},"Send")))}};TransferDialog.style=transferDialogCss;const viewStepCss=".card-container{position:relative;max-width:500px;margin:50px auto;border-radius:4px}.view-loader{position:absolute;left:0;top:0;width:100%;height:calc(100% - 5px);border-radius:4px;display:flex;align-items:center;justify-content:center;background-color:rgba(87, 87, 87, 0.67)}.popup-tn{z-index:50 !important}.tokenscript-frame{background:#fff;width:100%;height:650px;border:1px solid black;border-radius:4px;box-sizing:border-box}.action-bar{height:35px}.action-btn{width:100%;height:100%}";const ViewStep=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.viewer=undefined;this.tokenScript=undefined;this.card=undefined}async componentDidLoad(){this.viewBinding=new ViewBinding(this);this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding);this.tokenScript.showOrExecuteTokenCard(this.card)}render(){return h("div",null,h("div",{class:"card-container"},h("div",{style:{position:"relative"}},h("div",{class:"view-loader",style:{display:"none"}},h("loading-spinner",null)),h("iframe",{class:"tokenscript-frame",sandbox:"allow-scripts allow-modals allow-forms allow-popups allow-popups-to-escape-sandbox"})),h("div",{class:"action-bar",style:{display:"none"}},h("button",{class:"action-btn btn btn-primary"}))))}get host(){return getElement(this)}};class ViewBinding extends AbstractViewBinding{constructor(e){super(e.host);this.viewStep=e}async confirmAction(){this.currentCard.getTransaction();this.showLoader();const e={status:"confirmed",txNumber:"0x000",txLink:"https://google.com/"};setTimeout((()=>{this.viewStep.showToast.emit({type:"info",title:"Transaction submitted",description:h("span",null,"Processing TX, please wait.. ",h("br",null),"TX Number: "+e.txNumber)});setTimeout((()=>{this.viewStep.showToast.emit({type:"success",title:"Transaction confirmed",description:h("span",null,"TX "+e.txNumber+" confirmed!",h("br",null),e.txLink?h("a",{href:e.txLink,target:"_blank"},"View On Block Scanner"):"")});this.hideLoader();setTimeout((()=>{console.log("Transaction completed!");this.viewStep.viewer.returnResultToRequester(e)}),1e3)}),3e3)}),1e3)}}ViewStep.style=viewStepCss;const viewerPopoverCss="viewer-popover{position:absolute;width:100%;height:100%;background:#fff;top:0;left:0;display:none}viewer-popover.open{display:block}viewer-popover .view-heading{flex-wrap:nowrap}viewer-popover .view-toolbar-buttons{flex-wrap:nowrap}viewer-popover .view-heading,viewer-popover .view-toolbar-buttons{display:flex;padding:10px 20px;align-items:center}viewer-popover .view-heading>h3{margin:0 0 0 10px;flex-shrink:0;font-weight:600;font-size:24px}viewer-popover .view-heading>button{min-width:30px;font-weight:600;font-size:24px;background:none}viewer-popover .meta-details{margin:0 25px}viewer-popover .meta-details p{color:#545454;font-weight:400;font-size:16px}viewer-popover .meta-details a{font-weight:500;text-decoration:none;display:flex}viewer-popover .meta-details a:hover{filter:opacity(80%)}viewer-popover .meta-details a img{margin:0 5px}";const ViewerPopover=class{constructor(e){registerInstance(this,e);this.tokenScript=undefined}async open(e){this.tokenScript=e}async close(){this.tokenScript=null}render(){var e;return this.tokenScript?h(Host,{class:this.tokenScript?" open":""},h("div",{class:"toolbar"},h("div",{class:"view-heading"},h("button",{class:"btn",onClick:()=>this.close()},"<"),h("h3",null,(e=this.tokenScript.getLabel())!==null&&e!==void 0?e:this.tokenScript.getName())),h("div",{class:"view-toolbar-buttons"},h("security-status",{tokenScript:this.tokenScript}),h("div",null,h("button",{class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>{this.tokenScript.getCards().forEach((e=>{e.getAttributes().invalidate()}));this.tokenScript.getAttributes().invalidate();this.tokenScript.getTokenMetadata(true,true)}},"↻"),h("wallet-button",null)))),h("div",{class:"meta-details"},this.tokenScript.getMetadata().description?h("p",null,this.tokenScript.getMetadata().description):"",this.tokenScript.getMetadata().aboutUrl?h("a",{href:this.tokenScript.getMetadata().aboutUrl,target:"_blank"},"Discover how it works",h("img",{alt:"about",src:"/assets/icon/question.svg"})):""),h("tokens-grid",{tokenScript:this.tokenScript}),h("card-popover",{tokenScript:this.tokenScript})):""}get host(){return getElement(this)}};ViewerPopover.style=viewerPopoverCss;const viewerTabCss=".toolbar{display:flex;padding:10px 20px 0 20px;justify-content:space-between}attribute-table{position:absolute;bottom:20px}.toast{position:absolute;z-index:200}";const ViewerTab=class{constructor(e){registerInstance(this,e);this.showToast=createEvent(this,"showToast",7);this.uuid=Date.now();this.app=undefined;this.tabId=undefined;this.tokenScript=undefined;Web3WalletProvider.registerWalletChangeListener(this.handleWalletChange.bind(this))}handleWalletChange(e){if(e){this.tokenScript.getTokenMetadata(true)}else{this.tokenScript.setTokenMetadata([])}}async loadTs(){if(!this.viewBinding){this.viewBinding=new ViewBinding$1(this.host,this.showToast)}this.viewBinding.setTokenScript(this.tokenScript);this.tokenScript.setViewBinding(this.viewBinding)}componentDidLoad(){if(this.tokenScript)this.loadTs();document.querySelector(".toast").shadowRoot.querySelector(":host > div").setAttribute("style","margin-top: 100px;")}render(){return h("div",null,h("div",{class:"toolbar"},h("security-status",{tokenScript:this.tokenScript}),h("div",null,h("button",{class:"btn",style:{marginRight:"5px",minWidth:"35px",fontSize:"16px"},onClick:()=>this.tokenScript.getTokenMetadata(true,true)},"↻"),h("wallet-button",null))),h("tokens-grid",{tokenScript:this.tokenScript}),h("card-modal",{tokenScript:this.tokenScript}))}get host(){return getElement(this)}static get watchers(){return{tokenScript:["loadTs"]}}};ViewerTab.style=viewerTabCss;const getBrowserData=()=>{const e=!!window.navigator["brave"];let t=false;let r=window.matchMedia;if(r){let e=r("(pointer:coarse)");t=e.matches}let n=window.ethereum;if(typeof window.ethereum==="undefined"){n={isMetaMask:false,isAlphaWallet:false,isTrust:false,isStatusWallet:false,isGoWallet:false,isBraveWallet:false}}const i=t&&!!n.isAlphaWallet;const s=t&&!!n.isTrust;const a=t&&!!n.isStatusWallet;const o=t&&!!n.isGoWallet;const f=t&&!!n.isTrust&&!!n.isMetaMask;const c=!!navigator.userAgent.match(/\simToken\//);const u=t&&!!n.isMetaMask&&!s&&!e;return{metaMask:u,anyMetamask:!!n.isMetaMask&&!s&&!n.isBraveWallet,alphaWallet:i,mew:f,trust:s,goWallet:o,status:a,imToken:c,brave:e}};const metaMask={imgBig:`\n\t\t<svg width="62px" version="1.1" id="Layer_1" xmlns:ev="http://www.w3.org/2001/xml-events"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 318.6 318.6"style="enable-background:new 0 0 318.6 318.6;" xml:space="preserve"><title>Metamask logo</title><style type="text/css">.st0{fill:#E2761B;stroke:#E2761B;stroke-linecap:round;stroke-linejoin:round;}.st1{fill:#E4761B;stroke:#E4761B;stroke-linecap:round;stroke-linejoin:round;}.st2{fill:#D7C1B3;stroke:#D7C1B3;stroke-linecap:round;stroke-linejoin:round;}.st3{fill:#233447;stroke:#233447;stroke-linecap:round;stroke-linejoin:round;}.st4{fill:#CD6116;stroke:#CD6116;stroke-linecap:round;stroke-linejoin:round;}.st5{fill:#E4751F;stroke:#E4751F;stroke-linecap:round;stroke-linejoin:round;}.st6{fill:#F6851B;stroke:#F6851B;stroke-linecap:round;stroke-linejoin:round;}.st7{fill:#C0AD9E;stroke:#C0AD9E;stroke-linecap:round;stroke-linejoin:round;}.st8{fill:#161616;stroke:#161616;stroke-linecap:round;stroke-linejoin:round;}.st9{fill:#763D16;stroke:#763D16;stroke-linecap:round;stroke-linejoin:round;}</style><polygon class="st0" points="274.1,35.5 174.6,109.4 193,65.8 "/><g><polygon class="st1" points="44.4,35.5 143.1,110.1 125.6,65.8 \t"/><polygon class="st1" points="238.3,206.8 211.8,247.4 268.5,263 284.8,207.7 \t"/><polygon class="st1" points="33.9,207.7 50.1,263 106.8,247.4 80.3,206.8 \t"/><polygon class="st1" points="103.6,138.2 87.8,162.1 144.1,164.6 142.1,104.1 \t"/><polygon class="st1" points="214.9,138.2 175.9,103.4 174.6,164.6 230.8,162.1 \t"/><polygon class="st1" points="106.8,247.4 140.6,230.9 111.4,208.1 \t"/><polygon class="st1" points="177.9,230.9 211.8,247.4 207.1,208.1 \t"/></g><g><polygon class="st2" points="211.8,247.4 177.9,230.9 180.6,253 180.3,262.3 \t"/><polygon class="st2" points="106.8,247.4 138.3,262.3 138.1,253 140.6,230.9 \t"/></g><polygon class="st3" points="138.8,193.5 110.6,185.2 130.5,176.1 "/><polygon class="st3" points="179.7,193.5 188,176.1 208,185.2 "/><g><polygon class="st4" points="106.8,247.4 111.6,206.8 80.3,207.7 \t"/><polygon class="st4" points="207,206.8 211.8,247.4 238.3,207.7 \t"/><polygon class="st4" points="230.8,162.1 174.6,164.6 179.8,193.5 188.1,176.1 208.1,185.2 \t"/><polygon class="st4" points="110.6,185.2 130.6,176.1 138.8,193.5 144.1,164.6 87.8,162.1 \t"/></g><g><polygon class="st5" points="87.8,162.1 111.4,208.1 110.6,185.2 \t"/><polygon class="st5" points="208.1,185.2 207.1,208.1 230.8,162.1 \t"/><polygon class="st5" points="144.1,164.6 138.8,193.5 145.4,227.6 146.9,182.7 \t"/><polygon class="st5" points="174.6,164.6 171.9,182.6 173.1,227.6 179.8,193.5 \t"/></g><polygon class="st6" points="179.8,193.5 173.1,227.6 177.9,230.9 207.1,208.1 208.1,185.2 "/><polygon class="st6" points="110.6,185.2 111.4,208.1 140.6,230.9 145.4,227.6 138.8,193.5 "/><polygon class="st7" points="180.3,262.3 180.6,253 178.1,250.8 140.4,250.8 138.1,253 138.3,262.3 106.8,247.4 117.8,256.4 140.1,271.9 178.4,271.9 200.8,256.4 211.8,247.4 "/><polygon class="st8" points="177.9,230.9 173.1,227.6 145.4,227.6 140.6,230.9 138.1,253 140.4,250.8 178.1,250.8 180.6,253 "/><g><polygon class="st9" points="278.3,114.2 286.8,73.4 274.1,35.5 177.9,106.9 214.9,138.2 267.2,153.5 278.8,140 273.8,136.4 281.8,129.1 275.6,124.3 283.6,118.2 \t"/><polygon class="st9" points="31.8,73.4 40.3,114.2 34.9,118.2 42.9,124.3 36.8,129.1 44.8,136.4 39.8,140 51.3,153.5 103.6,138.2 140.6,106.9 44.4,35.5 \t"/></g><polygon class="st6" points="267.2,153.5 214.9,138.2 230.8,162.1 207.1,208.1 238.3,207.7 284.8,207.7 "/><polygon class="st6" points="103.6,138.2 51.3,153.5 33.9,207.7 80.3,207.7 111.4,208.1 87.8,162.1 "/><polygon class="st6" points="174.6,164.6 177.9,106.9 193.1,65.8 125.6,65.8 140.6,106.9 144.1,164.6 145.3,182.8 145.4,227.6 173.1,227.6 173.3,182.8 "/></svg>\n\t`,label:"MetaMask"};const walletConnectSVG='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Wallet connect logo</title><g transform="matrix(1.7268,0,0,1.7268,159.3,155.744)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M55.953,84.792L72.263,100.335C72.263,100.335 84.86,78.281 106.774,78.436C106.774,78.436 126.648,75.152 143.824,101.06L160.354,85.616C160.354,85.616 143.436,59.639 107.409,59.615C107.409,59.615 79.188,56.141 55.953,84.792Z" style="fill:rgb(59,153,252);"/><path d="M42.568,93.225L25.838,109.259L74.827,157.509L107.434,125.302L141.274,157.461L188.677,109.672L172.91,93.916L141.771,126.195L107.369,93.403L74.398,126.501L42.568,93.225Z" style="fill:rgb(59,153,252);"/></g></g></svg>';const walletConnectV2SVG='<svg fill="none" width="62px" height="62px" viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><clipPath id="a"><path d="m0 0h400v400h-400z"/></clipPath><g clip-path="url(#a)"><circle cx="200" cy="200" fill="#141414" r="199.5" stroke="#3b4040"/><path d="m122.519 148.965c42.791-41.729 112.171-41.729 154.962 0l5.15 5.022c2.14 2.086 2.14 5.469 0 7.555l-17.617 17.18c-1.07 1.043-2.804 1.043-3.874 0l-7.087-6.911c-29.853-29.111-78.253-29.111-108.106 0l-7.59 7.401c-1.07 1.043-2.804 1.043-3.874 0l-17.617-17.18c-2.14-2.086-2.14-5.469 0-7.555zm191.397 35.529 15.679 15.29c2.14 2.086 2.14 5.469 0 7.555l-70.7 68.944c-2.139 2.087-5.608 2.087-7.748 0l-50.178-48.931c-.535-.522-1.402-.522-1.937 0l-50.178 48.931c-2.139 2.087-5.608 2.087-7.748 0l-70.7015-68.945c-2.1396-2.086-2.1396-5.469 0-7.555l15.6795-15.29c2.1396-2.087 5.6085-2.087 7.7481 0l50.1789 48.932c.535.522 1.402.522 1.937 0l50.177-48.932c2.139-2.087 5.608-2.087 7.748 0l50.179 48.932c.535.522 1.402.522 1.937 0l50.179-48.931c2.139-2.087 5.608-2.087 7.748 0z" fill="#fff"/></g></svg>';const torusSVG='<svg width="62px" height="62px" viewBox="0 0 319 319" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><title>Torus logo</title><g transform="matrix(1.9124,0,0,1.9124,159.3,159.3)"><g transform="matrix(1,0,0,1,-107.5,-107.5)"><path d="M57.267,51.007L56.757,84.626L85.505,85.297L85.565,164.593L119.635,164.873L119.472,51.399L57.267,51.007Z" style="fill:rgb(57,150,254);"/><g transform="matrix(1.06773,0,0,1.04155,-3.94432,-8.22515)"><circle cx="139.434" cy="73.102" r="16.365" style="fill:rgb(57,150,254);"/></g></g></g></svg>';const imToken={imgSmall:`\n\t\t<img src='data:image/webp;base64,UklGRmoGAABXRUJQVlA4TF0GAAAvL8ALEAmFbds2kOwC8/+Lc0RE/zPp7qD7G9wl2buwdsdCUdtITp6710v4k70DMQgj0P+Eh9AYiAgdRERgIbA4AESHA3xLCWVp29NW0i+HmpmZmYaZt8y4YlrRjfAdTM12anbMzMzMjIfjSFW2ZOf0FbwujaJOmuRAtm3a1ljPtq3M37Z/aNuKbOW2mdu2bdv2P95Lim1ry96c83yYOURyoqIyhNgOtbaylhlVVyUzfHjd1LYtNZsu85x4oP8mQEI8sFBAhQIWInAAJugRQZWBoXTgtm0k2Zlr1WJ6TbpvEIgAXovL00A2zI/kG/MmTpn3CikQlMAHfzD4kACvRN477fCHffC+xTBtkctBCZ1SaoFRgOMUqjeCu8UnwdMwzrTXQBMhaI1eCAAIAeUvmAiZ9+/J4/AejwsTSmXruehs3vfvpT6v60PwvZ4tMIBIoQWBKBD0Je/SJIwNILCGnGmFE1rhNsy5qSixwApbQq9bDULPLmZBt+uGKIeW1slJy1PReWp2Ifu1VwBxHcuhVVUZcoHM6n8RBEGTgzvlqvxLPyYh+BCKIDApKIKdXPXf6Nv4S30RnIaIgm5sEP2EcKbegU1tpjbTPmXeC+F0deDWKnyBNygRsM9aMAXDKcgp3/UC8Ye9deu2wyis8pOBISFEZEG3p/ZgTgYGr/4ikpUyf1Sw4IDJQPMXHaDRzPJYOgCzitRKggk09i1mdkGBBFEIxaCE6n8Y/acZHbFjHFbULq14AbCyWflnu1Q8iifXYm0bIzaG7Bi1Mexg3IKx5NYy/zXyrywZH+e9xfUKHP/zJh4pimY8KufBri8axtEQ5cy1qyM7l/m5DQG3/V+dfW6lIpFaMMCookEahQk0qxGOGqk5uaLAKkT9fjSKfuxHZ1Ar7SgBt30CQCMaGxvrZns3vx9Sq2ShKW3K6n67+UWFQnc8GBD7/Sz2Ydu4GEd3/gI60Fv7N2O/sa1VA7h0Y0wg46hvVL1atCjxhAU0JQujsk45/P/ywxuMwV0RsZXWdPDaiRj9DaiF64jlq7YpMb48pNO2VKaRbxBE/tvAKWJ8ddDR7Qqv7tzsoDM3MrSUmo1fXwCYW4QO6huju2NalOmfl8AoNCUPDSpLqR+7J60E8NU5bQApEg1NmZcr4N+PUsCAjqMH+6hUP52SQhnPoFHZtdMAyysCJATGCOj4gNTBq8M6CRhMoPcOokyi+Gl9kRhohFFk0BA2SIOYGgtY3RBfXFQNCJrK7oHunc+v4ONzuL+wV0MSBW2rL4oy/XArFDIh6mukKTlUQAQCBGU6axtO7DqgbePhbmoSYBy0Kb0WkURBufjHNK65Nyk7lld3lk9ufL06ahEQQFYFAyKiyKA22DU3Tu83gl9fbzQ4JIrss1GeUqMxdPXVybo6KtPJU0cjYPimVLiAaK/DCMogXjpnBMxOL8fM2g2hJtHDH794cuoQTI0XJZqWXDbMLe1/aEQAID9BRARIqIYotz5tCQBmJJeL5h744x3arqbGaU4mKPfOPoNRpFUqQlg2FEMoEMlh6mHXhN3S0hbde2Fxqwk6/6EV7udlFHZ+iwyh04e2ulcShjl9lAINNCrIG05+UwLjaQpYXNTqWvUUpSh4D5X73e3Dgn5GYSSC7tS2MfwGXiu8Rh6wYHRSrgLEOPpq9een37rRNzc2DzWP8UeoRQpEIKjoAXLoM5igf1m8se+D1NnUI1WiX1/E4/N3b8wvDaQiVVExACxoNAqzgShUGGbQemzse2ctvXRkJywrk6vhH/jy+u6VBfj5QGMaaEaFhMlhYEEDAAsqkEMlaEpJVW1Coa2jv1peazUrU40IaR8jv/D7Y30xvzGEWqAJalHwVmdEVLQ7GFCQci2IQl68ooFBQghKQK8G6iCJRJ6wqyxy4gJDlOU5USiBD07qDQeD92FgR0E+jAUtxoJVInAj+DwGlG09NboJKIa9wz74wuAA7m0FNOinhXo0pCx7KIVdtIOidmzksF/Ecfcjr4IQlMJYuFeW7xpH6EmZKvVb3C4GAKXvqXBcumtwJMcvgVEJlSDYi/AIThuBCD7kTkrFXoMtHT77Bd4wARvYW7Bq0X/2cLYVuFh/LrZx0wohCkGThnm7juC82X9QYMWygfwIbpXLuOjrdFNhFyKRGCOAi+r00zo97I8wF+UR5uKVUwAA'/>\n\t`,imgBig:`\n\t\t<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC8VBMVEUAAAAPjcELiL8JlMABabAIlMAeos4Hjb0BarAIkL4CabECarEKmsIIj74JmcIBabACarEQvc8JlMAKl8EJkcAKlMAIiL4Tu88HjL0QvtAJl8EKncMRvtADarEDarIZxNIIlsAQvc8KmsIIj74Qvc8IkL8Qv9AKlMESv9AKlsISwdINl8IVm8oBaLAQvs8BabAQvs4Qvc8KmcIIjr0RvtABabAQvs8Sv9ADa7IBa7EKncMQv88PvM8Qv9AJlMALm8MIlMARv9ASvtAKlMESv9H///8JlsAFgLgHi7wIk78Km8IEerYHjr0NrckLpcYHjb0GhboKnsMIkb4Lo8UHirwLocQDdbQMqccEfrcJmMEJmcEMqsgKnMIIkL4EfLcIlL8GiLsGh7sEfbcKoMQMqMcCb7IGibsDdrUFgrkDeLUOsssFg7kCc7MLpMUOtcwMrMgPuc0Nr8kHj74Lp8YKncMCcrMLn8QEebUJl8EOtMsOr8oDdLQBarANssoOscoOt8wBa7EPuM0GhLoBbbEGhLkJmsEEebYCbrEPu84IlMANscoDcbMOtcsPvM4CcbIFgbkLpcUKnMMOr8kLncMBaK8Qvc8CbrIBabAQvs8Pus4Pt80FhLn7/f7u+Pv4/P39/v7y+fzc7/aUzeL1+/zq9vrm9Pnj8/i/4O2o1uibz+Tg8ffX7vW53eys2OmHyd9UtNMPj76Ny+GAxt5csdI7pMqz3etks9RNr9AhnsUOh7vT6/PH5fC05O6x2emj1Oag0eWDwtxettQxpcorn8ccl8O64O2j3up5z+DP6PLD4+9Yq9AslsQZi77I6fJ0wdt8wNtdxtpnv9hnutdeutYzttAQlMHO7POL1eR3u9lDr886rs5PqM5DoMrA6PCd1+Z3yN1Dqs0eq8o2ncgklsNoxttuuNdAt9EkpsgVl8IbkcC65u+t4uyU2eZOv9ZDpswYpcczmMUlkMGD0eIsrcwSnsQWm8RvzN5AvdNLtdIfs80TqcjW71yqAAAARXRSTlMAEBZg7LYI3d2dhHHu6eS/nZx+cm1BMBjz6MScYGA9Efvv2tDEi31UQzg0IQz8z8z44s/Er6+LclH39tvYuqmMemtUS3SZNIC7AAA7fUlEQVR42uyaSYtTURCFo6IgiOCMAzjPIiqi4DwRUDAQRKT1QRZx1RA1JEjSkA4uBPOwwdgI0V/rV8O1nk9X2m1HyKlT9XR9qk/VvbmV1cG63Sd33N6/cd+RrVu2XFvOut3lbjfr1rM66Ep5KyFsNuvNhKfNp4DyxEKoxdF60qrVWqBWq32qtaQAiqHTqXVevnzZ6VCB1mfPnkk+e6EFvnhBBl6/fi35+rEETPicvgufH7fbC58X2oRwUYsgXxzki/Pz8/lgQB0Qwv78oD/f77/q96V8fPXqVf8VFXwUDodDyeE3Ke+G7wDljYXgqxaLDxcO771449jlbVeu3jtzsPJ/YP2uHfsvbXkExtmjTLHczTLk51PvdtHf8dYpPVBv1pHf+NTxRBlN0FKq/BQ+nz6J+qG/UuUnqQrT3+V36id1wAukV/Bx0Yuf9mMRXrAAcyry5+3FtrQAOVgU4YHpD5CfnEd+wce+CP9R5CcFNAD5CvmVCegPVX6aAHww/sDh89uuntpTmWbs2bB/63ukJzPUHz8aj7MMIv+ydADaZ2SdfPvWWYfJA9CeNA8Q7b2SbgC1FhXw168GAC29A152aqTJHx1AAhNdKgmkvE6J9KTVcAGCKqlNgPbWBO3FBVN/fpDn8/wT6RNJ8wDA335KV9+rOgD5zjqAVPUDNAGJ+qkDlpag4OK2A9PZBOtP7j+C8oFMiPyQ0iVg2QDegqa0gQ+CsgGkAeBGYAZA2ocOKAP5IUU+Kj8kEkR3CqSo/JAA2gFlMABgu00LWAfkCyDPcQAKIwADGADE15JAC0CbAkQqqr6VoQLxHW+ExRaATIEfFrAkXAJflm5suzdlTXD69iW0LxKM1QasCZYzMQCxgWgC5NcKpQmapVVANI8+KO4BUJpA7L9F1mBA9gBY3ANc/xfFJtCkxhQgrZruZDSBqE9azWUKLOS2B9gqgPTJAKhQhoDDm6CwB4BvNMA3IprA5IeuPqmV9CZAfmj4Mjl/5UxlSnB2+5Hnj4jnJOITQEvGHmDyd0mbBLoJeg/YGED+OlH0AArCq/JRoIhfQ36NFmlLgBfbA0V+jQ5Z9oAXTkL/Fx4g4uskIAKflQsUbwEoBQOgE2wMIH9ODEx8K32mAD2Q5KfQAuYAlKEEZAp8U/m1/OwAvgd8VfmhtwDaQ4kvS9dPnK2sOdZt2If0QOQ39UlHJqFTQNwf+TVlEzSo+vQApXgWgAYf/1ZInwFakN+idBZAd1ItwAJ4ByTRKRLQ4VPAHIAeCPm9ttUFLGwP4B8qP8lZAO0ZBRbIn1ZBNwCo2kPSYPJLxiYYR4FoAlogNsElCQMdACbHDqzt4eD+rWtzc8/nTH9CHMCawDEmdQj4FpCGQLQAMB9oEtED0QIA+T0Mrj9gCMR5kNrRr//5U2MIaPgYiE6IIWDhPlA+DSI/NqAeANQHZAtoI78S+X0LIFMDxEmAT9oCYh0cEjYE1AIAVYdA2QfCApBfCcwGJl8uXD5VWStsOOLqa0H/92oCgAKBq4/y0E2gLufBOhQkC2jCt3EUIH0NSBYAHWoBNWgmYMrD2AOlBaA2gaO4B8ZJEBpKeyCl1ATIj/hhAXzTUQAwBeAAEmAAYw8kmQLJBHwKhAkgvGTJAuJGwI4CMCzABgGQMrl+oLIG2LRza3XOYA4QLaDyS/EW0NOgHwVg5ktA2gXdAeIoYEtAsoBwACnA5NfzACRiE1CY/HYegBQ7CsJoAQoMByChIzogegAPkD0AmvwEFoD2chpA/nywmHsLxCaQ5gDy+yRwH4g5AGIJ0BaglCDyxxpAQX7fBZSTi3c3Vf4tzu3YOtdz9QnX31pAooCxugAh/r8sFaj4rr6EshlTIPQP6aEWEPpDFd+R/ml7gKkPTP+w//D/sACI9MqyAVAI1R/6QYAhoHNAMWAGLCK9sHghFHsA1wFF9f1C6JtPgdC/6P9GIvSHDvT3KQAmex+cq/w7rNu+pTpXnetVUwdQqEAswE3AWFwFgU4BdQJmQBwHrQpLhwGfAvb9zXEwrYLorgxgAkCbgNAGoCTEMgjTGkDxKfBbE2jjAj4F7JvrpXCuISaAC6B/mAD0JvA1AGoTxDpoU8BbAPoUKHaBhrYARH8LhU8BghY4fOKf7YM7t/R6vSrqV4k0ApILYAO2BhRXQeTHBcZ2I6hXgt3M1deS9gDC5SfdAlx8HwQhvi4BpBRg14Hx908LmPLaBaY+XRDiJ+3jUjidBuNKMP7+pcrHRgDwQbAYNwKcBFR11AdW0V5WQd0D/FeBuBEYEqivJwG+yQIoRf2T+KTqD5L8EgATmEykBe5W/gVOX+pVQQ8DQH9oiCnwnoL8sQhk/Nt3wS7sLvudYBZbAMWPAnESgMUmMP2ho0YbUGwL+KTHQQLGLtjxESBfvw+AjrgOLN4JQvQvHQcLp0FOA2kPyEX/nBZId4IsAvNCxE+/D/Uh8F2QKQCLPw0MoeOdu8Bv7wTBB2HhTvBLcRckJrTB+dW/HFq3f64KxAJogN5ceIBk9IAqH8gU43QpSBPEHpDkJ0C4wG/kj09LWIsr4VDe/tER+qXwT0cBSshvLlA8CuABlN/Ib6Utx0E/ChA5HzkMGvQ0mK6ESUMfApUf4ZWgdCn8LfaAsvxavuqNkCOOAnEjYD4w2bbKc2DDFpXfilgA+juiA4j3vgxCkPkymFxgmUqRHuiGBRB+J0Sgv2X0gEbcCbXcBYA3gljAp+IccBcggC8CsQRYUixiE3QLkCiqb2k/C9idMKkXAnYUIHAB2wJA/EAskXbBdCGgH4PPgXeW2gBWSnPAUhvASnSAxGRJJ8He1TwT7t4X4ktAlK+a/AREfFDwf0qcBaBcBc3eB/zh+4A3RQsgdQC4A5D0ADi2anPgzqGqAOHtI8QEwgKKi+Bz098xex+w8u8DtAX8OOjnwYnhRGU1sH6jyR9NwAigaqYhENfCUD1g9j5gdd8HID1ZPAyAm6vwa/GurdVG1REG0GMPDKj88cvQ89n7gH/zPiAuBSeOvSv+A8F2s/9GqE96TScBQqofBWbvA/7l+wCD7YLqBCdW2P5RXhjyu/iMAe2ANAVsGZy9D1iL9wEQ5QmwomMA+2+49oE4CthZkFQHQPfZ+4C1eh8AkJ5c2TGw4RDyW4QPoH0qagE9HwOz9wFr+j7AfMBwYYWuBHZUG0l1qqPnJNLvAmD2PmAa3gfQBX4lcHUl9D/eaIyqjRF//7AKAz3oDiC7wOx9wLS8D/ixCVz5e/03jxoA3Ueqfll/6AeB2fuAaXofkLDtb9/9bGw8HD0cWQtQAN9fV8Hq7H3AtL0P8E3g8l+9FVq3b9R4+BD/H9EDZe0Lq+DsfcA0vg8wHDv4F/offYj8jREF/UsuEC0wex8wre8DvrNvNikRxEAUXsjoajYq4oig4g8KMiiuBQU3gayyb+YOuUUOMDDH9VUlZan0/HSvJqFe/g7wuisv6a9Z86vR9f/CQWx/Solz4D/veTI+YI/5ANLd2F1g4lhIARjwf1EKwIJbkfEB+80HcA4Ymf+dC2R/3gaoobP/KuMD9p8PGHsWuCf/WQiCpQSgs/+8QMYHVMEHjLoPOMnuB9kFkqMQwE8ABsv4gFr4gBF3ggfwPjgVKgAmefN5NT6gHj5gtboc+P3vuhQAdDkKJDRWdt74gJr4gNXL46Dv/9OAAoChJSCVnQD2J/hufEBtfMBsCB8wIe/ReYgWfCWcEm0AxgfUxwe8D+C/yuuPyVHXFJAwQ8YH1MgHPOwcANj+oN7nZZGLQErJ+IAq+YDl45AAoI8AVj0KoBsfUCsfsGMMmAQo+55nUeJufEC9fMBOMeAjdGhkvZQANL0SMj6gZj5ghxhwBveznDqvMj6gaj5guf2/wTcqAOhSAsh+vREwPqByPuBu6xUw25+lIVBkfED1fMDlFgZo2kGBBsnxRI0X4wPq5wNmV5sZgI4VRGS6WB+MD2iBD9jIBjyFbD8GZlEJAcYHtMEHbMqBt533pQboYYAGZHxAI3zAfL3/p75TSRiUBGB8QCt8wOfaBHgefez8b/cxl/JvfEAzfMDNuhx4HGG+RyMFHj/fBIwPaIgPWHMf+DyNPpL7NMT+chw0PqAlPuDmuR8DjUiAGFGSgGZB4wPa4gO+ev8DmvoYPVrX5a1AD4PGBzTGB8wOe48APqLTJElAHgHjA1rjA/oOAkc+Zvdp+XMWND6gOT7gtecrkCeVXQCrRkHjA77ZtYOcuGIYDMAWVYVYdEFFWyqNhFBLkcqGqggWoC7oxouRsvEB3ioHmNNwXOzYmTxGnCD+/ZJwgD9KHOab0Ads3j8A9Gvh6wmgaxwB8AET+oBHOqj/Gr6Wxd/2wHgOwgdM6QMOgeg/i3/sAXsK+BUAHzCnD7g7/C/wduwA/xMvAfiAOX3A7cV7LaBfAPppG+D/DIAPmNUHbN5KwG3R3KM0e38Pav7wAbP6gDc68EZjLxb9fu78h0H4gGl9wMsNjfpcStmW2AKjEdjBB0zsA37RqGNL36qtOx9a8AET+4DHFQX0A0BnxB8vAfiAqX3AwIFXxWrrn0UfXQB8wNQ+4H5Y0NJrXAI64QPm9gF7HXpUuOgYd0BcBPABc/uAl2/kdW3xczwExgkAHzC7D3gmrxMuUfEW9NzhA2b3Aaf9EVg47oB1KwgfML0PeIoWoEXP7Pnr9PDhA+b3Ad4EfNDwW/zcjwBb4AMS+IBNbwEi/nUbAB+QwAecegvAfgTweA3qhA9I4AOaDT3y8Ef8LX34gBQ+wJqALxa8la49/lLgA1L4AJOBZ55+iRGbAD4ghQ94sB6wcKtio0TBB+TwAdYF/vD0bcaqAz4ghw+w34POPfoRvi7wAUl8wKWCcPYaTwGd8AFZfMAFfWWWyH9cBfABWXzAb7petYD9CIAPSOMDnumMRTgqtgDDB6TxAQ90xb3GKQAfkMYH3NOJsH1Rnj98QBofcEofRaRnHxM+II8PuKO/ImxjdQvAB+TxAT/pWFbx+wIfkMcHPMUGaAtHwQfk8QF/6NM+fInw4QMS+YDvdC69+haAD0jkAy7bBqiefhR8QCIfcEsSNd4C8AGZfABJrVJ9B8QxAB+QyQdQi1+X8RCAD8jkA0jEzgAvtg8+IJUPoKolUsdLAD4glQ+gGkdA7UcAfEAqH7A/AWq/BeADUvkAqhb+Kn+BD0jlA0h8B9hqQxg+IJUPoNrDr3EEwAek8gG0WP5WEhsBPiCVD6BFFkt/9IHwAal8AC1LXaRqiU+BD0jlA0iqXQL+2RD4gFQ+gJZlEbFjoEptAz4glQ+gxcpy748B+IBUPqD1ANWWvgPgA1L5AFpaeQdoK3xALh9A7QZoB4A/B+EDcvkAWrw8fp3wAbl8wCt797LqRBCEAbherl0PimudjQj9Aq6bfgtPLprkoIkgBCGgg+At0YUaNZ7gImoguMiFgGJiXFk9KTPiQnOpmQl0/TOZBzhVVPfkfHQgvHwZbxoD2ALiA/zyAdgAVH76Okh8gF8+ABsgxB5I1gHxAX75AJoA9CqA/xgQH+CXD4DLobuSESA+wC8fACFmU34cAeID/PIB4OqP92YvKD7ALx/gGiApP37EB/jlA6gBki4QH+CXD4DQJdkJXhEf4JcPgPB36CtB8QF++QAIsPTBH9UXH+CXD8AGoNC7gPgAv3wABEEQBtQBbgyID/DLB0BcfvegFhAf4JcPAFf8uPr0MiA+wC8fAAEGR8DmTUB8gF8+AFz54w+NAPEBfvmAzQQIaASID/DLBwCWHpPUX3yAXz4AXPFdQloGxAf45QNgU3z6MkB8gF8+AILfCdeNID7ALx8Af5dffIBfPoCWAHrgR3yAXz4gmQC0FxAfkL0PWC27nWl7Mjhr1ArlSuWkdFIp1OqNl+P29Ouiu1yl6QMg2CSMb/EB2fmAHtZ98vL0RP0n5UY0XSxXqfiAZALQy4D4gCx8wHDWaZ8V1U4p1aPOit0HQEChhOIDUvYBvW5/XFN7ptLh9gEQ2GQAuKf4gBR9QG8xqarD0mf2AWCwA5KEofiAlHxArxMV1OEpLXl9QLIE0BwQH5CCD6Dis2TC6wPAJiMgLr/4AG4f8KV/QzHmlNcHgAkwNukA8QGcPuDnrF1VvCnx+gCwxtrgj4gPYPMBw1FUUfxZsfoAsIHBKxkA4gN4fMDP7vhEpZIVqw8AYwO8zGYZEB/A4QNm7bJKKz1WHwDG2j+3AaH4gIN9QK9/qlLMktUHgDYmsNeN/d0D4gMO8wHDT2cq3cxYfQBYc91iD2wiPuAQH/ClXVRpp8vqA8BatwvA0AAQH7C3D5iPzlQGGbH6ADBGGzcCDDaAu8UH7OkDvvWrKpMsWM8PAKux/BYXAnoREB+wlw+YRSWVUTqs5weANlbjB6tvAoNP8QG7+4AL3YbKLn3W8wNAW4PX+uHKLz5gVx8wX9RVlpmynh8AWmuj4xYI8LKB+IDdfMC8U1XZps16fgDE5dd42evxBBAfsIsPGPbLKutMWM8PABwAeFu8jHXVFx+wvQ8YTosq+0Ss5weAdjE63gXgDDDiA7b1AfN+ReWRiPP8AJoAbhWgISA+YDsfMP9aUPkkYj0/AK7SBKCVwIgP2MYHXPhUVXklYj0/ADStAQZbwK0CR+QD3j9u3X305lWz+erto9bnJ5eOxgdcHJ2q/DJmPT8A9FW8aBuAtzkKH/C01bz14G88X2zcufnm8RH4gB8NlWfGrOcHgMb6m3gfsP6vQO4+4PHbh//6A5efNT9cy9MHfItUvhlznh9AewD3MNptBGy+PuDzzbr6fwoPW+dy8gHzflHlnDHr+QGAK0DcA+vyG5ufDzjfuk1Tf6se+JCHDxhVVe4ZsJ4fAFh+d2FoCuTkA56+rqvd8vzduYx9wJf76ggyYD0/AHTcAdrQRtDk4wPuPdxnstaa3zP0AfOPJXUMGbD+vgBcxQZYN4HRLnn4gNYDtWcKr65l5QPe1dRxZMD6+wJw1YXWALIBGfuAey/UAam/y8QH/KLuTJabiIEwrJfrcsHBruISUxRQlZoDdz8FJ/MAzoJZTeI4BIeYLZAEAhTFlrCGgoQ1hO0AYSlOtOSeyKHQ2D2SjOYfzeSe7mm15G/0r1+EUPTcqb8AJgClAK0F+s0HLFwCS92e988HrI5CMPrg1F9AHMip+OMg9ZUPeF+rgLWGVz3zAd9uQ0C66NRfQOTiAiCfqL7yAQ1Hq6oL8z75gNUjEJIWnfoLiAMkmgJQfeMDrtbBlY4se+MD1p9DWFp06i8gcrkDughg8PvHB+Dr71ATnviA5SEITJ+c+gu0p4Cc7gP7xQdMngS3mv7ugQ/YXITg9Nipv4DIlbEGdCwF+sQHvHa/qXa+5ZwPWBmD8PTVqb8AVoAyzQEq+gf6wwes+dhTH2s55gPu//cffv6l6079BURZ9gCyCFAn0Bc+YKkCPnS45ZIP2HwBQeqHU38BTAA1Begq4J8PKNTAvSgD3PEB60Et/jt0z6m/gMjJEoCKuwD/fEChDt50/r0rPmDlOASqe079BWQC4NAlwD8fUAePmnbEBzTC2vzp1Gen/gIiF5cAygDvfEAdvGrCCR9wvwLB6qdTfwFRlk1AGVcCeMnhmQ8onATPWnbAB6xCwHqwR0vGf48VHyBU+PGhFwJe+QDv8YehljUfMAUh62XbdVJPA1Z8gOoB8Mbol6kG+OQDquBf16z4gNDffxiWXhMoagTxtuIDVA+gUqBMbYBPPuAs9EP37fiANxC0jpPjoF4LWPEBIqdUxoHhx0rgkw9oDvfA+dUnlhoza2szS3dOnxiCNBpt2fABjTDIP6MeabdBelrxAbQMLOuZwB8fcLXr0vrw1Pz28wMW5sYrwNasxfkBK+Gu/4gHiX3G5F8Vfis+gCoA7Qbg7Y8PKNzsNnmv/ev8gNbUYWBqZD71+QGtYPd/NA6gLQdJNnyAoPDHXUDZHx9Qg0TdbBrPD1jiArnTqc8PuAah6zGZzlEXgMOKD9AVgIqANz5gJnnqn0s6P+Ahd/W4kvL8gPsQvK6rVWCn+bwVH0AVQGeBLz5gMrG2jl/tcn4A8/fD6XTnB2yGwv4n6F47/AM6Baz4AKoAOv6++IAqmFW50/38gMYwMFRppTo/4DSEr89kN6vtx634AKGj35YnPqA5kkB0zvRyfsAccDSV5vyAnQF8+tlVD8h3VJcAKz5gewXAyw8fUEggwI42ezs/oMoiA9KcH7AMGdBvCj7FHp9WfIAo6vCrhx8+4AoYNdrs8fyAHazl4NMU5wcEigBt09EBkt4OtOIDMAEoBSgHvPABt4bN9f9Lz/4CM8DQ6RT+AiEioH/rNrmPy0EzgBUfgFPA9gzwwgfMglFnGP4CNzmnB6TwFwjuE4B/aFFXgNiE3ooPECr+WmUffMCtCphUZfgLsPrAkRbbX2ATMqCvcQVA0QRgxQeIdvz1ROCDD7gMJl0ocPwF9h7jgCFsf4F1yIDuRboE0LDiA2QTWOxsBD3wAa+NBaCywPMXmIXeVWP7CzyFDOjdQBRFlAEUeis+QORIRUoBD3xAzQzwMf0FOHPACba/QCZWgS+jAXlJURJY8AE0BeDQcs8HmAvA4Ummv8BVDjjB9he4A+FrSL7/EcWeZMUHtJeB9JByzweYC8Ac219giNEFPuT6C0xA+HqE4acaoPsAGz5A5KgHwJvkmA+YHDUWAL6/wA3oXfNcf4Es7AN9jFCUARR0Oz5AFFEq/LQScM4HmDnAJb6/AOdn4Rmuv8A0hK/HJZUAdKkUsOMDhAp9Rx/gnA+4ZkQACnx/gRr0rgbXXyDUjwG3rwKVOvtAOz4grgDyohLglg/YGAGDqin8BaqcjQCuv8ApCF8PSlGpFKmlIA6SDR8gVOh1ASi65gPugkmvUvgLTHDocKa/wM6APweLNYrRV9Lx32PHB4hi++XXWeCYDzgPBo2l8BdgJcAdZTLSu7/ACoSv21FUkpdKAEoBKz6AmkBUPBE45gNegUlX0vgL1DgVYMt29mBP/gIZ4AHhEyZAXAQGaC1gxweIwaLS1jLAMR9gnrS/pPEXqEPvmtuhhC2AfHT3F8gCD/ZGRR8fJdoPwGHHB2ACDOrwoxzzAUaIY3gyjb/ADd4qIDYdlUuBrnxA+ES47AFVE6hECWDHB9AUoB7qKrrlAzbApJtp/AX2csjQNW04iff+rnxA8J+EAAz/zmP48UJRIzBgyQeIoqoAei3glg84AyZNpPEXmAeGWspvcD9NA3gl8wHfIXw9KkW6CShRG2jHBwiMP4n6QKd8QM1MAqXxF3jLeVtU/KkRpBKQxAdk4cfgxXxehR9vvRy04wNkDzBIOaBqgFs+wMxxNtn+AswecCz2HCXX6R1d+ICwTwVo60cpn4+o/ONQsuQD5CoAh84Ap3zABhi1kcZfgMPtT2vHUXIeTuQDMtEDvpPhx0GNgAq/JR8g8P2nDKANIZd8gLkFGErjL7AA3H2gXXLQUiCZD9gd+mfhah8Qp4B8KcKh+wArPoCmgKK8aDfAKR9QM0O7afwF5oChpvIeVqIUMPMBGWkBPmAHkFfhx4tmAls+QFaAOANUBXDKB4yZV4Ep/AUKpzlvi3r31U3an8gHZIEGuZ5XTaC8IxzqsuUDxD5KAJ0C7viAcyNg0jjLX4DEYULr5DsuB8U/kQ+4AOHrHU4AUqVIdwG2fIAYVNJzgEs+4FZCfJj+AurvOGcfkMzn9VpgfxIf8D0DPwUeifJSUSlPfQCOyI4P0BVA3UWUSz7gGRh1meUvQInAeEuHMOqUAno1kMAHNCB8Pc+TZPhpPRBZ8gGUAB3xd8kHPAGjajx/gbYYn4ZVqf7LZ6wkPuAkhK+vGPtDlAK0IRRZ8wFicB9eqCKlgEs+oAZGzTL8BagIcKaASgtDv1UCqB1M4APeB+QLaNQvFX0SFgEpKz6AEmCrBlAj6I4POAFGXWL4C8gCwDxnflZGX0eeZOYDsvBNCP4SlNfvfz6vYm/NB8gpQOUA7QcUXfIBCZDduNlfwMwHTPX8v1rYu4tKgAw/7Qgk8AFZAIL/sHcePU4EQRSeP9cSCAQajDlhCckS4eALIPwH0JyRuAKLSSZYYFhyzhktWYicg8jpwonXxTNtAz3TXpeBRrzpac7wylXV7Q/XnSUoAFgQe0FYPzAfgABgCuBRQIkP4CnQq33h8wUcH7DLBGqzNf+nJtDHB8RxBkALYMUQWGAXnB+UD0AAQOwDJAso8gHvjF97/fMF/HzACxOmxrVKhRFgN3mwvHxAFDSYuQrrl7g2YIFEwIB8AANA3GcSUOQDbuUd0zzzBfL5gL1hHeB92E7BcFqP3cMHxHELtK7GDz82kW0EBucDErEfL3aRIh8wanL0wj9fwM8H7Az7GmgaEkDFBQGbAD8fcNREoFfy8V/S5T/W4HxAMok1AEtKgCIfkItvbPfPF/DzAfM3hlwCV6BpEgGdMsAE4OMDYrgEMK/hPhZfSErAwHyAlAC2ARICinzAYZOjnZ75Avl8wOWAeRETK6JpWKJOB+DlA3bH0AKu/FKrIQJ+0MB8AEoAUwDch7Dr8QGrTI4Oe+YLFPABB0yBzlzrdl92pn8vH7DKRKCX1v4lNR4FnQblA1ACJjEFsBHQ4wMOmRwd8MwXKOADrhX0gevblclMAPblVYA8Pj7gcwy3gOZxDRmgJk0ANywFPgAlgBHAPlCRD8gtrWs88wWK+IDdeW3AyGbrvn1pv7yMAB8fEAMMaEYewH55us8CCnxAMgnq7gIU+YD8m9uHnvkCRXzA8ab/pHS/wl8V7ahTBPD6+IBrEfx/AGMuwHtIigDPg9gV+IBE3JeNh0E9PiC/Xt/wzBco5AMmbx359fF/1fPOfIHJNg24w6DY7+MDokgA5lTJRgBTgOsDBucDmAGwGAKKfEDL5KnlmS8QwAccO/AL+9cf654vgEf6AJcBPHzA7ig6gJGPpVqtEwKuE1DgA5ABWAPovyIf0MznW6Z75guE8AHbDy7vTf5bj/XOF6B4GoB8fMAGE4Pu0H8sMZ9S4AMSuI+HSQBS5ANaJldnPfMFwviA9q5VzbXGam1z25tfzBdwraCkAQ8fcDSGOwCcAUo1hAAWW0H4jqXAB7AJtP6zCijyATtMrlqe+QKhfAC2a8ePH2/75gu40yDk4wOaJgateFArSRPAVhCS60AFPiAR/6FOK6jIBxRc2ix74ZkvUMQHBM4X6FwISB3w8AExoIDQy1KpNKWGLNDpApbYIFDhA5Ie+yFFPqDoin3MM1+ggA8InS/Q3QZ4+IDnDROFXsP7b/azDRD7VfgAlgDZ8EB6fEARxt/wzBfI5wPC5wvg6cSAhw+I4achoeVTSvCfWQBiIKjwATYAnP1YinxAYYN9yzNfIJ8PCJ8v4CLgl3xALAXA3C19E+yfwiYA5uvwAewBrNgH6vEBm02B9koGoIL5gPD5Ap2DgIcPOB7DkDCrp6Wy2C+rJkEAqfABLgNY+2XX4wNumCKNds0XCOcDwucLIAfg9fEBMZCgVo0yE4AtAawBCAINPoABQEkEKPIBxfzOJms+FcwHhM8XYArw8AGXTSQ6VSqV8YjEfdEUHT4gmVQX6+XlrsUHnDWF2ul+VjScDwifLyBpwMMHHI3iDhha/cCaT/FCCO4r8QGJ+/SzEujxAbcDSMfzbr5AOB8QPl8ANcDDB+yO4ZeBRXeZALCs+VNgvzw6fEBvCcCryAecM8U65OYLhPIB4fMF8Pj4gGsxgMDEwcvWerysAewDlPiABBUAy4WAIh+wxwTolpsvEMwHhM8X8PIBUXCgogvW/zIfEf1X4QOYAeouAjT5gOUhuHvbzRcI5APC5wt4+YBtJhpdhP0sALRfvhfQ4gOYAZw0+YDTJkCH3HyBID4gfL6Anw84MmJi0Vraj8duVmK/Fh+QZL3WY+nxAQdMiHa6g0AAHxA+X8DPB2yJ4ztg0QdazxzQCQE1PgDHQHlcHlDkA8J46xXbeRYciA/obQVz+YAjEfm/DGdAPC4EKDU+IJmU0Xm6r8kH3AjMco84X2BAPoApoIgPiMl/c7JM81kInPlKfEAiH37JAZQiH3ArdNL3Hv608O/gA67EU/8tCyj+283dBkB6fEAC72k+pcgHvDeBOrCH9g+fD7gck//mZa/97g81PiCp1zN2AViQKh+wPDwCbAb4DXxADL8H6TRysyr2yyYP74T0+IAky+qZnAQYA6p8QDhx15IqMGw+4FosXwBS+8tQleZ3HQQU+YAkq1vj3UFAlQ9YZYLVkiowXD7g2CYTl25Wq/CfKnHBeUU+IJmHCJAcQPdV+YCdJlzN80gAQ+UDdi03cekEPv5V5gB6L0GgyQckdVsDJANgg1T5gId9cQ/vUAWGxwdUtsV0/BM9/TEBsApo8gFJfR78zzq3Adg1+YC5K00fWnkWETAsPuBYDJOBe3WnasUgEPsZB5p8AEqARAASABsBVT6g1V/Texjpfyh8QGVshYlOT7/bj83dBpZV+QA0gYyAjH2gKh8w1m/VezQUPuBYPN/+O+3vJAAsUaf8q/IByTwI9n/vAnT5gNumT618os8HtLdF+PE3yz5W0ypV7g4BXT4ggftZfR5e+C9JQJUPWNz/P33znC4fULkcxS9A/KS71UV0vyzv98sgTT6AGSBDFagzBJT5gOY4IMixtiIfsCW2sz+18lmaMgWI/diYAvT4ADaBUgPEf9sKKvMBY2YcWvdklhIf8CbG4i86tQjuuxBw/ivzAQncx4MQwI2QjQNlPuCcGZcaowp8wPzRMyZWrfuULlqEVe0KASxYr8sHsATAfOxyGtTmAxpmfDq9c89gfMDxbWtNvLqUpouYAHgS4GWANh+QzJn3TXXbCmLT5gPGP5V/zeZH4+cDtq+PsfP/ruvpIpsAEAHuJMBCoMwHIAAkBGh/lmnzAbfN+DWy49b08fABb7ZG878+PH/xp7AfD+SyAO1X5gNQAiicBGwboM0HgAkYRMvXj7b74gOm3toQc+rnETBFBZAHQcBKUJZXnQ9AAMzp2C93gup8wCEzoFa0Lp8L4wPab8YOxPaN36+05q2Y39sFiv/6fEAC/6kMq15X5wNuGwUtbx2+9SKPD5hwbnTV6ei+7vPoSmq1iMvGAJKAfPz1+QDbA8xhDGT2RkifD9CqxyON5qGx0e2PZnfzAe0X20fHNpxo/CveW51YaDM/V4rlGkF9PiCB+/ah6pk+H3DYKGvF8nWNvfvOnG6sXRkV4Rmo1R+ZANgGVm0YsBDo8wEIAOs/2wDs+nzAe/Nf/eheigzALvB7FUAcUMp8gJQAlwOy+hD4gHjv4/6E9i5NEQELGQJYvBHC0ucDpARAjIDMvvp8wE7zX32Q4OlCuC/iXQDPgpQyH5DMkADgIyGgzgfsieXXuP4GfVi4cObC1IWAFS8F9fkAZgCGAKXPB6AN/K9AXV+6MF26cGaaYkHfU0AVayh8ADLAjBnfjoJYlDYfcD7qe/mv7F1LixNBGOw/NyOZo4fBhIYcRcgxkYG56iEISvDqc32A4gMRnyCiomh84UFxVUREWG+6oODR6i9l2tHFB/p1JzNT3fNl71XzfdWzlUkg8ARgh9bSBAwpAToBnXwABCDw/GvkA64nLf4I76zdOwSEfLJPL6iUDzBbc7dEACiARj7gY9LiT3DBwgHstUN8YAZUj4NK+QAIIM/ZA8QG6uQDluO1/LFx7IPF/LdD+IChJftSAJ18AEcAJOB8gPCvkw94lbT4LQ5+sY7+4V4U8A8r6EWglg+YmUDCsa+QD2hbwJ9hZWIn1jr6IQL6AGK7Wj7AgH4sgEZAKR/wNmnxGzz8BP4BuABUFKcBPhHUyweYrXMTIHWbVj7gWtLilzi2ZieZncAEYLkOYMUI0gqq5QOM0I8LVaCVD/hYx3/c/UfsW53YzArECMIKwgRwECjmA8QDCP1UgFo+YHlezhoFjzI0gAlmALabAk4B4F4OA5r5AJPPHQAKqFfLB6y3jwN/gTuZzbCtKAAF/EthA9DLB8gIkE0foJIPaP8j8Bs8+5RlcABWNo8Ce7HsEFs1H2CEe1k0Amr5gB1LntVWxNG1nRlgs4kV+nkSQOUjQb18gMkFXgaK+YBp0mJD7PuSCaxbsykg9/5euXTzAYb0z12AZj7gVNJiIzzJCIwBOgG6AAwB5XyAN4FsApr5gPutD9wIZzIMAGyA7IN5bDYBxXxAtQNwa+YDnictfsJrod8VSkBOgzwKDLXzASb32Crsq+YDlvbr+nq4Lcx7TKQLiBdEA1DPB5g5+/xQzQe0Q2CjA2Av2wkJyK5YQUA/H0ABeO6V8wHtEKji5FqvJ7xDA3Pg/nddAGcB/XyAGcz5Z1HNB7RDoIqjN3H7Z70e6PdGwOJvekH9fIApc0qAGtDOB6wvyw92hsD+F71ehj2j/ztYQYh8gCnLvKwoQDkf0D4OqvAPZFg7MQf8ScDSDIbIB5icHYDYqp8PWElaCA696EoDQPH9H4X0Z0HyAaYcuAaAi9DPB+DnBFs4/lfBv9DvTECP/HuEyQfABJaDihHUzwes1+EtHv+MI6u9bg+bUwBbegDtgLWB8gEzDyCFEgiQD3jZpoOSI1+6XdJPCezEzjxC5AM4AqouQD8f0D4NEP57WBQB+GcD4AYC5QPMQBSARRmEyQecSJqN/S+6gp5TAU8CUsUMAsHyARgBUEDpu0CYfMCeZn9P4PjNburod1dlCmCR/FD5ADOYtQBIgCIIkw94cDhpLg6vpd0C5FMCNIKcAyKCcPkAjABAJJATYfIB95v71ohnl3H7YwNknz5gZ0YfGDAf4DwANICaY0MEwfIBH5v6TPje56KbFmk3pQY4BrwEQuYDRABYgpxTIFA+4FUz/zV8ISvSwjWAguxjkX+3QX3QfIAB+2wC2DkQLh/wsk5vd/xTnEsLrDSFBNAFqAAUqgAtIGw+wAyAEkDN3QqZD5g27oHQgScpUACp+ABKAPCPhYPmAzgCgJJGIGg+4GLDFHB0FexjAYVrAN4M+ikQOB8wM4Ez+qUBhM0HnG/UFLi65phnD8AfsAEUgG8BgfMBHAFSsHJ8hM0HTBukgAufUwE1UD0J0AoGzweY7/q/K3nofMDLppwFDp6rko+FDeZTfxaIkA8wQv8A4FkgeD7g1ZGkCdh/NiUc8fIhW/hnC4iRDzAjtv9vO3w+4G0Tngk+vJVWUAj9XVS5BFHyAcaxL6AZjJAPWF/SH/f8C6wU/TTFJuYNoHA+kIiTDzCD0QC7FAWwBs8HPKj5C+V9++979nGxcgrEyQeYUQn6PflllHzAjlq/P+burT6Y5yb9vAqMAVFAGisf4EzgSHwAZRAlH1Dn14fsO5f2ZVXhjwJyFoyWDzAjgPyzRMkHbJrW9J+Dh9/0+6Cf67s+ULC42o2XDzCOflwltnAfJx+A634dreDBlffj8bhP1lmFc24sjIGI+QCzezSjf8SDQKR8ANaV00ndcHK130EDGKf9Me5/OgGBVwEQMx9gRgLPf7R8APC8Zs+FX78fdzq4/4X6sbBf4Z87aj7ACWA3JUAVxMoHQAVv65QUPHyp08H93xmLBlIssE8ReBSR8wFmTj4fBsTMB2AM1Oa3RQ6ceQr+wT1EMO7TB2D9gCJ2PgAegD2ghAxQouYDUKf1+N7Y7VsdAhYABfxv2AWi5wMgAE4AoR+Img/Ax3oNvjJw7EZnDqEfRwHxgT9yHz8fYHbtEgWAf3aBqPkAkcLFJW8C+1bedzZv7mymAuACcIH/PhuAfy60APkAMyL/9AJl7HyAKw+W+scFTt2cUY+K3ecYcAtb+CcWIh9gdu3eJSZgN+h3O3o+QEQwPZYsKe6ugnXe/7hoBNkCsIV/+ViMfIDzALvZAwZuBMTPB8j14MRS5kVP3gD1oB9AkcopMHYKSEUBuIAFyQcYNAAsyIAiWIB8gGDLx+Uzg/sfP3XsY7F4oAPwLJAC+FyUfABGAMh3U4BYhHwAdTBdrvfLf+XealqbioLo+3NahQcvSLYP4+KFQHYB/8DjQZFAu3PjBzV+tH60NlYrVWyiVvAj6Eoo2IW0BHQj+g88d+b0zZUKItp6r+fOzO3+nMydSU4XhluncgjA2j8qgquAjAGAkB+OPwAdAPRLA0CA/CD8ASwb43j8gpdWtnLh/yRCjty2DfIlAP3njgfkD8AaiB4gu6AiEH8Au8BkEMfPA5fufRL6JakAhKatg+6HIdAfkj8gKebmCtDvpgARQSj+AKTUb6PwJXAN9CuoAH78UUQINgWcQw3LH5AU2gLqOSAYfwBuxZvlsBeCK2/fp3meogPkSj8lYNzrdVqbQGD+AHSAAhqQDiAtIBx/gG0FX5fC7QKLd1OhH8UkcNIkILetAsH5A5LCkY/o90E9GkFI/gCA97dBkP9AdHnzWZr3emkvJyABawFk358Dw/MHJP3CnVoCZ4PyB8wYJuPgfiG4fm8rBfvuQAIpJSBHmwBbgFwuQ/QHJAUg5HMbDMsf4EtgY/roWDi4+ORh7rgX8tEBUJV/6wHGvCJIf0Di+C8KbAI6CPRD8wcgFPPInVCGgdtvt8A8uEeIBlIQj2QLQLAFIPjTQKD+gOQH+rEJBOcPwPE0MHn3778eXBh9SQWeBvK8d2AM8IfAYP0B+gRokU0gQH+ArwBgZ/Qv/4Xg6vLd1TTLMk8BenET8N8BdgGccP0BiZI/hyPb4NkQ/QEe5uchgo21O0f+FJD9tdUMSAl9AHqoOe7cFFBDZoCQ/QEyA/QLVcEcIkx/gF6E08BkunjUGlgg+6AfmYF3QoeANIcESD8SlQjbHyBPgIpAN8FA/QGkvs5OZ2ay/uTovhx4NPzYy05k2QkkRSDdnwkR6CaYmgiU/dD9ARAA0dd1MFh/ACWA0BtXZ+P16MaxQ8fCg+keiHeRGdKMErBBgC3AHwaD9wckxaywzymwmAvYHyAwHXRmOq4TvJk+OMShcOHF+MuqsI9kRQj7gNSeBqBtwNiPwB+gHcAk0A/ZH2A9AIcvAaJT7ozvHIIILj14ex+cK/VGPgqQSpJ+Obj5qwAlEIU/ICk8YA4owvYHEJRBx+U+vk43r/y9D/6rwfpu84Q7NTI9GVKQyrEnAOF/IRSJPyDBC4AAuAmE7g9Q+uspwKWKoIsz2dkevfzDyfDa4vDp83ZTAPo1gIxFRUDYI4DUTUBFEI0/IPHId9EP3x9ACUiQ/RkqwEW38XVtvPn42u//tPfoycr6/c+gvd1G4vZaQKZB9lEQ9gagWBPI815E/gB2AFNBDP4AEM+LfQAwCQBlt+pOdl9vD5cWb/9qOLh46/HycHvt/l67hQMo/SiUAApBCdSTQIqwDsDoxeUPSHzyXcThDyD/+grwDRD2UVQBZdUty6q8UDU29nZ3PqxP360MBjdHm0vLy0ujm4Phynh7/fWX3b3VVo1mu9VstR35xj/ZP9gFbBe0LdDV2PwBWAPl1H0gFn/AfH13cLgOUARsAhUCImjglA1U4gzrGRdnWnoUbfAvRySAAP8/GwVxHRwFHeLzByTCvKEfjz9At0EIgWMABQD+SxxIAJcTANgHKmNfyUcK/4DRjy5A8lHZAlDIPVPHAG8b7JH7GP0BiXz4Z00FUfkD9gdBgPwjABSngUofgkZ1oayoAYOTAEXgghpASANApRBEBP4sWIuAEuAoEKk/AAIA/R4i8wdQA2wBngaU/rJyYwA0YPDpJ4x+oNly7HtzoE8/NUD6bQyI1x+QnNcZoF4G4vMHsAWYAtwB2AUqNwUAbAD2DmiyBZgK7B2QFAGYCnwh1NtgzP4AfwaQP2P0B6B2RACIrgtQz0Gw5CTQKCGAgxqwFkABgHN5BOQgrAUgjXyP/sj9AegA538YAiL1BwA2CKoISj4EOgheKA8MARo1Wvs9oNnkPiBRY18CYF0vRPz+gGT2/CzotzUwXn8AugA1YF8HVPsJ9tEFUI19WwaQZJ9wvCO1oij7Bl0D/wt/wHd2zdi6YRgGoihcpPBCyTYpkiYrqMAzCm7AJsvmiIMMvWxgAicZHuDwDgL5BQGAHsiPgJfmA2h/HgpyCuBhof2pnAK5C3AbxJtbABW7QAyBbfgAGTbWFJgjPgJeng/AG6sAFU3gAeBJkAGACuU2mDEQR0G5DUJ5L7QTHyBuPwPA6w58gAcA6tN+Pxr+9QR4oKRW/LNEC+SJEApvBaJEC+zGBwj8H3hP78c2fMBP3gvAfT8T/Od+5sB1GaBoP08EUFxb8gFixiFwXglsxQcs88+LAd4MoV6b4JM198GcA9+xCXgT7MsHCNxfEbAGwFze78cHoAnWFIgQiIuB6y7IX0YA7T+PgzbnA8SG2VwJEKvAtnwAJwG3gdT1SyBaAIUqwQeIzXMGuPVjfz7ggecaAPx/7oLF+AAxdgBbYM6v5gNq8QFikJsf22DzAbX4gNUAw6BzG2w+oBYfIGZpP57ZfEAtPoAjgGWsNmg+oBYfIGZqEHcBvM0H1OIDhP7zUxDvaD6gFh8gy3/8pgfAnKP5gFp8gKiFBm8Fmg+oxQeIqsYUmB4DzQfU4gPE7UdhCMzZfEAtPkBUDS8Uq0DzAbX4ANElyxZoPqAWH8AE8Cngms0H1OID5Aj7vUDNB9TiA0RzBrj7zQfU4gNEj2wBvNZ8QC0+QCzs13C/+YBafIC8K+QfAkyB5gNK8QEfctMjhwDUfEApPuAut0PXQ5lq8wGl+IC7vLn7mQHNB/yxa3c7iQRBGIa/ATQEDBB/2EQiMZwYoxsTExN3D9ZN9mzvYO+lDriISup2d+iuYVBB5rjre5nBC+imp4QnlA+YYLh5AtS3+AlAHxDKB6wwXYsPAfkbIfqAUD7gGi9pBqgv3wL0AaF8wAlm9eLnK0cfEMoHLDDKH//tFqAPCOUD3jCWZgfk6ANC+YALvErdWrabgD4glA+4wzytvh8D9UUfEMoHzFGl/wLbLUAfEMoHVMBA6nwIrN/pAyL5gDMAT5Ja+x/6gEg+4BnAzD//zQFAHxDIBywAjCW39jf6gEA+4ALAUjw/CegDAvmAKwC9ZvX9pg8I5AN6qBu+fwDQB8TxARNsmm2PgBR9QBwfsMCmG1Nf+LT09AFxfEAf2BkCfBPQB8TxAd+QGuruI4A+IIwPWCE3ExPdrj19QBgfsEDu1WQn+oAwPuAOuZ6JtYtPHxDGB/TgPamIikcfEMUHPKNpJCrbPUAfEMUHvKFpaWLtAUAfEMQH3GPbUK09AugDYviAFdpGYqrixwB9QAwfcI62B1MT80GAPiCED/j7gJ2mZtocAPQBIXzANXa7UbX6JfUl9AEhfEAfu1U/1NS/EFb6gAA+4GeFd72opqeAiQl9QAAf8Avve7W0AUTrmz4ggA/4gw8NTdU0HQD0AeX7gBU+dmOmfgl9QPE+oI9PDVXzY0CFPqB0HzDB58am6WWi9AGl+4BLfO50YKq2uZU+oHAfMDnFnsaqllff6APK9gEX2NfjwPIWUKEPKNoHnD1ibyNV3wL0AUX7gHPsrxqor7/SBxTsA84qHGhsaQpUM/qAgn3AJQ721EwBSh9QrA94xuGW1owB9AGl+oB/9/iimfoRQB9Qqg9Y4KuqgQ8BRh9Qpg84OAG2NCgPgvQBZfqAPo40tXz80wcU6QOucaz5d58A6AMK9AG3cxxtnNdf6QMK9AG/0aGpWnrRBxTnA07Qpd4gHwH0AaX5gEkPnVqmMcCUPqAsH3B7hY75z4L0AWX5gHN0bqop+oCSfMAJvK5jgBp9QEE+oB0Auo8BSh/wv517WW0QCKAwfMb7BVFyEQkoAZEQEnERAsmmFAqFQlehD9SHKOR1G4vQdbzOyPlf4Wxmho+ZjQ/YrvFU6d/29AFz8QHvOp6owSGP6ANm4gOWeLbmKkAfMAsfUKBFUb08fcAcfICLVp3r2ekD1PcBJtpl1c8B9AHK+4CNhZaJ6rE7fYDiPiAXaJ2oeQh9gNI+YCPQIetxDqAPUNkHmBa6Fd1/6APU9QEuOtW8B9AHqOoDCnSsMWL0AUr6gI8leikt6QNU9AFbHT2VGfQB6vmAYI3e0kL6ANV8gKmhz7ySPkApH7BAz2UGfYA6PiBYo/e0kD5AFR9gahgir6QPUMEH3F4xUHFIHyC/DzjFGK6U/wdI7gMCHYMmojt9gLw+4OYKDF1W0QfI6gPyPcbIN+gDZPQByQojJTyDPkA2HxAsBMbr6Bv0ATL5gGB5xLhZvkMfIIsPsFcWJih16ANk8AG2jqm6nK/0AdP6gOTlDVMm0vBOHzCVD/g86QKTd/Ac+oApfIC9OECSMq/6pg8Y1QfkxR5SpV0ihz5gHB9guzsNMqalkUMfMKwPsF1dzvHRpGV+VBn0Af37gCR3V2u5x/9PxBffi86h4xjGtaQPaOcDvpIksO2T6RarXSwwSL9nIElDxCQT4AAAAABJRU5ErkJggg==\n\t"></img>\n\t`,label:"ImToken"};const alphaWallet={imgBig:`\n\t\t<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024"><defs><style>.cls-1{fill:#3268ff;}.cls-2{fill:#0019ff;}</style></defs><path d="M701.4,492.41c0,31.75-25.64,57.55-57.18,57.55s-57-25.8-57-57.55,25.64-57.55,57-57.55A57.32,57.32,0,0,1,701.4,492.41Z"/><path class="cls-1" d="M770.47,246.59l-20.67,0c-.18,0-.33,0-.49,0h-3.63l-1.93,3.06c-.45.61-.87,1.27-1.3,2-2.33,3.74-5.7,9.11-9.73,15.54L731,270h0C707.75,307,665.52,374.23,662.11,379.64a114.27,114.27,0,0,1,92.36,82.85c1.22-1.91,2.5-3.82,3.68-5.74,2.17-3.62,4.61-7.25,6.92-11,9.46-14.67,99.06-156.55,120.76-191.07h0l5.06-8.06Z"/><path class="cls-2" d="M916.74,737.7c-23,27.54-49,47-82,54.79-45.37,10.72-88.45,5.8-127.2-22.32-28.08-20.44-45.22-49.14-57.75-81-.43-1-.87-2-1.3-3.34-.15-.29-.15-.59-.29-.87-3.15-8.5-8.71-23.87-14.15-40.42l-13.49,13.32v0c-36.13,36-74.8,68.88-118.85,94.53-39.47,23-82.25,38-127.63,43.63-54.59,6.81-108.45,4.63-159.16-20.3-65.11-31.89-101.69-84.21-107-157.28-4.19-56.68,10.8-109.31,36.86-158.74C185.45,382.39,243.49,320.92,317.38,275c46.39-28.85,97.24-44.79,151.82-49.43,42.78-3.62,82.68,4.2,118.4,28.41,30.25,20.58,51.14,49,66.55,81.9,4.16,9,7.9,18.17,12.1,28l2.36,5.45-6.49,10.34c.74.11,1.46.23,2.2.36v0a114.93,114.93,0,0,0-20-1.78,113.77,113.77,0,0,0-77.78,30.62c-7.31-26-15.92-51.35-29.61-74.91-9.64-16.67-21.89-31.31-39.31-40.29-22.76-11.74-46.1-9.57-69.29-2.18-32.85,10.58-58.05,32.47-79.94,58-48.4,56.4-84.84,119.89-105.58,191.66-11.24,38.7-15.28,78.42-7.21,118.57,9.22,45.24,40,72.34,83,72.2a116.8,116.8,0,0,0,43.94-8.41C399.34,709,430,685.08,458.84,658.25c33.88-31.5,62.63-67,89.26-104.38a114.13,114.13,0,0,0,181.32,14.58c7.52,19,15.32,48.14,22.69,70.81v.14c2,6.38,4,12.18,6,17.11,8.36,20.87,17.15,41.47,33.86,57l3.45,3c21.74,18.12,47.82,22.91,75.06,23.78C885.2,741,899.88,739,916.74,737.7Z"/></svg>\n\t`,label:"AlphaWallet"};const statusWallet={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?><svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><defs><style>.b{fill:none;}.c{fill:#4360df;fill-rule:evenodd;}</style></defs><path class="b" d="M0,0H150V150H0V0Z"/><path class="c" d="M75.01,11.35C39.32,11.35,10.42,40.28,10.42,76s28.91,64.65,64.59,64.65,64.56-28.93,64.56-64.65S110.67,11.35,75.01,11.35Zm-8.73,92.32c-8.25,.46-16.49-4.31-16.92-12.04-.46-7.61,5.75-12.7,15.98-13.25,9.05-.46,16.41,2.15,25.4,.06-1.09,13.07-11,24.51-24.45,25.23Zm10.89-30.51c-4.86-.57-11.06-.92-16.35,.37,1.18-14.25,11.61-26.72,25.83-27.53,8.71-.46,17.41,4.74,17.87,13.16,.86,13.45-15.72,15.92-27.35,13.99Z"/></svg>\n\t`,label:"Status Wallet"};const trustWallet={imgBig:`\n\t<svg width="65" height="64" viewBox="0 0 65 64" fill="none" xmlns="http://www.w3.org/2000/svg">\n\t<g clip-path="url(#clip0)">\n\t<path d="M32.3999 64C50.073 64 64.3999 49.6731 64.3999 32C64.3999 14.3269 50.073 0 32.3999 0C14.7268 0 0.399902 14.3269 0.399902 32C0.399902 49.6731 14.7268 64 32.3999 64Z" fill="#3375BB"/>\n\t<path d="M32.6267 14C38.9508 19.2816 46.2029 18.9559 48.275 18.9559C47.8217 48.9937 44.3683 43.0373 32.6267 51.46C20.8851 43.0373 17.4533 48.9937 17 18.9559C19.0505 18.9559 26.3026 19.2816 32.6267 14Z" stroke="white" stroke-width="4" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>\n\t</g>\n\t<defs>\n\t<clipPath id="clip0">\n\t<rect width="64" height="64" fill="white" transform="translate(0.399902)"/>\n\t</clipPath>\n\t</defs>\n\t</svg>\n\t`,label:"Trust Wallet"};const ethereumWallet={imgBig:`\n\t<svg class="svg-icon" style="width: 64px; height: 64px; vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M511.996 81.86C274.448 81.86 81.86 274.444 81.86 512s192.588 430.144 430.136 430.144c237.566 0 430.15-192.588 430.15-430.144S749.562 81.86 511.996 81.86z" fill="#EDF3FC" /><path d="M511.996 2C230.782 2 2 230.786 2 512s228.782 510 509.996 510C793.214 1022 1022 793.214 1022 512S793.214 2 511.996 2z m0 1003.662C239.792 1005.662 18.338 784.204 18.338 512S239.792 18.338 511.996 18.338c272.208 0 493.666 221.458 493.666 493.662S784.204 1005.662 511.996 1005.662z" fill="#EDF3FC" /><path d="M354.6 290.83a57.74 57.74 0 0 1-41.964-41.96l-0.884-3.526-0.88 3.526a57.754 57.754 0 0 1-41.964 41.96l-3.53 0.888 3.53 0.884a57.748 57.748 0 0 1 41.964 41.96l0.88 3.526 0.884-3.526a57.736 57.736 0 0 1 41.964-41.96l3.53-0.884-3.53-0.888zM736.15 311.786a43.428 43.428 0 0 1-31.586-31.58l-0.662-2.654-0.672 2.654a43.42 43.42 0 0 1-31.582 31.58l-2.646 0.666 2.646 0.662a43.416 43.416 0 0 1 31.582 31.586l0.672 2.646 0.662-2.646a43.428 43.428 0 0 1 31.586-31.586l2.646-0.662-2.646-0.666zM606.77 186.066a68.648 68.648 0 0 1-49.896-49.892l-1.042-4.19-1.062 4.19a68.614 68.614 0 0 1-49.882 49.892l-4.184 1.052 4.184 1.05a68.586 68.586 0 0 1 49.882 49.89l1.062 4.188 1.042-4.188a68.62 68.62 0 0 1 49.896-49.89l4.194-1.05-4.194-1.052z" fill="#5D8EF9" /><path d="M343.612 415.036c0-11.48 1.216-22.676 3.494-33.48h-36.042c-27.372 0-49.622 21.858-50.282 49.058 0.3 2.17 3.184 18.5 23.052 28.882 13.252 6.93 34.736 6.85 44.884 6.85h23.262a161.25 161.25 0 0 1-8.368-51.31zM691.51 381.558h-28.202a162.244 162.244 0 0 1 3.492 33.48 161.3 161.3 0 0 1-8.368 51.314h54.508a50.072 50.072 0 0 1 28.868 9.114v-43.61c0-27.776-22.516-50.298-50.298-50.298z" fill="#6857E5" /><path d="M505.208 253.438c-89.248 0-161.596 72.35-161.596 161.598a161.3 161.3 0 0 0 8.368 51.314h306.454a161.348 161.348 0 0 0 8.368-51.314c-0.002-89.248-72.348-161.598-161.594-161.598z" fill="#5D8EF9" /><path d="M505.208 293.74c-66.992 0-121.302 54.304-121.302 121.296a120.8 120.8 0 0 0 11.386 51.314H615.12a120.794 120.794 0 0 0 11.384-51.314c0-66.992-54.304-121.296-121.296-121.296z" fill="#8AC9F9" /><path d="M505.208 333.488l-49.746 75.89 49.746 36.672 49.742-36.664z" fill="#FFFFFF" /><path d="M505.208 458.548l-49.746-39.182 30.272 46.984h38.944l30.272-46.984z" fill="#FFFFFF" /><path d="M712.942 466.35H328.716c-10.15 0-31.632 0.08-44.884-6.85-21.316-11.14-23.084-29.13-23.084-29.13V762.02c0 27.782 22.526 50.304 50.312 50.304h401.88c27.788 0 50.3-22.522 50.3-50.304V516.642c0.002-27.782-22.512-50.292-50.298-50.292z" fill="#8C7BFD" /><path d="M627.34 585.212c-12.446 0-22.542 10.092-22.542 22.542v62.03c0 12.454 10.098 22.544 22.542 22.544h135.902v-107.116H627.34z" fill="#8AC9F9" /><path d="M648.506 616.402c-12.354 0-22.37 10.012-22.37 22.37 0 12.354 10.016 22.374 22.37 22.374 12.354 0 22.366-10.02 22.366-22.374-0.002-12.358-10.012-22.37-22.366-22.37z" fill="#FFE37B" /></svg>\n\t`,label:"Embedded Wallet"};const braveWallet={imgBig:`\n\t\t<?xml version="1.0" encoding="UTF-8"?>\n\t\t<svg width="218px" height="256px" viewBox="0 0 218 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\x3c!-- Generator: Sketch 51.2 (57519) - http://www.bohemiancoding.com/sketch --\x3e\n\t\t\t<title>build-icons/Stable Copy 3</title>\n\t\t\t<desc>Created with Sketch.</desc>\n\t\t\t<defs>\n\t\t\t\t<linearGradient x1="0%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-1">\n\t\t\t\t\t<stop stop-color="#FF5500" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF5500" offset="40.9877232%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="58.1981215%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<linearGradient x1="2.1484375%" y1="50.7055163%" x2="100%" y2="50.7055163%" id="linearGradient-2">\n\t\t\t\t\t<stop stop-color="#FF452A" offset="0%"></stop>\n\t\t\t\t\t<stop stop-color="#FF2000" offset="100%"></stop>\n\t\t\t\t</linearGradient>\n\t\t\t\t<path d="M170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C18.4961088,29.1487047 44.6081088,26.7886026 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 C172.992109,26.7886026 199.104109,29.1487047 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387" id="path-3"></path>\n\t\t\t</defs>\n\t\t\t<g id="starting-collection" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t\t\t<g id="Build-Icons" transform="translate(-70.000000, -350.000000)">\n\t\t\t\t\t<g id="build-icons/Stable" transform="translate(50.000000, 350.000000)">\n\t\t\t\t\t\t<g id="Logo" transform="translate(20.114286, 0.000000)">\n\t\t\t\t\t\t\t<path d="M209.984109,61.2848749 L215.968109,46.5784919 C215.968109,46.5784919 208.352109,38.4082791 199.104109,29.1487047 C189.856109,19.8891302 170.272109,25.3359387 170.272109,25.3359387 L147.968109,0.00010893617 L108.800109,0.00010893617 L69.6321088,0.00010893617 L47.3281088,25.3359387 C47.3281088,25.3359387 27.7441088,19.8891302 18.4961088,29.1487047 C9.2481088,38.4082791 1.6321088,46.5784919 1.6321088,46.5784919 L7.6161088,61.2848749 L0.0001088,83.0721089 C0.0001088,83.0721089 22.3993088,168.017811 25.0241088,178.391258 C30.1921088,198.81679 33.7281088,206.714662 48.4161088,217.063598 C63.1041088,227.412534 89.7601088,245.387003 94.1121088,248.110407 C98.4641088,250.833811 103.904109,255.472858 108.800109,255.472858 C113.696109,255.472858 119.136109,250.833811 123.488109,248.110407 C127.840109,245.387003 154.496109,227.412534 169.184109,217.063598 C183.872109,206.714662 187.408109,198.81679 192.576109,178.391258 C195.200365,168.017811 217.600109,83.0721089 217.600109,83.0721089 L209.984109,61.2848749 Z" id="Head" fill="url(#linearGradient-1)"></path>\n\t\t\t\t\t\t\t<path d="M164.016109,41.4040238 C164.016109,41.4040238 192.704493,76.1274281 192.704493,83.5487047 C192.704493,90.9699813 189.095597,92.9286536 185.467117,96.7866281 C181.838637,100.644603 165.991373,117.49376 163.956269,119.657232 C161.921165,121.821249 157.684493,125.101862 160.176557,131.006747 C162.668621,136.911632 166.344973,144.425505 162.256813,152.046679 C158.168109,159.667854 151.164109,164.754628 146.676109,163.913641 C142.188109,163.072109 131.648109,157.557215 127.772109,155.038066 C123.896109,152.518917 111.611501,142.374781 111.611501,138.493386 C111.611501,134.612534 124.310093,127.643888 126.655821,126.0605 C129.002637,124.477658 139.703117,118.349454 139.922349,115.944143 C140.141037,113.538288 140.057805,112.832926 136.899885,106.889369 C133.741965,100.945266 128.054989,93.0136238 129.001549,87.7362111 C129.948109,82.459343 139.119949,79.7152409 145.665357,77.2402111 C152.209677,74.765726 164.811437,70.0918196 166.385229,69.3652153 C167.960109,68.6380664 167.553197,67.945777 162.783949,67.4931472 C158.015789,67.0405174 144.483245,65.2419813 138.382285,66.9446536 C132.281325,68.647326 121.858285,71.2378281 121.013997,72.6115132 C120.169709,73.9851983 119.424973,74.0314962 120.292109,78.7702196 C121.158701,83.508943 125.622765,106.24719 126.055789,110.285998 C126.489357,114.324807 127.336909,116.994832 122.987629,117.990509 C118.637805,118.986186 111.316109,120.715003 108.800109,120.715003 C106.284109,120.715003 98.9618688,118.986186 94.6125888,117.990509 C90.2627648,116.994832 91.1103168,114.324807 91.5438848,110.285998 C91.9774528,106.24719 96.4409728,83.508943 97.3081088,78.7702196 C98.1747008,74.0314962 97.4299648,73.9851983 96.5862208,72.6115132 C95.7419328,71.2378281 85.3183488,68.647326 79.2173888,66.9446536 C73.1164288,65.2419813 59.5844288,67.0405174 54.8157248,67.4931472 C50.0470208,67.945777 49.6401088,68.6380664 51.2144448,69.3652153 C52.7887808,70.0918196 65.3905408,74.765726 71.9348608,77.2402111 C78.4797248,79.7152409 87.6521088,82.459343 88.5986688,87.7362111 C89.5452288,93.0136238 83.8577088,100.945266 80.7003328,106.889369 C77.5424128,112.832926 77.4586368,113.538288 77.6778688,115.944143 C77.8965568,118.349454 88.5975808,124.477658 90.9438528,126.0605 C93.2901248,127.643888 105.988173,134.612534 105.988173,138.493386 C105.988173,142.374781 93.7041088,152.518917 89.8281088,155.038066 C85.9521088,157.557215 75.4121088,163.072109 70.9241088,163.913641 C66.4361088,164.754628 59.4321088,159.667854 55.3434048,152.046679 C51.2552448,144.425505 54.9315968,136.911632 57.4231168,131.006747 C59.9151808,125.101862 55.6790528,121.821249 53.6434048,119.657232 C51.6088448,117.49376 35.7610368,100.644603 32.1325568,96.7866281 C28.5040768,92.9286536 24.8957248,90.9699813 24.8957248,83.5487047 C24.8957248,76.1274281 53.5841088,41.4040238 53.5841088,41.4040238 C53.5841088,41.4040238 77.7921088,46.0338111 81.0561088,46.0338111 C84.3201088,46.0338111 91.3921088,43.3104068 97.9201088,41.1316834 C104.448109,38.95296 108.800109,38.9371643 108.800109,38.9371643 C108.800109,38.9371643 113.152109,38.95296 119.680109,41.1316834 C126.208109,43.3104068 133.280109,46.0338111 136.544109,46.0338111 C139.808109,46.0338111 164.016109,41.4040238 164.016109,41.4040238 Z M142.509504,174.227935 C144.28512,175.341263 143.202016,177.439918 141.584704,178.584837 C139.966848,179.729757 118.228064,196.584361 116.118432,198.447169 C114.008256,200.310523 110.908,203.387425 108.8,203.387425 C106.692,203.387425 103.5912,200.310523 101.481568,198.447169 C99.371392,196.584361 77.633152,179.729757 76.015296,178.584837 C74.39744,177.439918 73.31488,175.341263 75.090496,174.227935 C76.866656,173.115152 82.422528,170.306233 90.08912,166.333876 C97.754624,162.362063 107.308896,158.985042 108.8,158.985042 C110.291104,158.985042 119.844832,162.362063 127.511424,166.333876 C135.177472,170.306233 140.733344,173.115152 142.509504,174.227935 Z" id="Face" fill="#FFFFFF"></path>\n\t\t\t\t\t\t\t<mask id="mask-4" fill="white">\n\t\t\t\t\t\t\t\t<use xlink:href="#path-3"></use>\n\t\t\t\t\t\t\t</mask>\n\t\t\t\t\t\t\t<use id="Top-Head" fill="url(#linearGradient-2)" xlink:href="#path-3"></use>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t</g>\n\t\t\t\t</g>\n\t\t\t</g>\n\t\t</svg>\n\t`,label:"Brave"};const mew={imgBig:`\n\t\t<img src='data:image/webp;base64,UklGRtQGAABXRUJQVlA4TMgGAAAvP8APENVQwv7/kCP91rZx4s22bdsn27Ztx93h2LZt27Y9VZup6j3trQa9yX/U3ziD2Ol8gx1bjm1ry57s36q4zS0rrye4dk6ZEiqH0m0EVvEzAHeHyt1VgiRJctskbmCBboT8/5eekCoKAAFGtr1Fs5pxy/gFJ3+C2uqybXR7Szz7ku27NwHWv9dCgzAibAtXwmvhjfDWlbSgKDvX7XBCqjAjwKcohXpojTZoi7ykiLTYIkCYSXYoYRQfoRdmYA6Xh2ONAwn3T8YA0EB36hKHEZ4/Cho8P8xBhMXrQMMXuxxCqMBYGLcMmY4g3AsCTdyQ6ABCHqYhNJMwES6Xa2VoIiHkmyQ0CV8ADIHeSPjgFOBvC5ak67kBLBOaTViFeliZHgAMguZP4A00xmBMgMvlcs2NypyHLZq+QDGMwso0pBon/EhjV0wFffEoSD6CvTAMDPWmbatI3osQ0BnHNOGbYUIqIsciyUU3SA/sCs7xLognMRB0JS2bDAjxRgmV4BBEkP0gYBGGYs7yUUT0BhmRTAjlRgm54Dj0B5l2DWjHK6CBi+fzVtQBmZBFCEVGWcIHG0gSlcBL0BBGLPqPlQGSTBG+W4YLOXgMrvLAKhLu6fgSV6EsQrMtNjPJDfIhoBxczwBCiXGWECoMCoeoDdKJSfgQABqB852kcz7jAWxaCSdZGxAOhREh0jJVCEMkORlIOhwAtswAOoPcDG4BcDiSkDsDjMQKy2yMAkmMgQcAdAJLAvVRCMUCAPGLQbIIlnndoekGLs9sB5I1cQ2KkkluyFzODM3/DiBcVgfJl1ECNHDzNpLOWPOEkbdAshFgBOJJJuSaF40pIIly0BmNLmiFBQu36iwGyXWINs8SHhYDyV5Ac3AMAjofmQK6y5Yu5gosJ5nithxQqME4kGwPPNdFcP7w9PGOm8/KCIkRHGNj+KaMQjzXRRBGMgtpjmAJ87eAZPqpo/8cf+Pw+/pHcKqAEv417C2UUnkITrWgKDed5Eph3nJIoVHwODgAeOzgJdy/hlLKFsIvxkpLKZUXHgE3E7HcEYRg4RyuB3AD8MKeISSWUsqewmOxAjc8qpwfqlwYAjc//lp6+eSyl1AqJNYmZG2pDAjnS0wT0oT/r2AqSNx96hQSSyllT5Ew8ceEJCf8mDS7cVhlC6GUKxKkc7HwX0gzSQjHbyDZGAgoobTepbo+X2nIsd8n9oWwhVAKgkySMVhojvDoPZDkwXO/vbl8C8yhk+ZVa9q/iQ4n/5n4prKFUqvmhZNk1ApThIHdQZK9OiCghFJh9hRKKd9UtYaX9g83re/thn+ckeTAtwuPxZdSECwgyd2QYwbaQRPc4crzl6BU9hZhQcvhXWqDLYRSKxMS/lzxqn35RJJljg5+sVTi8kJNOwhMEPqvArXP9z8v7r6tUj45Oj7dcEPAurCFUFrP9mpy9UCyy4uNdym1KvP5wUfDWKHfOOGuGnTOHvnn8y2P4FSrvEsNfr8g6VXLXsKewzeVZ6u/lsr9/aYfM/5BDvs027Aqb2OEzrp84wRDoLPLzB93nL3cc3J47ODw/aYY/2VGTv4z+WvptSit2bXDhB8T6m76YWM9fmBYcPu5y67Tf+gkw7BoUFsPeLlHQJf3+yDo/4Skx2LZY9hz+KZaVe700PfVQlPyL3in/wnoft7oflADGiLaKKFKJxtdQXIU0ARk46sHr/qyt1Aq3auWLUTbh7sZf2jT+WAEZoDsCXSDjtMooVTnVfiCnFsZtwKngWS5czePxZdProR1yhYixhZepzxZ4HpUxHiQwXgSOkKpUUISJoMkOoL0w0WogXHAAJDs+3rV5Nqhxa1dwjrlX+O3dQ+MRS1cjd8xA+wOkMyFkGSUJfxtB5KXoyGobQX4daDuWu9SKjDHU3svMk0LUNsMx4FkOwh/LMOFsZdBMgRPg2RdAF8DU39MdBi4I2whglPs++HyZQcBqoPk67CB5LZE44QYdAA5HMglY3uCQwG/+Gr7YDP1N5q+L1fepYJTYQDYG8NATgMGg4zGOuMsoRV9QF6IyqC2RgfxS9B8+eT6a+lV8vCj1pVL7eGp5JGHVy17i6BURz0eKnWgtiaOBLkGQqtlpjAAP0xFZ2ATyVHAh7uGgBJK2UL4prJsIZTCJ9tvguEgORJoB2c2coQAc4US4QrbjgF+QnX8DsB7ZQSnCChhb6GLdO7wdyH4Bc5fgf2wDUUFlulCptAtTAo7wplwFCPUC2u4+8zpq203/xrBqRIT8/xrFGRgs1AjjC8KL4wRuhMsRxayhAng6Eeryy9tktYBmXHWP1XIFVqErpSIDOvfbQ=='/>\n\t`,label:"MEW"};function getWalletInfo(e){switch(e){case SupportedWalletProviders.MetaMask:return getEvmInjectedProviderInfo();case SupportedWalletProviders.WalletConnect:return{name:e,label:"WalletConnect",imgBig:walletConnectSVG};case SupportedWalletProviders.WalletConnectV2:return{name:e,label:"WalletConnect V2",imgBig:walletConnectV2SVG};case SupportedWalletProviders.Torus:return{name:e,label:"Torus",imgBig:torusSVG}}}function getEvmInjectedProviderInfo(){const e=getBrowserData();let t=ethereumWallet;if(e.brave)t=braveWallet;if(e.anyMetamask)t=metaMask;if(e.mew)t=mew;if(e.trust)t=trustWallet;if(e.status)t=statusWallet;if(e.alphaWallet)t=alphaWallet;if(e.imToken)t=imToken;return Object.assign({name:SupportedWalletProviders.MetaMask},t)}const walletButtonCss=".btn-container{position:relative;display:inline-block}.btn-dropdown{position:absolute;width:100%;display:flex;flex-direction:column;background-color:#EEEEEE;top:40px;border-radius:10px;padding:5px;z-index:10}.chevron::before{border-style:solid;border-width:2px 2px 0 0;content:'';display:inline-block;height:0.45em;left:0.15em;position:relative;top:0.15em;transform:rotate(135deg);vertical-align:top;width:0.45em;border-color:#000;margin:0 10px}.btn-dropdown button{display:block;height:34px;border:none;border-radius:10px;font-size:14px;cursor:pointer}.wallet-connect-btn{display:flex;align-items:center;justify-content:center;min-width:140px}.btn-connected{background:#EEEEEE}.btn-connected:hover,.btn-dropdown button:hover{background:linear-gradient(0deg, #CECECE, #CECECE), #DDDDDD}.status-dot{border-radius:50%;background:#3DBD00;width:8px;height:8px;margin:5px}";const WalletButton=class{constructor(e){registerInstance(this,e);this.walletInfo=undefined;this.dropdownOpened=false}async connectedCallback(){const e=await Web3WalletProvider.getWallet();await this.updateWalletConnectionState(e);Web3WalletProvider.registerWalletChangeListener(this.updateWalletConnectionState.bind(this));document.addEventListener("click",this.dismissClickHandler.bind(this))}async disconnectedCallback(){Web3WalletProvider.removeWalletChangeListener(this.updateWalletConnectionState.bind(this));document.removeEventListener("click",this.dismissClickHandler.bind(this))}dismissClickHandler(e){this.dropdownOpened=false}async updateWalletConnectionState(e){if(!e){this.walletInfo=null;return}this.walletInfo=Object.assign(Object.assign({},e),getWalletInfo(e.providerType))}formatWalletAddress(e){return e.substring(0,4)+"..."+e.substring(e.length-4)}render(){return h("div",{class:"btn-container",onClick:e=>e.stopPropagation()},h("button",{class:"btn wallet-connect-btn "+(this.walletInfo?"btn-connected":"btn-primary"),onClick:()=>{if(this.walletInfo){this.dropdownOpened=!this.dropdownOpened}else{Web3WalletProvider.getWallet(true)}}},this.walletInfo?[h("div",{class:"status-dot"}),h("div",{title:this.walletInfo.providerType+": "+this.walletInfo.address},this.formatWalletAddress(this.walletInfo.address)),h("div",{class:"chevron"})]:"Connect Wallet"),this.dropdownOpened?h("div",{class:"btn-dropdown"},h("button",{onClick:()=>{this.dropdownOpened=false;Web3WalletProvider.disconnectWallet()}},"Disconnect"),h("button",{onClick:()=>{this.dropdownOpened=false;Web3WalletProvider.switchWallet()}},"Switch")):"")}};WalletButton.style=walletButtonCss;const walletSelectorCss=".wallet-btn{width:100%;display:flex;margin:10px 0;height:60px !important;align-items:center}.wallet-name{text-align:center;font-weight:bold;font-size:14px;position:absolute;width:99%}.wallet-icon{display:flex;align-items:center;padding:10px}.wallet-icon svg,.wallet-icon img{height:40px;width:auto}";const WalletSelector=class{constructor(e){registerInstance(this,e);this.providerList=undefined}async connectWallet(){this.dialog.openDialog((()=>{this.closeCallback("Wallet connection aborted.")}));return new Promise(((e,t)=>{this.selectCallback=e;this.closeCallback=t}))}componentWillLoad(){const e=[];if(typeof window.ethereum!=="undefined"){e.push(getWalletInfo(SupportedWalletProviders.MetaMask))}e.push(getWalletInfo(SupportedWalletProviders.WalletConnectV2));e.push(getWalletInfo(SupportedWalletProviders.Torus));this.providerList=e}componentDidLoad(){}render(){return h("popover-dialog",{ref:e=>this.dialog=e},h("h4",null,"Select Wallet"),h("p",null,"You need to connect your wallet to get access to your tokens."),this.providerList.map((e=>h("button",{class:"btn wallet-btn",onClick:()=>{this.selectCallback(e.name);this.dialog.closeDialog()}},h("div",{class:"wallet-icon",innerHTML:e.imgBig}),h("div",{class:"wallet-name"},e.name)))))}};WalletSelector.style=walletSelectorCss;export{AttributeTable$1 as A,StartTab as B,CardModal as C,TokenButton as D,TokenIcon as E,TokenInfoPopover as F,TokenSecurityStatus as G,TokenViewer as H,InputField as I,TokensGrid as J,TokensGridItem as K,LoadingSpinner as L,TokenscriptButton as M,NewViewer as N,OpenseaViewer as O,PopoverDialog as P,TokenscriptGrid as Q,TransferDialog as R,SmartTokenStoreViewer$1 as S,TabbedViewer as T,ViewerPopover as U,ViewStep as V,ViewerTab as W,WalletButton as X,WalletSelector as Y,getAugmentedNamespace as a,createCommonjsModule$2 as b,commonjsGlobal as c,browser$1 as d,buffer as e,commonjsRequire$2 as f,global$1 as g,getDefaultExportFromCjs as h,ActionBar as i,ActionOverflowModal as j,AddSelector as k,AppRoot as l,AttributeTable as m,nextTick as n,CardPopover as o,CardView as p,CbToast as q,require$$3 as r,CbToastcontent as s,ConfirmStep as t,IntegrationViewer as u,SecurityStatus as v,SelectField as w,SelectStep as x,StartTab$1 as y,SmartTokenStoreViewer as z};
//# sourceMappingURL=p-bea8cd94.js.map