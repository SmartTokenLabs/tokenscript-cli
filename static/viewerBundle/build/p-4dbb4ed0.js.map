{"version":3,"names":["isHex","value","strict","test","startsWith","size","Math","ceil","length","version","getUrl","url","getVersion","BaseError","Error","constructor","shortMessage","args","super","Object","defineProperty","this","enumerable","configurable","writable","details","cause","message","docsPath","metaMessages","docsBaseUrl","docsSlug","join","walk","fn","err","SizeExceedsPaddingSizeError","targetSize","type","charAt","toUpperCase","slice","toLowerCase","pad","hexOrBytes","dir","padHex","padBytes","hex_","hex","replace","bytes","paddedBytes","Uint8Array","i","padEnd","IntegerOutOfRangeError","max","min","signed","SizeOverflowError","givenSize","maxSize","trim","data","sliceLength","toString","assertSize","size_","hexes","Array","from","_v","padStart","toHex","opts","numberToHex","stringToHex","boolToHex","bytesToHex","Number","string","value_","BigInt","maxValue","MAX_SAFE_INTEGER","minValue","suffix","undefined","encoder","TextEncoder","encode","toBytes","numberToBytes","boolToBytes","hexToBytes","stringToBytes","charCodeMap","zero","nine","A","F","a","f","charCodeToBase16","char","hexString","index","j","nibbleLeft","charCodeAt","nibbleRight","_assert","exists","hash","bool","number","isBytes","n","isSafeInteger","b","name","lengths","includes","h","create","outputLen","blockLen","instance","checkFinished","destroyed","finished","output","out","assert","_u64","add5H","add4H","add4L","add3H","add3L","add","rotlBL","rotlBH","rotlSL","rotlSH","rotr32L","rotr32H","rotrBL","rotrBH","rotrSL","rotrSH","shrSL","shrSH","toBig","split","fromBig","U32_MASK64","_32n","le","l","lst","Ah","Uint32Array","Al","_l","s","_h","Bh","Bl","Cl","low","Ch","Dl","Dh","add5L","El","Eh","u64","crypto","globalThis","exports","randomBytes","wrapXOFConstructorWithOpts","wrapConstructorWithOpts","wrapConstructor","checkOpts","Hash","concatBytes","utf8ToBytes","asyncLoop","nextTick","byteSwap32","byteSwapIfBE","byteSwap","isLE","rotl","rotr","createView","u32","u8","crypto_1","require$$0","_assert_js_1","require$$1","arr","buffer","byteOffset","byteLength","floor","DataView","word","shift","_","asciis","_0","_9","_A","_F","_a","_f","asciiToBase16","hl","al","array","ai","hi","n1","n2","async","iters","tick","cb","ts","Date","now","diff","str","arrays","sum","res","set","clone","_cloneInto","toStr","defaults","call","merged","assign","hashCons","hashC","msg","update","digest","tmp","bytesLength","getRandomValues","sha3","shake128","keccak_512","keccak_384","keccak_256","keccak_224","sha3_512","sha3_384","sha3_256","sha3_224","Keccak","keccakP","_u64_js_1","utils_js_1","require$$2","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","_0n","_1n","_2n","_7n","_256n","_0x71n","round","R","x","y","push","t","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","rounds","B","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","fill","enableXOF","pos","posOut","state","state32","keccak","len","take","finish","writeInto","bufferOut","subarray","xofInto","xof","digestInto","destroy","to","gen","genShake","dkLen","keccak256","to_","LruMap","Map","key","delete","keys","next","bytesToString","bytes_","TextDecoder","decode","stringify","replacer","space","JSON","HttpRequestError","body","headers","status","filter","Boolean","RpcRequestError","error","code","TimeoutError","unknownErrorCode","RpcError","ProviderRpcError","options","ParseRpcError","InvalidRequestRpcError","MethodNotFoundRpcError","method","InvalidParamsRpcError","InternalRpcError","InvalidInputRpcError","ResourceNotFoundRpcError","ResourceUnavailableRpcError","TransactionRejectedRpcError","MethodNotSupportedRpcError","LimitExceededRpcError","JsonRpcVersionUnsupportedError","UserRejectedRequestError","UnauthorizedProviderError","UnsupportedProviderMethodError","ProviderDisconnectedError","ChainDisconnectedError","SwitchChainError","UnknownRpcError","schedulerCache","createBatchScheduler","id","shouldSplitBatch","wait","sort","exec","scheduler","getScheduler","flush","map","then","isArray","pendingPromise","resolve","catch","reject","getBatchedArgs","get","setScheduler","item","schedule","promise","Promise","hasActiveScheduler","setTimeout","time","uid","random","substring","promiseCache","withDedupe","enabled","finally","withRetry","delay","delay_","retryCount","shouldRetry","attemptRetry","count","retry","buildRequest","request","overrideOptions","dedupe","retryDelay","requestId","err_","retryAfter","match","parseInt","createTransport","timeout","uid_","config","UrlRequiredError","withTimeout","errorInstance","signal","timeoutId","controller","AbortController","abort","clearTimeout","createIdStore","current","reset","idCache","getHttpRpcClient","params","onRequest","onResponse","fetchOptions","signal_","response","init","jsonrpc","Request","fetch","json","text","parse","ok","statusText","http","batch","onFetchRequest","onFetchResponse","chain","retryCount_","timeout_","batchSize","url_","rpcUrls","default","rpcClient","requests","result","obj","pfx","k","encodeURIComponent","stringifySearchWith","parser","stringifyValue","val","search","forEach","searchStr","encodeSearch","safeExec","bufferToHex","isStandaloneBrowser","window","matchMedia","matches","navigator","standalone","DappRequestType","DappRequestType2","internalConfig","joyidAppURL","getConfig","GenericError","_GenericError","error_description","setPrototypeOf","prototype","_TimeoutError","PopupTimeoutError","_PopupTimeoutError","popup","PopupCancelledError","_PopupCancelledError","PopupNotSupportedError","JOYID_REDIRECT","buildJoyIDURL","path","joyidURL","URL","pathname","redirectTo","redirectURL","searchParams","href","DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS","openPopup","width","height","left","screenX","innerWidth","top","screenY","innerHeight","open","runPopup","popupEventListener","popupTimer","setInterval","closed","clearInterval","removeEventListener","timeoutInSeconds","e","appURL","origin","close","addEventListener","styleId","approveId","rejectId","styleSheet","dialogInnerHtml","appendStyle","_style","document","getElementById","style","createElement","appendChild","createTextNode","head","getElementsByTagName","createBlockDialog","dialog","innerHTML","dialogBg","className","approveBtn","rejectBtn","closeDialog","removeChild","buildJoyIDAuthURL","authWithPopup","location","buildJoyIDSignMessageURL","signMessageWithPopup","JOYID_STORAGE_KEY","buildSignTxURL","buildSignTypedDataUrl","initConfig","connect","requestNetwork","localStorage","setItem","ethAddress","disconnect","removeItem","getConnectedAddress","getItem","ensureSignerAddress","signerAddress","address","connected","signMessage","isData","challenge","signature","signTypedData","typedData","dappConfig","SignMessage","signTxWithPopupBase","tx","isSend","signer","SignEvm","sendTransaction","convertHexToUtf8","CHAIN_ID_STORAGE_KEY","EthereumProvider","EventEmitter","chains","account","chainId","switchChain","emit","sig","find","c","httpProvider","network","chainIdFromStorage","getAccount","rpcURL","nativeCurrency","blockExplorerUrls","blockExplorers","getChainId","getJoyIDProviderInstance","chainConfig","WC_V2_DEFAULT_CHAINS","chainData","CHAIN_CONFIG","symbol","decimals","rpc","explorer","apiUrl","logo"],"sources":["node_modules/viem/_esm/utils/data/isHex.js","node_modules/viem/_esm/utils/data/size.js","node_modules/viem/_esm/errors/version.js","node_modules/viem/_esm/errors/utils.js","node_modules/viem/_esm/errors/base.js","node_modules/viem/_esm/errors/data.js","node_modules/viem/_esm/utils/data/pad.js","node_modules/viem/_esm/errors/encoding.js","node_modules/viem/_esm/utils/data/trim.js","node_modules/viem/_esm/utils/encoding/fromHex.js","node_modules/viem/_esm/utils/encoding/toHex.js","node_modules/viem/_esm/utils/encoding/toBytes.js","node_modules/viem/node_modules/@noble/hashes/_assert.js","node_modules/viem/node_modules/@noble/hashes/_u64.js","node_modules/viem/node_modules/@noble/hashes/crypto.js","node_modules/viem/node_modules/@noble/hashes/utils.js","node_modules/viem/node_modules/@noble/hashes/sha3.js","node_modules/viem/_esm/utils/hash/keccak256.js","node_modules/viem/_esm/utils/lru.js","node_modules/viem/_esm/utils/encoding/fromBytes.js","node_modules/viem/_esm/utils/stringify.js","node_modules/viem/_esm/errors/request.js","node_modules/viem/_esm/errors/rpc.js","node_modules/viem/_esm/utils/promise/createBatchScheduler.js","node_modules/viem/_esm/utils/wait.js","node_modules/viem/_esm/utils/uid.js","node_modules/viem/_esm/utils/promise/withDedupe.js","node_modules/viem/_esm/utils/promise/withRetry.js","node_modules/viem/_esm/utils/buildRequest.js","node_modules/viem/_esm/clients/transports/createTransport.js","node_modules/viem/_esm/errors/transport.js","node_modules/viem/_esm/utils/promise/withTimeout.js","node_modules/viem/_esm/utils/rpc/id.js","node_modules/viem/_esm/utils/rpc/http.js","node_modules/viem/_esm/clients/transports/http.js","node_modules/@joyid/common/dist/index.js","node_modules/@joyid/evm/dist/chunk-XDRWIFW4.js","node_modules/@joyid/ethereum-provider/dist/index.mjs","src/components/wallet/providers/JoyIDProvider.ts"],"sourcesContent":["export function isHex(value, { strict = true } = {}) {\n    if (!value)\n        return false;\n    if (typeof value !== 'string')\n        return false;\n    return strict ? /^0x[0-9a-fA-F]*$/.test(value) : value.startsWith('0x');\n}\n//# sourceMappingURL=isHex.js.map","import { isHex } from './isHex.js';\n/**\n * @description Retrieves the size of the value (in bytes).\n *\n * @param value The value (hex or byte array) to retrieve the size of.\n * @returns The size of the value (in bytes).\n */\nexport function size(value) {\n    if (isHex(value, { strict: false }))\n        return Math.ceil((value.length - 2) / 2);\n    return value.length;\n}\n//# sourceMappingURL=size.js.map","export const version = '2.18.0';\n//# sourceMappingURL=version.js.map","import { version } from './version.js';\nexport const getContractAddress = (address) => address;\nexport const getUrl = (url) => url;\nexport const getVersion = () => `viem@${version}`;\n//# sourceMappingURL=utils.js.map","import { getVersion } from './utils.js';\nexport class BaseError extends Error {\n    constructor(shortMessage, args = {}) {\n        super();\n        Object.defineProperty(this, \"details\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"docsPath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metaMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"shortMessage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ViemError'\n        });\n        Object.defineProperty(this, \"version\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getVersion()\n        });\n        const details = args.cause instanceof BaseError\n            ? args.cause.details\n            : args.cause?.message\n                ? args.cause.message\n                : args.details;\n        const docsPath = args.cause instanceof BaseError\n            ? args.cause.docsPath || args.docsPath\n            : args.docsPath;\n        this.message = [\n            shortMessage || 'An error occurred.',\n            '',\n            ...(args.metaMessages ? [...args.metaMessages, ''] : []),\n            ...(docsPath\n                ? [\n                    `Docs: ${args.docsBaseUrl ?? 'https://viem.sh'}${docsPath}${args.docsSlug ? `#${args.docsSlug}` : ''}`,\n                ]\n                : []),\n            ...(details ? [`Details: ${details}`] : []),\n            `Version: ${this.version}`,\n        ].join('\\n');\n        if (args.cause)\n            this.cause = args.cause;\n        this.details = details;\n        this.docsPath = docsPath;\n        this.metaMessages = args.metaMessages;\n        this.shortMessage = shortMessage;\n    }\n    walk(fn) {\n        return walk(this, fn);\n    }\n}\nfunction walk(err, fn) {\n    if (fn?.(err))\n        return err;\n    if (err && typeof err === 'object' && 'cause' in err)\n        return walk(err.cause, fn);\n    return fn ? null : err;\n}\n//# sourceMappingURL=base.js.map","import { BaseError } from './base.js';\nexport class SliceOffsetOutOfBoundsError extends BaseError {\n    constructor({ offset, position, size, }) {\n        super(`Slice ${position === 'start' ? 'starting' : 'ending'} at offset \"${offset}\" is out-of-bounds (size: ${size}).`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'SliceOffsetOutOfBoundsError'\n        });\n    }\n}\nexport class SizeExceedsPaddingSizeError extends BaseError {\n    constructor({ size, targetSize, type, }) {\n        super(`${type.charAt(0).toUpperCase()}${type\n            .slice(1)\n            .toLowerCase()} size (${size}) exceeds padding size (${targetSize}).`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'SizeExceedsPaddingSizeError'\n        });\n    }\n}\nexport class InvalidBytesLengthError extends BaseError {\n    constructor({ size, targetSize, type, }) {\n        super(`${type.charAt(0).toUpperCase()}${type\n            .slice(1)\n            .toLowerCase()} is expected to be ${targetSize} ${type} long, but is ${size} ${type} long.`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidBytesLengthError'\n        });\n    }\n}\n//# sourceMappingURL=data.js.map","import { SizeExceedsPaddingSizeError, } from '../../errors/data.js';\nexport function pad(hexOrBytes, { dir, size = 32 } = {}) {\n    if (typeof hexOrBytes === 'string')\n        return padHex(hexOrBytes, { dir, size });\n    return padBytes(hexOrBytes, { dir, size });\n}\nexport function padHex(hex_, { dir, size = 32 } = {}) {\n    if (size === null)\n        return hex_;\n    const hex = hex_.replace('0x', '');\n    if (hex.length > size * 2)\n        throw new SizeExceedsPaddingSizeError({\n            size: Math.ceil(hex.length / 2),\n            targetSize: size,\n            type: 'hex',\n        });\n    return `0x${hex[dir === 'right' ? 'padEnd' : 'padStart'](size * 2, '0')}`;\n}\nexport function padBytes(bytes, { dir, size = 32 } = {}) {\n    if (size === null)\n        return bytes;\n    if (bytes.length > size)\n        throw new SizeExceedsPaddingSizeError({\n            size: bytes.length,\n            targetSize: size,\n            type: 'bytes',\n        });\n    const paddedBytes = new Uint8Array(size);\n    for (let i = 0; i < size; i++) {\n        const padEnd = dir === 'right';\n        paddedBytes[padEnd ? i : size - i - 1] =\n            bytes[padEnd ? i : bytes.length - i - 1];\n    }\n    return paddedBytes;\n}\n//# sourceMappingURL=pad.js.map","import { BaseError } from './base.js';\nexport class IntegerOutOfRangeError extends BaseError {\n    constructor({ max, min, signed, size, value, }) {\n        super(`Number \"${value}\" is not in safe ${size ? `${size * 8}-bit ${signed ? 'signed' : 'unsigned'} ` : ''}integer range ${max ? `(${min} to ${max})` : `(above ${min})`}`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'IntegerOutOfRangeError'\n        });\n    }\n}\nexport class InvalidBytesBooleanError extends BaseError {\n    constructor(bytes) {\n        super(`Bytes value \"${bytes}\" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidBytesBooleanError'\n        });\n    }\n}\nexport class InvalidHexBooleanError extends BaseError {\n    constructor(hex) {\n        super(`Hex value \"${hex}\" is not a valid boolean. The hex value must be \"0x0\" (false) or \"0x1\" (true).`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidHexBooleanError'\n        });\n    }\n}\nexport class InvalidHexValueError extends BaseError {\n    constructor(value) {\n        super(`Hex value \"${value}\" is an odd length (${value.length}). It must be an even length.`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidHexValueError'\n        });\n    }\n}\nexport class SizeOverflowError extends BaseError {\n    constructor({ givenSize, maxSize }) {\n        super(`Size cannot exceed ${maxSize} bytes. Given size: ${givenSize} bytes.`);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'SizeOverflowError'\n        });\n    }\n}\n//# sourceMappingURL=encoding.js.map","export function trim(hexOrBytes, { dir = 'left' } = {}) {\n    let data = typeof hexOrBytes === 'string' ? hexOrBytes.replace('0x', '') : hexOrBytes;\n    let sliceLength = 0;\n    for (let i = 0; i < data.length - 1; i++) {\n        if (data[dir === 'left' ? i : data.length - i - 1].toString() === '0')\n            sliceLength++;\n        else\n            break;\n    }\n    data =\n        dir === 'left'\n            ? data.slice(sliceLength)\n            : data.slice(0, data.length - sliceLength);\n    if (typeof hexOrBytes === 'string') {\n        if (data.length === 1 && dir === 'right')\n            data = `${data}0`;\n        return `0x${data.length % 2 === 1 ? `0${data}` : data}`;\n    }\n    return data;\n}\n//# sourceMappingURL=trim.js.map","import { InvalidHexBooleanError, SizeOverflowError, } from '../../errors/encoding.js';\nimport { size as size_ } from '../data/size.js';\nimport { trim } from '../data/trim.js';\nimport { hexToBytes } from './toBytes.js';\nexport function assertSize(hexOrBytes, { size }) {\n    if (size_(hexOrBytes) > size)\n        throw new SizeOverflowError({\n            givenSize: size_(hexOrBytes),\n            maxSize: size,\n        });\n}\n/**\n * Decodes a hex string into a string, number, bigint, boolean, or byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex\n * - Example: https://viem.sh/docs/utilities/fromHex#usage\n *\n * @param hex Hex string to decode.\n * @param toOrOpts Type to convert to or options.\n * @returns Decoded value.\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x1a4', 'number')\n * // 420\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x48656c6c6f20576f726c6421', 'string')\n * // 'Hello world'\n *\n * @example\n * import { fromHex } from 'viem'\n * const data = fromHex('0x48656c6c6f20576f726c64210000000000000000000000000000000000000000', {\n *   size: 32,\n *   to: 'string'\n * })\n * // 'Hello world'\n */\nexport function fromHex(hex, toOrOpts) {\n    const opts = typeof toOrOpts === 'string' ? { to: toOrOpts } : toOrOpts;\n    const to = opts.to;\n    if (to === 'number')\n        return hexToNumber(hex, opts);\n    if (to === 'bigint')\n        return hexToBigInt(hex, opts);\n    if (to === 'string')\n        return hexToString(hex, opts);\n    if (to === 'boolean')\n        return hexToBool(hex, opts);\n    return hexToBytes(hex, opts);\n}\n/**\n * Decodes a hex value into a bigint.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextobigint\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns BigInt value.\n *\n * @example\n * import { hexToBigInt } from 'viem'\n * const data = hexToBigInt('0x1a4', { signed: true })\n * // 420n\n *\n * @example\n * import { hexToBigInt } from 'viem'\n * const data = hexToBigInt('0x00000000000000000000000000000000000000000000000000000000000001a4', { size: 32 })\n * // 420n\n */\nexport function hexToBigInt(hex, opts = {}) {\n    const { signed } = opts;\n    if (opts.size)\n        assertSize(hex, { size: opts.size });\n    const value = BigInt(hex);\n    if (!signed)\n        return value;\n    const size = (hex.length - 2) / 2;\n    const max = (1n << (BigInt(size) * 8n - 1n)) - 1n;\n    if (value <= max)\n        return value;\n    return value - BigInt(`0x${'f'.padStart(size * 2, 'f')}`) - 1n;\n}\n/**\n * Decodes a hex value into a boolean.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextobool\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns Boolean value.\n *\n * @example\n * import { hexToBool } from 'viem'\n * const data = hexToBool('0x01')\n * // true\n *\n * @example\n * import { hexToBool } from 'viem'\n * const data = hexToBool('0x0000000000000000000000000000000000000000000000000000000000000001', { size: 32 })\n * // true\n */\nexport function hexToBool(hex_, opts = {}) {\n    let hex = hex_;\n    if (opts.size) {\n        assertSize(hex, { size: opts.size });\n        hex = trim(hex);\n    }\n    if (trim(hex) === '0x00')\n        return false;\n    if (trim(hex) === '0x01')\n        return true;\n    throw new InvalidHexBooleanError(hex);\n}\n/**\n * Decodes a hex string into a number.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextonumber\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns Number value.\n *\n * @example\n * import { hexToNumber } from 'viem'\n * const data = hexToNumber('0x1a4')\n * // 420\n *\n * @example\n * import { hexToNumber } from 'viem'\n * const data = hexToBigInt('0x00000000000000000000000000000000000000000000000000000000000001a4', { size: 32 })\n * // 420\n */\nexport function hexToNumber(hex, opts = {}) {\n    return Number(hexToBigInt(hex, opts));\n}\n/**\n * Decodes a hex value into a UTF-8 string.\n *\n * - Docs: https://viem.sh/docs/utilities/fromHex#hextostring\n *\n * @param hex Hex value to decode.\n * @param opts Options.\n * @returns String value.\n *\n * @example\n * import { hexToString } from 'viem'\n * const data = hexToString('0x48656c6c6f20576f726c6421')\n * // 'Hello world!'\n *\n * @example\n * import { hexToString } from 'viem'\n * const data = hexToString('0x48656c6c6f20576f726c64210000000000000000000000000000000000000000', {\n *  size: 32,\n * })\n * // 'Hello world'\n */\nexport function hexToString(hex, opts = {}) {\n    let bytes = hexToBytes(hex);\n    if (opts.size) {\n        assertSize(bytes, { size: opts.size });\n        bytes = trim(bytes, { dir: 'right' });\n    }\n    return new TextDecoder().decode(bytes);\n}\n//# sourceMappingURL=fromHex.js.map","import { IntegerOutOfRangeError, } from '../../errors/encoding.js';\nimport { pad } from '../data/pad.js';\nimport { assertSize } from './fromHex.js';\nconst hexes = /*#__PURE__*/ Array.from({ length: 256 }, (_v, i) => i.toString(16).padStart(2, '0'));\n/**\n * Encodes a string, number, bigint, or ByteArray into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex\n * - Example: https://viem.sh/docs/utilities/toHex#usage\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex('Hello world')\n * // '0x48656c6c6f20776f726c6421'\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex(420)\n * // '0x1a4'\n *\n * @example\n * import { toHex } from 'viem'\n * const data = toHex('Hello world', { size: 32 })\n * // '0x48656c6c6f20776f726c64210000000000000000000000000000000000000000'\n */\nexport function toHex(value, opts = {}) {\n    if (typeof value === 'number' || typeof value === 'bigint')\n        return numberToHex(value, opts);\n    if (typeof value === 'string') {\n        return stringToHex(value, opts);\n    }\n    if (typeof value === 'boolean')\n        return boolToHex(value, opts);\n    return bytesToHex(value, opts);\n}\n/**\n * Encodes a boolean into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#booltohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(true)\n * // '0x1'\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(false)\n * // '0x0'\n *\n * @example\n * import { boolToHex } from 'viem'\n * const data = boolToHex(true, { size: 32 })\n * // '0x0000000000000000000000000000000000000000000000000000000000000001'\n */\nexport function boolToHex(value, opts = {}) {\n    const hex = `0x${Number(value)}`;\n    if (typeof opts.size === 'number') {\n        assertSize(hex, { size: opts.size });\n        return pad(hex, { size: opts.size });\n    }\n    return hex;\n}\n/**\n * Encodes a bytes array into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#bytestohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { bytesToHex } from 'viem'\n * const data = bytesToHex(Uint8Array.from([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n * // '0x48656c6c6f20576f726c6421'\n *\n * @example\n * import { bytesToHex } from 'viem'\n * const data = bytesToHex(Uint8Array.from([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]), { size: 32 })\n * // '0x48656c6c6f20576f726c64210000000000000000000000000000000000000000'\n */\nexport function bytesToHex(value, opts = {}) {\n    let string = '';\n    for (let i = 0; i < value.length; i++) {\n        string += hexes[value[i]];\n    }\n    const hex = `0x${string}`;\n    if (typeof opts.size === 'number') {\n        assertSize(hex, { size: opts.size });\n        return pad(hex, { dir: 'right', size: opts.size });\n    }\n    return hex;\n}\n/**\n * Encodes a number or bigint into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#numbertohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { numberToHex } from 'viem'\n * const data = numberToHex(420)\n * // '0x1a4'\n *\n * @example\n * import { numberToHex } from 'viem'\n * const data = numberToHex(420, { size: 32 })\n * // '0x00000000000000000000000000000000000000000000000000000000000001a4'\n */\nexport function numberToHex(value_, opts = {}) {\n    const { signed, size } = opts;\n    const value = BigInt(value_);\n    let maxValue;\n    if (size) {\n        if (signed)\n            maxValue = (1n << (BigInt(size) * 8n - 1n)) - 1n;\n        else\n            maxValue = 2n ** (BigInt(size) * 8n) - 1n;\n    }\n    else if (typeof value_ === 'number') {\n        maxValue = BigInt(Number.MAX_SAFE_INTEGER);\n    }\n    const minValue = typeof maxValue === 'bigint' && signed ? -maxValue - 1n : 0;\n    if ((maxValue && value > maxValue) || value < minValue) {\n        const suffix = typeof value_ === 'bigint' ? 'n' : '';\n        throw new IntegerOutOfRangeError({\n            max: maxValue ? `${maxValue}${suffix}` : undefined,\n            min: `${minValue}${suffix}`,\n            signed,\n            size,\n            value: `${value_}${suffix}`,\n        });\n    }\n    const hex = `0x${(signed && value < 0\n        ? (1n << BigInt(size * 8)) + BigInt(value)\n        : value).toString(16)}`;\n    if (size)\n        return pad(hex, { size });\n    return hex;\n}\nconst encoder = /*#__PURE__*/ new TextEncoder();\n/**\n * Encodes a UTF-8 string into a hex string\n *\n * - Docs: https://viem.sh/docs/utilities/toHex#stringtohex\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Hex value.\n *\n * @example\n * import { stringToHex } from 'viem'\n * const data = stringToHex('Hello World!')\n * // '0x48656c6c6f20576f726c6421'\n *\n * @example\n * import { stringToHex } from 'viem'\n * const data = stringToHex('Hello World!', { size: 32 })\n * // '0x48656c6c6f20576f726c64210000000000000000000000000000000000000000'\n */\nexport function stringToHex(value_, opts = {}) {\n    const value = encoder.encode(value_);\n    return bytesToHex(value, opts);\n}\n//# sourceMappingURL=toHex.js.map","import { BaseError } from '../../errors/base.js';\nimport { isHex } from '../data/isHex.js';\nimport { pad } from '../data/pad.js';\nimport { assertSize } from './fromHex.js';\nimport { numberToHex, } from './toHex.js';\nconst encoder = /*#__PURE__*/ new TextEncoder();\n/**\n * Encodes a UTF-8 string, hex value, bigint, number or boolean to a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes\n * - Example: https://viem.sh/docs/utilities/toBytes#usage\n *\n * @param value Value to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes('Hello world')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes(420)\n * // Uint8Array([1, 164])\n *\n * @example\n * import { toBytes } from 'viem'\n * const data = toBytes(420, { size: 4 })\n * // Uint8Array([0, 0, 1, 164])\n */\nexport function toBytes(value, opts = {}) {\n    if (typeof value === 'number' || typeof value === 'bigint')\n        return numberToBytes(value, opts);\n    if (typeof value === 'boolean')\n        return boolToBytes(value, opts);\n    if (isHex(value))\n        return hexToBytes(value, opts);\n    return stringToBytes(value, opts);\n}\n/**\n * Encodes a boolean into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#booltobytes\n *\n * @param value Boolean value to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { boolToBytes } from 'viem'\n * const data = boolToBytes(true)\n * // Uint8Array([1])\n *\n * @example\n * import { boolToBytes } from 'viem'\n * const data = boolToBytes(true, { size: 32 })\n * // Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1])\n */\nexport function boolToBytes(value, opts = {}) {\n    const bytes = new Uint8Array(1);\n    bytes[0] = Number(value);\n    if (typeof opts.size === 'number') {\n        assertSize(bytes, { size: opts.size });\n        return pad(bytes, { size: opts.size });\n    }\n    return bytes;\n}\n// We use very optimized technique to convert hex string to byte array\nconst charCodeMap = {\n    zero: 48,\n    nine: 57,\n    A: 65,\n    F: 70,\n    a: 97,\n    f: 102,\n};\nfunction charCodeToBase16(char) {\n    if (char >= charCodeMap.zero && char <= charCodeMap.nine)\n        return char - charCodeMap.zero;\n    if (char >= charCodeMap.A && char <= charCodeMap.F)\n        return char - (charCodeMap.A - 10);\n    if (char >= charCodeMap.a && char <= charCodeMap.f)\n        return char - (charCodeMap.a - 10);\n    return undefined;\n}\n/**\n * Encodes a hex string into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#hextobytes\n *\n * @param hex Hex string to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { hexToBytes } from 'viem'\n * const data = hexToBytes('0x48656c6c6f20776f726c6421')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33])\n *\n * @example\n * import { hexToBytes } from 'viem'\n * const data = hexToBytes('0x48656c6c6f20776f726c6421', { size: 32 })\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n */\nexport function hexToBytes(hex_, opts = {}) {\n    let hex = hex_;\n    if (opts.size) {\n        assertSize(hex, { size: opts.size });\n        hex = pad(hex, { dir: 'right', size: opts.size });\n    }\n    let hexString = hex.slice(2);\n    if (hexString.length % 2)\n        hexString = `0${hexString}`;\n    const length = hexString.length / 2;\n    const bytes = new Uint8Array(length);\n    for (let index = 0, j = 0; index < length; index++) {\n        const nibbleLeft = charCodeToBase16(hexString.charCodeAt(j++));\n        const nibbleRight = charCodeToBase16(hexString.charCodeAt(j++));\n        if (nibbleLeft === undefined || nibbleRight === undefined) {\n            throw new BaseError(`Invalid byte sequence (\"${hexString[j - 2]}${hexString[j - 1]}\" in \"${hexString}\").`);\n        }\n        bytes[index] = nibbleLeft * 16 + nibbleRight;\n    }\n    return bytes;\n}\n/**\n * Encodes a number into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#numbertobytes\n *\n * @param value Number to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { numberToBytes } from 'viem'\n * const data = numberToBytes(420)\n * // Uint8Array([1, 164])\n *\n * @example\n * import { numberToBytes } from 'viem'\n * const data = numberToBytes(420, { size: 4 })\n * // Uint8Array([0, 0, 1, 164])\n */\nexport function numberToBytes(value, opts) {\n    const hex = numberToHex(value, opts);\n    return hexToBytes(hex);\n}\n/**\n * Encodes a UTF-8 string into a byte array.\n *\n * - Docs: https://viem.sh/docs/utilities/toBytes#stringtobytes\n *\n * @param value String to encode.\n * @param opts Options.\n * @returns Byte array value.\n *\n * @example\n * import { stringToBytes } from 'viem'\n * const data = stringToBytes('Hello world!')\n * // Uint8Array([72, 101, 108, 108, 111, 32, 119, 111, 114, 108, 100, 33])\n *\n * @example\n * import { stringToBytes } from 'viem'\n * const data = stringToBytes('Hello world!', { size: 32 })\n * // Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n */\nexport function stringToBytes(value, opts = {}) {\n    const bytes = encoder.encode(value);\n    if (typeof opts.size === 'number') {\n        assertSize(bytes, { size: opts.size });\n        return pad(bytes, { dir: 'right', size: opts.size });\n    }\n    return bytes;\n}\n//# sourceMappingURL=toBytes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.output = exports.exists = exports.hash = exports.bytes = exports.bool = exports.number = exports.isBytes = void 0;\nfunction number(n) {\n    if (!Number.isSafeInteger(n) || n < 0)\n        throw new Error(`positive integer expected, not ${n}`);\n}\nexports.number = number;\nfunction bool(b) {\n    if (typeof b !== 'boolean')\n        throw new Error(`boolean expected, not ${b}`);\n}\nexports.bool = bool;\n// copied from utils\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\nfunction bytes(b, ...lengths) {\n    if (!isBytes(b))\n        throw new Error('Uint8Array expected');\n    if (lengths.length > 0 && !lengths.includes(b.length))\n        throw new Error(`Uint8Array expected of length ${lengths}, not of length=${b.length}`);\n}\nexports.bytes = bytes;\nfunction hash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash should be wrapped by utils.wrapConstructor');\n    number(h.outputLen);\n    number(h.blockLen);\n}\nexports.hash = hash;\nfunction exists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\nexports.exists = exists;\nfunction output(out, instance) {\n    bytes(out);\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error(`digestInto() expects output buffer of length at least ${min}`);\n    }\n}\nexports.output = output;\nconst assert = { number, bool, bytes, hash, exists, output };\nexports.default = assert;\n//# sourceMappingURL=_assert.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.add5L = exports.add5H = exports.add4H = exports.add4L = exports.add3H = exports.add3L = exports.add = exports.rotlBL = exports.rotlBH = exports.rotlSL = exports.rotlSH = exports.rotr32L = exports.rotr32H = exports.rotrBL = exports.rotrBH = exports.rotrSL = exports.rotrSH = exports.shrSL = exports.shrSH = exports.toBig = exports.split = exports.fromBig = void 0;\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n// We are not using BigUint64Array, because they are extremely slow as per 2022\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nexports.fromBig = fromBig;\nfunction split(lst, le = false) {\n    let Ah = new Uint32Array(lst.length);\n    let Al = new Uint32Array(lst.length);\n    for (let i = 0; i < lst.length; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nexports.split = split;\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\nexports.toBig = toBig;\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nexports.shrSH = shrSH;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.shrSL = shrSL;\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nexports.rotrSH = rotrSH;\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\nexports.rotrSL = rotrSL;\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nexports.rotrBH = rotrBH;\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\nexports.rotrBL = rotrBL;\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nexports.rotr32H = rotr32H;\nconst rotr32L = (h, _l) => h;\nexports.rotr32L = rotr32L;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nexports.rotlSH = rotlSH;\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\nexports.rotlSL = rotlSL;\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nexports.rotlBH = rotlBH;\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\nexports.rotlBL = rotlBL;\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\nexports.add = add;\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nexports.add3L = add3L;\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nexports.add3H = add3H;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nexports.add4L = add4L;\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nexports.add4H = add4H;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nexports.add5L = add5L;\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\nexports.add5H = add5H;\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexports.default = u64;\n//# sourceMappingURL=_u64.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.crypto = void 0;\nexports.crypto = typeof globalThis === 'object' && 'crypto' in globalThis ? globalThis.crypto : undefined;\n//# sourceMappingURL=crypto.js.map","\"use strict\";\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.randomBytes = exports.wrapXOFConstructorWithOpts = exports.wrapConstructorWithOpts = exports.wrapConstructor = exports.checkOpts = exports.Hash = exports.concatBytes = exports.toBytes = exports.utf8ToBytes = exports.asyncLoop = exports.nextTick = exports.hexToBytes = exports.bytesToHex = exports.byteSwap32 = exports.byteSwapIfBE = exports.byteSwap = exports.isLE = exports.rotl = exports.rotr = exports.createView = exports.u32 = exports.u8 = exports.isBytes = void 0;\n// We use WebCrypto aka globalThis.crypto, which exists in browsers and node.js 16+.\n// node.js versions earlier than v19 don't declare it in global scope.\n// For node.js, package.json#exports field mapping rewrites import\n// from `crypto` to `cryptoNode`, which imports native module.\n// Makes the utils un-importable in browsers without a bundler.\n// Once node.js 18 is deprecated (2025-04-30), we can just drop the import.\nconst crypto_1 = require(\"@noble/hashes/crypto\");\nconst _assert_js_1 = require(\"./_assert.js\");\n// export { isBytes } from './_assert.js';\n// We can't reuse isBytes from _assert, because somehow this causes huge perf issues\nfunction isBytes(a) {\n    return (a instanceof Uint8Array ||\n        (a != null && typeof a === 'object' && a.constructor.name === 'Uint8Array'));\n}\nexports.isBytes = isBytes;\n// Cast array to different type\nconst u8 = (arr) => new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.u8 = u8;\nconst u32 = (arr) => new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\nexports.u32 = u32;\n// Cast array to view\nconst createView = (arr) => new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\nexports.createView = createView;\n// The rotate right (circular right shift) operation for uint32\nconst rotr = (word, shift) => (word << (32 - shift)) | (word >>> shift);\nexports.rotr = rotr;\n// The rotate left (circular left shift) operation for uint32\nconst rotl = (word, shift) => (word << shift) | ((word >>> (32 - shift)) >>> 0);\nexports.rotl = rotl;\nexports.isLE = new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44;\n// The byte swap operation for uint32\nconst byteSwap = (word) => ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff);\nexports.byteSwap = byteSwap;\n// Conditionally byte swap if on a big-endian platform\nexports.byteSwapIfBE = exports.isLE ? (n) => n : (n) => (0, exports.byteSwap)(n);\n// In place byte swap for Uint32Array\nfunction byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = (0, exports.byteSwap)(arr[i]);\n    }\n}\nexports.byteSwap32 = byteSwap32;\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nfunction bytesToHex(bytes) {\n    (0, _assert_js_1.bytes)(bytes);\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\nexports.bytesToHex = bytesToHex;\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, _A: 65, _F: 70, _a: 97, _f: 102 };\nfunction asciiToBase16(char) {\n    if (char >= asciis._0 && char <= asciis._9)\n        return char - asciis._0;\n    if (char >= asciis._A && char <= asciis._F)\n        return char - (asciis._A - 10);\n    if (char >= asciis._a && char <= asciis._f)\n        return char - (asciis._a - 10);\n    return;\n}\n/**\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nfunction hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('padded hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2;\n    }\n    return array;\n}\nexports.hexToBytes = hexToBytes;\n// There is no setImmediate in browser and setTimeout is slow.\n// call of async fn will return Promise, which will be fullfiled only on\n// next scheduler queue processing step and this is exactly what we need.\nconst nextTick = async () => { };\nexports.nextTick = nextTick;\n// Returns control to thread each 'tick' ms to avoid blocking\nasync function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await (0, exports.nextTick)();\n        ts += diff;\n    }\n}\nexports.asyncLoop = asyncLoop;\n/**\n * @example utf8ToBytes('abc') // new Uint8Array([97, 98, 99])\n */\nfunction utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error(`utf8ToBytes expected string, got ${typeof str}`);\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\nexports.utf8ToBytes = utf8ToBytes;\n/**\n * Normalizes (non-hex) string or Uint8Array to Uint8Array.\n * Warning: when Uint8Array is passed, it would NOT get copied.\n * Keep in mind for future mutable operations.\n */\nfunction toBytes(data) {\n    if (typeof data === 'string')\n        data = utf8ToBytes(data);\n    (0, _assert_js_1.bytes)(data);\n    return data;\n}\nexports.toBytes = toBytes;\n/**\n * Copies several Uint8Arrays into one.\n */\nfunction concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        (0, _assert_js_1.bytes)(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\nexports.concatBytes = concatBytes;\n// For runtime check if class implements interface\nclass Hash {\n    // Safe version that clones internal state\n    clone() {\n        return this._cloneInto();\n    }\n}\nexports.Hash = Hash;\nconst toStr = {}.toString;\nfunction checkOpts(defaults, opts) {\n    if (opts !== undefined && toStr.call(opts) !== '[object Object]')\n        throw new Error('Options should be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\nexports.checkOpts = checkOpts;\nfunction wrapConstructor(hashCons) {\n    const hashC = (msg) => hashCons().update(toBytes(msg)).digest();\n    const tmp = hashCons();\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = () => hashCons();\n    return hashC;\n}\nexports.wrapConstructor = wrapConstructor;\nfunction wrapConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapConstructorWithOpts = wrapConstructorWithOpts;\nfunction wrapXOFConstructorWithOpts(hashCons) {\n    const hashC = (msg, opts) => hashCons(opts).update(toBytes(msg)).digest();\n    const tmp = hashCons({});\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    return hashC;\n}\nexports.wrapXOFConstructorWithOpts = wrapXOFConstructorWithOpts;\n/**\n * Secure PRNG. Uses `crypto.getRandomValues`, which defers to OS.\n */\nfunction randomBytes(bytesLength = 32) {\n    if (crypto_1.crypto && typeof crypto_1.crypto.getRandomValues === 'function') {\n        return crypto_1.crypto.getRandomValues(new Uint8Array(bytesLength));\n    }\n    throw new Error('crypto.getRandomValues must be defined');\n}\nexports.randomBytes = randomBytes;\n//# sourceMappingURL=utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shake256 = exports.shake128 = exports.keccak_512 = exports.keccak_384 = exports.keccak_256 = exports.keccak_224 = exports.sha3_512 = exports.sha3_384 = exports.sha3_256 = exports.sha3_224 = exports.Keccak = exports.keccakP = void 0;\nconst _assert_js_1 = require(\"./_assert.js\");\nconst _u64_js_1 = require(\"./_u64.js\");\nconst utils_js_1 = require(\"./utils.js\");\n// SHA3 (keccak) is based on a new design: basically, the internal state is bigger than output size.\n// It's called a sponge function.\n// Various per round constants calculations\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = [];\nconst _0n = /* @__PURE__ */ BigInt(0);\nconst _1n = /* @__PURE__ */ BigInt(1);\nconst _2n = /* @__PURE__ */ BigInt(2);\nconst _7n = /* @__PURE__ */ BigInt(7);\nconst _256n = /* @__PURE__ */ BigInt(256);\nconst _0x71n = /* @__PURE__ */ BigInt(0x71);\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << /* @__PURE__ */ BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst [SHA3_IOTA_H, SHA3_IOTA_L] = /* @__PURE__ */ (0, _u64_js_1.split)(_SHA3_IOTA, true);\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? (0, _u64_js_1.rotlBH)(h, l, s) : (0, _u64_js_1.rotlSH)(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? (0, _u64_js_1.rotlBL)(h, l, s) : (0, _u64_js_1.rotlSL)(h, l, s));\n// Same as keccakf1600, but allows to skip some rounds\nfunction keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    B.fill(0);\n}\nexports.keccakP = keccakP;\nclass Keccak extends utils_js_1.Hash {\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        super();\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        this.pos = 0;\n        this.posOut = 0;\n        this.finished = false;\n        this.destroyed = false;\n        // Can be passed from user as dkLen\n        (0, _assert_js_1.number)(outputLen);\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        if (0 >= this.blockLen || this.blockLen >= 200)\n            throw new Error('Sha3 supports only keccak-f1600 function');\n        this.state = new Uint8Array(200);\n        this.state32 = (0, utils_js_1.u32)(this.state);\n    }\n    keccak() {\n        if (!utils_js_1.isLE)\n            (0, utils_js_1.byteSwap32)(this.state32);\n        keccakP(this.state32, this.rounds);\n        if (!utils_js_1.isLE)\n            (0, utils_js_1.byteSwap32)(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        (0, _assert_js_1.exists)(this);\n        const { blockLen, state } = this;\n        data = (0, utils_js_1.toBytes)(data);\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        (0, _assert_js_1.exists)(this, false);\n        (0, _assert_js_1.bytes)(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        (0, _assert_js_1.number)(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        (0, _assert_js_1.output)(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        this.state.fill(0);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to || (to = new Keccak(blockLen, suffix, outputLen, enableXOF, rounds));\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nexports.Keccak = Keccak;\nconst gen = (suffix, blockLen, outputLen) => (0, utils_js_1.wrapConstructor)(() => new Keccak(blockLen, suffix, outputLen));\nexports.sha3_224 = gen(0x06, 144, 224 / 8);\n/**\n * SHA3-256 hash function\n * @param message - that would be hashed\n */\nexports.sha3_256 = gen(0x06, 136, 256 / 8);\nexports.sha3_384 = gen(0x06, 104, 384 / 8);\nexports.sha3_512 = gen(0x06, 72, 512 / 8);\nexports.keccak_224 = gen(0x01, 144, 224 / 8);\n/**\n * keccak-256 hash function. Different from SHA3-256.\n * @param message - that would be hashed\n */\nexports.keccak_256 = gen(0x01, 136, 256 / 8);\nexports.keccak_384 = gen(0x01, 104, 384 / 8);\nexports.keccak_512 = gen(0x01, 72, 512 / 8);\nconst genShake = (suffix, blockLen, outputLen) => (0, utils_js_1.wrapXOFConstructorWithOpts)((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true));\nexports.shake128 = genShake(0x1f, 168, 128 / 8);\nexports.shake256 = genShake(0x1f, 136, 256 / 8);\n//# sourceMappingURL=sha3.js.map","import { keccak_256 } from '@noble/hashes/sha3';\nimport { isHex } from '../data/isHex.js';\nimport { toBytes } from '../encoding/toBytes.js';\nimport { toHex } from '../encoding/toHex.js';\nexport function keccak256(value, to_) {\n    const to = to_ || 'hex';\n    const bytes = keccak_256(isHex(value, { strict: false }) ? toBytes(value) : value);\n    if (to === 'bytes')\n        return bytes;\n    return toHex(bytes);\n}\n//# sourceMappingURL=keccak256.js.map","/**\n * Map with a LRU (Least recently used) policy.\n *\n * @link https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU\n */\nexport class LruMap extends Map {\n    constructor(size) {\n        super();\n        Object.defineProperty(this, \"maxSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxSize = size;\n    }\n    set(key, value) {\n        super.set(key, value);\n        if (this.maxSize && this.size > this.maxSize)\n            this.delete(this.keys().next().value);\n        return this;\n    }\n}\n//# sourceMappingURL=lru.js.map","import { InvalidBytesBooleanError } from '../../errors/encoding.js';\nimport { trim } from '../data/trim.js';\nimport { assertSize, hexToBigInt, hexToNumber, } from './fromHex.js';\nimport { bytesToHex } from './toHex.js';\n/**\n * Decodes a byte array into a UTF-8 string, hex value, number, bigint or boolean.\n *\n * - Docs: https://viem.sh/docs/utilities/fromBytes\n * - Example: https://viem.sh/docs/utilities/fromBytes#usage\n *\n * @param bytes Byte array to decode.\n * @param toOrOpts Type to convert to or options.\n * @returns Decoded value.\n *\n * @example\n * import { fromBytes } from 'viem'\n * const data = fromBytes(new Uint8Array([1, 164]), 'number')\n * // 420\n *\n * @example\n * import { fromBytes } from 'viem'\n * const data = fromBytes(\n *   new Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]),\n *   'string'\n * )\n * // 'Hello world'\n */\nexport function fromBytes(bytes, toOrOpts) {\n    const opts = typeof toOrOpts === 'string' ? { to: toOrOpts } : toOrOpts;\n    const to = opts.to;\n    if (to === 'number')\n        return bytesToNumber(bytes, opts);\n    if (to === 'bigint')\n        return bytesToBigInt(bytes, opts);\n    if (to === 'boolean')\n        return bytesToBool(bytes, opts);\n    if (to === 'string')\n        return bytesToString(bytes, opts);\n    return bytesToHex(bytes, opts);\n}\n/**\n * Decodes a byte array into a bigint.\n *\n * - Docs: https://viem.sh/docs/utilities/fromBytes#bytestobigint\n *\n * @param bytes Byte array to decode.\n * @param opts Options.\n * @returns BigInt value.\n *\n * @example\n * import { bytesToBigInt } from 'viem'\n * const data = bytesToBigInt(new Uint8Array([1, 164]))\n * // 420n\n */\nexport function bytesToBigInt(bytes, opts = {}) {\n    if (typeof opts.size !== 'undefined')\n        assertSize(bytes, { size: opts.size });\n    const hex = bytesToHex(bytes, opts);\n    return hexToBigInt(hex, opts);\n}\n/**\n * Decodes a byte array into a boolean.\n *\n * - Docs: https://viem.sh/docs/utilities/fromBytes#bytestobool\n *\n * @param bytes Byte array to decode.\n * @param opts Options.\n * @returns Boolean value.\n *\n * @example\n * import { bytesToBool } from 'viem'\n * const data = bytesToBool(new Uint8Array([1]))\n * // true\n */\nexport function bytesToBool(bytes_, opts = {}) {\n    let bytes = bytes_;\n    if (typeof opts.size !== 'undefined') {\n        assertSize(bytes, { size: opts.size });\n        bytes = trim(bytes);\n    }\n    if (bytes.length > 1 || bytes[0] > 1)\n        throw new InvalidBytesBooleanError(bytes);\n    return Boolean(bytes[0]);\n}\n/**\n * Decodes a byte array into a number.\n *\n * - Docs: https://viem.sh/docs/utilities/fromBytes#bytestonumber\n *\n * @param bytes Byte array to decode.\n * @param opts Options.\n * @returns Number value.\n *\n * @example\n * import { bytesToNumber } from 'viem'\n * const data = bytesToNumber(new Uint8Array([1, 164]))\n * // 420\n */\nexport function bytesToNumber(bytes, opts = {}) {\n    if (typeof opts.size !== 'undefined')\n        assertSize(bytes, { size: opts.size });\n    const hex = bytesToHex(bytes, opts);\n    return hexToNumber(hex, opts);\n}\n/**\n * Decodes a byte array into a UTF-8 string.\n *\n * - Docs: https://viem.sh/docs/utilities/fromBytes#bytestostring\n *\n * @param bytes Byte array to decode.\n * @param opts Options.\n * @returns String value.\n *\n * @example\n * import { bytesToString } from 'viem'\n * const data = bytesToString(new Uint8Array([72, 101, 108, 108, 111, 32, 87, 111, 114, 108, 100, 33]))\n * // 'Hello world'\n */\nexport function bytesToString(bytes_, opts = {}) {\n    let bytes = bytes_;\n    if (typeof opts.size !== 'undefined') {\n        assertSize(bytes, { size: opts.size });\n        bytes = trim(bytes, { dir: 'right' });\n    }\n    return new TextDecoder().decode(bytes);\n}\n//# sourceMappingURL=fromBytes.js.map","export const stringify = (value, replacer, space) => JSON.stringify(value, (key, value_) => {\n    const value = typeof value_ === 'bigint' ? value_.toString() : value_;\n    return typeof replacer === 'function' ? replacer(key, value) : value;\n}, space);\n//# sourceMappingURL=stringify.js.map","import { stringify } from '../utils/stringify.js';\nimport { BaseError } from './base.js';\nimport { getUrl } from './utils.js';\nexport class HttpRequestError extends BaseError {\n    constructor({ body, cause, details, headers, status, url, }) {\n        super('HTTP request failed.', {\n            cause,\n            details,\n            metaMessages: [\n                status && `Status: ${status}`,\n                `URL: ${getUrl(url)}`,\n                body && `Request body: ${stringify(body)}`,\n            ].filter(Boolean),\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'HttpRequestError'\n        });\n        Object.defineProperty(this, \"body\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"status\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"url\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.body = body;\n        this.headers = headers;\n        this.status = status;\n        this.url = url;\n    }\n}\nexport class WebSocketRequestError extends BaseError {\n    constructor({ body, details, url, }) {\n        super('WebSocket request failed.', {\n            details,\n            metaMessages: [`URL: ${getUrl(url)}`, `Request body: ${stringify(body)}`],\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'WebSocketRequestError'\n        });\n    }\n}\nexport class RpcRequestError extends BaseError {\n    constructor({ body, error, url, }) {\n        super('RPC Request failed.', {\n            cause: error,\n            details: error.message,\n            metaMessages: [`URL: ${getUrl(url)}`, `Request body: ${stringify(body)}`],\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'RpcRequestError'\n        });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.code = error.code;\n    }\n}\nexport class TimeoutError extends BaseError {\n    constructor({ body, url, }) {\n        super('The request took too long to respond.', {\n            details: 'The request timed out.',\n            metaMessages: [`URL: ${getUrl(url)}`, `Request body: ${stringify(body)}`],\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'TimeoutError'\n        });\n    }\n}\n//# sourceMappingURL=request.js.map","import { BaseError } from './base.js';\nimport { RpcRequestError } from './request.js';\nconst unknownErrorCode = -1;\nexport class RpcError extends BaseError {\n    constructor(cause, { code, docsPath, metaMessages, shortMessage }) {\n        super(shortMessage, {\n            cause,\n            docsPath,\n            metaMessages: metaMessages || cause?.metaMessages,\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'RpcError'\n        });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = cause.name;\n        this.code = (cause instanceof RpcRequestError ? cause.code : code ?? unknownErrorCode);\n    }\n}\nexport class ProviderRpcError extends RpcError {\n    constructor(cause, options) {\n        super(cause, options);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ProviderRpcError'\n        });\n        Object.defineProperty(this, \"data\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.data = options.data;\n    }\n}\nexport class ParseRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: ParseRpcError.code,\n            shortMessage: 'Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ParseRpcError'\n        });\n    }\n}\nObject.defineProperty(ParseRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32700\n});\nexport class InvalidRequestRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: InvalidRequestRpcError.code,\n            shortMessage: 'JSON is not a valid request object.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidRequestRpcError'\n        });\n    }\n}\nObject.defineProperty(InvalidRequestRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32600\n});\nexport class MethodNotFoundRpcError extends RpcError {\n    constructor(cause, { method } = {}) {\n        super(cause, {\n            code: MethodNotFoundRpcError.code,\n            shortMessage: `The method${method ? ` \"${method}\"` : ''} does not exist / is not available.`,\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'MethodNotFoundRpcError'\n        });\n    }\n}\nObject.defineProperty(MethodNotFoundRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32601\n});\nexport class InvalidParamsRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: InvalidParamsRpcError.code,\n            shortMessage: [\n                'Invalid parameters were provided to the RPC method.',\n                'Double check you have provided the correct parameters.',\n            ].join('\\n'),\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidParamsRpcError'\n        });\n    }\n}\nObject.defineProperty(InvalidParamsRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32602\n});\nexport class InternalRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: InternalRpcError.code,\n            shortMessage: 'An internal error was received.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InternalRpcError'\n        });\n    }\n}\nObject.defineProperty(InternalRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32603\n});\nexport class InvalidInputRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: InvalidInputRpcError.code,\n            shortMessage: [\n                'Missing or invalid parameters.',\n                'Double check you have provided the correct parameters.',\n            ].join('\\n'),\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'InvalidInputRpcError'\n        });\n    }\n}\nObject.defineProperty(InvalidInputRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32000\n});\nexport class ResourceNotFoundRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: ResourceNotFoundRpcError.code,\n            shortMessage: 'Requested resource not found.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ResourceNotFoundRpcError'\n        });\n    }\n}\nObject.defineProperty(ResourceNotFoundRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32001\n});\nexport class ResourceUnavailableRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: ResourceUnavailableRpcError.code,\n            shortMessage: 'Requested resource not available.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ResourceUnavailableRpcError'\n        });\n    }\n}\nObject.defineProperty(ResourceUnavailableRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32002\n});\nexport class TransactionRejectedRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: TransactionRejectedRpcError.code,\n            shortMessage: 'Transaction creation failed.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'TransactionRejectedRpcError'\n        });\n    }\n}\nObject.defineProperty(TransactionRejectedRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32003\n});\nexport class MethodNotSupportedRpcError extends RpcError {\n    constructor(cause, { method } = {}) {\n        super(cause, {\n            code: MethodNotSupportedRpcError.code,\n            shortMessage: `Method${method ? ` \"${method}\"` : ''} is not implemented.`,\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'MethodNotSupportedRpcError'\n        });\n    }\n}\nObject.defineProperty(MethodNotSupportedRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32004\n});\nexport class LimitExceededRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: LimitExceededRpcError.code,\n            shortMessage: 'Request exceeds defined limit.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'LimitExceededRpcError'\n        });\n    }\n}\nObject.defineProperty(LimitExceededRpcError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32005\n});\nexport class JsonRpcVersionUnsupportedError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            code: JsonRpcVersionUnsupportedError.code,\n            shortMessage: 'Version of JSON-RPC protocol is not supported.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'JsonRpcVersionUnsupportedError'\n        });\n    }\n}\nObject.defineProperty(JsonRpcVersionUnsupportedError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: -32006\n});\nexport class UserRejectedRequestError extends ProviderRpcError {\n    constructor(cause) {\n        super(cause, {\n            code: UserRejectedRequestError.code,\n            shortMessage: 'User rejected the request.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'UserRejectedRequestError'\n        });\n    }\n}\nObject.defineProperty(UserRejectedRequestError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4001\n});\nexport class UnauthorizedProviderError extends ProviderRpcError {\n    constructor(cause) {\n        super(cause, {\n            code: UnauthorizedProviderError.code,\n            shortMessage: 'The requested method and/or account has not been authorized by the user.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'UnauthorizedProviderError'\n        });\n    }\n}\nObject.defineProperty(UnauthorizedProviderError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4100\n});\nexport class UnsupportedProviderMethodError extends ProviderRpcError {\n    constructor(cause, { method } = {}) {\n        super(cause, {\n            code: UnsupportedProviderMethodError.code,\n            shortMessage: `The Provider does not support the requested method${method ? ` \" ${method}\"` : ''}.`,\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'UnsupportedProviderMethodError'\n        });\n    }\n}\nObject.defineProperty(UnsupportedProviderMethodError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4200\n});\nexport class ProviderDisconnectedError extends ProviderRpcError {\n    constructor(cause) {\n        super(cause, {\n            code: ProviderDisconnectedError.code,\n            shortMessage: 'The Provider is disconnected from all chains.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ProviderDisconnectedError'\n        });\n    }\n}\nObject.defineProperty(ProviderDisconnectedError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4900\n});\nexport class ChainDisconnectedError extends ProviderRpcError {\n    constructor(cause) {\n        super(cause, {\n            code: ChainDisconnectedError.code,\n            shortMessage: 'The Provider is not connected to the requested chain.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'ChainDisconnectedError'\n        });\n    }\n}\nObject.defineProperty(ChainDisconnectedError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4901\n});\nexport class SwitchChainError extends ProviderRpcError {\n    constructor(cause) {\n        super(cause, {\n            code: SwitchChainError.code,\n            shortMessage: 'An error occurred when attempting to switch chain.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'SwitchChainError'\n        });\n    }\n}\nObject.defineProperty(SwitchChainError, \"code\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: 4902\n});\nexport class UnknownRpcError extends RpcError {\n    constructor(cause) {\n        super(cause, {\n            shortMessage: 'An unknown RPC error occurred.',\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 'UnknownRpcError'\n        });\n    }\n}\n//# sourceMappingURL=rpc.js.map","const schedulerCache = /*#__PURE__*/ new Map();\n/** @internal */\nexport function createBatchScheduler({ fn, id, shouldSplitBatch, wait = 0, sort, }) {\n    const exec = async () => {\n        const scheduler = getScheduler();\n        flush();\n        const args = scheduler.map(({ args }) => args);\n        if (args.length === 0)\n            return;\n        fn(args)\n            .then((data) => {\n            if (sort && Array.isArray(data))\n                data.sort(sort);\n            for (let i = 0; i < scheduler.length; i++) {\n                const { pendingPromise } = scheduler[i];\n                pendingPromise.resolve?.([data[i], data]);\n            }\n        })\n            .catch((err) => {\n            for (let i = 0; i < scheduler.length; i++) {\n                const { pendingPromise } = scheduler[i];\n                pendingPromise.reject?.(err);\n            }\n        });\n    };\n    const flush = () => schedulerCache.delete(id);\n    const getBatchedArgs = () => getScheduler().map(({ args }) => args);\n    const getScheduler = () => schedulerCache.get(id) || [];\n    const setScheduler = (item) => schedulerCache.set(id, [...getScheduler(), item]);\n    return {\n        flush,\n        async schedule(args) {\n            const pendingPromise = {};\n            const promise = new Promise((resolve, reject) => {\n                pendingPromise.resolve = resolve;\n                pendingPromise.reject = reject;\n            });\n            const split = shouldSplitBatch?.([...getBatchedArgs(), args]);\n            if (split)\n                exec();\n            const hasActiveScheduler = getScheduler().length > 0;\n            if (hasActiveScheduler) {\n                setScheduler({ args, pendingPromise });\n                return promise;\n            }\n            setScheduler({ args, pendingPromise });\n            setTimeout(exec, wait);\n            return promise;\n        },\n    };\n}\n//# sourceMappingURL=createBatchScheduler.js.map","export async function wait(time) {\n    return new Promise((res) => setTimeout(res, time));\n}\n//# sourceMappingURL=wait.js.map","const size = 256;\nlet index = size;\nlet buffer;\nexport function uid(length = 11) {\n    if (!buffer || index + length > size * 2) {\n        buffer = '';\n        index = 0;\n        for (let i = 0; i < size; i++) {\n            buffer += ((256 + Math.random() * 256) | 0).toString(16).substring(1);\n        }\n    }\n    return buffer.substring(index, index++ + length);\n}\n//# sourceMappingURL=uid.js.map","import { LruMap } from '../lru.js';\n/** @internal */\nexport const promiseCache = /*#__PURE__*/ new LruMap(8192);\n/** Deduplicates in-flight promises. */\nexport function withDedupe(fn, { enabled = true, id }) {\n    if (!enabled || !id)\n        return fn();\n    if (promiseCache.get(id))\n        return promiseCache.get(id);\n    const promise = fn().finally(() => promiseCache.delete(id));\n    promiseCache.set(id, promise);\n    return promise;\n}\n//# sourceMappingURL=withDedupe.js.map","import { wait } from '../wait.js';\nexport function withRetry(fn, { delay: delay_ = 100, retryCount = 2, shouldRetry = () => true, } = {}) {\n    return new Promise((resolve, reject) => {\n        const attemptRetry = async ({ count = 0 } = {}) => {\n            const retry = async ({ error }) => {\n                const delay = typeof delay_ === 'function' ? delay_({ count, error }) : delay_;\n                if (delay)\n                    await wait(delay);\n                attemptRetry({ count: count + 1 });\n            };\n            try {\n                const data = await fn();\n                resolve(data);\n            }\n            catch (err) {\n                if (count < retryCount &&\n                    (await shouldRetry({ count, error: err })))\n                    return retry({ error: err });\n                reject(err);\n            }\n        };\n        attemptRetry();\n    });\n}\n//# sourceMappingURL=withRetry.js.map","import { BaseError } from '../errors/base.js';\nimport { HttpRequestError, } from '../errors/request.js';\nimport { ChainDisconnectedError, InternalRpcError, InvalidInputRpcError, InvalidParamsRpcError, InvalidRequestRpcError, JsonRpcVersionUnsupportedError, LimitExceededRpcError, MethodNotFoundRpcError, MethodNotSupportedRpcError, ParseRpcError, ProviderDisconnectedError, ResourceNotFoundRpcError, ResourceUnavailableRpcError, SwitchChainError, TransactionRejectedRpcError, UnauthorizedProviderError, UnknownRpcError, UnsupportedProviderMethodError, UserRejectedRequestError, } from '../errors/rpc.js';\nimport { stringToHex } from './encoding/toHex.js';\nimport { keccak256 } from './hash/keccak256.js';\nimport { withDedupe } from './promise/withDedupe.js';\nimport { withRetry } from './promise/withRetry.js';\nimport { stringify } from './stringify.js';\nexport function buildRequest(request, options = {}) {\n    return async (args, overrideOptions = {}) => {\n        const { dedupe = false, retryDelay = 150, retryCount = 3, uid, } = {\n            ...options,\n            ...overrideOptions,\n        };\n        const requestId = dedupe\n            ? keccak256(stringToHex(`${uid}.${stringify(args)}`))\n            : undefined;\n        return withDedupe(() => withRetry(async () => {\n            try {\n                return await request(args);\n            }\n            catch (err_) {\n                const err = err_;\n                switch (err.code) {\n                    // -32700\n                    case ParseRpcError.code:\n                        throw new ParseRpcError(err);\n                    // -32600\n                    case InvalidRequestRpcError.code:\n                        throw new InvalidRequestRpcError(err);\n                    // -32601\n                    case MethodNotFoundRpcError.code:\n                        throw new MethodNotFoundRpcError(err, { method: args.method });\n                    // -32602\n                    case InvalidParamsRpcError.code:\n                        throw new InvalidParamsRpcError(err);\n                    // -32603\n                    case InternalRpcError.code:\n                        throw new InternalRpcError(err);\n                    // -32000\n                    case InvalidInputRpcError.code:\n                        throw new InvalidInputRpcError(err);\n                    // -32001\n                    case ResourceNotFoundRpcError.code:\n                        throw new ResourceNotFoundRpcError(err);\n                    // -32002\n                    case ResourceUnavailableRpcError.code:\n                        throw new ResourceUnavailableRpcError(err);\n                    // -32003\n                    case TransactionRejectedRpcError.code:\n                        throw new TransactionRejectedRpcError(err);\n                    // -32004\n                    case MethodNotSupportedRpcError.code:\n                        throw new MethodNotSupportedRpcError(err, {\n                            method: args.method,\n                        });\n                    // -32005\n                    case LimitExceededRpcError.code:\n                        throw new LimitExceededRpcError(err);\n                    // -32006\n                    case JsonRpcVersionUnsupportedError.code:\n                        throw new JsonRpcVersionUnsupportedError(err);\n                    // 4001\n                    case UserRejectedRequestError.code:\n                        throw new UserRejectedRequestError(err);\n                    // 4100\n                    case UnauthorizedProviderError.code:\n                        throw new UnauthorizedProviderError(err);\n                    // 4200\n                    case UnsupportedProviderMethodError.code:\n                        throw new UnsupportedProviderMethodError(err);\n                    // 4900\n                    case ProviderDisconnectedError.code:\n                        throw new ProviderDisconnectedError(err);\n                    // 4901\n                    case ChainDisconnectedError.code:\n                        throw new ChainDisconnectedError(err);\n                    // 4902\n                    case SwitchChainError.code:\n                        throw new SwitchChainError(err);\n                    // CAIP-25: User Rejected Error\n                    // https://docs.walletconnect.com/2.0/specs/clients/sign/error-codes#rejected-caip-25\n                    case 5000:\n                        throw new UserRejectedRequestError(err);\n                    default:\n                        if (err_ instanceof BaseError)\n                            throw err_;\n                        throw new UnknownRpcError(err);\n                }\n            }\n        }, {\n            delay: ({ count, error }) => {\n                // If we find a Retry-After header, let's retry after the given time.\n                if (error && error instanceof HttpRequestError) {\n                    const retryAfter = error?.headers?.get('Retry-After');\n                    if (retryAfter?.match(/\\d/))\n                        return Number.parseInt(retryAfter) * 1000;\n                }\n                // Otherwise, let's retry with an exponential backoff.\n                return ~~(1 << count) * retryDelay;\n            },\n            retryCount,\n            shouldRetry: ({ error }) => shouldRetry(error),\n        }), { enabled: dedupe, id: requestId });\n    };\n}\n/** @internal */\nexport function shouldRetry(error) {\n    if ('code' in error && typeof error.code === 'number') {\n        if (error.code === -1)\n            return true; // Unknown error\n        if (error.code === LimitExceededRpcError.code)\n            return true;\n        if (error.code === InternalRpcError.code)\n            return true;\n        return false;\n    }\n    if (error instanceof HttpRequestError && error.status) {\n        // Forbidden\n        if (error.status === 403)\n            return true;\n        // Request Timeout\n        if (error.status === 408)\n            return true;\n        // Request Entity Too Large\n        if (error.status === 413)\n            return true;\n        // Too Many Requests\n        if (error.status === 429)\n            return true;\n        // Internal Server Error\n        if (error.status === 500)\n            return true;\n        // Bad Gateway\n        if (error.status === 502)\n            return true;\n        // Service Unavailable\n        if (error.status === 503)\n            return true;\n        // Gateway Timeout\n        if (error.status === 504)\n            return true;\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=buildRequest.js.map","import { buildRequest } from '../../utils/buildRequest.js';\nimport { uid as uid_ } from '../../utils/uid.js';\n/**\n * @description Creates an transport intended to be used with a client.\n */\nexport function createTransport({ key, name, request, retryCount = 3, retryDelay = 150, timeout, type, }, value) {\n    const uid = uid_();\n    return {\n        config: {\n            key,\n            name,\n            request,\n            retryCount,\n            retryDelay,\n            timeout,\n            type,\n        },\n        request: buildRequest(request, { retryCount, retryDelay, uid }),\n        value,\n    };\n}\n//# sourceMappingURL=createTransport.js.map","import { BaseError } from './base.js';\nexport class UrlRequiredError extends BaseError {\n    constructor() {\n        super('No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.', {\n            docsPath: '/docs/clients/intro',\n        });\n    }\n}\n//# sourceMappingURL=transport.js.map","export function withTimeout(fn, { errorInstance = new Error('timed out'), timeout, signal, }) {\n    return new Promise((resolve, reject) => {\n        ;\n        (async () => {\n            let timeoutId;\n            try {\n                const controller = new AbortController();\n                if (timeout > 0) {\n                    timeoutId = setTimeout(() => {\n                        if (signal) {\n                            controller.abort();\n                        }\n                        else {\n                            reject(errorInstance);\n                        }\n                    }, timeout); // need to cast because bun globals.d.ts overrides @types/node\n                }\n                resolve(await fn({ signal: controller?.signal || null }));\n            }\n            catch (err) {\n                if (err?.name === 'AbortError')\n                    reject(errorInstance);\n                reject(err);\n            }\n            finally {\n                clearTimeout(timeoutId);\n            }\n        })();\n    });\n}\n//# sourceMappingURL=withTimeout.js.map","function createIdStore() {\n    return {\n        current: 0,\n        take() {\n            return this.current++;\n        },\n        reset() {\n            this.current = 0;\n        },\n    };\n}\nexport const idCache = /*#__PURE__*/ createIdStore();\n//# sourceMappingURL=id.js.map","import { HttpRequestError, TimeoutError, } from '../../errors/request.js';\nimport { withTimeout, } from '../promise/withTimeout.js';\nimport { stringify } from '../stringify.js';\nimport { idCache } from './id.js';\nexport function getHttpRpcClient(url, options = {}) {\n    return {\n        async request(params) {\n            const { body, onRequest = options.onRequest, onResponse = options.onResponse, timeout = options.timeout ?? 10_000, } = params;\n            const fetchOptions = {\n                ...(options.fetchOptions ?? {}),\n                ...(params.fetchOptions ?? {}),\n            };\n            const { headers, method, signal: signal_ } = fetchOptions;\n            try {\n                const response = await withTimeout(async ({ signal }) => {\n                    const init = {\n                        ...fetchOptions,\n                        body: Array.isArray(body)\n                            ? stringify(body.map((body) => ({\n                                jsonrpc: '2.0',\n                                id: body.id ?? idCache.take(),\n                                ...body,\n                            })))\n                            : stringify({\n                                jsonrpc: '2.0',\n                                id: body.id ?? idCache.take(),\n                                ...body,\n                            }),\n                        headers: {\n                            'Content-Type': 'application/json',\n                            ...headers,\n                        },\n                        method: method || 'POST',\n                        signal: signal_ || (timeout > 0 ? signal : null),\n                    };\n                    const request = new Request(url, init);\n                    if (onRequest)\n                        await onRequest(request);\n                    const response = await fetch(url, init);\n                    return response;\n                }, {\n                    errorInstance: new TimeoutError({ body, url }),\n                    timeout,\n                    signal: true,\n                });\n                if (onResponse)\n                    await onResponse(response);\n                let data;\n                if (response.headers.get('Content-Type')?.startsWith('application/json'))\n                    data = await response.json();\n                else {\n                    data = await response.text();\n                    data = JSON.parse(data || '{}');\n                }\n                if (!response.ok) {\n                    throw new HttpRequestError({\n                        body,\n                        details: stringify(data.error) || response.statusText,\n                        headers: response.headers,\n                        status: response.status,\n                        url,\n                    });\n                }\n                return data;\n            }\n            catch (err) {\n                if (err instanceof HttpRequestError)\n                    throw err;\n                if (err instanceof TimeoutError)\n                    throw err;\n                throw new HttpRequestError({\n                    body,\n                    cause: err,\n                    url,\n                });\n            }\n        },\n    };\n}\n//# sourceMappingURL=http.js.map","import { RpcRequestError } from '../../errors/request.js';\nimport { UrlRequiredError, } from '../../errors/transport.js';\nimport { createBatchScheduler } from '../../utils/promise/createBatchScheduler.js';\nimport { getHttpRpcClient, } from '../../utils/rpc/http.js';\nimport { createTransport, } from './createTransport.js';\n/**\n * @description Creates a HTTP transport that connects to a JSON-RPC API.\n */\nexport function http(\n/** URL of the JSON-RPC API. Defaults to the chain's public RPC URL. */\nurl, config = {}) {\n    const { batch, fetchOptions, key = 'http', name = 'HTTP JSON-RPC', onFetchRequest, onFetchResponse, retryDelay, } = config;\n    return ({ chain, retryCount: retryCount_, timeout: timeout_ }) => {\n        const { batchSize = 1000, wait = 0 } = typeof batch === 'object' ? batch : {};\n        const retryCount = config.retryCount ?? retryCount_;\n        const timeout = timeout_ ?? config.timeout ?? 10_000;\n        const url_ = url || chain?.rpcUrls.default.http[0];\n        if (!url_)\n            throw new UrlRequiredError();\n        const rpcClient = getHttpRpcClient(url_, {\n            fetchOptions,\n            onRequest: onFetchRequest,\n            onResponse: onFetchResponse,\n            timeout,\n        });\n        return createTransport({\n            key,\n            name,\n            async request({ method, params }) {\n                const body = { method, params };\n                const { schedule } = createBatchScheduler({\n                    id: url_,\n                    wait,\n                    shouldSplitBatch(requests) {\n                        return requests.length > batchSize;\n                    },\n                    fn: (body) => rpcClient.request({\n                        body,\n                    }),\n                    sort: (a, b) => a.id - b.id,\n                });\n                const fn = async (body) => batch\n                    ? schedule(body)\n                    : [\n                        await rpcClient.request({\n                            body,\n                        }),\n                    ];\n                const [{ error, result }] = await fn(body);\n                if (error)\n                    throw new RpcRequestError({\n                        body,\n                        error,\n                        url: url_,\n                    });\n                return result;\n            },\n            retryCount,\n            retryDelay,\n            timeout,\n            type: 'http',\n        }, {\n            fetchOptions,\n            url: url_,\n        });\n    };\n}\n//# sourceMappingURL=http.js.map","// src/utils/errors.ts\nvar DappErrorName = /* @__PURE__ */ ((DappErrorName2) => {\n  DappErrorName2[\"DecodeError\"] = \"Decode Error\";\n  DappErrorName2[\"InvalidParams\"] = \"Invalid Params\";\n  DappErrorName2[\"UserRejected\"] = \"User Rejected\";\n  DappErrorName2[\"NotAllowed\"] = \"Not Allowed\";\n  return DappErrorName2;\n})(DappErrorName || {});\nvar DappError = class extends Error {\n  constructor(message, name = \"Invalid Params\" /* InvalidParams */, rawError = void 0) {\n    super(message);\n    this.name = message === \"User Rejected\" /* UserRejected */ ? message : name;\n    this.rawError = rawError;\n  }\n};\n\n// src/utils/qss.ts\nfunction encode(obj, pfx) {\n  let k;\n  let i;\n  let tmp;\n  let str = \"\";\n  for (k in obj) {\n    if ((tmp = obj[k]) !== void 0) {\n      if (Array.isArray(tmp)) {\n        for (i = 0; i < tmp.length; i++) {\n          str && (str += \"&\");\n          str += `${encodeURIComponent(k)}=${encodeURIComponent(tmp[i])}`;\n        }\n      } else {\n        str && (str += \"&\");\n        str += `${encodeURIComponent(k)}=${encodeURIComponent(tmp)}`;\n      }\n    }\n  }\n  return (pfx || \"\") + str;\n}\nfunction toValue(mix) {\n  if (!mix)\n    return \"\";\n  const str = decodeURIComponent(mix);\n  if (str === \"false\")\n    return false;\n  if (str === \"true\")\n    return true;\n  return +str * 0 === 0 && `${+str}` === str ? +str : str;\n}\nfunction decode(str) {\n  let tmp;\n  let k;\n  const out = {};\n  const arr = str.split(\"&\");\n  while (tmp = arr.shift()) {\n    tmp = tmp.split(\"=\");\n    k = tmp.shift();\n    if (out[k] !== void 0) {\n      out[k] = [].concat(out[k], toValue(tmp.shift()));\n    } else {\n      out[k] = toValue(tmp.shift());\n    }\n  }\n  return out;\n}\n\n// src/utils/search-params.ts\nfunction parseSearchWith(parser) {\n  return (searchStr) => {\n    if (searchStr.substring(0, 1) === \"?\") {\n      searchStr = searchStr.substring(1);\n    }\n    const query = decode(searchStr);\n    for (const key in query) {\n      const value = query[key];\n      if (typeof value === \"string\") {\n        try {\n          query[key] = parser(value);\n        } catch (err) {\n        }\n      }\n    }\n    if (Object.keys(query).length === 0) {\n      throw new DappError(\"Invalid request\", \"Invalid Params\" /* InvalidParams */);\n    }\n    return query;\n  };\n}\nfunction stringifySearchWith(stringify, parser) {\n  function stringifyValue(val) {\n    if (typeof val === \"object\" && val !== null) {\n      try {\n        return stringify(val);\n      } catch (err) {\n      }\n    } else if (typeof val === \"string\" && typeof parser === \"function\") {\n      try {\n        parser(val);\n        return stringify(val);\n      } catch (err) {\n      }\n    }\n    return val;\n  }\n  return (search) => {\n    search = { ...search };\n    if (search) {\n      Object.keys(search).forEach((key) => {\n        const val = search[key];\n        if (typeof val === \"undefined\" || val === void 0) {\n          delete search[key];\n        } else {\n          search[key] = stringifyValue(val);\n        }\n      });\n    }\n    const searchStr = encode(search).toString();\n    return searchStr ? `?${searchStr}` : \"\";\n  };\n}\nvar decodeSearch = parseSearchWith(JSON.parse);\nvar encodeSearch = stringifySearchWith(JSON.stringify, JSON.parse);\n\n// src/utils/func.ts\nvar safeExec = (fn) => {\n  try {\n    return fn();\n  } catch (error) {\n    return null;\n  }\n};\n\n// src/utils/buffer.ts\nfunction base64URLStringToBuffer(base64URLString) {\n  const base64 = base64URLString.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  const padLength = (4 - base64.length % 4) % 4;\n  const padded = base64.padEnd(base64.length + padLength, \"=\");\n  const binary = atob(padded);\n  const buffer = new ArrayBuffer(binary.length);\n  const bytes = new Uint8Array(buffer);\n  for (let i = 0; i < binary.length; i++) {\n    bytes[i] = binary.charCodeAt(i);\n  }\n  return buffer;\n}\nfunction bufferToBase64URLString(buffer) {\n  const bytes = new Uint8Array(buffer);\n  let str = \"\";\n  for (let i = 0; i < bytes.length; i++) {\n    const charCode = bytes[i];\n    if (charCode != null) {\n      str += String.fromCharCode(charCode);\n    }\n  }\n  const base64String = btoa(str);\n  return base64String.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=/g, \"\");\n}\nfunction hexToArrayBuffer(input) {\n  const view = new Uint8Array(input.length / 2);\n  for (let i = 0; i < input.length; i += 2) {\n    view[i / 2] = Number.parseInt(input.substring(i, i + 2), 16);\n  }\n  return view.buffer;\n}\nfunction bufferToHex(buffer) {\n  return [...new Uint8Array(buffer)].map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n}\nfunction appendBuffer(buffer1, buffer2) {\n  const tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n  tmp.set(new Uint8Array(buffer1), 0);\n  tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n  return tmp.buffer;\n}\nfunction bufferToUTF8String(value) {\n  return new TextDecoder(\"utf-8\").decode(value);\n}\nfunction utf8StringToBuffer(value) {\n  return new TextEncoder().encode(value);\n}\nfunction hexToUTF8String(value) {\n  return bufferToUTF8String(hexToArrayBuffer(value));\n}\nfunction remove0x(hex) {\n  return hex.startsWith(\"0x\") ? hex.slice(2) : hex;\n}\nfunction append0x(hex) {\n  return hex.startsWith(\"0x\") ? hex : `0x${hex}`;\n}\nfunction hexToString(hex) {\n  let str = \"\";\n  for (let i = 0; i < hex.length; i += 2)\n    str += String.fromCharCode(Number.parseInt(hex.substr(i, 2), 16));\n  return str;\n}\nfunction base64urlToHex(s) {\n  return bufferToHex(base64URLStringToBuffer(s));\n}\n\n// src/utils/browser.ts\nfunction isStandaloneBrowser() {\n  return window.matchMedia(\"(display-mode: standalone)\").matches || window.navigator.standalone;\n}\n\n// src/types/dapp.ts\nvar SigningAlg = /* @__PURE__ */ ((SigningAlg2) => {\n  SigningAlg2[SigningAlg2[\"RS256\"] = -257] = \"RS256\";\n  SigningAlg2[SigningAlg2[\"ES256\"] = -7] = \"ES256\";\n  return SigningAlg2;\n})(SigningAlg || {});\nvar DappRequestType = /* @__PURE__ */ ((DappRequestType2) => {\n  DappRequestType2[\"Auth\"] = \"Auth\";\n  DappRequestType2[\"SignMessage\"] = \"SignMessage\";\n  DappRequestType2[\"SignEvm\"] = \"SignEvm\";\n  DappRequestType2[\"SignPsbt\"] = \"SignPsbt\";\n  DappRequestType2[\"BatchSignPsbt\"] = \"BatchSignPsbt\";\n  DappRequestType2[\"SignCkbTx\"] = \"SignCkbTx\";\n  DappRequestType2[\"SignCotaNFT\"] = \"SignCotaNFT\";\n  DappRequestType2[\"SignCkbRawTx\"] = \"SignCkbRawTx\";\n  DappRequestType2[\"SignNostrEvent\"] = \"SignNostrEvent\";\n  DappRequestType2[\"EncryptNostrMessage\"] = \"EncryptNostrMessage\";\n  DappRequestType2[\"EvmWeb2Login\"] = \"EvmWeb2Login\";\n  DappRequestType2[\"DecryptNostrMessage\"] = \"DecryptNostrMessage\";\n  DappRequestType2[\"AuthMiniApp\"] = \"AuthMiniApp\";\n  DappRequestType2[\"SignMiniAppMessage\"] = \"SignMiniAppMessage\";\n  DappRequestType2[\"SignMiniAppEvm\"] = \"SignMiniAppEvm\";\n  return DappRequestType2;\n})(DappRequestType || {});\nvar DappCommunicationType = /* @__PURE__ */ ((DappCommunicationType2) => {\n  DappCommunicationType2[\"Popup\"] = \"popup\";\n  DappCommunicationType2[\"Redirect\"] = \"redirect\";\n  return DappCommunicationType2;\n})(DappCommunicationType || {});\nvar SESSION_KEY_VER = \"00\";\n\n// src/types/nostr.ts\nvar EventKind = /* @__PURE__ */ ((EventKind2) => {\n  EventKind2[EventKind2[\"Metadata\"] = 0] = \"Metadata\";\n  EventKind2[EventKind2[\"Text\"] = 1] = \"Text\";\n  EventKind2[EventKind2[\"RecommendRelay\"] = 2] = \"RecommendRelay\";\n  EventKind2[EventKind2[\"Contacts\"] = 3] = \"Contacts\";\n  EventKind2[EventKind2[\"EncryptedDirectMessage\"] = 4] = \"EncryptedDirectMessage\";\n  EventKind2[EventKind2[\"EventDeletion\"] = 5] = \"EventDeletion\";\n  EventKind2[EventKind2[\"Repost\"] = 6] = \"Repost\";\n  EventKind2[EventKind2[\"Reaction\"] = 7] = \"Reaction\";\n  EventKind2[EventKind2[\"BadgeAward\"] = 8] = \"BadgeAward\";\n  EventKind2[EventKind2[\"ChannelCreation\"] = 40] = \"ChannelCreation\";\n  EventKind2[EventKind2[\"ChannelMetadata\"] = 41] = \"ChannelMetadata\";\n  EventKind2[EventKind2[\"ChannelMessage\"] = 42] = \"ChannelMessage\";\n  EventKind2[EventKind2[\"ChannelHideMessage\"] = 43] = \"ChannelHideMessage\";\n  EventKind2[EventKind2[\"ChannelMuteUser\"] = 44] = \"ChannelMuteUser\";\n  EventKind2[EventKind2[\"Blank\"] = 255] = \"Blank\";\n  EventKind2[EventKind2[\"Report\"] = 1984] = \"Report\";\n  EventKind2[EventKind2[\"ZapRequest\"] = 9734] = \"ZapRequest\";\n  EventKind2[EventKind2[\"Zap\"] = 9735] = \"Zap\";\n  EventKind2[EventKind2[\"RelayList\"] = 10002] = \"RelayList\";\n  EventKind2[EventKind2[\"ClientAuth\"] = 22242] = \"ClientAuth\";\n  EventKind2[EventKind2[\"HttpAuth\"] = 27235] = \"HttpAuth\";\n  EventKind2[EventKind2[\"ProfileBadge\"] = 30008] = \"ProfileBadge\";\n  EventKind2[EventKind2[\"BadgeDefinition\"] = 30009] = \"BadgeDefinition\";\n  EventKind2[EventKind2[\"Article\"] = 30023] = \"Article\";\n  return EventKind2;\n})(EventKind || {});\n\n// src/sdk/config.ts\nvar internalConfig = {\n  joyidAppURL: \"https://testnet.joyid.dev\"\n};\nvar initConfig = (config) => {\n  Object.assign(internalConfig, config);\n  return internalConfig;\n};\nvar getConfig = () => internalConfig;\n\n// src/sdk/errors.ts\nvar GenericError = class _GenericError extends Error {\n  constructor(error, error_description) {\n    super(error_description);\n    this.error = error;\n    this.error_description = error_description;\n    Object.setPrototypeOf(this, _GenericError.prototype);\n  }\n};\nvar TimeoutError = class _TimeoutError extends GenericError {\n  constructor() {\n    super(\"timeout\", \"Timeout\");\n    Object.setPrototypeOf(this, _TimeoutError.prototype);\n  }\n};\nvar PopupTimeoutError = class _PopupTimeoutError extends TimeoutError {\n  constructor(popup) {\n    super();\n    this.popup = popup;\n    Object.setPrototypeOf(this, _PopupTimeoutError.prototype);\n  }\n};\nvar PopupCancelledError = class _PopupCancelledError extends GenericError {\n  constructor(popup) {\n    super(\"cancelled\", \"Popup closed\");\n    this.popup = popup;\n    Object.setPrototypeOf(this, _PopupCancelledError.prototype);\n  }\n};\nvar PopupNotSupportedError = class extends GenericError {\n  constructor(popup) {\n    super(\n      \"NotSupported\",\n      \"Popup window is blocked by browser. see: https://docs.joy.id/guide/best-practice#popup-window-blocked\"\n    );\n    this.popup = popup;\n    Object.setPrototypeOf(this, PopupCancelledError.prototype);\n  }\n};\nvar RedirectErrorWithState = class extends Error {\n  constructor(message, state) {\n    super(message);\n    this.message = message;\n    this.state = state;\n    this.state = state;\n  }\n};\n\n// src/sdk/url.ts\nvar JOYID_REDIRECT = \"joyid-redirect\";\nvar getRedirectResponse = (uri) => {\n  const url = new URL(uri ?? window.location.href);\n  const data = url.searchParams.get(\"_data_\");\n  if (data == null) {\n    throw new Error(\"No data found\");\n  }\n  const res = decodeSearch(data);\n  if (res.error != null) {\n    throw new RedirectErrorWithState(res.error, res.state);\n  }\n  return res.data;\n};\nvar buildJoyIDURL = (request, type, path) => {\n  const joyidURL = request.joyidAppURL ?? getConfig().joyidAppURL;\n  const url = new URL(`${joyidURL}`);\n  url.pathname = path;\n  let redirectTo = request.redirectURL;\n  if (type === \"redirect\") {\n    const redirectURL = new URL(redirectTo);\n    redirectURL.searchParams.set(JOYID_REDIRECT, \"true\");\n    redirectTo = redirectURL.href;\n  }\n  url.searchParams.set(\"type\", type);\n  const data = encodeSearch({\n    ...request,\n    redirectURL: redirectTo\n  });\n  url.searchParams.set(\"_data_\", data);\n  return url.href;\n};\nvar isRedirectFromJoyID = (uri) => {\n  try {\n    const url = new URL(uri ?? window.location.href);\n    return url.searchParams.has(JOYID_REDIRECT);\n  } catch (error) {\n    return false;\n  }\n};\n\n// src/sdk/popup.ts\nvar DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS = 3e3;\nvar openPopup = (url = \"\") => {\n  const width = 400;\n  const height = 600;\n  const left = window.screenX + (window.innerWidth - width) / 2;\n  const top = window.screenY + (window.innerHeight - height) / 2;\n  return window.open(\n    url,\n    \"joyid:authorize:popup\",\n    `left=${left},top=${top},width=${width},height=${height},resizable,scrollbars=yes,status=1`\n  );\n};\nvar runPopup = async (config) => new Promise((resolve, reject) => {\n  if (isStandaloneBrowser()) {\n    reject(new PopupNotSupportedError(config.popup));\n  }\n  let popupEventListener;\n  let timeoutId;\n  const popupTimer = setInterval(() => {\n    if (config.popup?.closed) {\n      clearInterval(popupTimer);\n      clearTimeout(timeoutId);\n      window.removeEventListener(\"message\", popupEventListener, false);\n      reject(new PopupCancelledError(config.popup));\n    }\n  }, 1e3);\n  timeoutId = setTimeout(\n    () => {\n      clearInterval(popupTimer);\n      reject(new PopupTimeoutError(config.popup));\n      window.removeEventListener(\"message\", popupEventListener, false);\n    },\n    (config.timeoutInSeconds ?? DEFAULT_AUTHORIZE_TIMEOUT_IN_SECONDS) * 1e3\n  );\n  popupEventListener = (e) => {\n    const joyidAppURL = config.joyidAppURL ?? getConfig().joyidAppURL;\n    if (joyidAppURL == null) {\n      throw new Error(\"joyidAppURL is not set in the config\");\n    }\n    const appURL = new URL(joyidAppURL);\n    if (e.origin !== appURL.origin) {\n      return;\n    }\n    if (!e.data || e.data?.type !== config.type) {\n      return;\n    }\n    clearTimeout(timeoutId);\n    clearInterval(popupTimer);\n    window.removeEventListener(\"message\", popupEventListener, false);\n    config.popup.close();\n    if (e.data.error) {\n      reject(new Error(e.data.error));\n    }\n    resolve(e.data.data);\n  };\n  window.addEventListener(\"message\", popupEventListener);\n});\n\n// src/sdk/block-dialog.ts\nvar styleId = \"joyid-block-dialog-style\";\nvar approveId = \"joyid-block-dialog-approve\";\nvar rejectId = \"joyid-block-dialog-reject\";\nvar styleSheet = `\n.joyid-block-dialog {\n  position: fixed;\n  top: 32px;\n  left: 50%;\n  width: 340px;\n  margin-left: -170px;\n  background: white;\n  color: #333;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  align-items: center;\n  height: 110px;\n  z-index: 100002;\n  box-sizing: border-box;\n  border: 1px solid #ffffff;\n  border-radius: 8px;\n  padding: 16px 20px;\n}\n.joyid-block-dialog-bg {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  display: none;\n  z-index: 100001;\n  display: block;\n}\n.joyid-block-dialog-title {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n.joyid-block-dialog-tip {\n  font-size: 12px;\n  color: #777;\n}\n.joyid-block-dialog-btn {\n  width: 90px;\n  height: 35px;\n  font-size: 12px;\n  text-align: center;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.joyid-block-dialog-action {\n  text-align: right;\n}\n#${approveId} {\n  border: 1px solid #333;\n  color: #333;\n  background: #D2FF00;\n  margin-bottom: 8px;\n}\n\n#${rejectId} {\n  background: transparent;\n}\n`;\nvar dialogInnerHtml = `\n<div class=\"joyid-block-dialog\">\n  <div class=\"joyid-block-dialog-content\">\n    <div class=\"joyid-block-dialog-title\">\n      Request Pop-up\n    </div>\n    <div class=\"joyid-block-dialog-tip\">\n      Click Approve to complete creating or using wallet\n    </div>\n  </div>\n  <div class=\"joyid-block-dialog-action\">\n    <button class=\"joyid-block-dialog-btn\" id=\"${approveId}\">Approve</button>\n    <button class=\"joyid-block-dialog-btn\" id=\"${rejectId}\">Reject</button>\n  </div>\n</div>\n`;\nvar appendStyle = () => {\n  const _style = document.getElementById(styleId);\n  if (_style != null) {\n    return;\n  }\n  const style = document.createElement(\"style\");\n  style.appendChild(document.createTextNode(styleSheet));\n  const head = document.head ?? document.getElementsByTagName(\"head\")[0];\n  head.appendChild(style);\n};\nvar createBlockDialog = async (cb) => {\n  appendStyle();\n  const dialog = document.createElement(\"div\");\n  dialog.innerHTML = dialogInnerHtml;\n  document.body.appendChild(dialog);\n  const dialogBg = document.createElement(\"div\");\n  dialogBg.className = \"joyid-block-dialog-bg\";\n  document.body.appendChild(dialogBg);\n  const approveBtn = document.getElementById(approveId);\n  const rejectBtn = document.getElementById(rejectId);\n  const closeDialog = () => {\n    document.body.removeChild(dialog);\n    document.body.removeChild(dialogBg);\n  };\n  return new Promise((resolve, reject) => {\n    approveBtn?.addEventListener(\"click\", async () => {\n      try {\n        const data = await cb();\n        closeDialog();\n        resolve(data);\n      } catch (error) {\n        closeDialog();\n        reject(error);\n      }\n    });\n    rejectBtn?.addEventListener(\"click\", () => {\n      closeDialog();\n      reject(new Error(\"User Rejected\"));\n    });\n  });\n};\n\n// src/sdk/auth.ts\nvar buildJoyIDAuthURL = (request, type) => buildJoyIDURL(request, type, \"/auth\");\nvar authWithRedirect = (request) => {\n  window.location.assign(buildJoyIDAuthURL(request, \"redirect\"));\n};\nvar authWithPopup = async (request, config) => {\n  config = config ?? {};\n  if (config.popup == null) {\n    config.popup = openPopup(\"\");\n    if (config.popup == null) {\n      return createBlockDialog(async () => authWithPopup(request, config));\n    }\n  }\n  config.popup.location.href = buildJoyIDAuthURL(\n    request,\n    \"popup\" /* Popup */\n  );\n  return runPopup({\n    ...config,\n    type: \"Auth\" /* Auth */\n  });\n};\nvar authCallback = (uri) => getRedirectResponse(uri);\n\n// src/sdk/sign-messge.ts\nvar buildJoyIDSignMessageURL = (request, type) => buildJoyIDURL(request, type, \"/sign-message\");\nvar signMessageWithRedirect = (request) => {\n  window.location.assign(buildJoyIDSignMessageURL(request, \"redirect\"));\n};\nvar signMessageWithPopup = async (request, config) => {\n  config = config ?? {};\n  if (config.popup == null) {\n    config.popup = openPopup(\"\");\n    if (config.popup == null) {\n      return createBlockDialog(\n        async () => signMessageWithPopup(request, config)\n      );\n    }\n  }\n  config.popup.location.href = buildJoyIDSignMessageURL(request, \"popup\");\n  return runPopup({\n    ...config,\n    type: \"SignMessage\" /* SignMessage */\n  });\n};\nvar signMessageCallback = (uri) => getRedirectResponse(uri);\nexport {\n  DappCommunicationType,\n  DappError,\n  DappErrorName,\n  DappRequestType,\n  EventKind,\n  GenericError,\n  PopupCancelledError,\n  PopupNotSupportedError,\n  PopupTimeoutError,\n  RedirectErrorWithState,\n  SESSION_KEY_VER,\n  SigningAlg,\n  TimeoutError,\n  append0x,\n  appendBuffer,\n  appendStyle,\n  authCallback,\n  authWithPopup,\n  authWithRedirect,\n  base64URLStringToBuffer,\n  base64urlToHex,\n  bufferToBase64URLString,\n  bufferToHex,\n  bufferToUTF8String,\n  buildJoyIDAuthURL,\n  buildJoyIDSignMessageURL,\n  buildJoyIDURL,\n  createBlockDialog,\n  decodeSearch,\n  encodeSearch,\n  getConfig,\n  getRedirectResponse,\n  hexToArrayBuffer,\n  hexToString,\n  hexToUTF8String,\n  initConfig,\n  internalConfig,\n  isRedirectFromJoyID,\n  isStandaloneBrowser,\n  openPopup,\n  parseSearchWith,\n  remove0x,\n  runPopup,\n  safeExec,\n  signMessageCallback,\n  signMessageWithPopup,\n  signMessageWithRedirect,\n  stringifySearchWith,\n  utf8StringToBuffer\n};\n//# sourceMappingURL=index.js.map","// src/index.ts\nimport {\n  DappRequestType,\n  getRedirectResponse,\n  internalConfig,\n  buildJoyIDURL,\n  signMessageWithPopup,\n  signMessageWithRedirect as signWithRedirect,\n  signMessageCallback as signCallback,\n  buildJoyIDSignMessageURL,\n  authCallback,\n  authWithPopup,\n  authWithRedirect,\n  buildJoyIDAuthURL,\n  openPopup,\n  runPopup,\n  createBlockDialog,\n  bufferToHex,\n  safeExec\n} from \"@joyid/common\";\nimport {\n  safeExec as safeExec2\n} from \"@joyid/common\";\nvar JOYID_STORAGE_KEY = \"joyid:ethereum::address\";\nvar buildSignTxURL = (config, type = \"popup\") => buildJoyIDURL(\n  {\n    ...internalConfig,\n    ...config\n  },\n  type,\n  \"/sign-evm\"\n);\nvar buildSignTypedDataUrl = (config, type = \"popup\") => buildJoyIDURL(\n  {\n    ...internalConfig,\n    ...config\n  },\n  type,\n  \"/sign-typed-data\"\n);\nvar buildConnectUrl = (config) => buildJoyIDAuthURL(\n  {\n    ...internalConfig,\n    ...config,\n    requestNetwork: \"ethereum\"\n  },\n  \"redirect\"\n);\nvar buildSignMessageUrl = (message, config, type = \"popup\") => {\n  const isData = typeof message !== \"string\";\n  return buildJoyIDSignMessageURL(\n    {\n      ...internalConfig,\n      ...config,\n      requestNetwork: \"ethereum\",\n      challenge: typeof message === \"string\" ? message : bufferToHex(message),\n      isData\n    },\n    type\n  );\n};\nvar initConfig = (config) => {\n  Object.assign(internalConfig, config);\n  return internalConfig;\n};\nvar getConfig = () => internalConfig;\nvar connect = async (config) => {\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  const res = await authWithPopup({\n    redirectURL: location.href,\n    requestNetwork: \"ethereum\",\n    ...config\n  });\n  safeExec(() => {\n    localStorage.setItem(JOYID_STORAGE_KEY, res.ethAddress);\n  });\n  return res.ethAddress;\n};\nvar disconnect = () => {\n  safeExec(() => {\n    localStorage.removeItem(JOYID_STORAGE_KEY);\n  });\n};\nvar getConnectedAddress = () => safeExec(() => localStorage.getItem(JOYID_STORAGE_KEY)) ?? null;\nvar ensureSignerAddress = (signerAddress) => {\n  let address = signerAddress;\n  if (address == null) {\n    const connected = getConnectedAddress();\n    if (connected != null) {\n      address = connected;\n    }\n  }\n  if (address == null) {\n    throw new Error(\"signerAddress is required\");\n  }\n  return address;\n};\nvar connectWithRedirect = (redirectURL, config) => {\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  authWithRedirect({\n    redirectURL,\n    requestNetwork: \"ethereum\",\n    ...config\n  });\n};\nvar connectCallback = (uri) => {\n  const { state, ethAddress: address } = authCallback(uri);\n  safeExec(() => {\n    localStorage.setItem(JOYID_STORAGE_KEY, address);\n  });\n  if (state != null) {\n    return {\n      state,\n      address\n    };\n  }\n  return {\n    address\n  };\n};\nvar signMessage = async (message, signerAddress, config) => {\n  const isData = typeof message !== \"string\";\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  signerAddress = ensureSignerAddress(signerAddress);\n  const res = await signMessageWithPopup({\n    requestNetwork: \"ethereum\",\n    challenge: typeof message === \"string\" ? message : bufferToHex(message),\n    isData,\n    address: signerAddress,\n    redirectURL: location.href,\n    ...config\n  });\n  return res.signature;\n};\nvar signMessageWithRedirect = (redirectURL, message, signerAddress, config) => {\n  const isData = typeof message !== \"string\";\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  signerAddress = ensureSignerAddress(signerAddress);\n  signWithRedirect({\n    requestNetwork: \"ethereum\",\n    challenge: typeof message === \"string\" ? message : bufferToHex(message),\n    isData,\n    address: signerAddress,\n    redirectURL,\n    ...config\n  });\n};\nvar signMessageCallback = (uri) => {\n  const { signature, state } = signCallback(uri);\n  if (state != null) {\n    return {\n      state,\n      signature\n    };\n  }\n  return {\n    signature\n  };\n};\nvar signTypedData = async (typedData, signerAddress, config) => {\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  signerAddress = ensureSignerAddress(signerAddress);\n  if (config.popup == null) {\n    config.popup = openPopup(\"\");\n    if (config.popup == null) {\n      return createBlockDialog(\n        async () => signTypedData(typedData, signerAddress, config)\n      );\n    }\n  }\n  const { popup, timeoutInSeconds, ...dappConfig } = config;\n  config.popup.location.href = buildSignTypedDataUrl({\n    ...dappConfig,\n    typedData,\n    signerAddress,\n    redirectURL: location.href\n  });\n  const res = await runPopup({\n    timeoutInSeconds: timeoutInSeconds ?? 5e3,\n    popup,\n    type: DappRequestType.SignMessage\n  });\n  return res.signature;\n};\nvar signTypedDataWithRedirect = (redirectURL, typedData, signerAddress, config) => {\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  const url = buildSignTypedDataUrl(\n    {\n      ...config,\n      typedData,\n      signerAddress,\n      redirectURL\n    },\n    \"redirect\"\n  );\n  window.location.assign(url);\n};\nvar signTypedDataCallback = signMessageCallback;\nvar signTxWithPopupBase = async (tx, signerAddress, config, isSend) => {\n  const signer = signerAddress ?? tx.from ?? getConnectedAddress();\n  if (signer == null) {\n    throw new Error(\"signerAddress or tx.from is required\");\n  }\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  if (config.popup == null) {\n    config.popup = openPopup(\"\");\n    if (config.popup == null) {\n      return createBlockDialog(\n        async () => signTxWithPopupBase(tx, signer, config, isSend)\n      );\n    }\n  }\n  const { popup, timeoutInSeconds, ...dappConfig } = config;\n  config.popup.location.href = buildSignTxURL({\n    ...dappConfig,\n    tx,\n    signerAddress: signer,\n    redirectURL: location.href,\n    isSend\n  });\n  const res = await runPopup({\n    timeoutInSeconds: timeoutInSeconds ?? 5e3,\n    popup,\n    type: DappRequestType.SignEvm\n  });\n  return res.tx;\n};\nvar signTransaction = async (tx, signerAddress, config) => signTxWithPopupBase(tx, signerAddress, config, false);\nvar sendTransaction = async (tx, signerAddress, config) => signTxWithPopupBase(tx, signerAddress, config, true);\nvar signTransactionRedirectBase = (redirectURL, tx, signerAddress, config, isSend) => {\n  const signer = signerAddress ?? tx.from ?? getConnectedAddress();\n  if (signer == null) {\n    throw new Error(\"signerAddress or tx.from is required\");\n  }\n  config = {\n    ...internalConfig,\n    ...config\n  };\n  const url = buildSignTxURL(\n    {\n      ...config,\n      tx,\n      signerAddress: signer,\n      redirectURL,\n      isSend\n    },\n    \"redirect\"\n  );\n  window.location.assign(url);\n};\nvar signTransactionWithRedirect = (redirectURL, tx, signerAddress, config) => {\n  signTransactionRedirectBase(redirectURL, tx, signerAddress, config, false);\n};\nvar sendTransactionWithRedirect = (redirectURL, tx, signerAddress, config) => {\n  signTransactionRedirectBase(redirectURL, tx, signerAddress, config, true);\n};\nvar signTransactionCallback = (uri) => {\n  const { tx, state } = getRedirectResponse(uri);\n  if (state != null) {\n    return {\n      state,\n      tx\n    };\n  }\n  return {\n    tx\n  };\n};\nvar sendTransactionCallback = signTransactionCallback;\n\nexport {\n  buildSignTxURL,\n  buildSignTypedDataUrl,\n  buildConnectUrl,\n  buildSignMessageUrl,\n  initConfig,\n  getConfig,\n  connect,\n  disconnect,\n  getConnectedAddress,\n  connectWithRedirect,\n  connectCallback,\n  signMessage,\n  signMessageWithRedirect,\n  signMessageCallback,\n  signTypedData,\n  signTypedDataWithRedirect,\n  signTypedDataCallback,\n  signTransaction,\n  sendTransaction,\n  signTransactionRedirectBase,\n  signTransactionWithRedirect,\n  sendTransactionWithRedirect,\n  signTransactionCallback,\n  sendTransactionCallback,\n  safeExec2 as safeExec\n};\n//# sourceMappingURL=chunk-XDRWIFW4.js.map","// src/index.ts\nimport {\n  http,\n  isHex,\n  bytesToString,\n  toBytes,\n  ProviderRpcError\n} from \"viem\";\nimport {\n  connect,\n  getConnectedAddress,\n  initConfig,\n  sendTransaction,\n  signMessage,\n  signTypedData,\n  disconnect,\n  safeExec\n} from \"@joyid/evm\";\nimport EventEmitter from \"eventemitter3\";\nimport {\n  getConnectedAddress as getConnectedAddress2,\n  initConfig as initConfig2,\n  disconnect as disconnect2,\n  safeExec as safeExec2\n} from \"@joyid/evm\";\nfunction convertHexToUtf8(value) {\n  if (isHex(value)) {\n    return bytesToString(toBytes(value));\n  }\n  return value;\n}\nvar CHAIN_ID_STORAGE_KEY = \"joyid:ethereum:chainId\";\nvar EthereumProvider = class extends EventEmitter {\n  constructor(chains, config) {\n    super();\n    this.account = null;\n    this.request = async (args) => {\n      switch (args.method) {\n        case \"eth_requestAccounts\": {\n          const account = await this.connect();\n          this.account = account;\n          return [account];\n        }\n        case \"eth_accounts\": {\n          return [this.account];\n        }\n        case \"eth_chainId\": {\n          return this.chainId;\n        }\n        case \"eth_sign\": {\n          throw new Error(\"eth_sign is not supported, use personal_sign instead\");\n        }\n        case \"wallet_switchEthereumChain\": {\n          const chainId = args.params?.[0]?.chainId\n          this.switchChain(parseInt(chainId));\n          this.emit(\"chainChanged\", chainId);\n          return void 0;\n        }\n        case \"personal_sign\": {\n          const [data, address] = args.params;\n          const msg = convertHexToUtf8(data);\n          try {\n            const sig = await signMessage(\n              isHex(msg) ? toBytes(msg) : msg,\n              address\n            );\n            return sig;\n          } catch (error) {\n            throw new ProviderRpcError(error, {\n              code: 4001,\n              shortMessage: \"User rejected the request\"\n            });\n          }\n        }\n        case \"eth_sendTransaction\": {\n          const [tx] = args.params;\n          try {\n            const hash = await sendTransaction(tx);\n            return hash;\n          } catch (error) {\n            throw new ProviderRpcError(error, {\n              code: 4001,\n              shortMessage: \"User rejected the request\"\n            });\n          }\n        }\n        case \"eth_signTypedData_v4\": {\n          const [address, message] = args.params;\n          const msg = convertHexToUtf8(message);\n          try {\n            const sig = await signTypedData(JSON.parse(msg), address);\n            return sig;\n          } catch (error) {\n            throw new ProviderRpcError(error, {\n              code: 4001,\n              shortMessage: \"User rejected the request\"\n            });\n          }\n        }\n        default: {\n          const chain = this.chains.find((c) => c.id === this.chainId);\n          if (chain == null) {\n            throw new Error(\n              `Unsupported chain id: ${this.chainId}, chainId must be one of ${this.chains.map((c) => c.id).join(\",\")}`\n            );\n          }\n          const httpProvider = http(chain.rpcUrls.default.http[0]);\n          return httpProvider({\n            chain\n          }).request(args);\n        }\n      }\n    };\n    let chainId = config.network?.chainId ?? chains?.[0]?.id;\n    const chainIdFromStorage = safeExec(\n      () => localStorage.getItem(CHAIN_ID_STORAGE_KEY)\n    );\n    if (chainIdFromStorage != null) {\n      chainId = Number(chainIdFromStorage);\n    }\n    if (chainId == null) {\n      throw new Error(\"No chain provided\");\n    }\n    this.chainId = chainId;\n    this.account = getConnectedAddress();\n    this.chains = chains;\n    this.initConfig(chainId, config);\n  }\n  getAccount() {\n    return this.account ?? getConnectedAddress();\n  }\n  initConfig(chainId, config) {\n    const chain = this.chains.find((c) => c.id === chainId);\n    if (chain == null) {\n      throw new Error(\n        `Unsupported chain id: ${chainId}, chainId must be one of ${this.chains.map((c) => c.id).join(\",\")}`\n      );\n    }\n    const rpcURL = chain.rpcUrls.default.http[0];\n    if (!rpcURL) {\n      throw new Error(\"No rpc url provided in chains config\");\n    }\n    initConfig({\n      ...config,\n      network: {\n        chainId: chain.id,\n        name: chain.name,\n        nativeCurrency: chain.nativeCurrency,\n        rpcUrls: chain.rpcUrls.default.http,\n        blockExplorerUrls: chain.blockExplorers?.default.url ? [chain.blockExplorers.default.url] : void 0\n      }\n    });\n    this.chainId = chainId;\n    return chain;\n  }\n  switchChain(chainId) {\n    const chain = this.initConfig(chainId);\n    safeExec(() => {\n      localStorage.setItem(CHAIN_ID_STORAGE_KEY, chainId.toString());\n    });\n    return chain;\n  }\n  getChainId() {\n    return this.chainId;\n  }\n  async connect() {\n    const account = await connect();\n    this.emit(\"connect\", {\n      chainId: this.chainId.toString()\n    });\n    this.emit(\"accountsChanged\", [account]);\n    this.emit(\"chainChanged\", this.chainId.toString());\n    this.account = account;\n    return account;\n  }\n  disconnect() {\n    safeExec(() => {\n      this.emit(\"disconnect\");\n      this.account = null;\n      disconnect();\n      localStorage.removeItem(CHAIN_ID_STORAGE_KEY);\n    });\n  }\n};\nexport {\n  EthereumProvider,\n  disconnect2 as disconnect,\n  getConnectedAddress2 as getConnectedAddress,\n  initConfig2 as initConfig,\n  safeExec2 as safeExec\n};\n//# sourceMappingURL=index.mjs.map\n","import { EthereumProvider, EvmConfig } from \"@joyid/ethereum-provider\";\nimport {WC_V2_DEFAULT_CHAINS} from \"./WalletConnectV2Provider\";\nimport {Chain} from \"viem\";\nimport {CHAIN_CONFIG} from \"../../../integration/constants\";\n\nexport const getJoyIDProviderInstance = async () => {\n\n\tconst chainConfig: Chain[] = WC_V2_DEFAULT_CHAINS.map((chainId) => {\n\n\t\tconst chainData = CHAIN_CONFIG[chainId];\n\n\t\treturn <Chain>{\n\t\t\tid: chainId,\n\t\t\tname: \"ChainID \" + chainId,\n\t\t\tnativeCurrency: {\n\t\t\t\tname: \"Ethereum\",\n\t\t\t\tsymbol: \"ETH\",\n\t\t\t\tdecimals: 18\n\t\t\t},\n\t\t\trpcUrls: {\n\t\t\t\tdefault: {\n\t\t\t\t\thttp: typeof chainData.rpc === \"string\" ? [chainData.rpc] : chainData.rpc\n\t\t\t\t}\n\t\t\t},\n\t\t\tblockExplorers: chainData.explorer ? {\n\t\t\t\tdefault: {\n\t\t\t\t\tname: \"Default explorer\",\n\t\t\t\t\turl: chainData.explorer,\n\t\t\t\t\tapiUrl: \"\"\n\t\t\t\t}\n\t\t\t} : null,\n\t\t}\n\t});\n\n\treturn new EthereumProvider(chainConfig, {\n\t\tname: \"Smart Token Viewer\",\n\t\tlogo: `${location.origin}/assets/icon/icon.png`,\n\t\tjoyidAppURL: \"https://app.joy.id\",\n\t});\n};\n"],"mappings":"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"}