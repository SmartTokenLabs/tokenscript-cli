import{c as createCommonjsModule$1,a as commonjsGlobal,r as require$$0}from"./p-e52a38f8.js";import{V as ViewEvent,a as ViewController}from"./p-e3f47bbc.js";class ScriptURI{constructor(e){this.context=e;this.IPFS_REPLACE_GATEWAYS=["ipfs://","https://ipfs.io/ipfs/","https://gateway.pinata.cloud/ipfs/"]}async getTokenScriptXml(e){const t=await this.context.getWalletAdapter();const[r,i]=e.split("-");if(!i||i.indexOf("0x")!==0)throw new Error("Not a ScriptUri ID");let n=await t.call(parseInt(r),i,"scriptURI",[],["string"]);if(!n)throw new Error("ScriptURI is not set on this contract or chain");console.log("Resolved ScriptURI: "+n);for(let e of this.IPFS_REPLACE_GATEWAYS){if(this.context.config.ipfsGateway.indexOf(e)===0){continue}if(n.indexOf(e)===0){n=n.replace(e,this.context.config.ipfsGateway);break}}let s=await fetch(n);if(s.status<200||s.status>299)throw new Error("HTTP Error: "+s.status);return{xml:await s.text(),sourceUrl:n}}}class TokenScriptRepo{async getTokenScriptXml(e){if(!e.match(/^[a-zA-Z0-9]*$/))throw new Error("Not a valid tsId for TokenScript repo");const t=TokenScriptRepo.REPO_URL+e+".tsml";let r=await fetch(t);if(r.status<200||r.status>299)throw new Error("HTTP Error: "+r.status);return{xml:await r.text(),sourceUrl:t}}}TokenScriptRepo.REPO_URL="https://raw.githubusercontent.com/AlphaWallet/TokenScript-Repo/master/aw.app/2020/06/";class Repo{constructor(e){this.context=e}async getTokenScript(e,t=false){let r;try{const t=localStorage.getItem("ts-"+e);r=JSON.parse(t)}catch(e){}if(t||!r||!r.xml||Date.now()>r.timestamp+Repo.REPO_TTL*1e3){r=await this.resolveTokenScript(e);r.timestamp=Date.now();this.saveTokenScript(e,r)}return r}async resolveTokenScript(e){for(let t of Repo.REPO_SOURCES){try{return await new t(this.context).getTokenScriptXml(e)}catch(e){console.log("Failed to resolve tokenscript using resolver: "+t.name)}}throw new Error("Could not resolve tokenscript with ID: "+e)}deleteTokenScript(e){localStorage.removeItem("ts-"+e)}saveTokenScript(e,t){localStorage.setItem("ts-"+e,JSON.stringify(t))}}Repo.REPO_SOURCES=[ScriptURI,TokenScriptRepo];Repo.REPO_TTL=3600;class TokenViewData{constructor(e,t){this.tokenScript=e;this.card=t}async getCurrentTokenData(e=false){var t,r,i;const n=this.tokenScript.getCurrentTokenContext();const s={};const a=this.tokenScript.getAttributes();for(let t of a){try{s[t.getName()]=await t.getJsonSafeValue(e)}catch(e){console.warn(e)}}const o=this.card.getAttributes();for(let t of o){try{s[t.getName()]=await t.getJsonSafeValue(e)}catch(e){console.warn(e)}}let f;if(n){const e=n.selectedNftIndex!==undefined?n.nftDetails[n.selectedNftIndex]:null;f=Object.assign({name:(t=e===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:n.name,description:(r=e===null||e===void 0?void 0:e.description)!==null&&r!==void 0?r:n.description,label:n.name,symbol:n.symbol,_count:n.balance,contractAddress:n.collectionId,chainId:n.chainId,tokenId:n.selectedNftId,ownerAddress:await this.getCurrentOwnerAddress(),image_preview_url:(i=e===null||e===void 0?void 0:e.image)!==null&&i!==void 0?i:n.image},s)}else{const e=this.tokenScript.getContracts(true);const t=e[Object.keys(e)[0]].getFirstAddress();f=Object.assign({name:this.tokenScript.getName(),label:this.tokenScript.getLabel(),contractAddress:t===null||t===void 0?void 0:t.address,chainId:t===null||t===void 0?void 0:t.chain,ownerAddress:await this.getCurrentOwnerAddress()},s)}return f}getViewDataId(){var e;if(!this.viewContainerId){this.viewContainerId="token-card-"+((e=this.tokenScript.getCurrentTokenContext())===null||e===void 0?void 0:e.selectedNftId)}return this.viewContainerId}async getCurrentOwnerAddress(){const e=await this.tokenScript.getEngine().getWalletAdapter();return await e.getCurrentWalletAddress()}async getTokenJavascript(){var e;const t=await this.getCurrentTokenData();console.log("Loading view with data:");console.log(t);return`\n\n\t\tconst _currentTokenInstance = JSON.parse('${JSON.stringify(t).replace("^\\'","\\'")}');\n\n\t\tconst walletAddress = '${t.ownerAddress}'\n\t\tconst addressHex = "${t.ownerAddress}";\n\t\tconst rpcURL = "https://public-node-api.klaytnapi.com/v1/cypress"; // TODO: provide RPC URL\n\t\tconst chainID = "${t.chainId}";\n\n\t\twindow.web3CallBacks = {}\n\n\t\tfunction executeCallback (id, error, value) {\n\t\t\tconsole.debug('Execute callback: ' + id + ' ' + value)\n\t\t\twindow.web3CallBacks[id](error, value)\n\t\t\tdelete window.web3CallBacks[id]\n\t\t}\n\n\t\tweb3 = {\n\t\t\tpersonal: {\n\t\t\t\tsign: function (msgParams, cb) {\n\t\t\t\t\tconst { data } = msgParams\n\t\t\t\t\tconst { id = 8888 } = msgParams\n\t\t\t\t\twindow.web3CallBacks[id] = cb\n\t\t\t\t\talpha.signPersonalMessage(id, data);\n\t\t\t\t}\n\t\t\t},\n\t\t\ttokens: {\n\t\t\t\tdata: {\n\t\t\t\t\tcurrentInstance: {},\n\t\t\t\t},\n\t\t\t\tdataChanged: (prevTokens, newTokens, id) => {\n\t\t\t\t\tconsole.log('web3.tokens.data changed.')\n\t\t\t\t}\n\t\t\t},\n\t\t\taction: {\n\t\t\t\tsetProps: function (msgParams) {\n\t\t\t\t\talpha.setValues(JSON.stringify(msgParams));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tweb3.tokens.data.currentInstance = _currentTokenInstance\n\n\t\tfunction refresh() {\n\t\t   web3.tokens.dataChanged('test', web3.tokens.data, '${this.getViewDataId()}') //TODO: Cache previous value of token to feed into first arg\n\t\t}\n\n\t\twindow.onload = refresh;\n\n\t\tweb3.eth = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_1 = {\n\t\twalletBalance: 0\n\t\t}\n\t\tweb3.eth_8217 = {\n\t\twalletBalance: 0\n\t\t}\n\n\t\tdocument.addEventListener("DOMContentLoaded", function() {\n\t\t\trefresh();\n\t\t});\n\n\t\t${(e=this.tokenScript.getViewBinding())===null||e===void 0?void 0:e.getViewBindingJavascript()}\n\n\t\t`}}var bn$1=createCommonjsModule$1((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=n}else{t.BN=n}n.BN=n;n.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$0.Buffer}}catch(e){}n.isBN=function e(t){if(t instanceof n){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)};n.max=function e(t,r){if(t.cmp(r)>0)return t;return r};n.min=function e(t,r){if(t.cmp(r)<0)return t;return r};n.prototype._init=function e(t,i,n){if(typeof t==="number"){return this._initNumber(t,i,n)}if(typeof t==="object"){return this._initArray(t,i,n)}if(i==="hex"){i=16}r(i===(i|0)&&i>=2&&i<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(i===16){this._parseHex(t,s,n)}else{this._parseBase(t,i,s);if(n==="le"){this._initArray(this.toArray(),i,n)}}}};n.prototype._initNumber=function e(t,i,n){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(n!=="le")return;this._initArray(this.toArray(),i,n)};n.prototype._initArray=function e(t,i,n){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(n==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(n==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this._strip()};function a(e,t){var i=e.charCodeAt(t);if(i>=48&&i<=57){return i-48}else if(i>=65&&i<=70){return i-55}else if(i>=97&&i<=102){return i-87}else{r(false,"Invalid character in "+e)}}function o(e,t,r){var i=a(e,r);if(r-1>=t){i|=a(e,r-1)<<4}return i}n.prototype._parseHex=function e(t,r,i){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var n=0;n<this.length;n++){this.words[n]=0}var s=0;var a=0;var f;if(i==="be"){for(n=t.length-1;n>=r;n-=2){f=o(t,r,n)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(n=c%2===0?r+1:r;n<t.length;n+=2){f=o(t,r,n)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this._strip()};function f(e,t,i,n){var s=0;var a=0;var o=Math.min(e.length,i);for(var f=t;f<o;f++){var c=e.charCodeAt(f)-48;s*=n;if(c>=49){a=c-49+10}else if(c>=17){a=c-17+10}else{a=c}r(c>=0&&a<n,"Invalid character");s+=a}return s}n.prototype._parseBase=function e(t,r,i){this.words=[0];this.length=1;for(var n=0,s=1;s<=67108863;s*=r){n++}n--;s=s/r|0;var a=t.length-i;var o=a%n;var c=Math.min(a,a-o)+i;var u=0;for(var h=i;h<c;h+=n){u=f(t,h,h+n,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var l=1;u=f(t,h,t.length,r);for(h=0;h<o;h++){l*=r}this.imuln(l);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this._strip()};n.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};function c(e,t){e.words=t.words;e.length=t.length;e.negative=t.negative;e.red=t.red}n.prototype._move=function e(t){c(t,this)};n.prototype.clone=function e(){var t=new n(null);this.copy(t);return t};n.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};n.prototype._strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};n.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};if(typeof Symbol!=="undefined"&&typeof Symbol.for==="function"){try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(e){n.prototype.inspect=u}}else{n.prototype.inspect=u}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function e(t,i){t=t||10;i=i|0||1;var n;if(t===16||t==="hex"){n="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var c=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;s+=2;if(s>=26){s-=26;o--}if(a!==0||o!==this.length-1){n=h[6-c.length]+c+n}else{n=c+n}}if(a!==0){n=a.toString(16)+n}while(n.length%i!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}if(t===(t|0)&&t>=2&&t<=36){var u=l[t];var p=d[t];n="";var b=this.clone();b.negative=0;while(!b.isZero()){var m=b.modrn(p).toString(t);b=b.idivn(p);if(!b.isZero()){n=h[u-m.length]+m+n}else{n=m+n}}if(this.isZero()){n="0"+n}while(n.length%i!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}r(false,"Base should be between 2 and 36")};n.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};n.prototype.toJSON=function e(){return this.toString(16,2)};if(s){n.prototype.toBuffer=function e(t,r){return this.toArrayLike(s,t,r)}}n.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};var p=function e(t,r){if(t.allocUnsafe){return t.allocUnsafe(r)}return new t(r)};n.prototype.toArrayLike=function e(t,i,n){this._strip();var s=this.byteLength();var a=n||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");var o=p(t,a);var f=i==="le"?"LE":"BE";this["_toArrayLike"+f](o,s);return o};n.prototype._toArrayLikeLE=function e(t,r){var i=0;var n=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|n;t[i++]=o&255;if(i<t.length){t[i++]=o>>8&255}if(i<t.length){t[i++]=o>>16&255}if(a===6){if(i<t.length){t[i++]=o>>24&255}n=0;a=0}else{n=o>>>24;a+=2}}if(i<t.length){t[i++]=n;while(i<t.length){t[i++]=0}}};n.prototype._toArrayLikeBE=function e(t,r){var i=t.length-1;var n=0;for(var s=0,a=0;s<this.length;s++){var o=this.words[s]<<a|n;t[i--]=o&255;if(i>=0){t[i--]=o>>8&255}if(i>=0){t[i--]=o>>16&255}if(a===6){if(i>=0){t[i--]=o>>24&255}n=0;a=0}else{n=o>>>24;a+=2}}if(i>=0){t[i--]=n;while(i>=0){t[i--]=0}}};if(Math.clz32){n.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{n.prototype._countBits=function e(t){var r=t;var i=0;if(r>=4096){i+=13;r>>>=13}if(r>=64){i+=7;r>>>=7}if(r>=8){i+=4;r>>>=4}if(r>=2){i+=2;r>>>=2}return i+r}}n.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var i=0;if((r&8191)===0){i+=13;r>>>=13}if((r&127)===0){i+=7;r>>>=7}if((r&15)===0){i+=4;r>>>=4}if((r&3)===0){i+=2;r>>>=2}if((r&1)===0){i++}return i};n.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function b(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var i=r/26|0;var n=r%26;t[r]=e.words[i]>>>n&1}return t}n.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var i=this._zeroBits(this.words[r]);t+=i;if(i!==26)break}return t};n.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};n.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};n.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};n.prototype.isNeg=function e(){return this.negative!==0};n.prototype.neg=function e(){return this.clone().ineg()};n.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};n.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this._strip()};n.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};n.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};n.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};n.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var i=0;i<r.length;i++){this.words[i]=this.words[i]&t.words[i]}this.length=r.length;return this._strip()};n.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};n.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};n.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};n.prototype.iuxor=function e(t){var r;var i;if(this.length>t.length){r=this;i=t}else{r=t;i=this}for(var n=0;n<i.length;n++){this.words[n]=r.words[n]^i.words[n]}if(this!==r){for(;n<r.length;n++){this.words[n]=r.words[n]}}this.length=r.length;return this._strip()};n.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};n.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};n.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};n.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var i=Math.ceil(t/26)|0;var n=t%26;this._expand(i);if(n>0){i--}for(var s=0;s<i;s++){this.words[s]=~this.words[s]&67108863}if(n>0){this.words[s]=~this.words[s]&67108863>>26-n}return this._strip()};n.prototype.notn=function e(t){return this.clone().inotn(t)};n.prototype.setn=function e(t,i){r(typeof t==="number"&&t>=0);var n=t/26|0;var s=t%26;this._expand(n+1);if(i){this.words[n]=this.words[n]|1<<s}else{this.words[n]=this.words[n]&~(1<<s)}return this._strip()};n.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var i,n;if(this.length>t.length){i=this;n=t}else{i=t;n=this}var s=0;for(var a=0;a<n.length;a++){r=(i.words[a]|0)+(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<i.length;a++){r=(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=i.length;if(s!==0){this.words[this.length]=s;this.length++}else if(i!==this){for(;a<i.length;a++){this.words[a]=i.words[a]}}return this};n.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};n.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var i=this.cmp(t);if(i===0){this.negative=0;this.length=1;this.words[0]=0;return this}var n,s;if(i>0){n=this;s=t}else{n=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(n.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<n.length;o++){r=(n.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<n.length&&n!==this){for(;o<n.length;o++){this.words[o]=n.words[o]}}this.length=Math.max(this.length,o);if(n!==this){this.negative=1}return this._strip()};n.prototype.sub=function e(t){return this.clone().isub(t)};function m(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i;i=i-1|0;var n=e.words[0]|0;var s=t.words[0]|0;var a=n*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<i;c++){var u=f>>>26;var h=f&67108863;var l=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=l;d++){var p=c-d|0;n=e.words[p]|0;s=t.words[d]|0;a=n*s+h;u+=a/67108864|0;h=a&67108863}r.words[c]=h|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r._strip()}var v=function e(t,r,i){var n=t.words;var s=r.words;var a=i.words;var o=0;var f;var c;var u;var h=n[0]|0;var l=h&8191;var d=h>>>13;var p=n[1]|0;var b=p&8191;var m=p>>>13;var v=n[2]|0;var y=v&8191;var w=v>>>13;var A=n[3]|0;var g=A&8191;var S=A>>>13;var E=n[4]|0;var _=E&8191;var $=E>>>13;var C=n[5]|0;var P=C&8191;var T=C>>>13;var I=n[6]|0;var x=I&8191;var N=I>>>13;var M=n[7]|0;var k=M&8191;var R=M>>>13;var B=n[8]|0;var O=B&8191;var D=B>>>13;var U=n[9]|0;var j=U&8191;var L=U>>>13;var K=s[0]|0;var V=K&8191;var H=K>>>13;var F=s[1]|0;var G=F&8191;var X=F>>>13;var Y=s[2]|0;var z=Y&8191;var W=Y>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ie=re&8191;var ne=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var he=s[8]|0;var le=he&8191;var de=he>>>13;var pe=s[9]|0;var be=pe&8191;var me=pe>>>13;i.negative=t.negative^r.negative;i.length=19;f=Math.imul(l,V);c=Math.imul(l,H);c=c+Math.imul(d,V)|0;u=Math.imul(d,H);var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(b,V);c=Math.imul(b,H);c=c+Math.imul(m,V)|0;u=Math.imul(m,H);f=f+Math.imul(l,G)|0;c=c+Math.imul(l,X)|0;c=c+Math.imul(d,G)|0;u=u+Math.imul(d,X)|0;var ye=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ye>>>26)|0;ye&=67108863;f=Math.imul(y,V);c=Math.imul(y,H);c=c+Math.imul(w,V)|0;u=Math.imul(w,H);f=f+Math.imul(b,G)|0;c=c+Math.imul(b,X)|0;c=c+Math.imul(m,G)|0;u=u+Math.imul(m,X)|0;f=f+Math.imul(l,z)|0;c=c+Math.imul(l,W)|0;c=c+Math.imul(d,z)|0;u=u+Math.imul(d,W)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(g,V);c=Math.imul(g,H);c=c+Math.imul(S,V)|0;u=Math.imul(S,H);f=f+Math.imul(y,G)|0;c=c+Math.imul(y,X)|0;c=c+Math.imul(w,G)|0;u=u+Math.imul(w,X)|0;f=f+Math.imul(b,z)|0;c=c+Math.imul(b,W)|0;c=c+Math.imul(m,z)|0;u=u+Math.imul(m,W)|0;f=f+Math.imul(l,q)|0;c=c+Math.imul(l,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(_,V);c=Math.imul(_,H);c=c+Math.imul($,V)|0;u=Math.imul($,H);f=f+Math.imul(g,G)|0;c=c+Math.imul(g,X)|0;c=c+Math.imul(S,G)|0;u=u+Math.imul(S,X)|0;f=f+Math.imul(y,z)|0;c=c+Math.imul(y,W)|0;c=c+Math.imul(w,z)|0;u=u+Math.imul(w,W)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(l,ee)|0;c=c+Math.imul(l,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(P,V);c=Math.imul(P,H);c=c+Math.imul(T,V)|0;u=Math.imul(T,H);f=f+Math.imul(_,G)|0;c=c+Math.imul(_,X)|0;c=c+Math.imul($,G)|0;u=u+Math.imul($,X)|0;f=f+Math.imul(g,z)|0;c=c+Math.imul(g,W)|0;c=c+Math.imul(S,z)|0;u=u+Math.imul(S,W)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(w,q)|0;u=u+Math.imul(w,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(l,ie)|0;c=c+Math.imul(l,ne)|0;c=c+Math.imul(d,ie)|0;u=u+Math.imul(d,ne)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(x,V);c=Math.imul(x,H);c=c+Math.imul(N,V)|0;u=Math.imul(N,H);f=f+Math.imul(P,G)|0;c=c+Math.imul(P,X)|0;c=c+Math.imul(T,G)|0;u=u+Math.imul(T,X)|0;f=f+Math.imul(_,z)|0;c=c+Math.imul(_,W)|0;c=c+Math.imul($,z)|0;u=u+Math.imul($,W)|0;f=f+Math.imul(g,q)|0;c=c+Math.imul(g,Q)|0;c=c+Math.imul(S,q)|0;u=u+Math.imul(S,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(w,ee)|0;u=u+Math.imul(w,te)|0;f=f+Math.imul(b,ie)|0;c=c+Math.imul(b,ne)|0;c=c+Math.imul(m,ie)|0;u=u+Math.imul(m,ne)|0;f=f+Math.imul(l,ae)|0;c=c+Math.imul(l,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(k,V);c=Math.imul(k,H);c=c+Math.imul(R,V)|0;u=Math.imul(R,H);f=f+Math.imul(x,G)|0;c=c+Math.imul(x,X)|0;c=c+Math.imul(N,G)|0;u=u+Math.imul(N,X)|0;f=f+Math.imul(P,z)|0;c=c+Math.imul(P,W)|0;c=c+Math.imul(T,z)|0;u=u+Math.imul(T,W)|0;f=f+Math.imul(_,q)|0;c=c+Math.imul(_,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(g,ee)|0;c=c+Math.imul(g,te)|0;c=c+Math.imul(S,ee)|0;u=u+Math.imul(S,te)|0;f=f+Math.imul(y,ie)|0;c=c+Math.imul(y,ne)|0;c=c+Math.imul(w,ie)|0;u=u+Math.imul(w,ne)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(l,ce)|0;c=c+Math.imul(l,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(O,V);c=Math.imul(O,H);c=c+Math.imul(D,V)|0;u=Math.imul(D,H);f=f+Math.imul(k,G)|0;c=c+Math.imul(k,X)|0;c=c+Math.imul(R,G)|0;u=u+Math.imul(R,X)|0;f=f+Math.imul(x,z)|0;c=c+Math.imul(x,W)|0;c=c+Math.imul(N,z)|0;u=u+Math.imul(N,W)|0;f=f+Math.imul(P,q)|0;c=c+Math.imul(P,Q)|0;c=c+Math.imul(T,q)|0;u=u+Math.imul(T,Q)|0;f=f+Math.imul(_,ee)|0;c=c+Math.imul(_,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(g,ie)|0;c=c+Math.imul(g,ne)|0;c=c+Math.imul(S,ie)|0;u=u+Math.imul(S,ne)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(w,ae)|0;u=u+Math.imul(w,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(l,le)|0;c=c+Math.imul(l,de)|0;c=c+Math.imul(d,le)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(j,V);c=Math.imul(j,H);c=c+Math.imul(L,V)|0;u=Math.imul(L,H);f=f+Math.imul(O,G)|0;c=c+Math.imul(O,X)|0;c=c+Math.imul(D,G)|0;u=u+Math.imul(D,X)|0;f=f+Math.imul(k,z)|0;c=c+Math.imul(k,W)|0;c=c+Math.imul(R,z)|0;u=u+Math.imul(R,W)|0;f=f+Math.imul(x,q)|0;c=c+Math.imul(x,Q)|0;c=c+Math.imul(N,q)|0;u=u+Math.imul(N,Q)|0;f=f+Math.imul(P,ee)|0;c=c+Math.imul(P,te)|0;c=c+Math.imul(T,ee)|0;u=u+Math.imul(T,te)|0;f=f+Math.imul(_,ie)|0;c=c+Math.imul(_,ne)|0;c=c+Math.imul($,ie)|0;u=u+Math.imul($,ne)|0;f=f+Math.imul(g,ae)|0;c=c+Math.imul(g,oe)|0;c=c+Math.imul(S,ae)|0;u=u+Math.imul(S,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(w,ce)|0;u=u+Math.imul(w,ue)|0;f=f+Math.imul(b,le)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(m,le)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(l,be)|0;c=c+Math.imul(l,me)|0;c=c+Math.imul(d,be)|0;u=u+Math.imul(d,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(j,G);c=Math.imul(j,X);c=c+Math.imul(L,G)|0;u=Math.imul(L,X);f=f+Math.imul(O,z)|0;c=c+Math.imul(O,W)|0;c=c+Math.imul(D,z)|0;u=u+Math.imul(D,W)|0;f=f+Math.imul(k,q)|0;c=c+Math.imul(k,Q)|0;c=c+Math.imul(R,q)|0;u=u+Math.imul(R,Q)|0;f=f+Math.imul(x,ee)|0;c=c+Math.imul(x,te)|0;c=c+Math.imul(N,ee)|0;u=u+Math.imul(N,te)|0;f=f+Math.imul(P,ie)|0;c=c+Math.imul(P,ne)|0;c=c+Math.imul(T,ie)|0;u=u+Math.imul(T,ne)|0;f=f+Math.imul(_,ae)|0;c=c+Math.imul(_,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(g,ce)|0;c=c+Math.imul(g,ue)|0;c=c+Math.imul(S,ce)|0;u=u+Math.imul(S,ue)|0;f=f+Math.imul(y,le)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(w,le)|0;u=u+Math.imul(w,de)|0;f=f+Math.imul(b,be)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(m,be)|0;u=u+Math.imul(m,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(j,z);c=Math.imul(j,W);c=c+Math.imul(L,z)|0;u=Math.imul(L,W);f=f+Math.imul(O,q)|0;c=c+Math.imul(O,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(k,ee)|0;c=c+Math.imul(k,te)|0;c=c+Math.imul(R,ee)|0;u=u+Math.imul(R,te)|0;f=f+Math.imul(x,ie)|0;c=c+Math.imul(x,ne)|0;c=c+Math.imul(N,ie)|0;u=u+Math.imul(N,ne)|0;f=f+Math.imul(P,ae)|0;c=c+Math.imul(P,oe)|0;c=c+Math.imul(T,ae)|0;u=u+Math.imul(T,oe)|0;f=f+Math.imul(_,ce)|0;c=c+Math.imul(_,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(g,le)|0;c=c+Math.imul(g,de)|0;c=c+Math.imul(S,le)|0;u=u+Math.imul(S,de)|0;f=f+Math.imul(y,be)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(w,be)|0;u=u+Math.imul(w,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(j,q);c=Math.imul(j,Q);c=c+Math.imul(L,q)|0;u=Math.imul(L,Q);f=f+Math.imul(O,ee)|0;c=c+Math.imul(O,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(k,ie)|0;c=c+Math.imul(k,ne)|0;c=c+Math.imul(R,ie)|0;u=u+Math.imul(R,ne)|0;f=f+Math.imul(x,ae)|0;c=c+Math.imul(x,oe)|0;c=c+Math.imul(N,ae)|0;u=u+Math.imul(N,oe)|0;f=f+Math.imul(P,ce)|0;c=c+Math.imul(P,ue)|0;c=c+Math.imul(T,ce)|0;u=u+Math.imul(T,ue)|0;f=f+Math.imul(_,le)|0;c=c+Math.imul(_,de)|0;c=c+Math.imul($,le)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(g,be)|0;c=c+Math.imul(g,me)|0;c=c+Math.imul(S,be)|0;u=u+Math.imul(S,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(j,ee);c=Math.imul(j,te);c=c+Math.imul(L,ee)|0;u=Math.imul(L,te);f=f+Math.imul(O,ie)|0;c=c+Math.imul(O,ne)|0;c=c+Math.imul(D,ie)|0;u=u+Math.imul(D,ne)|0;f=f+Math.imul(k,ae)|0;c=c+Math.imul(k,oe)|0;c=c+Math.imul(R,ae)|0;u=u+Math.imul(R,oe)|0;f=f+Math.imul(x,ce)|0;c=c+Math.imul(x,ue)|0;c=c+Math.imul(N,ce)|0;u=u+Math.imul(N,ue)|0;f=f+Math.imul(P,le)|0;c=c+Math.imul(P,de)|0;c=c+Math.imul(T,le)|0;u=u+Math.imul(T,de)|0;f=f+Math.imul(_,be)|0;c=c+Math.imul(_,me)|0;c=c+Math.imul($,be)|0;u=u+Math.imul($,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(j,ie);c=Math.imul(j,ne);c=c+Math.imul(L,ie)|0;u=Math.imul(L,ne);f=f+Math.imul(O,ae)|0;c=c+Math.imul(O,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(k,ce)|0;c=c+Math.imul(k,ue)|0;c=c+Math.imul(R,ce)|0;u=u+Math.imul(R,ue)|0;f=f+Math.imul(x,le)|0;c=c+Math.imul(x,de)|0;c=c+Math.imul(N,le)|0;u=u+Math.imul(N,de)|0;f=f+Math.imul(P,be)|0;c=c+Math.imul(P,me)|0;c=c+Math.imul(T,be)|0;u=u+Math.imul(T,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(j,ae);c=Math.imul(j,oe);c=c+Math.imul(L,ae)|0;u=Math.imul(L,oe);f=f+Math.imul(O,ce)|0;c=c+Math.imul(O,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(k,le)|0;c=c+Math.imul(k,de)|0;c=c+Math.imul(R,le)|0;u=u+Math.imul(R,de)|0;f=f+Math.imul(x,be)|0;c=c+Math.imul(x,me)|0;c=c+Math.imul(N,be)|0;u=u+Math.imul(N,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(j,ce);c=Math.imul(j,ue);c=c+Math.imul(L,ce)|0;u=Math.imul(L,ue);f=f+Math.imul(O,le)|0;c=c+Math.imul(O,de)|0;c=c+Math.imul(D,le)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(k,be)|0;c=c+Math.imul(k,me)|0;c=c+Math.imul(R,be)|0;u=u+Math.imul(R,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(j,le);c=Math.imul(j,de);c=c+Math.imul(L,le)|0;u=Math.imul(L,de);f=f+Math.imul(O,be)|0;c=c+Math.imul(O,me)|0;c=c+Math.imul(D,be)|0;u=u+Math.imul(D,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(j,be);c=Math.imul(j,me);c=c+Math.imul(L,be)|0;u=Math.imul(L,me);var Be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Be>>>26)|0;Be&=67108863;a[0]=ve;a[1]=ye;a[2]=we;a[3]=Ae;a[4]=ge;a[5]=Se;a[6]=Ee;a[7]=_e;a[8]=$e;a[9]=Ce;a[10]=Pe;a[11]=Te;a[12]=Ie;a[13]=xe;a[14]=Ne;a[15]=Me;a[16]=ke;a[17]=Re;a[18]=Be;if(o!==0){a[19]=o;i.length++}return i};if(!Math.imul){v=m}function y(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var i=0;var n=0;for(var s=0;s<r.length-1;s++){var a=n;n=0;var o=i&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var h=e.words[u]|0;var l=t.words[c]|0;var d=h*l;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;n+=a>>>26;a&=67108863}r.words[s]=o;i=a;a=n}if(i!==0){r.words[s]=i}else{r.length--}return r._strip()}function w(e,t,r){return y(e,t,r)}n.prototype.mulTo=function e(t,r){var i;var n=this.length+t.length;if(this.length===10&&t.length===10){i=v(this,t,r)}else if(n<63){i=m(this,t,r)}else if(n<1024){i=y(this,t,r)}else{i=w(this,t,r)}return i};n.prototype.mul=function e(t){var r=new n(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};n.prototype.mulf=function e(t){var r=new n(null);r.words=new Array(this.length+t.length);return w(this,t,r)};n.prototype.imul=function e(t){return this.clone().mulTo(t,this)};n.prototype.imuln=function e(t){var i=t<0;if(i)t=-t;r(typeof t==="number");r(t<67108864);var n=0;for(var s=0;s<this.length;s++){var a=(this.words[s]|0)*t;var o=(a&67108863)+(n&67108863);n>>=26;n+=a/67108864|0;n+=o>>>26;this.words[s]=o&67108863}if(n!==0){this.words[s]=n;this.length++}return i?this.ineg():this};n.prototype.muln=function e(t){return this.clone().imuln(t)};n.prototype.sqr=function e(){return this.mul(this)};n.prototype.isqr=function e(){return this.imul(this.clone())};n.prototype.pow=function e(t){var r=b(t);if(r.length===0)return new n(1);var i=this;for(var s=0;s<r.length;s++,i=i.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=i.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;i=i.mul(a)}}return i};n.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;var s=67108863>>>26-i<<26-i;var a;if(i!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<i;this.words[a]=c|o;o=f>>>26-i}if(o){this.words[a]=o;this.length++}}if(n!==0){for(a=this.length-1;a>=0;a--){this.words[a+n]=this.words[a]}for(a=0;a<n;a++){this.words[a]=0}this.length+=n}return this._strip()};n.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};n.prototype.iushrn=function e(t,i,n){r(typeof t==="number"&&t>=0);var s;if(i){s=(i-i%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=n;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var h=0;for(u=this.length-1;u>=0&&(h!==0||u>=s);u--){var l=this.words[u]|0;this.words[u]=h<<26-a|l>>>a;h=l&f}if(c&&h!==0){c.words[c.length++]=h}if(this.length===0){this.words[0]=0;this.length=1}return this._strip()};n.prototype.ishrn=function e(t,i,n){r(this.negative===0);return this.iushrn(t,i,n)};n.prototype.shln=function e(t){return this.clone().ishln(t)};n.prototype.ushln=function e(t){return this.clone().iushln(t)};n.prototype.shrn=function e(t){return this.clone().ishrn(t)};n.prototype.ushrn=function e(t){return this.clone().iushrn(t)};n.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;var s=1<<i;if(this.length<=n)return false;var a=this.words[n];return!!(a&s)};n.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=n){return this}if(i!==0){n++}this.length=Math.min(n,this.length);if(i!==0){var s=67108863^67108863>>>i<<i;this.words[this.length-1]&=s}return this._strip()};n.prototype.maskn=function e(t){return this.clone().imaskn(t)};n.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<=t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};n.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};n.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this._strip()};n.prototype.addn=function e(t){return this.clone().iaddn(t)};n.prototype.subn=function e(t){return this.clone().isubn(t)};n.prototype.iabs=function e(){this.negative=0;return this};n.prototype.abs=function e(){return this.clone().iabs()};n.prototype._ishlnsubmul=function e(t,i,n){var s=t.length+n;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+n]|0)+f;var c=(t.words[a]|0)*i;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+n]=o&67108863}for(;a<this.length-n;a++){o=(this.words[a+n]|0)+f;f=o>>26;this.words[a+n]=o&67108863}if(f===0)return this._strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this._strip()};n.prototype._wordDiv=function e(t,r){var i=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);i=26-f;if(i!==0){a=a.ushln(i);s.iushln(i);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new n(null);u.length=c+1;u.words=new Array(u.length);for(var h=0;h<u.length;h++){u.words[h]=0}}var l=s.clone()._ishlnsubmul(a,1,c);if(l.negative===0){s=l;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u._strip()}s._strip();if(r!=="div"&&i!==0){s.iushrn(i)}return{div:u||null,mod:s}};n.prototype.divmod=function e(t,i,s){r(!t.isZero());if(this.isZero()){return{div:new n(0),mod:new n(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,i);if(i!=="mod"){a=f.div.neg()}if(i!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),i);if(i!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),i);if(i!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new n(0),mod:this}}if(t.length===1){if(i==="div"){return{div:this.divn(t.words[0]),mod:null}}if(i==="mod"){return{div:null,mod:new n(this.modrn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}}return this._wordDiv(t,i)};n.prototype.div=function e(t){return this.divmod(t,"div",false).div};n.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};n.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};n.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var i=r.div.negative!==0?r.mod.isub(t):r.mod;var n=t.ushrn(1);var s=t.andln(1);var a=i.cmp(n);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};n.prototype.modrn=function e(t){var i=t<0;if(i)t=-t;r(t<=67108863);var n=(1<<26)%t;var s=0;for(var a=this.length-1;a>=0;a--){s=(n*s+(this.words[a]|0))%t}return i?-s:s};n.prototype.modn=function e(t){return this.modrn(t)};n.prototype.idivn=function e(t){var i=t<0;if(i)t=-t;r(t<=67108863);var n=0;for(var s=this.length-1;s>=0;s--){var a=(this.words[s]|0)+n*67108864;this.words[s]=a/t|0;n=a%t}this._strip();return i?this.ineg():this};n.prototype.divn=function e(t){return this.clone().idivn(t)};n.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var i=this;var s=t.clone();if(i.negative!==0){i=i.umod(t)}else{i=i.clone()}var a=new n(1);var o=new n(0);var f=new n(0);var c=new n(1);var u=0;while(i.isEven()&&s.isEven()){i.iushrn(1);s.iushrn(1);++u}var h=s.clone();var l=i.clone();while(!i.isZero()){for(var d=0,p=1;(i.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){i.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(h);o.isub(l)}a.iushrn(1);o.iushrn(1)}}for(var b=0,m=1;(s.words[0]&m)===0&&b<26;++b,m<<=1);if(b>0){s.iushrn(b);while(b-- >0){if(f.isOdd()||c.isOdd()){f.iadd(h);c.isub(l)}f.iushrn(1);c.iushrn(1)}}if(i.cmp(s)>=0){i.isub(s);a.isub(f);o.isub(c)}else{s.isub(i);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};n.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var i=this;var s=t.clone();if(i.negative!==0){i=i.umod(t)}else{i=i.clone()}var a=new n(1);var o=new n(0);var f=s.clone();while(i.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(i.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){i.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var h=0,l=1;(s.words[0]&l)===0&&h<26;++h,l<<=1);if(h>0){s.iushrn(h);while(h-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(i.cmp(s)>=0){i.isub(s);a.isub(o)}else{s.isub(i);o.isub(a)}}var d;if(i.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};n.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var i=t.clone();r.negative=0;i.negative=0;for(var n=0;r.isEven()&&i.isEven();n++){r.iushrn(1);i.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(i.isEven()){i.iushrn(1)}var s=r.cmp(i);if(s<0){var a=r;r=i;i=a}else if(s===0||i.cmpn(1)===0){break}r.isub(i)}while(true);return i.iushln(n)};n.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};n.prototype.isEven=function e(){return(this.words[0]&1)===0};n.prototype.isOdd=function e(){return(this.words[0]&1)===1};n.prototype.andln=function e(t){return this.words[0]&t};n.prototype.bincn=function e(t){r(typeof t==="number");var i=t%26;var n=(t-i)/26;var s=1<<i;if(this.length<=n){this._expand(n+1);this.words[n]|=s;return this}var a=s;for(var o=n;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};n.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};n.prototype.cmpn=function e(t){var i=t<0;if(this.negative!==0&&!i)return-1;if(this.negative===0&&i)return 1;this._strip();var n;if(this.length>1){n=1}else{if(i){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;n=s===t?0:s<t?-1:1}if(this.negative!==0)return-n|0;return n};n.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};n.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var i=this.length-1;i>=0;i--){var n=this.words[i]|0;var s=t.words[i]|0;if(n===s)continue;if(n<s){r=-1}else if(n>s){r=1}break}return r};n.prototype.gtn=function e(t){return this.cmpn(t)===1};n.prototype.gt=function e(t){return this.cmp(t)===1};n.prototype.gten=function e(t){return this.cmpn(t)>=0};n.prototype.gte=function e(t){return this.cmp(t)>=0};n.prototype.ltn=function e(t){return this.cmpn(t)===-1};n.prototype.lt=function e(t){return this.cmp(t)===-1};n.prototype.lten=function e(t){return this.cmpn(t)<=0};n.prototype.lte=function e(t){return this.cmp(t)<=0};n.prototype.eqn=function e(t){return this.cmpn(t)===0};n.prototype.eq=function e(t){return this.cmp(t)===0};n.red=function e(t){return new C(t)};n.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};n.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};n.prototype._forceRed=function e(t){this.red=t;return this};n.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};n.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};n.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};n.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};n.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};n.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};n.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};n.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};n.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};n.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};n.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};n.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};n.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};n.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var A={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e;this.p=new n(t,16);this.n=this.p.bitLength();this.k=new n(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}g.prototype._tmp=function e(){var t=new n(null);t.words=new Array(Math.ceil(this.n/13));return t};g.prototype.ireduce=function e(t){var r=t;var i;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);i=r.bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);if(n===0){r.words[0]=0;r.length=1}else if(n>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};g.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};g.prototype.imulK=function e(t){return t.imul(this.k)};function S(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(S,g);S.prototype.split=function e(t,r){var i=4194303;var n=Math.min(t.length,9);for(var s=0;s<n;s++){r.words[s]=t.words[s]}r.length=n;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&i;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&i)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};S.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var i=0;i<t.length;i++){var n=t.words[i]|0;r+=n*977;t.words[i]=r&67108863;r=n*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function E(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(E,g);function _(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(_,g);function $(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i($,g);$.prototype.imulK=function e(t){var r=0;for(var i=0;i<t.length;i++){var n=(t.words[i]|0)*19+r;var s=n&67108863;n>>>=26;t.words[i]=s;r=n}if(r!==0){t.words[t.length++]=r}return t};n._prime=function e(t){if(A[t])return A[t];var e;if(t==="k256"){e=new S}else if(t==="p224"){e=new E}else if(t==="p192"){e=new _}else if(t==="p25519"){e=new $}else{throw new Error("Unknown prime "+t)}A[t]=e;return e};function C(e){if(typeof e==="string"){var t=n._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}C.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};C.prototype._verify2=function e(t,i){r((t.negative|i.negative)===0,"red works only with positives");r(t.red&&t.red===i.red,"red works only with red numbers")};C.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);c(t,t.umod(this.m)._forceRed(this));return t};C.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};C.prototype.add=function e(t,r){this._verify2(t,r);var i=t.add(r);if(i.cmp(this.m)>=0){i.isub(this.m)}return i._forceRed(this)};C.prototype.iadd=function e(t,r){this._verify2(t,r);var i=t.iadd(r);if(i.cmp(this.m)>=0){i.isub(this.m)}return i};C.prototype.sub=function e(t,r){this._verify2(t,r);var i=t.sub(r);if(i.cmpn(0)<0){i.iadd(this.m)}return i._forceRed(this)};C.prototype.isub=function e(t,r){this._verify2(t,r);var i=t.isub(r);if(i.cmpn(0)<0){i.iadd(this.m)}return i};C.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};C.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};C.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};C.prototype.isqr=function e(t){return this.imul(t,t.clone())};C.prototype.sqr=function e(t){return this.mul(t,t)};C.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var i=this.m.andln(3);r(i%2===1);if(i===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new n(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var h=this.m.bitLength();h=new n(2*h*h).toRed(this);while(this.pow(h,u).cmp(c)!==0){h.redIAdd(c)}var l=this.pow(h,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var b=o;while(p.cmp(f)!==0){var m=p;for(var v=0;m.cmp(f)!==0;v++){m=m.redSqr()}r(v<b);var y=this.pow(l,new n(1).iushln(b-v-1));d=d.redMul(y);l=y.redSqr();p=p.redMul(l);b=v}return d};C.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};C.prototype.pow=function e(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var i=4;var s=new Array(1<<i);s[0]=new n(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var h=r.words[a];for(var l=u-1;l>=0;l--){var d=h>>l&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==i&&(a!==0||l!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};C.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};C.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};n.mont=function e(t){return new P(t)};function P(e){C.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new n(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}i(P,C);P.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};P.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};P.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var i=t.imul(r);var n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=i.isub(n).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};P.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var i=t.mul(r);var s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=i.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};P.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));const version$7="logger/5.7.0";let _permanentCensorErrors=false;let _censorErrors=false;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels["default"];let _globalLogger=null;function _checkNormalize(){try{const e=[];["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test".normalize(t)!=="test"){throw new Error("bad normalize")}}catch(r){e.push(t)}}));if(e.length){throw new Error("missing "+e.join(", "))}if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769)){throw new Error("broken implementation")}}catch(e){return e.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(e){e["DEBUG"]="DEBUG";e["INFO"]="INFO";e["WARNING"]="WARNING";e["ERROR"]="ERROR";e["OFF"]="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(e){e["UNKNOWN_ERROR"]="UNKNOWN_ERROR";e["NOT_IMPLEMENTED"]="NOT_IMPLEMENTED";e["UNSUPPORTED_OPERATION"]="UNSUPPORTED_OPERATION";e["NETWORK_ERROR"]="NETWORK_ERROR";e["SERVER_ERROR"]="SERVER_ERROR";e["TIMEOUT"]="TIMEOUT";e["BUFFER_OVERRUN"]="BUFFER_OVERRUN";e["NUMERIC_FAULT"]="NUMERIC_FAULT";e["MISSING_NEW"]="MISSING_NEW";e["INVALID_ARGUMENT"]="INVALID_ARGUMENT";e["MISSING_ARGUMENT"]="MISSING_ARGUMENT";e["UNEXPECTED_ARGUMENT"]="UNEXPECTED_ARGUMENT";e["CALL_EXCEPTION"]="CALL_EXCEPTION";e["INSUFFICIENT_FUNDS"]="INSUFFICIENT_FUNDS";e["NONCE_EXPIRED"]="NONCE_EXPIRED";e["REPLACEMENT_UNDERPRICED"]="REPLACEMENT_UNDERPRICED";e["UNPREDICTABLE_GAS_LIMIT"]="UNPREDICTABLE_GAS_LIMIT";e["TRANSACTION_REPLACED"]="TRANSACTION_REPLACED";e["ACTION_REJECTED"]="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:true,value:e,writable:false})}_log(e,t){const r=e.toLowerCase();if(LogLevels[r]==null){this.throwArgumentError("invalid log level name","logLevel",e)}if(_logLevel>LogLevels[r]){return}console.log.apply(console,t)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,t,r){if(_censorErrors){return this.makeError("censored error",t,{})}if(!t){t=Logger.errors.UNKNOWN_ERROR}if(!r){r={}}const i=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++){r+=HEX[t[e]>>4];r+=HEX[t[e]&15]}i.push(e+"=Uint8Array(0x"+r+")")}else{i.push(e+"="+JSON.stringify(t))}}catch(t){i.push(e+"="+JSON.stringify(r[e].toString()))}}));i.push(`code=${t}`);i.push(`version=${this.version}`);const n=e;let s="";switch(t){case ErrorCode.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:s=t;break}if(s){e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"}if(i.length){e+=" ("+i.join(", ")+")"}const a=new Error(e);a.reason=n;a.code=t;Object.keys(r).forEach((function(e){a[e]=r[e]}));return a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){if(!!e){return}this.throwError(t,r,i)}assertArgument(e,t,r,i){if(!!e){return}this.throwArgumentError(t,r,i)}checkNormalize(e){if(_normalizeError){this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}}checkSafeUint53(e,t){if(typeof e!=="number"){return}if(t==null){t="value not safe"}if(e<0||e>=9007199254740991){this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e})}if(e%1){this.throwError(t,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e})}}checkArgumentCount(e,t,r){if(r){r=": "+r}else{r=""}if(e<t){this.throwError("missing argument"+r,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:t})}if(e>t){this.throwError("too many arguments"+r,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}}checkNew(e,t){if(e===Object||e==null){this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}}checkAbstract(e,t){if(e===t){this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"})}else if(e===Object||e==null){this.throwError("missing new",Logger.errors.MISSING_NEW,{name:t.name})}}static globalLogger(){if(!_globalLogger){_globalLogger=new Logger(version$7)}return _globalLogger}static setCensorship(e,t){if(!e&&t){this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}if(_permanentCensorErrors){if(!e){return}this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e;_permanentCensorErrors=!!t}static setLogLevel(e){const t=LogLevels[e.toLowerCase()];if(t==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=t}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$6="bytes/5.7.0";const logger$6=new Logger(version$6);function isHexable(e){return!!e.toHexString}function addSlice(e){if(e.slice){return e}e.slice=function(){const t=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(e,t)))};return e}function isBytesLike(e){return isHexString(e)&&!(e.length%2)||isBytes(e)}function isInteger(e){return typeof e==="number"&&e==e&&e%1===0}function isBytes(e){if(e==null){return false}if(e.constructor===Uint8Array){return true}if(typeof e==="string"){return false}if(!isInteger(e.length)||e.length<0){return false}for(let t=0;t<e.length;t++){const r=e[t];if(!isInteger(r)||r<0||r>=256){return false}}return true}function arrayify(e,t){if(!t){t={}}if(typeof e==="number"){logger$6.checkSafeUint53(e,"invalid arrayify value");const t=[];while(e){t.unshift(e&255);e=parseInt(String(e/256))}if(t.length===0){t.push(0)}return addSlice(new Uint8Array(t))}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable(e)){e=e.toHexString()}if(isHexString(e)){let r=e.substring(2);if(r.length%2){if(t.hexPad==="left"){r="0"+r}else if(t.hexPad==="right"){r+="0"}else{logger$6.throwArgumentError("hex data is odd-length","value",e)}}const i=[];for(let e=0;e<r.length;e+=2){i.push(parseInt(r.substring(e,e+2),16))}return addSlice(new Uint8Array(i))}if(isBytes(e)){return addSlice(new Uint8Array(e))}return logger$6.throwArgumentError("invalid arrayify value","value",e)}function concat$3(e){const t=e.map((e=>arrayify(e)));const r=t.reduce(((e,t)=>e+t.length),0);const i=new Uint8Array(r);t.reduce(((e,t)=>{i.set(t,e);return e+t.length}),0);return addSlice(i)}function stripZeros(e){let t=arrayify(e);if(t.length===0){return t}let r=0;while(r<t.length&&t[r]===0){r++}if(r){t=t.slice(r)}return t}function zeroPad(e,t){e=arrayify(e);if(e.length>t){logger$6.throwArgumentError("value out of range","value",arguments[0])}const r=new Uint8Array(t);r.set(e,t-e.length);return addSlice(r)}function isHexString(e,t){if(typeof e!=="string"||!e.match(/^0x[0-9A-Fa-f]*$/)){return false}if(t&&e.length!==2+2*t){return false}return true}const HexCharacters="0123456789abcdef";function hexlify(e,t){if(!t){t={}}if(typeof e==="number"){logger$6.checkSafeUint53(e,"invalid hexlify value");let t="";while(e){t=HexCharacters[e&15]+t;e=Math.floor(e/16)}if(t.length){if(t.length%2){t="0"+t}return"0x"+t}return"0x00"}if(typeof e==="bigint"){e=e.toString(16);if(e.length%2){return"0x0"+e}return"0x"+e}if(t.allowMissingPrefix&&typeof e==="string"&&e.substring(0,2)!=="0x"){e="0x"+e}if(isHexable(e)){return e.toHexString()}if(isHexString(e)){if(e.length%2){if(t.hexPad==="left"){e="0x0"+e.substring(2)}else if(t.hexPad==="right"){e+="0"}else{logger$6.throwArgumentError("hex data is odd-length","value",e)}}return e.toLowerCase()}if(isBytes(e)){let t="0x";for(let r=0;r<e.length;r++){let i=e[r];t+=HexCharacters[(i&240)>>4]+HexCharacters[i&15]}return t}return logger$6.throwArgumentError("invalid hexlify value","value",e)}function hexDataLength(e){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)||e.length%2){return null}return(e.length-2)/2}function hexDataSlice(e,t,r){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)||e.length%2){logger$6.throwArgumentError("invalid hexData","value",e)}t=2+2*t;if(r!=null){return"0x"+e.substring(t,2+2*r)}return"0x"+e.substring(t)}function hexConcat(e){let t="0x";e.forEach((e=>{t+=hexlify(e).substring(2)}));return t}function hexValue(e){const t=hexStripZeros(hexlify(e,{hexPad:"left"}));if(t==="0x"){return"0x0"}return t}function hexStripZeros(e){if(typeof e!=="string"){e=hexlify(e)}if(!isHexString(e)){logger$6.throwArgumentError("invalid hex string","value",e)}e=e.substring(2);let t=0;while(t<e.length&&e[t]==="0"){t++}return"0x"+e.substring(t)}function hexZeroPad(e,t){if(typeof e!=="string"){e=hexlify(e)}else if(!isHexString(e)){logger$6.throwArgumentError("invalid hex string","value",e)}if(e.length>2*t+2){logger$6.throwArgumentError("value out of range","value",arguments[1])}while(e.length<2*t+2){e="0x0"+e.substring(2)}return e}function splitSignature(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(e)){let r=arrayify(e);if(r.length===64){t.v=27+(r[32]>>7);r[32]&=127;t.r=hexlify(r.slice(0,32));t.s=hexlify(r.slice(32,64))}else if(r.length===65){t.r=hexlify(r.slice(0,32));t.s=hexlify(r.slice(32,64));t.v=r[64]}else{logger$6.throwArgumentError("invalid signature string","signature",e)}if(t.v<27){if(t.v===0||t.v===1){t.v+=27}else{logger$6.throwArgumentError("signature invalid v byte","signature",e)}}t.recoveryParam=1-t.v%2;if(t.recoveryParam){r[32]|=128}t._vs=hexlify(r.slice(32,64))}else{t.r=e.r;t.s=e.s;t.v=e.v;t.recoveryParam=e.recoveryParam;t._vs=e._vs;if(t._vs!=null){const r=zeroPad(arrayify(t._vs),32);t._vs=hexlify(r);const i=r[0]>=128?1:0;if(t.recoveryParam==null){t.recoveryParam=i}else if(t.recoveryParam!==i){logger$6.throwArgumentError("signature recoveryParam mismatch _vs","signature",e)}r[0]&=127;const n=hexlify(r);if(t.s==null){t.s=n}else if(t.s!==n){logger$6.throwArgumentError("signature v mismatch _vs","signature",e)}}if(t.recoveryParam==null){if(t.v==null){logger$6.throwArgumentError("signature missing v and recoveryParam","signature",e)}else if(t.v===0||t.v===1){t.recoveryParam=t.v}else{t.recoveryParam=1-t.v%2}}else{if(t.v==null){t.v=27+t.recoveryParam}else{const r=t.v===0||t.v===1?t.v:1-t.v%2;if(t.recoveryParam!==r){logger$6.throwArgumentError("signature recoveryParam mismatch v","signature",e)}}}if(t.r==null||!isHexString(t.r)){logger$6.throwArgumentError("signature missing or invalid r","signature",e)}else{t.r=hexZeroPad(t.r,32)}if(t.s==null||!isHexString(t.s)){logger$6.throwArgumentError("signature missing or invalid s","signature",e)}else{t.s=hexZeroPad(t.s,32)}const r=arrayify(t.s);if(r[0]>=128){logger$6.throwArgumentError("signature s out of range","signature",e)}if(t.recoveryParam){r[0]|=128}const i=hexlify(r);if(t._vs){if(!isHexString(t._vs)){logger$6.throwArgumentError("signature invalid _vs","signature",e)}t._vs=hexZeroPad(t._vs,32)}if(t._vs==null){t._vs=i}else if(t._vs!==i){logger$6.throwArgumentError("signature _vs mismatch v and s","signature",e)}}t.yParityAndS=t._vs;t.compact=t.r+t.yParityAndS.substring(2);return t}const version$5="bignumber/5.7.0";var BN=bn$1.BN;const logger$5=new Logger(version$5);const _constructorGuard={};const MAX_SAFE=9007199254740991;let _warnedToStringRadix=false;class BigNumber$1{constructor(e,t){if(e!==_constructorGuard){logger$5.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"})}this._hex=t;this._isBigNumber=true;Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){if(this._hex[0]==="-"){return BigNumber$1.from(this._hex.substring(1))}return this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){const t=BigNumber$1.from(e);if(t.isZero()){throwFault("division-by-zero","div")}return toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const t=toBN(e);if(t.isNeg()){throwFault("division-by-zero","mod")}return toBigNumber(toBN(this).umod(t))}pow(e){const t=toBN(e);if(t.isNeg()){throwFault("negative-power","pow")}return toBigNumber(toBN(this).pow(t))}and(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault("unbound-bitwise-result","and")}return toBigNumber(toBN(this).and(t))}or(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault("unbound-bitwise-result","or")}return toBigNumber(toBN(this).or(t))}xor(e){const t=toBN(e);if(this.isNegative()||t.isNeg()){throwFault("unbound-bitwise-result","xor")}return toBigNumber(toBN(this).xor(t))}mask(e){if(this.isNegative()||e<0){throwFault("negative-width","mask")}return toBigNumber(toBN(this).maskn(e))}shl(e){if(this.isNegative()||e<0){throwFault("negative-width","shl")}return toBigNumber(toBN(this).shln(e))}shr(e){if(this.isNegative()||e<0){throwFault("negative-width","shr")}return toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch(e){throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return logger$5.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){if(arguments.length>0){if(arguments[0]===10){if(!_warnedToStringRadix){_warnedToStringRadix=true;logger$5.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")}}else if(arguments[0]===16){logger$5.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{})}else{logger$5.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})}}return toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber$1){return e}if(typeof e==="string"){if(e.match(/^-?0x[0-9a-f]+$/i)){return new BigNumber$1(_constructorGuard,toHex$2(e))}if(e.match(/^-?[0-9]+$/)){return new BigNumber$1(_constructorGuard,toHex$2(new BN(e)))}return logger$5.throwArgumentError("invalid BigNumber string","value",e)}if(typeof e==="number"){if(e%1){throwFault("underflow","BigNumber.from",e)}if(e>=MAX_SAFE||e<=-MAX_SAFE){throwFault("overflow","BigNumber.from",e)}return BigNumber$1.from(String(e))}const t=e;if(typeof t==="bigint"){return BigNumber$1.from(t.toString())}if(isBytes(t)){return BigNumber$1.from(hexlify(t))}if(t){if(t.toHexString){const e=t.toHexString();if(typeof e==="string"){return BigNumber$1.from(e)}}else{let e=t._hex;if(e==null&&t.type==="BigNumber"){e=t.hex}if(typeof e==="string"){if(isHexString(e)||e[0]==="-"&&isHexString(e.substring(1))){return BigNumber$1.from(e)}}}}return logger$5.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex$2(e){if(typeof e!=="string"){return toHex$2(e.toString(16))}if(e[0]==="-"){e=e.substring(1);if(e[0]==="-"){logger$5.throwArgumentError("invalid hex","value",e)}e=toHex$2(e);if(e==="0x00"){return e}return"-"+e}if(e.substring(0,2)!=="0x"){e="0x"+e}if(e==="0x"){return"0x00"}if(e.length%2){e="0x0"+e.substring(2)}while(e.length>4&&e.substring(0,4)==="0x00"){e="0x"+e.substring(4)}return e}function toBigNumber(e){return BigNumber$1.from(toHex$2(e))}function toBN(e){const t=BigNumber$1.from(e).toHexString();if(t[0]==="-"){return new BN("-"+t.substring(3),16)}return new BN(t.substring(2),16)}function throwFault(e,t,r){const i={fault:e,operation:t};if(r!=null){i.value=r}return logger$5.throwError(e,Logger.errors.NUMERIC_FAULT,i)}function _base36To16(e){return new BN(e,36).toString(16)}const version$4="properties/5.7.0";var __awaiter$2=undefined&&undefined.__awaiter||function(e,t,r,i){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(i.next(e))}catch(e){s(e)}}function o(e){try{f(i["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):n(e.value).then(a,o)}f((i=i.apply(e,t||[])).next())}))};const logger$4=new Logger(version$4);function defineReadOnly(e,t,r){Object.defineProperty(e,t,{enumerable:true,value:r,writable:false})}function getStatic(e,t){for(let r=0;r<32;r++){if(e[t]){return e[t]}if(!e.prototype||typeof e.prototype!=="object"){break}e=Object.getPrototypeOf(e.prototype).constructor}return null}function resolveProperties(e){return __awaiter$2(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));const r=yield Promise.all(t);return r.reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}))}function checkProperties(e,t){if(!e||typeof e!=="object"){logger$4.throwArgumentError("invalid object","object",e)}Object.keys(e).forEach((r=>{if(!t[r]){logger$4.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}}))}function shallowCopy(e){const t={};for(const r in e){t[r]=e[r]}return t}const opaque={bigint:true,boolean:true,function:true,number:true,string:true};function _isFrozen(e){if(e===undefined||e===null||opaque[typeof e]){return true}if(Array.isArray(e)||typeof e==="object"){if(!Object.isFrozen(e)){return false}const t=Object.keys(e);for(let r=0;r<t.length;r++){let i=null;try{i=e[t[r]]}catch(e){continue}if(!_isFrozen(i)){return false}}return true}return logger$4.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function _deepCopy(e){if(_isFrozen(e)){return e}if(Array.isArray(e)){return Object.freeze(e.map((e=>deepCopy(e))))}if(typeof e==="object"){const t={};for(const r in e){const i=e[r];if(i===undefined){continue}defineReadOnly(t,r,deepCopy(i))}return t}return logger$4.throwArgumentError(`Cannot deepCopy ${typeof e}`,"object",e)}function deepCopy(e){return _deepCopy(e)}class Description{constructor(e){for(const t in e){this[t]=deepCopy(e[t])}}}var sha3$1=createCommonjsModule$1((function(e){
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
(function(){var t="input is invalid type";var r="finalize already called";var i=typeof window==="object";var n=i?window:{};if(n.JS_SHA3_NO_WINDOW){i=false}var s=!i&&typeof self==="object";var a=!n.JS_SHA3_NO_NODE_JS&&typeof process==="object"&&process.versions&&process.versions.node;if(a){n=commonjsGlobal}else if(s){n=self}var o=!n.JS_SHA3_NO_COMMON_JS&&"object"==="object"&&e.exports;var f=!n.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer!=="undefined";var c="0123456789abcdef".split("");var u=[31,7936,2031616,520093696];var h=[4,1024,262144,67108864];var l=[1,256,65536,16777216];var d=[6,1536,393216,100663296];var p=[0,8,16,24];var b=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];var m=[224,256,384,512];var v=[128,256];var y=["hex","buffer","arrayBuffer","array","digest"];var w={128:168,256:136};if(n.JS_SHA3_NO_NODE_JS||!Array.isArray){Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}if(f&&(n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)){ArrayBuffer.isView=function(e){return typeof e==="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer}}var A=function(e,t,r){return function(i){return new U(e,t,e).update(i)[r]()}};var g=function(e,t,r){return function(i,n){return new U(e,t,n).update(i)[r]()}};var S=function(e,t,r){return function(t,i,n,s){return x["cshake"+e].update(t,i,n,s)[r]()}};var E=function(e,t,r){return function(t,i,n,s){return x["kmac"+e].update(t,i,n,s)[r]()}};var _=function(e,t,r,i){for(var n=0;n<y.length;++n){var s=y[n];e[s]=t(r,i,s)}return e};var $=function(e,t){var r=A(e,t,"hex");r.create=function(){return new U(e,t,e)};r.update=function(e){return r.create().update(e)};return _(r,A,e,t)};var C=function(e,t){var r=g(e,t,"hex");r.create=function(r){return new U(e,t,r)};r.update=function(e,t){return r.create(t).update(e)};return _(r,g,e,t)};var P=function(e,t){var r=w[e];var i=S(e,t,"hex");i.create=function(i,n,s){if(!n&&!s){return x["shake"+e].create(i)}else{return new U(e,t,i).bytepad([n,s],r)}};i.update=function(e,t,r,n){return i.create(t,r,n).update(e)};return _(i,S,e,t)};var T=function(e,t){var r=w[e];var i=E(e,t,"hex");i.create=function(i,n,s){return new j(e,t,n).bytepad(["KMAC",s],r).bytepad([i],r)};i.update=function(e,t,r,n){return i.create(e,r,n).update(t)};return _(i,E,e,t)};var I=[{name:"keccak",padding:l,bits:m,createMethod:$},{name:"sha3",padding:d,bits:m,createMethod:$},{name:"shake",padding:u,bits:v,createMethod:C},{name:"cshake",padding:h,bits:v,createMethod:P},{name:"kmac",padding:h,bits:v,createMethod:T}];var x={},N=[];for(var M=0;M<I.length;++M){var k=I[M];var R=k.bits;for(var B=0;B<R.length;++B){var O=k.name+"_"+R[B];N.push(O);x[O]=k.createMethod(R[B],k.padding);if(k.name!=="sha3"){var D=k.name+R[B];N.push(D);x[D]=x[O]}}}function U(e,t,r){this.blocks=[];this.s=[];this.padding=t;this.outputBits=r;this.reset=true;this.finalized=false;this.block=0;this.start=0;this.blockCount=1600-(e<<1)>>5;this.byteCount=this.blockCount<<2;this.outputBlocks=r>>5;this.extraBytes=(r&31)>>3;for(var i=0;i<50;++i){this.s[i]=0}}U.prototype.update=function(e){if(this.finalized){throw new Error(r)}var i,n=typeof e;if(n!=="string"){if(n==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}i=true}var s=this.blocks,a=this.byteCount,o=e.length,c=this.blockCount,u=0,h=this.s,l,d;while(u<o){if(this.reset){this.reset=false;s[0]=this.block;for(l=1;l<c+1;++l){s[l]=0}}if(i){for(l=this.start;u<o&&l<a;++u){s[l>>2]|=e[u]<<p[l++&3]}}else{for(l=this.start;u<o&&l<a;++u){d=e.charCodeAt(u);if(d<128){s[l>>2]|=d<<p[l++&3]}else if(d<2048){s[l>>2]|=(192|d>>6)<<p[l++&3];s[l>>2]|=(128|d&63)<<p[l++&3]}else if(d<55296||d>=57344){s[l>>2]|=(224|d>>12)<<p[l++&3];s[l>>2]|=(128|d>>6&63)<<p[l++&3];s[l>>2]|=(128|d&63)<<p[l++&3]}else{d=65536+((d&1023)<<10|e.charCodeAt(++u)&1023);s[l>>2]|=(240|d>>18)<<p[l++&3];s[l>>2]|=(128|d>>12&63)<<p[l++&3];s[l>>2]|=(128|d>>6&63)<<p[l++&3];s[l>>2]|=(128|d&63)<<p[l++&3]}}}this.lastByteIndex=l;if(l>=a){this.start=l-a;this.block=s[c];for(l=0;l<c;++l){h[l]^=s[l]}L(h);this.reset=true}else{this.start=l}}return this};U.prototype.encode=function(e,t){var r=e&255,i=1;var n=[r];e=e>>8;r=e&255;while(r>0){n.unshift(r);e=e>>8;r=e&255;++i}if(t){n.push(i)}else{n.unshift(i)}this.update(n);return n.length};U.prototype.encodeString=function(e){var r,i=typeof e;if(i!=="string"){if(i==="object"){if(e===null){throw new Error(t)}else if(f&&e.constructor===ArrayBuffer){e=new Uint8Array(e)}else if(!Array.isArray(e)){if(!f||!ArrayBuffer.isView(e)){throw new Error(t)}}}else{throw new Error(t)}r=true}var n=0,s=e.length;if(r){n=s}else{for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);if(o<128){n+=1}else if(o<2048){n+=2}else if(o<55296||o>=57344){n+=3}else{o=65536+((o&1023)<<10|e.charCodeAt(++a)&1023);n+=4}}}n+=this.encode(n*8);this.update(e);return n};U.prototype.bytepad=function(e,t){var r=this.encode(t);for(var i=0;i<e.length;++i){r+=this.encodeString(e[i])}var n=t-r%t;var s=[];s.length=n;this.update(s);return this};U.prototype.finalize=function(){if(this.finalized){return}this.finalized=true;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,i=this.s;e[t>>2]|=this.padding[t&3];if(this.lastByteIndex===this.byteCount){e[0]=e[r];for(t=1;t<r+1;++t){e[t]=0}}e[r-1]|=2147483648;for(t=0;t<r;++t){i[t]^=e[t]}L(i)};U.prototype.toString=U.prototype.hex=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,i=this.extraBytes,n=0,s=0;var a="",o;while(s<r){for(n=0;n<e&&s<r;++n,++s){o=t[n];a+=c[o>>4&15]+c[o&15]+c[o>>12&15]+c[o>>8&15]+c[o>>20&15]+c[o>>16&15]+c[o>>28&15]+c[o>>24&15]}if(s%e===0){L(t);n=0}}if(i){o=t[n];a+=c[o>>4&15]+c[o&15];if(i>1){a+=c[o>>12&15]+c[o>>8&15]}if(i>2){a+=c[o>>20&15]+c[o>>16&15]}}return a};U.prototype.arrayBuffer=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,i=this.extraBytes,n=0,s=0;var a=this.outputBits>>3;var o;if(i){o=new ArrayBuffer(r+1<<2)}else{o=new ArrayBuffer(a)}var f=new Uint32Array(o);while(s<r){for(n=0;n<e&&s<r;++n,++s){f[s]=t[n]}if(s%e===0){L(t)}}if(i){f[n]=t[n];o=o.slice(0,a)}return o};U.prototype.buffer=U.prototype.arrayBuffer;U.prototype.digest=U.prototype.array=function(){this.finalize();var e=this.blockCount,t=this.s,r=this.outputBlocks,i=this.extraBytes,n=0,s=0;var a=[],o,f;while(s<r){for(n=0;n<e&&s<r;++n,++s){o=s<<2;f=t[n];a[o]=f&255;a[o+1]=f>>8&255;a[o+2]=f>>16&255;a[o+3]=f>>24&255}if(s%e===0){L(t)}}if(i){o=s<<2;f=t[n];a[o]=f&255;if(i>1){a[o+1]=f>>8&255}if(i>2){a[o+2]=f>>16&255}}return a};function j(e,t,r){U.call(this,e,t,r)}j.prototype=new U;j.prototype.finalize=function(){this.encode(this.outputBits,true);return U.prototype.finalize.call(this)};var L=function(e){var t,r,i,n,s,a,o,f,c,u,h,l,d,p,m,v,y,w,A,g,S,E,_,$,C,P,T,I,x,N,M,k,R,B,O,D,U,j,L,K,V,H,F,G,X,Y,z,W,J,q,Q,Z,ee,te,re,ie,ne,se,ae,oe,fe,ce,ue;for(i=0;i<48;i+=2){n=e[0]^e[10]^e[20]^e[30]^e[40];s=e[1]^e[11]^e[21]^e[31]^e[41];a=e[2]^e[12]^e[22]^e[32]^e[42];o=e[3]^e[13]^e[23]^e[33]^e[43];f=e[4]^e[14]^e[24]^e[34]^e[44];c=e[5]^e[15]^e[25]^e[35]^e[45];u=e[6]^e[16]^e[26]^e[36]^e[46];h=e[7]^e[17]^e[27]^e[37]^e[47];l=e[8]^e[18]^e[28]^e[38]^e[48];d=e[9]^e[19]^e[29]^e[39]^e[49];t=l^(a<<1|o>>>31);r=d^(o<<1|a>>>31);e[0]^=t;e[1]^=r;e[10]^=t;e[11]^=r;e[20]^=t;e[21]^=r;e[30]^=t;e[31]^=r;e[40]^=t;e[41]^=r;t=n^(f<<1|c>>>31);r=s^(c<<1|f>>>31);e[2]^=t;e[3]^=r;e[12]^=t;e[13]^=r;e[22]^=t;e[23]^=r;e[32]^=t;e[33]^=r;e[42]^=t;e[43]^=r;t=a^(u<<1|h>>>31);r=o^(h<<1|u>>>31);e[4]^=t;e[5]^=r;e[14]^=t;e[15]^=r;e[24]^=t;e[25]^=r;e[34]^=t;e[35]^=r;e[44]^=t;e[45]^=r;t=f^(l<<1|d>>>31);r=c^(d<<1|l>>>31);e[6]^=t;e[7]^=r;e[16]^=t;e[17]^=r;e[26]^=t;e[27]^=r;e[36]^=t;e[37]^=r;e[46]^=t;e[47]^=r;t=u^(n<<1|s>>>31);r=h^(s<<1|n>>>31);e[8]^=t;e[9]^=r;e[18]^=t;e[19]^=r;e[28]^=t;e[29]^=r;e[38]^=t;e[39]^=r;e[48]^=t;e[49]^=r;p=e[0];m=e[1];Y=e[11]<<4|e[10]>>>28;z=e[10]<<4|e[11]>>>28;I=e[20]<<3|e[21]>>>29;x=e[21]<<3|e[20]>>>29;oe=e[31]<<9|e[30]>>>23;fe=e[30]<<9|e[31]>>>23;H=e[40]<<18|e[41]>>>14;F=e[41]<<18|e[40]>>>14;B=e[2]<<1|e[3]>>>31;O=e[3]<<1|e[2]>>>31;v=e[13]<<12|e[12]>>>20;y=e[12]<<12|e[13]>>>20;W=e[22]<<10|e[23]>>>22;J=e[23]<<10|e[22]>>>22;N=e[33]<<13|e[32]>>>19;M=e[32]<<13|e[33]>>>19;ce=e[42]<<2|e[43]>>>30;ue=e[43]<<2|e[42]>>>30;te=e[5]<<30|e[4]>>>2;re=e[4]<<30|e[5]>>>2;D=e[14]<<6|e[15]>>>26;U=e[15]<<6|e[14]>>>26;w=e[25]<<11|e[24]>>>21;A=e[24]<<11|e[25]>>>21;q=e[34]<<15|e[35]>>>17;Q=e[35]<<15|e[34]>>>17;k=e[45]<<29|e[44]>>>3;R=e[44]<<29|e[45]>>>3;$=e[6]<<28|e[7]>>>4;C=e[7]<<28|e[6]>>>4;ie=e[17]<<23|e[16]>>>9;ne=e[16]<<23|e[17]>>>9;j=e[26]<<25|e[27]>>>7;L=e[27]<<25|e[26]>>>7;g=e[36]<<21|e[37]>>>11;S=e[37]<<21|e[36]>>>11;Z=e[47]<<24|e[46]>>>8;ee=e[46]<<24|e[47]>>>8;G=e[8]<<27|e[9]>>>5;X=e[9]<<27|e[8]>>>5;P=e[18]<<20|e[19]>>>12;T=e[19]<<20|e[18]>>>12;se=e[29]<<7|e[28]>>>25;ae=e[28]<<7|e[29]>>>25;K=e[38]<<8|e[39]>>>24;V=e[39]<<8|e[38]>>>24;E=e[48]<<14|e[49]>>>18;_=e[49]<<14|e[48]>>>18;e[0]=p^~v&w;e[1]=m^~y&A;e[10]=$^~P&I;e[11]=C^~T&x;e[20]=B^~D&j;e[21]=O^~U&L;e[30]=G^~Y&W;e[31]=X^~z&J;e[40]=te^~ie&se;e[41]=re^~ne&ae;e[2]=v^~w&g;e[3]=y^~A&S;e[12]=P^~I&N;e[13]=T^~x&M;e[22]=D^~j&K;e[23]=U^~L&V;e[32]=Y^~W&q;e[33]=z^~J&Q;e[42]=ie^~se&oe;e[43]=ne^~ae&fe;e[4]=w^~g&E;e[5]=A^~S&_;e[14]=I^~N&k;e[15]=x^~M&R;e[24]=j^~K&H;e[25]=L^~V&F;e[34]=W^~q&Z;e[35]=J^~Q&ee;e[44]=se^~oe&ce;e[45]=ae^~fe&ue;e[6]=g^~E&p;e[7]=S^~_&m;e[16]=N^~k&$;e[17]=M^~R&C;e[26]=K^~H&B;e[27]=V^~F&O;e[36]=q^~Z&G;e[37]=Q^~ee&X;e[46]=oe^~ce&te;e[47]=fe^~ue&re;e[8]=E^~p&v;e[9]=_^~m&y;e[18]=k^~$&P;e[19]=R^~C&T;e[28]=H^~B&D;e[29]=F^~O&U;e[38]=Z^~G&Y;e[39]=ee^~X&z;e[48]=ce^~te&ie;e[49]=ue^~re&ne;e[0]^=b[i];e[1]^=b[i+1]}};if(o){e.exports=x}else{for(M=0;M<N.length;++M){n[N[M]]=x[N[M]]}}})()}));function keccak256(e){return"0x"+sha3$1.keccak_256(arrayify(e))}const version$3="rlp/5.7.0";const logger$3=new Logger(version$3);function arrayifyInteger(e){const t=[];while(e){t.unshift(e&255);e>>=8}return t}function unarrayifyInteger(e,t,r){let i=0;for(let n=0;n<r;n++){i=i*256+e[t+n]}return i}function _encode(e){if(Array.isArray(e)){let t=[];e.forEach((function(e){t=t.concat(_encode(e))}));if(t.length<=55){t.unshift(192+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(247+r.length);return r.concat(t)}if(!isBytesLike(e)){logger$3.throwArgumentError("RLP object must be BytesLike","object",e)}const t=Array.prototype.slice.call(arrayify(e));if(t.length===1&&t[0]<=127){return t}else if(t.length<=55){t.unshift(128+t.length);return t}const r=arrayifyInteger(t.length);r.unshift(183+r.length);return r.concat(t)}function encode$b(e){return hexlify(_encode(e))}function _decodeChildren(e,t,r,i){const n=[];while(r<t+1+i){const s=_decode(e,r);n.push(s.result);r+=s.consumed;if(r>t+1+i){logger$3.throwError("child data too short",Logger.errors.BUFFER_OVERRUN,{})}}return{consumed:1+i,result:n}}function _decode(e,t){if(e.length===0){logger$3.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{})}if(e[t]>=248){const r=e[t]-247;if(t+1+r>e.length){logger$3.throwError("data short segment too short",Logger.errors.BUFFER_OVERRUN,{})}const i=unarrayifyInteger(e,t+1,r);if(t+1+r+i>e.length){logger$3.throwError("data long segment too short",Logger.errors.BUFFER_OVERRUN,{})}return _decodeChildren(e,t,t+1+r,r+i)}else if(e[t]>=192){const r=e[t]-192;if(t+1+r>e.length){logger$3.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}return _decodeChildren(e,t,t+1,r)}else if(e[t]>=184){const r=e[t]-183;if(t+1+r>e.length){logger$3.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}const i=unarrayifyInteger(e,t+1,r);if(t+1+r+i>e.length){logger$3.throwError("data array too short",Logger.errors.BUFFER_OVERRUN,{})}const n=hexlify(e.slice(t+1+r,t+1+r+i));return{consumed:1+r+i,result:n}}else if(e[t]>=128){const r=e[t]-128;if(t+1+r>e.length){logger$3.throwError("data too short",Logger.errors.BUFFER_OVERRUN,{})}const i=hexlify(e.slice(t+1,t+1+r));return{consumed:1+r,result:i}}return{consumed:1,result:hexlify(e[t])}}function decode$a(e){const t=arrayify(e);const r=_decode(t,0);if(r.consumed!==t.length){logger$3.throwArgumentError("invalid rlp data","data",e)}return r.result}const version$2="address/5.7.0";const logger$2=new Logger(version$2);function getChecksumAddress(e){if(!isHexString(e,20)){logger$2.throwArgumentError("invalid address","address",e)}e=e.toLowerCase();const t=e.substring(2).split("");const r=new Uint8Array(40);for(let e=0;e<40;e++){r[e]=t[e].charCodeAt(0)}const i=arrayify(keccak256(r));for(let e=0;e<40;e+=2){if(i[e>>1]>>4>=8){t[e]=t[e].toUpperCase()}if((i[e>>1]&15)>=8){t[e+1]=t[e+1].toUpperCase()}}return"0x"+t.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(e){if(Math.log10){return Math.log10(e)}return Math.log(e)/Math.LN10}const ibanLookup={};for(let e=0;e<10;e++){ibanLookup[String(e)]=String(e)}for(let e=0;e<26;e++){ibanLookup[String.fromCharCode(65+e)]=String(10+e)}const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(e){e=e.toUpperCase();e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map((e=>ibanLookup[e])).join("");while(t.length>=safeDigits){let e=t.substring(0,safeDigits);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);while(r.length<2){r="0"+r}return r}function getAddress(e){let t=null;if(typeof e!=="string"){logger$2.throwArgumentError("invalid address","address",e)}if(e.match(/^(0x)?[0-9a-fA-F]{40}$/)){if(e.substring(0,2)!=="0x"){e="0x"+e}t=getChecksumAddress(e);if(e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e){logger$2.throwArgumentError("bad address checksum","address",e)}}else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){if(e.substring(2,4)!==ibanChecksum(e)){logger$2.throwArgumentError("bad icap checksum","address",e)}t=_base36To16(e.substring(4));while(t.length<40){t="0"+t}t=getChecksumAddress("0x"+t)}else{logger$2.throwArgumentError("invalid address","address",e)}return t}function getContractAddress(e){let t=null;try{t=getAddress(e.from)}catch(t){logger$2.throwArgumentError("missing from address","transaction",e)}const r=stripZeros(arrayify(BigNumber$1.from(e.nonce).toHexString()));return getAddress(hexDataSlice(keccak256(encode$b([t,r])),12))}const NegativeOne=BigNumber$1.from(-1);const Zero=BigNumber$1.from(0);const One=BigNumber$1.from(1);const MaxUint256=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var minimalisticAssert$1=assert$a;function assert$a(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$a.equal=function e(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var inherits_browser$1=createCommonjsModule$1((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype;t.prototype=new i;t.prototype.constructor=t}}}}));var inherits_1=inherits_browser$1;function isSurrogatePair(e,t){if((e.charCodeAt(t)&64512)!==55296){return false}if(t<0||t+1>=e.length){return false}return(e.charCodeAt(t+1)&64512)===56320}function toArray(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e==="string"){if(!t){var i=0;for(var n=0;n<e.length;n++){var s=e.charCodeAt(n);if(s<128){r[i++]=s}else if(s<2048){r[i++]=s>>6|192;r[i++]=s&63|128}else if(isSurrogatePair(e,n)){s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023);r[i++]=s>>18|240;r[i++]=s>>12&63|128;r[i++]=s>>6&63|128;r[i++]=s&63|128}else{r[i++]=s>>12|224;r[i++]=s>>6&63|128;r[i++]=s&63|128}}}else if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}}else{for(n=0;n<e.length;n++)r[n]=e[n]|0}return r}var toArray_1=toArray;function toHex$1(e){var t="";for(var r=0;r<e.length;r++)t+=zero2(e[r].toString(16));return t}var toHex_1=toHex$1;function htonl(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}var htonl_1=htonl;function toHex32(e,t){var r="";for(var i=0;i<e.length;i++){var n=e[i];if(t==="little")n=htonl(n);r+=zero8(n.toString(16))}return r}var toHex32_1=toHex32;function zero2(e){if(e.length===1)return"0"+e;else return e}var zero2_1=zero2;function zero8(e){if(e.length===7)return"0"+e;else if(e.length===6)return"00"+e;else if(e.length===5)return"000"+e;else if(e.length===4)return"0000"+e;else if(e.length===3)return"00000"+e;else if(e.length===2)return"000000"+e;else if(e.length===1)return"0000000"+e;else return e}var zero8_1=zero8;function join32(e,t,r,i){var n=r-t;minimalisticAssert$1(n%4===0);var s=new Array(n/4);for(var a=0,o=t;a<s.length;a++,o+=4){var f;if(i==="big")f=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3];else f=e[o+3]<<24|e[o+2]<<16|e[o+1]<<8|e[o];s[a]=f>>>0}return s}var join32_1=join32;function split32(e,t){var r=new Array(e.length*4);for(var i=0,n=0;i<e.length;i++,n+=4){var s=e[i];if(t==="big"){r[n]=s>>>24;r[n+1]=s>>>16&255;r[n+2]=s>>>8&255;r[n+3]=s&255}else{r[n+3]=s>>>24;r[n+2]=s>>>16&255;r[n+1]=s>>>8&255;r[n]=s&255}}return r}var split32_1=split32;function rotr32$1(e,t){return e>>>t|e<<32-t}var rotr32_1=rotr32$1;function rotl32$2(e,t){return e<<t|e>>>32-t}var rotl32_1=rotl32$2;function sum32$3(e,t){return e+t>>>0}var sum32_1=sum32$3;function sum32_3$1(e,t,r){return e+t+r>>>0}var sum32_3_1=sum32_3$1;function sum32_4$2(e,t,r,i){return e+t+r+i>>>0}var sum32_4_1=sum32_4$2;function sum32_5$2(e,t,r,i,n){return e+t+r+i+n>>>0}var sum32_5_1=sum32_5$2;function sum64$1(e,t,r,i){var n=e[t];var s=e[t+1];var a=i+s>>>0;var o=(a<i?1:0)+r+n;e[t]=o>>>0;e[t+1]=a}var sum64_1=sum64$1;function sum64_hi$1(e,t,r,i){var n=t+i>>>0;var s=(n<t?1:0)+e+r;return s>>>0}var sum64_hi_1=sum64_hi$1;function sum64_lo$1(e,t,r,i){var n=t+i;return n>>>0}var sum64_lo_1=sum64_lo$1;function sum64_4_hi$1(e,t,r,i,n,s,a,o){var f=0;var c=t;c=c+i>>>0;f+=c<t?1:0;c=c+s>>>0;f+=c<s?1:0;c=c+o>>>0;f+=c<o?1:0;var u=e+r+n+a+f;return u>>>0}var sum64_4_hi_1=sum64_4_hi$1;function sum64_4_lo$1(e,t,r,i,n,s,a,o){var f=t+i+s+o;return f>>>0}var sum64_4_lo_1=sum64_4_lo$1;function sum64_5_hi$1(e,t,r,i,n,s,a,o,f,c){var u=0;var h=t;h=h+i>>>0;u+=h<t?1:0;h=h+s>>>0;u+=h<s?1:0;h=h+o>>>0;u+=h<o?1:0;h=h+c>>>0;u+=h<c?1:0;var l=e+r+n+a+f+u;return l>>>0}var sum64_5_hi_1=sum64_5_hi$1;function sum64_5_lo$1(e,t,r,i,n,s,a,o,f,c){var u=t+i+s+o+c;return u>>>0}var sum64_5_lo_1=sum64_5_lo$1;function rotr64_hi$1(e,t,r){var i=t<<32-r|e>>>r;return i>>>0}var rotr64_hi_1=rotr64_hi$1;function rotr64_lo$1(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}var rotr64_lo_1=rotr64_lo$1;function shr64_hi$1(e,t,r){return e>>>r}var shr64_hi_1=shr64_hi$1;function shr64_lo$1(e,t,r){var i=e<<32-r|t>>>r;return i>>>0}var shr64_lo_1=shr64_lo$1;var utils$3={inherits:inherits_1,toArray:toArray_1,toHex:toHex_1,htonl:htonl_1,toHex32:toHex32_1,zero2:zero2_1,zero8:zero8_1,join32:join32_1,split32:split32_1,rotr32:rotr32_1,rotl32:rotl32_1,sum32:sum32_1,sum32_3:sum32_3_1,sum32_4:sum32_4_1,sum32_5:sum32_5_1,sum64:sum64_1,sum64_hi:sum64_hi_1,sum64_lo:sum64_lo_1,sum64_4_hi:sum64_4_hi_1,sum64_4_lo:sum64_4_lo_1,sum64_5_hi:sum64_5_hi_1,sum64_5_lo:sum64_5_lo_1,rotr64_hi:rotr64_hi_1,rotr64_lo:rotr64_lo_1,shr64_hi:shr64_hi_1,shr64_lo:shr64_lo_1};function BlockHash$4(){this.pending=null;this.pendingTotal=0;this.blockSize=this.constructor.blockSize;this.outSize=this.constructor.outSize;this.hmacStrength=this.constructor.hmacStrength;this.padLength=this.constructor.padLength/8;this.endian="big";this._delta8=this.blockSize/8;this._delta32=this.blockSize/32}var BlockHash_1=BlockHash$4;BlockHash$4.prototype.update=function e(t,r){t=utils$3.toArray(t,r);if(!this.pending)this.pending=t;else this.pending=this.pending.concat(t);this.pendingTotal+=t.length;if(this.pending.length>=this._delta8){t=this.pending;var i=t.length%this._delta8;this.pending=t.slice(t.length-i,t.length);if(this.pending.length===0)this.pending=null;t=utils$3.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this};BlockHash$4.prototype.digest=function e(t){this.update(this._pad());minimalisticAssert$1(this.pending===null);return this._digest(t)};BlockHash$4.prototype._pad=function e(){var t=this.pendingTotal;var r=this._delta8;var i=r-(t+this.padLength)%r;var n=new Array(i+this.padLength);n[0]=128;for(var s=1;s<i;s++)n[s]=0;t<<=3;if(this.endian==="big"){for(var a=8;a<this.padLength;a++)n[s++]=0;n[s++]=0;n[s++]=0;n[s++]=0;n[s++]=0;n[s++]=t>>>24&255;n[s++]=t>>>16&255;n[s++]=t>>>8&255;n[s++]=t&255}else{n[s++]=t&255;n[s++]=t>>>8&255;n[s++]=t>>>16&255;n[s++]=t>>>24&255;n[s++]=0;n[s++]=0;n[s++]=0;n[s++]=0;for(a=8;a<this.padLength;a++)n[s++]=0}return n};var common$1={BlockHash:BlockHash_1};var rotr32=utils$3.rotr32;function ft_1$1(e,t,r,i){if(e===0)return ch32$1(t,r,i);if(e===1||e===3)return p32(t,r,i);if(e===2)return maj32$1(t,r,i)}var ft_1_1=ft_1$1;function ch32$1(e,t,r){return e&t^~e&r}var ch32_1=ch32$1;function maj32$1(e,t,r){return e&t^e&r^t&r}var maj32_1=maj32$1;function p32(e,t,r){return e^t^r}var p32_1=p32;function s0_256$1(e){return rotr32(e,2)^rotr32(e,13)^rotr32(e,22)}var s0_256_1=s0_256$1;function s1_256$1(e){return rotr32(e,6)^rotr32(e,11)^rotr32(e,25)}var s1_256_1=s1_256$1;function g0_256$1(e){return rotr32(e,7)^rotr32(e,18)^e>>>3}var g0_256_1=g0_256$1;function g1_256$1(e){return rotr32(e,17)^rotr32(e,19)^e>>>10}var g1_256_1=g1_256$1;var common={ft_1:ft_1_1,ch32:ch32_1,maj32:maj32_1,p32:p32_1,s0_256:s0_256_1,s1_256:s1_256_1,g0_256:g0_256_1,g1_256:g1_256_1};var rotl32$1=utils$3.rotl32;var sum32$2=utils$3.sum32;var sum32_5$1=utils$3.sum32_5;var ft_1=common.ft_1;var BlockHash$3=common$1.BlockHash;var sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1$2(){if(!(this instanceof SHA1$2))return new SHA1$2;BlockHash$3.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.W=new Array(80)}utils$3.inherits(SHA1$2,BlockHash$3);var _1=SHA1$2;SHA1$2.blockSize=512;SHA1$2.outSize=160;SHA1$2.hmacStrength=80;SHA1$2.padLength=64;SHA1$2.prototype._update=function e(t,r){var i=this.W;for(var n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=rotl32$1(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];for(n=0;n<i.length;n++){var u=~~(n/20);var h=sum32_5$1(rotl32$1(s,5),ft_1(u,a,o,f),c,i[n],sha1_K[u]);c=f;f=o;o=rotl32$1(a,30);a=s;s=h}this.h[0]=sum32$2(this.h[0],s);this.h[1]=sum32$2(this.h[1],a);this.h[2]=sum32$2(this.h[2],o);this.h[3]=sum32$2(this.h[3],f);this.h[4]=sum32$2(this.h[4],c)};SHA1$2.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h,"big");else return utils$3.split32(this.h,"big")};var sum32$1=utils$3.sum32;var sum32_4$1=utils$3.sum32_4;var sum32_5=utils$3.sum32_5;var ch32=common.ch32;var maj32=common.maj32;var s0_256=common.s0_256;var s1_256=common.s1_256;var g0_256=common.g0_256;var g1_256=common.g1_256;var BlockHash$2=common$1.BlockHash;var sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$2(){if(!(this instanceof SHA256$2))return new SHA256$2;BlockHash$2.call(this);this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];this.k=sha256_K;this.W=new Array(64)}utils$3.inherits(SHA256$2,BlockHash$2);var _256=SHA256$2;SHA256$2.blockSize=512;SHA256$2.outSize=256;SHA256$2.hmacStrength=192;SHA256$2.padLength=64;SHA256$2.prototype._update=function e(t,r){var i=this.W;for(var n=0;n<16;n++)i[n]=t[r+n];for(;n<i.length;n++)i[n]=sum32_4$1(g1_256(i[n-2]),i[n-7],g0_256(i[n-15]),i[n-16]);var s=this.h[0];var a=this.h[1];var o=this.h[2];var f=this.h[3];var c=this.h[4];var u=this.h[5];var h=this.h[6];var l=this.h[7];minimalisticAssert$1(this.k.length===i.length);for(n=0;n<i.length;n++){var d=sum32_5(l,s1_256(c),ch32(c,u,h),this.k[n],i[n]);var p=sum32$1(s0_256(s),maj32(s,a,o));l=h;h=u;u=c;c=sum32$1(f,d);f=o;o=a;a=s;s=sum32$1(d,p)}this.h[0]=sum32$1(this.h[0],s);this.h[1]=sum32$1(this.h[1],a);this.h[2]=sum32$1(this.h[2],o);this.h[3]=sum32$1(this.h[3],f);this.h[4]=sum32$1(this.h[4],c);this.h[5]=sum32$1(this.h[5],u);this.h[6]=sum32$1(this.h[6],h);this.h[7]=sum32$1(this.h[7],l)};SHA256$2.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h,"big");else return utils$3.split32(this.h,"big")};function SHA224$1(){if(!(this instanceof SHA224$1))return new SHA224$1;_256.call(this);this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$3.inherits(SHA224$1,_256);var _224=SHA224$1;SHA224$1.blockSize=512;SHA224$1.outSize=224;SHA224$1.hmacStrength=192;SHA224$1.padLength=64;SHA224$1.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h.slice(0,7),"big");else return utils$3.split32(this.h.slice(0,7),"big")};var rotr64_hi=utils$3.rotr64_hi;var rotr64_lo=utils$3.rotr64_lo;var shr64_hi=utils$3.shr64_hi;var shr64_lo=utils$3.shr64_lo;var sum64=utils$3.sum64;var sum64_hi=utils$3.sum64_hi;var sum64_lo=utils$3.sum64_lo;var sum64_4_hi=utils$3.sum64_4_hi;var sum64_4_lo=utils$3.sum64_4_lo;var sum64_5_hi=utils$3.sum64_5_hi;var sum64_5_lo=utils$3.sum64_5_lo;var BlockHash$1=common$1.BlockHash;var sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$2(){if(!(this instanceof SHA512$2))return new SHA512$2;BlockHash$1.call(this);this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209];this.k=sha512_K;this.W=new Array(160)}utils$3.inherits(SHA512$2,BlockHash$1);var _512=SHA512$2;SHA512$2.blockSize=1024;SHA512$2.outSize=512;SHA512$2.hmacStrength=192;SHA512$2.padLength=128;SHA512$2.prototype._prepareBlock=function e(t,r){var i=this.W;for(var n=0;n<32;n++)i[n]=t[r+n];for(;n<i.length;n+=2){var s=g1_512_hi(i[n-4],i[n-3]);var a=g1_512_lo(i[n-4],i[n-3]);var o=i[n-14];var f=i[n-13];var c=g0_512_hi(i[n-30],i[n-29]);var u=g0_512_lo(i[n-30],i[n-29]);var h=i[n-32];var l=i[n-31];i[n]=sum64_4_hi(s,a,o,f,c,u,h,l);i[n+1]=sum64_4_lo(s,a,o,f,c,u,h,l)}};SHA512$2.prototype._update=function e(t,r){this._prepareBlock(t,r);var i=this.W;var n=this.h[0];var s=this.h[1];var a=this.h[2];var o=this.h[3];var f=this.h[4];var c=this.h[5];var u=this.h[6];var h=this.h[7];var l=this.h[8];var d=this.h[9];var p=this.h[10];var b=this.h[11];var m=this.h[12];var v=this.h[13];var y=this.h[14];var w=this.h[15];minimalisticAssert$1(this.k.length===i.length);for(var A=0;A<i.length;A+=2){var g=y;var S=w;var E=s1_512_hi(l,d);var _=s1_512_lo(l,d);var $=ch64_hi(l,d,p,b,m);var C=ch64_lo(l,d,p,b,m,v);var P=this.k[A];var T=this.k[A+1];var I=i[A];var x=i[A+1];var N=sum64_5_hi(g,S,E,_,$,C,P,T,I,x);var M=sum64_5_lo(g,S,E,_,$,C,P,T,I,x);g=s0_512_hi(n,s);S=s0_512_lo(n,s);E=maj64_hi(n,s,a,o,f);_=maj64_lo(n,s,a,o,f,c);var k=sum64_hi(g,S,E,_);var R=sum64_lo(g,S,E,_);y=m;w=v;m=p;v=b;p=l;b=d;l=sum64_hi(u,h,N,M);d=sum64_lo(h,h,N,M);u=f;h=c;f=a;c=o;a=n;o=s;n=sum64_hi(N,M,k,R);s=sum64_lo(N,M,k,R)}sum64(this.h,0,n,s);sum64(this.h,2,a,o);sum64(this.h,4,f,c);sum64(this.h,6,u,h);sum64(this.h,8,l,d);sum64(this.h,10,p,b);sum64(this.h,12,m,v);sum64(this.h,14,y,w)};SHA512$2.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h,"big");else return utils$3.split32(this.h,"big")};function ch64_hi(e,t,r,i,n){var s=e&r^~e&n;if(s<0)s+=4294967296;return s}function ch64_lo(e,t,r,i,n,s){var a=t&i^~t&s;if(a<0)a+=4294967296;return a}function maj64_hi(e,t,r,i,n){var s=e&r^e&n^r&n;if(s<0)s+=4294967296;return s}function maj64_lo(e,t,r,i,n,s){var a=t&i^t&s^i&s;if(a<0)a+=4294967296;return a}function s0_512_hi(e,t){var r=rotr64_hi(e,t,28);var i=rotr64_hi(t,e,2);var n=rotr64_hi(t,e,7);var s=r^i^n;if(s<0)s+=4294967296;return s}function s0_512_lo(e,t){var r=rotr64_lo(e,t,28);var i=rotr64_lo(t,e,2);var n=rotr64_lo(t,e,7);var s=r^i^n;if(s<0)s+=4294967296;return s}function s1_512_hi(e,t){var r=rotr64_hi(e,t,14);var i=rotr64_hi(e,t,18);var n=rotr64_hi(t,e,9);var s=r^i^n;if(s<0)s+=4294967296;return s}function s1_512_lo(e,t){var r=rotr64_lo(e,t,14);var i=rotr64_lo(e,t,18);var n=rotr64_lo(t,e,9);var s=r^i^n;if(s<0)s+=4294967296;return s}function g0_512_hi(e,t){var r=rotr64_hi(e,t,1);var i=rotr64_hi(e,t,8);var n=shr64_hi(e,t,7);var s=r^i^n;if(s<0)s+=4294967296;return s}function g0_512_lo(e,t){var r=rotr64_lo(e,t,1);var i=rotr64_lo(e,t,8);var n=shr64_lo(e,t,7);var s=r^i^n;if(s<0)s+=4294967296;return s}function g1_512_hi(e,t){var r=rotr64_hi(e,t,19);var i=rotr64_hi(t,e,29);var n=shr64_hi(e,t,6);var s=r^i^n;if(s<0)s+=4294967296;return s}function g1_512_lo(e,t){var r=rotr64_lo(e,t,19);var i=rotr64_lo(t,e,29);var n=shr64_lo(e,t,6);var s=r^i^n;if(s<0)s+=4294967296;return s}function SHA384$2(){if(!(this instanceof SHA384$2))return new SHA384$2;_512.call(this);this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$3.inherits(SHA384$2,_512);var _384=SHA384$2;SHA384$2.blockSize=1024;SHA384$2.outSize=384;SHA384$2.hmacStrength=192;SHA384$2.padLength=128;SHA384$2.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h.slice(0,12),"big");else return utils$3.split32(this.h.slice(0,12),"big")};var sha1$1=_1;var sha224=_224;var sha256=_256;var sha384=_384;var sha512=_512;var sha$1={sha1:sha1$1,sha224,sha256,sha384,sha512};var rotl32=utils$3.rotl32;var sum32=utils$3.sum32;var sum32_3=utils$3.sum32_3;var sum32_4=utils$3.sum32_4;var BlockHash=common$1.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this);this.h=[1732584193,4023233417,2562383102,271733878,3285377520];this.endian="little"}utils$3.inherits(RIPEMD160,BlockHash);var ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function e(t,r){var i=this.h[0];var n=this.h[1];var a=this.h[2];var o=this.h[3];var c=this.h[4];var u=i;var h=n;var l=a;var d=o;var p=c;for(var b=0;b<80;b++){var m=sum32(rotl32(sum32_4(i,f(b,n,a,o),t[r$1[b]+r],K(b)),s[b]),c);i=c;c=o;o=rotl32(a,10);a=n;n=m;m=sum32(rotl32(sum32_4(u,f(79-b,h,l,d),t[rh[b]+r],Kh(b)),sh[b]),p);u=p;p=d;d=rotl32(l,10);l=h;h=m}m=sum32_3(this.h[1],a,d);this.h[1]=sum32_3(this.h[2],o,p);this.h[2]=sum32_3(this.h[3],c,u);this.h[3]=sum32_3(this.h[4],i,h);this.h[4]=sum32_3(this.h[0],n,l);this.h[0]=m};RIPEMD160.prototype._digest=function e(t){if(t==="hex")return utils$3.toHex32(this.h,"little");else return utils$3.split32(this.h,"little")};function f(e,t,r,i){if(e<=15)return t^r^i;else if(e<=31)return t&r|~t&i;else if(e<=47)return(t|~r)^i;else if(e<=63)return t&i|r&~i;else return t^(r|~i)}function K(e){if(e<=15)return 0;else if(e<=31)return 1518500249;else if(e<=47)return 1859775393;else if(e<=63)return 2400959708;else return 2840853838}function Kh(e){if(e<=15)return 1352829926;else if(e<=31)return 1548603684;else if(e<=47)return 1836072691;else if(e<=63)return 2053994217;else return 0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13];var rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11];var s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6];var sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];var ripemd={ripemd160};function Hmac$1(e,t,r){if(!(this instanceof Hmac$1))return new Hmac$1(e,t,r);this.Hash=e;this.blockSize=e.blockSize/8;this.outSize=e.outSize/8;this.inner=null;this.outer=null;this._init(utils$3.toArray(t,r))}var hmac=Hmac$1;Hmac$1.prototype._init=function e(t){if(t.length>this.blockSize)t=(new this.Hash).update(t).digest();minimalisticAssert$1(t.length<=this.blockSize);for(var r=t.length;r<this.blockSize;r++)t.push(0);for(r=0;r<t.length;r++)t[r]^=54;this.inner=(new this.Hash).update(t);for(r=0;r<t.length;r++)t[r]^=106;this.outer=(new this.Hash).update(t)};Hmac$1.prototype.update=function e(t,r){this.inner.update(t,r);return this};Hmac$1.prototype.digest=function e(t){this.outer.update(this.inner.digest());return this.outer.digest(t)};var hash_1=createCommonjsModule$1((function(e,t){var r=t;r.utils=utils$3;r.common=common$1;r.sha=sha$1;r.ripemd=ripemd;r.hmac=hmac;r.sha1=r.sha.sha1;r.sha256=r.sha.sha256;r.sha224=r.sha.sha224;r.sha384=r.sha.sha384;r.sha512=r.sha.sha512;r.ripemd160=r.ripemd.ripemd160}));function createCommonjsModule(e,t,r){return r={path:t,exports:{},require:function(e,t){return commonjsRequire()}},e(r,r.exports),r.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$9;function assert$9(e,t){if(!e)throw new Error(t||"Assertion failed")}assert$9.equal=function e(t,r,i){if(t!=r)throw new Error(i||"Assertion failed: "+t+" != "+r)};var utils_1$2=createCommonjsModule((function(e,t){var r=t;function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var i=0;i<e.length;i++)r[i]=e[i]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else{for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);var s=n>>8;var a=n&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=i;function n(e){if(e.length===1)return"0"+e;else return e}r.zero2=n;function s(e){var t="";for(var r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toHex=s;r.encode=function e(t,r){if(r==="hex")return s(t);else return t}}));var utils_1$1$1=createCommonjsModule((function(e,t){var r=t;r.assert=minimalisticAssert;r.toArray=utils_1$2.toArray;r.zero2=utils_1$2.zero2;r.toHex=utils_1$2.toHex;r.encode=utils_1$2.encode;function i(e,t,r){var i=new Array(Math.max(e.bitLength(),r)+1);i.fill(0);var n=1<<t+1;var s=e.clone();for(var a=0;a<i.length;a++){var o;var f=s.andln(n-1);if(s.isOdd()){if(f>(n>>1)-1)o=(n>>1)-f;else o=f;s.isubn(o)}else{o=0}i[a]=o;s.iushrn(1)}return i}r.getNAF=i;function n(e,t){var r=[[],[]];e=e.clone();t=t.clone();var i=0;var n=0;var s;while(e.cmpn(-i)>0||t.cmpn(-n)>0){var a=e.andln(3)+i&3;var o=t.andln(3)+n&3;if(a===3)a=-1;if(o===3)o=-1;var f;if((a&1)===0){f=0}else{s=e.andln(7)+i&7;if((s===3||s===5)&&o===2)f=-a;else f=a}r[0].push(f);var c;if((o&1)===0){c=0}else{s=t.andln(7)+n&7;if((s===3||s===5)&&a===2)c=-o;else c=o}r[1].push(c);if(2*i===f+1)i=1-i;if(2*n===c+1)n=1-n;e.iushrn(1);t.iushrn(1)}return r}r.getJSF=n;function s(e,t,r){var i="_"+t;e.prototype[t]=function e(){return this[i]!==undefined?this[i]:this[i]=r.call(this)}}r.cachedProperty=s;function a(e){return typeof e==="string"?r.toArray(e,"hex"):e}r.parseBytes=a;function o(e){return new bn$1(e,"hex","le")}r.intFromLE=o}));var getNAF$1=utils_1$1$1.getNAF;var getJSF$1=utils_1$1$1.getJSF;var assert$1$1=utils_1$1$1.assert;function BaseCurve$1(e,t){this.type=e;this.p=new bn$1(t.p,16);this.red=t.prime?bn$1.red(t.prime):bn$1.mont(this.p);this.zero=new bn$1(0).toRed(this.red);this.one=new bn$1(1).toRed(this.red);this.two=new bn$1(2).toRed(this.red);this.n=t.n&&new bn$1(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$f=BaseCurve$1;BaseCurve$1.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function e(t,r){assert$1$1(t.precomputed);var i=t._getDoubles();var n=getNAF$1(r,1,this._bitLength);var s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[];var o;var f;for(o=0;o<n.length;o+=i.step){f=0;for(var c=o+i.step-1;c>=o;c--)f=(f<<1)+n[c];a.push(f)}var u=this.jpoint(null,null,null);var h=this.jpoint(null,null,null);for(var l=s;l>0;l--){for(o=0;o<a.length;o++){f=a[o];if(f===l)h=h.mixedAdd(i.points[o]);else if(f===-l)h=h.mixedAdd(i.points[o].neg())}u=u.add(h)}return u.toP()};BaseCurve$1.prototype._wnafMul=function e(t,r){var i=4;var n=t._getNAFPoints(i);i=n.wnd;var s=n.points;var a=getNAF$1(r,i,this._bitLength);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var c=0;f>=0&&a[f]===0;f--)c++;if(f>=0)c++;o=o.dblp(c);if(f<0)break;var u=a[f];assert$1$1(u!==0);if(t.type==="affine"){if(u>0)o=o.mixedAdd(s[u-1>>1]);else o=o.mixedAdd(s[-u-1>>1].neg())}else{if(u>0)o=o.add(s[u-1>>1]);else o=o.add(s[-u-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve$1.prototype._wnafMulAdd=function e(t,r,i,n,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;var u;var h;var l;for(u=0;u<n;u++){l=r[u];var d=l._getNAFPoints(t);a[u]=d.wnd;o[u]=d.points}for(u=n-1;u>=1;u-=2){var p=u-1;var b=u;if(a[p]!==1||a[b]!==1){f[p]=getNAF$1(i[p],a[p],this._bitLength);f[b]=getNAF$1(i[b],a[b],this._bitLength);c=Math.max(f[p].length,c);c=Math.max(f[b].length,c);continue}var m=[r[p],null,null,r[b]];if(r[p].y.cmp(r[b].y)===0){m[1]=r[p].add(r[b]);m[2]=r[p].toJ().mixedAdd(r[b].neg())}else if(r[p].y.cmp(r[b].y.redNeg())===0){m[1]=r[p].toJ().mixedAdd(r[b]);m[2]=r[p].add(r[b].neg())}else{m[1]=r[p].toJ().mixedAdd(r[b]);m[2]=r[p].toJ().mixedAdd(r[b].neg())}var v=[-3,-1,-5,-7,0,7,5,1,3];var y=getJSF$1(i[p],i[b]);c=Math.max(y[0].length,c);f[p]=new Array(c);f[b]=new Array(c);for(h=0;h<c;h++){var w=y[0][h]|0;var A=y[1][h]|0;f[p][h]=v[(w+1)*3+(A+1)];f[b][h]=0;o[p]=m}}var g=this.jpoint(null,null,null);var S=this._wnafT4;for(u=c;u>=0;u--){var E=0;while(u>=0){var _=true;for(h=0;h<n;h++){S[h]=f[h][u]|0;if(S[h]!==0)_=false}if(!_)break;E++;u--}if(u>=0)E++;g=g.dblp(E);if(u<0)break;for(h=0;h<n;h++){var $=S[h];if($===0)continue;else if($>0)l=o[h][$-1>>1];else if($<0)l=o[h][-$-1>>1].neg();if(l.type==="affine")g=g.mixedAdd(l);else g=g.add(l)}}for(u=0;u<n;u++)o[u]=null;if(s)return g;else return g.toP()};function BasePoint$1(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function e(t,r){t=utils_1$1$1.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){if(t[0]===6)assert$1$1(t[t.length-1]%2===0);else if(t[0]===7)assert$1$1(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return n}else if((t[0]===2||t[0]===3)&&t.length-1===i){return this.pointFromX(t.slice(1,1+i),t[0]===3)}throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint$1.prototype._encode=function e(t){var r=this.curve.p.byteLength();var i=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(i);return[4].concat(i,this.getY().toArray("be",r))};BasePoint$1.prototype.encode=function e(t,r){return utils_1$1$1.encode(this._encode(r),t)};BasePoint$1.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint$1.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint$1.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var i=[this];var n=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)n=n.dbl();i.push(n)}return{step:t,points:i}};BasePoint$1.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var i=(1<<t)-1;var n=i===1?null:this.dbl();for(var s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:t,points:r}};BasePoint$1.prototype._getBeta=function e(){return null};BasePoint$1.prototype.dblp=function e(t){var r=this;for(var i=0;i<t;i++)r=r.dbl();return r};var inherits_browser=createCommonjsModule((function(e){if(typeof Object.create==="function"){e.exports=function e(t,r){if(r){t.super_=r;t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function e(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype;t.prototype=new i;t.prototype.constructor=t}}}}));var assert$2$1=utils_1$1$1.assert;function ShortCurve$1(e){base$f.call(this,"short",e);this.a=new bn$1(e.a,16).toRed(this.red);this.b=new bn$1(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve$1,base$f);var short_1$1=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var i;if(t.beta){r=new bn$1(t.beta,16).toRed(this.red)}else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1];r=r.toRed(this.red)}if(t.lambda){i=new bn$1(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){i=s[0]}else{i=s[1];assert$2$1(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new bn$1(e.a,16),b:new bn$1(e.b,16)}}))}else{a=this._getEndoBasis(i)}return{beta:r,lambda:i,basis:a}};ShortCurve$1.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:bn$1.mont(t);var i=new bn$1(2).toRed(r).redInvm();var n=i.redNeg();var s=new bn$1(3).toRed(r).redNeg().redSqrt().redMul(i);var a=n.redAdd(s).fromRed();var o=n.redSub(s).fromRed();return[a,o]};ShortCurve$1.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var i=t;var n=this.n.clone();var s=new bn$1(1);var a=new bn$1(0);var o=new bn$1(0);var f=new bn$1(1);var c;var u;var h;var l;var d;var p;var b;var m=0;var v;var y;while(i.cmpn(0)!==0){var w=n.div(i);v=n.sub(w.mul(i));y=o.sub(w.mul(s));var A=f.sub(w.mul(a));if(!h&&v.cmp(r)<0){c=b.neg();u=s;h=v.neg();l=y}else if(h&&++m===2){break}b=v;n=i;i=v;o=s;s=y;f=a;a=A}d=v.neg();p=y;var g=h.sqr().add(l.sqr());var S=d.sqr().add(p.sqr());if(S.cmp(g)>=0){d=c;p=u}if(h.negative){h=h.neg();l=l.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:h,b:l},{a:d,b:p}]};ShortCurve$1.prototype._endoSplit=function e(t){var r=this.endo.basis;var i=r[0];var n=r[1];var s=n.b.mul(t).divRound(this.n);var a=i.b.neg().mul(t).divRound(this.n);var o=s.mul(i.a);var f=a.mul(n.a);var c=s.mul(i.b);var u=a.mul(n.b);var h=t.sub(o).sub(f);var l=c.add(u).neg();return{k1:h,k2:l}};ShortCurve$1.prototype.pointFromX=function e(t,r){t=new bn$1(t,16);if(!t.red)t=t.toRed(this.red);var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();if(r&&!s||!r&&s)n=n.redNeg();return this.point(t,n)};ShortCurve$1.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var i=t.y;var n=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function e(t,r,i){var n=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}n[a*2]=f;n[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,n,s,a*2,i);for(var h=0;h<a*2;h++){n[h]=null;s[h]=null}return u};function Point$3(e,t,r,i){base$f.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new bn$1(t,16);this.y=new bn$1(r,16);if(i){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits_browser(Point$3,base$f.BasePoint);ShortCurve$1.prototype.point=function e(t,r,i){return new Point$3(this,t,r,i)};ShortCurve$1.prototype.pointFromJSON=function e(t,r){return Point$3.fromJSON(this,t,r)};Point$3.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve;var n=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return r};Point$3.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$3.fromJSON=function e(t,r,i){if(typeof r==="string")r=JSON.parse(r);var n=t.point(r[0],r[1],i);if(!r[2])return n;function s(e){return t.point(e[0],e[1],i)}var a=r[2];n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(s))}};return n};Point$3.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function e(){return this.inf};Point$3.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var i=r.redSqr().redISub(this.x).redISub(t.x);var n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Point$3.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var i=this.x.redSqr();var n=t.redInvm();var s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$3.prototype.getX=function e(){return this.x.fromRed()};Point$3.prototype.getY=function e(){return this.y.fromRed()};Point$3.prototype.mul=function e(t){t=new bn$1(t,16);if(this.isInfinity())return this;else if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$3.prototype.mulAdd=function e(t,r,i){var n=[this,r];var s=[t,i];if(this.curve.endo)return this.curve._endoWnafMulAdd(n,s);else return this.curve._wnafMulAdd(1,n,s,2)};Point$3.prototype.jmulAdd=function e(t,r,i){var n=[this,r];var s=[t,i];if(this.curve.endo)return this.curve._endoWnafMulAdd(n,s,true);else return this.curve._wnafMulAdd(1,n,s,2,true)};Point$3.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$3.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed;var n=function(e){return e.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Point$3.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint$1(e,t,r,i){base$f.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&i===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn$1(0)}else{this.x=new bn$1(t,16);this.y=new bn$1(r,16);this.z=new bn$1(i,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits_browser(JPoint$1,base$f.BasePoint);ShortCurve$1.prototype.jpoint=function e(t,r,i){return new JPoint$1(this,t,r,i)};JPoint$1.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var i=this.x.redMul(r);var n=this.y.redMul(r).redMul(t);return this.curve.point(i,n)};JPoint$1.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var i=this.z.redSqr();var n=this.x.redMul(r);var s=t.x.redMul(i);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(i.redMul(this.z));var f=n.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var h=u.redMul(f);var l=n.redMul(u);var d=c.redSqr().redIAdd(h).redISub(l).redISub(l);var p=c.redMul(l.redISub(d)).redISub(a.redMul(h));var b=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,b)};JPoint$1.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var i=this.x;var n=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=i.redSub(n);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var h=i.redMul(c);var l=f.redSqr().redIAdd(u).redISub(h).redISub(h);var d=f.redMul(h.redISub(l)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(l,d,p)};JPoint$1.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<t;r++)i=i.dbl();return i}var n=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(r=0;r<t;r++){var h=a.redSqr();var l=u.redSqr();var d=l.redSqr();var p=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c));var b=a.redMul(l);var m=p.redSqr().redISub(b.redAdd(b));var v=b.redISub(m);var y=p.redMul(v);y=y.redIAdd(y).redISub(d);var w=u.redMul(f);if(r+1<t)c=c.redMul(d);a=m;f=w;u=y}return this.curve.jpoint(a,u.redMul(s),f)};JPoint$1.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint$1.prototype._zeroDbl=function e(){var t;var r;var i;if(this.zOne){var n=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);i=this.y.redAdd(this.y)}else{var h=this.x.redSqr();var l=this.y.redSqr();var d=l.redSqr();var p=this.x.redAdd(l).redSqr().redISub(h).redISub(d);p=p.redIAdd(p);var b=h.redAdd(h).redIAdd(h);var m=b.redSqr();var v=d.redIAdd(d);v=v.redIAdd(v);v=v.redIAdd(v);t=m.redISub(p).redISub(p);r=b.redMul(p.redISub(t)).redISub(v);i=this.y.redMul(this.z);i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};JPoint$1.prototype._threeDbl=function e(){var t;var r;var i;if(this.zOne){var n=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);i=this.y.redAdd(this.y)}else{var h=this.z.redSqr();var l=this.y.redSqr();var d=this.x.redMul(l);var p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var b=d.redIAdd(d);b=b.redIAdd(b);var m=b.redAdd(b);t=p.redSqr().redISub(m);i=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var v=l.redSqr();v=v.redIAdd(v);v=v.redIAdd(v);v=v.redIAdd(v);r=p.redMul(b.redISub(t)).redISub(v)}return this.curve.jpoint(t,r,i)};JPoint$1.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var i=this.y;var n=this.z;var s=n.redSqr().redSqr();var a=r.redSqr();var o=i.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var h=f.redSqr().redISub(u.redAdd(u));var l=u.redISub(h);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(l).redISub(d);var b=i.redAdd(i).redMul(n);return this.curve.jpoint(h,p,b)};JPoint$1.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var i=this.z.redSqr();var n=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(n);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=n.redIAdd(n);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var h=r.redMul(u);h=h.redIAdd(h);h=h.redIAdd(h);var l=this.x.redMul(f).redISub(h);l=l.redIAdd(l);l=l.redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(i).redISub(f);return this.curve.jpoint(l,d,p)};JPoint$1.prototype.mul=function e(t,r){t=new bn$1(t,r);return this.curve._wnafMul(this,t)};JPoint$1.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var n=r.redMul(this.z);var s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(n)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function e(t){var r=this.z.redSqr();var i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return true;var n=t.clone();var s=this.curve.redN.redMul(r);for(;;){n.iadd(this.curve.n);if(n.cmp(this.curve.p)>=0)return false;i.redIAdd(s);if(this.x.cmp(i)===0)return true}};JPoint$1.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};var curve_1$1=createCommonjsModule((function(e,t){var r=t;r.base=base$f;r.short=short_1$1;r.mont=null;r.edwards=null}));var curves_1$1=createCommonjsModule((function(e,t){var r=t;var i=utils_1$1$1.assert;function n(e){if(e.type==="short")this.curve=new curve_1$1.short(e);else if(e.type==="edwards")this.curve=new curve_1$1.edwards(e);else this.curve=new curve_1$1.mont(e);this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;i(this.g.validate(),"Invalid curve");i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=n;function s(e,t){Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function(){var i=new n(t);Object.defineProperty(r,e,{configurable:true,enumerable:true,value:i});return i}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash_1.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch(e){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function HmacDRBG$1(e){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils_1$2.toArray(e.entropy,e.entropyEnc||"hex");var r=utils_1$2.toArray(e.nonce,e.nonceEnc||"hex");var i=utils_1$2.toArray(e.pers,e.persEnc||"hex");minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,i)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function e(t,r,i){var n=t.concat(r).concat(i);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(n);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function e(){return new hash_1.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG$1.prototype.reseed=function e(t,r,i,n){if(typeof r!=="string"){n=i;i=r;r=null}t=utils_1$2.toArray(t,r);i=utils_1$2.toArray(i,n);minimalisticAssert(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(i||[]));this._reseed=1};HmacDRBG$1.prototype.generate=function e(t,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){n=i;i=r;r=null}if(i){i=utils_1$2.toArray(i,n||"hex");this._update(i)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(i);this._reseed++;return utils_1$2.encode(a,r)};var assert$3$1=utils_1$1$1.assert;function KeyPair$2(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$2=KeyPair$2;KeyPair$2.fromPublic=function e(t,r,i){if(r instanceof KeyPair$2)return r;return new KeyPair$2(t,{pub:r,pubEnc:i})};KeyPair$2.fromPrivate=function e(t,r,i){if(r instanceof KeyPair$2)return r;return new KeyPair$2(t,{priv:r,privEnc:i})};KeyPair$2.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$2.prototype.getPublic=function e(t,r){if(typeof t==="string"){r=t;t=null}if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!r)return this.pub;return this.pub.encode(r,t)};KeyPair$2.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$2.prototype._importPrivate=function e(t,r){this.priv=new bn$1(t,r||16);this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$2.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$3$1(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$3$1(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$2.prototype.derive=function e(t){if(!t.validate()){assert$3$1(t.validate(),"public point not validated")}return t.mul(this.priv).getX()};KeyPair$2.prototype.sign=function e(t,r,i){return this.ec.sign(t,this,r,i)};KeyPair$2.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$2.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4$1=utils_1$1$1.assert;function Signature$3(e,t){if(e instanceof Signature$3)return e;if(this._importDER(e,t))return;assert$4$1(e.r&&e.s,"Signature without r or s");this.r=new bn$1(e.r,16);this.s=new bn$1(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$2=Signature$3;function Position$1(){this.place=0}function getLength$1(e,t){var r=e[t.place++];if(!(r&128)){return r}var i=r&15;if(i===0||i>4){return false}var n=0;for(var s=0,a=t.place;s<i;s++,a++){n<<=8;n|=e[a];n>>>=0}if(n<=127){return false}t.place=a;return n}function rmPadding$1(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$3.prototype._importDER=function e(t,r){t=utils_1$1$1.toArray(t,r);var i=new Position$1;if(t[i.place++]!==48){return false}var n=getLength$1(t,i);if(n===false){return false}if(n+i.place!==t.length){return false}if(t[i.place++]!==2){return false}var s=getLength$1(t,i);if(s===false){return false}var a=t.slice(i.place,s+i.place);i.place+=s;if(t[i.place++]!==2){return false}var o=getLength$1(t,i);if(o===false){return false}if(t.length!==o+i.place){return false}var f=t.slice(i.place,o+i.place);if(a[0]===0){if(a[1]&128){a=a.slice(1)}else{return false}}if(f[0]===0){if(f[1]&128){f=f.slice(1)}else{return false}}this.r=new bn$1(a);this.s=new bn$1(f);this.recoveryParam=null;return true};function constructLength$1(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$3.prototype.toDER=function e(t){var r=this.r.toArray();var i=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(i[0]&128)i=[0].concat(i);r=rmPadding$1(r);i=rmPadding$1(i);while(!i[0]&&!(i[1]&128)){i=i.slice(1)}var n=[2];constructLength$1(n,r.length);n=n.concat(r);n.push(2);constructLength$1(n,i.length);var s=n.concat(i);var a=[48];constructLength$1(a,s.length);a=a.concat(s);return utils_1$1$1.encode(a,t)};var rand=function(){throw new Error("unsupported")};var assert$5$1=utils_1$1$1.assert;function EC$1(e){if(!(this instanceof EC$1))return new EC$1(e);if(typeof e==="string"){assert$5$1(Object.prototype.hasOwnProperty.call(curves_1$1,e),"Unknown curve "+e);e=curves_1$1[e]}if(e instanceof curves_1$1.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec$1=EC$1;EC$1.prototype.keyPair=function e(t){return new key$2(this,t)};EC$1.prototype.keyFromPrivate=function e(t,r){return key$2.fromPrivate(this,t,r)};EC$1.prototype.keyFromPublic=function e(t,r){return key$2.fromPublic(this,t,r)};EC$1.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg$1({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||rand(),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});var i=this.n.byteLength();var n=this.n.sub(new bn$1(2));for(;;){var s=new bn$1(r.generate(i));if(s.cmp(n)>0)continue;s.iaddn(1);return this.keyFromPrivate(s)}};EC$1.prototype._truncateToN=function e(t,r){var i=t.byteLength()*8-this.n.bitLength();if(i>0)t=t.ushrn(i);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC$1.prototype.sign=function e(t,r,i,n){if(typeof i==="object"){n=i;i=null}if(!n)n={};r=this.keyFromPrivate(r,i);t=this._truncateToN(new bn$1(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new hmacDrbg$1({hash:this.hash,entropy:a,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"});var c=this.n.sub(new bn$1(1));for(var u=0;;u++){var h=n.k?n.k(u):new bn$1(f.generate(this.n.byteLength()));h=this._truncateToN(h,true);if(h.cmpn(1)<=0||h.cmp(c)>=0)continue;var l=this.g.mul(h);if(l.isInfinity())continue;var d=l.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var b=h.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));b=b.umod(this.n);if(b.cmpn(0)===0)continue;var m=(l.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(n.canonical&&b.cmp(this.nh)>0){b=this.n.sub(b);m^=1}return new signature$2({r:p,s:b,recoveryParam:m})}};EC$1.prototype.verify=function e(t,r,i,n){t=this._truncateToN(new bn$1(t,16));i=this.keyFromPublic(i,n);r=new signature$2(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);var u;if(!this.curve._maxwellTrick){u=this.g.mulAdd(f,i.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}u=this.g.jmulAdd(f,i.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC$1.prototype.recoverPubKey=function(e,t,r,i){assert$5$1((3&r)===r,"The recovery param is more than two bits");t=new signature$2(t,i);var n=this.n;var s=new bn$1(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(n);var h=n.sub(s).mul(u).umod(n);var l=o.mul(u).umod(n);return this.g.mulAdd(h,a,l)};EC$1.prototype.getKeyRecoveryParam=function(e,t,r,i){t=new signature$2(t,i);if(t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var elliptic_1$1=createCommonjsModule((function(e,t){var r=t;r.version={version:"6.5.4"}.version;r.utils=utils_1$1$1;r.rand=function(){throw new Error("unsupported")};r.curve=curve_1$1;r.curves=curves_1$1;r.ec=ec$1;r.eddsa=null}));var EC$1$1=elliptic_1$1.ec;const version$1="signing-key/5.7.0";const logger$1=new Logger(version$1);let _curve=null;function getCurve(){if(!_curve){_curve=new EC$1$1("secp256k1")}return _curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1");defineReadOnly(this,"privateKey",hexlify(e));if(hexDataLength(this.privateKey)!==32){logger$1.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]")}const t=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+t.getPublic(false,"hex"));defineReadOnly(this,"compressedPublicKey","0x"+t.getPublic(true,"hex"));defineReadOnly(this,"_isSigningKey",true)}_addPoint(e){const t=getCurve().keyFromPublic(arrayify(this.publicKey));const r=getCurve().keyFromPublic(arrayify(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey));const r=arrayify(e);if(r.length!==32){logger$1.throwArgumentError("bad digest length","digest",e)}const i=t.sign(r,{canonical:true});return splitSignature({recoveryParam:i.recoveryParam,r:hexZeroPad("0x"+i.r.toString(16),32),s:hexZeroPad("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const t=getCurve().keyFromPrivate(arrayify(this.privateKey));const r=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(e,t){const r=splitSignature(t);const i={r:arrayify(r.r),s:arrayify(r.s)};return"0x"+getCurve().recoverPubKey(arrayify(e),i,r.recoveryParam).encode("hex",false)}function computePublicKey(e,t){const r=arrayify(e);if(r.length===32){const e=new SigningKey(r);if(t){return"0x"+getCurve().keyFromPrivate(r).getPublic(true,"hex")}return e.publicKey}else if(r.length===33){if(t){return hexlify(r)}return"0x"+getCurve().keyFromPublic(r).getPublic(false,"hex")}else if(r.length===65){if(!t){return hexlify(r)}return"0x"+getCurve().keyFromPublic(r).getPublic(true,"hex")}return logger$1.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version="transactions/5.7.0";const logger=new Logger(version);var TransactionTypes;(function(e){e[e["legacy"]=0]="legacy";e[e["eip2930"]=1]="eip2930";e[e["eip1559"]=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));function handleAddress(e){if(e==="0x"){return null}return getAddress(e)}function handleNumber(e){if(e==="0x"){return Zero}return BigNumber$1.from(e)}function computeAddress(e){const t=computePublicKey(e);return getAddress(hexDataSlice(keccak256(hexDataSlice(t,1)),12))}function recoverAddress(e,t){return computeAddress(recoverPublicKey(arrayify(e),t))}function formatNumber(e,t){const r=stripZeros(BigNumber$1.from(e).toHexString());if(r.length>32){logger.throwArgumentError("invalid length for "+t,"transaction:"+t,e)}return r}function accessSetify(e,t){return{address:getAddress(e),storageKeys:(t||[]).map(((t,r)=>{if(hexDataLength(t)!==32){logger.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t)}return t.toLowerCase()}))}}function accessListify(e){if(Array.isArray(e)){return e.map(((e,t)=>{if(Array.isArray(e)){if(e.length>2){logger.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e)}return accessSetify(e[0],e[1])}return accessSetify(e.address,e.storageKeys)}))}const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>{e[t]=true;return e}),{});return accessSetify(t,Object.keys(r).sort())}));t.sort(((e,t)=>e.address.localeCompare(t.address)));return t}function formatAccessList(e){return accessListify(e).map((e=>[e.address,e.storageKeys]))}function _serializeEip1559(e,t){if(e.gasPrice!=null){const t=BigNumber$1.from(e.gasPrice);const r=BigNumber$1.from(e.maxFeePerGas||0);if(!t.eq(r)){logger.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}}const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(e.maxFeePerGas||0,"maxFeePerGas"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=splitSignature(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push(stripZeros(e.r));r.push(stripZeros(e.s))}return hexConcat(["0x02",encode$b(r)])}function _serializeEip2930(e,t){const r=[formatNumber(e.chainId||0,"chainId"),formatNumber(e.nonce||0,"nonce"),formatNumber(e.gasPrice||0,"gasPrice"),formatNumber(e.gasLimit||0,"gasLimit"),e.to!=null?getAddress(e.to):"0x",formatNumber(e.value||0,"value"),e.data||"0x",formatAccessList(e.accessList||[])];if(t){const e=splitSignature(t);r.push(formatNumber(e.recoveryParam,"recoveryParam"));r.push(stripZeros(e.r));r.push(stripZeros(e.s))}return hexConcat(["0x01",encode$b(r)])}function _parseEipSignature(e,t,r){try{const r=handleNumber(t[0]).toNumber();if(r!==0&&r!==1){throw new Error("bad recid")}e.v=r}catch(e){logger.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=hexZeroPad(t[1],32);e.s=hexZeroPad(t[2],32);try{const t=keccak256(r(e));e.from=recoverAddress(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function _parseEip1559(e){const t=decode$a(e.slice(1));if(t.length!==9&&t.length!==12){logger.throwArgumentError("invalid component count for transaction type: 2","payload",hexlify(e))}const r=handleNumber(t[2]);const i=handleNumber(t[3]);const n={type:2,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:i,gasPrice:null,gasLimit:handleNumber(t[4]),to:handleAddress(t[5]),value:handleNumber(t[6]),data:t[7],accessList:accessListify(t[8])};if(t.length===9){return n}n.hash=keccak256(e);_parseEipSignature(n,t.slice(9),_serializeEip1559);return n}function _parseEip2930(e){const t=decode$a(e.slice(1));if(t.length!==8&&t.length!==11){logger.throwArgumentError("invalid component count for transaction type: 1","payload",hexlify(e))}const r={type:1,chainId:handleNumber(t[0]).toNumber(),nonce:handleNumber(t[1]).toNumber(),gasPrice:handleNumber(t[2]),gasLimit:handleNumber(t[3]),to:handleAddress(t[4]),value:handleNumber(t[5]),data:t[6],accessList:accessListify(t[7])};if(t.length===8){return r}r.hash=keccak256(e);_parseEipSignature(r,t.slice(8),_serializeEip2930);return r}function _parse(e){const t=decode$a(e);if(t.length!==9&&t.length!==6){logger.throwArgumentError("invalid raw transaction","rawTransaction",e)}const r={nonce:handleNumber(t[0]).toNumber(),gasPrice:handleNumber(t[1]),gasLimit:handleNumber(t[2]),to:handleAddress(t[3]),value:handleNumber(t[4]),data:t[5],chainId:0};if(t.length===6){return r}try{r.v=BigNumber$1.from(t[6]).toNumber()}catch(e){return r}r.r=hexZeroPad(t[7],32);r.s=hexZeroPad(t[8],32);if(BigNumber$1.from(r.r).isZero()&&BigNumber$1.from(r.s).isZero()){r.chainId=r.v;r.v=0}else{r.chainId=Math.floor((r.v-35)/2);if(r.chainId<0){r.chainId=0}let i=r.v-27;const n=t.slice(0,6);if(r.chainId!==0){n.push(hexlify(r.chainId));n.push("0x");n.push("0x");i-=r.chainId*2+8}const s=keccak256(encode$b(n));try{r.from=recoverAddress(s,{r:hexlify(r.r),s:hexlify(r.s),recoveryParam:i})}catch(e){}r.hash=keccak256(e)}r.type=null;return r}function parse(e){const t=arrayify(e);if(t[0]>127){return _parse(t)}switch(t[0]){case 1:return _parseEip2930(t);case 2:return _parseEip1559(t)}return logger.throwError(`unsupported transaction type: ${t[0]}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}class EthUtils{static encodeTransactionParameter(e,t){switch(e){case"bool":if(typeof t!=="boolean")t=Boolean(t);return t;case"string":case"address":return t}if(EthUtils.isIntType(e)){if(typeof t==="string"){t=BigInt(t)}return t}if(e.indexOf("byte")===0){if(t&&(typeof t!=="string"||t.indexOf("0x")!==0))t=hexlify(t);return t}throw new Error("Ethereum argument encoding for type "+e+" is not defined")}static isIntType(e){const t=e.indexOf("int");return t===0||t===1}static tokenScriptOutputToEthers(e){switch(e){case"utf8":return"string"}return e}}class AbstractDependencyBranch{constructor(e,t){this.tokenScript=e;this.localAttrContext=t}async getValue(e){switch(this.ref){case"tokenId":if(!e)throw new Error("tokenId reference cannot be resolved as no token context is set.");if(e.selectedNftId){const t=e.selectedNftId;return BigInt(t)}else{throw new Error("tokenId reference is not accessible under the context of a fungible token")}case"ownerAddress":const t=await this.tokenScript.getEngine().getWalletAdapter();return await t.getCurrentWalletAddress();default:return await this.resolveValue(e)}}invalidateDependencies(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.invalidate(e)}catch(t){return e.indexOf(this.localRef)>-1}}isDependentOn(e){if(!this.isStaticAttribute())return false;if(this.isSpecialRef()){return e.indexOf(this.ref)>-1}try{const t=this.getBackingAttribute();return t.isDependentOn(e)}catch(t){return e.indexOf(this.localRef)>-1}}isStaticAttribute(){return!(!this.ref&&!this.localRef)}getBackingAttribute(){let e;if(this.localRef){if(!this.localAttrContext)throw new Error("Local ref cannot be resolve since this attribute is from the global attribute scope. ");e=this.localAttrContext.getAttribute(this.localRef)}else{if(this.localAttrContext&&this.localAttrContext.hasAttribute(this.ref)){e=this.localAttrContext.getAttribute(this.ref)}else{e=this.tokenScript.getAttributes().getAttribute(this.ref)}}return e}isSpecialRef(){return["tokenId","ownerAddress"].indexOf(this.ref)>-1}}class Argument extends AbstractDependencyBranch{constructor(e,t,r,i){super(e,i);this.type=r?r:t.tagName.split(":")[1];this.content=t.textContent;this.ref=t.getAttribute("ref");this.localRef=t.getAttribute("local-ref")}async resolveValue(e){let t;if(this.ref||this.localRef){let r;try{r=this.getBackingAttribute()}catch(e){t=this.tokenScript.getViewController().getUserEntryValue(this.localRef);if(!t){throw e}}if(r)t=await r.getValue(true,false,e)}else{t=this.content}return EthUtils.encodeTransactionParameter(this.type,t)}}class Arguments{constructor(e,t,r){this.tokenScript=e;this.parentElem=t;this.localAttrContext=r}getArguments(){if(!this.arguments){this.arguments=[];const e=this.parentElem.getElementsByTagName("ts:data");if(e.length===0)return[];const t=e[0].children;if(t.length===0)return[];for(let e in t){if(!t.hasOwnProperty(e))continue;const r=t[e];this.arguments.push(new Argument(this.tokenScript,r,null,this.localAttrContext))}}return this.arguments}[Symbol.iterator](){return this.getArguments().values()}}class Transaction{constructor(e,t,r){this.tokenScript=e;this.transactionDef=t;this.localAttrContext=r;const i=t.getElementsByTagName("ethereum:transaction");if(!i){return}const n=i[0].getAttribute("contract");let s=EthUtils.tokenScriptOutputToEthers(i[0].getAttribute("as"));this.transaction={as:s,contract:this.tokenScript.getContractByName(n),contractName:n,function:i[0].getAttribute("function"),args:new Arguments(this.tokenScript,i[0],this.localAttrContext).getArguments(),value:this.getValueArg(i[0])}}getValueArg(e){const t=e.getElementsByTagName("ethereum:value");if(t.length===0)return null;return new Argument(this.tokenScript,t[0],"uint256",this.localAttrContext)}getTransactionInfo(){return this.transaction}}var bignumber=createCommonjsModule$1((function(e){(function(t){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,s=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",f=1e14,c=14,u=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function p(e){var t,r,S,E=D.prototype={constructor:D,toString:null,valueOf:null},_=new D(1),$=20,C=4,P=-7,T=21,I=-1e7,x=1e7,N=false,M=1,k=0,R={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},B="0123456789abcdefghijklmnopqrstuvwxyz",O=true;function D(e,t){var n,a,f,h,l,d,p,b,m=this;if(!(m instanceof D))return new D(e,t);if(t==null){if(e&&e._isBigNumber===true){m.s=e.s;if(!e.c||e.e>x){m.c=m.e=null}else if(e.e<I){m.c=[m.e=0]}else{m.e=e.e;m.c=e.c.slice()}return}if((d=typeof e=="number")&&e*0==0){m.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(h=0,l=e;l>=10;l/=10,h++);if(h>x){m.c=m.e=null}else{m.e=h;m.c=[e]}return}b=String(e)}else{if(!i.test(b=String(e)))return S(m,b,d);m.s=b.charCodeAt(0)==45?(b=b.slice(1),-1):1}if((h=b.indexOf("."))>-1)b=b.replace(".","");if((l=b.search(/e/i))>0){if(h<0)h=l;h+=+b.slice(l+1);b=b.substring(0,l)}else if(h<0){h=b.length}}else{y(t,2,B.length,"Base");if(t==10&&O){m=new D(e);return K(m,$+m.e+1,C)}b=String(e);if(d=typeof e=="number"){if(e*0!=0)return S(m,b,d,t);m.s=1/e<0?(b=b.slice(1),-1):1;if(D.DEBUG&&b.replace(/^0\.0*|\./,"").length>15){throw Error(o+e)}}else{m.s=b.charCodeAt(0)===45?(b=b.slice(1),-1):1}n=B.slice(0,t);h=l=0;for(p=b.length;l<p;l++){if(n.indexOf(a=b.charAt(l))<0){if(a=="."){if(l>h){h=p;continue}}else if(!f){if(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase())){f=true;l=-1;h=0;continue}}return S(m,String(e),d,t)}}d=false;b=r(b,t,10,m.s);if((h=b.indexOf("."))>-1)b=b.replace(".","");else h=b.length}for(l=0;b.charCodeAt(l)===48;l++);for(p=b.length;b.charCodeAt(--p)===48;);if(b=b.slice(l,++p)){p-=l;if(d&&D.DEBUG&&p>15&&(e>u||e!==s(e))){throw Error(o+m.s*e)}if((h=h-l-1)>x){m.c=m.e=null}else if(h<I){m.c=[m.e=0]}else{m.e=h;m.c=[];l=(h+1)%c;if(h<0)l+=c;if(l<p){if(l)m.c.push(+b.slice(0,l));for(p-=c;l<p;){m.c.push(+b.slice(l,l+=c))}l=c-(b=b.slice(l)).length}else{l-=p}for(;l--;b+="0");m.c.push(+b)}}else{m.c=[m.e=0]}}D.clone=p;D.ROUND_UP=0;D.ROUND_DOWN=1;D.ROUND_CEIL=2;D.ROUND_FLOOR=3;D.ROUND_HALF_UP=4;D.ROUND_HALF_DOWN=5;D.ROUND_HALF_EVEN=6;D.ROUND_HALF_CEIL=7;D.ROUND_HALF_FLOOR=8;D.EUCLID=9;D.config=D.set=function(e){var t,r;if(e!=null){if(typeof e=="object"){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];y(r,0,d,t);$=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];y(r,0,8,t);C=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){y(r[0],-d,0,t);y(r[1],0,d,t);P=r[0];T=r[1]}else{y(r,-d,d,t);P=-(T=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){y(r[0],-d,-1,t);y(r[1],1,d,t);I=r[0];x=r[1]}else{y(r,-d,d,t);if(r){I=-(x=r<0?-r:r)}else{throw Error(a+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(r===!!r){if(r){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){N=r}else{N=!r;throw Error(a+"crypto unavailable")}}else{N=r}}else{throw Error(a+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];y(r,0,9,t);M=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];y(r,0,d,t);k=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if(typeof r=="object")R=r;else throw Error(a+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if(typeof r=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(r)){O=r.slice(0,10)=="0123456789";B=r}else{throw Error(a+t+" invalid: "+r)}}}else{throw Error(a+"Object expected: "+e)}}return{DECIMAL_PLACES:$,ROUNDING_MODE:C,EXPONENTIAL_AT:[P,T],RANGE:[I,x],CRYPTO:N,MODULO_MODE:M,POW_PRECISION:k,FORMAT:R,ALPHABET:B}};D.isBigNumber=function(e){if(!e||e._isBigNumber!==true)return false;if(!D.DEBUG)return true;var t,r,i=e.c,n=e.e,o=e.s;e:if({}.toString.call(i)=="[object Array]"){if((o===1||o===-1)&&n>=-d&&n<=d&&n===s(n)){if(i[0]===0){if(n===0&&i.length===1)return true;break e}t=(n+1)%c;if(t<1)t+=c;if(String(i[0]).length==t){for(t=0;t<i.length;t++){r=i[t];if(r<0||r>=f||r!==s(r))break e}if(r!==0)return true}}}else if(i===null&&n===null&&(o===null||o===1||o===-1)){return true}throw Error(a+"Invalid BigNumber: "+e)};D.maximum=D.max=function(){return j(arguments,E.lt)};D.minimum=D.min=function(){return j(arguments,E.gt)};D.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return s(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var r,i,o,f,u,l=0,p=[],b=new D(_);if(e==null)e=$;else y(e,0,d);f=n(e/c);if(N){if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(f*=2));for(;l<f;){u=r[l]*131072+(r[l+1]>>>11);if(u>=9e15){i=crypto.getRandomValues(new Uint32Array(2));r[l]=i[0];r[l+1]=i[1]}else{p.push(u%1e14);l+=2}}l=f/2}else if(crypto.randomBytes){r=crypto.randomBytes(f*=7);for(;l<f;){u=(r[l]&31)*281474976710656+r[l+1]*1099511627776+r[l+2]*4294967296+r[l+3]*16777216+(r[l+4]<<16)+(r[l+5]<<8)+r[l+6];if(u>=9e15){crypto.randomBytes(7).copy(r,l)}else{p.push(u%1e14);l+=7}}l=f/7}else{N=false;throw Error(a+"crypto unavailable")}}if(!N){for(;l<f;){u=t();if(u<9e15)p[l++]=u%1e14}}f=p[--l];e%=c;if(f&&e){u=h[c-e];p[l]=s(f/u)*u}for(;p[l]===0;p.pop(),l--);if(l<0){p=[o=0]}else{for(o=-1;p[0]===0;p.splice(0,1),o-=c);for(l=1,u=p[0];u>=10;u/=10,l++);if(l<c)o-=c-l}b.e=o;b.c=p;return b}}();D.sum=function(){var e=1,t=arguments,r=new D(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function r(e,t,r,i){var n,s=[0],a,o=0,f=e.length;for(;o<f;){for(a=s.length;a--;s[a]*=t);s[0]+=i.indexOf(e.charAt(o++));for(n=0;n<s.length;n++){if(s[n]>r-1){if(s[n+1]==null)s[n+1]=0;s[n+1]+=s[n]/r|0;s[n]%=r}}}return s.reverse()}return function(i,n,s,a,o){var f,c,u,h,l,d,p,b,v=i.indexOf("."),y=$,w=C;if(v>=0){h=k;k=0;i=i.replace(".","");b=new D(n);d=b.pow(i.length-v);k=h;b.c=r(g(m(d.c),d.e,"0"),10,s,e);b.e=b.c.length}p=r(i,n,s,o?(f=B,e):(f=e,B));u=h=p.length;for(;p[--h]==0;p.pop());if(!p[0])return f.charAt(0);if(v<0){--u}else{d.c=p;d.e=u;d.s=a;d=t(d,b,y,w,s);p=d.c;l=d.r;u=d.e}c=u+y+1;v=p[c];h=s/2;l=l||c<0||p[c+1]!=null;l=w<4?(v!=null||l)&&(w==0||w==(d.s<0?3:2)):v>h||v==h&&(w==4||l||w==6&&p[c-1]&1||w==(d.s<0?8:7));if(c<1||!p[0]){i=l?g(f.charAt(1),-y,f.charAt(0)):f.charAt(0)}else{p.length=c;if(l){for(--s;++p[--c]>s;){p[c]=0;if(!c){++u;p=[1].concat(p)}}}for(h=p.length;!p[--h];);for(v=0,i="";v<=h;i+=f.charAt(p[v++]));i=g(i,u,f.charAt(0))}return i}}();t=function(){function e(e,t,r){var i,n,s,a,o=0,f=e.length,c=t%l,u=t/l|0;for(e=e.slice();f--;){s=e[f]%l;a=e[f]/l|0;i=u*s+a*c;n=c*s+i%l*l+o;o=(n/r|0)+(i/l|0)+u*a;e[f]=n%r}if(o)e=[o].concat(e);return e}function t(e,t,r,i){var n,s;if(r!=i){s=r>i?1:-1}else{for(n=s=0;n<r;n++){if(e[n]!=t[n]){s=e[n]>t[n]?1:-1;break}}}return s}function r(e,t,r,i){var n=0;for(;r--;){e[r]-=n;n=e[r]<t[r]?1:0;e[r]=n*i+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,n,a,o,u){var h,l,d,p,m,v,y,w,A,g,S,E,_,$,C,P,T,I=i.s==n.s?1:-1,x=i.c,N=n.c;if(!x||!x[0]||!N||!N[0]){return new D(!i.s||!n.s||(x?N&&x[0]==N[0]:!N)?NaN:x&&x[0]==0||!N?I*0:I/0)}w=new D(I);A=w.c=[];l=i.e-n.e;I=a+l+1;if(!u){u=f;l=b(i.e/c)-b(n.e/c);I=I/c|0}for(d=0;N[d]==(x[d]||0);d++);if(N[d]>(x[d]||0))l--;if(I<0){A.push(1);p=true}else{$=x.length;P=N.length;d=0;I+=2;m=s(u/(N[0]+1));if(m>1){N=e(N,m,u);x=e(x,m,u);P=N.length;$=x.length}_=P;g=x.slice(0,P);S=g.length;for(;S<P;g[S++]=0);T=N.slice();T=[0].concat(T);C=N[0];if(N[1]>=u/2)C++;do{m=0;h=t(N,g,P,S);if(h<0){E=g[0];if(P!=S)E=E*u+(g[1]||0);m=s(E/C);if(m>1){if(m>=u)m=u-1;v=e(N,m,u);y=v.length;S=g.length;while(t(v,g,y,S)==1){m--;r(v,P<y?T:N,y,u);y=v.length;h=1}}else{if(m==0){h=m=1}v=N.slice();y=v.length}if(y<S)v=[0].concat(v);r(g,v,S,u);S=g.length;if(h==-1){while(t(N,g,P,S)<1){m++;r(g,P<S?T:N,S,u);S=g.length}}}else if(h===0){m++;g=[0]}A[d++]=m;if(g[0]){g[S++]=x[_]||0}else{g=[x[_]];S=1}}while((_++<$||g[0]!=null)&&I--);p=g[0]!=null;if(!A[0])A.splice(0,1)}if(u==f){for(d=1,I=A[0];I>=10;I/=10,d++);K(w,a+(w.e=d+l*c-1)+1,o,p)}else{w.e=l;w.r=+p}return w}}();function U(e,t,r,i){var n,s,a,o,f;if(r==null)r=C;else y(r,0,8);if(!e.c)return e.toString();n=e.c[0];a=e.e;if(t==null){f=m(e.c);f=i==1||i==2&&(a<=P||a>=T)?A(f,a):g(f,a,"0")}else{e=K(new D(e),t,r);s=e.e;f=m(e.c);o=f.length;if(i==1||i==2&&(t<=s||s<=P)){for(;o<t;f+="0",o++);f=A(f,s)}else{t-=a;f=g(f,s,"0");if(s+1>o){if(--t>0)for(f+=".";t--;f+="0");}else{t+=s-o;if(t>0){if(s+1==o)f+=".";for(;t--;f+="0");}}}}return e.s<0&&n?"-"+f:f}function j(e,t){var r,i=1,n=new D(e[0]);for(;i<e.length;i++){r=new D(e[i]);if(!r.s){n=r;break}else if(t.call(n,r)){n=r}}return n}function L(e,t,r){var i=1,n=t.length;for(;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,i++);if((r=i+r*c-1)>x){e.c=e.e=null}else if(r<I){e.c=[e.e=0]}else{e.e=r;e.c=t}return e}S=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,i=/^-?(Infinity|NaN)$/,n=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,o,f,c){var u,h=f?o:o.replace(n,"");if(i.test(h)){s.s=isNaN(h)?null:h<0?-1:1}else{if(!f){h=h.replace(e,(function(e,t,r){u=(r=r.toLowerCase())=="x"?16:r=="b"?2:8;return!c||c==u?t:e}));if(c){u=c;h=h.replace(t,"$1").replace(r,"0.$1")}if(o!=h)return new D(h,u)}if(D.DEBUG){throw Error(a+"Not a"+(c?" base "+c:"")+" number: "+o)}s.s=null}s.c=s.e=null}}();function K(e,t,r,i){var a,o,u,l,d,p,b,m=e.c,v=h;if(m){e:{for(a=1,l=m[0];l>=10;l/=10,a++);o=t-a;if(o<0){o+=c;u=t;d=m[p=0];b=d/v[a-u-1]%10|0}else{p=n((o+1)/c);if(p>=m.length){if(i){for(;m.length<=p;m.push(0));d=b=0;a=1;o%=c;u=o-c+1}else{break e}}else{d=l=m[p];for(a=1;l>=10;l/=10,a++);o%=c;u=o-c+a;b=u<0?0:d/v[a-u-1]%10|0}}i=i||t<0||m[p+1]!=null||(u<0?d:d%v[a-u-1]);i=r<4?(b||i)&&(r==0||r==(e.s<0?3:2)):b>5||b==5&&(r==4||i||r==6&&(o>0?u>0?d/v[a-u]:0:m[p-1])%10&1||r==(e.s<0?8:7));if(t<1||!m[0]){m.length=0;if(i){t-=e.e+1;m[0]=v[(c-t%c)%c];e.e=-t||0}else{m[0]=e.e=0}return e}if(o==0){m.length=p;l=1;p--}else{m.length=p+1;l=v[c-o];m[p]=u>0?s(d/v[a-u]%v[u])*l:0}if(i){for(;;){if(p==0){for(o=1,u=m[0];u>=10;u/=10,o++);u=m[0]+=l;for(l=1;u>=10;u/=10,l++);if(o!=l){e.e++;if(m[0]==f)m[0]=1}break}else{m[p]+=l;if(m[p]!=f)break;m[p--]=0;l=1}}}for(o=m.length;m[--o]===0;m.pop());}if(e.e>x){e.c=e.e=null}else if(e.e<I){e.c=[e.e=0]}}return e}function V(e){var t,r=e.e;if(r===null)return e.toString();t=m(e.c);t=r<=P||r>=T?A(t,r):g(t,r,"0");return e.s<0?"-"+t:t}E.absoluteValue=E.abs=function(){var e=new D(this);if(e.s<0)e.s=1;return e};E.comparedTo=function(e,t){return v(this,new D(e,t))};E.decimalPlaces=E.dp=function(e,t){var r,i,n,s=this;if(e!=null){y(e,0,d);if(t==null)t=C;else y(t,0,8);return K(new D(s),e+s.e+1,t)}if(!(r=s.c))return null;i=((n=r.length-1)-b(this.e/c))*c;if(n=r[n])for(;n%10==0;n/=10,i--);if(i<0)i=0;return i};E.dividedBy=E.div=function(e,r){return t(this,new D(e,r),$,C)};E.dividedToIntegerBy=E.idiv=function(e,r){return t(this,new D(e,r),0,1)};E.exponentiatedBy=E.pow=function(e,t){var r,i,o,f,u,h,l,d,p,b=this;e=new D(e);if(e.c&&!e.isInteger()){throw Error(a+"Exponent not an integer: "+V(e))}if(t!=null)t=new D(t);h=e.e>14;if(!b.c||!b.c[0]||b.c[0]==1&&!b.e&&b.c.length==1||!e.c||!e.c[0]){p=new D(Math.pow(+V(b),h?e.s*(2-w(e)):+V(e)));return t?p.mod(t):p}l=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new D(NaN);i=!l&&b.isInteger()&&t.isInteger();if(i)b=b.mod(t)}else if(e.e>9&&(b.e>0||b.e<-1||(b.e==0?b.c[0]>1||h&&b.c[1]>=24e7:b.c[0]<8e13||h&&b.c[0]<=9999975e7))){f=b.s<0&&w(e)?-0:0;if(b.e>-1)f=1/f;return new D(l?1/f:f)}else if(k){f=n(k/c+2)}if(h){r=new D(.5);if(l)e.s=1;d=w(e)}else{o=Math.abs(+V(e));d=o%2}p=new D(_);for(;;){if(d){p=p.times(b);if(!p.c)break;if(f){if(p.c.length>f)p.c.length=f}else if(i){p=p.mod(t)}}if(o){o=s(o/2);if(o===0)break;d=o%2}else{e=e.times(r);K(e,e.e+1,1);if(e.e>14){d=w(e)}else{o=+V(e);if(o===0)break;d=o%2}}b=b.times(b);if(f){if(b.c&&b.c.length>f)b.c.length=f}else if(i){b=b.mod(t)}}if(i)return p;if(l)p=_.div(p);return t?p.mod(t):f?K(p,k,C,u):p};E.integerValue=function(e){var t=new D(this);if(e==null)e=C;else y(e,0,8);return K(t,t.e+1,e)};E.isEqualTo=E.eq=function(e,t){return v(this,new D(e,t))===0};E.isFinite=function(){return!!this.c};E.isGreaterThan=E.gt=function(e,t){return v(this,new D(e,t))>0};E.isGreaterThanOrEqualTo=E.gte=function(e,t){return(t=v(this,new D(e,t)))===1||t===0};E.isInteger=function(){return!!this.c&&b(this.e/c)>this.c.length-2};E.isLessThan=E.lt=function(e,t){return v(this,new D(e,t))<0};E.isLessThanOrEqualTo=E.lte=function(e,t){return(t=v(this,new D(e,t)))===-1||t===0};E.isNaN=function(){return!this.s};E.isNegative=function(){return this.s<0};E.isPositive=function(){return this.s>0};E.isZero=function(){return!!this.c&&this.c[0]==0};E.minus=function(e,t){var r,i,n,s,a=this,o=a.s;e=new D(e,t);t=e.s;if(!o||!t)return new D(NaN);if(o!=t){e.s=-t;return a.plus(e)}var u=a.e/c,h=e.e/c,l=a.c,d=e.c;if(!u||!h){if(!l||!d)return l?(e.s=-t,e):new D(d?a:NaN);if(!l[0]||!d[0]){return d[0]?(e.s=-t,e):new D(l[0]?a:C==3?-0:0)}}u=b(u);h=b(h);l=l.slice();if(o=u-h){if(s=o<0){o=-o;n=l}else{h=u;n=d}n.reverse();for(t=o;t--;n.push(0));n.reverse()}else{i=(s=(o=l.length)<(t=d.length))?o:t;for(o=t=0;t<i;t++){if(l[t]!=d[t]){s=l[t]<d[t];break}}}if(s){n=l;l=d;d=n;e.s=-e.s}t=(i=d.length)-(r=l.length);if(t>0)for(;t--;l[r++]=0);t=f-1;for(;i>o;){if(l[--i]<d[i]){for(r=i;r&&!l[--r];l[r]=t);--l[r];l[i]+=f}l[i]-=d[i]}for(;l[0]==0;l.splice(0,1),--h);if(!l[0]){e.s=C==3?-1:1;e.c=[e.e=0];return e}return L(e,l,h)};E.modulo=E.mod=function(e,r){var i,n,s=this;e=new D(e,r);if(!s.c||!e.s||e.c&&!e.c[0]){return new D(NaN)}else if(!e.c||s.c&&!s.c[0]){return new D(s)}if(M==9){n=e.s;e.s=1;i=t(s,e,0,3);e.s=n;i.s*=n}else{i=t(s,e,0,M)}e=s.minus(i.times(e));if(!e.c[0]&&M==1)e.s=s.s;return e};E.multipliedBy=E.times=function(e,t){var r,i,n,s,a,o,u,h,d,p,m,v,y,w,A,g=this,S=g.c,E=(e=new D(e,t)).c;if(!S||!E||!S[0]||!E[0]){if(!g.s||!e.s||S&&!S[0]&&!E||E&&!E[0]&&!S){e.c=e.e=e.s=null}else{e.s*=g.s;if(!S||!E){e.c=e.e=null}else{e.c=[0];e.e=0}}return e}i=b(g.e/c)+b(e.e/c);e.s*=g.s;u=S.length;p=E.length;if(u<p){y=S;S=E;E=y;n=u;u=p;p=n}for(n=u+p,y=[];n--;y.push(0));w=f;A=l;for(n=p;--n>=0;){r=0;m=E[n]%A;v=E[n]/A|0;for(a=u,s=n+a;s>n;){h=S[--a]%A;d=S[a]/A|0;o=v*h+d*m;h=m*h+o%A*A+y[s]+r;r=(h/w|0)+(o/A|0)+v*d;y[s--]=h%w}y[s]=r}if(r){++i}else{y.splice(0,1)}return L(e,y,i)};E.negated=function(){var e=new D(this);e.s=-e.s||null;return e};E.plus=function(e,t){var r,i=this,n=i.s;e=new D(e,t);t=e.s;if(!n||!t)return new D(NaN);if(n!=t){e.s=-t;return i.minus(e)}var s=i.e/c,a=e.e/c,o=i.c,u=e.c;if(!s||!a){if(!o||!u)return new D(n/0);if(!o[0]||!u[0])return u[0]?e:new D(o[0]?i:n*0)}s=b(s);a=b(a);o=o.slice();if(n=s-a){if(n>0){a=s;r=u}else{n=-n;r=o}r.reverse();for(;n--;r.push(0));r.reverse()}n=o.length;t=u.length;if(n-t<0){r=u;u=o;o=r;t=n}for(n=0;t;){n=(o[--t]=o[t]+u[t]+n)/f|0;o[t]=f===o[t]?0:o[t]%f}if(n){o=[n].concat(o);++a}return L(e,o,a)};E.precision=E.sd=function(e,t){var r,i,n,s=this;if(e!=null&&e!==!!e){y(e,1,d);if(t==null)t=C;else y(t,0,8);return K(new D(s),e,t)}if(!(r=s.c))return null;n=r.length-1;i=n*c+1;if(n=r[n]){for(;n%10==0;n/=10,i--);for(n=r[0];n>=10;n/=10,i++);}if(e&&s.e+1>i)i=s.e+1;return i};E.shiftedBy=function(e){y(e,-u,u);return this.times("1e"+e)};E.squareRoot=E.sqrt=function(){var e,r,i,n,s,a=this,o=a.c,f=a.s,c=a.e,u=$+4,h=new D("0.5");if(f!==1||!o||!o[0]){return new D(!f||f<0&&(!o||o[0])?NaN:o?a:1/0)}f=Math.sqrt(+V(a));if(f==0||f==1/0){r=m(o);if((r.length+c)%2==0)r+="0";f=Math.sqrt(+r);c=b((c+1)/2)-(c<0||c%2);if(f==1/0){r="5e"+c}else{r=f.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}i=new D(r)}else{i=new D(f+"")}if(i.c[0]){c=i.e;f=c+u;if(f<3)f=0;for(;;){s=i;i=h.times(s.plus(t(a,s,u,1)));if(m(s.c).slice(0,f)===(r=m(i.c)).slice(0,f)){if(i.e<c)--f;r=r.slice(f-3,f+1);if(r=="9999"||!n&&r=="4999"){if(!n){K(s,s.e+$+2,0);if(s.times(s).eq(a)){i=s;break}}u+=4;f+=4;n=1}else{if(!+r||!+r.slice(1)&&r.charAt(0)=="5"){K(i,i.e+$+2,1);e=!i.times(i).eq(a)}break}}}}return K(i,i.e+$+1,C,e)};E.toExponential=function(e,t){if(e!=null){y(e,0,d);e++}return U(this,e,t,1)};E.toFixed=function(e,t){if(e!=null){y(e,0,d);e=e+this.e+1}return U(this,e,t)};E.toFormat=function(e,t,r){var i,n=this;if(r==null){if(e!=null&&t&&typeof t=="object"){r=t;t=null}else if(e&&typeof e=="object"){r=e;e=t=null}else{r=R}}else if(typeof r!="object"){throw Error(a+"Argument not an object: "+r)}i=n.toFixed(e,t);if(n.c){var s,o=i.split("."),f=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",h=o[0],l=o[1],d=n.s<0,p=d?h.slice(1):h,b=p.length;if(c){s=f;f=c;c=s;b-=s}if(f>0&&b>0){s=b%f||f;h=p.substr(0,s);for(;s<b;s+=f)h+=u+p.substr(s,f);if(c>0)h+=u+p.slice(s);if(d)h="-"+h}i=l?h+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):h}return(r.prefix||"")+i+(r.suffix||"")};E.toFraction=function(e){var r,i,n,s,o,f,u,l,d,p,b,v,y=this,w=y.c;if(e!=null){u=new D(e);if(!u.isInteger()&&(u.c||u.s!==1)||u.lt(_)){throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+V(u))}}if(!w)return new D(y);r=new D(_);d=i=new D(_);n=l=new D(_);v=m(w);o=r.e=v.length-y.e-1;r.c[0]=h[(f=o%c)<0?c+f:f];e=!e||u.comparedTo(r)>0?o>0?r:d:u;f=x;x=1/0;u=new D(v);l.c[0]=0;for(;;){p=t(u,r,0,1);s=i.plus(p.times(n));if(s.comparedTo(e)==1)break;i=n;n=s;d=l.plus(p.times(s=d));l=s;r=u.minus(p.times(s=r));u=s}s=t(e.minus(i),n,0,1);l=l.plus(s.times(d));i=i.plus(s.times(n));l.s=d.s=y.s;o=o*2;b=t(d,n,o,C).minus(y).abs().comparedTo(t(l,i,o,C).minus(y).abs())<1?[d,n]:[l,i];x=f;return b};E.toNumber=function(){return+V(this)};E.toPrecision=function(e,t){if(e!=null)y(e,1,d);return U(this,e,t,2)};E.toString=function(e){var t,i=this,n=i.s,s=i.e;if(s===null){if(n){t="Infinity";if(n<0)t="-"+t}else{t="NaN"}}else{if(e==null){t=s<=P||s>=T?A(m(i.c),s):g(m(i.c),s,"0")}else if(e===10&&O){i=K(new D(i),$+s+1,C);t=g(m(i.c),i.e,"0")}else{y(e,2,B.length,"Base");t=r(g(m(i.c),s,"0"),10,e,n,true)}if(n<0&&i.c[0])t="-"+t}return t};E.valueOf=E.toJSON=function(){return V(this)};E._isBigNumber=true;if(e!=null)D.set(e);return D}function b(e){var t=e|0;return e>0||e===t?t:t-1}function m(e){var t,r,i=1,n=e.length,s=e[0]+"";for(;i<n;){t=e[i++]+"";r=c-t.length;for(;r--;t="0"+t);s+=t}for(n=s.length;s.charCodeAt(--n)===48;);return s.slice(0,n+1||1)}function v(e,t){var r,i,n=e.c,s=t.c,a=e.s,o=t.s,f=e.e,c=t.e;if(!a||!o)return null;r=n&&!n[0];i=s&&!s[0];if(r||i)return r?i?0:-o:a;if(a!=o)return a;r=a<0;i=f==c;if(!n||!s)return i?0:!n^r?1:-1;if(!i)return f>c^r?1:-1;o=(f=n.length)<(c=s.length)?f:c;for(a=0;a<o;a++)if(n[a]!=s[a])return n[a]>s[a]^r?1:-1;return f==c?0:f>c^r?1:-1}function y(e,t,r,i){if(e<t||e>r||e!==s(e)){throw Error(a+(i||"Argument")+(typeof e=="number"?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function w(e){var t=e.c.length-1;return b(e.e/c)==t&&e.c[t]%2!=0}function A(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function g(e,t,r){var i,n;if(t<0){for(n=r+".";++t;n+=r);e=n+e}else{i=e.length;if(++t>i){for(n=r,t-=i;--t;n+=r);e+=n}else if(t<i){e=e.slice(0,t)+"."+e.slice(t)}}return e}r=p();r["default"]=r.BigNumber=r;if(e.exports){e.exports=r}else{if(!t){t=typeof self!="undefined"&&self?self:window}t.BigNumber=r}})(commonjsGlobal)}));class FilterValue extends AbstractDependencyBranch{constructor(e,t,r,i){super(e,i);this.type=r;this.ref=t}async resolveValue(e){const t=this.getBackingAttribute();const r=await t.getValue(true,false,false,e);return EthUtils.encodeTransactionParameter(this.type,r)}}class FilterQuery{constructor(e,t,r){this.tokenScript=e;this.localAttrContext=r;this.dynamicValues={};this.params=new URLSearchParams(t);for(let[t,i]of this.params.entries()){const n=i.match(/^\$\{(.*)\}/);if(n&&n[1])this.dynamicValues[t]=new FilterValue(e,n[1],null,r)}}has(e){return this.params.has(e)}async getValue(e,t){if(this.dynamicValues[e]){return await this.dynamicValues[e].getValue(t)}return this.params.get(e)}getDynamicFilterValues(){return Object.values(this.dynamicValues)}}class Attribute$4{constructor(e,t,r){this.tokenScript=e;this.attributeDef=t;this.localAttrContext=r;this.scopeValues={};this.dependsOnTokenId=undefined;this.resolveLocks={}}getName(){return this.attributeDef.getAttribute("name")}getOrigins(){return this.attributeDef.getElementsByTagName("ts:origins")[0].children}async getValue(e=false,t=false,r=false,i=this.tokenScript.getCurrentTokenContext()){const n=this.getValueScopeId(i);let s;if(this.getScopedValue(n)===undefined){const e=this.getOrigins();const a=e[0];this.asType=a.getAttribute("as");if(t&&a.tagName!=="ts:user-entry"){s=this.getScopedValue(n)}else{if(a.tagName==="ts:user-entry"){s=this.tokenScript.getViewController().getUserEntryValue(this.getName())}else{if(!r){if(!this.resolveLocks[n]){this.resolveLocks[n]=new Promise(((e,t)=>{this.resolveAttributeValue(a,n,i).then((t=>{e(t);delete this.resolveLocks[n]})).catch((e=>{t(e)}))}))}s=await this.resolveLocks[n]}else{s=await this.resolveAttributeValue(a,n,i)}}}}else{s=this.getScopedValue(n)}if(e&&s===undefined)throw new Error("Could not resolve attribute "+this.getName());return this.transformValue(s)}async getCurrentValue(){return this.getValue(false,true)}async transformValue(e){if(!this.asType)return e;switch(this.asType){case"bool":if(typeof e==="boolean")break;return Boolean(e);case"e2":case"e4":case"e6":case"e8":case"e18":if(!e)return 0;return BigInt(new bignumber.BigNumber(e).multipliedBy(Math.pow(10,parseInt(this.asType.substring(1)))).toString())}return e}async getJsonSafeValue(e){const t=await this.getValue(false,false,e);if(typeof t==="bigint")return t.toString();return t}async resolveAttributeValue(e,t,r){var i;let n;switch(e.tagName){case"ethereum:call":case"ethereum:event":console.log("Resolving attribute: "+this.getName()+" for token context "+(r===null||r===void 0?void 0:r.selectedNftId));const t=this.tokenScript.getContractByName(e.getAttribute("contract"));const s=await this.tokenScript.getEngine().getWalletAdapter();const a=(i=r===null||r===void 0?void 0:r.chainId)!==null&&i!==void 0?i:await s.getChain();const o=t.getAddressByChain(a,true);let f;if(e.tagName==="ethereum:call"){const t=e.getAttribute("function");let i=EthUtils.tokenScriptOutputToEthers(this.asType);const n=new Arguments(this.tokenScript,e,this.localAttrContext);const a=[];for(let e of n){a.push({name:"0",type:e.type,internalType:e.type,value:await e.getValue(r)})}f=await s.call(o.chain,o.address,t,a,[i]);console.log("Call result: ",f)}else{const t=e.getAttribute("filter");const i=e.getAttribute("type");const n=e.getAttribute("select");const c=this.tokenScript.getAsnModuleDefinition(i);if(!c)throw new Error("Could not find ASN module with name ");const u=[];const h=c.querySelector("type sequence");const l=new FilterQuery(this.tokenScript,t,this.localAttrContext);for(let e of h.children){const t=e.getAttribute("name");const i=e.getAttribute("ethereum:type");u.push({name:t,type:i,internalType:i,indexed:e.getAttribute("ethereum:indexed"),value:l.has(t)?await l.getValue(t,r):null})}const d=await s.getEvents(a,o.address,i,u);if(d.length===0)break;f=d[0].args[n];console.log("Event result: ",f)}if(f instanceof Object){n=BigInt(f)}else{n=f}break;case"ts:data":const c=e.children;if(c.length>1){throw new Error("Attribute ts:data origin does not support more than one element")}n=c[0].textContent;break;default:throw new Error("Attribute origin type "+e.tagName+" is not implemented")}this.setScopedValue(n,t);return n}getScopedValue(e){var t;return(t=this.scopeValues)===null||t===void 0?void 0:t[e]}setScopedValue(e,t){this.scopeValues[t]=e}getValueScopeId(e){let t="-1";if(this.getDependsOnTokenId()){if(e===null||e===void 0?void 0:e.selectedNftId)t=e.selectedNftId}return t}getDependsOnTokenId(){if(this.dependsOnTokenId===undefined){this.dependsOnTokenId=this.isDependentOn(["tokenId"])}return this.dependsOnTokenId}invalidate(e){if(e){if(!this.invalidateDependencies(e)&&e.indexOf(this.getName())===-1){console.log("Attribute '"+this.getName()+"' is not dependent on '"+JSON.stringify(e)+"', skipping invalidation");return false}}console.log("Invalidating attribute: "+this.getName());this.resolveLocks={};this.scopeValues={};return true}isDependentOn(e){const t=this.getDependencies();if(t===false)return false;for(let r of t){if(r.isDependentOn(e))return true}return e.indexOf(this.getName())>-1}invalidateDependencies(e){const t=this.getDependencies();if(t===false)return false;let r=false;for(let i of t){r=i.invalidateDependencies(e)}return r}getDependencies(){const e=this.getOrigins();const t=e[0];if(Attribute$4.NO_DEPENDENCY_ORIGINS.indexOf(t.tagName)>-1)return false;let r=[];if(t.tagName==="ethereum:call"){r=new Arguments(this.tokenScript,t,this.localAttrContext).getArguments()}else if(t.tagName==="ethereum:event"){const e=t.getAttribute("filter");r=new FilterQuery(this.tokenScript,e,this.localAttrContext).getDynamicFilterValues()}return r}}Attribute$4.NO_DEPENDENCY_ORIGINS=["ts:user-entry","ts:data"];class Attributes$2{constructor(e,t,r=false){this.tokenScript=e;this.parentElem=t;this.isCardContext=r}getAttributes(){if(!this.attributes){this.attributes={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:attribute"));if(e.length>0){for(let t in e){const r=new Attribute$4(this.tokenScript,e[t],this.isCardContext?this:null);this.attributes[r.getName()]=r}}}return this.attributes}getAttribute(e){if(!this.attributes)this.getAttributes();if(!this.attributes[e])throw new Error("Could not find attribute '"+e+"'");return this.attributes[e]}hasAttribute(e){if(!this.attributes)this.getAttributes();return this.attributes.hasOwnProperty(e)}invalidate(e){for(let t of this){t.invalidate(e)}}[Symbol.iterator](){return Object.values(this.getAttributes()).values()}}class Label{constructor(e){this.parentElem=e;const t=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:label"));if(t.length>0){const e=[].slice.call(t[0].children);const r=e.filter((e=>e.getAttribute("xml:lang")==="en"));if(r.length){if(r[0].tagName==="ts:plurals"&&r[0].children.length>0){this.label={};for(let e of r[0].children){const e=r[0].children[0];this.label[e.getAttribute("quantity")]=e.textContent}}else{this.label=r[0].textContent}}}}getValue(e){if(!this.label)return null;if(typeof this.label==="string")return this.label;if(e>1&&this.label["other"])return this.label["other"];return this.label["one"]}}class Card{constructor(e,t){this.tokenScript=e;this.cardDef=t;this.tokenViewData=new TokenViewData(this.tokenScript,this)}get label(){var e;if(!this._label)this._label=new Label(this.cardDef);return(e=this._label.getValue())!==null&&e!==void 0?e:"Unnamed Card"}get name(){return this.cardDef.getAttribute("name")}get type(){return this.cardDef.getAttribute("type")}get exclude(){return this.cardDef.getAttribute("exclude")}get view(){return this.cardDef.getElementsByTagName("ts:view")[0]}get urlFragment(){return this.view.getAttribute("urlFragment")}get isUrlView(){return this.url}get url(){return this.view.getAttribute("url")}async renderViewHtml(){let e="";e+='<div id="'+this.tokenViewData.getViewDataId()+'" class="token-card"></div>'+'<script type="text/javascript">'+await this.tokenViewData.getTokenJavascript()+"<\/script>";const t=this.view.children;for(let r=0;r<t.length;r++){const i=t[r];if(i.nodeName=="#text")continue;if(i.nodeName==="ts:viewContent"){const t=i.getAttribute("name");const r=this.tokenScript.getViewContent(t);if(!r){console.error("Could not find viewContent element with "+t);continue}for(let t=0;t<r.length;t++){e=this.processTags(r[t],e)}continue}e=this.processTags(i,e)}return`\n\t\t\t<!DOCTYPE html>\n\t\t\t\t<html lang="en">\n\t\t\t\t<head>\n\t\t\t\t\t<title>TokenScript</title>\n\t\t\t\t\t<meta http-equiv="content-type" content="text/html; charset=utf-8" />\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t${e}\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t`}processTags(e,t){if(e.localName=="script"){let r;if(e.innerHTML.indexOf("<![CDATA[")===-1){const t=document.createElement("textarea");t.innerHTML=e.innerHTML;r=t.value}else{r=e.innerHTML}t+="<script "+(e.getAttribute("type")==="module"?'type="module" crossorigin=""':"text/javascript")+">"+r+"<\/script>"}else if(e.localName==="style"){t+="<style>"+e.innerHTML+"</style>"}else{if(e.outerHTML)t+=e.outerHTML}return t}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this.tokenScript,this.cardDef,true)}return this.attributes}async isEnabledOrReason(e){if(!this.exclude)return true;const t=this.tokenScript.getSelections().getSelection(this.exclude);if(await t.isInSelection(e)){return t.getLabel()}return true}getTransaction(){if(!this.transaction){const e=this.cardDef.getElementsByTagName("ts:transaction");if(e.length>0)this.transaction=new Transaction(this.tokenScript,e[0],this.getAttributes())}return this.transaction}async executeTransaction(e,t=true,r=true){const i=this.getTransaction();await this.tokenScript.executeTransaction(i,e,t);this.getAttributes().invalidate();this.tokenScript.getAttributes().invalidate();if(r&&this.tokenScript.hasViewBinding())await this.tokenScript.getViewController().updateCardData()}async signPersonalMessage(e,t){try{let r=await this.tokenScript.getEngine().signPersonalMessage(t);if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:null,result:r},e)}catch(t){if(this.tokenScript.hasViewBinding())this.tokenScript.getViewController().dispatchViewEvent(ViewEvent.EXECUTE_CALLBACK,{error:t.message,result:null},e)}}}class Contract{constructor(e){this.contractDef=e;this.addresses={};this.name=e.getAttribute("name");this.interface=e.getAttribute("interface");let t=e.getElementsByTagName("ts:address");for(let e in t){if(!t.hasOwnProperty(e))continue;const r=parseInt(t[e].getAttribute("network"));this.addresses[r]={address:t[e].innerHTML,chain:r}}}getName(){return this.name}getInterface(){return this.interface}getAddresses(){return this.addresses}getFirstAddress(){const e=Object.keys(this.addresses);if(e.length===0)throw new Error("Contract does not have any addresses");return this.addresses[e[0]]}getAddressByChain(e,t=false){if(!this.addresses[e]){if(t){if(Object.keys(this.addresses).length===0)throw new Error("Contract does not have any addresses");return this.getFirstAddress()}throw new Error("Contract does not have an address with chain ID "+e)}return this.addresses[e]}}const ELEMENT="element";const ATTRIBUTE="attribute";const CONTENT="content";const MAX=1e9;function assign$1(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function XmlElement(e){return t=>{const r=t;r.localName=e.localName||r.name;r.namespaceURI=e.namespaceURI||r.namespaceURI||null;r.prefix=e.prefix||r.prefix||null;r.parser=e.parser||r.parser;if(r.target!==r){r.items=assign$1({},r.items)}r.target=t}}function XmlChildElement(e={}){return(t,r)=>{const i=t.constructor;const n=r;if(!i.items){i.items={}}if(i.target!==i){i.items=assign$1({},i.items)}i.target=t;if(e.parser){i.items[n]={parser:e.parser,required:e.required||false,maxOccurs:e.maxOccurs||MAX,minOccurs:e.minOccurs===void 0?0:e.minOccurs,noRoot:e.noRoot||false}}else{i.items[n]={namespaceURI:e.namespaceURI||null,required:e.required||false,prefix:e.prefix||null,defaultValue:e.defaultValue,converter:e.converter,noRoot:e.noRoot||false}}e.localName=e.localName||e.parser&&e.parser.localName||n;i.items[n].namespaceURI=e.namespaceURI||e.parser&&e.parser.namespaceURI||null;i.items[n].prefix=e.prefix||e.parser&&e.parser.prefix||null;i.items[n].localName=e.localName;i.items[n].type=ELEMENT;defineProperty$1(t,n,e)}}function XmlAttribute(e={required:false,namespaceURI:null}){return(t,r)=>{const i=t.constructor;const n=r;if(!e.localName){e.localName=r}if(!i.items){i.items={}}if(i.target!==i){i.items=assign$1({},i.items)}i.target=t;i.items[r]=e;i.items[r].type=ATTRIBUTE;defineProperty$1(t,n,e)}}function defineProperty$1(e,t,r){const i=`_${t}`;const n={set:function(e){if(this[i]!==e){this.element=null;this[i]=e}},get:function(){if(this[i]===void 0){let e=r.defaultValue;if(r.parser){e=new r.parser;e.localName=r.localName}this[i]=e}return this[i]}};Object.defineProperty(e,i,{writable:true,enumerable:false});Object.defineProperty(e,t,n)}class Collection{constructor(e){this.items=new Array;if(e){this.items=e}}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e)}Pop(){return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e))}Clear(){this.items=new Array}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}}function printf(e,...t){let r=e;const i=/[^%](%\d+)/g;let n=null;const s=[];while(n=i.exec(r)){s.push({arg:n[1],index:n.index})}for(let e=s.length-1;e>=0;e--){const t=s[e];const i=t.arg.substring(1);const n=t.index+1;r=r.substring(0,n)+arguments[+i]+r.substring(n+1+i.length)}r=r.replace("%%","%");return r}function padNum(e,t){let r=e+"";while(r.length<t){r="0"+r}return r}class XmlError{constructor(e,...t){this.prefix="XMLJS";this.code=e;this.name=this.constructor.name;arguments[0]=xes[e];const r=printf.apply(this,arguments);this.message=`${this.prefix}${padNum(e,4)}: ${r}`;this.stack=new Error(this.message).stack}}var XE;(function(e){e[e["NONE"]=0]="NONE";e[e["NULL_REFERENCE"]=1]="NULL_REFERENCE";e[e["NULL_PARAM"]=2]="NULL_PARAM";e[e["DECORATOR_NULL_PARAM"]=3]="DECORATOR_NULL_PARAM";e[e["COLLECTION_LIMIT"]=4]="COLLECTION_LIMIT";e[e["METHOD_NOT_IMPLEMENTED"]=5]="METHOD_NOT_IMPLEMENTED";e[e["METHOD_NOT_SUPPORTED"]=6]="METHOD_NOT_SUPPORTED";e[e["PARAM_REQUIRED"]=7]="PARAM_REQUIRED";e[e["CONVERTER_UNSUPPORTED"]=8]="CONVERTER_UNSUPPORTED";e[e["ELEMENT_MALFORMED"]=9]="ELEMENT_MALFORMED";e[e["ELEMENT_MISSING"]=10]="ELEMENT_MISSING";e[e["ATTRIBUTE_MISSING"]=11]="ATTRIBUTE_MISSING";e[e["CONTENT_MISSING"]=12]="CONTENT_MISSING";e[e["CRYPTOGRAPHIC"]=13]="CRYPTOGRAPHIC";e[e["CRYPTOGRAPHIC_NO_MODULE"]=14]="CRYPTOGRAPHIC_NO_MODULE";e[e["CRYPTOGRAPHIC_UNKNOWN_TRANSFORM"]=15]="CRYPTOGRAPHIC_UNKNOWN_TRANSFORM";e[e["ALGORITHM_NOT_SUPPORTED"]=16]="ALGORITHM_NOT_SUPPORTED";e[e["ALGORITHM_WRONG_NAME"]=17]="ALGORITHM_WRONG_NAME";e[e["XML_EXCEPTION"]=18]="XML_EXCEPTION"})(XE||(XE={}));const xes={};xes[XE.NONE]="No description";xes[XE.NULL_REFERENCE]="Null reference";xes[XE.NULL_PARAM]="'%1' has empty '%2' object";xes[XE.DECORATOR_NULL_PARAM]="Decorator '%1' has empty '%2' parameter";xes[XE.COLLECTION_LIMIT]="Collection of '%1' in element '%2' has wrong amount of items";xes[XE.METHOD_NOT_IMPLEMENTED]="Method is not implemented";xes[XE.METHOD_NOT_SUPPORTED]="Method is not supported";xes[XE.PARAM_REQUIRED]="Required parameter is missing '%1'";xes[XE.CONVERTER_UNSUPPORTED]="Converter is not supported";xes[XE.ELEMENT_MALFORMED]="Malformed element '%1'";xes[XE.ELEMENT_MISSING]="Element '%1' is missing in '%2'";xes[XE.ATTRIBUTE_MISSING]="Attribute '%1' is missing in '%2'";xes[XE.CONTENT_MISSING]="Content is missing in '%1'";xes[XE.CRYPTOGRAPHIC]="Cryptographic error: %1";xes[XE.CRYPTOGRAPHIC_NO_MODULE]="WebCrypto module is not found";xes[XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM]="Unknown transform %1";xes[XE.ALGORITHM_NOT_SUPPORTED]="Algorithm is not supported '%1'";xes[XE.ALGORITHM_WRONG_NAME]="Algorithm wrong name in use '%1'";xes[XE.XML_EXCEPTION]="XML exception: %1";class Convert{static ToString(e,t="utf8"){const r=new Uint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromString(e,t="utf8"){switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);default:throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static ToBase64(e){if(typeof btoa!=="undefined"){const t=this.ToString(e,"binary");return btoa(t)}else if(typeof Buffer!=="undefined"){return Buffer.from(e).toString("base64")}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64(e){e=e.replace(/\n/g,"").replace(/\r/g,"").replace(/\t/g,"").replace(/\s/g,"");if(typeof atob!=="undefined"){return this.FromBinary(atob(e))}else if(typeof Buffer!=="undefined"){return new Uint8Array(Buffer.from(e,"base64"))}else{throw new XmlError(XE.CONVERTER_UNSUPPORTED)}}static FromBase64Url(e){return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r}static ToUtf8String(e){const t=String.fromCharCode.apply(null,e);const r=decodeURIComponent(escape(t));return r}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let i=0;i<t;i++){r[i]=e.charCodeAt(i)}return r}static ToBinary(e){let t="";for(let r=0;r<e.length;r++){t=t+String.fromCharCode(e[r])}return t}static ToHex(e){const t="";const r=[];for(let t=0;t<e.length;t++){const i=e[t].toString(16);r.push(i.length===1?"0"+i:i)}return r.join(t)}static FromHex(e){const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r=r+2){const i=e.slice(r,r+2);t[r/2]=parseInt(i,16)}return t}static ToDateTime(e){return new Date(e)}static FromDateTime(e){const t=e.toISOString();return t}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}}const APPLICATION_XML="application/xml";var XmlNodeType;(function(e){e[e["None"]=0]="None";e[e["Element"]=1]="Element";e[e["Attribute"]=2]="Attribute";e[e["Text"]=3]="Text";e[e["CDATA"]=4]="CDATA";e[e["EntityReference"]=5]="EntityReference";e[e["Entity"]=6]="Entity";e[e["ProcessingInstruction"]=7]="ProcessingInstruction";e[e["Comment"]=8]="Comment";e[e["Document"]=9]="Document";e[e["DocumentType"]=10]="DocumentType";e[e["DocumentFragment"]=11]="DocumentFragment";e[e["Notation"]=12]="Notation";e[e["Whitespace"]=13]="Whitespace";e[e["SignificantWhitespace"]=14]="SignificantWhitespace";e[e["EndElement"]=15]="EndElement";e[e["EndEntity"]=16]="EndEntity";e[e["XmlDeclaration"]=17]="XmlDeclaration"})(XmlNodeType||(XmlNodeType={}));let xpath=(e,t)=>{throw new Error("Not implemented")};let sWindow;if(typeof self==="undefined"){sWindow=global;const e=require("@xmldom/xmldom");xpath=require("xpath.js");sWindow.XMLSerializer=e.XMLSerializer;sWindow.DOMParser=e.DOMParser;sWindow.DOMImplementation=e.DOMImplementation;sWindow.document=(new DOMImplementation).createDocument("http://www.w3.org/1999/xhtml","html",null)}else{sWindow=self}function SelectNodesEx(e,t){const r=e.ownerDocument==null?e:e.ownerDocument;const i=document.createNSResolver(e.ownerDocument==null?e.documentElement:e.ownerDocument.documentElement);const n=r.evaluate(t,e,i,XPathResult.ANY_TYPE,null);const s=[];let a;while(a=n.iterateNext()){s.push(a)}return s}const Select=typeof self!=="undefined"?SelectNodesEx:xpath;function Parse(e){e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return(new DOMParser).parseFromString(e,APPLICATION_XML)}function SelectSingleNode(e,t){const r=Select(e,t);if(r&&r.length>0){return r[0]}return null}function _SelectNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&!t[e.prefix||""]){t[e.prefix?e.prefix:""]=e.namespaceURI}for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes.item(r);if(i&&i.nodeType===XmlNodeType.Element){_SelectNamespaces(i,t)}}}}function SelectNamespaces(e){const t={};_SelectNamespaces(e,t);return t}function assign$2(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){if(!t.hasOwnProperty(e)){continue}r[e]=t[e]}}return r}function isNodeType(e,t){return e&&e.nodeType===t}function isElement(e){return isNodeType(e,XmlNodeType.Element)}function isDocument(e){return isNodeType(e,XmlNodeType.Document)}const XmlBase64Converter={get:e=>{if(e){return Convert.ToBase64(e)}return void 0},set:e=>Convert.FromBase64(e)};const XmlNumberConverter={get:e=>{if(e){return e.toString()}return"0"},set:e=>Number(e)};const DEFAULT_ROOT_NAME="xml_root";class XmlObject{constructor(e={}){this.prefix=this.GetStatic().prefix||null;this.localName=this.GetStatic().localName;this.namespaceURI=this.GetStatic().namespaceURI;if(e){for(const[t,r]of Object.entries(e)){if(r!==undefined){this[t]=r}}}}static LoadXml(e){const t=new this;t.LoadXml(e);return t}static GetElement(e,t,r=true){const i=e.getElementsByTagName(t);if(r&&i.length===0){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return i[0]||null}static GetAttribute(e,t,r,i=true){if(e.hasAttribute(t)){return e.getAttribute(t)}else{if(i){throw new XmlError(XE.ATTRIBUTE_MISSING,t,e.localName)}return r}}static GetElementById(e,t){if(e==null||t==null){return null}let r=null;if(isDocument(e)){r=e.getElementById(t)}if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='Id']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='ID']='${t}']`);if(r==null){r=SelectSingleNode(e,`//*[@*[local-name()='id']='${t}']`)}}}return r}static CreateDocument(e=DEFAULT_ROOT_NAME,t=null,r=null){let i="";let n="";let s="";if(r){i=r+":";n=":"+r}if(t){s=` xmlns${n}="${t}"`}const a=`${i}${e}`;const o=(new DOMParser).parseFromString(`<${a}${s}></${a}>`,APPLICATION_XML);return o}static GetChildren(e,t,r){e=isDocument(e)?e.documentElement:e;const i=[];for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes[n];if(isElement(s)&&s.localName===t&&(s.namespaceURI===r||!r)){i.push(s)}}return i}static GetFirstChild(e,t,r){e=isDocument(e)?e.documentElement:e;for(let i=0;i<e.childNodes.length;i++){const n=e.childNodes[i];if(isElement(n)&&n.localName===t&&(n.namespaceURI===r||!r)){return n}}return null}static GetChild(e,t,r,i=true){for(let i=0;i<e.childNodes.length;i++){const n=e.childNodes[i];if(isElement(n)&&n.localName===t&&(n.namespaceURI===r||!r)){return n}}if(i){throw new XmlError(XE.ELEMENT_MISSING,t,e.localName)}return null}get Element(){return this.element}get Prefix(){return this.prefix}set Prefix(e){this.prefix=e}get LocalName(){return this.localName}get NamespaceURI(){return this.namespaceURI||null}HasChanged(){const e=this.GetStatic();if(e.items){for(const t in e.items){if(!e.items.hasOwnProperty(t)){continue}const r=e.items[t];const i=this[t];if(r.parser&&i&&i.HasChanged()){return true}}}return this.element===null}GetXml(e){if(!(e||this.HasChanged())){return this.element||null}const t=this;const r=this.CreateDocument();const i=this.CreateElement();const n=this.GetStatic();const s=this.localName;if(n.items){for(const e in n.items){if(!n.items.hasOwnProperty(e)){continue}const a=t[e];const o=n.items[e];switch(o.type){case CONTENT:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.CONTENT_MISSING,s)}if(e.defaultValue!==a||e.required){i.textContent=t}break}case ATTRIBUTE:{const e=o;const t=e.converter?e.converter.get(a):a;if(e.required&&(t===null||t===void 0)){throw new XmlError(XE.ATTRIBUTE_MISSING,e.localName,s)}if(e.defaultValue!==a||e.required){if(!e.namespaceURI){i.setAttribute(e.localName,t)}else{i.setAttributeNS(e.namespaceURI,e.localName,t)}}break}case ELEMENT:{const e=o;let t=null;if(e.parser){if(e.required&&!a||e.minOccurs&&!a.Count){throw new XmlError(XE.ELEMENT_MISSING,a.localName,s)}if(a){t=a.GetXml(a.element===void 0&&(e.required||a.Count))}}else{const i=e.converter?e.converter.get(a):a;if(e.required&&i===void 0){throw new XmlError(XE.ELEMENT_MISSING,e.localName,s)}if(a!==e.defaultValue||e.required){if(!e.namespaceURI){t=r.createElement(`${e.prefix?e.prefix+":":""}${e.localName}`)}else{t=r.createElementNS(e.namespaceURI,`${e.prefix?e.prefix+":":""}${e.localName}`)}if(Array.isArray(i)){for(const e of i){const r=e instanceof XmlObject?e.GetXml(true):e;if(r!==null){t.appendChild(r)}}}else if(i instanceof XmlObject){t.appendChild(i.GetXml(true))}else{t.textContent=i}}}if(t){if(e.noRoot){const r=[];for(let e=0;e<t.childNodes.length;e++){const i=t.childNodes.item(e);if(isElement(i)){r.push(i)}}if(r.length<e.minOccurs||r.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,n.localName)}r.forEach((e=>i.appendChild(e.cloneNode(true))))}else if(t.childNodes.length<e.minOccurs||t.childNodes.length>e.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,a.localName,n.localName)}else{i.appendChild(t)}}break}}}}this.OnGetXml(i);this.element=i;return i}LoadXml(e){let t;const r=this;if(typeof e==="string"){const r=Parse(e);t=r.documentElement}else{t=e}if(!t){throw new XmlError(XE.PARAM_REQUIRED,"element")}const i=this.GetStatic();const n=this.localName;if(!(t.localName===n&&t.namespaceURI==this.NamespaceURI)){throw new XmlError(XE.ELEMENT_MALFORMED,n)}if(i.items){for(const e in i.items){if(!i.items.hasOwnProperty(e)){continue}const s=i.items[e];switch(s.type){case CONTENT:{const i=s;if(i.required&&!t.textContent){throw new XmlError(XE.CONTENT_MISSING,n)}if(!t.textContent){r[e]=i.defaultValue}else{const n=i.converter?i.converter.set(t.textContent):t.textContent;r[e]=n}break}case ATTRIBUTE:{const i=s;let a;let o;if(!i.localName){throw new XmlError(XE.PARAM_REQUIRED,"localName")}if(i.namespaceURI){a=t.hasAttributeNS.bind(t,i.namespaceURI,i.localName);o=t.getAttributeNS.bind(t,i.namespaceURI,i.localName)}else{a=t.hasAttribute.bind(t,i.localName);o=t.getAttribute.bind(t,i.localName)}if(i.required&&!a()){throw new XmlError(XE.ATTRIBUTE_MISSING,i.localName,n)}if(!a()){r[e]=i.defaultValue}else{const t=i.converter?i.converter.set(o()):o();r[e]=t}break}case ELEMENT:{const i=s;if(i.noRoot){if(!i.parser){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${i.localName}' with flag noRoot must have 'parser'`)}const s=new i.parser;if(!(s instanceof XmlCollection)){throw new XmlError(XE.XML_EXCEPTION,`Schema for '${i.localName}' with flag noRoot must have 'parser' like instance of XmlCollection`)}s.OnLoadXml(t);delete s.element;if(s.Count<i.minOccurs||s.Count>i.maxOccurs){throw new XmlError(XE.COLLECTION_LIMIT,i.parser.localName,n)}r[e]=s;continue}let a=null;for(let e=0;e<t.childNodes.length;e++){const r=t.childNodes.item(e);if(!isElement(r)){continue}const n=r;if(n.localName===i.localName&&n.namespaceURI==i.namespaceURI){a=n;break}}if(i.required&&!a){throw new XmlError(XE.ELEMENT_MISSING,i.parser?i.parser.localName:i.localName,n)}if(!i.parser){if(!a){r[e]=i.defaultValue}else{const t=i.converter?i.converter.set(a.textContent):a.textContent;r[e]=t}}else{if(a){const t=new i.parser;t.localName=i.localName;t.namespaceURI=i.namespaceURI;r[e]=t;t.LoadXml(a)}}break}}}}this.OnLoadXml(t);this.prefix=t.prefix||"";this.element=t}toString(){const e=this.GetXml();return e?(new XMLSerializer).serializeToString(e):""}GetElement(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetElement(this.element,e,t)}GetChildren(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChildren(this.element,e,t||this.NamespaceURI||undefined)}GetChild(e,t=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetChild(this.element,e,this.NamespaceURI||undefined,t)}GetFirstChild(e,t){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetFirstChild(this.element,e,t)}GetAttribute(e,t,r=true){if(!this.element){throw new XmlError(XE.NULL_PARAM,this.localName)}return XmlObject.GetAttribute(this.element,e,t,r)}IsEmpty(){return this.Element===void 0}OnLoadXml(e){}GetStatic(){return this.constructor}GetPrefix(){return this.Prefix?this.prefix+":":""}OnGetXml(e){}CreateElement(e,t,r=null,i=null){if(!e){e=this.CreateDocument()}t=t||this.localName;r=r||this.NamespaceURI;i=i||this.prefix;const n=(i?`${i}:`:"")+t;const s=r?e.createElementNS(r,n):e.createElement(n);e.importNode(s,true);return s}CreateDocument(){return XmlObject.CreateDocument(this.localName,this.NamespaceURI,this.Prefix)}}class XmlCollection extends XmlObject{constructor(){super(...arguments);this.MaxOccurs=Number.MAX_VALUE;this.MinOccurs=0;this.items=[]}HasChanged(){const e=super.HasChanged();const t=this.Some((e=>e.HasChanged()));return e||t}get Count(){return this.items.length}Item(e){return this.items[e]||null}Add(e){this.items.push(e);this.element=null}Pop(){this.element=null;return this.items.pop()}RemoveAt(e){this.items=this.items.filter(((t,r)=>r!==e));this.element=null}Clear(){this.items=new Array;this.element=null}GetIterator(){return this.items}ForEach(e){this.GetIterator().forEach(e)}Map(e){return new Collection(this.GetIterator().map(e))}Filter(e){return new Collection(this.GetIterator().filter(e))}Sort(e){return new Collection(this.GetIterator().sort(e))}Every(e){return this.GetIterator().every(e)}Some(e){return this.GetIterator().some(e)}IsEmpty(){return this.Count===0}OnGetXml(e){for(const t of this.GetIterator()){const r=t.GetXml();if(r){e.appendChild(r)}}}OnLoadXml(e){const t=this.GetStatic();if(!t.parser){throw new XmlError(XE.XML_EXCEPTION,`${t.localName} doesn't have required 'parser' in @XmlElement`)}for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes.item(r);if(!(isElement(i)&&i.localName===t.parser.localName&&i.namespaceURI==t.namespaceURI)){continue}const n=i;const s=new t.parser;s.LoadXml(n);this.Add(s)}}}class NamespaceManager extends Collection{Add(e){e.prefix=e.prefix||"";e.namespace=e.namespace||"";super.Add(e)}GetPrefix(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.prefix===e){return t}}return null}GetNamespace(e,t=this.Count-1){const r=this.Count-1;e=e||"";if(t>r){t=r}for(let r=t;r>=0;r--){const t=this.items[r];if(t.namespace===e){return t}}return null}}var build=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="[object ArrayBuffer]";class i{static isArrayBuffer(e){return Object.prototype.toString.call(e)===r}static toArrayBuffer(e){if(this.isArrayBuffer(e)){return e}if(e.byteLength===e.buffer.byteLength){return e.buffer}return this.toUint8Array(e).slice().buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t){return e}if(this.isArrayBuffer(e)){return new t(e)}if(this.isArrayBufferView(e)){return new t(e.buffer,e.byteOffset,e.byteLength)}throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=i.toUint8Array(e);const n=i.toUint8Array(t);if(r.length!==n.byteLength){return false}for(let e=0;e<r.length;e++){if(r[e]!==n[e]){return false}}return true}static concat(...e){if(Array.isArray(e[0])){const t=e[0];let r=0;for(const e of t){r+=e.byteLength}const i=new Uint8Array(r);let n=0;for(const e of t){const t=this.toUint8Array(e);i.set(t,n);n+=t.length}if(e[1]){return this.toView(i,e[1])}return i.buffer}else{return this.concat(e)}}}class n{static fromString(e){const t=unescape(encodeURIComponent(e));const r=new Uint8Array(t.length);for(let e=0;e<t.length;e++){r[e]=t.charCodeAt(e)}return r.buffer}static toString(e){const t=i.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}const n=decodeURIComponent(escape(r));return n}}class s{static toString(e,t=false){const r=i.toArrayBuffer(e);const n=new DataView(r);let s="";for(let e=0;e<r.byteLength;e+=2){const r=n.getUint16(e,t);s+=String.fromCharCode(r)}return s}static fromString(e,t=false){const r=new ArrayBuffer(e.length*2);const i=new DataView(r);for(let r=0;r<e.length;r++){i.setUint16(r*2,e.charCodeAt(r),t)}return r}}class a{static isHex(e){return typeof e==="string"&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return typeof e==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return typeof e==="string"&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,t="utf8"){const r=i.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return s.toString(r,true);case"utf16":case"utf16be":return s.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e){return new ArrayBuffer(0)}switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return s.fromString(e,true);case"utf16":case"utf16be":return s.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=i.toUint8Array(e);if(typeof btoa!=="undefined"){const e=this.ToString(t,"binary");return btoa(e)}else{return Buffer.from(t).toString("base64")}}static FromBase64(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isBase64(t)){throw new TypeError("Argument 'base64Text' is not Base64 encoded")}if(typeof atob!=="undefined"){return this.FromBinary(atob(t))}else{return new Uint8Array(Buffer.from(t,"base64")).buffer}}static FromBase64Url(e){const t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isBase64Url(t)){throw new TypeError("Argument 'base64url' is not Base64Url encoded")}return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=a.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return n.fromString(e);case"utf16":case"utf16be":return s.fromString(e);case"utf16le":case"usc2":return s.fromString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=a.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return n.toString(e);case"utf16":case"utf16be":return s.toString(e);case"utf16le":case"usc2":return s.toString(e,true);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length;const r=new Uint8Array(t);for(let i=0;i<t;i++){r[i]=e.charCodeAt(i)}return r.buffer}static ToBinary(e){const t=i.toUint8Array(e);let r="";for(let e=0;e<t.length;e++){r+=String.fromCharCode(t[e])}return r}static ToHex(e){const t=i.toUint8Array(e);const r="";const n=[];const s=t.length;for(let e=0;e<s;e++){const r=t[e].toString(16).padStart(2,"0");n.push(r)}return n.join(r)}static FromHex(e){let t=this.formatString(e);if(!t){return new ArrayBuffer(0)}if(!a.isHex(t)){throw new TypeError("Argument 'hexString' is not HEX encoded")}if(t.length%2){t=`0${t}`}const r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e=e+2){const i=t.slice(e,e+2);r[e/2]=parseInt(i,16)}return r.buffer}static ToUtf16String(e,t=false){return s.toString(e,t)}static FromUtf16String(e,t=false){return s.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4){for(let r=0;r<t;r++){e+="="}}return e}static formatString(e){return(e===null||e===void 0?void 0:e.replace(/[\n\r\t ]/g,""))||""}}a.DEFAULT_UTF8_ENCODING="utf8";function o(e,...t){const r=arguments[0];for(let e=1;e<arguments.length;e++){const t=arguments[e];for(const e in t){r[e]=t[e]}}return r}function f(...e){const t=e.map((e=>e.byteLength)).reduce(((e,t)=>e+t));const r=new Uint8Array(t);let i=0;e.map((e=>new Uint8Array(e))).forEach((e=>{for(const t of e){r[i++]=t}}));return r.buffer}function c(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==i[t]){return false}}return true}t.BufferSourceConverter=i;t.Convert=a;t.assign=o;t.combine=f;t.isEqual=c}));
/*!
 Copyright (c) Peculiar Ventures, LLC
*/function getParametersValue(e,t,r){var i;if(e instanceof Object===false){return r}return(i=e[t])!==null&&i!==void 0?i:r}function bufferToHexCodes(e,t=0,r=e.byteLength-t,i=false){let n="";for(const s of new Uint8Array(e,t,r)){const e=s.toString(16).toUpperCase();if(e.length===1){n+="0"}n+=e;if(i){n+=" "}}return n.trim()}function utilFromBase(e,t){let r=0;if(e.length===1){return e[0]}for(let i=e.length-1;i>=0;i--){r+=e[e.length-1-i]*Math.pow(2,t*i)}return r}function utilToBase(e,t,r=-1){const i=r;let n=e;let s=0;let a=Math.pow(2,t);for(let r=1;r<8;r++){if(e<a){let e;if(i<0){e=new ArrayBuffer(r);s=r}else{if(i<r){return new ArrayBuffer(0)}e=new ArrayBuffer(i);s=i}const a=new Uint8Array(e);for(let e=r-1;e>=0;e--){const r=Math.pow(2,e*t);a[s-e-1]=Math.floor(n/r);n-=a[s-e-1]*r}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function utilConcatBuf(...e){let t=0;let r=0;for(const r of e){t+=r.byteLength}const i=new ArrayBuffer(t);const n=new Uint8Array(i);for(const t of e){n.set(new Uint8Array(t),r);r+=t.byteLength}return i}function utilConcatView(...e){let t=0;let r=0;for(const r of e){t+=r.length}const i=new ArrayBuffer(t);const n=new Uint8Array(i);for(const t of e){n.set(t,r);r+=t.length}return n}function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=e[0]===255&&e[1]&128;const r=e[0]===0&&(e[1]&128)===0;if(t||r){this.warnings.push("Needlessly long format")}}const t=new ArrayBuffer(this.valueHex.byteLength);const r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++){r[e]=0}r[0]=e[0]&128;const i=utilFromBase(r,8);const n=new ArrayBuffer(this.valueHex.byteLength);const s=new Uint8Array(n);for(let t=0;t<this.valueHex.byteLength;t++){s[t]=e[t]}s[0]&=127;const a=utilFromBase(s,8);return a-i}function utilEncodeTC(e){const t=e<0?e*-1:e;let r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){const e=r-t;const n=utilToBase(e,8,i);const s=new Uint8Array(n);s[0]|=128;return n}let n=utilToBase(t,8,i);let s=new Uint8Array(n);if(s[0]&128){const e=n.slice(0);const t=new Uint8Array(e);n=new ArrayBuffer(n.byteLength+1);s=new Uint8Array(n);for(let r=0;r<e.byteLength;r++){s[r+1]=t[r]}s[0]=0}return n}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const i=new Uint8Array(t);for(let e=0;e<r.length;e++){if(r[e]!==i[e]){return false}}return true}function padNumber(e,t){const r=e.toString(10);if(t<r.length){return""}const i=t-r.length;const n=new Array(i);for(let e=0;e<i;e++){n[e]="0"}const s=n.join("");return s.concat(r)}const base64Template="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";const base64UrlTemplate="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function toBase64(e,t=false,r=false,i=false){let n=0;let s=0;let a=0;let o="";const f=t?base64UrlTemplate:base64Template;if(i){let t=0;for(let r=0;r<e.length;r++){if(e.charCodeAt(r)!==0){t=r;break}}e=e.slice(t)}while(n<e.length){const t=e.charCodeAt(n++);if(n>=e.length){s=1}const i=e.charCodeAt(n++);if(n>=e.length){a=1}const c=e.charCodeAt(n++);const u=t>>2;const h=(t&3)<<4|i>>4;let l=(i&15)<<2|c>>6;let d=c&63;if(s===1){l=d=64}else{if(a===1){d=64}}if(r){if(l===64){o+=`${f.charAt(u)}${f.charAt(h)}`}else{if(d===64){o+=`${f.charAt(u)}${f.charAt(h)}${f.charAt(l)}`}else{o+=`${f.charAt(u)}${f.charAt(h)}${f.charAt(l)}${f.charAt(d)}`}}}else{o+=`${f.charAt(u)}${f.charAt(h)}${f.charAt(l)}${f.charAt(d)}`}}return o}function fromBase64(e,t=false,r=false){const i=t?base64UrlTemplate:base64Template;function n(e){for(let t=0;t<64;t++){if(i.charAt(t)===e)return t}return 64}function s(e){return e===64?0:e}let a=0;let o="";while(a<e.length){const t=n(e.charAt(a++));const r=a>=e.length?0:n(e.charAt(a++));const i=a>=e.length?0:n(e.charAt(a++));const f=a>=e.length?0:n(e.charAt(a++));const c=s(t)<<2|s(r)>>4;const u=(s(r)&15)<<4|s(i)>>2;const h=(s(i)&3)<<6|s(f);o+=String.fromCharCode(c);if(i!==64){o+=String.fromCharCode(u)}if(f!==64){o+=String.fromCharCode(h)}}if(r){const e=o.length;let t=-1;for(let r=e-1;r>=0;r--){if(o.charCodeAt(r)!==0){t=r;break}}if(t!==-1){o=o.slice(0,t+1)}else{o=""}}return o}function arrayBufferToString(e){let t="";const r=new Uint8Array(e);for(const e of r){t+=String.fromCharCode(e)}return t}function stringToArrayBuffer(e){const t=e.length;const r=new ArrayBuffer(t);const i=new Uint8Array(r);for(let r=0;r<t;r++){i[r]=e.charCodeAt(r)}return r}const log2=Math.log(2);function nearestPowerOf2(e){const t=Math.log(e)/log2;const r=Math.floor(t);const i=Math.round(t);return r===i?r:i}function clearProps(e,t){for(const r of t){delete e[r]}}
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt==="undefined"){throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}}function concat$2(e){let t=0;let r=0;for(let r=0;r<e.length;r++){const i=e[r];t+=i.byteLength}const i=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];i.set(new Uint8Array(n),r);r+=n.byteLength}return i.buffer}function checkBufferParams(e,t,r,i){if(!(t instanceof Uint8Array)){e.error="Wrong parameter: inputBuffer must be 'Uint8Array'";return false}if(!t.byteLength){e.error="Wrong parameter: inputBuffer has zero length";return false}if(r<0){e.error="Wrong parameter: inputOffset less than zero";return false}if(i<0){e.error="Wrong parameter: inputLength less than zero";return false}if(t.byteLength-r-i<0){e.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return false}return true}class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat$2(this.items)}}const powers2=[new Uint8Array([1])];const digitsString="0123456789";const NAME$1="name";const VALUE_HEX_VIEW="valueHexView";const IS_HEX_ONLY="isHexOnly";const ID_BLOCK="idBlock";const TAG_CLASS="tagClass";const TAG_NUMBER="tagNumber";const IS_CONSTRUCTED="isConstructed";const FROM_BER="fromBER";const TO_BER="toBER";const LOCAL="local";const EMPTY_STRING$1="";const EMPTY_BUFFER$1=new ArrayBuffer(0);const EMPTY_VIEW=new Uint8Array(0);const END_OF_CONTENT_NAME="EndOfContent";const OCTET_STRING_NAME="OCTET STRING";const BIT_STRING_NAME="BIT STRING";function HexBlock(e){var t;return t=class t extends e{constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=(t=r.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=r.valueHex?build.BufferSourceConverter.toUint8Array(r.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){const i=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,i,t,r)){return-1}const n=t+r;this.valueHexView=i.subarray(t,n);if(!this.valueHexView.length){this.warnings.push("Zero buffer length");return t}this.blockLength=r;return n}toBER(e=false){if(!this.isHexOnly){this.error="Flag 'isHexOnly' is not set, abort";return EMPTY_BUFFER$1}if(e){return new ArrayBuffer(this.valueHexView.byteLength)}return this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:build.Convert.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class LocalBaseBlock{constructor({blockLength:e=0,error:t=EMPTY_STRING$1,warnings:r=[],valueBeforeDecode:i=EMPTY_VIEW}={}){this.blockLength=e;this.error=t;this.warnings=r;this.valueBeforeDecodeView=build.BufferSourceConverter.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:build.Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends(HexBlock(LocalBaseBlock)){constructor({idBlock:e={}}={}){var t,r,i,n;super();if(e){this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:false;this.valueHexView=e.valueHex?build.BufferSourceConverter.toUint8Array(e.valueHex):EMPTY_VIEW;this.tagClass=(r=e.tagClass)!==null&&r!==void 0?r:-1;this.tagNumber=(i=e.tagNumber)!==null&&i!==void 0?i:-1;this.isConstructed=(n=e.isConstructed)!==null&&n!==void 0?n:false}else{this.tagClass=-1;this.tagNumber=-1;this.isConstructed=false}}toBER(e=false){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:this.error="Unknown tag class";return EMPTY_BUFFER$1}if(this.isConstructed)t|=32;if(this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31;t|=e;r[0]=t}return r.buffer}if(!this.isHexOnly){const r=utilToBase(this.tagNumber,7);const i=new Uint8Array(r);const n=r.byteLength;const s=new Uint8Array(n+1);s[0]=t|31;if(!e){for(let e=0;e<n-1;e++)s[e+1]=i[e]|128;s[n]=i[n-1]}return s.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);r[0]=t|31;if(!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=e[t]|128;r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const n=i.subarray(t,t+r);if(n.length===0){this.error="Zero buffer length";return-1}const s=n[0]&192;switch(s){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:this.error="Unknown tag class";return-1}this.isConstructed=(n[0]&32)===32;this.isHexOnly=false;const a=n[0]&31;if(a!==31){this.tagNumber=a;this.blockLength=1}else{let e=1;let t=this.valueHexView=new Uint8Array(255);let r=255;while(n[e]&128){t[e-1]=n[e]&127;e++;if(e>=n.length){this.error="End of input reached before message was fully decoded";return-1}if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1;t[e-1]=n[e]&127;const i=new Uint8Array(e);for(let r=0;r<e;r++)i[r]=t[r];t=this.valueHexView=new Uint8Array(e);t.set(i);if(this.blockLength<=9)this.tagNumber=utilFromBase(t,7);else{this.isHexOnly=true;this.warnings.push("Tag too long, represented as hex-coded")}}if(this.tagClass===1&&this.isConstructed){switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:this.error="Constructed encoding used for primitive type";return-1}}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,r,i;super();this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:false;this.longFormUsed=(r=e.longFormUsed)!==null&&r!==void 0?r:false;this.length=(i=e.length)!==null&&i!==void 0?i:0}fromBER(e,t,r){const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const n=i.subarray(t,t+r);if(n.length===0){this.error="Zero buffer length";return-1}if(n[0]===255){this.error="Length block 0xFF is reserved by standard";return-1}this.isIndefiniteForm=n[0]===128;if(this.isIndefiniteForm){this.blockLength=1;return t+this.blockLength}this.longFormUsed=!!(n[0]&128);if(this.longFormUsed===false){this.length=n[0];this.blockLength=1;return t+this.blockLength}const s=n[0]&127;if(s>8){this.error="Too big integer";return-1}if(s+1>n.length){this.error="End of input reached before message was fully decoded";return-1}const a=t+1;const o=i.subarray(a,a+s);if(o[s-1]===0)this.warnings.push("Needlessly long encoded length");this.length=utilFromBase(o,8);if(this.longFormUsed&&this.length<=127)this.warnings.push("Unnecessary usage of long length form");this.blockLength=s+1;return t+this.blockLength}toBER(e=false){let t;let r;if(this.length>127)this.longFormUsed=true;if(this.isIndefiniteForm){t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=128}return t}if(this.longFormUsed){const i=utilToBase(this.length,8);if(i.byteLength>127){this.error="Too big length";return EMPTY_BUFFER$1}t=new ArrayBuffer(i.byteLength+1);if(e)return t;const n=new Uint8Array(i);r=new Uint8Array(t);r[0]=i.byteLength|128;for(let e=0;e<i.byteLength;e++)r[e+1]=n[e];return t}t=new ArrayBuffer(1);if(e===false){r=new Uint8Array(t);r[0]=this.length}return t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:e=EMPTY_STRING$1,optional:t=false,primitiveSchema:r,...i}={},n){super(i);this.name=e;this.optional=t;if(r){this.primitiveSchema=r}this.idBlock=new LocalIdentificationBlock(i);this.lenBlock=new LocalLengthBlock(i);this.valueBlock=n?new n(i):new ValueBlock(i)}fromBER(e,t,r){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(i===-1){this.error=this.valueBlock.error;return i}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return i}toBER(e,t){const r=t||new ViewWriter;if(!t){prepareIndefiniteForm(this)}const i=this.idBlock.toBER(e);r.write(i);if(this.lenBlock.isIndefiniteForm){r.write(new Uint8Array([128]).buffer);this.valueBlock.toBER(e,r);r.write(new ArrayBuffer(2))}else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const i=this.lenBlock.toBER(e);r.write(i);r.write(t)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};if(this.primitiveSchema)e.primitiveSchema=this.primitiveSchema.toJSON();return e}toString(e="ascii"){if(e==="ascii"){return this.onAsciiEncoding()}return build.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${build.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e){return true}if(!(e instanceof this.constructor)){return false}const t=this.toBER();const r=e.toBER();return isEqualBuffer(t,r)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(e){if(e instanceof typeStore.Constructed){for(const t of e.valueBlock.value){if(prepareIndefiniteForm(t)){e.lenBlock.isIndefiniteForm=true}}}return!!e.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:e=EMPTY_STRING$1,...t}={},r){super(t,r);if(e){this.fromString(e)}}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(i===-1){this.error=this.valueBlock.error;return i}this.fromBuffer(this.valueBlock.valueHexView);if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return i}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends(HexBlock(ValueBlock)){constructor({isHexOnly:e=true,...t}={}){super(t);this.isHexOnly=e}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock);this.idBlock.isConstructed=false}}_a$w=Primitive;(()=>{typeStore.Primitive=_a$w})();Primitive.NAME="PRIMITIVE";function localChangeType(e,t){if(e instanceof t){return e}const r=new t;r.idBlock=e.idBlock;r.lenBlock=e.lenBlock;r.warnings=e.warnings;r.valueBeforeDecodeView=e.valueBeforeDecodeView;return r}function localFromBER(e,t=0,r=e.length){const i=t;let n=new BaseBlock({},ValueBlock);const s=new LocalBaseBlock;if(!checkBufferParams(s,e,t,r)){n.error=s.error;return{offset:-1,result:n}}const a=e.subarray(t,t+r);if(!a.length){n.error="Zero buffer length";return{offset:-1,result:n}}let o=n.idBlock.fromBER(e,t,r);if(n.idBlock.warnings.length){n.warnings.concat(n.idBlock.warnings)}if(o===-1){n.error=n.idBlock.error;return{offset:-1,result:n}}t=o;r-=n.idBlock.blockLength;o=n.lenBlock.fromBER(e,t,r);if(n.lenBlock.warnings.length){n.warnings.concat(n.lenBlock.warnings)}if(o===-1){n.error=n.lenBlock.error;return{offset:-1,result:n}}t=o;r-=n.lenBlock.blockLength;if(!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm){n.error="Indefinite length form used for primitive encoding form";return{offset:-1,result:n}}let f=BaseBlock;switch(n.idBlock.tagClass){case 1:if(n.idBlock.tagNumber>=37&&n.idBlock.isHexOnly===false){n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard";return{offset:-1,result:n}}switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0){n.error="Type [UNIVERSAL 0] is reserved";return{offset:-1,result:n}}f=typeStore.EndOfContent;break;case 1:f=typeStore.Boolean;break;case 2:f=typeStore.Integer;break;case 3:f=typeStore.BitString;break;case 4:f=typeStore.OctetString;break;case 5:f=typeStore.Null;break;case 6:f=typeStore.ObjectIdentifier;break;case 10:f=typeStore.Enumerated;break;case 12:f=typeStore.Utf8String;break;case 13:f=typeStore.RelativeObjectIdentifier;break;case 14:f=typeStore.TIME;break;case 15:n.error="[UNIVERSAL 15] is reserved by ASN.1 standard";return{offset:-1,result:n};case 16:f=typeStore.Sequence;break;case 17:f=typeStore.Set;break;case 18:f=typeStore.NumericString;break;case 19:f=typeStore.PrintableString;break;case 20:f=typeStore.TeletexString;break;case 21:f=typeStore.VideotexString;break;case 22:f=typeStore.IA5String;break;case 23:f=typeStore.UTCTime;break;case 24:f=typeStore.GeneralizedTime;break;case 25:f=typeStore.GraphicString;break;case 26:f=typeStore.VisibleString;break;case 27:f=typeStore.GeneralString;break;case 28:f=typeStore.UniversalString;break;case 29:f=typeStore.CharacterString;break;case 30:f=typeStore.BmpString;break;case 31:f=typeStore.DATE;break;case 32:f=typeStore.TimeOfDay;break;case 33:f=typeStore.DateTime;break;case 34:f=typeStore.Duration;break;default:{const e=n.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;e.idBlock=n.idBlock;e.lenBlock=n.lenBlock;e.warnings=n.warnings;n=e}}break;case 2:case 3:case 4:default:{f=n.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}}n=localChangeType(n,f);o=n.fromBER(e,t,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length);n.valueBeforeDecodeView=e.subarray(i,i+n.blockLength);return{offset:o,result:n}}function fromBER(e){if(!e.byteLength){const e=new BaseBlock({},ValueBlock);e.error="Input buffer has zero length";return{offset:-1,result:e}}return localFromBER(build.BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength)}function checkLen(e,t){if(e){return 1}return t}class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=false,...r}={}){super(r);this.value=e;this.isIndefiniteForm=t}fromBER(e,t,r){const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}this.valueBeforeDecodeView=i.subarray(t,t+r);if(this.valueBeforeDecodeView.length===0){this.warnings.push("Zero buffer length");return t}let n=t;while(checkLen(this.isIndefiniteForm,r)>0){const e=localFromBER(i,n,r);if(e.offset===-1){this.error=e.result.error;this.warnings.concat(e.result.warnings);return-1}n=e.offset;this.blockLength+=e.result.blockLength;r-=e.result.blockLength;this.value.push(e.result);if(this.isIndefiniteForm&&e.result.constructor.NAME===END_OF_CONTENT_NAME){break}}if(this.isIndefiniteForm){if(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME){this.value.pop()}else{this.warnings.push("No EndOfContent block encoded")}}return n}toBER(e,t){const r=t||new ViewWriter;for(let t=0;t<this.value.length;t++){this.value[t].toBER(e,r)}if(!t){return r.final()}return EMPTY_BUFFER$1}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value){e.value.push(t.toJSON())}return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock);this.idBlock.isConstructed=true}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);if(i===-1){this.error=this.valueBlock.error;return i}if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;if(!this.valueBlock.error.length)this.blockLength+=this.valueBlock.blockLength;return i}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value){e.push(t.toString("ascii").split("\n").map((e=>`  ${e}`)).join("\n"))}const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}_a$v=Constructed;(()=>{typeStore.Constructed=_a$v})();Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,r){return t}toBER(e){return EMPTY_BUFFER$1}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=0}}_a$u=EndOfContent;(()=>{typeStore.EndOfContent=_a$u})();EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=5}fromBER(e,t,r){if(this.lenBlock.length>0)this.warnings.push("Non-zero length of value block for Null type");if(!this.idBlock.error.length)this.blockLength+=this.idBlock.blockLength;if(!this.lenBlock.error.length)this.blockLength+=this.lenBlock.blockLength;this.blockLength+=r;if(t+r>e.byteLength){this.error="End of input reached before message was fully decoded (inconsistent offset and length values)";return-1}return t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5;e[1]=0}if(t){t.write(r)}return r}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;(()=>{typeStore.Null=_a$t})();Null.NAME="NULL";class LocalBooleanValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);if(t.valueHex){this.valueHexView=build.BufferSourceConverter.toUint8Array(t.valueHex)}else{this.valueHexView=new Uint8Array(1)}if(e){this.value=e}}get value(){for(const e of this.valueHexView){if(e>0){return true}}return false}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}this.valueHexView=i.subarray(t,t+r);if(r>1)this.warnings.push("Boolean value encoded in more then 1 octet");this.isHexOnly=true;utilDecodeTC.call(this);this.blockLength=r;return t+r}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;class Boolean$1 extends BaseBlock{constructor(e={}){super(e,LocalBooleanValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}_a$s=Boolean$1;(()=>{typeStore.Boolean=_a$s})();Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({isConstructed:e=false,...t}={}){super(t);this.isConstructed=e}fromBER(e,t,r){let i=0;if(this.isConstructed){this.isHexOnly=false;i=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(i===-1)return i;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only";return-1}}if(t!==OCTET_STRING_NAME){this.error="OCTET STRING may consists of OCTET STRINGs only";return-1}}}else{this.isHexOnly=true;i=super.fromBER(e,t,r);this.blockLength=r}return i}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);return e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i,n;(i=r.isConstructed)!==null&&i!==void 0?i:r.isConstructed=!!((n=r.value)===null||n===void 0?void 0:n.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalOctetStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=4}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;if(r===0){if(this.idBlock.error.length===0)this.blockLength+=this.idBlock.blockLength;if(this.lenBlock.error.length===0)this.blockLength+=this.lenBlock.blockLength;return t}if(!this.valueBlock.isConstructed){const i=e instanceof ArrayBuffer?new Uint8Array(e):e;const n=i.subarray(t,t+r);try{if(n.byteLength){const e=localFromBER(n,0,n.byteLength);if(e.offset!==-1&&e.offset===r){this.valueBlock.value=[e.result]}}}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}return`${this.constructor.NAME} : ${build.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed){return this.valueBlock.valueHexView.slice().buffer}const e=[];for(const t of this.valueBlock.value){if(t instanceof OctetString$1){e.push(t.valueBlock.valueHexView)}}return build.BufferSourceConverter.concat(e)}}_a$r=OctetString$1;(()=>{typeStore.OctetString=_a$r})();OctetString$1.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({unusedBits:e=0,isConstructed:t=false,...r}={}){super(r);this.unusedBits=e;this.isConstructed=t;this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r){return t}let i=-1;if(this.isConstructed){i=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r);if(i===-1)return i;for(const e of this.value){const t=e.constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;else{this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only";return-1}}if(t!==BIT_STRING_NAME){this.error="BIT STRING may consists of BIT STRINGs only";return-1}const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0){this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only';return-1}this.unusedBits=r.unusedBits}return i}const n=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r)){return-1}const s=n.subarray(t,t+r);this.unusedBits=s[0];if(this.unusedBits>7){this.error="Unused bits for BitString must be in range 0-7";return-1}if(!this.unusedBits){const e=s.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);if(t.offset!==-1&&t.offset===r-1){this.value=[t.result]}}}catch(e){}}this.valueHexView=s.subarray(1);this.blockLength=s.length;return t+r}toBER(e,t){if(this.isConstructed){return LocalConstructedValueBlock.prototype.toBER.call(this,e,t)}if(e){return new ArrayBuffer(this.valueHexView.byteLength+1)}if(!this.valueHexView.byteLength){return EMPTY_BUFFER$1}const r=new Uint8Array(this.valueHexView.length+1);r[0]=this.unusedBits;r.set(this.valueHexView,1);return r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString$1 extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i,n;(i=r.isConstructed)!==null&&i!==void 0?i:r.isConstructed=!!((n=r.value)===null||n===void 0?void 0:n.length);super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalBitStringValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=3}fromBER(e,t,r){this.valueBlock.isConstructed=this.idBlock.isConstructed;this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length){return Constructed.prototype.onAsciiEncoding.call(this)}else{const e=[];const t=this.valueBlock.valueHexView;for(const r of t){e.push(r.toString(2).padStart(8,"0"))}const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString$1;(()=>{typeStore.BitString=_a$q})();BitString$1.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(e,t){const r=new Uint8Array([0]);const i=new Uint8Array(e);const n=new Uint8Array(t);let s=i.slice(0);const a=s.length-1;const o=n.slice(0);const f=o.length-1;let c=0;const u=f<a?a:f;let h=0;for(let e=u;e>=0;e--,h++){switch(true){case h<o.length:c=s[a-h]+o[f-h]+r[0];break;default:c=s[a-h]+r[0]}r[0]=c/10;switch(true){case h>=s.length:s=utilConcatView(new Uint8Array([c%10]),s);break;default:s[a-h]=c%10}}if(r[0]>0)s=utilConcatView(r,s);return s}function power2(e){if(e>=powers2.length){for(let t=powers2.length;t<=e;t++){const e=new Uint8Array([0]);let r=powers2[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const i=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=i[0]/10;r[t]=i[0]%10}if(e[0]>0)r=utilConcatView(e,r);powers2.push(r)}}return powers2[e]}function viewSub(e,t){let r=0;const i=new Uint8Array(e);const n=new Uint8Array(t);const s=i.slice(0);const a=s.length-1;const o=n.slice(0);const f=o.length-1;let c;let u=0;for(let e=f;e>=0;e--,u++){c=s[a-u]-o[f-u]-r;switch(true){case c<0:r=1;s[a-u]=c+10;break;default:r=0;s[a-u]=c}}if(r>0){for(let e=a-f+1;e>=0;e--,u++){c=s[a-u]-r;if(c<0){r=1;s[a-u]=c+10}else{r=0;s[a-u]=c;break}}}return s.slice()}class LocalIntegerValueBlock extends(HexBlock(ValueBlock)){constructor({value:e,...t}={}){super(t);this._valueDec=0;if(t.valueHex){this.setValueHex()}if(e!==undefined){this.valueDec=e}}setValueHex(){if(this.valueHexView.length>=4){this.warnings.push("Too big Integer for decoding, hex only");this.isHexOnly=true;this._valueDec=0}else{this.isHexOnly=false;if(this.valueHexView.length>0){this._valueDec=utilDecodeTC.call(this)}}}set valueDec(e){this._valueDec=e;this.isHexOnly=false;this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,i=0){const n=this.fromBER(e,t,r);if(n===-1)return n;const s=this.valueHexView;if(s[0]===0&&(s[1]&128)!==0){this.valueHexView=s.subarray(1)}else{if(i!==0){if(s.length<i){if(i-s.length>1)i=s.length+1;this.valueHexView=s.subarray(i-s.length)}}}return n}toDER(e=false){const t=this.valueHexView;switch(true){case(t[0]&128)!==0:{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0;e.set(t,1);this.valueHexView=e}break;case t[0]===0&&(t[1]&128)===0:{this.valueHexView=this.valueHexView.subarray(1)}break}return this.toBER(e)}fromBER(e,t,r){const i=super.fromBER(e,t,r);if(i===-1){return i}this.setValueHex();return i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3);let r=0;let i;const n=this.valueHexView;let s="";let a=false;for(let a=n.byteLength-1;a>=0;a--){i=n[a];for(let n=0;n<8;n++){if((i&1)===1){switch(r){case e:t=viewSub(power2(r),t);s="-";break;default:t=viewAdd(t,power2(r))}}r++;i>>=1}}for(let e=0;e<t.length;e++){if(t[e])a=true;if(a)s+=digitsString.charAt(t[e])}if(a===false)s+=digitsString.charAt(0);return s}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";(()=>{Object.defineProperty(_a$p.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e);this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}})})();var _a$o;class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=2}toBigInt(){assertBigInt();return BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e);const r=new ViewWriter;const i=t.toString(16).replace(/^-/,"");const n=new Uint8Array(build.Convert.FromHex(i));if(t<0){const e=new Uint8Array(n.length+(n[0]&128?1:0));e[0]|=128;const i=BigInt(`0x${build.Convert.ToHex(e)}`);const s=i+t;const a=build.BufferSourceConverter.toUint8Array(build.Convert.FromHex(s.toString(16)));a[0]|=128;r.write(a)}else{if(n[0]&128){r.write(new Uint8Array([0]))}r.write(n)}const s=new Integer({valueHex:r.final()});return s}convertToDER(){const e=new Integer({valueHex:this.valueBlock.valueHexView});e.valueBlock.toDER();return e}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;(()=>{typeStore.Integer=_a$o})();Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=10}}_a$n=Enumerated;(()=>{typeStore.Enumerated=_a$n})();Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends(HexBlock(ValueBlock)){constructor({valueDec:e=-1,isFirstSid:t=false,...r}={}){super(r);this.valueDec=e;this.isFirstSid=t}fromBER(e,t,r){if(!r){return t}const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r)){return-1}const n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=n[e]&127;this.blockLength++;if((n[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++){s[e]=this.valueHexView[e]}this.valueHexView=s;if((n[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);while(t.length%7){t="0"+t}const r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++){r[e]=parseInt(t.slice(e*7,e*7+7),2)+(e+1<r.length?128:0)}this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=e[t]|128;r[i]=e[i]}return r}toString(){let e="";if(this.isHexOnly)e=build.Convert.ToHex(this.valueHexView);else{if(this.isFirstSid){let t=this.valueDec;if(this.valueDec<=39)e="0.";else{if(this.valueDec<=79){e="1.";t-=40}else{e="2.";t-=80}}e+=t.toString()}else e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let i=t;while(r>0){const t=new LocalSidValueBlock;i=t.fromBER(e,i,r);if(i===-1){this.blockLength=0;this.error=t.error;return i}if(this.value.length===0)t.isFirstSid=true;this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return i}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0){this.error=this.value[r].error;return EMPTY_BUFFER$1}t.push(i)}return concat$2(t)}fromString(e){this.value=[];let t=0;let r=0;let i="";let n=false;do{r=e.indexOf(".",t);if(r===-1)i=e.substring(t);else i=e.substring(t,r);t=r+1;if(n){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}const r=parseInt(i,10);if(isNaN(r))return;e.valueDec=r+t;n=false}else{const e=new LocalSidValueBlock;if(i>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(i);e.valueBigInt=t}else{e.valueDec=parseInt(i,10);if(isNaN(e.valueDec))return}if(!this.value.length){e.isFirstSid=true;n=true}this.value.push(e)}}while(r!==-1)}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){i=`{${i}}`;if(this.value[r].isFirstSid)e=`2.{${i} - 80}`;else e+=i}else e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++){e.sidArray.push(this.value[t].toJSON())}return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier$1 extends BaseBlock{constructor(e={}){super(e,LocalObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier$1;(()=>{typeStore.ObjectIdentifier=_a$m})();ObjectIdentifier$1.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends(HexBlock(LocalBaseBlock)){constructor({valueDec:e=0,...t}={}){super(t);this.valueDec=e}fromBER(e,t,r){if(r===0)return t;const i=build.BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,i,t,r))return-1;const n=i.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r;e++){this.valueHexView[e]=n[e]&127;this.blockLength++;if((n[e]&128)===0)break}const s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];this.valueHexView=s;if((n[this.blockLength-1]&128)!==0){this.error="End of input reached before message was fully decoded";return-1}if(this.valueHexView[0]===0)this.warnings.push("Needlessly long format of SID encoding");if(this.blockLength<=8)this.valueDec=utilFromBase(this.valueHexView,7);else{this.isHexOnly=true;this.warnings.push("Too big SID for decoding, hex only")}return t+this.blockLength}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=t[e]|128;r[this.blockLength-1]=t[this.blockLength-1];return r.buffer}const t=utilToBase(this.valueDec,7);if(t.byteLength===0){this.error="Error during encoding SID value";return EMPTY_BUFFER$1}const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t);const i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=e[t]|128;r[i]=e[i]}return r.buffer}toString(){let e="";if(this.isHexOnly)e=build.Convert.ToHex(this.valueHexView);else{e=this.valueDec.toString()}return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING$1,...t}={}){super(t);this.value=[];if(e){this.fromString(e)}}fromBER(e,t,r){let i=t;while(r>0){const t=new LocalRelativeSidValueBlock;i=t.fromBER(e,i,r);if(i===-1){this.blockLength=0;this.error=t.error;return i}this.blockLength+=t.blockLength;r-=t.blockLength;this.value.push(t)}return i}toBER(e,t){const r=[];for(let t=0;t<this.value.length;t++){const i=this.value[t].toBER(e);if(i.byteLength===0){this.error=this.value[t].error;return EMPTY_BUFFER$1}r.push(i)}return concat$2(r)}fromString(e){this.value=[];let t=0;let r=0;let i="";do{r=e.indexOf(".",t);if(r===-1)i=e.substring(t);else i=e.substring(t,r);t=r+1;const n=new LocalRelativeSidValueBlock;n.valueDec=parseInt(i,10);if(isNaN(n.valueDec))return true;this.value.push(n)}while(r!==-1);return true}toString(){let e="";let t=false;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();if(r!==0)e=`${e}.`;if(t){i=`{${i}}`;e+=i}else e+=i}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock);this.idBlock.tagClass=1;this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;(()=>{typeStore.RelativeObjectIdentifier=_a$l})();RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=16}}_a$k=Sequence;(()=>{typeStore.Sequence=_a$k})();Sequence.NAME="SEQUENCE";var _a$j;class Set$1 extends Constructed{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=17}}_a$j=Set$1;(()=>{typeStore.Set=_a$j})();Set$1.NAME="SET";class LocalStringValueBlock extends(HexBlock(ValueBlock)){constructor({...e}={}){super(e);this.isHexOnly=true;this.value=EMPTY_STRING$1}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,build.BufferSourceConverter.toUint8Array(e))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=build.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=build.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`);this.valueBlock.value=build.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(build.Convert.FromUtf8String(e));this.valueBlock.value=e}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=12}}_a$i=Utf8String;(()=>{typeStore.Utf8String=_a$i})();Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=build.Convert.ToUtf16String(e);this.valueBlock.valueHexView=build.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e;this.valueBlock.valueHexView=new Uint8Array(build.Convert.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=30}}_a$h=BmpString;(()=>{typeStore.BmpString=_a$h})();BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);const r=new Uint8Array(t);for(let e=0;e<r.length;e+=4){r[e]=r[e+3];r[e+1]=r[e+2];r[e+2]=0;r[e+3]=0}this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length;const r=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let i=0;i<t;i++){const t=utilToBase(e.charCodeAt(i),8);const n=new Uint8Array(t);if(n.length>4)continue;const s=4-n.length;for(let e=n.length-1;e>=0;e--)r[i*4+e+s]=n[e]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=28}}_a$g=UniversalString;(()=>{typeStore.UniversalString=_a$g})();UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=18}}_a$f=NumericString;(()=>{typeStore.NumericString=_a$f})();NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=19}}_a$e=PrintableString;(()=>{typeStore.PrintableString=_a$e})();PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=20}}_a$d=TeletexString;(()=>{typeStore.TeletexString=_a$d})();TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=21}}_a$c=VideotexString;(()=>{typeStore.VideotexString=_a$c})();VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=22}}_a$b=IA5String;(()=>{typeStore.IA5String=_a$b})();IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=25}}_a$a=GraphicString;(()=>{typeStore.GraphicString=_a$a})();GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=26}}_a$9=VisibleString;(()=>{typeStore.VisibleString=_a$9})();VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=27}}_a$8=GeneralString;(()=>{typeStore.GeneralString=_a$8})();GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=29}}_a$7=CharacterString;(()=>{typeStore.CharacterString=_a$7})();CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...r}={}){super(r);this.year=0;this.month=0;this.day=0;this.hour=0;this.minute=0;this.second=0;if(e){this.fromString(e);this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}if(t){this.fromDate(t);this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())}this.idBlock.tagClass=1;this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,build.BufferSourceConverter.toUint8Array(e)))}toBuffer(){const e=this.toString();const t=new ArrayBuffer(e.length);const r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear();this.month=e.getUTCMonth()+1;this.day=e.getUTCDate();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi;const r=t.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const i=parseInt(r[1],10);if(i>=50)this.year=1900+i;else this.year=2e3+i;this.month=parseInt(r[2],10);this.day=parseInt(r[3],10);this.hour=parseInt(r[4],10);this.minute=parseInt(r[5],10);this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const e=new Array(7);e[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2);e[1]=padNumber(this.month,2);e[2]=padNumber(this.day,2);e[3]=padNumber(this.hour,2);e[4]=padNumber(this.minute,2);e[5]=padNumber(this.second,2);e[6]="Z";return e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;(()=>{typeStore.UTCTime=_a$6})();UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e);(t=this.millisecond)!==null&&t!==void 0?t:this.millisecond=0;this.idBlock.tagClass=1;this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e);this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=false;let r="";let i="";let n=0;let s;let a=0;let o=0;if(e[e.length-1]==="Z"){r=e.substring(0,e.length-1);t=true}else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");r=e}if(t){if(r.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(r.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let e=1;let t=r.indexOf("+");let i="";if(t===-1){t=r.indexOf("-");e=-1}if(t!==-1){i=r.substring(t+1);r=r.substring(0,t);if(i.length!==2&&i.length!==4)throw new Error("Wrong input string for conversion");let n=parseInt(i.substring(0,2),10);if(isNaN(n.valueOf()))throw new Error("Wrong input string for conversion");a=e*n;if(i.length===4){n=parseInt(i.substring(2,4),10);if(isNaN(n.valueOf()))throw new Error("Wrong input string for conversion");o=e*n}}}let f=r.indexOf(".");if(f===-1)f=r.indexOf(",");if(f!==-1){const e=new Number(`0${r.substring(f)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");n=e.valueOf();i=r.substring(0,f)}else i=r;switch(true){case i.length===8:s=/(\d{4})(\d{2})(\d{2})/gi;if(f!==-1)throw new Error("Wrong input string for conversion");break;case i.length===10:s=/(\d{4})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*n;this.minute=Math.floor(e);e=60*(e-this.minute);this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case i.length===12:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){let e=60*n;this.second=Math.floor(e);e=1e3*(e-this.second);this.millisecond=Math.floor(e)}break;case i.length===14:s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi;if(f!==-1){const e=1e3*n;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const c=s.exec(i);if(c===null)throw new Error("Wrong input string for conversion");for(let e=1;e<c.length;e++){switch(e){case 1:this.year=parseInt(c[e],10);break;case 2:this.month=parseInt(c[e],10);break;case 3:this.day=parseInt(c[e],10);break;case 4:this.hour=parseInt(c[e],10)+a;break;case 5:this.minute=parseInt(c[e],10)+o;break;case 6:this.second=parseInt(c[e],10);break;default:throw new Error("Wrong input string for conversion")}}if(t===false){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear();this.month=e.getUTCMonth();this.day=e.getUTCDay();this.hour=e.getUTCHours();this.minute=e.getUTCMinutes();this.second=e.getUTCSeconds();this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const e=[];e.push(padNumber(this.year,4));e.push(padNumber(this.month,2));e.push(padNumber(this.day,2));e.push(padNumber(this.hour,2));e.push(padNumber(this.minute,2));e.push(padNumber(this.second,2));if(this.millisecond!==0){e.push(".");e.push(padNumber(this.millisecond,3))}e.push("Z");return e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;(()=>{typeStore.GeneralizedTime=_a$5})();GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=31}}_a$4=DATE;(()=>{typeStore.DATE=_a$4})();DATE.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=32}}_a$3=TimeOfDay;(()=>{typeStore.TimeOfDay=_a$3})();TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=33}}_a$2=DateTime;(()=>{typeStore.DateTime=_a$2})();DateTime.NAME="DateTime";var _a$1$1;class Duration extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=34}}_a$1$1=Duration;(()=>{typeStore.Duration=_a$1$1})();Duration.NAME="Duration";var _a$x;class TIME extends Utf8String{constructor(e={}){super(e);this.idBlock.tagClass=1;this.idBlock.tagNumber=14}}_a$x=TIME;(()=>{typeStore.TIME=_a$x})();TIME.NAME="TIME";class Any{constructor({name:e=EMPTY_STRING$1,optional:t=false}={}){this.name=e;this.optional=t}}class Choice extends Any{constructor({value:e=[],...t}={}){super(t);this.value=e}}class Repeated extends Any{constructor({value:e=new Any,local:t=false,...r}={}){super(r);this.value=e;this.local=t}}class RawData{constructor({data:e=EMPTY_VIEW}={}){this.dataView=build.BufferSourceConverter.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=build.BufferSourceConverter.toUint8Array(e)}fromBER(e,t,r){const i=t+r;this.dataView=build.BufferSourceConverter.toUint8Array(e).subarray(t,i);return i}toBER(e){return this.dataView.slice().buffer}}function compareSchema(e,t,r){if(r instanceof Choice){for(let i=0;i<r.value.length;i++){const n=compareSchema(e,t,r.value[i]);if(n.verified){return{verified:true,result:e}}}{const e={verified:false,result:{error:"Wrong values for Choice type"}};if(r.hasOwnProperty(NAME$1))e.name=r.name;return e}}if(r instanceof Any){if(r.hasOwnProperty(NAME$1))e[r.name]=t;return{verified:true,result:e}}if(e instanceof Object===false){return{verified:false,result:{error:"Wrong root object"}}}if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 data"}}}if(r instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(ID_BLOCK in r===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(FROM_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(TO_BER in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const i=r.idBlock.toBER(false);if(i.byteLength===0){return{verified:false,result:{error:"Error encoding idBlock for ASN.1 schema"}}}const n=r.idBlock.fromBER(i,0,i.byteLength);if(n===-1){return{verified:false,result:{error:"Error decoding idBlock for ASN.1 schema"}}}if(r.idBlock.hasOwnProperty(TAG_CLASS)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagClass!==t.idBlock.tagClass){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(TAG_NUMBER)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.tagNumber!==t.idBlock.tagNumber){return{verified:false,result:e}}if(r.idBlock.hasOwnProperty(IS_CONSTRUCTED)===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isConstructed!==t.idBlock.isConstructed){return{verified:false,result:e}}if(!(IS_HEX_ONLY in r.idBlock)){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly){return{verified:false,result:e}}if(r.idBlock.isHexOnly){if(VALUE_HEX_VIEW in r.idBlock===false){return{verified:false,result:{error:"Wrong ASN.1 schema"}}}const i=r.idBlock.valueHexView;const n=t.idBlock.valueHexView;if(i.length!==n.length){return{verified:false,result:e}}for(let t=0;t<i.length;t++){if(i[t]!==n[1]){return{verified:false,result:e}}}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)e[r.name]=t}if(r instanceof typeStore.Constructed){let i=0;let n={verified:false,result:{error:"Unknown error"}};let s=r.valueBlock.value.length;if(s>0){if(r.valueBlock.value[0]instanceof Repeated){s=t.valueBlock.value.length}}if(s===0){return{verified:true,result:e}}if(t.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let t=true;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||false);if(t){return{verified:true,result:e}}if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}e.error="Inconsistent object length";return{verified:false,result:e}}for(let a=0;a<s;a++){if(a-i>=t.valueBlock.value.length){if(r.valueBlock.value[a].optional===false){const t={verified:false,result:e};e.error="Inconsistent length between ASN.1 data and schema";if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}}else{if(r.valueBlock.value[0]instanceof Repeated){n=compareSchema(e,t.valueBlock.value[a],r.valueBlock.value[0].value);if(n.verified===false){if(r.valueBlock.value[0].optional)i++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return n}}if(NAME$1 in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let i={};if(LOCAL in r.valueBlock.value[0]&&r.valueBlock.value[0].local)i=t;else i=e;if(typeof i[r.valueBlock.value[0].name]==="undefined")i[r.valueBlock.value[0].name]=[];i[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else{n=compareSchema(e,t.valueBlock.value[a-i],r.valueBlock.value[a]);if(n.verified===false){if(r.valueBlock.value[a].optional)i++;else{if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name)delete e[r.name]}return n}}}}}if(n.verified===false){const t={verified:false,result:e};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return{verified:true,result:e}}if(r.primitiveSchema&&VALUE_HEX_VIEW in t.valueBlock){const i=localFromBER(t.valueBlock.valueHexView);if(i.offset===-1){const t={verified:false,result:i.result};if(r.name){r.name=r.name.replace(/^\s+|\s+$/g,EMPTY_STRING$1);if(r.name){delete e[r.name];t.name=r.name}}return t}return compareSchema(e,i.result,r.primitiveSchema)}return{verified:true,result:e}}function verifySchema(e,t){if(t instanceof Object===false){return{verified:false,result:{error:"Wrong ASN.1 schema type"}}}const r=localFromBER(build.BufferSourceConverter.toUint8Array(e));if(r.offset===-1){return{verified:false,result:r.result}}return compareSchema(r.result,r.result,t)}const asn1js=Object.freeze({__proto__:null,Any,BaseBlock,BaseStringBlock,BitString:BitString$1,BmpString,Boolean:Boolean$1,CharacterString,Choice,Constructed,DATE,DateTime,Duration,EndOfContent,Enumerated,GeneralString,GeneralizedTime,GraphicString,HexBlock,IA5String,Integer,Null,NumericString,ObjectIdentifier:ObjectIdentifier$1,OctetString:OctetString$1,Primitive,PrintableString,RawData,RelativeObjectIdentifier,Repeated,Sequence,Set:Set$1,TIME,TeletexString,TimeOfDay,UTCTime,UniversalString,Utf8String,ValueBlock,VideotexString,ViewWriter,VisibleString,compareSchema,fromBER,verifySchema});class ByteStream{constructor(e={}){if("view"in e){this.fromUint8Array(e.view)}else if("buffer"in e){this.fromArrayBuffer(e.buffer)}else if("string"in e){this.fromString(e.string)}else if("hexstring"in e){this.fromHexString(e.hexstring)}else{if("length"in e&&e.length>0){this.length=e.length;if(e.stub){for(let t=0;t<this._view.length;t++){this._view[t]=e.stub}}}else{this.length=0}}}set buffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length);this._view=new Uint8Array(this._buffer);this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e);this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0);this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e;this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let i=e;i<e+t;i++)r+=String.fromCharCode(this.view[i]);return r}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1);this.view=new Uint8Array(this.buffer);const r=new Map;r.set("0",0);r.set("1",1);r.set("2",2);r.set("3",3);r.set("4",4);r.set("5",5);r.set("6",6);r.set("7",7);r.set("8",8);r.set("9",9);r.set("A",10);r.set("a",10);r.set("B",11);r.set("b",11);r.set("C",12);r.set("c",12);r.set("D",13);r.set("d",13);r.set("E",14);r.set("e",14);r.set("F",15);r.set("f",15);let i=0;let n=0;for(let s=0;s<t;s++){if(!(s%2)){n=r.get(e.charAt(s))<<4}else{n|=r.get(e.charAt(s));this.view[i]=n;i++}}}toHexString(e=0,t=this.view.length-e){let r="";if(e>=this.view.length||e<0){e=0}if(t>=this.view.length||t<0){t=this.view.length-e}for(let i=e;i<e+t;i++){const e=this.view[i].toString(16).toUpperCase();r=r+(e.length==1?"0":"")+e}return r}copy(e=0,t=this.length-e){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,e+t)});return r}slice(e=0,t=this.length){if(!e&&!this.length){return new ByteStream}if(e<0||e>this.length-1){throw new Error(`Wrong start position: ${e}`)}const r=new ByteStream({buffer:this._buffer.slice(e,t)});return r}realloc(e){const t=new ArrayBuffer(e);const r=new Uint8Array(t);if(e>this._view.length)r.set(this._view);else{r.set(new Uint8Array(this._buffer,0,e))}this._buffer=t;this._view=new Uint8Array(this._buffer)}append(e){const t=this.length;const r=e.length;const i=e._view.subarray();this.realloc(t+r);this._view.set(i,t)}insert(e,t=0,r=this.length-t){if(t>this.length-1)return false;if(r>this.length-t){r=this.length-t}if(r>e.length){r=e.length}if(r==e.length)this._view.set(e._view,t);else{this._view.set(e._view.subarray(0,r),t)}return true}isEqual(e){if(this.length!=e.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e.view[t])return false}return true}isEqualView(e){if(e.length!=this.view.length)return false;for(let t=0;t<e.length;t++){if(this.view[t]!=e[t])return false}return true}findPattern(e,t,r,i){const{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);const o=e.length;if(o>s){return-1}const f=[];for(let t=0;t<o;t++)f.push(e.view[t]);for(let e=0;e<=s-o;e++){let t=true;const r=a?n-o-e:n+e;for(let e=0;e<o;e++){if(this.view[e+r]!=f[e]){t=false;break}}if(t){return a?n-o-e:n+o+e}}return-1}findFirstIn(e,t,r,i){const{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);const o={id:-1,position:a?0:n+s,length:0};for(let t=0;t<e.length;t++){const r=this.findPattern(e[t],n,s,a);if(r!=-1){let i=false;const n=e[t].length;if(a){if(r-n>=o.position-o.length)i=true}else{if(r-n<=o.position-o.length)i=true}if(i){o.position=r;o.id=t;o.length=n}}}return o}findAllIn(e,t,r){let{start:i,length:n}=this.prepareFindParameters(t,r);const s=[];let a={id:-1,position:i};do{const t=a.position;a=this.findFirstIn(e,a.position,n);if(a.id==-1){break}n-=a.position-t;s.push({id:a.id,position:a.position})}while(true);return s}findAllPatternIn(e,t,r){const{start:i,length:n}=this.prepareFindParameters(t,r);const s=[];const a=e.length;if(a>n){return-1}const o=Array.from(e.view);for(let e=0;e<=n-a;e++){let t=true;const r=i+e;for(let e=0;e<a;e++){if(this.view[e+r]!=o[e]){t=false;break}}if(t){s.push(i+a+e);e+=a-1}}return s}findFirstNotIn(e,t,r,i){let{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);const o={left:{id:-1,position:n},right:{id:-1,position:0},value:new ByteStream};let f=s;while(f>0){o.right=this.findFirstIn(e,a?n-s+f:n+s-f,f,a);if(o.right.id==-1){s=f;if(a){n-=s}else{n=o.left.position}o.value=new ByteStream({buffer:this._buffer.slice(n,n+s)});break}if(o.right.position!=(a?o.left.position-e[o.right.id].length:o.left.position+e[o.right.id].length)){if(a){n=o.right.position+e[o.right.id].length;s=o.left.position-o.right.position-e[o.right.id].length}else{n=o.left.position;s=o.right.position-o.left.position-e[o.right.id].length}o.value=new ByteStream({buffer:this._buffer.slice(n,n+s)});break}o.left=o.right;f-=e[o.right.id].length}if(a){const e=o.right;o.right=o.left;o.left=e}return o}findAllNotIn(e,t,r){let{start:i,length:n}=this.prepareFindParameters(t,r);const s=[];let a={left:{id:-1,position:i},right:{id:-1,position:i},value:new ByteStream};do{const t=a.right.position;a=this.findFirstNotIn(e,a.right.position,n);n-=a.right.position-t;s.push({left:{id:a.left.id,position:a.left.position},right:{id:a.right.id,position:a.right.position},value:a.value})}while(a.right.id!=-1);return s}findFirstSequence(e,t,r,i){let{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);const o=this.skipNotPatterns(e,n,s,a);if(o==-1){return{position:-1,value:new ByteStream}}const f=this.skipPatterns(e,o,s-(a?n-o:o-n),a);if(a){n=f;s=o-f}else{n=o;s=f-o}const c=new ByteStream({buffer:this._buffer.slice(n,n+s)});return{position:f,value:c}}findAllSequences(e,t,r){let{start:i,length:n}=this.prepareFindParameters(t,r);const s=[];let a={position:i,value:new ByteStream};do{const t=a.position;a=this.findFirstSequence(e,a.position,n);if(a.position!=-1){n-=a.position-t;s.push({position:a.position,value:a.value})}}while(a.position!=-1);return s}findPairedPatterns(e,t,r,i){const n=[];if(e.isEqual(t))return n;const{start:s,length:a}=this.prepareFindParameters(r,i);let o=0;const f=this.findAllPatternIn(e,s,a);if(!Array.isArray(f)||f.length==0){return n}const c=this.findAllPatternIn(t,s,a);if(!Array.isArray(c)||c.length==0){return n}while(o<f.length){if(c.length==0){break}if(f[0]==c[0]){n.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o]>c[0]){break}while(f[o]<c[0]){o++;if(o>=f.length){break}}n.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}n.sort(((e,t)=>e.left-t.left));return n}findPairedArrays(e,t,r,i){const{start:n,length:s}=this.prepareFindParameters(r,i);const a=[];let o=0;const f=this.findAllIn(e,n,s);if(f.length==0)return a;const c=this.findAllIn(t,n,s);if(c.length==0)return a;while(o<f.length){if(c.length==0){break}if(f[0].position==c[0].position){a.push({left:f[0],right:c[0]});f.splice(0,1);c.splice(0,1);continue}if(f[o].position>c[0].position){break}while(f[o].position<c[0].position){o++;if(o>=f.length){break}}a.push({left:f[o-1],right:c[0]});f.splice(o-1,1);c.splice(0,1);o=0}a.sort(((e,t)=>e.left.position-t.left.position));return a}replacePattern(e,t,r,i,n=null){let s=[];let a;const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]};const{start:f,length:c}=this.prepareFindParameters(r,i);if(n==null){s=this.findAllIn([e],f,c);if(s.length==0){return o}}else{s=n}o.searchPatternPositions.push(...Array.from(s,(e=>e.position)));const u=e.length-t.length;const h=new ArrayBuffer(this.view.length-s.length*u);const l=new Uint8Array(h);l.set(new Uint8Array(this.buffer,0,f));for(a=0;a<s.length;a++){const r=a==0?f:s[a-1].position;l.set(new Uint8Array(this.buffer,r,s[a].position-e.length-r),r-a*u);l.set(t.view,s[a].position-e.length-a*u);o.replacePatternPositions.push(s[a].position-e.length-a*u)}a--;l.set(new Uint8Array(this.buffer,s[a].position,this.length-s[a].position),s[a].position-e.length+t.length-a*u);this.buffer=h;this.view=new Uint8Array(this.buffer);o.status=1;return o}skipPatterns(e,t,r,i){const{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);let o=n;for(let t=0;t<e.length;t++){const r=e[t].length;const i=a?o-r:o;let f=true;for(let n=0;n<r;n++){if(this.view[n+i]!=e[t].view[n]){f=false;break}}if(f){t=-1;if(a){o-=r;if(o<=0)return o}else{o+=r;if(o>=n+s)return o}}}return o}skipNotPatterns(e,t,r,i){const{start:n,length:s,backward:a}=this.prepareFindParameters(t,r,i);let o=-1;for(let t=0;t<s;t++){for(let r=0;r<e.length;r++){const i=e[r].length;const s=a?n-t-i:n+t;let f=true;for(let t=0;t<i;t++){if(this.view[t+s]!=e[r].view[t]){f=false;break}}if(f){o=a?n-t:n+t;break}}if(o!=-1){break}}return o}prepareFindParameters(e=null,t=null,r=false){if(e===null){e=r?this.length:0}if(e>this.length){e=this.length}if(r){if(t===null){t=e}if(t>e){t=e}}else{if(t===null){t=this.length-e}if(t>this.length-e){t=this.length-e}}return{start:e,length:t,backward:r}}}const pow2_24=16777216;class SeqStream{constructor(e={}){this._stream=new ByteStream;this._length=0;this._start=0;this.backward=false;this.appendBlock=0;this.prevLength=0;this.prevStart=0;if("view"in e){this.stream=new ByteStream({view:e.view})}else if("buffer"in e){this.stream=new ByteStream({buffer:e.buffer})}else if("string"in e){this.stream=new ByteStream({string:e.string})}else if("hexstring"in e){this.stream=new ByteStream({hexstring:e.hexstring})}else if("stream"in e){this.stream=e.stream.slice()}else{this.stream=new ByteStream}if("backward"in e&&e.backward){this.backward=e.backward;this._start=this.stream.length}if("length"in e&&e.length>0){this._length=e.length}if("start"in e&&e.start&&e.start>0){this._start=e.start}if("appendBlock"in e&&e.appendBlock&&e.appendBlock>0){this.appendBlock=e.appendBlock}}set stream(e){this._stream=e;this.prevLength=this._length;this._length=e.length;this.prevStart=this._start;this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length;this._length=e}get length(){if(this.appendBlock){return this.start}return this._length}set start(e){if(e>this.stream.length)return;this.prevStart=this._start;this.prevLength=this._length;this._length-=this.backward?this._start-e:e-this._start;this._start=e}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart;this._length=this.prevLength}findPattern(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findPattern(e,this.start,this.length,this.backward);if(r==-1)return r;if(this.backward){if(r<this.start-e.length-t){return-1}}else{if(r>this.start+e.length+t){return-1}}this.start=r;return r}findFirstIn(e,t=null){if(t==null||t>this.length){t=this.length}const r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(r.id==-1)return r;if(this.backward){if(r.position<this.start-e[r.id].length-t){return{id:-1,position:this.backward?0:this.start+this.length}}}else{if(r.position>this.start+e[r.id].length+t){return{id:-1,position:this.backward?0:this.start+this.length}}}this.start=r.position;return r}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){if(t==null||t>this._length){t=this._length}const r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(r.left.id==-1&&r.right.id==-1){return r}if(this.backward){if(r.right.id!=-1){if(r.right.position<this._start-e[r.right.id].length-t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}else{if(r.left.id!=-1){if(r.left.position>this._start+e[r.left.id].length+t){return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ByteStream}}}}if(this.backward){if(r.left.id==-1){this.start=0}else{this.start=r.left.position}}else{if(r.right.id==-1){this.start=this._start+this._length}else{this.start=r.right.position}}return r}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,r=null){if(t==null||t>this._length){t=this._length}if(r==null||r>t){r=t}const i=this._stream.findFirstSequence(e,this._start,t,this.backward);if(i.value.length==0){return i}if(this.backward){if(i.position<this._start-i.value.length-r){return{position:-1,value:new ByteStream}}}else{if(i.position>this._start+i.value.length+r){return{position:-1,value:new ByteStream}}}this.start=i.position;return i}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,r=null){if(r==null||r>this.length){r=this.length}const i=this.backward?this.start-this.length:this.start;const n=this.stream.findPairedPatterns(e,t,i,this.length);if(n.length){if(this.backward){if(n[0].right<this.start-t.length-r){return[]}}else{if(n[0].left>this.start+e.length+r){return[]}}}return n}findPairedArrays(e,t,r=null){if(r==null||r>this.length){r=this.length}const i=this.backward?this.start-this.length:this.start;const n=this.stream.findPairedArrays(e,t,i,this.length);if(n.length){if(this.backward){if(n[0].right.position<this.start-t[n[0].right.id].length-r){return[]}}else{if(n[0].left.position>this.start+e[n[0].left.id].length+r){return[]}}}return n}replacePattern(e,t){const r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,r,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);this.start=t;return t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);if(t==-1)return-1;this.start=t;return t}append(e){this.beforeAppend(e.length);this._stream.view.set(e.view,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length);this._stream.view.set(e,this._start);this._length+=e.length*2;this.start=this._start+e.length;this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1);this._stream.view[this._start]=e;this._length+=2;this.start=this._start+1;this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]);const r=new Uint8Array(t.buffer);this.stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[2];this._stream.view[this._start+1]=r[1];this._stream.view[this._start+2]=r[0];this._length+=6;this.start=this._start+3;this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[1];this._stream.view[this._start+1]=r[0];this._length+=4;this.start=this._start+2;this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]);const r=new Uint8Array(t.buffer);this._stream.view[this._start]=r[3];this._stream.view[this._start+1]=r[2];this._stream.view[this._start+2]=r[1];this._stream.view[this._start+3]=r[0];this._length+=8;this.start=this._start+4;this.prevLength-=8}getBlock(e,t=true){if(this._length<=0){return new Uint8Array(0)}if(this._length<e){e=this._length}let r;if(this.backward){const t=this._stream.view.subarray(this._length-e,this._length);r=new Uint8Array(e);for(let i=0;i<e;i++){r[e-1-i]=t[i]}}else{r=this._stream.view.subarray(this._start,this._start+e)}if(t){this.start+=this.backward?-1*e:e}return r}getUint16(e=true){const t=this.getBlock(2,e);if(t.length<2)return 0;return t[0]<<8|t[1]}getInt16(e=true){const t=this.getUint16(e);const r=32768;if(t&r){return-(r-(t^r))}return t}getUint24(e=true){const t=this.getBlock(4,e);if(t.length<3)return 0;return t[0]<<16|t[1]<<8|t[2]}getUint32(e=true){const t=this.getBlock(4,e);if(t.length<4)return 0;return t[0]*pow2_24+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=true){const t=this.getUint32(e);const r=2147483648;if(t&r){return-(r-(t^r))}return t}beforeAppend(e){if(this._start+e>this._stream.length){if(e>this.appendBlock){this.appendBlock=e+SeqStream.APPEND_BLOCK}this._stream.realloc(this._stream.length+this.appendBlock)}}}SeqStream.APPEND_BLOCK=1e3;
/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 *
 * Author 2014-2019, Yury Strozhevsky
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 *
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 *
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */const EMPTY_BUFFER=new ArrayBuffer(0);const EMPTY_STRING="";class ArgumentError extends TypeError{constructor(){super(...arguments);this.name=ArgumentError.NAME}static isType(e,t){if(typeof t==="string"){if(t==="Array"&&Array.isArray(e)){return true}else if(t==="ArrayBuffer"&&e instanceof ArrayBuffer){return true}else if(t==="ArrayBufferView"&&ArrayBuffer.isView(e)){return true}else if(typeof e===t){return true}}else if(e instanceof t){return true}return false}static assert(e,t,...r){for(const t of r){if(this.isType(e,t)){return}}const i=r.map((e=>e instanceof Function&&"name"in e?e.name:`${e}`));throw new ArgumentError(`Parameter '${t}' is not of type ${i.length>1?`(${i.join(" or ")})`:i[0]}`)}}ArgumentError.NAME="ArgumentError";class ParameterError extends TypeError{constructor(e,t=null,r){super();this.name=ParameterError.NAME;this.field=e;if(t){this.target=t}if(r){this.message=r}else{this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:EMPTY_STRING}`}}static assert(...e){let t=null;let r;let i;if(typeof e[0]==="string"){t=e[0];r=e[1];i=e.slice(2)}else{r=e[0];i=e.slice(1)}ArgumentError.assert(r,"parameters","object");for(const e of i){const i=r[e];if(i===undefined||i===null){throw new ParameterError(e,t)}}}static assertEmpty(e,t,r){if(e===undefined||e===null){throw new ParameterError(t,r)}}}ParameterError.NAME="ParameterError";class AsnError extends Error{static assertSchema(e,t){if(!e.verified){throw new Error(`Object's schema was not verified against input data for ${t}`)}}static assert(e,t){if(e.offset===-1){throw new AsnError(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}}constructor(e){super(e);this.name="AsnError"}}class PkiObject{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=fromBER(e);AsnError.assert(t,this.name);try{return new this({schema:t.result})}catch(e){throw new AsnError(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(true)}return build.Convert.ToString(t.toBER(),e)}}PkiObject.CLASS_NAME="PkiObject";function stringPrep(e){let t=false;let r=EMPTY_STRING;const i=e.trim();for(let e=0;e<i.length;e++){if(i.charCodeAt(e)===32){if(t===false)t=true}else{if(t){r+=" ";t=false}r+=i[e]}}return r.toLowerCase()}const TYPE$5="type";const VALUE$6="value";class AttributeTypeAndValue$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$5,AttributeTypeAndValue$1.defaultValues(TYPE$5));this.value=getParametersValue(e,VALUE$6,AttributeTypeAndValue$1.defaultValues(VALUE$6));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$5:return EMPTY_STRING;case VALUE$6:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Any({name:t.value||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[TYPE$5,"typeValue"]);const t=compareSchema(e,e,AttributeTypeAndValue$1.schema({names:{type:TYPE$5,value:"typeValue"}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.value=t.result.typeValue}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),this.value]})}toJSON(){const e={type:this.type};if(Object.keys(this.value).length!==0){e.value=this.value.toJSON()}else{e.value=this.value}return e}isEqual(e){const t=[Utf8String.blockName(),BmpString.blockName(),UniversalString.blockName(),NumericString.blockName(),PrintableString.blockName(),TeletexString.blockName(),VideotexString.blockName(),IA5String.blockName(),GraphicString.blockName(),VisibleString.blockName(),GeneralString.blockName(),CharacterString.blockName()];if(e instanceof ArrayBuffer){return build.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView,e)}if(e.constructor.blockName()===AttributeTypeAndValue$1.blockName()){if(this.type!==e.type)return false;const r=[false,false];const i=this.value.constructor.blockName();for(const n of t){if(i===n){r[0]=true}if(e.value.constructor.blockName()===n){r[1]=true}}if(r[0]!==r[1]){return false}const n=r[0]&&r[1];if(n){const t=stringPrep(this.value.valueBlock.value);const r=stringPrep(e.value.valueBlock.value);if(t.localeCompare(r)!==0)return false}else{if(!build.BufferSourceConverter.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return false}return true}return false}}AttributeTypeAndValue$1.CLASS_NAME="AttributeTypeAndValue";const TYPE_AND_VALUES="typesAndValues";const VALUE_BEFORE_DECODE="valueBeforeDecode";const RDN="RDN";class RelativeDistinguishedNames extends PkiObject{constructor(e={}){super();this.typesAndValues=getParametersValue(e,TYPE_AND_VALUES,RelativeDistinguishedNames.defaultValues(TYPE_AND_VALUES));this.valueBeforeDecode=getParametersValue(e,VALUE_BEFORE_DECODE,RelativeDistinguishedNames.defaultValues(VALUE_BEFORE_DECODE));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE_AND_VALUES:return[];case VALUE_BEFORE_DECODE:return EMPTY_BUFFER;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE_AND_VALUES:return t.length===0;case VALUE_BEFORE_DECODE:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.repeatedSequence||EMPTY_STRING,value:new Set$1({value:[new Repeated({name:t.repeatedSet||EMPTY_STRING,value:AttributeTypeAndValue$1.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){clearProps(e,[RDN,TYPE_AND_VALUES]);const t=compareSchema(e,e,RelativeDistinguishedNames.schema({names:{blockName:RDN,repeatedSet:TYPE_AND_VALUES}}));AsnError.assertSchema(t,this.className);if(TYPE_AND_VALUES in t.result){this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new AttributeTypeAndValue$1({schema:e})))}this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0){return new Sequence({value:[new Set$1({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]})}const e=fromBER(this.valueBeforeDecode);AsnError.assert(e,"RelativeDistinguishedNames");if(!(e.result instanceof Sequence)){throw new Error("ASN.1 result should be SEQUENCE")}return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof RelativeDistinguishedNames){if(this.typesAndValues.length!==e.typesAndValues.length)return false;for(const[t,r]of this.typesAndValues.entries()){if(r.isEqual(e.typesAndValues[t])===false)return false}return true}if(e instanceof ArrayBuffer){return isEqualBuffer(this.valueBeforeDecode,e)}return false}}RelativeDistinguishedNames.CLASS_NAME="RelativeDistinguishedNames";const TYPE$4="type";const VALUE$5="value";function builtInStandardAttributes(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,value:[new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:1},name:r.country_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Constructed({optional:true,idBlock:{tagClass:2,tagNumber:2},name:r.administration_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},name:r.network_address||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},name:r.terminal_identifier||EMPTY_STRING,isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:2},name:r.private_domain_name||EMPTY_STRING,value:[new Choice({value:[new NumericString,new PrintableString]})]}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},name:r.organization_name||EMPTY_STRING,isHexOnly:true}),new Primitive({optional:true,name:r.numeric_user_identifier||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:4},isHexOnly:true}),new Constructed({optional:true,name:r.personal_name||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:5},value:[new Primitive({idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},isHexOnly:true}),new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:3},isHexOnly:true})]}),new Constructed({optional:true,name:r.organizational_unit_names||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6},value:[new Repeated({value:new PrintableString})]})]})}function builtInDomainDefinedAttributes(e=false){return new Sequence({optional:e,value:[new PrintableString,new PrintableString]})}function extensionAttributes(e=false){return new Set$1({optional:e,value:[new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:0},isHexOnly:true}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Any]})]})}class GeneralName$2 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$4,GeneralName$2.defaultValues(TYPE$4));this.value=getParametersValue(e,VALUE$5,GeneralName$2.defaultValues(VALUE$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$4:return 9;case VALUE$5:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$4:return t===GeneralName$2.defaultValues(e);case VALUE$5:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Choice({value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1,new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new Any]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||EMPTY_STRING,value:[builtInStandardAttributes(t.builtInStandardAttributes||{},false),builtInDomainDefinedAttributes(true),extensionAttributes(true)]}),new Constructed({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||EMPTY_STRING,value:[RelativeDistinguishedNames.schema(t.directoryName||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new Choice({value:[new TeletexString,new PrintableString,new UniversalString,new Utf8String,new BmpString]})]})]}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:6}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:7}}),new Primitive({name:t.blockName||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){clearProps(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=compareSchema(e,e,GeneralName$2.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));AsnError.assertSchema(t,this.className);this.type=t.result.blockName.idBlock.tagNumber;switch(this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=22;const r=e.toBER(false);const i=fromBER(r);AsnError.assert(i,"GeneralName value");this.value=i.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new RelativeDistinguishedNames({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new OctetString$1({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1;e.idBlock.tagNumber=6;const r=e.toBER(false);const i=fromBER(r);AsnError.assert(i,"GeneralName registeredID");this.value=i.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new Constructed({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new IA5String({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 4:return new Constructed({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}case 8:{const e=new ObjectIdentifier$1({value:this.value});e.idBlock.tagClass=3;e.idBlock.tagNumber=this.type;return e}default:return GeneralName$2.schema()}}toJSON(){const e={type:this.type,value:EMPTY_STRING};if(typeof this.value==="string")e.value=this.value;else{try{e.value=this.value.toJSON()}catch(e){}}return e}}GeneralName$2.CLASS_NAME="GeneralName";const ACCESS_METHOD="accessMethod";const ACCESS_LOCATION="accessLocation";const CLEAR_PROPS$1v=[ACCESS_METHOD,ACCESS_LOCATION];class AccessDescription$1 extends PkiObject{constructor(e={}){super();this.accessMethod=getParametersValue(e,ACCESS_METHOD,AccessDescription$1.defaultValues(ACCESS_METHOD));this.accessLocation=getParametersValue(e,ACCESS_LOCATION,AccessDescription$1.defaultValues(ACCESS_LOCATION));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_METHOD:return EMPTY_STRING;case ACCESS_LOCATION:return new GeneralName$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.accessMethod||EMPTY_STRING}),GeneralName$2.schema(t.accessLocation||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1v);const t=compareSchema(e,e,AccessDescription$1.schema({names:{accessMethod:ACCESS_METHOD,accessLocation:{names:{blockName:ACCESS_LOCATION}}}}));AsnError.assertSchema(t,this.className);this.accessMethod=t.result.accessMethod.valueBlock.toString();this.accessLocation=new GeneralName$2({schema:t.result.accessLocation})}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}AccessDescription$1.CLASS_NAME="AccessDescription";const ALGORITHM_ID="algorithmId";const ALGORITHM_PARAMS="algorithmParams";const ALGORITHM$2="algorithm";const PARAMS="params";const CLEAR_PROPS$1u=[ALGORITHM$2,PARAMS];class AlgorithmIdentifier$2 extends PkiObject{constructor(e={}){super();this.algorithmId=getParametersValue(e,ALGORITHM_ID,AlgorithmIdentifier$2.defaultValues(ALGORITHM_ID));if(ALGORITHM_PARAMS in e){this.algorithmParams=getParametersValue(e,ALGORITHM_PARAMS,AlgorithmIdentifier$2.defaultValues(ALGORITHM_PARAMS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALGORITHM_ID:return EMPTY_STRING;case ALGORITHM_PARAMS:return new Any;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ALGORITHM_ID:return t===EMPTY_STRING;case ALGORITHM_PARAMS:return t instanceof Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,optional:t.optional||false,value:[new ObjectIdentifier$1({name:t.algorithmIdentifier||EMPTY_STRING}),new Any({name:t.algorithmParams||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1u);const t=compareSchema(e,e,AlgorithmIdentifier$2.schema({names:{algorithmIdentifier:ALGORITHM$2,algorithmParams:PARAMS}}));AsnError.assertSchema(t,this.className);this.algorithmId=t.result.algorithm.valueBlock.toString();if(PARAMS in t.result){this.algorithmParams=t.result.params}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.algorithmId}));if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.push(this.algorithmParams)}return new Sequence({value:e})}toJSON(){const e={algorithmId:this.algorithmId};if(this.algorithmParams&&!(this.algorithmParams instanceof Any)){e.algorithmParams=this.algorithmParams.toJSON()}return e}isEqual(e){if(!(e instanceof AlgorithmIdentifier$2)){return false}if(this.algorithmId!==e.algorithmId){return false}if(this.algorithmParams){if(e.algorithmParams){return JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams)}return false}if(e.algorithmParams){return false}return true}}AlgorithmIdentifier$2.CLASS_NAME="AlgorithmIdentifier";const ALT_NAMES="altNames";const CLEAR_PROPS$1t=[ALT_NAMES];class AltName extends PkiObject{constructor(e={}){super();this.altNames=getParametersValue(e,ALT_NAMES,AltName.defaultValues(ALT_NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ALT_NAMES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.altNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1t);const t=compareSchema(e,e,AltName.schema({names:{altNames:ALT_NAMES}}));AsnError.assertSchema(t,this.className);if(ALT_NAMES in t.result){this.altNames=Array.from(t.result.altNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){return new Sequence({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}AltName.CLASS_NAME="AltName";const TYPE$3="type";const VALUES$1="values";const CLEAR_PROPS$1s=[TYPE$3,VALUES$1];class Attribute$3 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$3,Attribute$3.defaultValues(TYPE$3));this.values=getParametersValue(e,VALUES$1,Attribute$3.defaultValues(VALUES$1));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$3:return EMPTY_STRING;case VALUES$1:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TYPE$3:return t===EMPTY_STRING;case VALUES$1:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.type||EMPTY_STRING}),new Set$1({name:t.setName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:new Any})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1s);const t=compareSchema(e,e,Attribute$3.schema({names:{type:TYPE$3,values:VALUES$1}}));AsnError.assertSchema(t,this.className);this.type=t.result.type.valueBlock.toString();this.values=t.result.values}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.type}),new Set$1({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}Attribute$3.CLASS_NAME="Attribute";const NAMES="names";const GENERAL_NAMES="generalNames";class GeneralNames$2 extends PkiObject{constructor(e={}){super();this.names=getParametersValue(e,NAMES,GeneralNames$2.defaultValues(NAMES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,NAMES,{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.generalNames||EMPTY_STRING,value:GeneralName$2.schema()})]})}fromSchema(e){clearProps(e,[NAMES,GENERAL_NAMES]);const t=compareSchema(e,e,GeneralNames$2.schema({names:{blockName:NAMES,generalNames:GENERAL_NAMES}}));AsnError.assertSchema(t,this.className);this.names=Array.from(t.result.generalNames,(e=>new GeneralName$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}GeneralNames$2.CLASS_NAME="GeneralNames";const id_SubjectDirectoryAttributes="2.5.29.9";const id_PrivateKeyUsagePeriod="2.5.29.16";const id_SubjectAltName="2.5.29.17";const id_IssuerAltName="2.5.29.18";const id_BasicConstraints="2.5.29.19";const id_IssuingDistributionPoint="2.5.29.28";const id_CertificateIssuer="2.5.29.29";const id_NameConstraints="2.5.29.30";const id_CRLDistributionPoints="2.5.29.31";const id_FreshestCRL="2.5.29.46";const id_CertificatePolicies="2.5.29.32";const id_MicrosoftAppPolicies="1.3.6.1.4.1.311.21.10";const id_PolicyMappings="2.5.29.33";const id_AuthorityKeyIdentifier="2.5.29.35";const id_PolicyConstraints="2.5.29.36";const id_ExtKeyUsage="2.5.29.37";const id_AuthorityInfoAccess="1.3.6.1.5.5.7.1.1";const id_SubjectInfoAccess="1.3.6.1.5.5.7.1.11";const id_SignedCertificateTimestampList="1.3.6.1.4.1.11129.2.4.2";const id_MicrosoftCertTemplateV2="1.3.6.1.4.1.311.21.7";const id_MicrosoftCaVersion="1.3.6.1.4.1.311.21.1";const id_QCStatements="1.3.6.1.5.5.7.1.3";const KEY_IDENTIFIER$1="keyIdentifier";const AUTHORITY_CERT_ISSUER="authorityCertIssuer";const AUTHORITY_CERT_SERIAL_NUMBER="authorityCertSerialNumber";const CLEAR_PROPS$1q=[KEY_IDENTIFIER$1,AUTHORITY_CERT_ISSUER,AUTHORITY_CERT_SERIAL_NUMBER];class AuthorityKeyIdentifier$1 extends PkiObject{constructor(e={}){super();if(KEY_IDENTIFIER$1 in e){this.keyIdentifier=getParametersValue(e,KEY_IDENTIFIER$1,AuthorityKeyIdentifier$1.defaultValues(KEY_IDENTIFIER$1))}if(AUTHORITY_CERT_ISSUER in e){this.authorityCertIssuer=getParametersValue(e,AUTHORITY_CERT_ISSUER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_ISSUER))}if(AUTHORITY_CERT_SERIAL_NUMBER in e){this.authorityCertSerialNumber=getParametersValue(e,AUTHORITY_CERT_SERIAL_NUMBER,AuthorityKeyIdentifier$1.defaultValues(AUTHORITY_CERT_SERIAL_NUMBER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_IDENTIFIER$1:return new OctetString$1;case AUTHORITY_CERT_ISSUER:return[];case AUTHORITY_CERT_SERIAL_NUMBER:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.keyIdentifier||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.authorityCertIssuer||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Primitive({name:t.authorityCertSerialNumber||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1q);const t=compareSchema(e,e,AuthorityKeyIdentifier$1.schema({names:{keyIdentifier:KEY_IDENTIFIER$1,authorityCertIssuer:AUTHORITY_CERT_ISSUER,authorityCertSerialNumber:AUTHORITY_CERT_SERIAL_NUMBER}}));AsnError.assertSchema(t,this.className);if(KEY_IDENTIFIER$1 in t.result)this.keyIdentifier=new OctetString$1({valueHex:t.result.keyIdentifier.valueBlock.valueHex});if(AUTHORITY_CERT_ISSUER in t.result)this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new GeneralName$2({schema:e})));if(AUTHORITY_CERT_SERIAL_NUMBER in t.result)this.authorityCertSerialNumber=new Integer({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex})}toSchema(){const e=[];if(this.keyIdentifier){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView}))}if(this.authorityCertIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))}))}if(this.authorityCertSerialNumber){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.keyIdentifier){e.keyIdentifier=this.keyIdentifier.toJSON()}if(this.authorityCertIssuer){e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))}if(this.authorityCertSerialNumber){e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()}return e}}AuthorityKeyIdentifier$1.CLASS_NAME="AuthorityKeyIdentifier";const PATH_LENGTH_CONSTRAINT="pathLenConstraint";const CA="cA";class BasicConstraints$1 extends PkiObject{constructor(e={}){super();this.cA=getParametersValue(e,CA,false);if(PATH_LENGTH_CONSTRAINT in e){this.pathLenConstraint=getParametersValue(e,PATH_LENGTH_CONSTRAINT,0)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CA:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Boolean$1({optional:true,name:t.cA||EMPTY_STRING}),new Integer({optional:true,name:t.pathLenConstraint||EMPTY_STRING})]})}fromSchema(e){clearProps(e,[CA,PATH_LENGTH_CONSTRAINT]);const t=compareSchema(e,e,BasicConstraints$1.schema({names:{cA:CA,pathLenConstraint:PATH_LENGTH_CONSTRAINT}}));AsnError.assertSchema(t,this.className);if(CA in t.result){this.cA=t.result.cA.valueBlock.value}if(PATH_LENGTH_CONSTRAINT in t.result){if(t.result.pathLenConstraint.valueBlock.isHexOnly){this.pathLenConstraint=t.result.pathLenConstraint}else{this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec}}}toSchema(){const e=[];if(this.cA!==BasicConstraints$1.defaultValues(CA))e.push(new Boolean$1({value:this.cA}));if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.push(this.pathLenConstraint)}else{e.push(new Integer({value:this.pathLenConstraint}))}}return new Sequence({value:e})}toJSON(){const e={};if(this.cA!==BasicConstraints$1.defaultValues(CA)){e.cA=this.cA}if(PATH_LENGTH_CONSTRAINT in this){if(this.pathLenConstraint instanceof Integer){e.pathLenConstraint=this.pathLenConstraint.toJSON()}else{e.pathLenConstraint=this.pathLenConstraint}}return e}}BasicConstraints$1.CLASS_NAME="BasicConstraints";const CERTIFICATE_INDEX="certificateIndex";const KEY_INDEX="keyIndex";class CAVersion extends PkiObject{constructor(e={}){super();this.certificateIndex=getParametersValue(e,CERTIFICATE_INDEX,CAVersion.defaultValues(CERTIFICATE_INDEX));this.keyIndex=getParametersValue(e,KEY_INDEX,CAVersion.defaultValues(KEY_INDEX));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_INDEX:case KEY_INDEX:return 0;default:return super.defaultValues(e)}}static schema(){return new Integer}fromSchema(e){if(e.constructor.blockName()!==Integer.blockName()){throw new Error("Object's schema was not verified against input data for CAVersion")}let t=e.valueBlock.valueHex.slice(0);const r=new Uint8Array(t);switch(true){case t.byteLength<4:{const e=new ArrayBuffer(4);const i=new Uint8Array(e);i.set(r,4-t.byteLength);t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);const i=new Uint8Array(e);i.set(r.slice(0,4));t=e.slice(0)}break}const i=t.slice(0,2);const n=new Uint8Array(i);let s=n[0];n[0]=n[1];n[1]=s;const a=new Uint16Array(i);this.keyIndex=a[0];const o=t.slice(2);const f=new Uint8Array(o);s=f[0];f[0]=f[1];f[1]=s;const c=new Uint16Array(o);this.certificateIndex=c[0]}toSchema(){const e=new ArrayBuffer(2);const t=new Uint16Array(e);t[0]=this.certificateIndex;const r=new Uint8Array(e);let i=r[0];r[0]=r[1];r[1]=i;const n=new ArrayBuffer(2);const s=new Uint16Array(n);s[0]=this.keyIndex;const a=new Uint8Array(n);i=a[0];a[0]=a[1];a[1]=i;return new Integer({valueHex:utilConcatBuf(n,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}CAVersion.CLASS_NAME="CAVersion";const POLICY_QUALIFIER_ID="policyQualifierId";const QUALIFIER="qualifier";const CLEAR_PROPS$1p=[POLICY_QUALIFIER_ID,QUALIFIER];class PolicyQualifierInfo$1 extends PkiObject{constructor(e={}){super();this.policyQualifierId=getParametersValue(e,POLICY_QUALIFIER_ID,PolicyQualifierInfo$1.defaultValues(POLICY_QUALIFIER_ID));this.qualifier=getParametersValue(e,QUALIFIER,PolicyQualifierInfo$1.defaultValues(QUALIFIER));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_QUALIFIER_ID:return EMPTY_STRING;case QUALIFIER:return new Any;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyQualifierId||EMPTY_STRING}),new Any({name:t.qualifier||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1p);const t=compareSchema(e,e,PolicyQualifierInfo$1.schema({names:{policyQualifierId:POLICY_QUALIFIER_ID,qualifier:QUALIFIER}}));AsnError.assertSchema(t,this.className);this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString();this.qualifier=t.result.qualifier}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}PolicyQualifierInfo$1.CLASS_NAME="PolicyQualifierInfo";const POLICY_IDENTIFIER="policyIdentifier";const POLICY_QUALIFIERS="policyQualifiers";const CLEAR_PROPS$1o=[POLICY_IDENTIFIER,POLICY_QUALIFIERS];class PolicyInformation$1 extends PkiObject{constructor(e={}){super();this.policyIdentifier=getParametersValue(e,POLICY_IDENTIFIER,PolicyInformation$1.defaultValues(POLICY_IDENTIFIER));if(POLICY_QUALIFIERS in e){this.policyQualifiers=getParametersValue(e,POLICY_QUALIFIERS,PolicyInformation$1.defaultValues(POLICY_QUALIFIERS))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case POLICY_IDENTIFIER:return EMPTY_STRING;case POLICY_QUALIFIERS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.policyIdentifier||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.policyQualifiers||EMPTY_STRING,value:PolicyQualifierInfo$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1o);const t=compareSchema(e,e,PolicyInformation$1.schema({names:{policyIdentifier:POLICY_IDENTIFIER,policyQualifiers:POLICY_QUALIFIERS}}));AsnError.assertSchema(t,this.className);this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString();if(POLICY_QUALIFIERS in t.result){this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new PolicyQualifierInfo$1({schema:e})))}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.policyIdentifier}));if(this.policyQualifiers){e.push(new Sequence({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};if(this.policyQualifiers)e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()));return e}}PolicyInformation$1.CLASS_NAME="PolicyInformation";const CERTIFICATE_POLICIES="certificatePolicies";const CLEAR_PROPS$1n=[CERTIFICATE_POLICIES];class CertificatePolicies$1 extends PkiObject{constructor(e={}){super();this.certificatePolicies=getParametersValue(e,CERTIFICATE_POLICIES,CertificatePolicies$1.defaultValues(CERTIFICATE_POLICIES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CERTIFICATE_POLICIES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.certificatePolicies||EMPTY_STRING,value:PolicyInformation$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1n);const t=compareSchema(e,e,CertificatePolicies$1.schema({names:{certificatePolicies:CERTIFICATE_POLICIES}}));AsnError.assertSchema(t,this.className);this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new PolicyInformation$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}CertificatePolicies$1.CLASS_NAME="CertificatePolicies";const TEMPLATE_ID="templateID";const TEMPLATE_MAJOR_VERSION="templateMajorVersion";const TEMPLATE_MINOR_VERSION="templateMinorVersion";const CLEAR_PROPS$1m=[TEMPLATE_ID,TEMPLATE_MAJOR_VERSION,TEMPLATE_MINOR_VERSION];class CertificateTemplate extends PkiObject{constructor(e={}){super();this.templateID=getParametersValue(e,TEMPLATE_ID,CertificateTemplate.defaultValues(TEMPLATE_ID));if(TEMPLATE_MAJOR_VERSION in e){this.templateMajorVersion=getParametersValue(e,TEMPLATE_MAJOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MAJOR_VERSION))}if(TEMPLATE_MINOR_VERSION in e){this.templateMinorVersion=getParametersValue(e,TEMPLATE_MINOR_VERSION,CertificateTemplate.defaultValues(TEMPLATE_MINOR_VERSION))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TEMPLATE_ID:return EMPTY_STRING;case TEMPLATE_MAJOR_VERSION:case TEMPLATE_MINOR_VERSION:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.templateID||EMPTY_STRING}),new Integer({name:t.templateMajorVersion||EMPTY_STRING,optional:true}),new Integer({name:t.templateMinorVersion||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1m);const t=compareSchema(e,e,CertificateTemplate.schema({names:{templateID:TEMPLATE_ID,templateMajorVersion:TEMPLATE_MAJOR_VERSION,templateMinorVersion:TEMPLATE_MINOR_VERSION}}));AsnError.assertSchema(t,this.className);this.templateID=t.result.templateID.valueBlock.toString();if(TEMPLATE_MAJOR_VERSION in t.result){this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec}if(TEMPLATE_MINOR_VERSION in t.result){this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec}}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.templateID}));if(TEMPLATE_MAJOR_VERSION in this){e.push(new Integer({value:this.templateMajorVersion}))}if(TEMPLATE_MINOR_VERSION in this){e.push(new Integer({value:this.templateMinorVersion}))}return new Sequence({value:e})}toJSON(){const e={templateID:this.templateID};if(TEMPLATE_MAJOR_VERSION in this)e.templateMajorVersion=this.templateMajorVersion;if(TEMPLATE_MINOR_VERSION in this)e.templateMinorVersion=this.templateMinorVersion;return e}}const DISTRIBUTION_POINT$1="distributionPoint";const DISTRIBUTION_POINT_NAMES$1="distributionPointNames";const REASONS="reasons";const CRL_ISSUER="cRLIssuer";const CRL_ISSUER_NAMES="cRLIssuerNames";const CLEAR_PROPS$1l=[DISTRIBUTION_POINT$1,DISTRIBUTION_POINT_NAMES$1,REASONS,CRL_ISSUER,CRL_ISSUER_NAMES];class DistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT$1 in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT$1,DistributionPoint$1.defaultValues(DISTRIBUTION_POINT$1))}if(REASONS in e){this.reasons=getParametersValue(e,REASONS,DistributionPoint$1.defaultValues(REASONS))}if(CRL_ISSUER in e){this.cRLIssuer=getParametersValue(e,CRL_ISSUER,DistributionPoint$1.defaultValues(CRL_ISSUER))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT$1:return[];case REASONS:return new BitString$1;case CRL_ISSUER:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.reasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Constructed({name:t.cRLIssuer||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2},value:[new Repeated({name:t.cRLIssuerNames||EMPTY_STRING,value:GeneralName$2.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1l);const t=compareSchema(e,e,DistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT$1,distributionPointNames:DISTRIBUTION_POINT_NAMES$1,reasons:REASONS,cRLIssuer:CRL_ISSUER,cRLIssuerNames:CRL_ISSUER_NAMES}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT$1 in t.result){if(t.result.distributionPoint.idBlock.tagNumber===0){this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})))}if(t.result.distributionPoint.idBlock.tagNumber===1){this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}}if(REASONS in t.result){this.reasons=new BitString$1({valueHex:t.result.reasons.valueBlock.valueHex})}if(CRL_ISSUER in t.result){this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new GeneralName$2({schema:e})))}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]})}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.reasons){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView}))}if(this.cRLIssuer){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.reasons){e.reasons=this.reasons.toJSON()}if(this.cRLIssuer){e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))}return e}}DistributionPoint$1.CLASS_NAME="DistributionPoint";const DISTRIBUTION_POINTS="distributionPoints";const CLEAR_PROPS$1k=[DISTRIBUTION_POINTS];class CRLDistributionPoints$1 extends PkiObject{constructor(e={}){super();this.distributionPoints=getParametersValue(e,DISTRIBUTION_POINTS,CRLDistributionPoints$1.defaultValues(DISTRIBUTION_POINTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINTS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.distributionPoints||EMPTY_STRING,value:DistributionPoint$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1k);const t=compareSchema(e,e,CRLDistributionPoints$1.schema({names:{distributionPoints:DISTRIBUTION_POINTS}}));AsnError.assertSchema(t,this.className);this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new DistributionPoint$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}CRLDistributionPoints$1.CLASS_NAME="CRLDistributionPoints";const KEY_PURPOSES="keyPurposes";const CLEAR_PROPS$1j=[KEY_PURPOSES];class ExtKeyUsage extends PkiObject{constructor(e={}){super();this.keyPurposes=getParametersValue(e,KEY_PURPOSES,ExtKeyUsage.defaultValues(KEY_PURPOSES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_PURPOSES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.keyPurposes||EMPTY_STRING,value:new ObjectIdentifier$1})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1j);const t=compareSchema(e,e,ExtKeyUsage.schema({names:{keyPurposes:KEY_PURPOSES}}));AsnError.assertSchema(t,this.className);this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new Sequence({value:Array.from(this.keyPurposes,(e=>new ObjectIdentifier$1({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}ExtKeyUsage.CLASS_NAME="ExtKeyUsage";const ACCESS_DESCRIPTIONS="accessDescriptions";class InfoAccess extends PkiObject{constructor(e={}){super();this.accessDescriptions=getParametersValue(e,ACCESS_DESCRIPTIONS,InfoAccess.defaultValues(ACCESS_DESCRIPTIONS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ACCESS_DESCRIPTIONS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.accessDescriptions||EMPTY_STRING,value:AccessDescription$1.schema()})]})}fromSchema(e){clearProps(e,[ACCESS_DESCRIPTIONS]);const t=compareSchema(e,e,InfoAccess.schema({names:{accessDescriptions:ACCESS_DESCRIPTIONS}}));AsnError.assertSchema(t,this.className);this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new AccessDescription$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}InfoAccess.CLASS_NAME="InfoAccess";const DISTRIBUTION_POINT="distributionPoint";const DISTRIBUTION_POINT_NAMES="distributionPointNames";const ONLY_CONTAINS_USER_CERTS="onlyContainsUserCerts";const ONLY_CONTAINS_CA_CERTS="onlyContainsCACerts";const ONLY_SOME_REASON="onlySomeReasons";const INDIRECT_CRL="indirectCRL";const ONLY_CONTAINS_ATTRIBUTE_CERTS="onlyContainsAttributeCerts";const CLEAR_PROPS$1i=[DISTRIBUTION_POINT,DISTRIBUTION_POINT_NAMES,ONLY_CONTAINS_USER_CERTS,ONLY_CONTAINS_CA_CERTS,ONLY_SOME_REASON,INDIRECT_CRL,ONLY_CONTAINS_ATTRIBUTE_CERTS];class IssuingDistributionPoint$1 extends PkiObject{constructor(e={}){super();if(DISTRIBUTION_POINT in e){this.distributionPoint=getParametersValue(e,DISTRIBUTION_POINT,IssuingDistributionPoint$1.defaultValues(DISTRIBUTION_POINT))}this.onlyContainsUserCerts=getParametersValue(e,ONLY_CONTAINS_USER_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS));this.onlyContainsCACerts=getParametersValue(e,ONLY_CONTAINS_CA_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS));if(ONLY_SOME_REASON in e){this.onlySomeReasons=getParametersValue(e,ONLY_SOME_REASON,IssuingDistributionPoint$1.defaultValues(ONLY_SOME_REASON))}this.indirectCRL=getParametersValue(e,INDIRECT_CRL,IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL));this.onlyContainsAttributeCerts=getParametersValue(e,ONLY_CONTAINS_ATTRIBUTE_CERTS,IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case DISTRIBUTION_POINT:return[];case ONLY_CONTAINS_USER_CERTS:return false;case ONLY_CONTAINS_CA_CERTS:return false;case ONLY_SOME_REASON:return 0;case INDIRECT_CRL:return false;case ONLY_CONTAINS_ATTRIBUTE_CERTS:return false;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Choice({value:[new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.distributionPointNames||EMPTY_STRING,value:GeneralName$2.schema()})]}),new Constructed({name:t.distributionPoint||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:1},value:RelativeDistinguishedNames.schema().valueBlock.value})]})]}),new Primitive({name:t.onlyContainsUserCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.onlyContainsCACerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Primitive({name:t.onlySomeReasons||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:3}}),new Primitive({name:t.indirectCRL||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:4}}),new Primitive({name:t.onlyContainsAttributeCerts||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1i);const t=compareSchema(e,e,IssuingDistributionPoint$1.schema({names:{distributionPoint:DISTRIBUTION_POINT,distributionPointNames:DISTRIBUTION_POINT_NAMES,onlyContainsUserCerts:ONLY_CONTAINS_USER_CERTS,onlyContainsCACerts:ONLY_CONTAINS_CA_CERTS,onlySomeReasons:ONLY_SOME_REASON,indirectCRL:INDIRECT_CRL,onlyContainsAttributeCerts:ONLY_CONTAINS_ATTRIBUTE_CERTS}}));AsnError.assertSchema(t,this.className);if(DISTRIBUTION_POINT in t.result){switch(true){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new GeneralName$2({schema:e})));break;case t.result.distributionPoint.idBlock.tagNumber===1:{this.distributionPoint=new RelativeDistinguishedNames({schema:new Sequence({value:t.result.distributionPoint.valueBlock.value})})}break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}}if(ONLY_CONTAINS_USER_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=e[0]!==0}if(ONLY_CONTAINS_CA_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=e[0]!==0}if(ONLY_SOME_REASON in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(INDIRECT_CRL in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=e[0]!==0}if(ONLY_CONTAINS_ATTRIBUTE_CERTS in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=e[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;if(this.distributionPoint instanceof Array){t=new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))})}else{t=this.distributionPoint.toSchema();t.idBlock.tagClass=3;t.idBlock.tagNumber=1}e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer}))}if(this.onlySomeReasons!==undefined){const t=new ArrayBuffer(1);const r=new Uint8Array(t);r[0]=this.onlySomeReasons;e.push(new Primitive({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer}))}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer}))}return new Sequence({value:e})}toJSON(){const e={};if(this.distributionPoint){if(this.distributionPoint instanceof Array){e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON()))}else{e.distributionPoint=this.distributionPoint.toJSON()}}if(this.onlyContainsUserCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_USER_CERTS)){e.onlyContainsUserCerts=this.onlyContainsUserCerts}if(this.onlyContainsCACerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_CA_CERTS)){e.onlyContainsCACerts=this.onlyContainsCACerts}if(ONLY_SOME_REASON in this){e.onlySomeReasons=this.onlySomeReasons}if(this.indirectCRL!==IssuingDistributionPoint$1.defaultValues(INDIRECT_CRL)){e.indirectCRL=this.indirectCRL}if(this.onlyContainsAttributeCerts!==IssuingDistributionPoint$1.defaultValues(ONLY_CONTAINS_ATTRIBUTE_CERTS)){e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts}return e}}IssuingDistributionPoint$1.CLASS_NAME="IssuingDistributionPoint";const BASE="base";const MINIMUM="minimum";const MAXIMUM="maximum";const CLEAR_PROPS$1h=[BASE,MINIMUM,MAXIMUM];class GeneralSubtree$1 extends PkiObject{constructor(e={}){super();this.base=getParametersValue(e,BASE,GeneralSubtree$1.defaultValues(BASE));this.minimum=getParametersValue(e,MINIMUM,GeneralSubtree$1.defaultValues(MINIMUM));if(MAXIMUM in e){this.maximum=getParametersValue(e,MAXIMUM,GeneralSubtree$1.defaultValues(MAXIMUM))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case BASE:return new GeneralName$2;case MINIMUM:return 0;case MAXIMUM:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[GeneralName$2.schema(t.base||{}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.minimum||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Integer({name:t.maximum||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1h);const t=compareSchema(e,e,GeneralSubtree$1.schema({names:{base:{names:{blockName:BASE}},minimum:MINIMUM,maximum:MAXIMUM}}));AsnError.assertSchema(t,this.className);this.base=new GeneralName$2({schema:t.result.base});if(MINIMUM in t.result){if(t.result.minimum.valueBlock.isHexOnly)this.minimum=t.result.minimum;else this.minimum=t.result.minimum.valueBlock.valueDec}if(MAXIMUM in t.result){if(t.result.maximum.valueBlock.isHexOnly)this.maximum=t.result.maximum;else this.maximum=t.result.maximum.valueBlock.valueDec}}toSchema(){const e=[];e.push(this.base.toSchema());if(this.minimum!==0){let t=0;if(this.minimum instanceof Integer){t=this.minimum}else{t=new Integer({value:this.minimum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(MAXIMUM in this){let t=0;if(this.maximum instanceof Integer){t=this.maximum}else{t=new Integer({value:this.maximum})}e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new Sequence({value:e})}toJSON(){const e={base:this.base.toJSON()};if(this.minimum!==0){if(typeof this.minimum==="number"){e.minimum=this.minimum}else{e.minimum=this.minimum.toJSON()}}if(this.maximum!==undefined){if(typeof this.maximum==="number"){e.maximum=this.maximum}else{e.maximum=this.maximum.toJSON()}}return e}}GeneralSubtree$1.CLASS_NAME="GeneralSubtree";const PERMITTED_SUBTREES="permittedSubtrees";const EXCLUDED_SUBTREES="excludedSubtrees";const CLEAR_PROPS$1g=[PERMITTED_SUBTREES,EXCLUDED_SUBTREES];class NameConstraints$1 extends PkiObject{constructor(e={}){super();if(PERMITTED_SUBTREES in e){this.permittedSubtrees=getParametersValue(e,PERMITTED_SUBTREES,NameConstraints$1.defaultValues(PERMITTED_SUBTREES))}if(EXCLUDED_SUBTREES in e){this.excludedSubtrees=getParametersValue(e,EXCLUDED_SUBTREES,NameConstraints$1.defaultValues(EXCLUDED_SUBTREES))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PERMITTED_SUBTREES:case EXCLUDED_SUBTREES:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.permittedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new Repeated({name:t.excludedSubtrees||EMPTY_STRING,value:GeneralSubtree$1.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1g);const t=compareSchema(e,e,NameConstraints$1.schema({names:{permittedSubtrees:PERMITTED_SUBTREES,excludedSubtrees:EXCLUDED_SUBTREES}}));AsnError.assertSchema(t,this.className);if(PERMITTED_SUBTREES in t.result)this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new GeneralSubtree$1({schema:e})));if(EXCLUDED_SUBTREES in t.result)this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new GeneralSubtree$1({schema:e})))}toSchema(){const e=[];if(this.permittedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))}))}if(this.excludedSubtrees){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={};if(this.permittedSubtrees){e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))}if(this.excludedSubtrees){e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))}return e}}NameConstraints$1.CLASS_NAME="NameConstraints";const REQUIRE_EXPLICIT_POLICY="requireExplicitPolicy";const INHIBIT_POLICY_MAPPING="inhibitPolicyMapping";const CLEAR_PROPS$1f=[REQUIRE_EXPLICIT_POLICY,INHIBIT_POLICY_MAPPING];class PolicyConstraints$1 extends PkiObject{constructor(e={}){super();if(REQUIRE_EXPLICIT_POLICY in e){this.requireExplicitPolicy=getParametersValue(e,REQUIRE_EXPLICIT_POLICY,PolicyConstraints$1.defaultValues(REQUIRE_EXPLICIT_POLICY))}if(INHIBIT_POLICY_MAPPING in e){this.inhibitPolicyMapping=getParametersValue(e,INHIBIT_POLICY_MAPPING,PolicyConstraints$1.defaultValues(INHIBIT_POLICY_MAPPING))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case REQUIRE_EXPLICIT_POLICY:return 0;case INHIBIT_POLICY_MAPPING:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.requireExplicitPolicy||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.inhibitPolicyMapping||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1f);const t=compareSchema(e,e,PolicyConstraints$1.schema({names:{requireExplicitPolicy:REQUIRE_EXPLICIT_POLICY,inhibitPolicyMapping:INHIBIT_POLICY_MAPPING}}));AsnError.assertSchema(t,this.className);if(REQUIRE_EXPLICIT_POLICY in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const i=fromBER(r);AsnError.assert(i,"Integer");this.requireExplicitPolicy=i.result.valueBlock.valueDec}if(INHIBIT_POLICY_MAPPING in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1;e.idBlock.tagNumber=2;const r=e.toBER(false);const i=fromBER(r);AsnError.assert(i,"Integer");this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if(REQUIRE_EXPLICIT_POLICY in this){const t=new Integer({value:this.requireExplicitPolicy});t.idBlock.tagClass=3;t.idBlock.tagNumber=0;e.push(t)}if(INHIBIT_POLICY_MAPPING in this){const t=new Integer({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3;t.idBlock.tagNumber=1;e.push(t)}return new Sequence({value:e})}toJSON(){const e={};if(REQUIRE_EXPLICIT_POLICY in this){e.requireExplicitPolicy=this.requireExplicitPolicy}if(INHIBIT_POLICY_MAPPING in this){e.inhibitPolicyMapping=this.inhibitPolicyMapping}return e}}PolicyConstraints$1.CLASS_NAME="PolicyConstraints";const ISSUER_DOMAIN_POLICY="issuerDomainPolicy";const SUBJECT_DOMAIN_POLICY="subjectDomainPolicy";const CLEAR_PROPS$1e=[ISSUER_DOMAIN_POLICY,SUBJECT_DOMAIN_POLICY];class PolicyMapping$1 extends PkiObject{constructor(e={}){super();this.issuerDomainPolicy=getParametersValue(e,ISSUER_DOMAIN_POLICY,PolicyMapping$1.defaultValues(ISSUER_DOMAIN_POLICY));this.subjectDomainPolicy=getParametersValue(e,SUBJECT_DOMAIN_POLICY,PolicyMapping$1.defaultValues(SUBJECT_DOMAIN_POLICY));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ISSUER_DOMAIN_POLICY:return EMPTY_STRING;case SUBJECT_DOMAIN_POLICY:return EMPTY_STRING;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.issuerDomainPolicy||EMPTY_STRING}),new ObjectIdentifier$1({name:t.subjectDomainPolicy||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1e);const t=compareSchema(e,e,PolicyMapping$1.schema({names:{issuerDomainPolicy:ISSUER_DOMAIN_POLICY,subjectDomainPolicy:SUBJECT_DOMAIN_POLICY}}));AsnError.assertSchema(t,this.className);this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString();this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new Sequence({value:[new ObjectIdentifier$1({value:this.issuerDomainPolicy}),new ObjectIdentifier$1({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}PolicyMapping$1.CLASS_NAME="PolicyMapping";const MAPPINGS="mappings";const CLEAR_PROPS$1d=[MAPPINGS];class PolicyMappings$1 extends PkiObject{constructor(e={}){super();this.mappings=getParametersValue(e,MAPPINGS,PolicyMappings$1.defaultValues(MAPPINGS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MAPPINGS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.mappings||EMPTY_STRING,value:PolicyMapping$1.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1d);const t=compareSchema(e,e,PolicyMappings$1.schema({names:{mappings:MAPPINGS}}));AsnError.assertSchema(t,this.className);this.mappings=Array.from(t.result.mappings,(e=>new PolicyMapping$1({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}PolicyMappings$1.CLASS_NAME="PolicyMappings";const NOT_BEFORE$1="notBefore";const NOT_AFTER$1="notAfter";const CLEAR_PROPS$1c=[NOT_BEFORE$1,NOT_AFTER$1];class PrivateKeyUsagePeriod$1 extends PkiObject{constructor(e={}){super();if(NOT_BEFORE$1 in e){this.notBefore=getParametersValue(e,NOT_BEFORE$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_BEFORE$1))}if(NOT_AFTER$1 in e){this.notAfter=getParametersValue(e,NOT_AFTER$1,PrivateKeyUsagePeriod$1.defaultValues(NOT_AFTER$1))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case NOT_BEFORE$1:return new Date;case NOT_AFTER$1:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Primitive({name:t.notBefore||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:0}}),new Primitive({name:t.notAfter||EMPTY_STRING,optional:true,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1c);const t=compareSchema(e,e,PrivateKeyUsagePeriod$1.schema({names:{notBefore:NOT_BEFORE$1,notAfter:NOT_AFTER$1}}));AsnError.assertSchema(t,this.className);if(NOT_BEFORE$1 in t.result){const e=new GeneralizedTime;e.fromBuffer(t.result.notBefore.valueBlock.valueHex);this.notBefore=e.toDate()}if(NOT_AFTER$1 in t.result){const e=new GeneralizedTime({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex);this.notAfter=e.toDate()}}toSchema(){const e=[];if(NOT_BEFORE$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:0},valueHex:new GeneralizedTime({valueDate:this.notBefore}).valueBlock.valueHexView}))}if(NOT_AFTER$1 in this){e.push(new Primitive({idBlock:{tagClass:3,tagNumber:1},valueHex:new GeneralizedTime({valueDate:this.notAfter}).valueBlock.valueHexView}))}return new Sequence({value:e})}toJSON(){const e={};if(this.notBefore){e.notBefore=this.notBefore}if(this.notAfter){e.notAfter=this.notAfter}return e}}PrivateKeyUsagePeriod$1.CLASS_NAME="PrivateKeyUsagePeriod";const ID="id";const TYPE$2="type";const VALUES="values";const QC_STATEMENT_CLEAR_PROPS=[ID,TYPE$2];const QC_STATEMENTS_CLEAR_PROPS=[VALUES];class QCStatement extends PkiObject{constructor(e={}){super();this.id=getParametersValue(e,ID,QCStatement.defaultValues(ID));if(TYPE$2 in e){this.type=getParametersValue(e,TYPE$2,QCStatement.defaultValues(TYPE$2))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ID:return EMPTY_STRING;case TYPE$2:return new Null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ID:return t===EMPTY_STRING;case TYPE$2:return t instanceof Null;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.id||EMPTY_STRING}),new Any({name:t.type||EMPTY_STRING,optional:true})]})}fromSchema(e){clearProps(e,QC_STATEMENT_CLEAR_PROPS);const t=compareSchema(e,e,QCStatement.schema({names:{id:ID,type:TYPE$2}}));AsnError.assertSchema(t,this.className);this.id=t.result.id.valueBlock.toString();if(TYPE$2 in t.result)this.type=t.result.type}toSchema(){const e=[new ObjectIdentifier$1({value:this.id})];if(TYPE$2 in this)e.push(this.type);return new Sequence({value:e})}toJSON(){const e={id:this.id};if(this.type){e.type=this.type.toJSON()}return e}}QCStatement.CLASS_NAME="QCStatement";class QCStatements extends PkiObject{constructor(e={}){super();this.values=getParametersValue(e,VALUES,QCStatements.defaultValues(VALUES));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VALUES:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VALUES:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.values||EMPTY_STRING,value:QCStatement.schema(t.value||{})})]})}fromSchema(e){clearProps(e,QC_STATEMENTS_CLEAR_PROPS);const t=compareSchema(e,e,QCStatements.schema({names:{values:VALUES}}));AsnError.assertSchema(t,this.className);this.values=Array.from(t.result.values,(e=>new QCStatement({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}QCStatements.CLASS_NAME="QCStatements";var _a$1;class ECNamedCurves{static register(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}_a$1=ECNamedCurves;ECNamedCurves.namedCurves={};(()=>{_a$1.register("P-256","1.2.840.10045.3.1.7",32);_a$1.register("P-384","1.3.132.0.34",48);_a$1.register("P-521","1.3.132.0.35",66);_a$1.register("K-256","1.3.132.0.10",32);_a$1.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32);_a$1.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48);_a$1.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)})();const X="x";const Y="y";const NAMED_CURVE$1="namedCurve";class ECPublicKey extends PkiObject{constructor(e={}){super();this.x=getParametersValue(e,X,ECPublicKey.defaultValues(X));this.y=getParametersValue(e,Y,ECPublicKey.defaultValues(Y));this.namedCurve=getParametersValue(e,NAMED_CURVE$1,ECPublicKey.defaultValues(NAMED_CURVE$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case X:case Y:return EMPTY_BUFFER;case NAMED_CURVE$1:return EMPTY_STRING;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case X:case Y:return t instanceof ArrayBuffer&&isEqualBuffer(t,ECPublicKey.defaultValues(e));case NAMED_CURVE$1:return typeof t==="string"&&t===ECPublicKey.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new RawData}fromSchema(e){const t=build.BufferSourceConverter.toUint8Array(e);if(t[0]!==4){throw new Error("Object's schema was not verified against input data for ECPublicKey")}const r=ECNamedCurves.find(this.namedCurve);if(!r){throw new Error(`Incorrect curve OID: ${this.namedCurve}`)}const i=r.size;if(t.byteLength!==i*2+1){throw new Error("Object's schema was not verified against input data for ECPublicKey")}this.namedCurve=r.name;this.x=t.slice(1,i+1).buffer;this.y=t.slice(1+i,i*2+1).buffer}toSchema(){return new RawData({data:utilConcatBuf(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=ECNamedCurves.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:toBase64(arrayBufferToString(this.x),true,true,false),y:toBase64(arrayBufferToString(this.y),true,true,false)}}fromJSON(e){ParameterError.assert("json",e,"crv","x","y");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const i=stringToArrayBuffer(fromBase64(e.x,true));if(i.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x);const r=new Uint8Array(i);e.set(r,1)}else{this.x=i.slice(0,t)}const n=stringToArrayBuffer(fromBase64(e.y,true));if(n.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y);const r=new Uint8Array(n);e.set(r,1)}else{this.y=n.slice(0,t)}}}ECPublicKey.CLASS_NAME="ECPublicKey";const MODULUS$1="modulus";const PUBLIC_EXPONENT$1="publicExponent";const CLEAR_PROPS$1b=[MODULUS$1,PUBLIC_EXPONENT$1];class RSAPublicKey$1 extends PkiObject{constructor(e={}){super();this.modulus=getParametersValue(e,MODULUS$1,RSAPublicKey$1.defaultValues(MODULUS$1));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT$1,RSAPublicKey$1.defaultValues(PUBLIC_EXPONENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case MODULUS$1:return new Integer;case PUBLIC_EXPONENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1b);const t=compareSchema(e,e,RSAPublicKey$1.schema({names:{modulus:MODULUS$1,publicExponent:PUBLIC_EXPONENT$1}}));AsnError.assertSchema(t,this.className);this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent}toSchema(){return new Sequence({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:build.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),e:build.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"n","e");const t=stringToArrayBuffer(fromBase64(e.n,true));this.modulus=new Integer({valueHex:t.slice(0,Math.pow(2,nearestPowerOf2(t.byteLength)))});this.publicExponent=new Integer({valueHex:stringToArrayBuffer(fromBase64(e.e,true)).slice(0,3)})}}RSAPublicKey$1.CLASS_NAME="RSAPublicKey";const ALGORITHM$1="algorithm";const SUBJECT_PUBLIC_KEY="subjectPublicKey";const CLEAR_PROPS$1a=[ALGORITHM$1,SUBJECT_PUBLIC_KEY];class PublicKeyInfo$1 extends PkiObject{constructor(e={}){super();this.algorithm=getParametersValue(e,ALGORITHM$1,PublicKeyInfo$1.defaultValues(ALGORITHM$1));this.subjectPublicKey=getParametersValue(e,SUBJECT_PUBLIC_KEY,PublicKeyInfo$1.defaultValues(SUBJECT_PUBLIC_KEY));const t=getParametersValue(e,"parsedKey",null);if(t){this.parsedKey=t}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}get parsedKey(){if(this._parsedKey===undefined){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm){if(this.algorithm.algorithmParams.constructor.blockName()===ObjectIdentifier$1.blockName()){try{this._parsedKey=new ECPublicKey({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){console.warn(e)}}}break;case"1.2.840.113549.1.1.1":{const e=fromBER(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1){try{this._parsedKey=new RSAPublicKey$1({schema:e.result})}catch(e){}}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||undefined}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case ALGORITHM$1:return new AlgorithmIdentifier$2;case SUBJECT_PUBLIC_KEY:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.algorithm||{}),new BitString$1({name:t.subjectPublicKey||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$1a);const t=compareSchema(e,e,PublicKeyInfo$1.schema({names:{algorithm:{names:{blockName:ALGORITHM$1}},subjectPublicKey:SUBJECT_PUBLIC_KEY}}));AsnError.assertSchema(t,this.className);this.algorithm=new AlgorithmIdentifier$2({schema:t.result.algorithm});this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new Sequence({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey){return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()}}const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPublicKey({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPublicKey$1({json:e});this.algorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new BitString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}async importKey(e,t=getCrypto(true)){try{if(!e){throw new Error("Need to provide publicKey input parameter")}const r=await t.exportKey("spki",e);const i=fromBER(r);try{this.fromSchema(i.result)}catch(e){throw new Error("Error during initializing object from schema")}}catch(e){const t=e instanceof Error?e.message:`${e}`;throw new Error(`Error during exporting public key: ${t}`)}}}PublicKeyInfo$1.CLASS_NAME="PublicKeyInfo";const VERSION$l="version";const PRIVATE_KEY$1="privateKey";const NAMED_CURVE="namedCurve";const PUBLIC_KEY$1="publicKey";const CLEAR_PROPS$19=[VERSION$l,PRIVATE_KEY$1,NAMED_CURVE,PUBLIC_KEY$1];class ECPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$l,ECPrivateKey$1.defaultValues(VERSION$l));this.privateKey=getParametersValue(e,PRIVATE_KEY$1,ECPrivateKey$1.defaultValues(PRIVATE_KEY$1));if(NAMED_CURVE in e){this.namedCurve=getParametersValue(e,NAMED_CURVE,ECPrivateKey$1.defaultValues(NAMED_CURVE))}if(PUBLIC_KEY$1 in e){this.publicKey=getParametersValue(e,PUBLIC_KEY$1,ECPrivateKey$1.defaultValues(PUBLIC_KEY$1))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$l:return 1;case PRIVATE_KEY$1:return new OctetString$1;case NAMED_CURVE:return EMPTY_STRING;case PUBLIC_KEY$1:return new ECPublicKey;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case VERSION$l:return t===ECPrivateKey$1.defaultValues(e);case PRIVATE_KEY$1:return t.isEqual(ECPrivateKey$1.defaultValues(e));case NAMED_CURVE:return t===EMPTY_STRING;case PUBLIC_KEY$1:return ECPublicKey.compareWithDefault(NAMED_CURVE,t.namedCurve)&&ECPublicKey.compareWithDefault("x",t.x)&&ECPublicKey.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({name:t.namedCurve||EMPTY_STRING})]}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({name:t.publicKey||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$19);const t=compareSchema(e,e,ECPrivateKey$1.schema({names:{version:VERSION$l,privateKey:PRIVATE_KEY$1,namedCurve:NAMED_CURVE,publicKey:PUBLIC_KEY$1}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKey=t.result.privateKey;if(NAMED_CURVE in t.result){this.namedCurve=t.result.namedCurve.valueBlock.toString()}if(PUBLIC_KEY$1 in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};if(NAMED_CURVE in this){e.namedCurve=this.namedCurve}this.publicKey=new ECPublicKey(e)}}toSchema(){const e=[new Integer({value:this.version}),this.privateKey];if(this.namedCurve){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[new ObjectIdentifier$1({value:this.namedCurve})]}))}if(this.publicKey){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[new BitString$1({valueHex:this.publicKey.toSchema().toBER(false)})]}))}return new Sequence({value:e})}toJSON(){if(!this.namedCurve||ECPrivateKey$1.compareWithDefault(NAMED_CURVE,this.namedCurve)){throw new Error('Not enough information for making JSON: absent "namedCurve" value')}const e=ECNamedCurves.find(this.namedCurve);const t={crv:e?e.name:this.namedCurve,d:build.Convert.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x;t.y=e.y}return t}fromJSON(e){ParameterError.assert("json",e,"crv","d");let t=0;const r=ECNamedCurves.find(e.crv);if(r){this.namedCurve=r.id;t=r.size}const i=build.Convert.FromBase64Url(e.d);if(i.byteLength<t){const e=new ArrayBuffer(t);const r=new Uint8Array(e);const n=new Uint8Array(i);r.set(n,1);this.privateKey=new OctetString$1({valueHex:e})}else{this.privateKey=new OctetString$1({valueHex:i.slice(0,t)})}if(e.x&&e.y){this.publicKey=new ECPublicKey({json:e})}}}ECPrivateKey$1.CLASS_NAME="ECPrivateKey";const PRIME="prime";const EXPONENT="exponent";const COEFFICIENT$1="coefficient";const CLEAR_PROPS$18=[PRIME,EXPONENT,COEFFICIENT$1];class OtherPrimeInfo$1 extends PkiObject{constructor(e={}){super();this.prime=getParametersValue(e,PRIME,OtherPrimeInfo$1.defaultValues(PRIME));this.exponent=getParametersValue(e,EXPONENT,OtherPrimeInfo$1.defaultValues(EXPONENT));this.coefficient=getParametersValue(e,COEFFICIENT$1,OtherPrimeInfo$1.defaultValues(COEFFICIENT$1));if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case PRIME:return new Integer;case EXPONENT:return new Integer;case COEFFICIENT$1:return new Integer;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.prime||EMPTY_STRING}),new Integer({name:t.exponent||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$18);const t=compareSchema(e,e,OtherPrimeInfo$1.schema({names:{prime:PRIME,exponent:EXPONENT,coefficient:COEFFICIENT$1}}));AsnError.assertSchema(t,this.className);this.prime=t.result.prime.convertFromDER();this.exponent=t.result.exponent.convertFromDER();this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new Sequence({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:build.Convert.ToBase64Url(this.prime.valueBlock.valueHexView),d:build.Convert.ToBase64Url(this.exponent.valueBlock.valueHexView),t:build.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){ParameterError.assert("json",e,"r","d","r");this.prime=new Integer({valueHex:build.Convert.FromBase64Url(e.r)});this.exponent=new Integer({valueHex:build.Convert.FromBase64Url(e.d)});this.coefficient=new Integer({valueHex:build.Convert.FromBase64Url(e.t)})}}OtherPrimeInfo$1.CLASS_NAME="OtherPrimeInfo";const VERSION$k="version";const MODULUS="modulus";const PUBLIC_EXPONENT="publicExponent";const PRIVATE_EXPONENT="privateExponent";const PRIME1="prime1";const PRIME2="prime2";const EXPONENT1="exponent1";const EXPONENT2="exponent2";const COEFFICIENT="coefficient";const OTHER_PRIME_INFOS="otherPrimeInfos";const CLEAR_PROPS$17=[VERSION$k,MODULUS,PUBLIC_EXPONENT,PRIVATE_EXPONENT,PRIME1,PRIME2,EXPONENT1,EXPONENT2,COEFFICIENT,OTHER_PRIME_INFOS];class RSAPrivateKey$1 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$k,RSAPrivateKey$1.defaultValues(VERSION$k));this.modulus=getParametersValue(e,MODULUS,RSAPrivateKey$1.defaultValues(MODULUS));this.publicExponent=getParametersValue(e,PUBLIC_EXPONENT,RSAPrivateKey$1.defaultValues(PUBLIC_EXPONENT));this.privateExponent=getParametersValue(e,PRIVATE_EXPONENT,RSAPrivateKey$1.defaultValues(PRIVATE_EXPONENT));this.prime1=getParametersValue(e,PRIME1,RSAPrivateKey$1.defaultValues(PRIME1));this.prime2=getParametersValue(e,PRIME2,RSAPrivateKey$1.defaultValues(PRIME2));this.exponent1=getParametersValue(e,EXPONENT1,RSAPrivateKey$1.defaultValues(EXPONENT1));this.exponent2=getParametersValue(e,EXPONENT2,RSAPrivateKey$1.defaultValues(EXPONENT2));this.coefficient=getParametersValue(e,COEFFICIENT,RSAPrivateKey$1.defaultValues(COEFFICIENT));if(OTHER_PRIME_INFOS in e){this.otherPrimeInfos=getParametersValue(e,OTHER_PRIME_INFOS,RSAPrivateKey$1.defaultValues(OTHER_PRIME_INFOS))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$k:return 0;case MODULUS:return new Integer;case PUBLIC_EXPONENT:return new Integer;case PRIVATE_EXPONENT:return new Integer;case PRIME1:return new Integer;case PRIME2:return new Integer;case EXPONENT1:return new Integer;case EXPONENT2:return new Integer;case COEFFICIENT:return new Integer;case OTHER_PRIME_INFOS:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),new Integer({name:t.modulus||EMPTY_STRING}),new Integer({name:t.publicExponent||EMPTY_STRING}),new Integer({name:t.privateExponent||EMPTY_STRING}),new Integer({name:t.prime1||EMPTY_STRING}),new Integer({name:t.prime2||EMPTY_STRING}),new Integer({name:t.exponent1||EMPTY_STRING}),new Integer({name:t.exponent2||EMPTY_STRING}),new Integer({name:t.coefficient||EMPTY_STRING}),new Sequence({optional:true,value:[new Repeated({name:t.otherPrimeInfosName||EMPTY_STRING,value:OtherPrimeInfo$1.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$17);const t=compareSchema(e,e,RSAPrivateKey$1.schema({names:{version:VERSION$k,modulus:MODULUS,publicExponent:PUBLIC_EXPONENT,privateExponent:PRIVATE_EXPONENT,prime1:PRIME1,prime2:PRIME2,exponent1:EXPONENT1,exponent2:EXPONENT2,coefficient:COEFFICIENT,otherPrimeInfo:{names:{blockName:OTHER_PRIME_INFOS}}}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.modulus=t.result.modulus.convertFromDER(256);this.publicExponent=t.result.publicExponent;this.privateExponent=t.result.privateExponent.convertFromDER(256);this.prime1=t.result.prime1.convertFromDER(128);this.prime2=t.result.prime2.convertFromDER(128);this.exponent1=t.result.exponent1.convertFromDER(128);this.exponent2=t.result.exponent2.convertFromDER(128);this.coefficient=t.result.coefficient.convertFromDER(128);if(OTHER_PRIME_INFOS in t.result)this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new OtherPrimeInfo$1({schema:e})))}toSchema(){const e=[];e.push(new Integer({value:this.version}));e.push(this.modulus.convertToDER());e.push(this.publicExponent);e.push(this.privateExponent.convertToDER());e.push(this.prime1.convertToDER());e.push(this.prime2.convertToDER());e.push(this.exponent1.convertToDER());e.push(this.exponent2.convertToDER());e.push(this.coefficient.convertToDER());if(this.otherPrimeInfos){e.push(new Sequence({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){const e={n:build.Convert.ToBase64Url(this.modulus.valueBlock.valueHexView),e:build.Convert.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:build.Convert.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:build.Convert.ToBase64Url(this.prime1.valueBlock.valueHexView),q:build.Convert.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:build.Convert.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:build.Convert.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:build.Convert.ToBase64Url(this.coefficient.valueBlock.valueHexView)};if(this.otherPrimeInfos){e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))}return e}fromJSON(e){ParameterError.assert("json",e,"n","e","d","p","q","dp","dq","qi");this.modulus=new Integer({valueHex:build.Convert.FromBase64Url(e.n)});this.publicExponent=new Integer({valueHex:build.Convert.FromBase64Url(e.e)});this.privateExponent=new Integer({valueHex:build.Convert.FromBase64Url(e.d)});this.prime1=new Integer({valueHex:build.Convert.FromBase64Url(e.p)});this.prime2=new Integer({valueHex:build.Convert.FromBase64Url(e.q)});this.exponent1=new Integer({valueHex:build.Convert.FromBase64Url(e.dp)});this.exponent2=new Integer({valueHex:build.Convert.FromBase64Url(e.dq)});this.coefficient=new Integer({valueHex:build.Convert.FromBase64Url(e.qi)});if(e.oth){this.otherPrimeInfos=Array.from(e.oth,(e=>new OtherPrimeInfo$1({json:e})))}}}RSAPrivateKey$1.CLASS_NAME="RSAPrivateKey";const VERSION$j="version";const PRIVATE_KEY_ALGORITHM="privateKeyAlgorithm";const PRIVATE_KEY="privateKey";const ATTRIBUTES$5="attributes";const PARSED_KEY="parsedKey";const CLEAR_PROPS$16=[VERSION$j,PRIVATE_KEY_ALGORITHM,PRIVATE_KEY,ATTRIBUTES$5];class PrivateKeyInfo$2 extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$j,PrivateKeyInfo$2.defaultValues(VERSION$j));this.privateKeyAlgorithm=getParametersValue(e,PRIVATE_KEY_ALGORITHM,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY_ALGORITHM));this.privateKey=getParametersValue(e,PRIVATE_KEY,PrivateKeyInfo$2.defaultValues(PRIVATE_KEY));if(ATTRIBUTES$5 in e){this.attributes=getParametersValue(e,ATTRIBUTES$5,PrivateKeyInfo$2.defaultValues(ATTRIBUTES$5))}if(PARSED_KEY in e){this.parsedKey=getParametersValue(e,PARSED_KEY,PrivateKeyInfo$2.defaultValues(PARSED_KEY))}if(e.json){this.fromJSON(e.json)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$j:return 0;case PRIVATE_KEY_ALGORITHM:return new AlgorithmIdentifier$2;case PRIVATE_KEY:return new OctetString$1;case ATTRIBUTES$5:return[];case PARSED_KEY:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Integer({name:t.version||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.privateKeyAlgorithm||{}),new OctetString$1({name:t.privateKey||EMPTY_STRING}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$16);const t=compareSchema(e,e,PrivateKeyInfo$2.schema({names:{version:VERSION$j,privateKeyAlgorithm:{names:{blockName:PRIVATE_KEY_ALGORITHM}},privateKey:PRIVATE_KEY,attributes:ATTRIBUTES$5}}));AsnError.assertSchema(t,this.className);this.version=t.result.version.valueBlock.valueDec;this.privateKeyAlgorithm=new AlgorithmIdentifier$2({schema:t.result.privateKeyAlgorithm});this.privateKey=t.result.privateKey;if(ATTRIBUTES$5 in t.result)this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})));switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1)this.parsedKey=new RSAPrivateKey$1({schema:e.result})}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm){if(this.privateKeyAlgorithm.algorithmParams instanceof ObjectIdentifier$1){const e=fromBER(this.privateKey.valueBlock.valueHexView);if(e.offset!==-1){this.parsedKey=new ECPrivateKey$1({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result})}}}break}}toSchema(){const e=[new Integer({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];if(this.attributes){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))}))}return new Sequence({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};if(this.attributes){e.attributes=Array.from(this.attributes,(e=>e.toJSON()))}return e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();Object.assign(e,t);return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ECPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ObjectIdentifier$1({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new RSAPrivateKey$1({json:e});this.privateKeyAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Null});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new OctetString$1({valueHex:this.parsedKey.toSchema().toBER(false)})}}}PrivateKeyInfo$2.CLASS_NAME="PrivateKeyInfo";const CONTENT_TYPE$1="contentType";const CONTENT_ENCRYPTION_ALGORITHM="contentEncryptionAlgorithm";const ENCRYPTED_CONTENT="encryptedContent";const CLEAR_PROPS$15=[CONTENT_TYPE$1,CONTENT_ENCRYPTION_ALGORITHM,ENCRYPTED_CONTENT];class EncryptedContentInfo$1 extends PkiObject{constructor(e={}){super();this.contentType=getParametersValue(e,CONTENT_TYPE$1,EncryptedContentInfo$1.defaultValues(CONTENT_TYPE$1));this.contentEncryptionAlgorithm=getParametersValue(e,CONTENT_ENCRYPTION_ALGORITHM,EncryptedContentInfo$1.defaultValues(CONTENT_ENCRYPTION_ALGORITHM));if(ENCRYPTED_CONTENT in e&&e.encryptedContent){this.encryptedContent=e.encryptedContent;if(this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4){if(this.encryptedContent.idBlock.isConstructed===false){const e=new OctetString$1({idBlock:{isConstructed:true},isConstructed:true});let t=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;const n=1024;while(i>0){const s=new Uint8Array(r,t,t+n>r.byteLength?r.byteLength-t:n);const a=new ArrayBuffer(s.length);const o=new Uint8Array(a);for(let e=0;e<o.length;e++)o[e]=s[e];e.valueBlock.value.push(new OctetString$1({valueHex:a}));i-=s.length;t+=s.length}this.encryptedContent=e}}}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case CONTENT_TYPE$1:return EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return new AlgorithmIdentifier$2;case ENCRYPTED_CONTENT:return new OctetString$1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case CONTENT_TYPE$1:return t===EMPTY_STRING;case CONTENT_ENCRYPTION_ALGORITHM:return t.algorithmId===EMPTY_STRING&&"algorithmParams"in t===false;case ENCRYPTED_CONTENT:return t.isEqual(EncryptedContentInfo$1.defaultValues(ENCRYPTED_CONTENT));default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.contentType||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.contentEncryptionAlgorithm||{}),new Choice({value:[new Constructed({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0},value:[new Repeated({value:new OctetString$1})]}),new Primitive({name:t.encryptedContent||EMPTY_STRING,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$15);const t=compareSchema(e,e,EncryptedContentInfo$1.schema({names:{contentType:CONTENT_TYPE$1,contentEncryptionAlgorithm:{names:{blockName:CONTENT_ENCRYPTION_ALGORITHM}},encryptedContent:ENCRYPTED_CONTENT}}));AsnError.assertSchema(t,this.className);this.contentType=t.result.contentType.valueBlock.toString();this.contentEncryptionAlgorithm=new AlgorithmIdentifier$2({schema:t.result.contentEncryptionAlgorithm});if(ENCRYPTED_CONTENT in t.result){this.encryptedContent=t.result.encryptedContent;this.encryptedContent.idBlock.tagClass=1;this.encryptedContent.idBlock.tagNumber=4}}toSchema(){const e={isIndefiniteForm:false};const t=[];t.push(new ObjectIdentifier$1({value:this.contentType}));t.push(this.contentEncryptionAlgorithm.toSchema());if(this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const r=this.encryptedContent;r.idBlock.tagClass=3;r.idBlock.tagNumber=0;r.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;t.push(r)}return new Sequence({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};if(this.encryptedContent){e.encryptedContent=this.encryptedContent.toJSON()}return e}getEncryptedContent(){if(!this.encryptedContent){throw new Error("Parameter 'encryptedContent' is undefined")}return OctetString$1.prototype.getValue.call(this.encryptedContent)}}EncryptedContentInfo$1.CLASS_NAME="EncryptedContentInfo";const HASH_ALGORITHM$4="hashAlgorithm";const MASK_GEN_ALGORITHM$1="maskGenAlgorithm";const SALT_LENGTH="saltLength";const TRAILER_FIELD="trailerField";const CLEAR_PROPS$14=[HASH_ALGORITHM$4,MASK_GEN_ALGORITHM$1,SALT_LENGTH,TRAILER_FIELD];class RSASSAPSSParams extends PkiObject{constructor(e={}){super();this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$4,RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4));this.maskGenAlgorithm=getParametersValue(e,MASK_GEN_ALGORITHM$1,RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1));this.saltLength=getParametersValue(e,SALT_LENGTH,RSASSAPSSParams.defaultValues(SALT_LENGTH));this.trailerField=getParametersValue(e,TRAILER_FIELD,RSASSAPSSParams.defaultValues(TRAILER_FIELD));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case HASH_ALGORITHM$4:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});case MASK_GEN_ALGORITHM$1:return new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null}).toSchema()});case SALT_LENGTH:return 20;case TRAILER_FIELD:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Constructed({idBlock:{tagClass:3,tagNumber:0},optional:true,value:[AlgorithmIdentifier$2.schema(t.hashAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:1},optional:true,value:[AlgorithmIdentifier$2.schema(t.maskGenAlgorithm||{})]}),new Constructed({idBlock:{tagClass:3,tagNumber:2},optional:true,value:[new Integer({name:t.saltLength||EMPTY_STRING})]}),new Constructed({idBlock:{tagClass:3,tagNumber:3},optional:true,value:[new Integer({name:t.trailerField||EMPTY_STRING})]})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$14);const t=compareSchema(e,e,RSASSAPSSParams.schema({names:{hashAlgorithm:{names:{blockName:HASH_ALGORITHM$4}},maskGenAlgorithm:{names:{blockName:MASK_GEN_ALGORITHM$1}},saltLength:SALT_LENGTH,trailerField:TRAILER_FIELD}}));AsnError.assertSchema(t,this.className);if(HASH_ALGORITHM$4 in t.result)this.hashAlgorithm=new AlgorithmIdentifier$2({schema:t.result.hashAlgorithm});if(MASK_GEN_ALGORITHM$1 in t.result)this.maskGenAlgorithm=new AlgorithmIdentifier$2({schema:t.result.maskGenAlgorithm});if(SALT_LENGTH in t.result)this.saltLength=t.result.saltLength.valueBlock.valueDec;if(TRAILER_FIELD in t.result)this.trailerField=t.result.trailerField.valueBlock.valueDec}toSchema(){const e=[];if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]}))}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]}))}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:2},value:[new Integer({value:this.saltLength})]}))}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.push(new Constructed({idBlock:{tagClass:3,tagNumber:3},value:[new Integer({value:this.trailerField})]}))}return new Sequence({value:e})}toJSON(){const e={};if(!this.hashAlgorithm.isEqual(RSASSAPSSParams.defaultValues(HASH_ALGORITHM$4))){e.hashAlgorithm=this.hashAlgorithm.toJSON()}if(!this.maskGenAlgorithm.isEqual(RSASSAPSSParams.defaultValues(MASK_GEN_ALGORITHM$1))){e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()}if(this.saltLength!==RSASSAPSSParams.defaultValues(SALT_LENGTH)){e.saltLength=this.saltLength}if(this.trailerField!==RSASSAPSSParams.defaultValues(TRAILER_FIELD)){e.trailerField=this.trailerField}return e}}RSASSAPSSParams.CLASS_NAME="RSASSAPSSParams";const SALT="salt";const ITERATION_COUNT="iterationCount";const KEY_LENGTH="keyLength";const PRF="prf";const CLEAR_PROPS$13=[SALT,ITERATION_COUNT,KEY_LENGTH,PRF];class PBKDF2Params extends PkiObject{constructor(e={}){super();this.salt=getParametersValue(e,SALT,PBKDF2Params.defaultValues(SALT));this.iterationCount=getParametersValue(e,ITERATION_COUNT,PBKDF2Params.defaultValues(ITERATION_COUNT));if(KEY_LENGTH in e){this.keyLength=getParametersValue(e,KEY_LENGTH,PBKDF2Params.defaultValues(KEY_LENGTH))}if(PRF in e){this.prf=getParametersValue(e,PRF,PBKDF2Params.defaultValues(PRF))}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case SALT:return{};case ITERATION_COUNT:return-1;case KEY_LENGTH:return 0;case PRF:return new AlgorithmIdentifier$2({algorithmId:"1.3.14.3.2.26",algorithmParams:new Null});default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Choice({value:[new OctetString$1({name:t.saltPrimitive||EMPTY_STRING}),AlgorithmIdentifier$2.schema(t.saltConstructed||{})]}),new Integer({name:t.iterationCount||EMPTY_STRING}),new Integer({name:t.keyLength||EMPTY_STRING,optional:true}),AlgorithmIdentifier$2.schema(t.prf||{names:{optional:true}})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$13);const t=compareSchema(e,e,PBKDF2Params.schema({names:{saltPrimitive:SALT,saltConstructed:{names:{blockName:SALT}},iterationCount:ITERATION_COUNT,keyLength:KEY_LENGTH,prf:{names:{blockName:PRF,optional:true}}}}));AsnError.assertSchema(t,this.className);this.salt=t.result.salt;this.iterationCount=t.result.iterationCount.valueBlock.valueDec;if(KEY_LENGTH in t.result)this.keyLength=t.result.keyLength.valueBlock.valueDec;if(PRF in t.result)this.prf=new AlgorithmIdentifier$2({schema:t.result.prf})}toSchema(){const e=[];e.push(this.salt);e.push(new Integer({value:this.iterationCount}));if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.push(new Integer({value:this.keyLength}))}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.push(this.prf.toSchema())}return new Sequence({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};if(KEY_LENGTH in this){if(PBKDF2Params.defaultValues(KEY_LENGTH)!==this.keyLength)e.keyLength=this.keyLength}if(this.prf){if(PBKDF2Params.defaultValues(PRF).isEqual(this.prf)===false)e.prf=this.prf.toJSON()}return e}}PBKDF2Params.CLASS_NAME="PBKDF2Params";const KEY_DERIVATION_FUNC="keyDerivationFunc";const ENCRYPTION_SCHEME="encryptionScheme";const CLEAR_PROPS$12=[KEY_DERIVATION_FUNC,ENCRYPTION_SCHEME];class PBES2Params extends PkiObject{constructor(e={}){super();this.keyDerivationFunc=getParametersValue(e,KEY_DERIVATION_FUNC,PBES2Params.defaultValues(KEY_DERIVATION_FUNC));this.encryptionScheme=getParametersValue(e,ENCRYPTION_SCHEME,PBES2Params.defaultValues(ENCRYPTION_SCHEME));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case KEY_DERIVATION_FUNC:return new AlgorithmIdentifier$2;case ENCRYPTION_SCHEME:return new AlgorithmIdentifier$2;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[AlgorithmIdentifier$2.schema(t.keyDerivationFunc||{}),AlgorithmIdentifier$2.schema(t.encryptionScheme||{})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$12);const t=compareSchema(e,e,PBES2Params.schema({names:{keyDerivationFunc:{names:{blockName:KEY_DERIVATION_FUNC}},encryptionScheme:{names:{blockName:ENCRYPTION_SCHEME}}}}));AsnError.assertSchema(t,this.className);this.keyDerivationFunc=new AlgorithmIdentifier$2({schema:t.result.keyDerivationFunc});this.encryptionScheme=new AlgorithmIdentifier$2({schema:t.result.encryptionScheme})}toSchema(){return new Sequence({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}PBES2Params.CLASS_NAME="PBES2Params";class AbstractCryptoEngine{constructor(e){this.crypto=e.crypto;this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle;this.name=getParametersValue(e,"name",EMPTY_STRING)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function makePKCS12B2Key(e,t,r,i,n,s){let a;let o;const f=[];switch(t.toUpperCase()){case"SHA-1":a=20;o=64;break;case"SHA-256":a=32;o=64;break;case"SHA-384":a=48;o=128;break;case"SHA-512":a=64;o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(i);const u=new ArrayBuffer(i.byteLength*2+2);const h=new Uint8Array(u);for(let e=0;e<c.length;e++){h[e*2]=0;h[e*2+1]=c[e]}h[h.length-2]=0;h[h.length-1]=0;i=u.slice(0);const l=new ArrayBuffer(o);const d=new Uint8Array(l);for(let e=0;e<l.byteLength;e++)d[e]=3;const p=n.byteLength;const b=o*Math.ceil(p/o);const m=new ArrayBuffer(b);const v=new Uint8Array(m);const y=new Uint8Array(n);for(let e=0;e<b;e++)v[e]=y[e%p];const w=i.byteLength;const A=o*Math.ceil(w/o);const g=new ArrayBuffer(A);const S=new Uint8Array(g);const E=new Uint8Array(i);for(let e=0;e<A;e++)S[e]=E[e%w];const _=m.byteLength+g.byteLength;let $=new ArrayBuffer(_);let C=new Uint8Array($);C.set(v);C.set(S,v.length);const P=Math.ceil((r>>3)/a);let T=Promise.resolve($);for(let r=0;r<=P;r++){T=T.then((e=>{const t=new ArrayBuffer(l.byteLength+e.byteLength);const r=new Uint8Array(t);r.set(d);r.set(C,d.length);return t}));for(let r=0;r<s;r++)T=T.then((r=>e.digest({name:t},new Uint8Array(r))));T=T.then((e=>{const t=new ArrayBuffer(o);const r=new Uint8Array(t);for(let i=0;i<t.byteLength;i++)r[i]=e[i%e.byteLength];const i=Math.ceil(p/o)+Math.ceil(w/o);const n=[];let s=0;let a=o;for(let e=0;e<i;e++){const e=Array.from(new Uint8Array($.slice(s,s+a)));s+=o;if(s+o>$.byteLength)a=$.byteLength-s;let i=511;for(let n=t.byteLength-1;n>=0;n--){i>>=8;i+=r[n]+e[n];e[n]=i&255}n.push(...e)}$=new ArrayBuffer(n.length);C=new Uint8Array($);C.set(n);f.push(...new Uint8Array(e));return $}))}T=T.then((()=>{const e=new ArrayBuffer(r>>3);const t=new Uint8Array(e);t.set(new Uint8Array(f).slice(0,r>>3));return e}));return T}function prepareAlgorithm(e){const t=typeof e==="string"?{name:e}:e;if("hash"in t){return{...t,hash:prepareAlgorithm(t.hash)}}return t}class CryptoEngine extends AbstractCryptoEngine{async importKey(e,t,r,i,n){var s,a,o,f,c,u;let h={};const l=prepareAlgorithm(r);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,i,n);case"spki":{const e=fromBER(build.BufferSourceConverter.toArrayBuffer(t));AsnError.assert(e,"keyData");const r=new PublicKeyInfo$1;try{r.fromSchema(e.result)}catch{throw new ArgumentError("Incorrect keyData")}switch(l.name.toUpperCase()){case"RSA-PSS":{if(!l.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(l.hash.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${l.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{n=["verify"];h.kty="RSA";h.ext=i;h.key_ops=n;if(r.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`);if(!h.alg){if(!l.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(l.hash.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${l.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(h,e)}break;case"ECDSA":n=["verify"];case"ECDH":{h={kty:"EC",ext:i,key_ops:n};if(r.algorithm.algorithmId!=="1.2.840.10045.2.1"){throw new Error(`Incorrect public key algorithm: ${r.algorithm.algorithmId}`)}const e=r.toJSON();Object.assign(h,e)}break;case"RSA-OAEP":{h.kty="RSA";h.ext=i;h.key_ops=n;if(this.name.toLowerCase()==="safari")h.alg="RSA-OAEP";else{if(!l.hash){throw new ParameterError("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed")}switch(l.hash.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${l.hash.name.toUpperCase()}`)}}const e=r.toJSON();Object.assign(h,e)}break;case"RSAES-PKCS1-V1_5":{h.kty="RSA";h.ext=i;h.key_ops=n;h.alg="PS1";const e=r.toJSON();Object.assign(h,e)}break;default:throw new Error(`Incorrect algorithm name: ${l.name.toUpperCase()}`)}}break;case"pkcs8":{const e=new PrivateKeyInfo$2;const r=fromBER(build.BufferSourceConverter.toArrayBuffer(t));AsnError.assert(r,"keyData");try{e.fromSchema(r.result)}catch(e){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(l.name.toUpperCase()){case"RSA-PSS":{switch((s=l.hash)===null||s===void 0?void 0:s.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(a=l.hash)===null||a===void 0?void 0:a.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{n=["sign"];h.kty="RSA";h.ext=i;h.key_ops=n;if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${e.privateKeyAlgorithm.algorithmId}`);if("alg"in h===false){switch((o=l.hash)===null||o===void 0?void 0:o.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(f=l.hash)===null||f===void 0?void 0:f.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(h,t)}break;case"ECDSA":n=["sign"];case"ECDH":{h={kty:"EC",ext:i,key_ops:n};if(e.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${e.privateKeyAlgorithm.algorithmId}`);const t=e.toJSON();Object.assign(h,t)}break;case"RSA-OAEP":{h.kty="RSA";h.ext=i;h.key_ops=n;if(this.name.toLowerCase()==="safari")h.alg="RSA-OAEP";else{switch((c=l.hash)===null||c===void 0?void 0:c.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(u=l.hash)===null||u===void 0?void 0:u.name.toUpperCase()}`)}}const t=e.toJSON();Object.assign(h,t)}break;case"RSAES-PKCS1-V1_5":{n=["decrypt"];h.kty="RSA";h.ext=i;h.key_ops=n;h.alg="PS1";const t=e.toJSON();Object.assign(h,t)}break;default:throw new Error(`Incorrect algorithm name: ${l.name.toUpperCase()}`)}}break;case"jwk":h=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari"){try{return this.subtle.importKey("jwk",stringToArrayBuffer(JSON.stringify(h)),r,i,n)}catch{return this.subtle.importKey("jwk",h,r,i,n)}}return this.subtle.importKey("jwk",h,r,i,n)}async exportKey(e,t){let r=await this.subtle.exportKey("jwk",t);if(this.name.toLowerCase()==="safari"){if(r instanceof ArrayBuffer){r=JSON.parse(arrayBufferToString(r))}}switch(e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new PublicKeyInfo$1;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"pkcs8":{const e=new PrivateKeyInfo$2;try{e.fromJSON(r)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(false)}case"jwk":return r;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,r,i,n,s){if(e.toLowerCase()===t.toLowerCase()){return r}const a=await this.importKey(e,r,i,n,s);return this.exportKey(t,a)}getAlgorithmByOID(e,t=false,r){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"};case"1.3.132.0.10":return{name:"K-256",hash:{name:"SHA-256"}}}if(t){throw new Error(`Unsupported algorithm identifier ${r?`for ${r} `:EMPTY_STRING}: ${e}`)}return{}}getOIDByAlgorithm(e,t=false,r){let i=EMPTY_STRING;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":i="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.1.1.5";break;case"SHA-256":i="1.2.840.113549.1.1.11";break;case"SHA-384":i="1.2.840.113549.1.1.12";break;case"SHA-512":i="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":i="1.2.840.113549.1.1.10";break;case"RSA-OAEP":i="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.10045.4.1";break;case"SHA-256":i="1.2.840.10045.4.3.2";break;case"SHA-384":i="1.2.840.10045.4.3.3";break;case"SHA-512":i="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":i="1.3.133.16.840.63.0.2";break;case"SHA-256":i="1.3.132.1.11.1";break;case"SHA-384":i="1.3.132.1.11.2";break;case"SHA-512":i="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:i="2.16.840.1.101.3.4.1.2";break;case 192:i="2.16.840.1.101.3.4.1.22";break;case 256:i="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:i="2.16.840.1.101.3.4.1.6";break;case 192:i="2.16.840.1.101.3.4.1.26";break;case 256:i="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:i="2.16.840.1.101.3.4.1.4";break;case 192:i="2.16.840.1.101.3.4.1.24";break;case 256:i="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:i="2.16.840.1.101.3.4.1.5";break;case 192:i="2.16.840.1.101.3.4.1.25";break;case 256:i="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":i="1.2.840.113549.2.7";break;case"SHA-256":i="1.2.840.113549.2.9";break;case"SHA-384":i="1.2.840.113549.2.10";break;case"SHA-512":i="1.2.840.113549.2.11";break}break;case"DH":i="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":i="1.3.14.3.2.26";break;case"SHA-256":i="2.16.840.1.101.3.4.2.1";break;case"SHA-384":i="2.16.840.1.101.3.4.2.2";break;case"SHA-512":i="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":i="1.2.840.113549.1.5.12";break;case"P-256":i="1.2.840.10045.3.1.7";break;case"P-384":i="1.3.132.0.34";break;case"P-521":i="1.3.132.0.35";break;case"K-256":i="1.3.132.0.10";break}if(!i&&t){throw new Error(`Unsupported algorithm ${r?`for ${r} `:EMPTY_STRING}: ${e.name}`)}return i}getAlgorithmParameters(e,t){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return r}getHashAlgorithm(e){let t=EMPTY_STRING;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":{try{const r=new RSASSAPSSParams({schema:e.algorithmParams});if(r.hashAlgorithm){const e=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in e){t=e.name}else{return EMPTY_STRING}}else t="SHA-1"}catch{}}break}return t}async encryptEncryptedContentInfo(e){ParameterError.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,true,"contentEncryptionAlgorithm");const r=this.getOIDByAlgorithm({name:"PBKDF2"},true,"PBKDF2");const i=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},true,"hmacHashAlgorithm");const n=new ArrayBuffer(16);const s=new Uint8Array(n);this.getRandomValues(s);const a=new ArrayBuffer(64);const o=new Uint8Array(a);this.getRandomValues(o);const f=new Uint8Array(e.contentToEncrypt);const c=new PBKDF2Params({salt:new OctetString$1({valueHex:a}),iterationCount:e.iterationCount,prf:new AlgorithmIdentifier$2({algorithmId:i,algorithmParams:new Null})});const u=new Uint8Array(e.password);const h=await this.importKey("raw",u,"PBKDF2",false,["deriveKey"]);const l=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:o,iterations:e.iterationCount},h,e.contentEncryptionAlgorithm,false,["encrypt"]);const d=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:s},l,f);const p=new PBES2Params({keyDerivationFunc:new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:c.toSchema()}),encryptionScheme:new AlgorithmIdentifier$2({algorithmId:t,algorithmParams:new OctetString$1({valueHex:n})})});return new EncryptedContentInfo$1({contentType:e.contentType,contentEncryptionAlgorithm:new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:p.toSchema()}),encryptedContent:new OctetString$1({valueHex:d})})}async decryptEncryptedContentInfo(e){ParameterError.assert(e,"password","encryptedContentInfo");if(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new PBES2Params({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbes2Parameters"')}let r;try{r=new PBKDF2Params({schema:t.keyDerivationFunc.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbkdf2Params"')}const i=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,true);const n=t.encryptionScheme.algorithmParams.valueBlock.valueHex;const s=new Uint8Array(n);const a=r.salt.valueBlock.valueHex;const o=new Uint8Array(a);const f=r.iterationCount;let c="SHA-1";if(r.prf){const e=this.getAlgorithmByOID(r.prf.algorithmId,true);c=e.hash.name}const u=await this.importKey("raw",e.password,"PBKDF2",false,["deriveKey"]);const h=await this.deriveKey({name:"PBKDF2",hash:{name:c},salt:o,iterations:f},u,i,false,["decrypt"]);const l=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:i.name,iv:s},h,l)}async stampDataWithPassword(e){if(e instanceof Object===false)throw new Error('Parameters must have type "Object"');ParameterError.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const i=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const n=await this.importKey("raw",new Uint8Array(i),r,false,["sign"]);return this.sign(r,n,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){ParameterError.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const r={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};const i=await makePKCS12B2Key(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount);const n=await this.importKey("raw",new Uint8Array(i),r,false,["verify"]);return this.verify(r,n,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");const r=new AlgorithmIdentifier$2;const i=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(i.algorithm).length){throw new Error("Parameter 'algorithm' is empty")}const n=i.algorithm;n.hash.name=t;switch(e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(n,true);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":n.saltLength=32;break;case"SHA-384":n.saltLength=48;break;case"SHA-512":n.saltLength=64;break}const e={};if(t.toUpperCase()!=="SHA-1"){const r=this.getOIDByAlgorithm({name:t},true,"hashAlgorithm");e.hashAlgorithm=new AlgorithmIdentifier$2({algorithmId:r,algorithmParams:new Null});e.maskGenAlgorithm=new AlgorithmIdentifier$2({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}if(n.saltLength!==20)e.saltLength=n.saltLength;const i=new RSASSAPSSParams(e);r.algorithmId="1.2.840.113549.1.1.10";r.algorithmParams=i.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:r,parameters:i}}async signWithPrivateKey(e,t,r){const i=await this.sign(r.algorithm,t,e);if(r.algorithm.name==="ECDSA"){return createCMSECDSASignature(i)}return i}fillPublicKeyParameters(e,t){const r={};const i=this.getHashAlgorithm(t);if(i===EMPTY_STRING)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let n;if(t.algorithmId==="1.2.840.113549.1.1.10")n=t.algorithmId;else n=e.algorithm.algorithmId;const s=this.getAlgorithmByOID(n,true);r.algorithm=this.getAlgorithmParameters(s.name,"importKey");if("hash"in r.algorithm.algorithm)r.algorithm.algorithm.hash.name=i;if(s.name==="ECDSA"){const t=e.algorithm;if(!t.algorithmParams){throw new Error("Algorithm parameters for ECDSA public key are missed")}const i=t.algorithmParams;if("idBlock"in t.algorithmParams){if(!(i.idBlock.tagClass===1&&i.idBlock.tagNumber===6)){throw new Error("Incorrect type for ECDSA public key parameters")}}const n=this.getAlgorithmByOID(i.valueBlock.toString(),true);r.algorithm.algorithm.namedCurve=n.name}return r}async getPublicKey(e,t,r){if(!r){r=this.fillPublicKeyParameters(e,t)}const i=e.toSchema().toBER(false);return this.importKey("spki",i,r.algorithm.algorithm,true,r.algorithm.usages)}async verifyWithPublicKey(e,t,r,i,n){let s;if(!n){n=this.getHashAlgorithm(i);if(!n)throw new Error(`Unsupported signature algorithm: ${i.algorithmId}`);s=await this.getPublicKey(r,i)}else{const e={};let t;if(i.algorithmId==="1.2.840.113549.1.1.10")t=i.algorithmId;else t=r.algorithm.algorithmId;const a=this.getAlgorithmByOID(t,true);e.algorithm=this.getAlgorithmParameters(a.name,"importKey");if("hash"in e.algorithm.algorithm)e.algorithm.algorithm.hash.name=n;if(a.name==="ECDSA"){let t=false;if("algorithmParams"in r.algorithm===true){if("idBlock"in r.algorithm.algorithmParams){if(r.algorithm.algorithmParams.idBlock.tagClass===1&&r.algorithm.algorithmParams.idBlock.tagNumber===6)t=true}}if(t===false){throw new Error("Incorrect type for ECDSA public key parameters")}const i=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString(),true);e.algorithm.algorithm.namedCurve=i.name}s=await this.getPublicKey(r,null,e)}const a=this.getAlgorithmParameters(s.algorithm.name,"verify");if("hash"in a.algorithm)a.algorithm.hash.name=n;let o=t.valueBlock.valueHexView;if(s.algorithm.name==="ECDSA"){const e=ECNamedCurves.find(s.algorithm.namedCurve);if(!e){throw new Error("Unsupported named curve in use")}const t=fromBER(o);AsnError.assert(t,"Signature value");o=createECDSASignatureFromCMS(t.result,e.size)}if(s.algorithm.name==="RSA-PSS"){const e=new RSASSAPSSParams({schema:i.algorithmParams});if("saltLength"in e)a.algorithm.saltLength=e.saltLength;else a.algorithm.saltLength=20;let t="SHA-1";if("hashAlgorithm"in e){const r=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,true);t=r.name}a.algorithm.hash.name=t}return this.verify(a.algorithm,s,o,e)}}let engine={name:"none",crypto:null};function isCryptoEngine(e){return e&&typeof e==="object"&&"crypto"in e?true:false}function setEngine(e,...t){let r=null;if(t.length<2){if(t.length){r=t[0]}else{r=typeof self!=="undefined"&&self.crypto?new CryptoEngine({name:"browser",crypto:self.crypto}):null}}else{const e=t[0];const i=t[1];if(isCryptoEngine(i)){r=i}else if(isCryptoEngine(e)){r=e}else if("subtle"in e&&"getRandomValues"in e){r=new CryptoEngine({crypto:e})}}if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){if(typeof global[process.pid]==="undefined"){global[process.pid]={}}else{if(typeof global[process.pid]!=="object"){throw new Error(`Name global.${process.pid} already exists and it is not an object`)}}if(typeof global[process.pid].pkijs==="undefined"){global[process.pid].pkijs={}}else{if(typeof global[process.pid].pkijs!=="object"){throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`)}}global[process.pid].pkijs.engine={name:e,crypto:r}}else{engine={name:e,crypto:r}}}function getEngine(){if(typeof process!=="undefined"&&"pid"in process&&typeof global!=="undefined"&&typeof window==="undefined"){let e;try{e=global[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return e}return engine}function getCrypto(e=false){const t=getEngine();if(!t.crypto&&e){throw new Error("Unable to create WebCrypto object")}return t.crypto}function createCMSECDSASignature(e){if(e.byteLength%2!==0)return EMPTY_BUFFER;const t=e.byteLength/2;const r=new ArrayBuffer(t);const i=new Uint8Array(r);i.set(new Uint8Array(e,0,t));const n=new Integer({valueHex:r});const s=new ArrayBuffer(t);const a=new Uint8Array(s);a.set(new Uint8Array(e,t,t));const o=new Integer({valueHex:s});return new Sequence({value:[n.convertToDER(),o.convertToDER()]}).toBER(false)}function createECDSASignatureFromCMS(e,t){if(!(e instanceof Sequence&&e.valueBlock.value.length===2&&e.valueBlock.value[0]instanceof Integer&&e.valueBlock.value[1]instanceof Integer))return EMPTY_BUFFER;const r=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView;const i=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView;const n=new Uint8Array(t*2);n.set(r,t-r.byteLength);n.set(i,2*t-i.byteLength);return n.buffer}const VERSION$i="version";const LOG_ID="logID";const EXTENSIONS$6="extensions";const TIMESTAMP="timestamp";const HASH_ALGORITHM$3="hashAlgorithm";const SIGNATURE_ALGORITHM$8="signatureAlgorithm";const SIGNATURE$7="signature";const NONE="none";const MD5="md5";const SHA1$1="sha1";const SHA224="sha224";const SHA256$1="sha256";const SHA384$1="sha384";const SHA512$1="sha512";const ANONYMOUS="anonymous";const RSA$1="rsa";const DSA="dsa";const ECDSA$2="ecdsa";class SignedCertificateTimestamp extends PkiObject{constructor(e={}){super();this.version=getParametersValue(e,VERSION$i,SignedCertificateTimestamp.defaultValues(VERSION$i));this.logID=getParametersValue(e,LOG_ID,SignedCertificateTimestamp.defaultValues(LOG_ID));this.timestamp=getParametersValue(e,TIMESTAMP,SignedCertificateTimestamp.defaultValues(TIMESTAMP));this.extensions=getParametersValue(e,EXTENSIONS$6,SignedCertificateTimestamp.defaultValues(EXTENSIONS$6));this.hashAlgorithm=getParametersValue(e,HASH_ALGORITHM$3,SignedCertificateTimestamp.defaultValues(HASH_ALGORITHM$3));this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$8,SignedCertificateTimestamp.defaultValues(SIGNATURE_ALGORITHM$8));this.signature=getParametersValue(e,SIGNATURE$7,SignedCertificateTimestamp.defaultValues(SIGNATURE$7));if("stream"in e&&e.stream){this.fromStream(e.stream)}if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case VERSION$i:return 0;case LOG_ID:case EXTENSIONS$6:return EMPTY_BUFFER;case TIMESTAMP:return new Date(0);case HASH_ALGORITHM$3:case SIGNATURE_ALGORITHM$8:return EMPTY_STRING;case SIGNATURE$7:return new Any;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof RawData===false)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new SeqStream({stream:new ByteStream({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();this.version=e.getBlock(1)[0];if(this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0);this.timestamp=new Date(utilFromBase(new Uint8Array(e.getBlock(8)),8));const r=e.getUint16();this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0);switch(e.getBlock(1)[0]){case 0:this.hashAlgorithm=NONE;break;case 1:this.hashAlgorithm=MD5;break;case 2:this.hashAlgorithm=SHA1$1;break;case 3:this.hashAlgorithm=SHA224;break;case 4:this.hashAlgorithm=SHA256$1;break;case 5:this.hashAlgorithm=SHA384$1;break;case 6:this.hashAlgorithm=SHA512$1;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=ANONYMOUS;break;case 1:this.signatureAlgorithm=RSA$1;break;case 2:this.signatureAlgorithm=DSA;break;case 3:this.signatureAlgorithm=ECDSA$2;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const i=e.getUint16();const n=new Uint8Array(e.getBlock(i)).buffer.slice(0);const s=fromBER(n);AsnError.assert(s,"SignedCertificateTimestamp");this.signature=s.result;if(t!==47+r+i){throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}}toSchema(){const e=this.toStream();return new RawData({data:e.stream.buffer})}toStream(){const e=new SeqStream;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength);e.appendChar(this.version);e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8);const r=new Uint8Array(t);const i=utilToBase(this.timestamp.valueOf(),8);r.set(new Uint8Array(i),8-i.byteLength);e.appendView(r);e.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength)e.appendView(new Uint8Array(this.extensions));let n;switch(this.hashAlgorithm.toLowerCase()){case NONE:n=0;break;case MD5:n=1;break;case SHA1$1:n=2;break;case SHA224:n=3;break;case SHA256$1:n=4;break;case SHA384$1:n=5;break;case SHA512$1:n=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(n);let s;switch(this.signatureAlgorithm.toLowerCase()){case ANONYMOUS:s=0;break;case RSA$1:s=1;break;case DSA:s=2;break;case ECDSA$2:s=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(s);const a=this.signature.toBER(false);e.appendUint16(a.byteLength);e.appendView(new Uint8Array(a));return e}toJSON(){return{version:this.version,logID:bufferToHexCodes(this.logID),timestamp:this.timestamp,extensions:bufferToHexCodes(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,r=0,i=getCrypto(true)){const n=toBase64(arrayBufferToString(this.logID));let s=null;const a=new SeqStream;for(const t of e){if(t.log_id===n){s=t.key;break}}if(!s){throw new Error(`Public key not found for CT with logId: ${n}`)}const o=stringToArrayBuffer(fromBase64(s));const f=PublicKeyInfo$1.fromBER(o);a.appendChar(0);a.appendChar(0);const c=new ArrayBuffer(8);const u=new Uint8Array(c);const h=utilToBase(this.timestamp.valueOf(),8);u.set(new Uint8Array(h),8-h.byteLength);a.appendView(u);a.appendUint16(r);if(r===0)a.appendUint24(t.byteLength);a.appendView(new Uint8Array(t));a.appendUint16(this.extensions.byteLength);if(this.extensions.byteLength!==0)a.appendView(new Uint8Array(this.extensions));return i.verifyWithPublicKey(a.buffer.slice(0,a.length),new OctetString$1({valueHex:this.signature.toBER(false)}),f,{algorithmId:EMPTY_STRING},"SHA-256")}}SignedCertificateTimestamp.CLASS_NAME="SignedCertificateTimestamp";const TIMESTAMPS="timestamps";class SignedCertificateTimestampList extends PkiObject{constructor(e={}){super();this.timestamps=getParametersValue(e,TIMESTAMPS,SignedCertificateTimestampList.defaultValues(TIMESTAMPS));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TIMESTAMPS:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case TIMESTAMPS:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const r=getParametersValue(e,"names",{});(t=r.optional)!==null&&t!==void 0?t:r.optional=false;return new OctetString$1({name:r.blockName||"SignedCertificateTimestampList",optional:r.optional})}fromSchema(e){if(e instanceof OctetString$1===false){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}const t=new SeqStream({stream:new ByteStream({buffer:e.valueBlock.valueHex})});const r=t.getUint16();if(r!==t.length){throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList")}while(t.length){this.timestamps.push(new SignedCertificateTimestamp({stream:t}))}}toSchema(){const e=new SeqStream;let t=0;const r=[];for(const e of this.timestamps){const i=e.toStream();r.push(i);t+=i.stream.buffer.byteLength}e.appendUint16(t);for(const t of r){e.appendView(t.stream.view)}return new OctetString$1({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}SignedCertificateTimestampList.CLASS_NAME="SignedCertificateTimestampList";const ATTRIBUTES$4="attributes";const CLEAR_PROPS$11=[ATTRIBUTES$4];class SubjectDirectoryAttributes$1 extends PkiObject{constructor(e={}){super();this.attributes=getParametersValue(e,ATTRIBUTES$4,SubjectDirectoryAttributes$1.defaultValues(ATTRIBUTES$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case ATTRIBUTES$4:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new Repeated({name:t.attributes||EMPTY_STRING,value:Attribute$3.schema()})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$11);const t=compareSchema(e,e,SubjectDirectoryAttributes$1.schema({names:{attributes:ATTRIBUTES$4}}));AsnError.assertSchema(t,this.className);this.attributes=Array.from(t.result.attributes,(e=>new Attribute$3({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}SubjectDirectoryAttributes$1.CLASS_NAME="SubjectDirectoryAttributes";class ExtensionValueFactory{static getItems(){if(!this.types){this.types={};ExtensionValueFactory.register(id_SubjectAltName,"SubjectAltName",AltName);ExtensionValueFactory.register(id_IssuerAltName,"IssuerAltName",AltName);ExtensionValueFactory.register(id_AuthorityKeyIdentifier,"AuthorityKeyIdentifier",AuthorityKeyIdentifier$1);ExtensionValueFactory.register(id_BasicConstraints,"BasicConstraints",BasicConstraints$1);ExtensionValueFactory.register(id_MicrosoftCaVersion,"MicrosoftCaVersion",CAVersion);ExtensionValueFactory.register(id_CertificatePolicies,"CertificatePolicies",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftAppPolicies,"CertificatePoliciesMicrosoft",CertificatePolicies$1);ExtensionValueFactory.register(id_MicrosoftCertTemplateV2,"MicrosoftCertTemplateV2",CertificateTemplate);ExtensionValueFactory.register(id_CRLDistributionPoints,"CRLDistributionPoints",CRLDistributionPoints$1);ExtensionValueFactory.register(id_FreshestCRL,"FreshestCRL",CRLDistributionPoints$1);ExtensionValueFactory.register(id_ExtKeyUsage,"ExtKeyUsage",ExtKeyUsage);ExtensionValueFactory.register(id_CertificateIssuer,"CertificateIssuer",GeneralNames$2);ExtensionValueFactory.register(id_AuthorityInfoAccess,"AuthorityInfoAccess",InfoAccess);ExtensionValueFactory.register(id_SubjectInfoAccess,"SubjectInfoAccess",InfoAccess);ExtensionValueFactory.register(id_IssuingDistributionPoint,"IssuingDistributionPoint",IssuingDistributionPoint$1);ExtensionValueFactory.register(id_NameConstraints,"NameConstraints",NameConstraints$1);ExtensionValueFactory.register(id_PolicyConstraints,"PolicyConstraints",PolicyConstraints$1);ExtensionValueFactory.register(id_PolicyMappings,"PolicyMappings",PolicyMappings$1);ExtensionValueFactory.register(id_PrivateKeyUsagePeriod,"PrivateKeyUsagePeriod",PrivateKeyUsagePeriod$1);ExtensionValueFactory.register(id_QCStatements,"QCStatements",QCStatements);ExtensionValueFactory.register(id_SignedCertificateTimestampList,"SignedCertificateTimestampList",SignedCertificateTimestampList);ExtensionValueFactory.register(id_SubjectDirectoryAttributes,"SubjectDirectoryAttributes",SubjectDirectoryAttributes$1)}return this.types}static fromBER(e,t){const r=fromBER(t);if(r.offset===-1){return null}const i=this.find(e);if(i){try{return new i.type({schema:r.result})}catch(t){const r=new i.type;r.parsingError=`Incorrectly formatted value of extension ${i.name} (${e})`;return r}}return r.result}static find(e){const t=this.getItems();return t[e]||null}static register(e,t,r){this.getItems()[e]={name:t,type:r}}}const EXTN_ID="extnID";const CRITICAL="critical";const EXTN_VALUE="extnValue";const PARSED_VALUE$5="parsedValue";const CLEAR_PROPS$10=[EXTN_ID,CRITICAL,EXTN_VALUE];class Extension$2 extends PkiObject{constructor(e={}){super();this.extnID=getParametersValue(e,EXTN_ID,Extension$2.defaultValues(EXTN_ID));this.critical=getParametersValue(e,CRITICAL,Extension$2.defaultValues(CRITICAL));if(EXTN_VALUE in e){this.extnValue=new OctetString$1({valueHex:e.extnValue})}else{this.extnValue=Extension$2.defaultValues(EXTN_VALUE)}if(PARSED_VALUE$5 in e){this.parsedValue=getParametersValue(e,PARSED_VALUE$5,Extension$2.defaultValues(PARSED_VALUE$5))}if(e.schema){this.fromSchema(e.schema)}}get parsedValue(){if(this._parsedValue===undefined){const e=ExtensionValueFactory.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||undefined}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case EXTN_ID:return EMPTY_STRING;case CRITICAL:return false;case EXTN_VALUE:return new OctetString$1;case PARSED_VALUE$5:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[new ObjectIdentifier$1({name:t.extnID||EMPTY_STRING}),new Boolean$1({name:t.critical||EMPTY_STRING,optional:true}),new OctetString$1({name:t.extnValue||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$10);const t=compareSchema(e,e,Extension$2.schema({names:{extnID:EXTN_ID,critical:CRITICAL,extnValue:EXTN_VALUE}}));AsnError.assertSchema(t,this.className);this.extnID=t.result.extnID.valueBlock.toString();if(CRITICAL in t.result){this.critical=t.result.critical.valueBlock.value}this.extnValue=t.result.extnValue}toSchema(){const e=[];e.push(new ObjectIdentifier$1({value:this.extnID}));if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.push(new Boolean$1({value:this.critical}))}e.push(this.extnValue);return new Sequence({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};if(this.critical!==Extension$2.defaultValues(CRITICAL)){e.critical=this.critical}if(this.parsedValue&&this.parsedValue.toJSON){e.parsedValue=this.parsedValue.toJSON()}return e}}Extension$2.CLASS_NAME="Extension";const EXTENSIONS$5="extensions";const CLEAR_PROPS$$=[EXTENSIONS$5];class Extensions$1 extends PkiObject{constructor(e={}){super();this.extensions=getParametersValue(e,EXTENSIONS$5,Extensions$1.defaultValues(EXTENSIONS$5));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case EXTENSIONS$5:return[];default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Sequence({optional:t,name:r.blockName||EMPTY_STRING,value:[new Repeated({name:r.extensions||EMPTY_STRING,value:Extension$2.schema(r.extension||{})})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$$);const t=compareSchema(e,e,Extensions$1.schema({names:{extensions:EXTENSIONS$5}}));AsnError.assertSchema(t,this.className);this.extensions=Array.from(t.result.extensions,(e=>new Extension$2({schema:e})))}toSchema(){return new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}Extensions$1.CLASS_NAME="Extensions";const TYPE$1="type";const VALUE$4="value";const UTC_TIME_NAME="utcTimeName";const GENERAL_TIME_NAME="generalTimeName";const CLEAR_PROPS$R=[UTC_TIME_NAME,GENERAL_TIME_NAME];var TimeType;(function(e){e[e["UTCTime"]=0]="UTCTime";e[e["GeneralizedTime"]=1]="GeneralizedTime";e[e["empty"]=2]="empty"})(TimeType||(TimeType={}));class Time$1 extends PkiObject{constructor(e={}){super();this.type=getParametersValue(e,TYPE$1,Time$1.defaultValues(TYPE$1));this.value=getParametersValue(e,VALUE$4,Time$1.defaultValues(VALUE$4));if(e.schema){this.fromSchema(e.schema)}}static defaultValues(e){switch(e){case TYPE$1:return 0;case VALUE$4:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=false){const r=getParametersValue(e,"names",{});return new Choice({optional:t,value:[new UTCTime({name:r.utcTimeName||EMPTY_STRING}),new GeneralizedTime({name:r.generalTimeName||EMPTY_STRING})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$R);const t=compareSchema(e,e,Time$1.schema({names:{utcTimeName:UTC_TIME_NAME,generalTimeName:GENERAL_TIME_NAME}}));AsnError.assertSchema(t,this.className);if(UTC_TIME_NAME in t.result){this.type=0;this.value=t.result.utcTimeName.toDate()}if(GENERAL_TIME_NAME in t.result){this.type=1;this.value=t.result.generalTimeName.toDate()}}toSchema(){if(this.type===0){return new UTCTime({valueDate:this.value})}else if(this.type===1){return new GeneralizedTime({valueDate:this.value})}return{}}toJSON(){return{type:this.type,value:this.value}}}Time$1.CLASS_NAME="Time";const TBS$4="tbs";const VERSION$f="version";const SERIAL_NUMBER$3="serialNumber";const SIGNATURE$4="signature";const ISSUER$2="issuer";const NOT_BEFORE="notBefore";const NOT_AFTER="notAfter";const SUBJECT$1="subject";const SUBJECT_PUBLIC_KEY_INFO="subjectPublicKeyInfo";const ISSUER_UNIQUE_ID="issuerUniqueID";const SUBJECT_UNIQUE_ID="subjectUniqueID";const EXTENSIONS$2="extensions";const SIGNATURE_ALGORITHM$5="signatureAlgorithm";const SIGNATURE_VALUE$2="signatureValue";const TBS_CERTIFICATE="tbsCertificate";const TBS_CERTIFICATE_VERSION=`${TBS_CERTIFICATE}.${VERSION$f}`;const TBS_CERTIFICATE_SERIAL_NUMBER=`${TBS_CERTIFICATE}.${SERIAL_NUMBER$3}`;const TBS_CERTIFICATE_SIGNATURE=`${TBS_CERTIFICATE}.${SIGNATURE$4}`;const TBS_CERTIFICATE_ISSUER=`${TBS_CERTIFICATE}.${ISSUER$2}`;const TBS_CERTIFICATE_NOT_BEFORE=`${TBS_CERTIFICATE}.${NOT_BEFORE}`;const TBS_CERTIFICATE_NOT_AFTER=`${TBS_CERTIFICATE}.${NOT_AFTER}`;const TBS_CERTIFICATE_SUBJECT=`${TBS_CERTIFICATE}.${SUBJECT$1}`;const TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY=`${TBS_CERTIFICATE}.${SUBJECT_PUBLIC_KEY_INFO}`;const TBS_CERTIFICATE_ISSUER_UNIQUE_ID=`${TBS_CERTIFICATE}.${ISSUER_UNIQUE_ID}`;const TBS_CERTIFICATE_SUBJECT_UNIQUE_ID=`${TBS_CERTIFICATE}.${SUBJECT_UNIQUE_ID}`;const TBS_CERTIFICATE_EXTENSIONS=`${TBS_CERTIFICATE}.${EXTENSIONS$2}`;const CLEAR_PROPS$Q=[TBS_CERTIFICATE,TBS_CERTIFICATE_VERSION,TBS_CERTIFICATE_SERIAL_NUMBER,TBS_CERTIFICATE_SIGNATURE,TBS_CERTIFICATE_ISSUER,TBS_CERTIFICATE_NOT_BEFORE,TBS_CERTIFICATE_NOT_AFTER,TBS_CERTIFICATE_SUBJECT,TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY,TBS_CERTIFICATE_ISSUER_UNIQUE_ID,TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,TBS_CERTIFICATE_EXTENSIONS,SIGNATURE_ALGORITHM$5,SIGNATURE_VALUE$2];function tbsCertificate(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||TBS_CERTIFICATE,value:[new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({name:t.tbsCertificateVersion||TBS_CERTIFICATE_VERSION})]}),new Integer({name:t.tbsCertificateSerialNumber||TBS_CERTIFICATE_SERIAL_NUMBER}),AlgorithmIdentifier$2.schema(t.signature||{names:{blockName:TBS_CERTIFICATE_SIGNATURE}}),RelativeDistinguishedNames.schema(t.issuer||{names:{blockName:TBS_CERTIFICATE_ISSUER}}),new Sequence({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[Time$1.schema(t.notBefore||{names:{utcTimeName:TBS_CERTIFICATE_NOT_BEFORE,generalTimeName:TBS_CERTIFICATE_NOT_BEFORE}}),Time$1.schema(t.notAfter||{names:{utcTimeName:TBS_CERTIFICATE_NOT_AFTER,generalTimeName:TBS_CERTIFICATE_NOT_AFTER}})]}),RelativeDistinguishedNames.schema(t.subject||{names:{blockName:TBS_CERTIFICATE_SUBJECT}}),PublicKeyInfo$1.schema(t.subjectPublicKeyInfo||{names:{blockName:TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY}}),new Primitive({name:t.tbsCertificateIssuerUniqueID||TBS_CERTIFICATE_ISSUER_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:1}}),new Primitive({name:t.tbsCertificateSubjectUniqueID||TBS_CERTIFICATE_SUBJECT_UNIQUE_ID,optional:true,idBlock:{tagClass:3,tagNumber:2}}),new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[Extensions$1.schema(t.extensions||{names:{blockName:TBS_CERTIFICATE_EXTENSIONS}})]})]})}class Certificate$1 extends PkiObject{constructor(e={}){super();this.tbsView=new Uint8Array(getParametersValue(e,TBS$4,Certificate$1.defaultValues(TBS$4)));this.version=getParametersValue(e,VERSION$f,Certificate$1.defaultValues(VERSION$f));this.serialNumber=getParametersValue(e,SERIAL_NUMBER$3,Certificate$1.defaultValues(SERIAL_NUMBER$3));this.signature=getParametersValue(e,SIGNATURE$4,Certificate$1.defaultValues(SIGNATURE$4));this.issuer=getParametersValue(e,ISSUER$2,Certificate$1.defaultValues(ISSUER$2));this.notBefore=getParametersValue(e,NOT_BEFORE,Certificate$1.defaultValues(NOT_BEFORE));this.notAfter=getParametersValue(e,NOT_AFTER,Certificate$1.defaultValues(NOT_AFTER));this.subject=getParametersValue(e,SUBJECT$1,Certificate$1.defaultValues(SUBJECT$1));this.subjectPublicKeyInfo=getParametersValue(e,SUBJECT_PUBLIC_KEY_INFO,Certificate$1.defaultValues(SUBJECT_PUBLIC_KEY_INFO));if(ISSUER_UNIQUE_ID in e){this.issuerUniqueID=getParametersValue(e,ISSUER_UNIQUE_ID,Certificate$1.defaultValues(ISSUER_UNIQUE_ID))}if(SUBJECT_UNIQUE_ID in e){this.subjectUniqueID=getParametersValue(e,SUBJECT_UNIQUE_ID,Certificate$1.defaultValues(SUBJECT_UNIQUE_ID))}if(EXTENSIONS$2 in e){this.extensions=getParametersValue(e,EXTENSIONS$2,Certificate$1.defaultValues(EXTENSIONS$2))}this.signatureAlgorithm=getParametersValue(e,SIGNATURE_ALGORITHM$5,Certificate$1.defaultValues(SIGNATURE_ALGORITHM$5));this.signatureValue=getParametersValue(e,SIGNATURE_VALUE$2,Certificate$1.defaultValues(SIGNATURE_VALUE$2));if(e.schema){this.fromSchema(e.schema)}}get tbs(){return build.BufferSourceConverter.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case TBS$4:return EMPTY_BUFFER;case VERSION$f:return 0;case SERIAL_NUMBER$3:return new Integer;case SIGNATURE$4:return new AlgorithmIdentifier$2;case ISSUER$2:return new RelativeDistinguishedNames;case NOT_BEFORE:return new Time$1;case NOT_AFTER:return new Time$1;case SUBJECT$1:return new RelativeDistinguishedNames;case SUBJECT_PUBLIC_KEY_INFO:return new PublicKeyInfo$1;case ISSUER_UNIQUE_ID:return EMPTY_BUFFER;case SUBJECT_UNIQUE_ID:return EMPTY_BUFFER;case EXTENSIONS$2:return[];case SIGNATURE_ALGORITHM$5:return new AlgorithmIdentifier$2;case SIGNATURE_VALUE$2:return new BitString$1;default:return super.defaultValues(e)}}static schema(e={}){const t=getParametersValue(e,"names",{});return new Sequence({name:t.blockName||EMPTY_STRING,value:[tbsCertificate(t.tbsCertificate),AlgorithmIdentifier$2.schema(t.signatureAlgorithm||{names:{blockName:SIGNATURE_ALGORITHM$5}}),new BitString$1({name:t.signatureValue||SIGNATURE_VALUE$2})]})}fromSchema(e){clearProps(e,CLEAR_PROPS$Q);const t=compareSchema(e,e,Certificate$1.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:TBS_CERTIFICATE_EXTENSIONS}}}}}}));AsnError.assertSchema(t,this.className);this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView;if(TBS_CERTIFICATE_VERSION in t.result)this.version=t.result[TBS_CERTIFICATE_VERSION].valueBlock.valueDec;this.serialNumber=t.result[TBS_CERTIFICATE_SERIAL_NUMBER];this.signature=new AlgorithmIdentifier$2({schema:t.result[TBS_CERTIFICATE_SIGNATURE]});this.issuer=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_ISSUER]});this.notBefore=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_BEFORE]});this.notAfter=new Time$1({schema:t.result[TBS_CERTIFICATE_NOT_AFTER]});this.subject=new RelativeDistinguishedNames({schema:t.result[TBS_CERTIFICATE_SUBJECT]});this.subjectPublicKeyInfo=new PublicKeyInfo$1({schema:t.result[TBS_CERTIFICATE_SUBJECT_PUBLIC_KEY]});if(TBS_CERTIFICATE_ISSUER_UNIQUE_ID in t.result)this.issuerUniqueID=t.result[TBS_CERTIFICATE_ISSUER_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_SUBJECT_UNIQUE_ID in t.result)this.subjectUniqueID=t.result[TBS_CERTIFICATE_SUBJECT_UNIQUE_ID].valueBlock.valueHex;if(TBS_CERTIFICATE_EXTENSIONS in t.result)this.extensions=Array.from(t.result[TBS_CERTIFICATE_EXTENSIONS],(e=>new Extension$2({schema:e})));this.signatureAlgorithm=new AlgorithmIdentifier$2({schema:t.result.signatureAlgorithm});this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:0},value:[new Integer({value:this.version})]}))}e.push(this.serialNumber);e.push(this.signature.toSchema());e.push(this.issuer.toSchema());e.push(new Sequence({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]}));e.push(this.subject.toSchema());e.push(this.subjectPublicKeyInfo.toSchema());if(this.issuerUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID}))}if(this.subjectUniqueID){e.push(new Primitive({optional:true,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID}))}if(this.extensions){e.push(new Constructed({optional:true,idBlock:{tagClass:3,tagNumber:3},value:[new Sequence({value:Array.from(this.extensions,(e=>e.toSchema()))})]}))}return new Sequence({value:e})}toSchema(e=false){let t;if(e===false){if(!this.tbsView.byteLength){return Certificate$1.schema().value[0]}const e=fromBER(this.tbsView);AsnError.assert(e,"TBS Certificate");t=e.result}else{t=this.encodeTBS()}return new Sequence({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:build.Convert.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if(VERSION$f in this&&this.version!==Certificate$1.defaultValues(VERSION$f)){e.version=this.version}if(this.issuerUniqueID){e.issuerUniqueID=build.Convert.ToHex(this.issuerUniqueID)}if(this.subjectUniqueID){e.subjectUniqueID=build.Convert.ToHex(this.subjectUniqueID)}if(this.extensions){e.extensions=Array.from(this.extensions,(e=>e.toJSON()))}return e}async getPublicKey(e,t=getCrypto(true)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=getCrypto(true)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",r=getCrypto(true)){if(!e){throw new Error("Need to provide a private key for signing")}const i=await r.getSignatureParameters(e,t);const n=i.parameters;this.signature=i.signatureAlgorithm;this.signatureAlgorithm=i.signatureAlgorithm;this.tbsView=new Uint8Array(this.encodeTBS().toBER());const s=await r.signWithPrivateKey(this.tbsView,e,n);this.signatureValue=new BitString$1({valueHex:s})}async verify(e,t=getCrypto(true)){let r;if(e){r=e.subjectPublicKeyInfo}else if(this.issuer.isEqual(this.subject)){r=this.subjectPublicKeyInfo}if(!(r instanceof PublicKeyInfo$1)){throw new Error("Please provide issuer certificate as a parameter")}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,r,this.signatureAlgorithm)}}Certificate$1.CLASS_NAME="Certificate";var ChainValidationCode;(function(e){e[e["unknown"]=-1]="unknown";e[e["success"]=0]="success";e[e["noRevocation"]=11]="noRevocation";e[e["noPath"]=60]="noPath";e[e["noValidPath"]=97]="noValidPath"})(ChainValidationCode||(ChainValidationCode={}));var PKIStatus;(function(e){e[e["granted"]=0]="granted";e[e["grantedWithMods"]=1]="grantedWithMods";e[e["rejection"]=2]="rejection";e[e["waiting"]=3]="waiting";e[e["revocationWarning"]=4]="revocationWarning";e[e["revocationNotification"]=5]="revocationNotification"})(PKIStatus||(PKIStatus={}));function initCryptoEngine(){if(typeof self!=="undefined"){if("crypto"in self){let e="webcrypto";if("webkitSubtle"in self.crypto){e="safari"}setEngine(e,new CryptoEngine({name:e,crypto}))}}else if(typeof crypto!=="undefined"&&"webcrypto"in crypto){const e="NodeJS ^15";const t=crypto.webcrypto;setEngine(e,new CryptoEngine({name:e,crypto:t}))}}initCryptoEngine();function __decorate(e,t,r,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)if(a=e[o])s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s;return n>3&&s&&Object.defineProperty(t,r,s),s}function __awaiter$1(e,t,r,i){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(i.next(e))}catch(e){s(e)}}function o(e){try{f(i["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):n(e.value).then(a,o)}f((i=i.apply(e,t||[])).next())}))}function __classPrivateFieldGet(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)}function __classPrivateFieldSet(e,t,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r}let engineCrypto=null;class Application{static setEngine(e,t){try{engineCrypto=Object.assign(t,{name:e})}catch(e){console.error(e);engineCrypto=t}setEngine(e,new CryptoEngine({name:e,crypto:t}))}static get crypto(){if(!engineCrypto){throw new XmlError(XE.CRYPTOGRAPHIC_NO_MODULE)}return engineCrypto}static isNodePlugin(){return typeof self==="undefined"&&typeof window==="undefined"}}function init(){if(!Application.isNodePlugin()){Application.setEngine("W3 WebCrypto module",self.crypto)}}init();class XmlAlgorithm{getAlgorithmName(){return this.namespaceURI}}class HashAlgorithm extends XmlAlgorithm{async Digest(e){let t;if(typeof e==="string"){t=Convert.FromString(e,"utf8")}else if(ArrayBuffer.isView(e)){t=new Uint8Array(e.buffer)}else if(e instanceof ArrayBuffer){t=new Uint8Array(e)}else{const r=(new XMLSerializer).serializeToString(e);t=Convert.FromString(r,"utf8")}const r=await Application.crypto.subtle.digest(this.algorithm,t);return new Uint8Array(r)}}class SignatureAlgorithm extends XmlAlgorithm{async Sign(e,t,r){const i=Convert.FromString(e,"utf8");return Application.crypto.subtle.sign(r,t,i)}async Verify(e,t,r,i){const n=Convert.FromString(e,"utf8");return Application.crypto.subtle.verify(i||this.algorithm,t,r,n)}}const SHA1="SHA-1";const SHA256="SHA-256";const SHA384="SHA-384";const SHA512="SHA-512";const SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#sha1";const SHA256_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha256";const SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#sha384";const SHA512_NAMESPACE="http://www.w3.org/2001/04/xmlenc#sha512";class Sha1$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA1};this.namespaceURI=SHA1_NAMESPACE}}class Sha256$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA256};this.namespaceURI=SHA256_NAMESPACE}}class Sha384 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA384};this.namespaceURI=SHA384_NAMESPACE}}class Sha512$1 extends HashAlgorithm{constructor(){super(...arguments);this.algorithm={name:SHA512};this.namespaceURI=SHA512_NAMESPACE}}const ECDSA$1="ECDSA";const ECDSA_SHA1_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1";const ECDSA_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256";const ECDSA_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384";const ECDSA_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512";class EcdsaSha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA1}};this.namespaceURI=ECDSA_SHA1_NAMESPACE}}class EcdsaSha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA256}};this.namespaceURI=ECDSA_SHA256_NAMESPACE}}class EcdsaSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA384}};this.namespaceURI=ECDSA_SHA384_NAMESPACE}}class EcdsaSha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:ECDSA$1,hash:{name:SHA512}};this.namespaceURI=ECDSA_SHA512_NAMESPACE}}const HMAC="HMAC";const HMAC_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#hmac-sha1";const HMAC_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha256";const HMAC_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha384";const HMAC_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#hmac-sha512";class HmacSha1$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA1}};this.namespaceURI=HMAC_SHA1_NAMESPACE}}class HmacSha256$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA256}};this.namespaceURI=HMAC_SHA256_NAMESPACE}}class HmacSha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA384}};this.namespaceURI=HMAC_SHA384_NAMESPACE}}class HmacSha512$1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:HMAC,hash:{name:SHA512}};this.namespaceURI=HMAC_SHA512_NAMESPACE}}const RSA_PKCS1="RSASSA-PKCS1-v1_5";const RSA_PKCS1_SHA1_NAMESPACE="http://www.w3.org/2000/09/xmldsig#rsa-sha1";const RSA_PKCS1_SHA256_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256";const RSA_PKCS1_SHA384_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha384";const RSA_PKCS1_SHA512_NAMESPACE="http://www.w3.org/2001/04/xmldsig-more#rsa-sha512";class RsaPkcs1Sha1 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA1}};this.namespaceURI=RSA_PKCS1_SHA1_NAMESPACE}}class RsaPkcs1Sha256 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA256}};this.namespaceURI=RSA_PKCS1_SHA256_NAMESPACE}}class RsaPkcs1Sha384 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA384}};this.namespaceURI=RSA_PKCS1_SHA384_NAMESPACE}}class RsaPkcs1Sha512 extends SignatureAlgorithm{constructor(){super(...arguments);this.algorithm={name:RSA_PKCS1,hash:{name:SHA512}};this.namespaceURI=RSA_PKCS1_SHA512_NAMESPACE}}const RSA_PSS$1="RSA-PSS";const RSA_PSS_WITH_PARAMS_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#rsa-pss";class RsaPssBase extends SignatureAlgorithm{constructor(e){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1}};this.namespaceURI=RSA_PSS_WITH_PARAMS_NAMESPACE;if(e){this.algorithm.saltLength=e}}}class RsaPssSha1 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA1}}class RsaPssSha256 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA256}}class RsaPssSha384 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA384}}class RsaPssSha512 extends RsaPssBase{constructor(e){super(e);this.algorithm.hash.name=SHA512}}const RSA_PSS_SHA1_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha1-rsa-MGF1";const RSA_PSS_SHA256_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha256-rsa-MGF1";const RSA_PSS_SHA384_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha384-rsa-MGF1";const RSA_PSS_SHA512_NAMESPACE="http://www.w3.org/2007/05/xmldsig-more#sha512-rsa-MGF1";class RsaPssWithoutParamsBase extends SignatureAlgorithm{constructor(){super();this.algorithm={name:RSA_PSS$1,hash:{name:SHA1}};this.namespaceURI=RSA_PSS_SHA1_NAMESPACE}}class RsaPssWithoutParamsSha1 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA1;this.algorithm.saltLength=20}}class RsaPssWithoutParamsSha256 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA256;this.algorithm.saltLength=32}}class RsaPssWithoutParamsSha384 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA384;this.algorithm.saltLength=48}}class RsaPssWithoutParamsSha512 extends RsaPssWithoutParamsBase{constructor(){super();this.algorithm.hash.name=SHA512;this.algorithm.saltLength=64}}var XmlCanonicalizerState;(function(e){e[e["BeforeDocElement"]=0]="BeforeDocElement";e[e["InsideDocElement"]=1]="InsideDocElement";e[e["AfterDocElement"]=2]="AfterDocElement"})(XmlCanonicalizerState||(XmlCanonicalizerState={}));class XmlCanonicalizer{constructor(e,t,r=new NamespaceManager){this.propagatedNamespaces=new NamespaceManager;this.result=[];this.visibleNamespaces=new NamespaceManager;this.inclusiveNamespacesPrefixList=[];this.state=XmlCanonicalizerState.BeforeDocElement;this.withComments=e;this.exclusive=t;this.propagatedNamespaces=r}get InclusiveNamespacesPrefixList(){return this.inclusiveNamespacesPrefixList.join(" ")}set InclusiveNamespacesPrefixList(e){this.inclusiveNamespacesPrefixList=e.split(" ")}Canonicalize(e){if(!e){throw new XmlError(XE.CRYPTOGRAPHIC,"Parameter 1 is not Node")}this.WriteNode(e);const t=this.result.join("");return t}WriteNode(e){switch(e.nodeType){case XmlNodeType.Document:case XmlNodeType.DocumentFragment:this.WriteDocumentNode(e);break;case XmlNodeType.Element:this.WriteElementNode(e);break;case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Text:if(!isDocument(e.parentNode)){this.WriteTextNode(e)}break;case XmlNodeType.Whitespace:if(this.state===XmlCanonicalizerState.InsideDocElement){this.WriteTextNode(e)}break;case XmlNodeType.Comment:this.WriteCommentNode(e);break;case XmlNodeType.ProcessingInstruction:this.WriteProcessingInstructionNode(e);break;case XmlNodeType.EntityReference:for(let t=0;t<e.childNodes.length;t++){this.WriteNode(e.childNodes[t])}break;case XmlNodeType.Attribute:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndElement:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here");case XmlNodeType.EndEntity:throw new XmlError(XE.CRYPTOGRAPHIC,"Attribute node is impossible here")}}WriteDocumentNode(e){this.state=XmlCanonicalizerState.BeforeDocElement;for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}}WriteCommentNode(e){if(this.withComments){if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push(String.fromCharCode(10)+"\x3c!--")}else{this.result.push("\x3c!--")}this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Comment));if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("--\x3e"+String.fromCharCode(10))}else{this.result.push("--\x3e")}}}WriteTextNode(e){this.result.push(this.NormalizeString(e.nodeValue,e.nodeType))}WriteProcessingInstructionNode(e){const t=e.nodeName||e.tagName;if(t==="xml"){return}if(this.state===XmlCanonicalizerState.AfterDocElement){this.result.push("\n<?")}else{this.result.push("<?")}this.result.push(t);if(e.nodeValue){this.result.push(" ");this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.ProcessingInstruction))}if(this.state===XmlCanonicalizerState.BeforeDocElement){this.result.push("?>\n")}else{this.result.push("?>")}}WriteElementNode(e){const t=this.state;if(this.state===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.InsideDocElement}this.result.push("<");this.result.push(e.nodeName);let r=this.WriteNamespacesAxis(e);this.WriteAttributesAxis(e);this.result.push(">");for(let t=e.firstChild;t!=null;t=t.nextSibling){this.WriteNode(t)}this.result.push("</");this.result.push(e.nodeName);this.result.push(">");if(t===XmlCanonicalizerState.BeforeDocElement){this.state=XmlCanonicalizerState.AfterDocElement}while(r--){this.visibleNamespaces.Pop()}}WriteNamespacesAxis(e){const t=[];let r=0;for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i];if(!IsNamespaceNode(n)){if(n.prefix&&!this.IsNamespaceRendered(n.prefix,n.namespaceURI)){const e={prefix:n.prefix,namespace:n.namespaceURI};t.push(e);this.visibleNamespaces.Add(e);r++}continue}if(n.localName==="xmlns"&&!n.prefix&&!n.nodeValue){const e={prefix:n.prefix,namespace:n.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}let s=null;let a;if(a=/xmlns:([\w\.-]+)/.exec(n.nodeName)){s=a[1]}let o=true;if(this.exclusive&&!this.IsNamespaceInclusive(e,s)){const t=IsNamespaceUsed(e,s);if(t>1){o=false}else if(t===0){continue}}if(this.IsNamespaceRendered(s,n.nodeValue)){continue}if(o){const e={prefix:s,namespace:n.nodeValue};t.push(e);this.visibleNamespaces.Add(e);r++}}if(!this.IsNamespaceRendered(e.prefix,e.namespaceURI)&&e.namespaceURI!=="http://www.w3.org/2000/xmlns/"){const i={prefix:e.prefix,namespace:e.namespaceURI};t.push(i);this.visibleNamespaces.Add(i);r++}t.sort(XmlDsigC14NTransformNamespacesComparer);let i=null;t.forEach((e=>{if(e.prefix===i){return}i=e.prefix;this.result.push(" xmlns");if(e.prefix){this.result.push(":"+e.prefix)}this.result.push('="');this.result.push(e.namespace);this.result.push('"')}));return r}WriteAttributesAxis(e){const t=[];for(let r=0;r<e.attributes.length;r++){const i=e.attributes[r];if(!IsNamespaceNode(i)){t.push(i)}}t.sort(XmlDsigC14NTransformAttributesComparer);t.forEach((e=>{if(e!=null){this.result.push(" ");this.result.push(e.nodeName);this.result.push('="');this.result.push(this.NormalizeString(e.nodeValue,XmlNodeType.Attribute));this.result.push('"')}}))}NormalizeString(e,t){const r=[];if(e){for(let i=0;i<e.length;i++){const n=e[i];if(n==="<"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&lt;")}else if(n===">"&&this.IsTextNode(t)){r.push("&gt;")}else if(n==="&"&&(t===XmlNodeType.Attribute||this.IsTextNode(t))){r.push("&amp;")}else if(n==='"'&&t===XmlNodeType.Attribute){r.push("&quot;")}else if(n==="\t"&&t===XmlNodeType.Attribute){r.push("&#x9;")}else if(n==="\n"&&t===XmlNodeType.Attribute){r.push("&#xA;")}else if(n==="\r"){r.push("&#xD;")}else{r.push(n)}}}return r.join("")}IsTextNode(e){switch(e){case XmlNodeType.Text:case XmlNodeType.CDATA:case XmlNodeType.SignificantWhitespace:case XmlNodeType.Whitespace:return true}return false}IsNamespaceInclusive(e,t){const r=t||null;if(e.prefix===r){return false}return this.inclusiveNamespacesPrefixList.indexOf(r||"")!==-1}IsNamespaceRendered(e,t){e=e||"";t=t||"";if(!e&&!t){return true}if(e==="xml"&&t==="http://www.w3.org/XML/1998/namespace"){return true}const r=this.visibleNamespaces.GetPrefix(e);if(r){return r.namespace===t}return false}}function XmlDsigC14NTransformNamespacesComparer(e,t){if(e==t){return 0}else if(!e){return-1}else if(!t){return 1}else if(!e.prefix){return-1}else if(!t.prefix){return 1}else if(e.prefix<t.prefix){return-1}else if(e.prefix>t.prefix){return 1}else{return 0}}function XmlDsigC14NTransformAttributesComparer(e,t){if(!e.namespaceURI&&t.namespaceURI){return-1}if(!t.namespaceURI&&e.namespaceURI){return 1}const r=e.namespaceURI+e.localName;const i=t.namespaceURI+t.localName;if(r===i){return 0}else if(r<i){return-1}else{return 1}}function IsNamespaceUsed(e,t,r=0){const i=t||null;if(e.prefix===i){return++r}if(e.attributes){for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i];if(!IsNamespaceNode(n)&&t&&e.attributes[i].prefix===t){return++r}}}for(let i=e.firstChild;!!i;i=i.nextSibling){if(i.nodeType===XmlNodeType.Element){const e=i;const n=IsNamespaceUsed(e,t,r);if(i.nodeType===XmlNodeType.Element&&n){return++r+n}}}return r}function IsNamespaceNode(e){const t=/xmlns:/;if(e!==null&&e.nodeType===XmlNodeType.Attribute&&(e.nodeName==="xmlns"||t.test(e.nodeName))){return true}return false}const XmlSignature={DefaultCanonMethod:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",DefaultDigestMethod:"http://www.w3.org/2001/04/xmlenc#sha256",DefaultPrefix:"ds",ElementNames:{CanonicalizationMethod:"CanonicalizationMethod",DigestMethod:"DigestMethod",DigestValue:"DigestValue",DSAKeyValue:"DSAKeyValue",DomainParameters:"DomainParameters",EncryptedKey:"EncryptedKey",HMACOutputLength:"HMACOutputLength",RSAPSSParams:"RSAPSSParams",MaskGenerationFunction:"MaskGenerationFunction",SaltLength:"SaltLength",KeyInfo:"KeyInfo",KeyName:"KeyName",KeyValue:"KeyValue",Modulus:"Modulus",Exponent:"Exponent",Manifest:"Manifest",Object:"Object",Reference:"Reference",RetrievalMethod:"RetrievalMethod",RSAKeyValue:"RSAKeyValue",ECDSAKeyValue:"ECDSAKeyValue",NamedCurve:"NamedCurve",PublicKey:"PublicKey",Signature:"Signature",SignatureMethod:"SignatureMethod",SignatureValue:"SignatureValue",SignedInfo:"SignedInfo",Transform:"Transform",Transforms:"Transforms",X509Data:"X509Data",PGPData:"PGPData",SPKIData:"SPKIData",SPKIexp:"SPKIexp",MgmtData:"MgmtData",X509IssuerSerial:"X509IssuerSerial",X509IssuerName:"X509IssuerName",X509SerialNumber:"X509SerialNumber",X509SKI:"X509SKI",X509SubjectName:"X509SubjectName",X509Certificate:"X509Certificate",X509CRL:"X509CRL",XPath:"XPath",X:"X",Y:"Y"},AttributeNames:{Algorithm:"Algorithm",Encoding:"Encoding",Id:"Id",MimeType:"MimeType",Type:"Type",URI:"URI"},AlgorithmNamespaces:{XmlDsigBase64Transform:"http://www.w3.org/2000/09/xmldsig#base64",XmlDsigC14NTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315",XmlDsigC14NWithCommentsTransform:"http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments",XmlDsigEnvelopedSignatureTransform:"http://www.w3.org/2000/09/xmldsig#enveloped-signature",XmlDsigXPathTransform:"http://www.w3.org/TR/1999/REC-xpath-19991116",XmlDsigXsltTransform:"http://www.w3.org/TR/1999/REC-xslt-19991116",XmlDsigExcC14NTransform:"http://www.w3.org/2001/10/xml-exc-c14n#",XmlDsigExcC14NWithCommentsTransform:"http://www.w3.org/2001/10/xml-exc-c14n#WithComments",XmlDecryptionTransform:"http://www.w3.org/2002/07/decrypt#XML",XmlLicenseTransform:"urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform"},Uri:{Manifest:"http://www.w3.org/2000/09/xmldsig#Manifest"},NamespaceURI:"http://www.w3.org/2000/09/xmldsig#",NamespaceURIMore:"http://www.w3.org/2007/05/xmldsig-more#",NamespaceURIPss:"http://www.example.org/xmldsig-pss/#"};let XmlSignatureObject=class e extends XmlObject{};XmlSignatureObject=__decorate([XmlElement({localName:"xmldsig",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureObject);let XmlSignatureCollection=class e extends XmlCollection{};XmlSignatureCollection=__decorate([XmlElement({localName:"xmldsig_collection",namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix})],XmlSignatureCollection);class KeyInfoClause extends XmlSignatureObject{}let CanonicalizationMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultCanonMethod})],CanonicalizationMethod.prototype,"Algorithm",void 0);CanonicalizationMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.CanonicalizationMethod})],CanonicalizationMethod);let DataObject=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],DataObject.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.MimeType,defaultValue:""})],DataObject.prototype,"MimeType",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Encoding,defaultValue:""})],DataObject.prototype,"Encoding",void 0);DataObject=__decorate([XmlElement({localName:XmlSignature.ElementNames.Object})],DataObject);let DataObjects=class e extends XmlSignatureCollection{};DataObjects=__decorate([XmlElement({localName:"xmldsig_objects",parser:DataObject})],DataObjects);let DigestMethod=class e extends XmlSignatureObject{constructor(e){super();if(e){this.Algorithm=e}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:XmlSignature.DefaultDigestMethod})],DigestMethod.prototype,"Algorithm",void 0);DigestMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.DigestMethod})],DigestMethod);let KeyInfo=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element){continue}let i=null;switch(r.localName){case XmlSignature.ElementNames.KeyValue:i=KeyValue;break;case XmlSignature.ElementNames.X509Data:i=KeyInfoX509Data;break;case XmlSignature.ElementNames.SPKIData:i=SPKIData;break}if(i){const e=new i;e.LoadXml(r);this.Add(e)}}}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],KeyInfo.prototype,"Id",void 0);KeyInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyInfo})],KeyInfo);let Transform=class e extends XmlSignatureObject{constructor(){super(...arguments);this.innerXml=null}GetOutput(){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}LoadInnerXml(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"node")}this.innerXml=e}GetInnerXml(){return this.innerXml}};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:""})],Transform.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,defaultValue:""})],Transform.prototype,"XPath",void 0);Transform=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transform})],Transform);class XmlDsigBase64Transform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return Convert.FromString(this.innerXml.textContent||"","base64")}}class XmlDsigC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315";this.xmlCanonicalizer=new XmlCanonicalizer(false,false)}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}}class XmlDsigC14NWithCommentsTransform extends XmlDsigC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,false)}}class XmlDsigEnvelopedSignatureTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"}GetOutput(){var e;if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}let t=this.innerXml.firstChild;const r=[];while(t){if(isElement(t)&&t.localName===XmlSignature.ElementNames.Signature&&t.namespaceURI===XmlSignature.NamespaceURI){r.push(t)}t=t.nextSibling}for(const t of r){(e=t.parentNode)===null||e===void 0?void 0:e.removeChild(t)}return this.innerXml}}class XmlDsigExcC14NTransform extends Transform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#";this.xmlCanonicalizer=new XmlCanonicalizer(false,true)}get InclusiveNamespacesPrefixList(){return this.xmlCanonicalizer.InclusiveNamespacesPrefixList}set InclusiveNamespacesPrefixList(e){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=e}LoadXml(e){super.LoadXml(e);if(this.Element&&this.Element.childNodes){for(let e=0;e<this.Element.childNodes.length;e++){const t=this.Element.childNodes[e];if(t&&t.nodeType===1){switch(t.localName){case"InclusiveNamespaces":this.setInclusiveNamespacesElement(t);break}}}}}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}return this.xmlCanonicalizer.Canonicalize(this.innerXml)}setInclusiveNamespacesElement(e){const t=e.getAttribute("PrefixList");if(t&&t.length>0){this.xmlCanonicalizer.InclusiveNamespacesPrefixList=t}}}class XmlDsigExcC14NWithCommentsTransform extends XmlDsigExcC14NTransform{constructor(){super(...arguments);this.Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#WithComments";this.xmlCanonicalizer=new XmlCanonicalizer(true,true)}}function lookupParentNode(e){return e.parentNode?lookupParentNode(e.parentNode):e}class XmlDsigXPathTransform extends Transform{constructor(){super(...arguments);this.Algorithm=XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform}GetOutput(){if(!this.innerXml){throw new XmlError(XE.PARAM_REQUIRED,"innerXml")}this.Filter(lookupParentNode(this.innerXml),this.XPath)}Filter(e,t){const r=e.childNodes;const i=[];for(let e=0;r&&e<r.length;e++){const t=r.item(e);i.push(t)}i.forEach((e=>{if(this.Evaluate(e,t)){if(e.parentNode){e.parentNode.removeChild(e)}}else{this.Filter(e,t)}}))}GetEvaluator(e){if(typeof self!=="undefined"){return e.ownerDocument==null?e:e.ownerDocument}else{return require("xpath")}}Evaluate(e,t){try{const r=this.GetEvaluator(e);const i=this.GetXml().firstChild;const n=`boolean(${t})`;const s=r.evaluate(n,e,{lookupNamespaceURI:e=>i.lookupNamespaceURI(e)},(typeof self==="undefined"?require("xpath"):self).XPathResult.ANY_TYPE,null);return!s.booleanValue}catch(e){return false}}}__decorate([XmlChildElement({localName:XmlSignature.ElementNames.XPath,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],XmlDsigXPathTransform.prototype,"XPath",void 0);let Transforms=class e extends XmlSignatureCollection{OnLoadXml(e){super.OnLoadXml(e);this.items=this.GetIterator().map((e=>{switch(e.Algorithm){case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:return ChangeTransform(e,XmlDsigEnvelopedSignatureTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:return ChangeTransform(e,XmlDsigC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:return ChangeTransform(e,XmlDsigExcC14NTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:return ChangeTransform(e,XmlDsigExcC14NWithCommentsTransform);case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:return ChangeTransform(e,XmlDsigBase64Transform);case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:return ChangeTransform(e,XmlDsigXPathTransform);default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.Algorithm)}}))}};Transforms=__decorate([XmlElement({localName:XmlSignature.ElementNames.Transforms,parser:Transform})],Transforms);function ChangeTransform(e,t){const r=new t;r.LoadXml(e.Element);return r}let Reference=class e extends XmlSignatureObject{constructor(e){super();this.DigestMethod=new DigestMethod;if(e){this.Uri=e}}};__decorate([XmlAttribute({defaultValue:""})],Reference.prototype,"Id",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI})],Reference.prototype,"Uri",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Type,defaultValue:""})],Reference.prototype,"Type",void 0);__decorate([XmlChildElement({parser:Transforms})],Reference.prototype,"Transforms",void 0);__decorate([XmlChildElement({required:true,parser:DigestMethod})],Reference.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({required:true,localName:XmlSignature.ElementNames.DigestValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlBase64Converter})],Reference.prototype,"DigestValue",void 0);Reference=__decorate([XmlElement({localName:XmlSignature.ElementNames.Reference})],Reference);let References=class e extends XmlSignatureCollection{};References=__decorate([XmlElement({localName:"References",parser:Reference})],References);let SignatureMethodOther=class e extends XmlSignatureCollection{OnLoadXml(e){for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes.item(t);if(r.nodeType!==XmlNodeType.Element||r.nodeName===XmlSignature.ElementNames.HMACOutputLength){continue}let i;switch(r.localName){case XmlSignature.ElementNames.RSAPSSParams:i=PssAlgorithmParams;break}if(i){const e=new i;e.LoadXml(r);this.Add(e)}}}};SignatureMethodOther=__decorate([XmlElement({localName:"Other"})],SignatureMethodOther);let SignatureMethod=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,required:true,defaultValue:""})],SignatureMethod.prototype,"Algorithm",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.HMACOutputLength,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,converter:XmlNumberConverter})],SignatureMethod.prototype,"HMACOutputLength",void 0);__decorate([XmlChildElement({parser:SignatureMethodOther,noRoot:true,minOccurs:0})],SignatureMethod.prototype,"Any",void 0);SignatureMethod=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignatureMethod})],SignatureMethod);let SignedInfo=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],SignedInfo.prototype,"Id",void 0);__decorate([XmlChildElement({parser:CanonicalizationMethod,required:true})],SignedInfo.prototype,"CanonicalizationMethod",void 0);__decorate([XmlChildElement({parser:SignatureMethod,required:true})],SignedInfo.prototype,"SignatureMethod",void 0);__decorate([XmlChildElement({parser:References,minOccurs:1,noRoot:true})],SignedInfo.prototype,"References",void 0);SignedInfo=__decorate([XmlElement({localName:XmlSignature.ElementNames.SignedInfo})],SignedInfo);let Signature$2=class e extends XmlSignatureObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Id,defaultValue:""})],Signature$2.prototype,"Id",void 0);__decorate([XmlChildElement({parser:SignedInfo,required:true})],Signature$2.prototype,"SignedInfo",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SignatureValue,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter,defaultValue:null})],Signature$2.prototype,"SignatureValue",void 0);__decorate([XmlChildElement({parser:KeyInfo})],Signature$2.prototype,"KeyInfo",void 0);__decorate([XmlChildElement({parser:DataObjects,noRoot:true})],Signature$2.prototype,"ObjectList",void 0);Signature$2=__decorate([XmlElement({localName:XmlSignature.ElementNames.Signature})],Signature$2);const NAMESPACE_URI$1="http://www.w3.org/2001/04/xmldsig-more#";const PREFIX$1="ecdsa";let EcdsaPublicKey=class e extends XmlObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"X",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Y,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1,required:true,converter:XmlBase64Converter})],EcdsaPublicKey.prototype,"Y",void 0);EcdsaPublicKey=__decorate([XmlElement({localName:XmlSignature.ElementNames.PublicKey,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaPublicKey);let NamedCurve=class e extends XmlObject{};__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.URI,required:true})],NamedCurve.prototype,"Uri",void 0);NamedCurve=__decorate([XmlElement({localName:XmlSignature.ElementNames.NamedCurve,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],NamedCurve);let DomainParameters=class e extends XmlObject{};__decorate([XmlChildElement({parser:NamedCurve})],DomainParameters.prototype,"NamedCurve",void 0);DomainParameters=__decorate([XmlElement({localName:XmlSignature.ElementNames.DomainParameters,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],DomainParameters);let EcdsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.name=XmlSignature.ElementNames.ECDSAKeyValue;this.key=null;this.jwk=null;this.keyUsage=null}get NamedCurve(){return GetNamedCurveOid(this.DomainParameters.NamedCurve.Uri)}async importKey(e){if(e.algorithm.name.toUpperCase()!=="ECDSA"){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}const t=await Application.crypto.subtle.exportKey("jwk",e);this.key=e;this.jwk=t;this.PublicKey=new EcdsaPublicKey;this.PublicKey.X=Convert.FromString(t.x,"base64url");this.PublicKey.Y=Convert.FromString(t.y,"base64url");if(!this.DomainParameters){this.DomainParameters=new DomainParameters}if(!this.DomainParameters.NamedCurve){this.DomainParameters.NamedCurve=new NamedCurve}this.DomainParameters.NamedCurve.Uri=GetNamedCurveOid(t.crv);this.keyUsage=e.usages;return this}async exportKey(e){if(this.key){return this.key}const t=Convert.ToBase64Url(this.PublicKey.X);const r=Convert.ToBase64Url(this.PublicKey.Y);const i=GetNamedCurveFromOid(this.DomainParameters.NamedCurve.Uri);const n={kty:"EC",crv:i,x:t,y:r,ext:true};this.keyUsage=["verify"];const s=await Application.crypto.subtle.importKey("jwk",n,{name:"ECDSA",namedCurve:i},true,this.keyUsage);this.key=s;return this.key}};__decorate([XmlChildElement({parser:DomainParameters})],EcdsaKeyValue.prototype,"DomainParameters",void 0);__decorate([XmlChildElement({parser:EcdsaPublicKey,required:true})],EcdsaKeyValue.prototype,"PublicKey",void 0);EcdsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.ECDSAKeyValue,namespaceURI:NAMESPACE_URI$1,prefix:PREFIX$1})],EcdsaKeyValue);function GetNamedCurveOid(e){switch(e){case"K-256":return"urn:oid:1.3.132.0.10";case"P-256":return"urn:oid:1.2.840.10045.3.1.7";case"P-384":return"urn:oid:1.3.132.0.34";case"P-521":return"urn:oid:1.3.132.0.35"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve")}function GetNamedCurveFromOid(e){switch(e){case"urn:oid:1.3.132.0.10":return"K-256";case"urn:oid:1.2.840.10045.3.1.7":return"P-256";case"urn:oid:1.3.132.0.34":return"P-384";case"urn:oid:1.3.132.0.35":return"P-521"}throw new XmlError(XE.CRYPTOGRAPHIC,"Unknown NamedCurve OID")}var PssAlgorithmParams_1;const DEFAULT_ALGORITHM={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};let RsaKeyValue=class e extends KeyInfoClause{constructor(){super(...arguments);this.key=null;this.jwk=null;this.keyUsage=[]}async importKey(e){const t=e.algorithm.name.toUpperCase();if(t!==RSA_PKCS1.toUpperCase()&&t!==RSA_PSS$1.toUpperCase()){throw new XmlError(XE.ALGORITHM_WRONG_NAME,e.algorithm.name)}this.key=e;const r=await Application.crypto.subtle.exportKey("jwk",e);this.jwk=r;this.Modulus=Convert.FromBase64Url(r.n);this.Exponent=Convert.FromBase64Url(r.e);this.keyUsage=e.usages;return this}async exportKey(e=DEFAULT_ALGORITHM){if(this.key){return this.key}if(!this.Modulus){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Modulus")}const t=Convert.ToBase64Url(this.Modulus);if(!this.Exponent){throw new XmlError(XE.CRYPTOGRAPHIC,"RsaKeyValue has no Exponent")}const r=Convert.ToBase64Url(this.Exponent);let i;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():i="R";break;case RSA_PSS$1.toUpperCase():i="P";break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}switch(e.hash.name.toUpperCase()){case SHA1:i+="S1";break;case SHA256:i+="S256";break;case SHA384:i+="S384";break;case SHA512:i+="S512";break}const n={kty:"RSA",alg:i,n:t,e:r,ext:true};return Application.crypto.subtle.importKey("jwk",n,e,true,this.keyUsage)}LoadXml(e){super.LoadXml(e);this.keyUsage=["verify"]}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Modulus,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Modulus",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.Exponent,prefix:XmlSignature.DefaultPrefix,namespaceURI:XmlSignature.NamespaceURI,required:true,converter:XmlBase64Converter})],RsaKeyValue.prototype,"Exponent",void 0);RsaKeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAKeyValue})],RsaKeyValue);const NAMESPACE_URI="http://www.w3.org/2007/05/xmldsig-more#";const PREFIX="pss";let MaskGenerationFunction=class e extends XmlObject{};__decorate([XmlChildElement({parser:DigestMethod})],MaskGenerationFunction.prototype,"DigestMethod",void 0);__decorate([XmlAttribute({localName:XmlSignature.AttributeNames.Algorithm,defaultValue:"http://www.w3.org/2007/05/xmldsig-more#MGF1"})],MaskGenerationFunction.prototype,"Algorithm",void 0);MaskGenerationFunction=__decorate([XmlElement({localName:XmlSignature.ElementNames.MaskGenerationFunction,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],MaskGenerationFunction);let PssAlgorithmParams=PssAlgorithmParams_1=class e extends XmlObject{static FromAlgorithm(e){return new PssAlgorithmParams_1(e)}constructor(e){super();if(e){this.FromAlgorithm(e)}}FromAlgorithm(e){this.DigestMethod=new DigestMethod;const t=CryptoConfig.GetHashAlgorithm(e.hash);this.DigestMethod.Algorithm=t.namespaceURI;if(e.saltLength){this.SaltLength=e.saltLength}}};__decorate([XmlChildElement({parser:DigestMethod})],PssAlgorithmParams.prototype,"DigestMethod",void 0);__decorate([XmlChildElement({parser:MaskGenerationFunction})],PssAlgorithmParams.prototype,"MGF",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams.prototype,"SaltLength",void 0);__decorate([XmlChildElement({converter:XmlNumberConverter})],PssAlgorithmParams.prototype,"TrailerField",void 0);PssAlgorithmParams=PssAlgorithmParams_1=__decorate([XmlElement({localName:XmlSignature.ElementNames.RSAPSSParams,prefix:PREFIX,namespaceURI:NAMESPACE_URI})],PssAlgorithmParams);let KeyValue=class e extends KeyInfoClause{set Value(e){this.element=null;this.value=e}get Value(){return this.value}constructor(e){super();if(e){this.Value=e}}async importKey(e){switch(e.algorithm.name.toUpperCase()){case RSA_PSS$1.toUpperCase():case RSA_PKCS1.toUpperCase():this.Value=new RsaKeyValue;await this.Value.importKey(e);break;case ECDSA$1.toUpperCase():this.Value=new EcdsaKeyValue;await this.Value.importKey(e);break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.algorithm.name)}return this}async exportKey(e){if(!this.Value){throw new XmlError(XE.NULL_REFERENCE)}return this.Value.exportKey(e)}OnGetXml(e){if(!this.Value){throw new XmlError(XE.CRYPTOGRAPHIC,"KeyValue has empty value")}const t=this.Value.GetXml();if(t){e.appendChild(t)}}OnLoadXml(e){const t=[RsaKeyValue,EcdsaKeyValue];for(const r of t){try{const t=new r;for(let r=0;r<e.childNodes.length;r++){const i=e.childNodes.item(r);if(!isElement(i)){continue}t.LoadXml(i);this.value=t;return}}catch(e){}}throw new XmlError(XE.CRYPTOGRAPHIC,"Unsupported KeyValue in use")}};KeyValue=__decorate([XmlElement({localName:XmlSignature.ElementNames.KeyValue})],KeyValue);const OID={"2.5.4.3":{short:"CN",long:"CommonName"},"2.5.4.6":{short:"C",long:"Country"},"2.5.4.5":{long:"DeviceSerialNumber"},"0.9.2342.19200300.100.1.25":{short:"DC",long:"DomainComponent"},"1.2.840.113549.1.9.1":{short:"E",long:"EMail"},"2.5.4.42":{short:"G",long:"GivenName"},"2.5.4.43":{short:"I",long:"Initials"},"2.5.4.7":{short:"L",long:"Locality"},"2.5.4.10":{short:"O",long:"Organization"},"2.5.4.11":{short:"OU",long:"OrganizationUnit"},"2.5.4.8":{short:"ST",long:"State"},"2.5.4.9":{short:"Street",long:"StreetAddress"},"2.5.4.4":{short:"SN",long:"SurName"},"2.5.4.12":{short:"T",long:"Title"},"1.2.840.113549.1.9.8":{long:"UnstructuredAddress"},"1.2.840.113549.1.9.2":{long:"UnstructuredName"}};class X509Certificate$1{constructor(e){this.publicKey=null;if(e){const t=new Uint8Array(e);this.LoadRaw(t);this.raw=t}}get SerialNumber(){return this.simpl.serialNumber.valueBlock.toString()}get Issuer(){return this.NameToString(this.simpl.issuer)}get Subject(){return this.NameToString(this.simpl.subject)}async Thumbprint(e="SHA-1"){return Application.crypto.subtle.digest(e,this.raw)}get PublicKey(){return this.publicKey}GetRaw(){return this.raw}async exportKey(e){if(e){const t={algorithm:e,usages:["verify"]};if(t.algorithm.name.toUpperCase()===ECDSA$1){const e=this.simpl.subjectPublicKeyInfo.toJSON();if("crv"in e&&e.crv){t.algorithm.namedCurve=e.crv}else{throw new Error("Cannot get Curved name from the ECDSA public key")}}if(this.isHashedAlgorithm(t.algorithm)){if(typeof t.algorithm.hash==="string"){t.algorithm.hash={name:t.algorithm.hash}}}const r=await this.simpl.getPublicKey({algorithm:t});this.publicKey=r;return r}if(this.simpl.subjectPublicKeyInfo.algorithm.algorithmId==="1.2.840.113549.1.1.1"){this.publicKey=await this.simpl.getPublicKey({algorithm:{algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]}})}else{this.publicKey=await this.simpl.getPublicKey()}return this.publicKey}NameToString(e,t=","){const r=[];e.typesAndValues.forEach((e=>{const t=e.type;const i=OID[t.toString()];const n=i?i.short:null;r.push(`${n?n:t}=${e.value.valueBlock.value}`)}));return r.join(t+" ")}LoadRaw(e){this.raw=new Uint8Array(e);const t=fromBER(this.raw.buffer);this.simpl=new Certificate$1({schema:t.result})}isHashedAlgorithm(e){return!!e["hash"]}}let X509IssuerSerial=class e extends XmlSignatureObject{};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509IssuerName,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509IssuerName",void 0);__decorate([XmlChildElement({localName:XmlSignature.ElementNames.X509SerialNumber,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true})],X509IssuerSerial.prototype,"X509SerialNumber",void 0);X509IssuerSerial=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509IssuerSerial})],X509IssuerSerial);var X509IncludeOption;(function(e){e[e["None"]=0]="None";e[e["EndCertOnly"]=1]="EndCertOnly";e[e["ExcludeRoot"]=2]="ExcludeRoot";e[e["WholeChain"]=3]="WholeChain"})(X509IncludeOption||(X509IncludeOption={}));let KeyInfoX509Data=class e extends KeyInfoClause{constructor(e,t=X509IncludeOption.None){super();this.x509crl=null;this.SubjectKeyIdList=[];if(e){if(e instanceof Uint8Array){this.AddCertificate(new X509Certificate$1(e))}else if(e instanceof X509Certificate$1){switch(t){case X509IncludeOption.None:case X509IncludeOption.EndCertOnly:this.AddCertificate(e);break;case X509IncludeOption.ExcludeRoot:this.AddCertificatesChainFrom(e,false);break;case X509IncludeOption.WholeChain:this.AddCertificatesChainFrom(e,true);break}}}}async importKey(e){throw new XmlError(XE.METHOD_NOT_SUPPORTED)}async exportKey(e){if(!this.Certificates.length){throw new XmlError(XE.NULL_REFERENCE)}this.Key=await this.Certificates[0].exportKey(e);return this.Key}get Certificates(){return this.X509CertificateList}get CRL(){return this.x509crl}set CRL(e){this.x509crl=e}get IssuerSerials(){return this.IssuerSerialList}get SubjectKeyIds(){return this.SubjectKeyIdList}get SubjectNames(){return this.SubjectNameList}AddCertificate(e){if(!e){throw new XmlError(XE.PARAM_REQUIRED,"certificate")}if(!this.X509CertificateList){this.X509CertificateList=[]}this.X509CertificateList.push(e)}AddIssuerSerial(e,t){if(e==null){throw new XmlError(XE.PARAM_REQUIRED,"issuerName")}if(this.IssuerSerialList==null){this.IssuerSerialList=[]}const r={issuerName:e,serialNumber:t};this.IssuerSerialList.push(r)}AddSubjectKeyId(e){if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(typeof e==="string"){if(e!=null){let t;t=Convert.FromBase64(e);this.SubjectKeyIdList.push(t)}}else{this.SubjectKeyIdList.push(e)}}AddSubjectName(e){if(this.SubjectNameList==null){this.SubjectNameList=[]}this.SubjectNameList.push(e)}GetXml(){const e=this.CreateDocument();const t=this.CreateElement(e);const r=this.GetPrefix();if(this.IssuerSerialList!=null&&this.IssuerSerialList.length>0){this.IssuerSerialList.forEach((i=>{const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerSerial);const s=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509IssuerName);s.textContent=i.issuerName;n.appendChild(s);const a=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SerialNumber);a.textContent=i.serialNumber;n.appendChild(a);t.appendChild(n)}))}if(this.SubjectKeyIdList!=null&&this.SubjectKeyIdList.length>0){this.SubjectKeyIdList.forEach((i=>{const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SKI);n.textContent=Convert.ToBase64(i);t.appendChild(n)}))}if(this.SubjectNameList!=null&&this.SubjectNameList.length>0){this.SubjectNameList.forEach((i=>{const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509SubjectName);n.textContent=i;t.appendChild(n)}))}if(this.X509CertificateList!=null&&this.X509CertificateList.length>0){this.X509CertificateList.forEach((i=>{const n=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509Certificate);n.textContent=Convert.ToBase64(i.GetRaw());t.appendChild(n)}))}if(this.x509crl!=null){const i=e.createElementNS(XmlSignature.NamespaceURI,r+XmlSignature.ElementNames.X509CRL);i.textContent=Convert.ToBase64(this.x509crl);t.appendChild(i)}return t}LoadXml(e){super.LoadXml(e);if(this.IssuerSerialList){this.IssuerSerialList=[]}if(this.SubjectKeyIdList){this.SubjectKeyIdList=[]}if(this.SubjectNameList){this.SubjectNameList=[]}if(this.X509CertificateList){this.X509CertificateList=[]}this.x509crl=null;let t=this.GetChildren(XmlSignature.ElementNames.X509IssuerSerial);if(t){t.forEach((e=>{const t=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509IssuerName,XmlSignature.NamespaceURI,true);const r=XmlSignatureObject.GetChild(e,XmlSignature.ElementNames.X509SerialNumber,XmlSignature.NamespaceURI,true);if(t&&t.textContent&&r&&r.textContent){this.AddIssuerSerial(t.textContent,r.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SKI);if(t){t.forEach((e=>{if(e.textContent){const t=Convert.FromBase64(e.textContent);this.AddSubjectKeyId(t)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509SubjectName);if(t!=null){t.forEach((e=>{if(e.textContent){this.AddSubjectName(e.textContent)}}))}t=this.GetChildren(XmlSignature.ElementNames.X509Certificate);if(t){t.forEach((e=>{if(e.textContent){const t=Convert.FromBase64(e.textContent);this.AddCertificate(new X509Certificate$1(t))}}))}const r=this.GetChild(XmlSignature.ElementNames.X509CRL,false);if(r&&r.textContent){this.x509crl=Convert.FromBase64(r.textContent)}}AddCertificatesChainFrom(e,t){throw new XmlError(XE.METHOD_NOT_IMPLEMENTED)}};KeyInfoX509Data=__decorate([XmlElement({localName:XmlSignature.ElementNames.X509Data})],KeyInfoX509Data);let SPKIData=class e extends KeyInfoClause{async importKey(e){const t=await Application.crypto.subtle.exportKey("spki",e);this.SPKIexp=new Uint8Array(t);this.Key=e;return this}async exportKey(e){const t=await Application.crypto.subtle.importKey("spki",this.SPKIexp,e,true,["verify"]);this.Key=t;return t}};__decorate([XmlChildElement({localName:XmlSignature.ElementNames.SPKIexp,namespaceURI:XmlSignature.NamespaceURI,prefix:XmlSignature.DefaultPrefix,required:true,converter:XmlBase64Converter})],SPKIData.prototype,"SPKIexp",void 0);SPKIData=__decorate([XmlElement({localName:XmlSignature.ElementNames.SPKIData})],SPKIData);const SignatureAlgorithms={};SignatureAlgorithms[RSA_PKCS1_SHA1_NAMESPACE]=RsaPkcs1Sha1;SignatureAlgorithms[RSA_PKCS1_SHA256_NAMESPACE]=RsaPkcs1Sha256;SignatureAlgorithms[RSA_PKCS1_SHA384_NAMESPACE]=RsaPkcs1Sha384;SignatureAlgorithms[RSA_PKCS1_SHA512_NAMESPACE]=RsaPkcs1Sha512;SignatureAlgorithms[ECDSA_SHA1_NAMESPACE]=EcdsaSha1;SignatureAlgorithms[ECDSA_SHA256_NAMESPACE]=EcdsaSha256;SignatureAlgorithms[ECDSA_SHA384_NAMESPACE]=EcdsaSha384;SignatureAlgorithms[ECDSA_SHA512_NAMESPACE]=EcdsaSha512;SignatureAlgorithms[HMAC_SHA1_NAMESPACE]=HmacSha1$1;SignatureAlgorithms[HMAC_SHA256_NAMESPACE]=HmacSha256$1;SignatureAlgorithms[HMAC_SHA384_NAMESPACE]=HmacSha384;SignatureAlgorithms[HMAC_SHA512_NAMESPACE]=HmacSha512$1;SignatureAlgorithms[RSA_PSS_SHA1_NAMESPACE]=RsaPssWithoutParamsSha1;SignatureAlgorithms[RSA_PSS_SHA256_NAMESPACE]=RsaPssWithoutParamsSha256;SignatureAlgorithms[RSA_PSS_SHA384_NAMESPACE]=RsaPssWithoutParamsSha384;SignatureAlgorithms[RSA_PSS_SHA512_NAMESPACE]=RsaPssWithoutParamsSha512;const HashAlgorithms={};HashAlgorithms[SHA1_NAMESPACE]=Sha1$1;HashAlgorithms[SHA256_NAMESPACE]=Sha256$1;HashAlgorithms[SHA384_NAMESPACE]=Sha384;HashAlgorithms[SHA512_NAMESPACE]=Sha512$1;class CryptoConfig{static CreateFromName(e){let t;switch(e){case XmlSignature.AlgorithmNamespaces.XmlDsigBase64Transform:t=new XmlDsigBase64Transform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NTransform:t=new XmlDsigC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigC14NWithCommentsTransform:t=new XmlDsigC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigEnvelopedSignatureTransform:t=new XmlDsigEnvelopedSignatureTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigXPathTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigXsltTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NTransform:t=new XmlDsigExcC14NTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDsigExcC14NWithCommentsTransform:t=new XmlDsigExcC14NWithCommentsTransform;break;case XmlSignature.AlgorithmNamespaces.XmlDecryptionTransform:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e);default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e)}return t}static CreateSignatureAlgorithm(e){const t=SignatureAlgorithms[e.Algorithm]||null;if(t){return new t}else if(e.Algorithm===RSA_PSS_WITH_PARAMS_NAMESPACE){let t;e.Any.Some((e=>{if(e instanceof PssAlgorithmParams){t=e}return!!t}));if(t){switch(t.DigestMethod.Algorithm){case SHA1_NAMESPACE:return new RsaPssSha1(t.SaltLength);case SHA256_NAMESPACE:return new RsaPssSha256(t.SaltLength);case SHA384_NAMESPACE:return new RsaPssSha384(t.SaltLength);case SHA512_NAMESPACE:return new RsaPssSha512(t.SaltLength)}}throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get params for RSA-PSS algoriithm`)}throw new Error(`signature algorithm '${e.Algorithm}' is not supported`)}static CreateHashAlgorithm(e){const t=HashAlgorithms[e];if(t){return new t}else{throw new Error("hash algorithm '"+e+"' is not supported")}}static GetHashAlgorithm(e){const t=typeof e==="string"?{name:e}:e;switch(t.name.toUpperCase()){case SHA1:return new Sha1$1;case SHA256:return new Sha256$1;case SHA384:return new Sha384;case SHA512:return new Sha512$1;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,t.name)}}static GetSignatureAlgorithm(e){if(typeof e.hash==="string"){e.hash={name:e.hash}}const t=e.hash.name;if(!t){throw new Error("Signing algorithm doesn't have name for hash")}let r;switch(e.name.toUpperCase()){case RSA_PKCS1.toUpperCase():switch(t.toUpperCase()){case SHA1:r=new RsaPkcs1Sha1;break;case SHA256:r=new RsaPkcs1Sha256;break;case SHA384:r=new RsaPkcs1Sha384;break;case SHA512:r=new RsaPkcs1Sha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case RSA_PSS$1.toUpperCase():const i=e.saltLength;switch(t.toUpperCase()){case SHA1:r=i?new RsaPssSha1(i):new RsaPssWithoutParamsSha1;break;case SHA256:r=i?new RsaPssSha256(i):new RsaPssWithoutParamsSha256;break;case SHA384:r=i?new RsaPssSha384(i):new RsaPssWithoutParamsSha384;break;case SHA512:r=i?new RsaPssSha512(i):new RsaPssWithoutParamsSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}e.saltLength=r.algorithm.saltLength;break;case ECDSA$1:switch(t.toUpperCase()){case SHA1:r=new EcdsaSha1;break;case SHA256:r=new EcdsaSha256;break;case SHA384:r=new EcdsaSha384;break;case SHA512:r=new EcdsaSha512;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;case HMAC:switch(t.toUpperCase()){case SHA1:r=new HmacSha1$1;break;case SHA256:r=new HmacSha256$1;break;case SHA384:r=new HmacSha384;break;case SHA512:r=new HmacSha512$1;break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,`${e.name}:${t}`)}break;default:throw new XmlError(XE.ALGORITHM_NOT_SUPPORTED,e.name)}return r}}class SignedXml{get XmlSignature(){return this.signature}get Signature(){return this.XmlSignature.SignatureValue}constructor(e){this.signature=new Signature$2;if(e&&e.nodeType===XmlNodeType.Document){this.document=e}else if(e&&e.nodeType===XmlNodeType.Element){const t=(new XMLSerializer).serializeToString(e);this.document=(new DOMParser).parseFromString(t,APPLICATION_XML)}}async Sign(e,t,r,i={}){if(isDocument(r)){r=r.cloneNode(true).documentElement}else if(isElement(r)){r=r.cloneNode(true)}let n;let s;const a=assign$2({},e);if(t.algorithm["hash"]){a.hash=t.algorithm["hash"]}n=CryptoConfig.GetSignatureAlgorithm(a);await this.ApplySignOptions(this.XmlSignature,e,t,i);s=this.XmlSignature.SignedInfo;await this.DigestReferences(r);s.SignatureMethod.Algorithm=n.namespaceURI;if(n instanceof RsaPssBase){const e=assign$2({},t.algorithm,a);if(typeof e.hash==="string"){e.hash={name:e.hash}}const r=new PssAlgorithmParams(e);this.XmlSignature.SignedInfo.SignatureMethod.Any.Add(r)}else if(HMAC.toUpperCase()===e.name.toUpperCase()){let e=0;const r=t.algorithm;switch(r.hash.name.toUpperCase()){case SHA1:e=r.length||160;break;case SHA256:e=r.length||256;break;case SHA384:e=r.length||384;break;case SHA512:e=r.length||512;break}this.XmlSignature.SignedInfo.SignatureMethod.HMACOutputLength=e}const o=this.TransformSignedInfo(r);const f=await n.Sign(o,t,a);this.Key=t;this.XmlSignature.SignatureValue=new Uint8Array(f);if(isElement(r)){this.document=r.ownerDocument}return this.XmlSignature}async Verify(e){let t;let r;if(e){if("algorithm"in e&&"usages"in e&&"type"in e){r=e}else{r=e.key;t=e.content}}if(!t){const e=this.document;if(!(e&&e.documentElement)){throw new XmlError(XE.NULL_PARAM,"SignedXml","document")}t=e.documentElement}if(isDocument(t)||isElement(t)){t=t.cloneNode(true)}const i=await this.ValidateReferences(t);if(i){const e=r?[r]:await this.GetPublicKeys();return this.ValidateSignatureValue(e)}else{return false}}GetXml(){return this.signature.GetXml()}LoadXml(e){this.signature=Signature$2.LoadXml(e)}toString(){const e=this.XmlSignature;const t=e.SignedInfo.References&&e.SignedInfo.References.Some((e=>e.Transforms&&e.Transforms.Some((e=>e instanceof XmlDsigEnvelopedSignatureTransform))));if(t){const e=this.document.documentElement.cloneNode(true);const t=this.XmlSignature.GetXml();if(!t){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from Signature")}const r=t.cloneNode(true);e.appendChild(r);return(new XMLSerializer).serializeToString(e)}return this.XmlSignature.toString()}async GetPublicKeys(){const e=[];const t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const t of this.XmlSignature.KeyInfo.GetIterator()){if(t instanceof KeyInfoX509Data){for(const r of t.Certificates){const t=await r.exportKey();e.push(t)}}else{const r=await t.exportKey();e.push(r)}}if(t.algorithm.name.startsWith("RSA")){for(let r=0;r<e.length;r++){const i=e[r];if(i.algorithm.name.startsWith("RSA")){const n=await Application.crypto.subtle.exportKey("spki",i);const s=await Application.crypto.subtle.importKey("spki",n,t.algorithm,true,["verify"]);e[r]=s}}}return e}GetSignatureNamespaces(){const e={};if(this.XmlSignature.NamespaceURI){e[this.XmlSignature.Prefix||""]=this.XmlSignature.NamespaceURI}return e}CopyNamespaces(e,t,r){this.InjectNamespaces(SelectRootNamespaces(e),t,r)}InjectNamespaces(e,t,r){for(const i in e){const n=e[i];if(r&&i===""){continue}t.setAttribute("xmlns"+(i?":"+i:""),n)}}async DigestReference(e,t,r){if(this.contentHandler){const r=await this.contentHandler(t,this);if(r){e=isDocument(r)?r.documentElement:r}}if(t.Uri){let r;if(!t.Uri.indexOf("#xpointer")){let e=t.Uri;e=e.substring(9).replace(/[\r\n\t\s]/g,"");if(e.length<2||e[0]!==`(`||e[e.length-1]!==`)`){e=""}else{e=e.substring(1,e.length-1)}if(e.length>6&&e.indexOf(`id(`)===0&&e[e.length-1]===`)`){r=e.substring(4,e.length-2)}}else if(t.Uri[0]===`#`){r=t.Uri.substring(1)}if(r){let t=null;const i=[this.XmlSignature.KeyInfo.GetXml()];this.XmlSignature.ObjectList.ForEach((e=>{i.push(e.GetXml())}));for(const n of i){if(n){t=findById(n,r);if(t){const r=t.cloneNode(true);if(isElement(e)){this.CopyNamespaces(e,r,false)}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;this.CopyNamespaces(e,r,true)}this.CopyNamespaces(t,r,false);this.InjectNamespaces(this.GetSignatureNamespaces(),r,true);e=r;break}}}if(!t&&(e&&isElement(e))){t=XmlObject.GetElementById(e,r);if(t){const r=t.cloneNode(true);this.CopyNamespaces(t,r,false);this.CopyNamespaces(e,r,false);e=r}}if(t==null){throw new XmlError(XE.CRYPTOGRAPHIC,`Cannot get object by reference: ${r}`)}}}let i=null;if(t.Transforms&&t.Transforms.Count){if(build.BufferSourceConverter.isBufferSource(e)){throw new Error("Transformation for argument 'source' of type BufferSource is not implemented")}i=this.ApplyTransforms(t.Transforms,e)}else{if(t.Uri&&t.Uri[0]!==`#`){if(isElement(e)){if(!e.ownerDocument){throw new Error("Cannot get ownerDocument from the XML document")}i=(new XMLSerializer).serializeToString(e.ownerDocument)}else{i=build.BufferSourceConverter.toArrayBuffer(e)}}else{const t=new XmlDsigC14NTransform;if(build.BufferSourceConverter.isBufferSource(e)){e=Parse(build.Convert.ToUtf8String(e)).documentElement}t.LoadInnerXml(e);i=t.GetOutput()}}if(!t.DigestMethod.Algorithm){throw new XmlError(XE.NULL_PARAM,"Reference","DigestMethod")}const n=CryptoConfig.CreateHashAlgorithm(t.DigestMethod.Algorithm);return n.Digest(i)}async DigestReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){if(t.DigestValue){continue}if(!t.DigestMethod.Algorithm){t.DigestMethod.Algorithm=(new Sha256$1).namespaceURI}const r=await this.DigestReference(e,t,false);t.DigestValue=r}}TransformSignedInfo(e){const t=CryptoConfig.CreateFromName(this.XmlSignature.SignedInfo.CanonicalizationMethod.Algorithm);const r=this.XmlSignature.SignedInfo.GetXml();if(!r){throw new XmlError(XE.XML_EXCEPTION,"Cannot get Xml element from SignedInfo")}const i=r.cloneNode(true);this.CopyNamespaces(r,i,false);if(e&&!build.BufferSourceConverter.isBufferSource(e)){if(e.nodeType===XmlNodeType.Document){this.CopyNamespaces(e.documentElement,i,false)}else{this.CopyNamespaces(e,i,false)}}if(this.Parent){const e=this.Parent instanceof XmlObject?this.Parent.GetXml():this.Parent;if(e){this.CopyNamespaces(e,i,false)}}const n=SelectNamespaces(r);for(const e in n){const t=n[e];if(e===i.prefix){continue}i.setAttribute("xmlns"+(e?":"+e:""),t)}t.LoadInnerXml(i);const s=t.GetOutput();return s}ResolveTransform(e){if(typeof e==="string"){switch(e){case"enveloped":return new XmlDsigEnvelopedSignatureTransform;case"c14n":return new XmlDsigC14NTransform;case"c14n-com":return new XmlDsigC14NWithCommentsTransform;case"exc-c14n":return new XmlDsigExcC14NTransform;case"exc-c14n-com":return new XmlDsigExcC14NWithCommentsTransform;case"base64":return new XmlDsigBase64Transform;default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e)}}switch(e.name){case"xpath":{const t=new XmlDsigXPathTransform;t.XPath=e.selector;const r=t.GetXml();if(r&&e.namespaces){for(const[t,i]of Object.entries(e.namespaces)){r.firstChild.setAttributeNS("http://www.w3.org/2000/xmlns/",`xmlns:${t}`,i)}}return t}default:throw new XmlError(XE.CRYPTOGRAPHIC_UNKNOWN_TRANSFORM,e.name)}}ApplyTransforms(e,t){let r=null;e.Sort(((e,t)=>{const r=[XmlDsigC14NTransform,XmlDsigC14NWithCommentsTransform,XmlDsigExcC14NTransform,XmlDsigExcC14NWithCommentsTransform];if(r.some((t=>e instanceof t))){return 1}if(r.some((e=>t instanceof e))){return-1}return 0})).ForEach((e=>{e.LoadInnerXml(t);if(e instanceof XmlDsigXPathTransform){e.GetOutput()}else{r=e.GetOutput()}}));if(e.Count===1&&e.Item(0)instanceof XmlDsigEnvelopedSignatureTransform){const e=new XmlDsigC14NTransform;e.LoadInnerXml(t);r=e.GetOutput()}return r}async ApplySignOptions(e,t,r,i){if(i.id){this.XmlSignature.Id=i.id}if(i.keyValue&&r.algorithm.name.toUpperCase()!==HMAC){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;const r=new KeyValue;t.Add(r);await r.importKey(i.keyValue)}if(i.x509){if(!e.KeyInfo){e.KeyInfo=new KeyInfo}const t=e.KeyInfo;i.x509.forEach((e=>{const r=Convert.FromBase64(e);const i=new KeyInfoX509Data(r);t.Add(i)}))}if(i.references){i.references.forEach((t=>{const r=new Reference;if(t.id){r.Id=t.id}if(t.uri!==null&&t.uri!==undefined){r.Uri=t.uri}if(t.type){r.Type=t.type}const i=CryptoConfig.GetHashAlgorithm(t.hash);r.DigestMethod.Algorithm=i.namespaceURI;if(t.transforms&&t.transforms.length){const e=new Transforms;t.transforms.forEach((t=>{e.Add(this.ResolveTransform(t))}));r.Transforms=e}if(!e.SignedInfo.References){e.SignedInfo.References=new References}e.SignedInfo.References.Add(r)}))}if(!e.SignedInfo.References.Count){const t=new Reference;e.SignedInfo.References.Add(t)}}async ValidateReferences(e){for(const t of this.XmlSignature.SignedInfo.References.GetIterator()){const r=await this.DigestReference(e,t,false);const i=Convert.ToBase64(r);const n=Convert.ToString(t.DigestValue,"base64");if(i!==n){const e=`Invalid digest for uri '${t.Uri}'. Calculated digest is ${i} but the xml to validate supplies digest ${n}`;throw new XmlError(XE.CRYPTOGRAPHIC,e)}}return true}async ValidateSignatureValue(e){let t;let r;r=this.TransformSignedInfo(this.document);t=CryptoConfig.CreateSignatureAlgorithm(this.XmlSignature.SignedInfo.SignatureMethod);for(const i of e){const e=await t.Verify(r,i,this.Signature);if(e){return true}}return false}}function findById(e,t){if(e.nodeType!==XmlNodeType.Element){return null}if(e.hasAttribute("Id")&&e.getAttribute("Id")===t){return e}if(e.childNodes&&e.childNodes.length){for(let r=0;r<e.childNodes.length;r++){const i=findById(e.childNodes[r],t);if(i){return i}}}return null}function addNamespace(e,t,r){if(!(t in e)){e[t]=r}}function _SelectRootNamespaces(e,t={}){if(isElement(e)){if(e.namespaceURI&&e.namespaceURI!=="http://www.w3.org/XML/1998/namespace"){addNamespace(t,e.prefix?e.prefix:"",e.namespaceURI)}for(let r=0;r<e.attributes.length;r++){const i=e.attributes.item(r);if(i&&i.prefix==="xmlns"){addNamespace(t,i.localName?i.localName:"",i.value)}}if(e.parentNode){_SelectRootNamespaces(e.parentNode,t)}}}function SelectRootNamespaces(e){const t={};_SelectRootNamespaces(e,t);return t}
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Reflect$1;(function(e){(function(t){var r=typeof commonjsGlobal==="object"?commonjsGlobal:typeof self==="object"?self:typeof this==="object"?this:Function("return this;")();var i=n(e);if(typeof r.Reflect==="undefined"){r.Reflect=e}else{i=n(r.Reflect,i)}t(i);function n(e,t){return function(r,i){if(typeof e[r]!=="function"){Object.defineProperty(e,r,{configurable:true,writable:true,value:i})}if(t)t(r,i)}}})((function(e){var t=Object.prototype.hasOwnProperty;var r=typeof Symbol==="function";var i=r&&typeof Symbol.toPrimitive!=="undefined"?Symbol.toPrimitive:"@@toPrimitive";var n=r&&typeof Symbol.iterator!=="undefined"?Symbol.iterator:"@@iterator";var s=typeof Object.create==="function";var a={__proto__:[]}instanceof Array;var o=!s&&!a;var f={create:s?function(){return ne(Object.create(null))}:a?function(){return ne({__proto__:null})}:function(){return ne({})},has:o?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:o?function(e,r){return t.call(e,r)?e[r]:undefined}:function(e,t){return e[t]}};var c=Object.getPrototypeOf(Function);var u=typeof process==="object"&&process.env&&process.env["REFLECT_METADATA_USE_MAP_POLYFILL"]==="true";var h=!u&&typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:te();var l=!u&&typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:re();var d=!u&&typeof WeakMap==="function"?WeakMap:ie();var p=new d;function b(e,t,r,i){if(!O(r)){if(!G(e))throw new TypeError;if(!j(t))throw new TypeError;if(!j(i)&&!O(i)&&!D(i))throw new TypeError;if(D(i))i=undefined;r=F(r);return C(e,t,r,i)}else{if(!G(e))throw new TypeError;if(!Y(t))throw new TypeError;return $(e,t)}}e("decorate",b);function m(e,t){function r(r,i){if(!j(r))throw new TypeError;if(!O(i)&&!z(i))throw new TypeError;M(e,t,r,i)}return r}e("metadata",m);function v(e,t,r,i){if(!j(r))throw new TypeError;if(!O(i))i=F(i);return M(e,t,r,i)}e("defineMetadata",v);function y(e,t,r){if(!j(t))throw new TypeError;if(!O(r))r=F(r);return T(e,t,r)}e("hasMetadata",y);function w(e,t,r){if(!j(t))throw new TypeError;if(!O(r))r=F(r);return I(e,t,r)}e("hasOwnMetadata",w);function A(e,t,r){if(!j(t))throw new TypeError;if(!O(r))r=F(r);return x(e,t,r)}e("getMetadata",A);function g(e,t,r){if(!j(t))throw new TypeError;if(!O(r))r=F(r);return N(e,t,r)}e("getOwnMetadata",g);function S(e,t){if(!j(e))throw new TypeError;if(!O(t))t=F(t);return k(e,t)}e("getMetadataKeys",S);function E(e,t){if(!j(e))throw new TypeError;if(!O(t))t=F(t);return R(e,t)}e("getOwnMetadataKeys",E);function _(e,t,r){if(!j(t))throw new TypeError;if(!O(r))r=F(r);var i=P(t,r,false);if(O(i))return false;if(!i.delete(e))return false;if(i.size>0)return true;var n=p.get(t);n.delete(r);if(n.size>0)return true;p.delete(t);return true}e("deleteMetadata",_);function $(e,t){for(var r=e.length-1;r>=0;--r){var i=e[r];var n=i(t);if(!O(n)&&!D(n)){if(!Y(n))throw new TypeError;t=n}}return t}function C(e,t,r,i){for(var n=e.length-1;n>=0;--n){var s=e[n];var a=s(t,r,i);if(!O(a)&&!D(a)){if(!j(a))throw new TypeError;i=a}}return i}function P(e,t,r){var i=p.get(e);if(O(i)){if(!r)return undefined;i=new h;p.set(e,i)}var n=i.get(t);if(O(n)){if(!r)return undefined;n=new h;i.set(t,n)}return n}function T(e,t,r){var i=I(e,t,r);if(i)return true;var n=ee(t);if(!D(n))return T(e,n,r);return false}function I(e,t,r){var i=P(t,r,false);if(O(i))return false;return V(i.has(e))}function x(e,t,r){var i=I(e,t,r);if(i)return N(e,t,r);var n=ee(t);if(!D(n))return x(e,n,r);return undefined}function N(e,t,r){var i=P(t,r,false);if(O(i))return undefined;return i.get(e)}function M(e,t,r,i){var n=P(r,i,true);n.set(e,t)}function k(e,t){var r=R(e,t);var i=ee(e);if(i===null)return r;var n=k(i,t);if(n.length<=0)return r;if(r.length<=0)return n;var s=new l;var a=[];for(var o=0,f=r;o<f.length;o++){var c=f[o];var u=s.has(c);if(!u){s.add(c);a.push(c)}}for(var h=0,d=n;h<d.length;h++){var c=d[h];var u=s.has(c);if(!u){s.add(c);a.push(c)}}return a}function R(e,t){var r=[];var i=P(e,t,false);if(O(i))return r;var n=i.keys();var s=J(n);var a=0;while(true){var o=Q(s);if(!o){r.length=a;return r}var f=q(o);try{r[a]=f}catch(e){try{Z(s)}finally{throw e}}a++}}function B(e){if(e===null)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return e===null?1:6;default:return 6}}function O(e){return e===undefined}function D(e){return e===null}function U(e){return typeof e==="symbol"}function j(e){return typeof e==="object"?e!==null:typeof e==="function"}function L(e,t){switch(B(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=t===3?"string":t===5?"number":"default";var n=W(e,i);if(n!==undefined){var s=n.call(e,r);if(j(s))throw new TypeError;return s}return K(e,r==="default"?"number":r)}function K(e,t){if(t==="string"){var r=e.toString;if(X(r)){var i=r.call(e);if(!j(i))return i}var n=e.valueOf;if(X(n)){var i=n.call(e);if(!j(i))return i}}else{var n=e.valueOf;if(X(n)){var i=n.call(e);if(!j(i))return i}var s=e.toString;if(X(s)){var i=s.call(e);if(!j(i))return i}}throw new TypeError}function V(e){return!!e}function H(e){return""+e}function F(e){var t=L(e,3);if(U(t))return t;return H(t)}function G(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:Object.prototype.toString.call(e)==="[object Array]"}function X(e){return typeof e==="function"}function Y(e){return typeof e==="function"}function z(e){switch(B(e)){case 3:return true;case 4:return true;default:return false}}function W(e,t){var r=e[t];if(r===undefined||r===null)return undefined;if(!X(r))throw new TypeError;return r}function J(e){var t=W(e,n);if(!X(t))throw new TypeError;var r=t.call(e);if(!j(r))throw new TypeError;return r}function q(e){return e.value}function Q(e){var t=e.next();return t.done?false:t}function Z(e){var t=e["return"];if(t)t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if(typeof e!=="function"||e===c)return t;if(t!==c)return t;var r=e.prototype;var i=r&&Object.getPrototypeOf(r);if(i==null||i===Object.prototype)return t;var n=i.constructor;if(typeof n!=="function")return t;if(n===e)return t;return n}function te(){var e={};var t=[];var r=function(){function e(e,t,r){this._index=0;this._keys=e;this._values=t;this._selector=r}e.prototype["@@iterator"]=function(){return this};e.prototype[n]=function(){return this};e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);if(e+1>=this._keys.length){this._index=-1;this._keys=t;this._values=t}else{this._index++}return{value:r,done:false}}return{value:undefined,done:true}};e.prototype.throw=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}throw e};e.prototype.return=function(e){if(this._index>=0){this._index=-1;this._keys=t;this._values=t}return{value:e,done:true}};return e}();return function(){function t(){this._keys=[];this._values=[];this._cacheKey=e;this._cacheIndex=-2}Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:true,configurable:true});t.prototype.has=function(e){return this._find(e,false)>=0};t.prototype.get=function(e){var t=this._find(e,false);return t>=0?this._values[t]:undefined};t.prototype.set=function(e,t){var r=this._find(e,true);this._values[r]=t;return this};t.prototype.delete=function(t){var r=this._find(t,false);if(r>=0){var i=this._keys.length;for(var n=r+1;n<i;n++){this._keys[n-1]=this._keys[n];this._values[n-1]=this._values[n]}this._keys.length--;this._values.length--;if(t===this._cacheKey){this._cacheKey=e;this._cacheIndex=-2}return true}return false};t.prototype.clear=function(){this._keys.length=0;this._values.length=0;this._cacheKey=e;this._cacheIndex=-2};t.prototype.keys=function(){return new r(this._keys,this._values,i)};t.prototype.values=function(){return new r(this._keys,this._values,s)};t.prototype.entries=function(){return new r(this._keys,this._values,a)};t.prototype["@@iterator"]=function(){return this.entries()};t.prototype[n]=function(){return this.entries()};t.prototype._find=function(e,t){if(this._cacheKey!==e){this._cacheIndex=this._keys.indexOf(this._cacheKey=e)}if(this._cacheIndex<0&&t){this._cacheIndex=this._keys.length;this._keys.push(e);this._values.push(undefined)}return this._cacheIndex};return t}();function i(e,t){return e}function s(e,t){return t}function a(e,t){return[e,t]}}function re(){return function(){function e(){this._map=new h}Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:true,configurable:true});e.prototype.has=function(e){return this._map.has(e)};e.prototype.add=function(e){return this._map.set(e,e),this};e.prototype.delete=function(e){return this._map.delete(e)};e.prototype.clear=function(){this._map.clear()};e.prototype.keys=function(){return this._map.keys()};e.prototype.values=function(){return this._map.values()};e.prototype.entries=function(){return this._map.entries()};e.prototype["@@iterator"]=function(){return this.keys()};e.prototype[n]=function(){return this.keys()};return e}()}function ie(){var e=16;var r=f.create();var i=n();return function(){function e(){this._key=n()}e.prototype.has=function(e){var t=s(e,false);return t!==undefined?f.has(t,this._key):false};e.prototype.get=function(e){var t=s(e,false);return t!==undefined?f.get(t,this._key):undefined};e.prototype.set=function(e,t){var r=s(e,true);r[this._key]=t;return this};e.prototype.delete=function(e){var t=s(e,false);return t!==undefined?delete t[this._key]:false};e.prototype.clear=function(){this._key=n()};return e}();function n(){var e;do{e="@@WeakMap@@"+c()}while(f.has(r,e));r[e]=true;return e}function s(e,r){if(!t.call(e,i)){if(!r)return undefined;Object.defineProperty(e,i,{value:f.create()})}return e[i]}function a(e,t){for(var r=0;r<t;++r)e[r]=Math.random()*255|0;return e}function o(e){if(typeof Uint8Array==="function"){if(typeof crypto!=="undefined")return crypto.getRandomValues(new Uint8Array(e));if(typeof msCrypto!=="undefined")return msCrypto.getRandomValues(new Uint8Array(e));return a(new Uint8Array(e),e)}return a(new Array(e),e)}function c(){var t=o(e);t[6]=t[6]&79|64;t[8]=t[8]&191|128;var r="";for(var i=0;i<e;++i){var n=t[i];if(i===4||i===6||i===8)r+="-";if(n<16)r+="0";r+=n.toString(16).toLowerCase()}return r}}function ne(e){e.__=undefined;delete e.__;return e}}))})(Reflect$1||(Reflect$1={}));var AsnTypeTypes;(function(e){e[e["Sequence"]=0]="Sequence";e[e["Set"]=1]="Set";e[e["Choice"]=2]="Choice"})(AsnTypeTypes||(AsnTypeTypes={}));var AsnPropTypes;(function(e){e[e["Any"]=1]="Any";e[e["Boolean"]=2]="Boolean";e[e["OctetString"]=3]="OctetString";e[e["BitString"]=4]="BitString";e[e["Integer"]=5]="Integer";e[e["Enumerated"]=6]="Enumerated";e[e["ObjectIdentifier"]=7]="ObjectIdentifier";e[e["Utf8String"]=8]="Utf8String";e[e["BmpString"]=9]="BmpString";e[e["UniversalString"]=10]="UniversalString";e[e["NumericString"]=11]="NumericString";e[e["PrintableString"]=12]="PrintableString";e[e["TeletexString"]=13]="TeletexString";e[e["VideotexString"]=14]="VideotexString";e[e["IA5String"]=15]="IA5String";e[e["GraphicString"]=16]="GraphicString";e[e["VisibleString"]=17]="VisibleString";e[e["GeneralString"]=18]="GeneralString";e[e["CharacterString"]=19]="CharacterString";e[e["UTCTime"]=20]="UTCTime";e[e["GeneralizedTime"]=21]="GeneralizedTime";e[e["DATE"]=22]="DATE";e[e["TimeOfDay"]=23]="TimeOfDay";e[e["DateTime"]=24]="DateTime";e[e["Duration"]=25]="Duration";e[e["TIME"]=26]="TIME";e[e["Null"]=27]="Null"})(AsnPropTypes||(AsnPropTypes={}));class BitString{constructor(e,t=0){this.unusedBits=0;this.value=new ArrayBuffer(0);if(e){if(typeof e==="number"){this.fromNumber(e)}else if(build.BufferSourceConverter.isBufferSource(e)){this.unusedBits=t;this.value=build.BufferSourceConverter.toArrayBuffer(e)}else{throw TypeError("Unsupported type of 'params' argument for BitString")}}}fromASN(e){if(!(e instanceof BitString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString")}this.unusedBits=e.valueBlock.unusedBits;this.value=e.valueBlock.valueHex;return this}toASN(){return new BitString$1({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new BitString$1({name:e})}toNumber(){let e="";const t=new Uint8Array(this.value);for(const r of t){e+=r.toString(2).padStart(8,"0")}e=e.split("").reverse().join("");if(this.unusedBits){e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")}return parseInt(e,2)}fromNumber(e){let t=e.toString(2);const r=t.length+7>>3;this.unusedBits=(r<<3)-t.length;const i=new Uint8Array(r);t=t.padStart(r<<3,"0").split("").reverse().join("");let n=0;while(n<r){i[n]=parseInt(t.slice(n<<3,(n<<3)+8),2);n++}this.value=i.buffer}}class OctetString{constructor(e){if(typeof e==="number"){this.buffer=new ArrayBuffer(e)}else{if(build.BufferSourceConverter.isBufferSource(e)){this.buffer=build.BufferSourceConverter.toArrayBuffer(e)}else if(Array.isArray(e)){this.buffer=new Uint8Array(e)}else{this.buffer=new ArrayBuffer(0)}}}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(e){if(!(e instanceof OctetString$1)){throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString")}this.buffer=e.valueBlock.valueHex;return this}toASN(){return new OctetString$1({valueHex:this.buffer})}toSchema(e){return new OctetString$1({name:e})}}const AsnAnyConverter={fromASN:e=>e instanceof Null?null:e.valueBeforeDecodeView,toASN:e=>{if(e===null){return new Null}const t=fromBER(e);if(t.result.error){throw new Error(t.result.error)}return t.result}};const AsnIntegerConverter={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Integer({value:+e})};const AsnEnumeratedConverter={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new Enumerated({value:e})};const AsnIntegerArrayBufferConverter$1={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new Integer({valueHex:e})};const AsnBitStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new BitString$1({valueHex:e})};const AsnObjectIdentifierConverter={fromASN:e=>e.valueBlock.toString(),toASN:e=>new ObjectIdentifier$1({value:e})};const AsnBooleanConverter={fromASN:e=>e.valueBlock.value,toASN:e=>new Boolean$1({value:e})};const AsnOctetStringConverter={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new OctetString$1({valueHex:e})};const AsnConstructedOctetStringConverter={fromASN:e=>new OctetString(e.getValue()),toASN:e=>e.toASN()};function createStringConverter(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}const AsnUtf8StringConverter=createStringConverter(Utf8String);const AsnBmpStringConverter=createStringConverter(BmpString);const AsnUniversalStringConverter=createStringConverter(UniversalString);const AsnNumericStringConverter=createStringConverter(NumericString);const AsnPrintableStringConverter=createStringConverter(PrintableString);const AsnTeletexStringConverter=createStringConverter(TeletexString);const AsnVideotexStringConverter=createStringConverter(VideotexString);const AsnIA5StringConverter=createStringConverter(IA5String);const AsnGraphicStringConverter=createStringConverter(GraphicString);const AsnVisibleStringConverter=createStringConverter(VisibleString);const AsnGeneralStringConverter=createStringConverter(GeneralString);const AsnCharacterStringConverter=createStringConverter(CharacterString);const AsnUTCTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new UTCTime({valueDate:e})};const AsnGeneralizedTimeConverter={fromASN:e=>e.toDate(),toASN:e=>new GeneralizedTime({valueDate:e})};const AsnNullConverter={fromASN:()=>null,toASN:()=>new Null};function defaultConverter(e){switch(e){case AsnPropTypes.Any:return AsnAnyConverter;case AsnPropTypes.BitString:return AsnBitStringConverter;case AsnPropTypes.BmpString:return AsnBmpStringConverter;case AsnPropTypes.Boolean:return AsnBooleanConverter;case AsnPropTypes.CharacterString:return AsnCharacterStringConverter;case AsnPropTypes.Enumerated:return AsnEnumeratedConverter;case AsnPropTypes.GeneralString:return AsnGeneralStringConverter;case AsnPropTypes.GeneralizedTime:return AsnGeneralizedTimeConverter;case AsnPropTypes.GraphicString:return AsnGraphicStringConverter;case AsnPropTypes.IA5String:return AsnIA5StringConverter;case AsnPropTypes.Integer:return AsnIntegerConverter;case AsnPropTypes.Null:return AsnNullConverter;case AsnPropTypes.NumericString:return AsnNumericStringConverter;case AsnPropTypes.ObjectIdentifier:return AsnObjectIdentifierConverter;case AsnPropTypes.OctetString:return AsnOctetStringConverter;case AsnPropTypes.PrintableString:return AsnPrintableStringConverter;case AsnPropTypes.TeletexString:return AsnTeletexStringConverter;case AsnPropTypes.UTCTime:return AsnUTCTimeConverter;case AsnPropTypes.UniversalString:return AsnUniversalStringConverter;case AsnPropTypes.Utf8String:return AsnUtf8StringConverter;case AsnPropTypes.VideotexString:return AsnVideotexStringConverter;case AsnPropTypes.VisibleString:return AsnVisibleStringConverter;default:return null}}function isConvertible$1(e){if(typeof e==="function"&&e.prototype){if(e.prototype.toASN&&e.prototype.fromASN){return true}else{return isConvertible$1(e.prototype)}}else{return!!(e&&typeof e==="object"&&"toASN"in e&&"fromASN"in e)}}function isTypeOfArray(e){var t;if(e){const r=Object.getPrototypeOf(e);if(((t=r===null||r===void 0?void 0:r.prototype)===null||t===void 0?void 0:t.constructor)===Array){return true}return isTypeOfArray(r)}return false}function isArrayEqual(e,t){if(!(e&&t)){return false}if(e.byteLength!==t.byteLength){return false}const r=new Uint8Array(e);const i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++){if(r[t]!==i[t]){return false}}return true}class AsnSchemaStorage{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=false){const r=this.items.get(e);if(!r){throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`)}if(t&&!r.schema){throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`)}return r}cache(e){const t=this.get(e);if(!t.schema){t.schema=this.create(e,true)}}createDefault(e){const t={type:AsnTypeTypes.Sequence,items:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.items=Object.assign({},t.items,r.items)}return t}create(e,t){const r=this.items.get(e)||this.createDefault(e);const i=[];for(const e in r.items){const n=r.items[e];const s=t?e:"";let a;if(typeof n.type==="number"){const e=AsnPropTypes[n.type];const t=asn1js[e];if(!t){throw new Error(`Cannot get ASN1 class by name '${e}'`)}a=new t({name:s})}else if(isConvertible$1(n.type)){const e=new n.type;a=e.toSchema(s)}else if(n.optional){const e=this.get(n.type);if(e.type===AsnTypeTypes.Choice){a=new Any({name:s})}else{a=this.create(n.type,false);a.name=s}}else{a=new Any({name:s})}const o=!!n.optional||n.defaultValue!==undefined;if(n.repeated){a.name="";const e=n.repeated==="set"?Set$1:Sequence;a=new e({name:"",value:[new Repeated({name:s,value:a})]})}if(n.context!==null&&n.context!==undefined){if(n.implicit){if(typeof n.type==="number"||isConvertible$1(n.type)){const e=n.repeated?Constructed:Primitive;i.push(new e({name:s,optional:o,idBlock:{tagClass:3,tagNumber:n.context}}))}else{this.cache(n.type);const e=!!n.repeated;let t=!e?this.get(n.type,true).schema:a;t="valueBlock"in t?t.valueBlock.value:t.value;i.push(new Constructed({name:!e?s:"",optional:o,idBlock:{tagClass:3,tagNumber:n.context},value:t}))}}else{i.push(new Constructed({optional:o,idBlock:{tagClass:3,tagNumber:n.context},value:[a]}))}}else{a.optional=o;i.push(a)}}switch(r.type){case AsnTypeTypes.Sequence:return new Sequence({value:i,name:""});case AsnTypeTypes.Set:return new Set$1({value:i,name:""});case AsnTypeTypes.Choice:return new Choice({value:i,name:""});default:throw new Error(`Unsupported ASN1 type in use`)}}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=Object.getPrototypeOf(e);if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const schemaStorage$1=new AsnSchemaStorage;const AsnType=e=>t=>{let r;if(!schemaStorage$1.has(t)){r=schemaStorage$1.createDefault(t);schemaStorage$1.set(t,r)}else{r=schemaStorage$1.get(t)}Object.assign(r,e)};const AsnProp=e=>(t,r)=>{let i;if(!schemaStorage$1.has(t.constructor)){i=schemaStorage$1.createDefault(t.constructor);schemaStorage$1.set(t.constructor,i)}else{i=schemaStorage$1.get(t.constructor)}const n=Object.assign({},e);if(typeof n.type==="number"&&!n.converter){const i=defaultConverter(e.type);if(!i){throw new Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`)}n.converter=i}i.items[r]=n};class AsnSchemaValidationError extends Error{constructor(){super(...arguments);this.schemas=[]}}class AsnParser{static parse(e,t){const r=fromBER(e);if(r.result.error){throw new Error(r.result.error)}const i=this.fromASN(r.result,t);return i}static fromASN(e,t){var r;try{if(isConvertible$1(t)){const r=new t;return r.fromASN(e)}const i=schemaStorage$1.get(t);schemaStorage$1.cache(t);let n=i.schema;if(e.constructor===Constructed&&i.type!==AsnTypeTypes.Choice){n=new Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:i.schema.valueBlock.value});for(const t in i.items){delete e[t]}}const s=compareSchema({},e,n);if(!s.verified){throw new AsnSchemaValidationError(`Data does not match to ${t.name} ASN1 schema. ${s.result.error}`)}const a=new t;if(isTypeOfArray(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value))){throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`)}const r=i.itemType;if(typeof r==="number"){const i=defaultConverter(r);if(!i){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}return t.from(e.valueBlock.value,(e=>i.fromASN(e)))}else{return t.from(e.valueBlock.value,(e=>this.fromASN(e,r)))}}for(const e in i.items){const t=s.result[e];if(!t){continue}const n=i.items[e];const o=n.type;if(typeof o==="number"||isConvertible$1(o)){const i=(r=n.converter)!==null&&r!==void 0?r:isConvertible$1(o)?new o:null;if(!i){throw new Error("Converter is empty")}if(n.repeated){if(n.implicit){const r=n.repeated==="sequence"?Sequence:Set$1;const s=new r;s.valueBlock=t.valueBlock;const o=fromBER(s.toBER(false));if(o.offset===-1){throw new Error(`Cannot parse the child item. ${o.result.error}`)}if(!("value"in o.result.valueBlock&&Array.isArray(o.result.valueBlock.value))){throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.")}const f=o.result.valueBlock.value;a[e]=Array.from(f,(e=>i.fromASN(e)))}else{a[e]=Array.from(t,(e=>i.fromASN(e)))}}else{let r=t;if(n.implicit){let e;if(isConvertible$1(o)){e=(new o).toSchema("")}else{const t=AsnPropTypes[o];const r=asn1js[t];if(!r){throw new Error(`Cannot get '${t}' class from asn1js module`)}e=new r}e.valueBlock=r.valueBlock;r=fromBER(e.toBER(false)).result}a[e]=i.fromASN(r)}}else{if(n.repeated){if(!Array.isArray(t)){throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.")}a[e]=Array.from(t,(e=>this.fromASN(e,o)))}else{a[e]=this.fromASN(t,o)}}}return a}catch(e){if(e instanceof AsnSchemaValidationError){e.schemas.push(t.name)}throw e}}}class AsnSerializer{static serialize(e){if(e instanceof BaseBlock){return e.toBER(false)}return this.toASN(e).toBER(false)}static toASN(e){if(e&&typeof e==="object"&&isConvertible$1(e)){return e.toASN()}if(!(e&&typeof e==="object")){throw new TypeError("Parameter 1 should be type of Object.")}const t=e.constructor;const r=schemaStorage$1.get(t);schemaStorage$1.cache(t);let i=[];if(r.itemType){if(!Array.isArray(e)){throw new TypeError("Parameter 1 should be type of Array.")}if(typeof r.itemType==="number"){const n=defaultConverter(r.itemType);if(!n){throw new Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`)}i=e.map((e=>n.toASN(e)))}else{i=e.map((e=>this.toAsnItem({type:r.itemType},"[]",t,e)))}}else{for(const n in r.items){const s=r.items[n];const a=e[n];if(a===undefined||s.defaultValue===a||typeof s.defaultValue==="object"&&typeof a==="object"&&isArrayEqual(this.serialize(s.defaultValue),this.serialize(a))){continue}const o=AsnSerializer.toAsnItem(s,n,t,a);if(typeof s.context==="number"){if(s.implicit){if(!s.repeated&&(typeof s.type==="number"||isConvertible$1(s.type))){const e={};e.valueHex=o instanceof Null?o.valueBeforeDecodeView:o.valueBlock.toBER();i.push(new Primitive({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else{i.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:o.valueBlock.value}))}}else{i.push(new Constructed({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}))}}else if(s.repeated){i=i.concat(o)}else{i.push(o)}}}let n;switch(r.type){case AsnTypeTypes.Sequence:n=new Sequence({value:i});break;case AsnTypeTypes.Set:n=new Set$1({value:i});break;case AsnTypeTypes.Choice:if(!i[0]){throw new Error(`Schema '${t.name}' has wrong data. Choice cannot be empty.`)}n=i[0];break}return n}static toAsnItem(e,t,r,i){let n;if(typeof e.type==="number"){const s=e.converter;if(!s){throw new Error(`Property '${t}' doesn't have converter for type ${AsnPropTypes[e.type]} in schema '${r.name}'`)}if(e.repeated){if(!Array.isArray(i)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(i,(e=>s.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$1;n=new r({value:t})}else{n=s.toASN(i)}}else{if(e.repeated){if(!Array.isArray(i)){throw new TypeError("Parameter 'objProp' should be type of Array.")}const t=Array.from(i,(e=>this.toASN(e)));const r=e.repeated==="sequence"?Sequence:Set$1;n=new r({value:t})}else{n=this.toASN(i)}}return n}}class AsnArray extends Array{constructor(e=[]){if(typeof e==="number"){super(e)}else{super();for(const t of e){this.push(t)}}}}class AsnConvert{static serialize(e){return AsnSerializer.serialize(e)}static parse(e,t){return AsnParser.parse(e,t)}static toString(e){const t=build.BufferSourceConverter.isBufferSource(e)?build.BufferSourceConverter.toArrayBuffer(e):AsnConvert.serialize(e);const r=fromBER(t);if(r.offset===-1){throw new Error(`Cannot decode ASN.1 data. ${r.result.error}`)}return r.result.toString()}}var ipaddr=createCommonjsModule$1((function(e){(function(t){const r="(0?\\d+|0x[a-f0-9]+)";const i={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")};const n=new RegExp(`^0[0-7]+$`,"i");const s=new RegExp(`^0x[a-f0-9]+$`,"i");const a="%[0-9a-z]{1,}";const o="(?:[0-9a-f]+::?)+";const f={zoneIndex:new RegExp(a,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${a})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${a})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${r}\\.${r}\\.${r}\\.${r}(${a})?$`,"i")};function c(e,t){if(e.indexOf("::")!==e.lastIndexOf("::")){return null}let r=0;let i=-1;let n=(e.match(f.zoneIndex)||[])[0];let s,a;if(n){n=n.substring(1);e=e.replace(/%.+$/,"")}while((i=e.indexOf(":",i+1))>=0){r++}if(e.substr(0,2)==="::"){r--}if(e.substr(-2,2)==="::"){r--}if(r>t){return null}a=t-r;s=":";while(a--){s+="0:"}e=e.replace("::",s);if(e[0]===":"){e=e.slice(1)}if(e[e.length-1]===":"){e=e.slice(0,-1)}t=function(){const t=e.split(":");const r=[];for(let e=0;e<t.length;e++){r.push(parseInt(t[e],16))}return r}();return{parts:t,zoneId:n}}function u(e,t,r,i){if(e.length!==t.length){throw new Error("ipaddr: cannot match CIDR for objects with different lengths")}let n=0;let s;while(i>0){s=r-i;if(s<0){s=0}if(e[n]>>s!==t[n]>>s){return false}i-=r;n+=1}return true}function h(e){if(s.test(e)){return parseInt(e,16)}if(e[0]==="0"&&!isNaN(parseInt(e[1],10))){if(n.test(e)){return parseInt(e,8)}throw new Error(`ipaddr: cannot parse ${e} as octal`)}return parseInt(e,10)}function l(e,t){while(e.length<t){e=`0${e}`}return e}const d={};d.IPv4=function(){function e(e){if(e.length!==4){throw new Error("ipaddr: ipv4 octet count should be 4")}let t,r;for(t=0;t<e.length;t++){r=e[t];if(!(0<=r&&r<=255)){throw new Error("ipaddr: ipv4 octet should fit in 8 bits")}}this.octets=e}e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]};e.prototype.kind=function(){return"ipv4"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv4"){throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one")}return u(this.octets,e.octets,8,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let i,n,s;for(i=3;i>=0;i-=1){n=this.octets[i];if(n in r){s=r[n];if(t&&s!==0){return null}if(s!==8){t=true}e+=s}else{return null}}return 32-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){return this.octets.slice(0)};e.prototype.toIPv4MappedAddress=function(){return d.IPv6.parse(`::ffff:${this.toString()}`)};e.prototype.toNormalizedString=function(){return this.toString()};e.prototype.toString=function(){return this.octets.join(".")};return e}();d.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const i=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const n=[];let s=0;while(s<4){n.push(parseInt(r[s],10)|parseInt(i[s],10)^255);s++}return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.isIPv4=function(e){return this.parser(e)!==null};d.IPv4.isValid=function(e){try{new this(this.parser(e));return true}catch(e){return false}};d.IPv4.isValidFourPartDecimal=function(e){if(d.IPv4.isValid(e)&&e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/)){return true}else{return false}};d.IPv4.networkAddressFromCIDR=function(e){let t,r,i,n,s;try{t=this.parseCIDR(e);i=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();n=[];r=0;while(r<4){n.push(parseInt(i[r],10)&parseInt(s[r],10));r++}return new this(n)}catch(e){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}};d.IPv4.parse=function(e){const t=this.parser(e);if(t===null){throw new Error("ipaddr: string is not formatted like an IPv4 Address")}return new this(t)};d.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];Object.defineProperty(r,"toString",{value:function(){return this.join("/")}});return r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")};d.IPv4.parser=function(e){let t,r,n;if(t=e.match(i.fourOctet)){return function(){const e=t.slice(1,6);const i=[];for(let t=0;t<e.length;t++){r=e[t];i.push(h(r))}return i}()}else if(t=e.match(i.longValue)){n=h(t[1]);if(n>4294967295||n<0){throw new Error("ipaddr: address outside defined range")}return function(){const e=[];let t;for(t=0;t<=24;t+=8){e.push(n>>t&255)}return e}().reverse()}else if(t=e.match(i.twoOctet)){return function(){const e=t.slice(1,4);const r=[];n=h(e[1]);if(n>16777215||n<0){throw new Error("ipaddr: address outside defined range")}r.push(h(e[0]));r.push(n>>16&255);r.push(n>>8&255);r.push(n&255);return r}()}else if(t=e.match(i.threeOctet)){return function(){const e=t.slice(1,5);const r=[];n=h(e[2]);if(n>65535||n<0){throw new Error("ipaddr: address outside defined range")}r.push(h(e[0]));r.push(h(e[1]));r.push(n>>8&255);r.push(n&255);return r}()}else{return null}};d.IPv4.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>32){throw new Error("ipaddr: invalid IPv4 prefix length")}const t=[0,0,0,0];let r=0;const i=Math.floor(e/8);while(r<i){t[r]=255;r++}if(i<4){t[i]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.IPv6=function(){function e(e,t){let r,i;if(e.length===16){this.parts=[];for(r=0;r<=14;r+=2){this.parts.push(e[r]<<8|e[r+1])}}else if(e.length===8){this.parts=e}else{throw new Error("ipaddr: ipv6 part count should be 8 or 16")}for(r=0;r<this.parts.length;r++){i=this.parts[r];if(!(0<=i&&i<=65535)){throw new Error("ipaddr: ipv6 part should fit in 16 bits")}}if(t){this.zoneId=t}}e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]]};e.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"};e.prototype.kind=function(){return"ipv6"};e.prototype.match=function(e,t){let r;if(t===undefined){r=e;e=r[0];t=r[1]}if(e.kind()!=="ipv6"){throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one")}return u(this.parts,e.parts,16,t)};e.prototype.prefixLengthFromSubnetMask=function(){let e=0;let t=false;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let i,n;for(let s=7;s>=0;s-=1){i=this.parts[s];if(i in r){n=r[i];if(t&&n!==0){return null}if(n!==16){t=true}e+=n}else{return null}}return 128-e};e.prototype.range=function(){return d.subnetMatch(this,this.SpecialRanges)};e.prototype.toByteArray=function(){let e;const t=[];const r=this.parts;for(let i=0;i<r.length;i++){e=r[i];t.push(e>>8);t.push(e&255)}return t};e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(l(this.parts[t].toString(16),4))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress()){throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4")}const e=this.parts.slice(-2);const t=e[0];const r=e[1];return new d.IPv4([t>>8,t&255,r>>8,r&255])};e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++){e.push(this.parts[t].toString(16))}return e}.call(this).join(":");let t="";if(this.zoneId){t=`%${this.zoneId}`}return e+t};e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g;const t=this.toNormalizedString();let r=0;let i=-1;let n;while(n=e.exec(t)){if(n[0].length>i){r=n.index;i=n[0].length}}if(i<0){return t}return`${t.substring(0,r)}::${t.substring(r+i)}`};e.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")};return e}();d.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e);const r=t[0].toByteArray();const i=this.subnetMaskFromPrefixLength(t[1]).toByteArray();const n=[];let s=0;while(s<16){n.push(parseInt(r[s],10)|parseInt(i[s],10)^255);s++}return new this(n)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.isIPv6=function(e){return this.parser(e)!==null};d.IPv6.isValid=function(e){if(typeof e==="string"&&e.indexOf(":")===-1){return false}try{const t=this.parser(e);new this(t.parts,t.zoneId);return true}catch(e){return false}};d.IPv6.networkAddressFromCIDR=function(e){let t,r,i,n,s;try{t=this.parseCIDR(e);i=t[0].toByteArray();s=this.subnetMaskFromPrefixLength(t[1]).toByteArray();n=[];r=0;while(r<16){n.push(parseInt(i[r],10)&parseInt(s[r],10));r++}return new this(n)}catch(e){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`)}};d.IPv6.parse=function(e){const t=this.parser(e);if(t.parts===null){throw new Error("ipaddr: string is not formatted like an IPv6 Address")}return new this(t.parts,t.zoneId)};d.IPv6.parseCIDR=function(e){let t,r,i;if(r=e.match(/^(.+)\/(\d+)$/)){t=parseInt(r[2]);if(t>=0&&t<=128){i=[this.parse(r[1]),t];Object.defineProperty(i,"toString",{value:function(){return this.join("/")}});return i}}throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")};d.IPv6.parser=function(e){let t,r,i,n,s,a;if(i=e.match(f.deprecatedTransitional)){return this.parser(`::ffff:${i[1]}`)}if(f.native.test(e)){return c(e,8)}if(i=e.match(f.transitional)){a=i[6]||"";t=c(i[1].slice(0,-1)+a,6);if(t.parts){s=[parseInt(i[2]),parseInt(i[3]),parseInt(i[4]),parseInt(i[5])];for(r=0;r<s.length;r++){n=s[r];if(!(0<=n&&n<=255)){return null}}t.parts.push(s[0]<<8|s[1]);t.parts.push(s[2]<<8|s[3]);return{parts:t.parts,zoneId:t.zoneId}}}return null};d.IPv6.subnetMaskFromPrefixLength=function(e){e=parseInt(e);if(e<0||e>128){throw new Error("ipaddr: invalid IPv6 prefix length")}const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const i=Math.floor(e/8);while(r<i){t[r]=255;r++}if(i<16){t[i]=Math.pow(2,e%8)-1<<8-e%8}return new this(t)};d.fromByteArray=function(e){const t=e.length;if(t===4){return new d.IPv4(e)}else if(t===16){return new d.IPv6(e)}else{throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")}};d.isValid=function(e){return d.IPv6.isValid(e)||d.IPv4.isValid(e)};d.parse=function(e){if(d.IPv6.isValid(e)){return d.IPv6.parse(e)}else if(d.IPv4.isValid(e)){return d.IPv4.parse(e)}else{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")}};d.parseCIDR=function(e){try{return d.IPv6.parseCIDR(e)}catch(t){try{return d.IPv4.parseCIDR(e)}catch(e){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}};d.process=function(e){const t=this.parse(e);if(t.kind()==="ipv6"&&t.isIPv4MappedAddress()){return t.toIPv4Address()}else{return t}};d.subnetMatch=function(e,t,r){let i,n,s,a;if(r===undefined||r===null){r="unicast"}for(n in t){if(Object.prototype.hasOwnProperty.call(t,n)){s=t[n];if(s[0]&&!(s[0]instanceof Array)){s=[s]}for(i=0;i<s.length;i++){a=s[i];if(e.kind()===a[0].kind()&&e.match.apply(e,a)){return n}}}}return r};if(e.exports){e.exports=d}else{t.ipaddr=d}})(commonjsGlobal)}));class IpConverter{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0){return"::/0"}if(e.length!==16){return e}const t=parseInt(e.slice(8),16).toString(2).split("").reduce(((e,t)=>e+ +t),0);let r=e.slice(0,8).replace(/(.{2})/g,(e=>`${parseInt(e,16)}.`));r=r.slice(0,-1);return`${r}/${t}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const t=new Uint8Array(e);const r=ipaddr.fromByteArray(Array.from(t));return r.toString()}return this.decodeIP(build.Convert.ToHex(e))}static fromString(e){const t=ipaddr.parse(e);return new Uint8Array(t.toByteArray()).buffer}}var RelativeDistinguishedName_1,RDNSequence_1,Name_1;let DirectoryString=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.TeletexString})],DirectoryString.prototype,"teletexString",void 0);__decorate([AsnProp({type:AsnPropTypes.PrintableString})],DirectoryString.prototype,"printableString",void 0);__decorate([AsnProp({type:AsnPropTypes.UniversalString})],DirectoryString.prototype,"universalString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DirectoryString.prototype,"utf8String",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DirectoryString.prototype,"bmpString",void 0);DirectoryString=__decorate([AsnType({type:AsnTypeTypes.Choice})],DirectoryString);let AttributeValue=class e extends DirectoryString{constructor(e={}){super(e);Object.assign(this,e)}toString(){return this.ia5String||(this.anyValue?build.Convert.ToHex(this.anyValue):super.toString())}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],AttributeValue.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],AttributeValue.prototype,"anyValue",void 0);AttributeValue=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttributeValue);class AttributeTypeAndValue{constructor(e={}){this.type="";this.value=new AttributeValue;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AttributeTypeAndValue.prototype,"type",void 0);__decorate([AsnProp({type:AttributeValue})],AttributeTypeAndValue.prototype,"value",void 0);let RelativeDistinguishedName=RelativeDistinguishedName_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RelativeDistinguishedName_1.prototype)}};RelativeDistinguishedName=RelativeDistinguishedName_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:AttributeTypeAndValue})],RelativeDistinguishedName);let RDNSequence=RDNSequence_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RDNSequence_1.prototype)}};RDNSequence=RDNSequence_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RelativeDistinguishedName})],RDNSequence);let Name$1=Name_1=class e extends RDNSequence{constructor(e){super(e);Object.setPrototypeOf(this,Name_1.prototype)}};Name$1=Name_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Name$1);const AsnIpConverter={fromASN:e=>IpConverter.toString(AsnOctetStringConverter.fromASN(e)),toASN:e=>AsnOctetStringConverter.toASN(IpConverter.fromString(e))};class OtherName{constructor(e={}){this.typeId="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherName.prototype,"typeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],OtherName.prototype,"value",void 0);class EDIPartyName{constructor(e={}){this.partyName=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:DirectoryString,optional:true,context:0,implicit:true})],EDIPartyName.prototype,"nameAssigner",void 0);__decorate([AsnProp({type:DirectoryString,context:1,implicit:true})],EDIPartyName.prototype,"partyName",void 0);let GeneralName$1=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OtherName,context:0,implicit:true})],GeneralName$1.prototype,"otherName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:1,implicit:true})],GeneralName$1.prototype,"rfc822Name",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:2,implicit:true})],GeneralName$1.prototype,"dNSName",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:3,implicit:true})],GeneralName$1.prototype,"x400Address",void 0);__decorate([AsnProp({type:Name$1,context:4,implicit:false})],GeneralName$1.prototype,"directoryName",void 0);__decorate([AsnProp({type:EDIPartyName,context:5})],GeneralName$1.prototype,"ediPartyName",void 0);__decorate([AsnProp({type:AsnPropTypes.IA5String,context:6,implicit:true})],GeneralName$1.prototype,"uniformResourceIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString,context:7,implicit:true,converter:AsnIpConverter})],GeneralName$1.prototype,"iPAddress",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,context:8,implicit:true})],GeneralName$1.prototype,"registeredID",void 0);GeneralName$1=__decorate([AsnType({type:AsnTypeTypes.Choice})],GeneralName$1);const id_pkix="1.3.6.1.5.5.7";const id_kp=`${id_pkix}.3`;const id_ce="2.5.29";var AuthorityInfoAccessSyntax_1;class AccessDescription{constructor(e={}){this.accessMethod="";this.accessLocation=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AccessDescription.prototype,"accessMethod",void 0);__decorate([AsnProp({type:GeneralName$1})],AccessDescription.prototype,"accessLocation",void 0);let AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthorityInfoAccessSyntax_1.prototype)}};AuthorityInfoAccessSyntax=AuthorityInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],AuthorityInfoAccessSyntax);const id_ce_authorityKeyIdentifier=`${id_ce}.35`;class KeyIdentifier extends OctetString{}class AuthorityKeyIdentifier{constructor(e={}){if(e){Object.assign(this,e)}}}__decorate([AsnProp({type:KeyIdentifier,context:0,optional:true,implicit:true})],AuthorityKeyIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,optional:true,implicit:true,repeated:"sequence"})],AuthorityKeyIdentifier.prototype,"authorityCertIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,optional:true,implicit:true,converter:AsnIntegerArrayBufferConverter$1})],AuthorityKeyIdentifier.prototype,"authorityCertSerialNumber",void 0);const id_ce_basicConstraints=`${id_ce}.19`;class BasicConstraints{constructor(e={}){this.cA=false;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:false})],BasicConstraints.prototype,"cA",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],BasicConstraints.prototype,"pathLenConstraint",void 0);var GeneralNames_1;let GeneralNames$1=GeneralNames_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralNames_1.prototype)}};GeneralNames$1=GeneralNames_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralName$1})],GeneralNames$1);var CertificateIssuer_1;let CertificateIssuer=CertificateIssuer_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,CertificateIssuer_1.prototype)}};CertificateIssuer=CertificateIssuer_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CertificateIssuer);var CertificatePolicies_1;const id_ce_certificatePolicies=`${id_ce}.32`;let DisplayText=class e{constructor(e={}){Object.assign(this,e)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],DisplayText.prototype,"ia5String",void 0);__decorate([AsnProp({type:AsnPropTypes.VisibleString})],DisplayText.prototype,"visibleString",void 0);__decorate([AsnProp({type:AsnPropTypes.BmpString})],DisplayText.prototype,"bmpString",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],DisplayText.prototype,"utf8String",void 0);DisplayText=__decorate([AsnType({type:AsnTypeTypes.Choice})],DisplayText);class NoticeReference{constructor(e={}){this.organization=new DisplayText;this.noticeNumbers=[];Object.assign(this,e)}}__decorate([AsnProp({type:DisplayText})],NoticeReference.prototype,"organization",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,repeated:"sequence"})],NoticeReference.prototype,"noticeNumbers",void 0);class UserNotice{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:NoticeReference,optional:true})],UserNotice.prototype,"noticeRef",void 0);__decorate([AsnProp({type:DisplayText,optional:true})],UserNotice.prototype,"explicitText",void 0);let Qualifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],Qualifier.prototype,"cPSuri",void 0);__decorate([AsnProp({type:UserNotice})],Qualifier.prototype,"userNotice",void 0);Qualifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],Qualifier);class PolicyQualifierInfo{constructor(e={}){this.policyQualifierId="";this.qualifier=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyQualifierInfo.prototype,"policyQualifierId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],PolicyQualifierInfo.prototype,"qualifier",void 0);class PolicyInformation{constructor(e={}){this.policyIdentifier="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyInformation.prototype,"policyIdentifier",void 0);__decorate([AsnProp({type:PolicyQualifierInfo,repeated:"sequence",optional:true})],PolicyInformation.prototype,"policyQualifiers",void 0);let CertificatePolicies=CertificatePolicies_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificatePolicies_1.prototype)}};CertificatePolicies=CertificatePolicies_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyInformation})],CertificatePolicies);let CRLNumber=class e{constructor(e=0){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer})],CRLNumber.prototype,"value",void 0);CRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLNumber);let BaseCRLNumber=class e extends CRLNumber{};BaseCRLNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],BaseCRLNumber);var CRLDistributionPoints_1;var ReasonFlags;(function(e){e[e["unused"]=1]="unused";e[e["keyCompromise"]=2]="keyCompromise";e[e["cACompromise"]=4]="cACompromise";e[e["affiliationChanged"]=8]="affiliationChanged";e[e["superseded"]=16]="superseded";e[e["cessationOfOperation"]=32]="cessationOfOperation";e[e["certificateHold"]=64]="certificateHold";e[e["privilegeWithdrawn"]=128]="privilegeWithdrawn";e[e["aACompromise"]=256]="aACompromise"})(ReasonFlags||(ReasonFlags={}));class Reason extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&ReasonFlags.aACompromise){e.push("aACompromise")}if(t&ReasonFlags.affiliationChanged){e.push("affiliationChanged")}if(t&ReasonFlags.cACompromise){e.push("cACompromise")}if(t&ReasonFlags.certificateHold){e.push("certificateHold")}if(t&ReasonFlags.cessationOfOperation){e.push("cessationOfOperation")}if(t&ReasonFlags.keyCompromise){e.push("keyCompromise")}if(t&ReasonFlags.privilegeWithdrawn){e.push("privilegeWithdrawn")}if(t&ReasonFlags.superseded){e.push("superseded")}if(t&ReasonFlags.unused){e.push("unused")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}let DistributionPointName=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,repeated:"sequence",implicit:true})],DistributionPointName.prototype,"fullName",void 0);__decorate([AsnProp({type:RelativeDistinguishedName,context:1,implicit:true})],DistributionPointName.prototype,"nameRelativeToCRLIssuer",void 0);DistributionPointName=__decorate([AsnType({type:AsnTypeTypes.Choice})],DistributionPointName);class DistributionPoint{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],DistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:Reason,context:1,optional:true,implicit:true})],DistributionPoint.prototype,"reasons",void 0);__decorate([AsnProp({type:GeneralName$1,context:2,optional:true,repeated:"sequence",implicit:true})],DistributionPoint.prototype,"cRLIssuer",void 0);let CRLDistributionPoints=CRLDistributionPoints_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CRLDistributionPoints_1.prototype)}};CRLDistributionPoints=CRLDistributionPoints_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],CRLDistributionPoints);var FreshestCRL_1;let FreshestCRL=FreshestCRL_1=class e extends CRLDistributionPoints{constructor(e){super(e);Object.setPrototypeOf(this,FreshestCRL_1.prototype)}};FreshestCRL=FreshestCRL_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:DistributionPoint})],FreshestCRL);class IssuingDistributionPoint{constructor(e={}){this.onlyContainsUserCerts=IssuingDistributionPoint.ONLY;this.onlyContainsCACerts=IssuingDistributionPoint.ONLY;this.indirectCRL=IssuingDistributionPoint.ONLY;this.onlyContainsAttributeCerts=IssuingDistributionPoint.ONLY;Object.assign(this,e)}}IssuingDistributionPoint.ONLY=false;__decorate([AsnProp({type:DistributionPointName,context:0,optional:true})],IssuingDistributionPoint.prototype,"distributionPoint",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:1,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsUserCerts",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:2,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsCACerts",void 0);__decorate([AsnProp({type:Reason,context:3,optional:true,implicit:true})],IssuingDistributionPoint.prototype,"onlySomeReasons",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:4,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"indirectCRL",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,context:5,defaultValue:IssuingDistributionPoint.ONLY,implicit:true})],IssuingDistributionPoint.prototype,"onlyContainsAttributeCerts",void 0);var CRLReasons;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(CRLReasons||(CRLReasons={}));let CRLReason=class e{constructor(e=CRLReasons.unspecified){this.reason=CRLReasons.unspecified;this.reason=e}toJSON(){return CRLReasons[this.reason]}toString(){return this.toJSON()}};__decorate([AsnProp({type:AsnPropTypes.Enumerated})],CRLReason.prototype,"reason",void 0);CRLReason=__decorate([AsnType({type:AsnTypeTypes.Choice})],CRLReason);var ExtendedKeyUsage_1;const id_ce_extKeyUsage=`${id_ce}.37`;let ExtendedKeyUsage$1=ExtendedKeyUsage_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedKeyUsage_1.prototype)}};ExtendedKeyUsage$1=ExtendedKeyUsage_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],ExtendedKeyUsage$1);const id_kp_serverAuth=`${id_kp}.1`;const id_kp_clientAuth=`${id_kp}.2`;const id_kp_codeSigning=`${id_kp}.3`;const id_kp_emailProtection=`${id_kp}.4`;const id_kp_timeStamping=`${id_kp}.8`;const id_kp_OCSPSigning=`${id_kp}.9`;let InhibitAnyPolicy=class e{constructor(e=new ArrayBuffer(0)){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],InhibitAnyPolicy.prototype,"value",void 0);InhibitAnyPolicy=__decorate([AsnType({type:AsnTypeTypes.Choice})],InhibitAnyPolicy);let InvalidityDate=class e{constructor(e){this.value=new Date;if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],InvalidityDate.prototype,"value",void 0);InvalidityDate=__decorate([AsnType({type:AsnTypeTypes.Choice})],InvalidityDate);var IssueAlternativeName_1;let IssueAlternativeName=IssueAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,IssueAlternativeName_1.prototype)}};IssueAlternativeName=IssueAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],IssueAlternativeName);const id_ce_keyUsage=`${id_ce}.15`;var KeyUsageFlags$1;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags$1||(KeyUsageFlags$1={}));class KeyUsage extends BitString{toJSON(){const e=this.toNumber();const t=[];if(e&KeyUsageFlags$1.cRLSign){t.push("crlSign")}if(e&KeyUsageFlags$1.dataEncipherment){t.push("dataEncipherment")}if(e&KeyUsageFlags$1.decipherOnly){t.push("decipherOnly")}if(e&KeyUsageFlags$1.digitalSignature){t.push("digitalSignature")}if(e&KeyUsageFlags$1.encipherOnly){t.push("encipherOnly")}if(e&KeyUsageFlags$1.keyAgreement){t.push("keyAgreement")}if(e&KeyUsageFlags$1.keyCertSign){t.push("keyCertSign")}if(e&KeyUsageFlags$1.keyEncipherment){t.push("keyEncipherment")}if(e&KeyUsageFlags$1.nonRepudiation){t.push("nonRepudiation")}return t}toString(){return`[${this.toJSON().join(", ")}]`}}var GeneralSubtrees_1;class GeneralSubtree{constructor(e={}){this.base=new GeneralName$1;this.minimum=0;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],GeneralSubtree.prototype,"base",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:0,implicit:true})],GeneralSubtree.prototype,"minimum",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,optional:true,implicit:true})],GeneralSubtree.prototype,"maximum",void 0);let GeneralSubtrees=GeneralSubtrees_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,GeneralSubtrees_1.prototype)}};GeneralSubtrees=GeneralSubtrees_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:GeneralSubtree})],GeneralSubtrees);class NameConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralSubtrees,context:0,optional:true,implicit:true})],NameConstraints.prototype,"permittedSubtrees",void 0);__decorate([AsnProp({type:GeneralSubtrees,context:1,optional:true,implicit:true})],NameConstraints.prototype,"excludedSubtrees",void 0);class PolicyConstraints{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"requireExplicitPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:1,implicit:true,optional:true,converter:AsnIntegerArrayBufferConverter$1})],PolicyConstraints.prototype,"inhibitPolicyMapping",void 0);var PolicyMappings_1;class PolicyMapping{constructor(e={}){this.issuerDomainPolicy="";this.subjectDomainPolicy="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"issuerDomainPolicy",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PolicyMapping.prototype,"subjectDomainPolicy",void 0);let PolicyMappings=PolicyMappings_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PolicyMappings_1.prototype)}};PolicyMappings=PolicyMappings_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PolicyMapping})],PolicyMappings);var SubjectAlternativeName_1;const id_ce_subjectAltName=`${id_ce}.17`;let SubjectAlternativeName=SubjectAlternativeName_1=class e extends GeneralNames$1{constructor(e){super(e);Object.setPrototypeOf(this,SubjectAlternativeName_1.prototype)}};SubjectAlternativeName=SubjectAlternativeName_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SubjectAlternativeName);class Attribute$2{constructor(e={}){this.type="";this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$2.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$2.prototype,"values",void 0);var SubjectDirectoryAttributes_1;let SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectDirectoryAttributes_1.prototype)}};SubjectDirectoryAttributes=SubjectDirectoryAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],SubjectDirectoryAttributes);const id_ce_subjectKeyIdentifier=`${id_ce}.14`;class SubjectKeyIdentifier extends KeyIdentifier{}class PrivateKeyUsagePeriod{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:0,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notBefore",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,context:1,implicit:true,optional:true})],PrivateKeyUsagePeriod.prototype,"notAfter",void 0);var EntrustInfoFlags;(function(e){e[e["keyUpdateAllowed"]=1]="keyUpdateAllowed";e[e["newExtensions"]=2]="newExtensions";e[e["pKIXCertificate"]=4]="pKIXCertificate"})(EntrustInfoFlags||(EntrustInfoFlags={}));class EntrustInfo extends BitString{toJSON(){const e=[];const t=this.toNumber();if(t&EntrustInfoFlags.pKIXCertificate){e.push("pKIXCertificate")}if(t&EntrustInfoFlags.newExtensions){e.push("newExtensions")}if(t&EntrustInfoFlags.keyUpdateAllowed){e.push("keyUpdateAllowed")}return e}toString(){return`[${this.toJSON().join(", ")}]`}}class EntrustVersionInfo{constructor(e={}){this.entrustVers="";this.entrustInfoFlags=new EntrustInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralString})],EntrustVersionInfo.prototype,"entrustVers",void 0);__decorate([AsnProp({type:EntrustInfo})],EntrustVersionInfo.prototype,"entrustInfoFlags",void 0);var SubjectInfoAccessSyntax_1;let SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SubjectInfoAccessSyntax_1.prototype)}};SubjectInfoAccessSyntax=SubjectInfoAccessSyntax_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AccessDescription})],SubjectInfoAccessSyntax);class AlgorithmIdentifier$1{constructor(e={}){this.algorithm="";Object.assign(this,e)}isEqual(e){return e instanceof AlgorithmIdentifier$1&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&build.isEqual(e.parameters,this.parameters)||e.parameters===this.parameters)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier$1.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier$1.prototype,"parameters",void 0);class SubjectPublicKeyInfo{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.subjectPublicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],SubjectPublicKeyInfo.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],SubjectPublicKeyInfo.prototype,"subjectPublicKey",void 0);let Time=class e{constructor(e){if(e){if(typeof e==="string"||typeof e==="number"||e instanceof Date){const t=new Date(e);if(t.getUTCFullYear()>2049){this.generalTime=t}else{this.utcTime=t}}else{Object.assign(this,e)}}}getTime(){const e=this.utcTime||this.generalTime;if(!e){throw new Error("Cannot get time from CHOICE object")}return e}};__decorate([AsnProp({type:AsnPropTypes.UTCTime})],Time.prototype,"utcTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],Time.prototype,"generalTime",void 0);Time=__decorate([AsnType({type:AsnTypeTypes.Choice})],Time);class Validity{constructor(e){this.notBefore=new Time(new Date);this.notAfter=new Time(new Date);if(e){this.notBefore=new Time(e.notBefore);this.notAfter=new Time(e.notAfter)}}}__decorate([AsnProp({type:Time})],Validity.prototype,"notBefore",void 0);__decorate([AsnProp({type:Time})],Validity.prototype,"notAfter",void 0);var Extensions_1;class Extension$1{constructor(e={}){this.extnID="";this.critical=Extension$1.CRITICAL;this.extnValue=new OctetString;Object.assign(this,e)}}Extension$1.CRITICAL=false;__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Extension$1.prototype,"extnID",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:Extension$1.CRITICAL})],Extension$1.prototype,"critical",void 0);__decorate([AsnProp({type:OctetString})],Extension$1.prototype,"extnValue",void 0);let Extensions=Extensions_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Extensions_1.prototype)}};Extensions=Extensions_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Extension$1})],Extensions);var Version$1;(function(e){e[e["v1"]=0]="v1";e[e["v2"]=1]="v2";e[e["v3"]=2]="v3"})(Version$1||(Version$1={}));class TBSCertificate{constructor(e={}){this.version=Version$1.v1;this.serialNumber=new ArrayBuffer(0);this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.validity=new Validity;this.subject=new Name$1;this.subjectPublicKeyInfo=new SubjectPublicKeyInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,context:0,defaultValue:Version$1.v1})],TBSCertificate.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],TBSCertificate.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertificate.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"issuer",void 0);__decorate([AsnProp({type:Validity})],TBSCertificate.prototype,"validity",void 0);__decorate([AsnProp({type:Name$1})],TBSCertificate.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],TBSCertificate.prototype,"subjectPublicKeyInfo",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,implicit:true,optional:true})],TBSCertificate.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:2,implicit:true,optional:true})],TBSCertificate.prototype,"subjectUniqueID",void 0);__decorate([AsnProp({type:Extensions,context:3,optional:true})],TBSCertificate.prototype,"extensions",void 0);class Certificate{constructor(e={}){this.tbsCertificate=new TBSCertificate;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertificate})],Certificate.prototype,"tbsCertificate",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],Certificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],Certificate.prototype,"signatureValue",void 0);class RevokedCertificate{constructor(e={}){this.userCertificate=new ArrayBuffer(0);this.revocationDate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RevokedCertificate.prototype,"userCertificate",void 0);__decorate([AsnProp({type:Time})],RevokedCertificate.prototype,"revocationDate",void 0);__decorate([AsnProp({type:Extension$1,optional:true,repeated:"sequence"})],RevokedCertificate.prototype,"crlEntryExtensions",void 0);class TBSCertList{constructor(e={}){this.signature=new AlgorithmIdentifier$1;this.issuer=new Name$1;this.thisUpdate=new Time;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],TBSCertList.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],TBSCertList.prototype,"signature",void 0);__decorate([AsnProp({type:Name$1})],TBSCertList.prototype,"issuer",void 0);__decorate([AsnProp({type:Time})],TBSCertList.prototype,"thisUpdate",void 0);__decorate([AsnProp({type:Time,optional:true})],TBSCertList.prototype,"nextUpdate",void 0);__decorate([AsnProp({type:RevokedCertificate,repeated:"sequence",optional:true})],TBSCertList.prototype,"revokedCertificates",void 0);__decorate([AsnProp({type:Extension$1,optional:true,context:0,repeated:"sequence"})],TBSCertList.prototype,"crlExtensions",void 0);class CertificateList{constructor(e={}){this.tbsCertList=new TBSCertList;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:TBSCertList})],CertificateList.prototype,"tbsCertList",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificateList.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificateList.prototype,"signature",void 0);class Attribute$1{constructor(e={}){this.attrType="";this.attrValues=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Attribute$1.prototype,"attrType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],Attribute$1.prototype,"attrValues",void 0);class ACClearAttrs{constructor(e={}){this.acIssuer=new GeneralName$1;this.acSerial=0;this.attrs=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],ACClearAttrs.prototype,"acIssuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer})],ACClearAttrs.prototype,"acSerial",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],ACClearAttrs.prototype,"attrs",void 0);var AttrSpec_1;let AttrSpec=AttrSpec_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AttrSpec_1.prototype)}};AttrSpec=AttrSpec_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:AsnPropTypes.ObjectIdentifier})],AttrSpec);class AAControls{constructor(e={}){this.permitUnSpecified=true;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,optional:true})],AAControls.prototype,"pathLenConstraint",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:0,optional:true})],AAControls.prototype,"permittedAttrs",void 0);__decorate([AsnProp({type:AttrSpec,implicit:true,context:1,optional:true})],AAControls.prototype,"excludedAttrs",void 0);__decorate([AsnProp({type:AsnPropTypes.Boolean,defaultValue:true})],AAControls.prototype,"permitUnSpecified",void 0);class IssuerSerial{constructor(e={}){this.issuer=new GeneralNames$1;this.serial=new ArrayBuffer(0);this.issuerUID=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1})],IssuerSerial.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerSerial.prototype,"serial",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],IssuerSerial.prototype,"issuerUID",void 0);var DigestedObjectType;(function(e){e[e["publicKey"]=0]="publicKey";e[e["publicKeyCert"]=1]="publicKeyCert";e[e["otherObjectTypes"]=2]="otherObjectTypes"})(DigestedObjectType||(DigestedObjectType={}));class ObjectDigestInfo{constructor(e={}){this.digestedObjectType=DigestedObjectType.publicKey;this.digestAlgorithm=new AlgorithmIdentifier$1;this.objectDigest=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Enumerated})],ObjectDigestInfo.prototype,"digestedObjectType",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,optional:true})],ObjectDigestInfo.prototype,"otherObjectTypeID",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],ObjectDigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],ObjectDigestInfo.prototype,"objectDigest",void 0);class V2Form{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,optional:true})],V2Form.prototype,"issuerName",void 0);__decorate([AsnProp({type:IssuerSerial,context:0,implicit:true,optional:true})],V2Form.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:ObjectDigestInfo,context:1,implicit:true,optional:true})],V2Form.prototype,"objectDigestInfo",void 0);let AttCertIssuer=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,repeated:"sequence"})],AttCertIssuer.prototype,"v1Form",void 0);__decorate([AsnProp({type:V2Form,context:0,implicit:true})],AttCertIssuer.prototype,"v2Form",void 0);AttCertIssuer=__decorate([AsnType({type:AsnTypeTypes.Choice})],AttCertIssuer);class AttCertValidityPeriod{constructor(e={}){this.notBeforeTime=new Date;this.notAfterTime=new Date;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notBeforeTime",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],AttCertValidityPeriod.prototype,"notAfterTime",void 0);class Holder{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial,implicit:true,context:0,optional:true})],Holder.prototype,"baseCertificateID",void 0);__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:1,optional:true})],Holder.prototype,"entityName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,implicit:true,context:2,optional:true})],Holder.prototype,"objectDigestInfo",void 0);var AttCertVersion;(function(e){e[e["v2"]=1]="v2"})(AttCertVersion||(AttCertVersion={}));class AttributeCertificateInfo{constructor(e={}){this.version=AttCertVersion.v2;this.holder=new Holder;this.issuer=new AttCertIssuer;this.signature=new AlgorithmIdentifier$1;this.serialNumber=new ArrayBuffer(0);this.attrCertValidityPeriod=new AttCertValidityPeriod;this.attributes=[];Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],AttributeCertificateInfo.prototype,"version",void 0);__decorate([AsnProp({type:Holder})],AttributeCertificateInfo.prototype,"holder",void 0);__decorate([AsnProp({type:AttCertIssuer})],AttributeCertificateInfo.prototype,"issuer",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificateInfo.prototype,"signature",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],AttributeCertificateInfo.prototype,"serialNumber",void 0);__decorate([AsnProp({type:AttCertValidityPeriod})],AttributeCertificateInfo.prototype,"attrCertValidityPeriod",void 0);__decorate([AsnProp({type:Attribute$2,repeated:"sequence"})],AttributeCertificateInfo.prototype,"attributes",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,optional:true})],AttributeCertificateInfo.prototype,"issuerUniqueID",void 0);__decorate([AsnProp({type:Extensions,optional:true})],AttributeCertificateInfo.prototype,"extensions",void 0);class AttributeCertificate{constructor(e={}){this.acinfo=new AttributeCertificateInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signatureValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AttributeCertificateInfo})],AttributeCertificate.prototype,"acinfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],AttributeCertificate.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],AttributeCertificate.prototype,"signatureValue",void 0);var ClassListFlags;(function(e){e[e["unmarked"]=1]="unmarked";e[e["unclassified"]=2]="unclassified";e[e["restricted"]=4]="restricted";e[e["confidential"]=8]="confidential";e[e["secret"]=16]="secret";e[e["topSecret"]=32]="topSecret"})(ClassListFlags||(ClassListFlags={}));class ClassList extends BitString{}class SecurityCategory{constructor(e={}){this.type="";this.value=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier,implicit:true,context:0})],SecurityCategory.prototype,"type",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,implicit:true,context:1})],SecurityCategory.prototype,"value",void 0);class Clearance{constructor(e={}){this.policyId="";this.classList=new ClassList(ClassListFlags.unclassified);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],Clearance.prototype,"policyId",void 0);__decorate([AsnProp({type:ClassList,defaultValue:new ClassList(ClassListFlags.unclassified)})],Clearance.prototype,"classList",void 0);__decorate([AsnProp({type:SecurityCategory,repeated:"set"})],Clearance.prototype,"securityCategories",void 0);class IetfAttrSyntaxValueChoices{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],IetfAttrSyntaxValueChoices.prototype,"cotets",void 0);__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],IetfAttrSyntaxValueChoices.prototype,"oid",void 0);__decorate([AsnProp({type:AsnPropTypes.Utf8String})],IetfAttrSyntaxValueChoices.prototype,"string",void 0);class IetfAttrSyntax{constructor(e={}){this.values=[];Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],IetfAttrSyntax.prototype,"policyAuthority",void 0);__decorate([AsnProp({type:IetfAttrSyntaxValueChoices,repeated:"sequence"})],IetfAttrSyntax.prototype,"values",void 0);var Targets_1;class TargetCert{constructor(e={}){this.targetCertificate=new IssuerSerial;Object.assign(this,e)}}__decorate([AsnProp({type:IssuerSerial})],TargetCert.prototype,"targetCertificate",void 0);__decorate([AsnProp({type:GeneralName$1,optional:true})],TargetCert.prototype,"targetName",void 0);__decorate([AsnProp({type:ObjectDigestInfo,optional:true})],TargetCert.prototype,"certDigestInfo",void 0);let Target=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:GeneralName$1,context:0,implicit:true})],Target.prototype,"targetName",void 0);__decorate([AsnProp({type:GeneralName$1,context:1,implicit:true})],Target.prototype,"targetGroup",void 0);__decorate([AsnProp({type:TargetCert,context:2,implicit:true})],Target.prototype,"targetCert",void 0);Target=__decorate([AsnType({type:AsnTypeTypes.Choice})],Target);let Targets=Targets_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Targets_1.prototype)}};Targets=Targets_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Target})],Targets);var ProxyInfo_1;let ProxyInfo=ProxyInfo_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ProxyInfo_1.prototype)}};ProxyInfo=ProxyInfo_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Targets})],ProxyInfo);class RoleSyntax{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:GeneralNames$1,implicit:true,context:0,optional:true})],RoleSyntax.prototype,"roleAuthority",void 0);__decorate([AsnProp({type:GeneralName$1,implicit:true,context:1})],RoleSyntax.prototype,"roleName",void 0);class SvceAuthInfo{constructor(e={}){this.service=new GeneralName$1;this.ident=new GeneralName$1;Object.assign(this,e)}}__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"service",void 0);__decorate([AsnProp({type:GeneralName$1})],SvceAuthInfo.prototype,"ident",void 0);__decorate([AsnProp({type:OctetString,optional:true})],SvceAuthInfo.prototype,"authInfo",void 0);var CertificateSet_1;class OtherCertificateFormat{constructor(e={}){this.otherCertFormat="";this.otherCert=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherCertificateFormat.prototype,"otherCertFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherCertificateFormat.prototype,"otherCert",void 0);let CertificateChoices=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:Certificate})],CertificateChoices.prototype,"certificate",void 0);__decorate([AsnProp({type:AttributeCertificate,context:2,implicit:true})],CertificateChoices.prototype,"v2AttrCert",void 0);__decorate([AsnProp({type:OtherCertificateFormat,context:3,implicit:true})],CertificateChoices.prototype,"other",void 0);CertificateChoices=__decorate([AsnType({type:AsnTypeTypes.Choice})],CertificateChoices);let CertificateSet=CertificateSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,CertificateSet_1.prototype)}};CertificateSet=CertificateSet_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:CertificateChoices})],CertificateSet);class ContentInfo{constructor(e={}){this.contentType="";this.content=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],ContentInfo.prototype,"content",void 0);let EncapsulatedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString})],EncapsulatedContent.prototype,"single",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],EncapsulatedContent.prototype,"any",void 0);EncapsulatedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncapsulatedContent);class EncapsulatedContentInfo{constructor(e={}){this.eContentType="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncapsulatedContentInfo.prototype,"eContentType",void 0);__decorate([AsnProp({type:EncapsulatedContent,context:0,optional:true})],EncapsulatedContentInfo.prototype,"eContent",void 0);var CMSVersion;(function(e){e[e["v0"]=0]="v0";e[e["v1"]=1]="v1";e[e["v2"]=2]="v2";e[e["v3"]=3]="v3";e[e["v4"]=4]="v4";e[e["v5"]=5]="v5"})(CMSVersion||(CMSVersion={}));let DigestAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};DigestAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],DigestAlgorithmIdentifier);let SignatureAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};SignatureAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SignatureAlgorithmIdentifier);let KeyEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyEncryptionAlgorithmIdentifier);let ContentEncryptionAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};ContentEncryptionAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ContentEncryptionAlgorithmIdentifier);let MessageAuthenticationCodeAlgorithm=class e extends AlgorithmIdentifier$1{};MessageAuthenticationCodeAlgorithm=__decorate([AsnType({type:AsnTypeTypes.Sequence})],MessageAuthenticationCodeAlgorithm);let KeyDerivationAlgorithmIdentifier=class e extends AlgorithmIdentifier$1{};KeyDerivationAlgorithmIdentifier=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyDerivationAlgorithmIdentifier);let EncryptedContent=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:OctetString,context:0,implicit:true,optional:true})],EncryptedContent.prototype,"value",void 0);__decorate([AsnProp({type:OctetString,converter:AsnConstructedOctetStringConverter,context:0,implicit:true,optional:true,repeated:"sequence"})],EncryptedContent.prototype,"constructedValue",void 0);EncryptedContent=__decorate([AsnType({type:AsnTypeTypes.Choice})],EncryptedContent);class EncryptedContentInfo{constructor(e={}){this.contentType="";this.contentEncryptionAlgorithm=new ContentEncryptionAlgorithmIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],EncryptedContentInfo.prototype,"contentType",void 0);__decorate([AsnProp({type:ContentEncryptionAlgorithmIdentifier})],EncryptedContentInfo.prototype,"contentEncryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedContent,optional:true})],EncryptedContentInfo.prototype,"encryptedContent",void 0);class IssuerAndSerialNumber{constructor(e={}){this.issuer=new Name$1;this.serialNumber=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:Name$1})],IssuerAndSerialNumber.prototype,"issuer",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],IssuerAndSerialNumber.prototype,"serialNumber",void 0);class OtherKeyAttribute{constructor(e={}){this.keyAttrId="";Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherKeyAttribute.prototype,"keyAttrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],OtherKeyAttribute.prototype,"keyAttr",void 0);var RecipientEncryptedKeys_1;class RecipientKeyIdentifier{constructor(e={}){this.subjectKeyIdentifier=new SubjectKeyIdentifier;Object.assign(this,e)}}__decorate([AsnProp({type:SubjectKeyIdentifier})],RecipientKeyIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],RecipientKeyIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],RecipientKeyIdentifier.prototype,"other",void 0);let KeyAgreeRecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:RecipientKeyIdentifier,context:0,implicit:true,optional:true})],KeyAgreeRecipientIdentifier.prototype,"rKeyId",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],KeyAgreeRecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);KeyAgreeRecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],KeyAgreeRecipientIdentifier);class RecipientEncryptedKey{constructor(e={}){this.rid=new KeyAgreeRecipientIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:KeyAgreeRecipientIdentifier})],RecipientEncryptedKey.prototype,"rid",void 0);__decorate([AsnProp({type:OctetString})],RecipientEncryptedKey.prototype,"encryptedKey",void 0);let RecipientEncryptedKeys=RecipientEncryptedKeys_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientEncryptedKeys_1.prototype)}};RecipientEncryptedKeys=RecipientEncryptedKeys_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:RecipientEncryptedKey})],RecipientEncryptedKeys);class OriginatorPublicKey{constructor(e={}){this.algorithm=new AlgorithmIdentifier$1;this.publicKey=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],OriginatorPublicKey.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],OriginatorPublicKey.prototype,"publicKey",void 0);let OriginatorIdentifierOrKey=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:OriginatorPublicKey,context:1,implicit:true,optional:true})],OriginatorIdentifierOrKey.prototype,"originatorKey",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber,optional:true})],OriginatorIdentifierOrKey.prototype,"issuerAndSerialNumber",void 0);OriginatorIdentifierOrKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],OriginatorIdentifierOrKey);class KeyAgreeRecipientInfo{constructor(e={}){this.version=CMSVersion.v3;this.originator=new OriginatorIdentifierOrKey;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.recipientEncryptedKeys=new RecipientEncryptedKeys;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyAgreeRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorIdentifierOrKey,context:0})],KeyAgreeRecipientInfo.prototype,"originator",void 0);__decorate([AsnProp({type:OctetString,context:1,optional:true})],KeyAgreeRecipientInfo.prototype,"ukm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyAgreeRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:RecipientEncryptedKeys})],KeyAgreeRecipientInfo.prototype,"recipientEncryptedKeys",void 0);let RecipientIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],RecipientIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],RecipientIdentifier.prototype,"issuerAndSerialNumber",void 0);RecipientIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientIdentifier);class KeyTransRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.rid=new RecipientIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KeyTransRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:RecipientIdentifier})],KeyTransRecipientInfo.prototype,"rid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KeyTransRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KeyTransRecipientInfo.prototype,"encryptedKey",void 0);class KEKIdentifier{constructor(e={}){this.keyIdentifier=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:OctetString})],KEKIdentifier.prototype,"keyIdentifier",void 0);__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime,optional:true})],KEKIdentifier.prototype,"date",void 0);__decorate([AsnProp({type:OtherKeyAttribute,optional:true})],KEKIdentifier.prototype,"other",void 0);class KEKRecipientInfo{constructor(e={}){this.version=CMSVersion.v4;this.kekid=new KEKIdentifier;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],KEKRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KEKIdentifier})],KEKRecipientInfo.prototype,"kekid",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],KEKRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],KEKRecipientInfo.prototype,"encryptedKey",void 0);class PasswordRecipientInfo{constructor(e={}){this.version=CMSVersion.v0;this.keyEncryptionAlgorithm=new KeyEncryptionAlgorithmIdentifier;this.encryptedKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PasswordRecipientInfo.prototype,"version",void 0);__decorate([AsnProp({type:KeyDerivationAlgorithmIdentifier,context:0,optional:true})],PasswordRecipientInfo.prototype,"keyDerivationAlgorithm",void 0);__decorate([AsnProp({type:KeyEncryptionAlgorithmIdentifier})],PasswordRecipientInfo.prototype,"keyEncryptionAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],PasswordRecipientInfo.prototype,"encryptedKey",void 0);class OtherRecipientInfo{constructor(e={}){this.oriType="";this.oriValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRecipientInfo.prototype,"oriType",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRecipientInfo.prototype,"oriValue",void 0);let RecipientInfo=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:KeyTransRecipientInfo,optional:true})],RecipientInfo.prototype,"ktri",void 0);__decorate([AsnProp({type:KeyAgreeRecipientInfo,context:1,implicit:true,optional:true})],RecipientInfo.prototype,"kari",void 0);__decorate([AsnProp({type:KEKRecipientInfo,context:2,implicit:true,optional:true})],RecipientInfo.prototype,"kekri",void 0);__decorate([AsnProp({type:PasswordRecipientInfo,context:3,implicit:true,optional:true})],RecipientInfo.prototype,"pwri",void 0);__decorate([AsnProp({type:OtherRecipientInfo,context:4,implicit:true,optional:true})],RecipientInfo.prototype,"ori",void 0);RecipientInfo=__decorate([AsnType({type:AsnTypeTypes.Choice})],RecipientInfo);var RecipientInfos_1;let RecipientInfos=RecipientInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RecipientInfos_1.prototype)}};RecipientInfos=RecipientInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RecipientInfo})],RecipientInfos);var RevocationInfoChoices_1;class OtherRevocationInfoFormat{constructor(e={}){this.otherRevInfoFormat="";this.otherRevInfo=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],OtherRevocationInfoFormat.prototype,"otherRevInfoFormat",void 0);__decorate([AsnProp({type:AsnPropTypes.Any})],OtherRevocationInfoFormat.prototype,"otherRevInfo",void 0);let RevocationInfoChoice=class e{constructor(e={}){this.other=new OtherRevocationInfoFormat;Object.assign(this,e)}};__decorate([AsnProp({type:OtherRevocationInfoFormat,context:1,implicit:true})],RevocationInfoChoice.prototype,"other",void 0);RevocationInfoChoice=__decorate([AsnType({type:AsnTypeTypes.Choice})],RevocationInfoChoice);let RevocationInfoChoices=RevocationInfoChoices_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,RevocationInfoChoices_1.prototype)}};RevocationInfoChoices=RevocationInfoChoices_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:RevocationInfoChoice})],RevocationInfoChoices);class OriginatorInfo{constructor(e={}){Object.assign(this,e)}}__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],OriginatorInfo.prototype,"certs",void 0);__decorate([AsnProp({type:RevocationInfoChoices,context:1,implicit:true,optional:true})],OriginatorInfo.prototype,"crls",void 0);var UnprotectedAttributes_1;let UnprotectedAttributes=UnprotectedAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,UnprotectedAttributes_1.prototype)}};UnprotectedAttributes=UnprotectedAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],UnprotectedAttributes);class EnvelopedData{constructor(e={}){this.version=CMSVersion.v0;this.recipientInfos=new RecipientInfos;this.encryptedContentInfo=new EncryptedContentInfo;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],EnvelopedData.prototype,"version",void 0);__decorate([AsnProp({type:OriginatorInfo,context:0,implicit:true,optional:true})],EnvelopedData.prototype,"originatorInfo",void 0);__decorate([AsnProp({type:RecipientInfos})],EnvelopedData.prototype,"recipientInfos",void 0);__decorate([AsnProp({type:EncryptedContentInfo})],EnvelopedData.prototype,"encryptedContentInfo",void 0);__decorate([AsnProp({type:UnprotectedAttributes,context:1,implicit:true,optional:true})],EnvelopedData.prototype,"unprotectedAttrs",void 0);const id_data="1.2.840.113549.1.7.1";const id_signedData="1.2.840.113549.1.7.2";let SignerIdentifier=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:SubjectKeyIdentifier,context:0,implicit:true})],SignerIdentifier.prototype,"subjectKeyIdentifier",void 0);__decorate([AsnProp({type:IssuerAndSerialNumber})],SignerIdentifier.prototype,"issuerAndSerialNumber",void 0);SignerIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],SignerIdentifier);var SignerInfos_1;class SignerInfo{constructor(e={}){this.version=CMSVersion.v0;this.sid=new SignerIdentifier;this.digestAlgorithm=new DigestAlgorithmIdentifier;this.signatureAlgorithm=new SignatureAlgorithmIdentifier;this.signature=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignerInfo.prototype,"version",void 0);__decorate([AsnProp({type:SignerIdentifier})],SignerInfo.prototype,"sid",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifier})],SignerInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:0,implicit:true,optional:true})],SignerInfo.prototype,"signedAttrs",void 0);__decorate([AsnProp({type:SignatureAlgorithmIdentifier})],SignerInfo.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],SignerInfo.prototype,"signature",void 0);__decorate([AsnProp({type:Attribute$1,repeated:"set",context:1,implicit:true,optional:true})],SignerInfo.prototype,"unsignedAttrs",void 0);let SignerInfos=SignerInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SignerInfos_1.prototype)}};SignerInfos=SignerInfos_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:SignerInfo})],SignerInfos);var DigestAlgorithmIdentifiers_1;let DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,DigestAlgorithmIdentifiers_1.prototype)}};DigestAlgorithmIdentifiers=DigestAlgorithmIdentifiers_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:DigestAlgorithmIdentifier})],DigestAlgorithmIdentifiers);class SignedData{constructor(e={}){this.version=CMSVersion.v0;this.digestAlgorithms=new DigestAlgorithmIdentifiers;this.encapContentInfo=new EncapsulatedContentInfo;this.signerInfos=new SignerInfos;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],SignedData.prototype,"version",void 0);__decorate([AsnProp({type:DigestAlgorithmIdentifiers})],SignedData.prototype,"digestAlgorithms",void 0);__decorate([AsnProp({type:EncapsulatedContentInfo})],SignedData.prototype,"encapContentInfo",void 0);__decorate([AsnProp({type:CertificateSet,context:0,implicit:true,optional:true})],SignedData.prototype,"certificates",void 0);__decorate([AsnProp({type:RevocationInfoChoice,context:1,implicit:true,optional:true})],SignedData.prototype,"crls",void 0);__decorate([AsnProp({type:SignerInfos})],SignedData.prototype,"signerInfos",void 0);const id_ecPublicKey="1.2.840.10045.2.1";const id_ecdsaWithSHA1="1.2.840.10045.4.1";const id_ecdsaWithSHA224="1.2.840.10045.4.3.1";const id_ecdsaWithSHA256="1.2.840.10045.4.3.2";const id_ecdsaWithSHA384="1.2.840.10045.4.3.3";const id_ecdsaWithSHA512="1.2.840.10045.4.3.4";const id_secp256r1="1.2.840.10045.3.1.7";const id_secp384r1="1.3.132.0.34";const id_secp521r1="1.3.132.0.35";function create$5(e){return new AlgorithmIdentifier$1({algorithm:e})}const ecdsaWithSHA1=create$5(id_ecdsaWithSHA1);create$5(id_ecdsaWithSHA224);const ecdsaWithSHA256=create$5(id_ecdsaWithSHA256);const ecdsaWithSHA384=create$5(id_ecdsaWithSHA384);const ecdsaWithSHA512=create$5(id_ecdsaWithSHA512);let ECParameters=class e{constructor(e={}){Object.assign(this,e)}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ECParameters.prototype,"namedCurve",void 0);ECParameters=__decorate([AsnType({type:AsnTypeTypes.Choice})],ECParameters);class ECPrivateKey{constructor(e={}){this.version=1;this.privateKey=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],ECPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:OctetString})],ECPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({type:ECParameters,context:0,optional:true})],ECPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString,context:1,optional:true})],ECPrivateKey.prototype,"publicKey",void 0);class ECDSASigValue{constructor(e={}){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],ECDSASigValue.prototype,"s",void 0);const id_pkcs_1="1.2.840.113549.1.1";const id_rsaEncryption=`${id_pkcs_1}.1`;const id_RSAES_OAEP=`${id_pkcs_1}.7`;const id_pSpecified=`${id_pkcs_1}.9`;const id_RSASSA_PSS=`${id_pkcs_1}.10`;const id_md2WithRSAEncryption=`${id_pkcs_1}.2`;const id_md5WithRSAEncryption=`${id_pkcs_1}.4`;const id_sha1WithRSAEncryption=`${id_pkcs_1}.5`;const id_sha224WithRSAEncryption=`${id_pkcs_1}.14`;const id_sha256WithRSAEncryption=`${id_pkcs_1}.11`;const id_sha384WithRSAEncryption=`${id_pkcs_1}.12`;const id_sha512WithRSAEncryption=`${id_pkcs_1}.13`;const id_sha512_224WithRSAEncryption=`${id_pkcs_1}.15`;const id_sha512_256WithRSAEncryption=`${id_pkcs_1}.16`;const id_sha1="1.3.14.3.2.26";const id_sha224="2.16.840.1.101.3.4.2.4";const id_sha256="2.16.840.1.101.3.4.2.1";const id_sha384="2.16.840.1.101.3.4.2.2";const id_sha512="2.16.840.1.101.3.4.2.3";const id_sha512_224="2.16.840.1.101.3.4.2.5";const id_sha512_256="2.16.840.1.101.3.4.2.6";const id_md2="1.2.840.113549.2.2";const id_md5="1.2.840.113549.2.5";const id_mgf1=`${id_pkcs_1}.8`;function create$4(e){return new AlgorithmIdentifier$1({algorithm:e,parameters:null})}create$4(id_md2);create$4(id_md5);const sha1=create$4(id_sha1);create$4(id_sha224);create$4(id_sha256);create$4(id_sha384);create$4(id_sha512);create$4(id_sha512_224);create$4(id_sha512_256);const mgf1SHA1=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});const pSpecifiedEmpty=new AlgorithmIdentifier$1({algorithm:id_pSpecified,parameters:AsnConvert.serialize(AsnOctetStringConverter.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});create$4(id_rsaEncryption);create$4(id_md2WithRSAEncryption);create$4(id_md5WithRSAEncryption);create$4(id_sha1WithRSAEncryption);create$4(id_sha512_224WithRSAEncryption);create$4(id_sha512_256WithRSAEncryption);create$4(id_sha384WithRSAEncryption);create$4(id_sha512WithRSAEncryption);create$4(id_sha512_224WithRSAEncryption);create$4(id_sha512_256WithRSAEncryption);class RsaEsOaepParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.pSourceAlgorithm=new AlgorithmIdentifier$1(pSpecifiedEmpty);Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaEsOaepParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaEsOaepParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:2,defaultValue:pSpecifiedEmpty})],RsaEsOaepParams.prototype,"pSourceAlgorithm",void 0);new AlgorithmIdentifier$1({algorithm:id_RSAES_OAEP,parameters:AsnConvert.serialize(new RsaEsOaepParams)});class RsaSaPssParams{constructor(e={}){this.hashAlgorithm=new AlgorithmIdentifier$1(sha1);this.maskGenAlgorithm=new AlgorithmIdentifier$1({algorithm:id_mgf1,parameters:AsnConvert.serialize(sha1)});this.saltLength=20;this.trailerField=1;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1,context:0,defaultValue:sha1})],RsaSaPssParams.prototype,"hashAlgorithm",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1,context:1,defaultValue:mgf1SHA1})],RsaSaPssParams.prototype,"maskGenAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:2,defaultValue:20})],RsaSaPssParams.prototype,"saltLength",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,context:3,defaultValue:1})],RsaSaPssParams.prototype,"trailerField",void 0);new AlgorithmIdentifier$1({algorithm:id_RSASSA_PSS,parameters:AsnConvert.serialize(new RsaSaPssParams)});class DigestInfo{constructor(e={}){this.digestAlgorithm=new AlgorithmIdentifier$1;this.digest=new OctetString;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],DigestInfo.prototype,"digestAlgorithm",void 0);__decorate([AsnProp({type:OctetString})],DigestInfo.prototype,"digest",void 0);var OtherPrimeInfos_1;class OtherPrimeInfo{constructor(e={}){this.prime=new ArrayBuffer(0);this.exponent=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"prime",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"exponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],OtherPrimeInfo.prototype,"coefficient",void 0);let OtherPrimeInfos=OtherPrimeInfos_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,OtherPrimeInfos_1.prototype)}};OtherPrimeInfos=OtherPrimeInfos_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:OtherPrimeInfo})],OtherPrimeInfos);class RSAPrivateKey{constructor(e={}){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],RSAPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:OtherPrimeInfos,optional:true})],RSAPrivateKey.prototype,"otherPrimeInfos",void 0);class RSAPublicKey{constructor(e={}){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter$1})],RSAPublicKey.prototype,"publicExponent",void 0);var Lifecycle;(function(e){e[e["Transient"]=0]="Transient";e[e["Singleton"]=1]="Singleton";e[e["ResolutionScoped"]=2]="ResolutionScoped";e[e["ContainerScoped"]=3]="ContainerScoped"})(Lifecycle||(Lifecycle={}));const Lifecycle$1=Lifecycle;const INJECTION_TOKEN_METADATA_KEY="injectionTokens";function getParamInfo(e){const t=Reflect.getMetadata("design:paramtypes",e)||[];const r=Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY,e)||{};Object.keys(r).forEach((e=>{t[+e]=r[e]}));return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(e,t,r,i){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function a(e){try{f(i.next(e))}catch(e){s(e)}}function o(e){try{f(i["throw"](e))}catch(e){s(e)}}function f(e){e.done?r(e.value):n(e.value).then(a,o)}f((i=i.apply(e,t||[])).next())}))}function isClassProvider(e){return!!e.useClass}function isFactoryProvider(e){return!!e.useFactory}class DelayedConstructor{constructor(e){this.wrap=e;this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){const t={};let r=false;let i;const n=()=>{if(!r){i=e(this.wrap());r=true}return i};return new Proxy(t,this.createHandler(n))}createHandler(e){const t={};const r=r=>{t[r]=(...t)=>{t[0]=e();const i=Reflect[r];return i(...t)}};this.reflectMethods.forEach(r);return t}}function isNormalToken(e){return typeof e==="string"||typeof e==="symbol"}function isTokenDescriptor(e){return typeof e==="object"&&"token"in e&&"multiple"in e}function isTransformDescriptor(e){return typeof e==="object"&&"token"in e&&"transform"in e}function isConstructorToken(e){return typeof e==="function"||e instanceof DelayedConstructor}function isTokenProvider(e){return!!e.useToken}function isValueProvider(e){return e.useValue!=undefined}function isProvider(e){return isClassProvider(e)||isValueProvider(e)||isTokenProvider(e)||isFactoryProvider(e)}class RegistryBase{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){this.ensure(e);return this._registryMap.get(e)}get(e){this.ensure(e);const t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e);this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){this.ensure(e);return this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){if(!this._registryMap.has(e)){this._registryMap.set(e,[])}}}class Registry extends RegistryBase{}class ResolutionContext{constructor(){this.scopedResolutions=new Map}}function formatDependency(e,t){if(e===null){return`at position #${t}`}const r=e.split(",")[t].trim();return`"${r}" at position #${t}`}function composeErrorMessage(e,t,r="    "){return[e,...t.message.split("\n").map((e=>r+e))].join("\n")}function formatErrorCtor(e,t,r){const[,i=null]=e.toString().match(/constructor\(([\w, ]+)\)/)||[];const n=formatDependency(i,t);return composeErrorMessage(`Cannot inject the dependency ${n} of "${e.name}" constructor. Reason:`,r)}function isDisposable(e){if(typeof e.dispose!=="function")return false;const t=e.dispose;if(t.length>0){return false}return true}class PreResolutionInterceptors extends RegistryBase{}class PostResolutionInterceptors extends RegistryBase{}class Interceptors{constructor(){this.preResolution=new PreResolutionInterceptors;this.postResolution=new PostResolutionInterceptors}}const typeInfo=new Map;class InternalDependencyContainer{constructor(e){this.parent=e;this._registry=new Registry;this.interceptors=new Interceptors;this.disposed=false;this.disposables=new Set}register(e,t,r={lifecycle:Lifecycle$1.Transient}){this.ensureNotDisposed();let i;if(!isProvider(t)){i={useClass:t}}else{i=t}if(isTokenProvider(i)){const t=[e];let r=i;while(r!=null){const e=r.useToken;if(t.includes(e)){throw new Error(`Token registration cycle detected! ${[...t,e].join(" -> ")}`)}t.push(e);const i=this._registry.get(e);if(i&&isTokenProvider(i.provider)){r=i.provider}else{r=null}}}if(r.lifecycle===Lifecycle$1.Singleton||r.lifecycle==Lifecycle$1.ContainerScoped||r.lifecycle==Lifecycle$1.ResolutionScoped){if(isValueProvider(i)||isFactoryProvider(i)){throw new Error(`Cannot use lifecycle "${Lifecycle$1[r.lifecycle]}" with ValueProviders or FactoryProviders`)}}this._registry.set(e,{provider:i,options:r});return this}registerType(e,t){this.ensureNotDisposed();if(isNormalToken(t)){return this.register(e,{useToken:t})}return this.register(e,{useClass:t})}registerInstance(e,t){this.ensureNotDisposed();return this.register(e,{useValue:t})}registerSingleton(e,t){this.ensureNotDisposed();if(isNormalToken(e)){if(isNormalToken(t)){return this.register(e,{useToken:t},{lifecycle:Lifecycle$1.Singleton})}else if(t){return this.register(e,{useClass:t},{lifecycle:Lifecycle$1.Singleton})}throw new Error('Cannot register a type name as a singleton without a "to" token')}let r=e;if(t&&!isNormalToken(t)){r=t}return this.register(e,{useClass:r},{lifecycle:Lifecycle$1.Singleton})}resolve(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getRegistration(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"Single");if(r){const i=this.resolveRegistration(r,t);this.executePostResolutionInterceptor(e,i,"Single");return i}if(isConstructorToken(e)){const r=this.construct(e,t);this.executePostResolutionInterceptor(e,r,"Single");return r}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){const r=[];for(const i of this.interceptors.preResolution.getAll(e)){if(i.options.frequency!="Once"){r.push(i)}i.callback(e,t)}this.interceptors.preResolution.setAll(e,r)}}executePostResolutionInterceptor(e,t,r){if(this.interceptors.postResolution.has(e)){const i=[];for(const n of this.interceptors.postResolution.getAll(e)){if(n.options.frequency!="Once"){i.push(n)}n.callback(e,t,r)}this.interceptors.postResolution.setAll(e,i)}}resolveRegistration(e,t){this.ensureNotDisposed();if(e.options.lifecycle===Lifecycle$1.ResolutionScoped&&t.scopedResolutions.has(e)){return t.scopedResolutions.get(e)}const r=e.options.lifecycle===Lifecycle$1.Singleton;const i=e.options.lifecycle===Lifecycle$1.ContainerScoped;const n=r||i;let s;if(isValueProvider(e.provider)){s=e.provider.useValue}else if(isTokenProvider(e.provider)){s=n?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t)}else if(isClassProvider(e.provider)){s=n?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t)}else if(isFactoryProvider(e.provider)){s=e.provider.useFactory(this)}else{s=this.construct(e.provider,t)}if(e.options.lifecycle===Lifecycle$1.ResolutionScoped){t.scopedResolutions.set(e,s)}return s}resolveAll(e,t=new ResolutionContext){this.ensureNotDisposed();const r=this.getAllRegistrations(e);if(!r&&isNormalToken(e)){throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}this.executePreResolutionInterceptor(e,"All");if(r){const i=r.map((e=>this.resolveRegistration(e,t)));this.executePostResolutionInterceptor(e,i,"All");return i}const i=[this.construct(e,t)];this.executePostResolutionInterceptor(e,i,"All");return i}isRegistered(e,t=false){this.ensureNotDisposed();return this._registry.has(e)||t&&(this.parent||false)&&this.parent.isRegistered(e,true)}reset(){this.ensureNotDisposed();this._registry.clear();this.interceptors.preResolution.clear();this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(const[e,t]of this._registry.entries()){this._registry.setAll(e,t.filter((e=>!isValueProvider(e.provider))).map((e=>{e.instance=undefined;return e})))}}createChildContainer(){this.ensureNotDisposed();const e=new InternalDependencyContainer(this);for(const[t,r]of this._registry.entries()){if(r.some((({options:e})=>e.lifecycle===Lifecycle$1.ContainerScoped))){e._registry.setAll(t,r.map((e=>{if(e.options.lifecycle===Lifecycle$1.ContainerScoped){return{provider:e.provider,options:e.options}}return e})))}}return e}beforeResolution(e,t,r={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:r})}afterResolution(e,t,r={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:r})}dispose(){return __awaiter(this,void 0,void 0,(function*(){this.disposed=true;const e=[];this.disposables.forEach((t=>{const r=t.dispose();if(r){e.push(r)}}));yield Promise.all(e)}))}getRegistration(e){if(this.isRegistered(e)){return this._registry.get(e)}if(this.parent){return this.parent.getRegistration(e)}return null}getAllRegistrations(e){if(this.isRegistered(e)){return this._registry.getAll(e)}if(this.parent){return this.parent.getAllRegistrations(e)}return null}construct(e,t){if(e instanceof DelayedConstructor){return e.createProxy((e=>this.resolve(e,t)))}const r=(()=>{const r=typeInfo.get(e);if(!r||r.length===0){if(e.length===0){return new e}else{throw new Error(`TypeInfo not known for "${e.name}"`)}}const i=r.map(this.resolveParams(t,e));return new e(...i)})();if(isDisposable(r)){this.disposables.add(r)}return r}resolveParams(e,t){return(r,i)=>{try{if(isTokenDescriptor(r)){if(isTransformDescriptor(r)){return r.multiple?this.resolve(r.transform).transform(this.resolveAll(r.token),...r.transformArgs):this.resolve(r.transform).transform(this.resolve(r.token,e),...r.transformArgs)}else{return r.multiple?this.resolveAll(r.token):this.resolve(r.token,e)}}else if(isTransformDescriptor(r)){return this.resolve(r.transform,e).transform(this.resolve(r.token,e),...r.transformArgs)}return this.resolve(r,e)}catch(e){throw new Error(formatErrorCtor(t,i,e))}}}ensureNotDisposed(){if(this.disposed){throw new Error("This container has been disposed, you cannot interact with a disposed container")}}}const instance=new InternalDependencyContainer;function injectable(){return function(e){typeInfo.set(e,getParamInfo(e))}}if(typeof Reflect==="undefined"||!Reflect.getMetadata){throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`)}var PKCS12AttrSet_1;class PKCS12Attribute{constructor(e={}){this.attrId="";this.attrValues=[];Object.assign(e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],PKCS12Attribute.prototype,"attrId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,repeated:"set"})],PKCS12Attribute.prototype,"attrValues",void 0);let PKCS12AttrSet=PKCS12AttrSet_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,PKCS12AttrSet_1.prototype)}};PKCS12AttrSet=PKCS12AttrSet_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:PKCS12Attribute})],PKCS12AttrSet);var AuthenticatedSafe_1;let AuthenticatedSafe=AuthenticatedSafe_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,AuthenticatedSafe_1.prototype)}};AuthenticatedSafe=AuthenticatedSafe_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:ContentInfo})],AuthenticatedSafe);class CertBag{constructor(e={}){this.certId="";this.certValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CertBag.prototype,"certId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CertBag.prototype,"certValue",void 0);class CRLBag{constructor(e={}){this.crlId="";this.crltValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],CRLBag.prototype,"crlId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],CRLBag.prototype,"crltValue",void 0);class EncryptedData extends OctetString{}class EncryptedPrivateKeyInfo$1{constructor(e={}){this.encryptionAlgorithm=new AlgorithmIdentifier$1;this.encryptedData=new EncryptedData;Object.assign(this,e)}}__decorate([AsnProp({type:AlgorithmIdentifier$1})],EncryptedPrivateKeyInfo$1.prototype,"encryptionAlgorithm",void 0);__decorate([AsnProp({type:EncryptedData})],EncryptedPrivateKeyInfo$1.prototype,"encryptedData",void 0);var Attributes_1$1;var Version;(function(e){e[e["v1"]=0]="v1"})(Version||(Version={}));class PrivateKey extends OctetString{}let Attributes$1=Attributes_1$1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1$1.prototype)}};Attributes$1=Attributes_1$1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes$1);class PrivateKeyInfo$1{constructor(e={}){this.version=Version.v1;this.privateKeyAlgorithm=new AlgorithmIdentifier$1;this.privateKey=new PrivateKey;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo$1.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],PrivateKeyInfo$1.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:PrivateKey})],PrivateKeyInfo$1.prototype,"privateKey",void 0);__decorate([AsnProp({type:Attributes$1,implicit:true,context:0,optional:true})],PrivateKeyInfo$1.prototype,"attributes",void 0);let KeyBag=class e extends PrivateKeyInfo$1{};KeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],KeyBag);let PKCS8ShroudedKeyBag=class e extends EncryptedPrivateKeyInfo$1{};PKCS8ShroudedKeyBag=__decorate([AsnType({type:AsnTypeTypes.Sequence})],PKCS8ShroudedKeyBag);class SecretBag{constructor(e={}){this.secretTypeId="";this.secretValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SecretBag.prototype,"secretTypeId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SecretBag.prototype,"secretValue",void 0);class MacData{constructor(e={}){this.mac=new DigestInfo;this.macSalt=new OctetString;this.iterations=1;Object.assign(this,e)}}__decorate([AsnProp({type:DigestInfo})],MacData.prototype,"mac",void 0);__decorate([AsnProp({type:OctetString})],MacData.prototype,"macSalt",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,defaultValue:1})],MacData.prototype,"iterations",void 0);class PFX{constructor(e={}){this.version=3;this.authSafe=new ContentInfo;this.macData=new MacData;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PFX.prototype,"version",void 0);__decorate([AsnProp({type:ContentInfo})],PFX.prototype,"authSafe",void 0);__decorate([AsnProp({type:MacData,optional:true})],PFX.prototype,"macData",void 0);var SafeContents_1;class SafeBag{constructor(e={}){this.bagId="";this.bagValue=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],SafeBag.prototype,"bagId",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,context:0})],SafeBag.prototype,"bagValue",void 0);__decorate([AsnProp({type:PKCS12Attribute,repeated:"set",optional:true})],SafeBag.prototype,"bagAttributes",void 0);let SafeContents=SafeContents_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SafeContents_1.prototype)}};SafeContents=SafeContents_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SafeBag})],SafeContents);var ExtensionRequest_1,ExtendedCertificateAttributes_1,SMIMECapabilities_1;const id_pkcs9="1.2.840.113549.1.9";const id_pkcs9_at_challengePassword=`${id_pkcs9}.7`;const id_pkcs9_at_extensionRequest=`${id_pkcs9}.14`;let PKCS9String=class e extends DirectoryString{constructor(e={}){super(e)}toString(){const e={};e.toString();return this.ia5String||super.toString()}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],PKCS9String.prototype,"ia5String",void 0);PKCS9String=__decorate([AsnType({type:AsnTypeTypes.Choice})],PKCS9String);let Pkcs7PDU=class e extends ContentInfo{};Pkcs7PDU=__decorate([AsnType({type:AsnTypeTypes.Sequence})],Pkcs7PDU);let UserPKCS12=class e extends PFX{};UserPKCS12=__decorate([AsnType({type:AsnTypeTypes.Sequence})],UserPKCS12);let EncryptedPrivateKeyInfo=class e extends EncryptedPrivateKeyInfo$1{};EncryptedPrivateKeyInfo=__decorate([AsnType({type:AsnTypeTypes.Sequence})],EncryptedPrivateKeyInfo);let EmailAddress=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.IA5String})],EmailAddress.prototype,"value",void 0);EmailAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],EmailAddress);let UnstructuredName=class e extends PKCS9String{};UnstructuredName=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredName);let UnstructuredAddress=class e extends DirectoryString{};UnstructuredAddress=__decorate([AsnType({type:AsnTypeTypes.Choice})],UnstructuredAddress);let DateOfBirth=class e{constructor(e=new Date){this.value=e}};__decorate([AsnProp({type:AsnPropTypes.GeneralizedTime})],DateOfBirth.prototype,"value",void 0);DateOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],DateOfBirth);let PlaceOfBirth=class e extends DirectoryString{};PlaceOfBirth=__decorate([AsnType({type:AsnTypeTypes.Choice})],PlaceOfBirth);let Gender=class e{constructor(e="M"){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],Gender.prototype,"value",void 0);Gender=__decorate([AsnType({type:AsnTypeTypes.Choice})],Gender);let CountryOfCitizenship=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.PrintableString})],CountryOfCitizenship.prototype,"value",void 0);CountryOfCitizenship=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfCitizenship);let CountryOfResidence=class e extends CountryOfCitizenship{};CountryOfResidence=__decorate([AsnType({type:AsnTypeTypes.Choice})],CountryOfResidence);let Pseudonym=class e extends DirectoryString{};Pseudonym=__decorate([AsnType({type:AsnTypeTypes.Choice})],Pseudonym);let ContentType=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ContentType.prototype,"value",void 0);ContentType=__decorate([AsnType({type:AsnTypeTypes.Choice})],ContentType);let SigningTime=class e extends Time{};SigningTime=__decorate([AsnType({type:AsnTypeTypes.Choice})],SigningTime);let SequenceNumber=class e{constructor(e=0){this.value=e}toString(){return this.value.toString()}};__decorate([AsnProp({type:AsnPropTypes.Integer})],SequenceNumber.prototype,"value",void 0);SequenceNumber=__decorate([AsnType({type:AsnTypeTypes.Choice})],SequenceNumber);let CounterSignature=class e extends SignerInfo{};CounterSignature=__decorate([AsnType({type:AsnTypeTypes.Sequence})],CounterSignature);let ChallengePassword=class e extends DirectoryString{};ChallengePassword=__decorate([AsnType({type:AsnTypeTypes.Choice})],ChallengePassword);let ExtensionRequest=ExtensionRequest_1=class e extends Extensions{constructor(e){super(e);Object.setPrototypeOf(this,ExtensionRequest_1.prototype)}};ExtensionRequest=ExtensionRequest_1=__decorate([AsnType({type:AsnTypeTypes.Sequence})],ExtensionRequest);let ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,ExtendedCertificateAttributes_1.prototype)}};ExtendedCertificateAttributes=ExtendedCertificateAttributes_1=__decorate([AsnType({type:AsnTypeTypes.Set,itemType:Attribute$1})],ExtendedCertificateAttributes);let FriendlyName=class e{constructor(e=""){this.value=e}toString(){return this.value}};__decorate([AsnProp({type:AsnPropTypes.BmpString})],FriendlyName.prototype,"value",void 0);FriendlyName=__decorate([AsnType({type:AsnTypeTypes.Choice})],FriendlyName);let SMIMECapability=class e extends AlgorithmIdentifier$1{};SMIMECapability=__decorate([AsnType({type:AsnTypeTypes.Sequence})],SMIMECapability);let SMIMECapabilities=SMIMECapabilities_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,SMIMECapabilities_1.prototype)}};SMIMECapabilities=SMIMECapabilities_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:SMIMECapability})],SMIMECapabilities);var Attributes_1;let Attributes=Attributes_1=class e extends AsnArray{constructor(e){super(e);Object.setPrototypeOf(this,Attributes_1.prototype)}};Attributes=Attributes_1=__decorate([AsnType({type:AsnTypeTypes.Sequence,itemType:Attribute$2})],Attributes);class CertificationRequestInfo{constructor(e={}){this.version=0;this.subject=new Name$1;this.subjectPKInfo=new SubjectPublicKeyInfo;this.attributes=new Attributes;Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],CertificationRequestInfo.prototype,"version",void 0);__decorate([AsnProp({type:Name$1})],CertificationRequestInfo.prototype,"subject",void 0);__decorate([AsnProp({type:SubjectPublicKeyInfo})],CertificationRequestInfo.prototype,"subjectPKInfo",void 0);__decorate([AsnProp({type:Attributes,implicit:true,context:0})],CertificationRequestInfo.prototype,"attributes",void 0);class CertificationRequest{constructor(e={}){this.certificationRequestInfo=new CertificationRequestInfo;this.signatureAlgorithm=new AlgorithmIdentifier$1;this.signature=new ArrayBuffer(0);Object.assign(this,e)}}__decorate([AsnProp({type:CertificationRequestInfo})],CertificationRequest.prototype,"certificationRequestInfo",void 0);__decorate([AsnProp({type:AlgorithmIdentifier$1})],CertificationRequest.prototype,"signatureAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],CertificationRequest.prototype,"signature",void 0);
/*!
 * MIT License
 * 
 * Copyright (c) Peculiar Ventures. All rights reserved.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const diAlgorithm="crypto.algorithm";class AlgorithmProvider{getAlgorithms(){return instance.resolveAll(diAlgorithm)}toAsnAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toAsnAlgorithm(e);if(r){return r}}if(/[0-9.]+/.test(e.name)){const t=new AlgorithmIdentifier$1({algorithm:e.name});if("parameters"in e){const r=e;t.parameters=r.parameters}return t}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const t of this.getAlgorithms()){const r=t.toWebAlgorithm(e);if(r){return r}}const t={name:e.algorithm,parameters:e.parameters};return t}}const diAlgorithmProvider="crypto.algorithmProvider";instance.registerSingleton(diAlgorithmProvider,AlgorithmProvider);var EcAlgorithm_1;const idVersionOne$1="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1$1=`${idVersionOne$1}.1`;const idBrainpoolP160t1$1=`${idVersionOne$1}.2`;const idBrainpoolP192r1$1=`${idVersionOne$1}.3`;const idBrainpoolP192t1$1=`${idVersionOne$1}.4`;const idBrainpoolP224r1$1=`${idVersionOne$1}.5`;const idBrainpoolP224t1$1=`${idVersionOne$1}.6`;const idBrainpoolP256r1$1=`${idVersionOne$1}.7`;const idBrainpoolP256t1$1=`${idVersionOne$1}.8`;const idBrainpoolP320r1$1=`${idVersionOne$1}.9`;const idBrainpoolP320t1$1=`${idVersionOne$1}.10`;const idBrainpoolP384r1$1=`${idVersionOne$1}.11`;const idBrainpoolP384t1$1=`${idVersionOne$1}.12`;const idBrainpoolP512r1$1=`${idVersionOne$1}.13`;const idBrainpoolP512t1$1=`${idVersionOne$1}.14`;const brainpoolP160r1="brainpoolP160r1";const brainpoolP160t1="brainpoolP160t1";const brainpoolP192r1="brainpoolP192r1";const brainpoolP192t1="brainpoolP192t1";const brainpoolP224r1="brainpoolP224r1";const brainpoolP224t1="brainpoolP224t1";const brainpoolP256r1="brainpoolP256r1";const brainpoolP256t1="brainpoolP256t1";const brainpoolP320r1="brainpoolP320r1";const brainpoolP320t1="brainpoolP320t1";const brainpoolP384r1="brainpoolP384r1";const brainpoolP384t1="brainpoolP384t1";const brainpoolP512r1="brainpoolP512r1";const brainpoolP512t1="brainpoolP512t1";const ECDSA="ECDSA";let EcAlgorithm=EcAlgorithm_1=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case ECDSA.toLowerCase():if("hash"in e){const t=typeof e.hash==="string"?e.hash:e.hash.name;switch(t.toLowerCase()){case"sha-1":return ecdsaWithSHA1;case"sha-256":return ecdsaWithSHA256;case"sha-384":return ecdsaWithSHA384;case"sha-512":return ecdsaWithSHA512}}else if("namedCurve"in e){let t="";switch(e.namedCurve){case"P-256":t=id_secp256r1;break;case"K-256":t=EcAlgorithm_1.SECP256K1;break;case"P-384":t=id_secp384r1;break;case"P-521":t=id_secp521r1;break;case brainpoolP160r1:t=idBrainpoolP160r1$1;break;case brainpoolP160t1:t=idBrainpoolP160t1$1;break;case brainpoolP192r1:t=idBrainpoolP192r1$1;break;case brainpoolP192t1:t=idBrainpoolP192t1$1;break;case brainpoolP224r1:t=idBrainpoolP224r1$1;break;case brainpoolP224t1:t=idBrainpoolP224t1$1;break;case brainpoolP256r1:t=idBrainpoolP256r1$1;break;case brainpoolP256t1:t=idBrainpoolP256t1$1;break;case brainpoolP320r1:t=idBrainpoolP320r1$1;break;case brainpoolP320t1:t=idBrainpoolP320t1$1;break;case brainpoolP384r1:t=idBrainpoolP384r1$1;break;case brainpoolP384t1:t=idBrainpoolP384t1$1;break;case brainpoolP512r1:t=idBrainpoolP512r1$1;break;case brainpoolP512t1:t=idBrainpoolP512t1$1;break}if(t){return new AlgorithmIdentifier$1({algorithm:id_ecPublicKey,parameters:AsnConvert.serialize(new ECParameters({namedCurve:t}))})}}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_ecdsaWithSHA1:return{name:ECDSA,hash:{name:"SHA-1"}};case id_ecdsaWithSHA256:return{name:ECDSA,hash:{name:"SHA-256"}};case id_ecdsaWithSHA384:return{name:ECDSA,hash:{name:"SHA-384"}};case id_ecdsaWithSHA512:return{name:ECDSA,hash:{name:"SHA-512"}};case id_ecPublicKey:{if(!e.parameters){throw new TypeError("Cannot get required parameters from EC algorithm")}const t=AsnConvert.parse(e.parameters,ECParameters);switch(t.namedCurve){case id_secp256r1:return{name:ECDSA,namedCurve:"P-256"};case EcAlgorithm_1.SECP256K1:return{name:ECDSA,namedCurve:"K-256"};case id_secp384r1:return{name:ECDSA,namedCurve:"P-384"};case id_secp521r1:return{name:ECDSA,namedCurve:"P-521"};case idBrainpoolP160r1$1:return{name:ECDSA,namedCurve:brainpoolP160r1};case idBrainpoolP160t1$1:return{name:ECDSA,namedCurve:brainpoolP160t1};case idBrainpoolP192r1$1:return{name:ECDSA,namedCurve:brainpoolP192r1};case idBrainpoolP192t1$1:return{name:ECDSA,namedCurve:brainpoolP192t1};case idBrainpoolP224r1$1:return{name:ECDSA,namedCurve:brainpoolP224r1};case idBrainpoolP224t1$1:return{name:ECDSA,namedCurve:brainpoolP224t1};case idBrainpoolP256r1$1:return{name:ECDSA,namedCurve:brainpoolP256r1};case idBrainpoolP256t1$1:return{name:ECDSA,namedCurve:brainpoolP256t1};case idBrainpoolP320r1$1:return{name:ECDSA,namedCurve:brainpoolP320r1};case idBrainpoolP320t1$1:return{name:ECDSA,namedCurve:brainpoolP320t1};case idBrainpoolP384r1$1:return{name:ECDSA,namedCurve:brainpoolP384r1};case idBrainpoolP384t1$1:return{name:ECDSA,namedCurve:brainpoolP384t1};case idBrainpoolP512r1$1:return{name:ECDSA,namedCurve:brainpoolP512r1};case idBrainpoolP512t1$1:return{name:ECDSA,namedCurve:brainpoolP512t1}}}}return null}};EcAlgorithm.SECP256K1="1.3.132.0.10";EcAlgorithm=EcAlgorithm_1=__decorate([injectable()],EcAlgorithm);instance.registerSingleton(diAlgorithm,EcAlgorithm);const NAME=Symbol("name");const VALUE=Symbol("value");class TextObject{constructor(e,t={},r=""){this[NAME]=e;this[VALUE]=r;for(const e in t){this[e]=t[e]}}}TextObject.NAME=NAME;TextObject.VALUE=VALUE;class DefaultAlgorithmSerializer{static toTextObject(e){const t=new TextObject("Algorithm Identifier",{},OidSerializer.toString(e.algorithm));if(e.parameters){switch(e.algorithm){case id_ecPublicKey:{const r=(new EcAlgorithm).toWebAlgorithm(e);if(r&&"namedCurve"in r){t["Named Curve"]=r.namedCurve}else{t["Parameters"]=e.parameters}break}default:t["Parameters"]=e.parameters}}return t}}class OidSerializer{static toString(e){const t=this.items[e];if(t){return t}return e}}OidSerializer.items={[id_sha1]:"sha1",[id_sha224]:"sha224",[id_sha256]:"sha256",[id_sha384]:"sha384",[id_sha512]:"sha512",[id_rsaEncryption]:"rsaEncryption",[id_sha1WithRSAEncryption]:"sha1WithRSAEncryption",[id_sha224WithRSAEncryption]:"sha224WithRSAEncryption",[id_sha256WithRSAEncryption]:"sha256WithRSAEncryption",[id_sha384WithRSAEncryption]:"sha384WithRSAEncryption",[id_sha512WithRSAEncryption]:"sha512WithRSAEncryption",[id_ecPublicKey]:"ecPublicKey",[id_ecdsaWithSHA1]:"ecdsaWithSHA1",[id_ecdsaWithSHA224]:"ecdsaWithSHA224",[id_ecdsaWithSHA256]:"ecdsaWithSHA256",[id_ecdsaWithSHA384]:"ecdsaWithSHA384",[id_ecdsaWithSHA512]:"ecdsaWithSHA512",[id_kp_serverAuth]:"TLS WWW server authentication",[id_kp_clientAuth]:"TLS WWW client authentication",[id_kp_codeSigning]:"Code Signing",[id_kp_emailProtection]:"E-mail Protection",[id_kp_timeStamping]:"Time Stamping",[id_kp_OCSPSigning]:"OCSP Signing",[id_signedData]:"Signed Data"};class TextConverter{static serialize(e){return this.serializeObj(e).join("\n")}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,t=0){const r=[];let i=this.pad(t++);let n="";const s=e[TextObject.VALUE];if(s){n=` ${s}`}r.push(`${i}${e[TextObject.NAME]}:${n}`);i=this.pad(t);for(const n in e){if(typeof n==="symbol"){continue}const s=e[n];const a=n?`${n}: `:"";if(typeof s==="string"||typeof s==="number"||typeof s==="boolean"){r.push(`${i}${a}${s}`)}else if(s instanceof Date){r.push(`${i}${a}${s.toUTCString()}`)}else if(Array.isArray(s)){for(const e of s){e[TextObject.NAME]=n;r.push(...this.serializeObj(e,t))}}else if(s instanceof TextObject){s[TextObject.NAME]=n;r.push(...this.serializeObj(s,t))}else if(build.BufferSourceConverter.isBufferSource(s)){if(n){r.push(`${i}${a}`);r.push(...this.serializeBufferSource(s,t+1))}else{r.push(...this.serializeBufferSource(s,t))}}else if("toTextObject"in s){const e=s.toTextObject();e[TextObject.NAME]=n;r.push(...this.serializeObj(e,t))}else{throw new TypeError("Cannot serialize data in text format. Unsupported type.")}}return r}static serializeBufferSource(e,t=0){const r=this.pad(t);const i=build.BufferSourceConverter.toUint8Array(e);const n=[];for(let e=0;e<i.length;){const t=[];for(let r=0;r<16&&e<i.length;r++){if(r===8){t.push("")}const n=i[e++].toString(16).padStart(2,"0");t.push(n)}n.push(`${r}${t.join(" ")}`)}return n}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}TextConverter.oidSerializer=OidSerializer;TextConverter.algorithmSerializer=DefaultAlgorithmSerializer;class AsnData{constructor(...e){if(e.length===1){const t=e[0];this.rawData=AsnConvert.serialize(t);this.onInit(t)}else{const t=AsnConvert.parse(e[0],e[1]);this.rawData=build.BufferSourceConverter.toArrayBuffer(e[0]);this.onInit(t)}}equal(e){if(e instanceof AsnData){return build.isEqual(e.rawData,this.rawData)}return false}toString(e="text"){switch(e){case"asn":return AsnConvert.toString(this.rawData);case"text":return TextConverter.serialize(this.toTextObject());case"hex":return build.Convert.ToHex(this.rawData);case"base64":return build.Convert.ToBase64(this.rawData);case"base64url":return build.Convert.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){const e=this.constructor;return e.NAME}toTextObject(){const e=this.toTextObjectEmpty();e[""]=this.rawData;return e}toTextObjectEmpty(e){return new TextObject(this.getTextName(),{},e)}}AsnData.NAME="ASN";class Extension extends AsnData{constructor(...e){let t;if(build.BufferSourceConverter.isBufferSource(e[0])){t=build.BufferSourceConverter.toArrayBuffer(e[0])}else{t=AsnConvert.serialize(new Extension$1({extnID:e[0],critical:e[1],extnValue:new OctetString(build.BufferSourceConverter.toArrayBuffer(e[2]))}))}super(t,Extension$1)}onInit(e){this.type=e.extnID;this.critical=e.critical;this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.value;return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":undefined);if(e[TextObject.NAME]===Extension.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}var _a;class CryptoProvider{constructor(){this.items=new Map;this[_a]="CryptoProvider";if(typeof self!=="undefined"&&typeof crypto!=="undefined"){this.set(CryptoProvider.DEFAULT,crypto)}}static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==undefined}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,t){return this.items.forEach(e,t)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=CryptoProvider.DEFAULT){const t=this.items.get(e.toLowerCase());if(!t){throw new Error(`Cannot get Crypto by name '${e}'`)}return t}set(e,t){if(typeof e==="string"){if(!t){throw new TypeError("Argument 'value' is required")}this.items.set(e.toLowerCase(),t)}else{this.items.set(CryptoProvider.DEFAULT,e)}return this}}_a=Symbol.toStringTag;CryptoProvider.DEFAULT="default";const cryptoProvider=new CryptoProvider;const OID_REGEX=/^[0-2](?:\.[1-9][0-9]*)+$/;function isOID(e){return new RegExp(OID_REGEX).test(e)}class NameIdentifier{constructor(e={}){this.items={};for(const t in e){this.register(t,e[t])}}get(e){return this.items[e]||null}findId(e){if(!isOID(e)){return this.get(e)}return e}register(e,t){this.items[e]=t;this.items[t]=e}}const names$3=new NameIdentifier;names$3.register("CN","2.5.4.3");names$3.register("L","2.5.4.7");names$3.register("ST","2.5.4.8");names$3.register("O","2.5.4.10");names$3.register("OU","2.5.4.11");names$3.register("C","2.5.4.6");names$3.register("DC","0.9.2342.19200300.100.1.25");names$3.register("E","1.2.840.113549.1.9.1");names$3.register("G","2.5.4.42");names$3.register("I","2.5.4.43");names$3.register("SN","2.5.4.4");names$3.register("T","2.5.4.12");function replaceUnknownCharacter(e,t){return`\\${build.Convert.ToHex(build.Convert.FromUtf8String(t)).toUpperCase()}`}function escape$1(e){return e.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,replaceUnknownCharacter)}class Name{constructor(e,t={}){this.extraNames=new NameIdentifier;this.asn=new Name$1;for(const e in t){if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];this.extraNames.register(e,r)}}if(typeof e==="string"){this.asn=this.fromString(e)}else if(e instanceof Name$1){this.asn=e}else if(build.BufferSourceConverter.isBufferSource(e)){this.asn=AsnConvert.parse(e,Name$1)}else{this.asn=this.fromJSON(e)}}static isASCII(e){for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r>255){return false}}return true}getField(e){const t=this.extraNames.findId(e)||names$3.findId(e);const r=[];for(const e of this.asn){for(const i of e){if(i.type===t){r.push(i.value.toString())}}}return r}getName(e){return this.extraNames.get(e)||names$3.get(e)}toString(){return this.asn.map((e=>e.map((e=>{const t=this.getName(e.type)||e.type;const r=e.value.anyValue?`#${build.Convert.ToHex(e.value.anyValue)}`:escape$1(e.value.toString());return`${t}=${r}`})).join("+"))).join(", ")}toJSON(){var e;const t=[];for(const r of this.asn){const i={};for(const t of r){const r=this.getName(t.type)||t.type;(e=i[r])!==null&&e!==void 0?e:i[r]=[];i[r].push(t.value.anyValue?`#${build.Convert.ToHex(t.value.anyValue)}`:t.value.toString())}t.push(i)}return t}fromString(e){const t=new Name$1;const r=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let i=null;let n=",";while(i=r.exec(`${e},`)){let[,e,r]=i;const s=r[r.length-1];if(s===","||s==="+"){r=r.slice(0,r.length-1);i[3]=s}const a=i[3];if(!/[\d.]+/.test(e)){e=this.getName(e)||""}if(!e){throw new Error(`Cannot get OID for name type '${e}'`)}const o=new AttributeTypeAndValue({type:e});if(r.charAt(0)==="#"){o.value.anyValue=build.Convert.FromHex(r.slice(1))}else{const t=/"(.*?[^\\])?"/.exec(r);if(t){r=t[1]}r=r.replace(/\\0a/gi,"\n").replace(/\\0d/gi,"\r").replace(/\\0g/gi,"\t").replace(/\\(.)/g,"$1");if(e===this.getName("E")||e===this.getName("DC")){o.value.ia5String=r}else{if(Name.isASCII(r)){o.value.printableString=r}else{o.value.utf8String=r}}}if(n==="+"){t[t.length-1].push(o)}else{t.push(new RelativeDistinguishedName([o]))}n=a}return t}fromJSON(e){const t=new Name$1;for(const r of e){const e=new RelativeDistinguishedName;for(const t in r){let i=t;if(!/[\d.]+/.test(t)){i=this.getName(t)||""}if(!i){throw new Error(`Cannot get OID for name type '${t}'`)}const n=r[t];for(const t of n){const r=new AttributeTypeAndValue({type:i});if(typeof t==="object"){for(const e in t){switch(e){case"ia5String":r.value.ia5String=t[e];break;case"utf8String":r.value.utf8String=t[e];break;case"universalString":r.value.universalString=t[e];break;case"bmpString":r.value.bmpString=t[e];break;case"printableString":r.value.printableString=t[e];break}}}else if(t[0]==="#"){r.value.anyValue=build.Convert.FromHex(t.slice(1))}else{if(i===this.getName("E")||i===this.getName("DC")){r.value.ia5String=t}else{r.value.printableString=t}}e.push(r)}}t.push(e)}return t}toArrayBuffer(){return AsnConvert.serialize(this.asn)}async getThumbprint(...e){var t;let r;let i="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){i=e[0]||i;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(i,this.toArrayBuffer())}}const ERR_GN_CONSTRUCTOR="Cannot initialize GeneralName from ASN.1 data.";const ERR_GN_STRING_FORMAT=`${ERR_GN_CONSTRUCTOR} Unsupported string format in use.`;const ERR_GUID=`${ERR_GN_CONSTRUCTOR} Value doesn't match to GUID regular expression.`;const GUID_REGEX=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i;const id_GUID="1.3.6.1.4.1.311.25.1";const id_UPN="1.3.6.1.4.1.311.20.2.3";const DNS="dns";const DN="dn";const EMAIL="email";const IP="ip";const URL="url";const GUID="guid";const UPN="upn";const REGISTERED_ID="id";class GeneralName extends AsnData{constructor(...e){let t;if(e.length===2){switch(e[0]){case DN:{const r=new Name(e[1]).toArrayBuffer();const i=AsnConvert.parse(r,Name$1);t=new GeneralName$1({directoryName:i});break}case DNS:t=new GeneralName$1({dNSName:e[1]});break;case EMAIL:t=new GeneralName$1({rfc822Name:e[1]});break;case GUID:{const r=new RegExp(GUID_REGEX,"i").exec(e[1]);if(!r){throw new Error("Cannot parse GUID value. Value doesn't match to regular expression")}const i=r.slice(1).map(((e,t)=>{if(t<3){return build.Convert.ToHex(new Uint8Array(build.Convert.FromHex(e)).reverse())}return e})).join("");t=new GeneralName$1({otherName:new OtherName({typeId:id_GUID,value:AsnConvert.serialize(new OctetString(build.Convert.FromHex(i)))})});break}case IP:t=new GeneralName$1({iPAddress:e[1]});break;case REGISTERED_ID:t=new GeneralName$1({registeredID:e[1]});break;case UPN:{t=new GeneralName$1({otherName:new OtherName({typeId:id_UPN,value:AsnConvert.serialize(AsnUtf8StringConverter.toASN(e[1]))})});break}case URL:t=new GeneralName$1({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}}else if(build.BufferSourceConverter.isBufferSource(e[0])){t=AsnConvert.parse(e[0],GeneralName$1)}else{t=e[0]}super(t)}onInit(e){if(e.dNSName!=undefined){this.type=DNS;this.value=e.dNSName}else if(e.rfc822Name!=undefined){this.type=EMAIL;this.value=e.rfc822Name}else if(e.iPAddress!=undefined){this.type=IP;this.value=e.iPAddress}else if(e.uniformResourceIdentifier!=undefined){this.type=URL;this.value=e.uniformResourceIdentifier}else if(e.registeredID!=undefined){this.type=REGISTERED_ID;this.value=e.registeredID}else if(e.directoryName!=undefined){this.type=DN;this.value=new Name(e.directoryName).toString()}else if(e.otherName!=undefined){if(e.otherName.typeId===id_GUID){this.type=GUID;const t=AsnConvert.parse(e.otherName.value,OctetString);const r=new RegExp(GUID_REGEX,"i").exec(build.Convert.ToHex(t));if(!r){throw new Error(ERR_GUID)}this.value=r.slice(1).map(((e,t)=>{if(t<3){return build.Convert.ToHex(new Uint8Array(build.Convert.FromHex(e)).reverse())}return e})).join("-")}else if(e.otherName.typeId===id_UPN){this.type=UPN;this.value=AsnConvert.parse(e.otherName.value,DirectoryString).toString()}else{throw new Error(ERR_GN_STRING_FORMAT)}}else{throw new Error(ERR_GN_STRING_FORMAT)}}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case DN:case DNS:case GUID:case IP:case REGISTERED_ID:case UPN:case URL:e=this.type.toUpperCase();break;case EMAIL:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let t=this.value;if(this.type===REGISTERED_ID){t=OidSerializer.toString(t)}return new TextObject(e,undefined,t)}}class GeneralNames extends AsnData{constructor(e){let t;if(e instanceof GeneralNames$1){t=e}else if(Array.isArray(e)){const r=[];for(const t of e){if(t instanceof GeneralName$1){r.push(t)}else{const e=AsnConvert.parse(new GeneralName(t.type,t.value).rawData,GeneralName$1);r.push(e)}}t=new GeneralNames$1(r)}else if(build.BufferSourceConverter.isBufferSource(e)){t=AsnConvert.parse(e,GeneralNames$1)}else{throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments")}super(t)}onInit(e){const t=[];for(const r of e){let e=null;try{e=new GeneralName(r)}catch{continue}t.push(e)}this.items=t}toJSON(){return this.items.map((e=>e.toJSON()))}toTextObject(){const e=super.toTextObjectEmpty();for(const t of this.items){const r=t.toTextObject();let i=e[r[TextObject.NAME]];if(!Array.isArray(i)){i=[];e[r[TextObject.NAME]]=i}i.push(r)}return e}}GeneralNames.NAME="GeneralNames";const rPaddingTag="-{5}";const rEolChars="\\n";const rNameTag=`[^${rEolChars}]+`;const rBeginTag=`${rPaddingTag}BEGIN (${rNameTag}(?=${rPaddingTag}))${rPaddingTag}`;const rEndTag=`${rPaddingTag}END \\1${rPaddingTag}`;const rEolGroup="\\n";const rHeaderKey=`[^:${rEolChars}]+`;const rHeaderValue=`(?:[^${rEolChars}]+${rEolGroup}(?: +[^${rEolChars}]+${rEolGroup})*)`;const rBase64Chars="[a-zA-Z0-9=+/]+";const rBase64=`(?:${rBase64Chars}${rEolGroup})+`;const rPem=`${rBeginTag}${rEolGroup}(?:((?:${rHeaderKey}: ${rHeaderValue})+))?${rEolGroup}?(${rBase64})${rEndTag}`;class PemConverter{static isPem(e){return typeof e==="string"&&new RegExp(rPem,"g").test(e)}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const t=new RegExp(rPem,"g");const r=[];let i=null;while(i=t.exec(e)){const e=i[3].replace(new RegExp(`[${rEolChars}]+`,"g"),"");const t={type:i[1],headers:[],rawData:build.Convert.FromBase64(e)};const n=i[2];if(n){const e=n.split(new RegExp(rEolGroup,"g"));let r=null;for(const i of e){const[e,n]=i.split(/:(.*)/);if(n===undefined){if(!r){throw new Error("Cannot parse PEM string. Incorrect header value")}r.value+=e.trim()}else{if(r){t.headers.push(r)}r={key:e,value:n.trim()}}}if(r){t.headers.push(r)}}r.push(t)}return r}static decode(e){const t=this.decodeWithHeaders(e);return t.map((e=>e.rawData))}static decodeFirst(e){const t=this.decode(e);if(!t.length){throw new RangeError("PEM string doesn't contain any objects")}return t[0]}static encode(e,t){if(Array.isArray(e)){const r=new Array;if(t){e.forEach((e=>{if(!build.BufferSourceConverter.isBufferSource(e)){throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource")}r.push(this.encodeStruct({type:t,rawData:build.BufferSourceConverter.toArrayBuffer(e)}))}))}else{e.forEach((e=>{if(!("type"in e)){throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut")}r.push(this.encodeStruct(e))}))}return r.join("\n")}else{if(!t){throw new Error("Required argument 'tag' is missed")}return this.encodeStruct({type:t,rawData:build.BufferSourceConverter.toArrayBuffer(e)})}}static encodeStruct(e){var t;const r=e.type.toLocaleUpperCase();const i=[];i.push(`-----BEGIN ${r}-----`);if((t=e.headers)===null||t===void 0?void 0:t.length){for(const t of e.headers){i.push(`${t.key}: ${t.value}`)}i.push("")}const n=build.Convert.ToBase64(e.rawData);let s;let a=0;const o=Array();while(a<n.length){if(n.length-a<64){s=n.substring(a)}else{s=n.substring(a,a+64);a+=64}if(s.length!==0){o.push(s);if(s.length<64){break}}else{break}}i.push(...o);i.push(`-----END ${r}-----`);return i.join("\n")}}PemConverter.CertificateTag="CERTIFICATE";PemConverter.CrlTag="CRL";PemConverter.CertificateRequestTag="CERTIFICATE REQUEST";PemConverter.PublicKeyTag="PUBLIC KEY";PemConverter.PrivateKeyTag="PRIVATE KEY";class PemData extends AsnData{static isAsnEncoded(e){return build.BufferSourceConverter.isBufferSource(e)||typeof e==="string"}static toArrayBuffer(e){if(typeof e==="string"){if(PemConverter.isPem(e)){return PemConverter.decode(e)[0]}else if(build.Convert.isHex(e)){return build.Convert.FromHex(e)}else if(build.Convert.isBase64(e)){return build.Convert.FromBase64(e)}else if(build.Convert.isBase64Url(e)){return build.Convert.FromBase64Url(e)}else{throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}}else{const t=build.Convert.ToBinary(e);if(PemConverter.isPem(t)){return PemConverter.decode(t)[0]}else if(build.Convert.isHex(t)){return build.Convert.FromHex(t)}else if(build.Convert.isBase64(t)){return build.Convert.FromBase64(t)}else if(build.Convert.isBase64Url(t)){return build.Convert.FromBase64Url(t)}return build.BufferSourceConverter.toArrayBuffer(e)}}constructor(...e){if(PemData.isAsnEncoded(e[0])){super(PemData.toArrayBuffer(e[0]),e[1])}else{super(e[0])}}toString(e="pem"){switch(e){case"pem":return PemConverter.encode(this.rawData,this.tag);default:return super.toString(e)}}}class PublicKey extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,SubjectPublicKeyInfo)}else{super(e)}this.tag=PemConverter.PublicKeyTag}async export(...e){let t;let r=["verify"];let i={hash:"SHA-256",...this.algorithm};if(e.length>1){i=e[0]||i;r=e[1]||r;t=e[2]||cryptoProvider.get()}else{t=e[0]||cryptoProvider.get()}return t.subtle.importKey("spki",this.rawData,i,true,r)}onInit(e){const t=instance.resolve(diAlgorithmProvider);const r=this.algorithm=t.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case id_rsaEncryption:{const t=AsnConvert.parse(e.subjectPublicKey,RSAPublicKey);const i=build.BufferSourceConverter.toUint8Array(t.modulus);r.publicExponent=build.BufferSourceConverter.toUint8Array(t.publicExponent);r.modulusLength=(!i[0]?i.slice(1):i).byteLength<<3;break}}}async getThumbprint(...e){var t;let r;let i="SHA-1";if(e.length>=1&&!((t=e[0])===null||t===void 0?void 0:t.subtle)){i=e[0]||i;r=e[1]||cryptoProvider.get()}else{r=e[0]||cryptoProvider.get()}return await r.subtle.digest(i,this.rawData)}async getKeyIdentifier(e){if(!e){e=cryptoProvider.get()}const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);return await e.subtle.digest("SHA-1",t.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,SubjectPublicKeyInfo);e["Algorithm"]=TextConverter.serializeAlgorithm(t.algorithm);switch(t.algorithm.algorithm){case id_ecPublicKey:e["EC Point"]=t.subjectPublicKey;break;case id_rsaEncryption:default:e["Raw Data"]=t.subjectPublicKey}return e}}class ExtensionFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Extension(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}ExtensionFactory.items=new Map;const diAsnSignatureFormatter="crypto.signatureFormatter";class AsnDefaultSignatureFormatter{toAsnSignature(e,t){return build.BufferSourceConverter.toArrayBuffer(t)}toWebSignature(e,t){return build.BufferSourceConverter.toArrayBuffer(t)}}class X509Certificate extends PemData{constructor(e){if(PemData.isAsnEncoded(e)){super(e,Certificate)}else{super(e)}this.tag=PemConverter.CertificateTag}onInit(e){const t=e.tbsCertificate;this.tbs=AsnConvert.serialize(t);this.serialNumber=build.Convert.ToHex(t.serialNumber);this.subjectName=new Name(t.subject);this.subject=new Name(t.subject).toString();this.issuerName=new Name(t.issuer);this.issuer=this.issuerName.toString();const r=instance.resolve(diAlgorithmProvider);this.signatureAlgorithm=r.toWebAlgorithm(e.signatureAlgorithm);this.signature=e.signatureValue;const i=t.validity.notBefore.utcTime||t.validity.notBefore.generalTime;if(!i){throw new Error("Cannot get 'notBefore' value")}this.notBefore=i;const n=t.validity.notAfter.utcTime||t.validity.notAfter.generalTime;if(!n){throw new Error("Cannot get 'notAfter' value")}this.notAfter=n;this.extensions=[];if(t.extensions){this.extensions=t.extensions.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}this.publicKey=new PublicKey(t.subjectPublicKeyInfo)}getExtension(e){for(const t of this.extensions){if(typeof e==="string"){if(t.type===e){return t}}else{if(t instanceof e){return t}}}return null}getExtensions(e){return this.extensions.filter((t=>{if(typeof e==="string"){return t.type===e}else{return t instanceof e}}))}async verify(e={},t=cryptoProvider.get()){let r;let i;const n=e.publicKey;try{if(!n){r={...this.publicKey.algorithm,...this.signatureAlgorithm};i=await this.publicKey.export(r,["verify"],t)}else if("publicKey"in n){r={...n.publicKey.algorithm,...this.signatureAlgorithm};i=await n.publicKey.export(r,["verify"])}else if(n instanceof PublicKey){r={...n.algorithm,...this.signatureAlgorithm};i=await n.export(r,["verify"])}else if(build.BufferSourceConverter.isBufferSource(n)){const e=new PublicKey(n);r={...e.algorithm,...this.signatureAlgorithm};i=await e.export(r,["verify"])}else{r={...n.algorithm,...this.signatureAlgorithm};i=n}}catch(e){return false}const s=instance.resolveAll(diAsnSignatureFormatter).reverse();let a=null;for(const e of s){a=e.toWebSignature(r,this.signature);if(a){break}}if(!a){throw Error("Cannot convert ASN.1 signature value to WebCrypto format")}const o=await t.subtle.verify(this.signatureAlgorithm,i,a,this.tbs);if(e.signatureOnly){return o}else{const t=e.date||new Date;const r=t.getTime();return o&&this.notBefore.getTime()<r&&r<this.notAfter.getTime()}}async getThumbprint(...e){let t;let r="SHA-1";if(e[0]){if(!e[0].subtle){r=e[0]||r;t=e[1]}else{t=e[0]}}t!==null&&t!==void 0?t:t=cryptoProvider.get();return await t.subtle.digest(r,this.rawData)}async isSelfSigned(e=cryptoProvider.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:true},e)}toTextObject(){const e=this.toTextObjectEmpty();const t=AsnConvert.parse(this.rawData,Certificate);const r=t.tbsCertificate;const i=new TextObject("",{Version:`${Version$1[r.version]} (${r.version})`,"Serial Number":r.serialNumber,"Signature Algorithm":TextConverter.serializeAlgorithm(r.signature),Issuer:this.issuer,Validity:new TextObject("",{"Not Before":r.validity.notBefore.getTime(),"Not After":r.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(r.issuerUniqueID){i["Issuer Unique ID"]=r.issuerUniqueID}if(r.subjectUniqueID){i["Subject Unique ID"]=r.subjectUniqueID}if(this.extensions.length){const e=new TextObject("");for(const t of this.extensions){const r=t.toTextObject();e[r[TextObject.NAME]]=r}i["Extensions"]=e}e["Data"]=i;e["Signature"]=new TextObject("",{Algorithm:TextConverter.serializeAlgorithm(t.signatureAlgorithm),"":t.signatureValue});return e}}X509Certificate.NAME="Certificate";class AuthorityKeyIdentifierExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else if(typeof e[0]==="string"){const t=new AuthorityKeyIdentifier({keyIdentifier:new KeyIdentifier(build.Convert.FromHex(e[0]))});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(t))}else{const t=e[0];const r=t.name instanceof GeneralNames?AsnConvert.parse(t.name.rawData,GeneralNames$1):t.name;const i=new AuthorityKeyIdentifier({authorityCertIssuer:r,authorityCertSerialNumber:build.Convert.FromHex(t.serialNumber)});super(id_ce_authorityKeyIdentifier,e[1],AsnConvert.serialize(i))}}static async create(e,t=false,r=cryptoProvider.get()){if(e instanceof X509Certificate||CryptoProvider.isCryptoKey(e)){const i=e instanceof X509Certificate?await e.publicKey.export(r):e;const n=await r.subtle.exportKey("spki",i);const s=new PublicKey(n);const a=await s.getKeyIdentifier(r);return new AuthorityKeyIdentifierExtension(build.Convert.ToHex(a),t)}else{return new AuthorityKeyIdentifierExtension(e,t)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,AuthorityKeyIdentifier);if(t.keyIdentifier){this.keyId=build.Convert.ToHex(t.keyIdentifier)}if(t.authorityCertIssuer&&t.authorityCertSerialNumber){this.certId={name:t.authorityCertIssuer,serialNumber:build.Convert.ToHex(t.authorityCertSerialNumber)}}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,AuthorityKeyIdentifier);if(t.authorityCertIssuer){e["Authority Issuer"]=new GeneralNames(t.authorityCertIssuer).toTextObject()}if(t.authorityCertSerialNumber){e["Authority Serial Number"]=t.authorityCertSerialNumber}if(t.keyIdentifier){e[""]=t.keyIdentifier}return e}}AuthorityKeyIdentifierExtension.NAME="Authority Key Identifier";class BasicConstraintsExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,BasicConstraints);this.ca=t.cA;this.pathLength=t.pathLenConstraint}else{const t=new BasicConstraints({cA:e[0],pathLenConstraint:e[1]});super(id_ce_basicConstraints,e[2],AsnConvert.serialize(t));this.ca=e[0];this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();if(this.ca){e["CA"]=this.ca}if(this.pathLength!==undefined){e["Path Length"]=this.pathLength}return e}}BasicConstraintsExtension.NAME="Basic Constraints";var ExtendedKeyUsage;(function(e){e["serverAuth"]="1.3.6.1.5.5.7.3.1";e["clientAuth"]="1.3.6.1.5.5.7.3.2";e["codeSigning"]="1.3.6.1.5.5.7.3.3";e["emailProtection"]="1.3.6.1.5.5.7.3.4";e["timeStamping"]="1.3.6.1.5.5.7.3.8";e["ocspSigning"]="1.3.6.1.5.5.7.3.9"})(ExtendedKeyUsage||(ExtendedKeyUsage={}));class ExtendedKeyUsageExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,ExtendedKeyUsage$1);this.usages=t.map((e=>e))}else{const t=new ExtendedKeyUsage$1(e[0]);super(id_ce_extKeyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();e[""]=this.usages.map((e=>OidSerializer.toString(e))).join(", ");return e}}ExtendedKeyUsageExtension.NAME="Extended Key Usages";var KeyUsageFlags;(function(e){e[e["digitalSignature"]=1]="digitalSignature";e[e["nonRepudiation"]=2]="nonRepudiation";e[e["keyEncipherment"]=4]="keyEncipherment";e[e["dataEncipherment"]=8]="dataEncipherment";e[e["keyAgreement"]=16]="keyAgreement";e[e["keyCertSign"]=32]="keyCertSign";e[e["cRLSign"]=64]="cRLSign";e[e["encipherOnly"]=128]="encipherOnly";e[e["decipherOnly"]=256]="decipherOnly"})(KeyUsageFlags||(KeyUsageFlags={}));class KeyUsagesExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,KeyUsage);this.usages=t.toNumber()}else{const t=new KeyUsage(e[0]);super(id_ce_keyUsage,e[1],AsnConvert.serialize(t));this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,KeyUsage);e[""]=t.toJSON().join(", ");return e}}KeyUsagesExtension.NAME="Key Usages";class SubjectKeyIdentifierExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);this.keyId=build.Convert.ToHex(t)}else{const t=typeof e[0]==="string"?build.Convert.FromHex(e[0]):e[0];const r=new SubjectKeyIdentifier(t);super(id_ce_subjectKeyIdentifier,e[1],AsnConvert.serialize(r));this.keyId=build.Convert.ToHex(t)}}static async create(e,t=false,r=cryptoProvider.get()){let i;if(e instanceof PublicKey){i=e.rawData}else if("publicKey"in e){i=e.publicKey.rawData}else if(build.BufferSourceConverter.isBufferSource(e)){i=e}else{i=await r.subtle.exportKey("spki",e)}const n=new PublicKey(i);const s=await n.getKeyIdentifier(r);return new SubjectKeyIdentifierExtension(build.Convert.ToHex(s),t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=AsnConvert.parse(this.value,SubjectKeyIdentifier);e[""]=t;return e}}SubjectKeyIdentifierExtension.NAME="Subject Key Identifier";class SubjectAlternativeNameExtension extends Extension{constructor(...e){if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{super(id_ce_subjectAltName,e[1],new GeneralNames(e[0]||[]).rawData)}}onInit(e){super.onInit(e);const t=AsnConvert.parse(e.extnValue,SubjectAlternativeName);this.names=new GeneralNames(t)}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.names.toTextObject();for(const r in t){e[r]=t[r]}return e}}SubjectAlternativeNameExtension.NAME="Subject Alternative Name";class CertificatePolicyExtension extends Extension{constructor(...e){var t;if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0]);const t=AsnConvert.parse(this.value,CertificatePolicies);this.policies=t.map((e=>e.policyIdentifier))}else{const r=e[0];const i=(t=e[1])!==null&&t!==void 0?t:false;const n=new CertificatePolicies(r.map((e=>new PolicyInformation({policyIdentifier:e}))));super(id_ce_certificatePolicies,i,AsnConvert.serialize(n));this.policies=r}}toTextObject(){const e=this.toTextObjectWithoutValue();e["Policy"]=this.policies.map((e=>new TextObject("",{},OidSerializer.toString(e))));return e}}CertificatePolicyExtension.NAME="Certificate Policies";ExtensionFactory.register(id_ce_certificatePolicies,CertificatePolicyExtension);class Attribute extends AsnData{constructor(...e){let t;if(build.BufferSourceConverter.isBufferSource(e[0])){t=build.BufferSourceConverter.toArrayBuffer(e[0])}else{const r=e[0];const i=Array.isArray(e[1])?e[1].map((e=>build.BufferSourceConverter.toArrayBuffer(e))):[];t=AsnConvert.serialize(new Attribute$2({type:r,values:i}))}super(t,Attribute$2)}onInit(e){this.type=e.type;this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();e["Value"]=this.values.map((e=>new TextObject("",{"":e})));return e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();if(e[TextObject.NAME]===Attribute.NAME){e[TextObject.NAME]=OidSerializer.toString(this.type)}return e}}Attribute.NAME="Attribute";class ChallengePasswordAttribute extends Attribute{constructor(...e){var t;if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=new ChallengePassword({printableString:e[0]});super(id_pkcs9_at_challengePassword,[AsnConvert.serialize(t)])}(t=this.password)!==null&&t!==void 0?t:this.password=""}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],ChallengePassword);this.password=e.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();e[TextObject.VALUE]=this.password;return e}}ChallengePasswordAttribute.NAME="Challenge Password";class ExtensionsAttribute extends Attribute{constructor(...e){var t;if(build.BufferSourceConverter.isBufferSource(e[0])){super(e[0])}else{const t=e[0];const r=new Extensions;for(const e of t){r.push(AsnConvert.parse(e.rawData,Extension$1))}super(id_pkcs9_at_extensionRequest,[AsnConvert.serialize(r)])}(t=this.items)!==null&&t!==void 0?t:this.items=[]}onInit(e){super.onInit(e);if(this.values[0]){const e=AsnConvert.parse(this.values[0],Extensions);this.items=e.map((e=>ExtensionFactory.create(AsnConvert.serialize(e))))}}toTextObject(){const e=this.toTextObjectWithoutValue();const t=this.items.map((e=>e.toTextObject()));for(const r of t){e[r[TextObject.NAME]]=r}return e}}ExtensionsAttribute.NAME="Extensions";class AttributeFactory{static register(e,t){this.items.set(e,t)}static create(e){const t=new Attribute(e);const r=this.items.get(t.type);if(r){return new r(e)}return t}}AttributeFactory.items=new Map;let RsaAlgorithm=class e{toAsnAlgorithm(e){switch(e.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(e.hash){switch(e.hash.name.toLowerCase()){case"sha-1":return new AlgorithmIdentifier$1({algorithm:id_sha1WithRSAEncryption,parameters:null});case"sha-256":return new AlgorithmIdentifier$1({algorithm:id_sha256WithRSAEncryption,parameters:null});case"sha-384":return new AlgorithmIdentifier$1({algorithm:id_sha384WithRSAEncryption,parameters:null});case"sha-512":return new AlgorithmIdentifier$1({algorithm:id_sha512WithRSAEncryption,parameters:null})}}else{return new AlgorithmIdentifier$1({algorithm:id_rsaEncryption,parameters:null})}}return null}toWebAlgorithm(e){switch(e.algorithm){case id_rsaEncryption:return{name:"RSASSA-PKCS1-v1_5"};case id_sha1WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case id_sha256WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case id_sha384WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case id_sha512WithRSAEncryption:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};RsaAlgorithm=__decorate([injectable()],RsaAlgorithm);instance.registerSingleton(diAlgorithm,RsaAlgorithm);class AsnEcSignatureFormatter{addPadding(e,t){const r=build.BufferSourceConverter.toUint8Array(t);const i=new Uint8Array(e);i.set(r,e-r.length);return i}removePadding(e,t=false){let r=build.BufferSourceConverter.toUint8Array(e);for(let e=0;e<r.length;e++){if(!r[e]){continue}r=r.slice(e);break}if(t&&r[0]>127){const e=new Uint8Array(r.length+1);e.set(r,1);return e.buffer}return r.buffer}toAsnSignature(e,t){if(e.name==="ECDSA"){const r=e.namedCurve;const i=AsnEcSignatureFormatter.namedCurveSize.get(r)||AsnEcSignatureFormatter.defaultNamedCurveSize;const n=new ECDSASigValue;const s=build.BufferSourceConverter.toUint8Array(t);n.r=this.removePadding(s.slice(0,i),true);n.s=this.removePadding(s.slice(i,i+i),true);return AsnConvert.serialize(n)}return null}toWebSignature(e,t){if(e.name==="ECDSA"){const r=AsnConvert.parse(t,ECDSASigValue);const i=e.namedCurve;const n=AsnEcSignatureFormatter.namedCurveSize.get(i)||AsnEcSignatureFormatter.defaultNamedCurveSize;const s=this.addPadding(n,this.removePadding(r.r));const a=this.addPadding(n,this.removePadding(r.s));return build.combine(s,a)}return null}}AsnEcSignatureFormatter.namedCurveSize=new Map;AsnEcSignatureFormatter.defaultNamedCurveSize=32;const idX25519$1="1.3.101.110";const idX448$1="1.3.101.111";const idEd25519$1="1.3.101.112";const idEd448$1="1.3.101.113";let EdAlgorithm=class e{toAsnAlgorithm(e){let t=null;switch(e.name.toLowerCase()){case"eddsa":switch(e.namedCurve.toLowerCase()){case"ed25519":t=idEd25519$1;break;case"ed448":t=idEd448$1;break}break;case"ecdh-es":switch(e.namedCurve.toLowerCase()){case"x25519":t=idX25519$1;break;case"x448":t=idX448$1;break}}if(t){return new AlgorithmIdentifier$1({algorithm:t})}return null}toWebAlgorithm(e){switch(e.algorithm){case idEd25519$1:return{name:"EdDSA",namedCurve:"Ed25519"};case idEd448$1:return{name:"EdDSA",namedCurve:"Ed448"};case idX25519$1:return{name:"ECDH-ES",namedCurve:"X25519"};case idX448$1:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};EdAlgorithm=__decorate([injectable()],EdAlgorithm);instance.registerSingleton(diAlgorithm,EdAlgorithm);class X509Certificates extends Array{constructor(e){super();if(PemData.isAsnEncoded(e)){this.import(e)}else if(e instanceof X509Certificate){this.push(e)}else if(Array.isArray(e)){for(const t of e){this.push(t)}}}export(e){const t=new SignedData;t.version=1;t.encapContentInfo.eContentType=id_data;t.encapContentInfo.eContent=new EncapsulatedContent({single:new OctetString});t.certificates=new CertificateSet(this.map((e=>new CertificateChoices({certificate:AsnConvert.parse(e.rawData,Certificate)}))));const r=new ContentInfo({contentType:id_signedData,content:AsnConvert.serialize(t)});const i=AsnConvert.serialize(r);if(e==="raw"){return i}return this.toString(e)}import(e){const t=PemData.toArrayBuffer(e);const r=AsnConvert.parse(t,ContentInfo);if(r.contentType!==id_signedData){throw new TypeError("Cannot parse CMS package. Incoming data is not a SignedData object.")}const i=AsnConvert.parse(r.content,SignedData);this.clear();for(const e of i.certificates||[]){if(e.certificate){this.push(new X509Certificate(e.certificate))}}}clear(){while(this.pop()){}}toString(e="pem"){const t=this.export("raw");switch(e){case"pem":return PemConverter.encode(t,"CMS");case"pem-chain":return this.map((e=>e.toString("pem"))).join("\n");case"asn":return AsnConvert.toString(t);case"hex":return build.Convert.ToHex(t);case"base64":return build.Convert.ToBase64(t);case"base64url":return build.Convert.ToBase64Url(t);case"text":return TextConverter.serialize(this.toTextObject());default:throw TypeError("Argument 'format' is unsupported value")}}toTextObject(){const e=AsnConvert.parse(this.export("raw"),ContentInfo);const t=AsnConvert.parse(e.content,SignedData);const r=new TextObject("X509Certificates",{"Content Type":OidSerializer.toString(e.contentType),Content:new TextObject("",{Version:`${CMSVersion[t.version]} (${t.version})`,Certificates:new TextObject("",{Certificate:this.map((e=>e.toTextObject()))})})});return r}}class X509ChainBuilder{constructor(e={}){this.certificates=[];if(e.certificates){this.certificates=e.certificates}}async build(e,t=cryptoProvider.get()){const r=new X509Certificates(e);let i=e;while(i=await this.findIssuer(i,t)){const e=await i.getThumbprint(t);for(const i of r){const r=await i.getThumbprint(t);if(build.isEqual(e,r)){throw new Error("Cannot build a certificate chain. Circular dependency.")}}r.push(i)}return r}async findIssuer(e,t=cryptoProvider.get()){if(!await e.isSelfSigned(t)){const r=e.getExtension(id_ce_authorityKeyIdentifier);for(const i of this.certificates){if(i.subject!==e.issuer){continue}if(r){if(r.keyId){const e=i.getExtension(id_ce_subjectKeyIdentifier);if(e&&e.keyId!==r.keyId){continue}}else if(r.certId){const e=i.getExtension(id_ce_subjectAltName);if(e&&!(r.certId.serialNumber===i.serialNumber&&build.isEqual(AsnConvert.serialize(r.certId.name),AsnConvert.serialize(e)))){continue}}}if(!await e.verify({publicKey:await i.publicKey.export(t),signatureOnly:true},t)){continue}return i}}return null}}var X509CrlReason;(function(e){e[e["unspecified"]=0]="unspecified";e[e["keyCompromise"]=1]="keyCompromise";e[e["cACompromise"]=2]="cACompromise";e[e["affiliationChanged"]=3]="affiliationChanged";e[e["superseded"]=4]="superseded";e[e["cessationOfOperation"]=5]="cessationOfOperation";e[e["certificateHold"]=6]="certificateHold";e[e["removeFromCRL"]=8]="removeFromCRL";e[e["privilegeWithdrawn"]=9]="privilegeWithdrawn";e[e["aACompromise"]=10]="aACompromise"})(X509CrlReason||(X509CrlReason={}));ExtensionFactory.register(id_ce_basicConstraints,BasicConstraintsExtension);ExtensionFactory.register(id_ce_extKeyUsage,ExtendedKeyUsageExtension);ExtensionFactory.register(id_ce_keyUsage,KeyUsagesExtension);ExtensionFactory.register(id_ce_subjectKeyIdentifier,SubjectKeyIdentifierExtension);ExtensionFactory.register(id_ce_authorityKeyIdentifier,AuthorityKeyIdentifierExtension);ExtensionFactory.register(id_ce_subjectAltName,SubjectAlternativeNameExtension);AttributeFactory.register(id_pkcs9_at_challengePassword,ChallengePasswordAttribute);AttributeFactory.register(id_pkcs9_at_extensionRequest,ExtensionsAttribute);instance.registerSingleton(diAsnSignatureFormatter,AsnDefaultSignatureFormatter);instance.registerSingleton(diAsnSignatureFormatter,AsnEcSignatureFormatter);AsnEcSignatureFormatter.namedCurveSize.set("P-256",32);AsnEcSignatureFormatter.namedCurveSize.set("K-256",32);AsnEcSignatureFormatter.namedCurveSize.set("P-384",48);AsnEcSignatureFormatter.namedCurveSize.set("P-521",66);class PubkeyResolver{constructor(e){this.tokenScript=e}async resolvePublicKey(){const e=await this.tokenScript.getEngine().getWalletAdapter();const t=Object.values(this.tokenScript.getContracts(true))[0];const r=t.getFirstAddress();for(let t of PubkeyResolver.KEY_SOURCES){try{if(t.type==="contractCall"){t.value=await e.call(r.chain,r.address,t.value,[],[t.valueType==="ethAddress"?"address":"bytes"]);return t}throw new Error("Key source type "+t.type+" is not implemented")}catch(e){console.error(e)}}throw new Error("Owner or Pubkey for "+r.address+" was not found")}}PubkeyResolver.KEY_SOURCES=[{type:"contractCall",valueType:"ethAddress",value:"owner"}];class JsonError extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e);this.message=e;this.innerError=t}}class TransformError extends JsonError{constructor(e,t,r){super(t,r);this.schema=e}}class ParserError extends TransformError{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class ValidationError extends JsonError{}class SerializerError extends JsonError{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r);this.schemaName=e}}class KeyError extends ParserError{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema");this.keys=t;this.errors=r}}var JsonPropTypes;(function(e){e[e["Any"]=0]="Any";e[e["Boolean"]=1]="Boolean";e[e["Number"]=2]="Number";e[e["String"]=3]="String"})(JsonPropTypes||(JsonPropTypes={}));function checkType(e,t){switch(t){case JsonPropTypes.Boolean:return typeof e==="boolean";case JsonPropTypes.Number:return typeof e==="number";case JsonPropTypes.String:return typeof e==="string"}return true}function throwIfTypeIsWrong(e,t){if(!checkType(e,t)){throw new TypeError(`Value must be ${JsonPropTypes[t]}`)}}function isConvertible(e){if(e&&e.prototype){if(e.prototype.toJSON&&e.prototype.fromJSON){return true}else{return isConvertible(e.prototype)}}else{return!!(e&&e.toJSON&&e.fromJSON)}}class JsonSchemaStorage{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){const t=this.items.get(e)||this.findParentSchema(e);if(!t){throw new Error("Cannot get schema for current target")}return t}create(e){const t={names:{}};const r=this.findParentSchema(e);if(r){Object.assign(t,r);t.names={};for(const e in r.names){t.names[e]=Object.assign({},r.names[e])}}t.target=e;return t}set(e,t){this.items.set(e,t);return this}findParentSchema(e){const t=e.__proto__;if(t){const e=this.items.get(t);return e||this.findParentSchema(t)}return null}}const DEFAULT_SCHEMA="default";const schemaStorage=new JsonSchemaStorage;class PatternValidation{constructor(e){this.pattern=new RegExp(e)}validate(e){const t=new RegExp(this.pattern.source,this.pattern.flags);if(typeof e!=="string"){throw new ValidationError("Incoming value must be string")}if(!t.exec(e)){throw new ValidationError(`Value doesn't match to pattern '${t.toString()}'`)}}}class InclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<=e&&e<=this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${e},${t}]`)}}}class ExclusiveValidation{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e;this.max=t}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.Number);if(!(this.min<e&&e<this.max)){const e=this.min===Number.MIN_VALUE?"MIN":this.min;const t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${e},${t})`)}}}class LengthValidation{constructor(e,t,r){this.length=e;this.minLength=t;this.maxLength=r}validate(e){if(this.length!==undefined){if(e.length!==this.length){throw new ValidationError(`Value length must be exactly ${this.length}.`)}return}if(this.minLength!==undefined){if(e.length<this.minLength){throw new ValidationError(`Value length must be more than ${this.minLength}.`)}}if(this.maxLength!==undefined){if(e.length>this.maxLength){throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}}}}class EnumerationValidation{constructor(e){this.enumeration=e}validate(e){throwIfTypeIsWrong(e,JsonPropTypes.String);if(!this.enumeration.includes(e)){throw new ValidationError(`Value must be one of ${this.enumeration.map((e=>`'${e}'`)).join(", ")}`)}}}class JsonTransform{static checkValues(e,t){const r=Array.isArray(e)?e:[e];for(const i of r){for(const r of t.validations){if(r instanceof LengthValidation&&t.repeated){r.validate(e)}else{r.validate(i)}}}}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e)){throw new TypeError("Value must be Array")}if(typeof t.type==="number"){const r=Array.isArray(e)?e:[e];for(const e of r){throwIfTypeIsWrong(e,t.type)}}}static getSchemaByName(e,t=DEFAULT_SCHEMA){return{...e.names[DEFAULT_SCHEMA],...e.names[t]}}}class JsonSerializer extends JsonTransform{static serialize(e,t,r,i){const n=this.toJSON(e,t);return JSON.stringify(n,r,i)}static toJSON(e,t={}){let r;let i=t.targetSchema;const n=t.schemaName||DEFAULT_SCHEMA;if(isConvertible(e)){return e.toJSON()}if(Array.isArray(e)){r=[];for(const i of e){r.push(this.toJSON(i,t))}}else if(typeof e==="object"){if(i&&!schemaStorage.has(i)){throw new JsonError("Cannot get schema for `targetSchema` param")}i=i||e.constructor;if(schemaStorage.has(i)){const t=schemaStorage.get(i);r={};const s=this.getSchemaByName(t,n);for(const a in s){try{const t=s[a];const o=e[a];let f;if(t.optional&&o===undefined||t.defaultValue!==undefined&&o===t.defaultValue){continue}if(!t.optional&&o===undefined){throw new SerializerError(i.name,`Property '${a}' is required.`)}if(typeof t.type==="number"){if(t.converter){if(t.repeated){f=o.map((r=>t.converter.toJSON(r,e)))}else{f=t.converter.toJSON(o,e)}}else{f=o}}else{if(t.repeated){f=o.map((e=>this.toJSON(e,{schemaName:n})))}else{f=this.toJSON(o,{schemaName:n})}}this.checkTypes(f,t);this.checkValues(f,t);r[t.name||a]=f}catch(e){if(e instanceof SerializerError){throw e}else{throw new SerializerError(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}}}else{r={};for(const t in e){r[t]=this.toJSON(e[t],{schemaName:n})}}}else{r=e}return r}}class JsonParser extends JsonTransform{static parse(e,t){const r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){const r=t.targetSchema;const i=t.schemaName||DEFAULT_SCHEMA;const n=new r;if(isConvertible(n)){return n.fromJSON(e)}const s=schemaStorage.get(r);const a=this.getSchemaByName(s,i);const o={};if(t.strictProperty&&!Array.isArray(e)){JsonParser.checkStrictProperty(e,a,s)}for(const r in a){try{const o=a[r];const f=o.name||r;const c=e[f];if(c===undefined&&(o.optional||o.defaultValue!==undefined)){continue}if(!o.optional&&c===undefined){throw new ParserError(s,`Property '${f}' is required.`)}this.checkTypes(c,o);this.checkValues(c,o);if(typeof o.type==="number"){if(o.converter){if(o.repeated){n[r]=c.map((e=>o.converter.fromJSON(e,n)))}else{n[r]=o.converter.fromJSON(c,n)}}else{n[r]=c}}else{const e={...t,targetSchema:o.type,schemaName:i};if(o.repeated){n[r]=c.map((t=>this.fromJSON(t,e)))}else{n[r]=this.fromJSON(c,e)}}}catch(e){if(!(e instanceof ParserError)){e=new ParserError(s,`Property '${r}' is wrong. ${e.message}`,e)}if(t.strictAllKeys){o[r]=e}else{throw e}}}const f=Object.keys(o);if(f.length){throw new KeyError(s,f,o)}return n}static checkStrictProperty(e,t,r){const i=Object.keys(e);const n=Object.keys(t);const s=[];for(const e of i){if(n.indexOf(e)===-1){s.push(e)}}if(s.length){throw new KeyError(r,s)}}}function getValidations(e){const t=[];if(e.pattern){t.push(new PatternValidation(e.pattern))}if(e.type===JsonPropTypes.Number||e.type===JsonPropTypes.Any){if(e.minInclusive!==undefined||e.maxInclusive!==undefined){t.push(new InclusiveValidation(e.minInclusive,e.maxInclusive))}if(e.minExclusive!==undefined||e.maxExclusive!==undefined){t.push(new ExclusiveValidation(e.minExclusive,e.maxExclusive))}if(e.enumeration!==undefined){t.push(new EnumerationValidation(e.enumeration))}}if(e.type===JsonPropTypes.String||e.repeated||e.type===JsonPropTypes.Any){if(e.length!==undefined||e.minLength!==undefined||e.maxLength!==undefined){t.push(new LengthValidation(e.length,e.minLength,e.maxLength))}}return t}const JsonProp=(e={})=>(t,r)=>{const i=`Cannot set type for ${r} property of ${t.constructor.name} schema`;let n;if(!schemaStorage.has(t.constructor)){n=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,n)}else{n=schemaStorage.get(t.constructor);if(n.target!==t.constructor){n=schemaStorage.create(t.constructor);schemaStorage.set(t.constructor,n)}}const s={type:JsonPropTypes.Any,validations:[]};const a=Object.assign(s,e);a.validations=getValidations(a);if(typeof a.type!=="number"){if(!schemaStorage.has(a.type)&&!isConvertible(a.type)){throw new Error(`${i}. Assigning type doesn't have schema.`)}}let o;if(Array.isArray(e.schema)){o=e.schema}else{o=[e.schema||DEFAULT_SCHEMA]}for(const e of o){if(!n.names[e]){n.names[e]={}}const t=n.names[e];t[r]=a}}
/*!
 Copyright (c) Peculiar Ventures, LLC
*/;class CryptoError extends Error{}class AlgorithmError extends CryptoError{}class UnsupportedOperationError extends CryptoError{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class OperationError extends CryptoError{}class RequiredPropertyError extends CryptoError{constructor(e){super(`${e}: Missing required property`)}}function isJWK(e){return typeof e==="object"&&"kty"in e}class ProviderCrypto{async digest(...e){this.checkDigest.apply(this,e);return this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new UnsupportedOperationError("digest")}async generateKey(...e){this.checkGenerateKey.apply(this,e);return this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...i){this.checkAlgorithmName(e);this.checkGenerateKeyParams(e);if(!(r&&r.length)){throw new TypeError(`Usages cannot be empty when creating a key.`)}let n;if(Array.isArray(this.usages)){n=this.usages}else{n=this.usages.privateKey.concat(this.usages.publicKey)}this.checkKeyUsages(r,n)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...i){throw new UnsupportedOperationError("generateKey")}async sign(...e){this.checkSign.apply(this,e);return this.onSign.apply(this,e)}checkSign(e,t,r,...i){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...i){throw new UnsupportedOperationError("sign")}async verify(...e){this.checkVerify.apply(this,e);return this.onVerify.apply(this,e)}checkVerify(e,t,r,i,...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,i,...n){throw new UnsupportedOperationError("verify")}async encrypt(...e){this.checkEncrypt.apply(this,e);return this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,i={},...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,i.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...i){throw new UnsupportedOperationError("encrypt")}async decrypt(...e){this.checkDecrypt.apply(this,e);return this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,i={},...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,i.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...i){throw new UnsupportedOperationError("decrypt")}async deriveBits(...e){this.checkDeriveBits.apply(this,e);return this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,i={},...n){this.checkAlgorithmName(e);this.checkAlgorithmParams(e);this.checkCryptoKey(t,i.keyUsage?"deriveBits":void 0);if(r%8!==0){throw new OperationError("length: Is not multiple of 8")}}async onDeriveBits(e,t,r,...i){throw new UnsupportedOperationError("deriveBits")}async exportKey(...e){this.checkExportKey.apply(this,e);return this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){this.checkKeyFormat(e);this.checkCryptoKey(t);if(!t.extractable){throw new CryptoError("key: Is not extractable")}}async onExportKey(e,t,...r){throw new UnsupportedOperationError("exportKey")}async importKey(...e){this.checkImportKey.apply(this,e);return this.onImportKey.apply(this,e)}checkImportKey(e,t,r,i,n,...s){this.checkKeyFormat(e);this.checkKeyData(e,t);this.checkAlgorithmName(r);this.checkImportParams(r);if(Array.isArray(this.usages)){this.checkKeyUsages(n,this.usages)}}async onImportKey(e,t,r,i,n,...s){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase()){throw new AlgorithmError("Unrecognized name")}}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(const r of e){if(t.indexOf(r)===-1){throw new TypeError("Cannot create a key using the specified key usages")}}}checkCryptoKey(e,t){this.checkAlgorithmName(e.algorithm);if(t&&e.usages.indexOf(t)===-1){throw new CryptoError(`key does not match that of operation`)}}checkRequiredProperty(e,t){if(!(t in e)){throw new RequiredPropertyError(t)}}checkHashAlgorithm(e,t){for(const r of t){if(r.toLowerCase()===e.name.toLowerCase()){return}}throw new OperationError(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw new TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t){throw new TypeError("keyData: Cannot be empty on empty on key importing")}if(e==="jwk"){if(!isJWK(t)){throw new TypeError("keyData: Is not JsonWebToken")}}else if(!build.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}}prepareData(e){return build.BufferSourceConverter.toArrayBuffer(e)}}class AesProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}switch(e.length){case 128:case 192:case 256:break;default:throw new TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class AesCbcProvider$1 extends AesProvider{constructor(){super(...arguments);this.name="AES-CBC";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}}}class AesCtrProvider$1 extends AesProvider{constructor(){super(...arguments);this.name="AES-CTR";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"counter");if(!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter))){throw new TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.counter.byteLength!==16){throw new TypeError("iv: Must have length 16 bytes")}this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new OperationError("length: Must be more than 0")}}}class AesEcbProvider$1 extends AesProvider{constructor(){super(...arguments);this.name="AES-ECB";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class AesGcmProvider$1 extends AesProvider{constructor(){super(...arguments);this.name="AES-GCM";this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength<1){throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1")}if(!("tagLength"in e)){e.tagLength=128}switch(e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class AesKwProvider$1 extends AesProvider{constructor(){super(...arguments);this.name="AES-KW";this.usages=["wrapKey","unwrapKey"]}}class DesProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){this.checkRequiredProperty(e,"iv");if(!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv))){throw new TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'")}if(e.iv.byteLength!==this.ivSize){throw new TypeError(`iv: Must have length ${this.ivSize} bytes`)}}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"length");if(typeof e.length!=="number"){throw new TypeError("length: Is not of type Number")}if(e.length!==this.keySizeBits){throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class RsaProvider extends ProviderCrypto{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=build.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");if(e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384){throw new TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class RsaSsaProvider$1 extends RsaProvider{constructor(){super(...arguments);this.name="RSASSA-PKCS1-v1_5";this.usages={privateKey:["sign"],publicKey:["verify"]}}}class RsaPssProvider$1 extends RsaProvider{constructor(){super(...arguments);this.name="RSA-PSS";this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"saltLength");if(typeof e.saltLength!=="number"){throw new TypeError("saltLength: Is not a Number")}if(e.saltLength<0){throw new RangeError("saltLength: Must be positive number")}}}class RsaOaepProvider$1 extends RsaProvider{constructor(){super(...arguments);this.name="RSA-OAEP";this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label))){throw new TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}}class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve");this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(const t of this.namedCurves){if(t.toLowerCase()===e.toLowerCase()){return}}throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class EcdsaProvider$1 extends EllipticProvider{constructor(){super(...arguments);this.name="ECDSA";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}const KEY_TYPES=["secret","private","public"];class CryptoKey$1{static create(e,t,r,i){const n=new this;n.algorithm=e;n.type=t;n.extractable=r;n.usages=i;return n}static isKeyType(e){return KEY_TYPES.indexOf(e)!==-1}get[Symbol.toStringTag](){return"CryptoKey"}}class EcdhProvider$1 extends EllipticProvider{constructor(){super(...arguments);this.name="ECDH";this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]};this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public");if(!(e.public instanceof CryptoKey$1)){throw new TypeError("public: Is not a CryptoKey")}if(e.public.type!=="public"){throw new OperationError("public: Is not a public key")}if(e.public.algorithm.name!==this.name){throw new OperationError(`public: Is not ${this.name} key`)}}}class EcdhEsProvider$1 extends EcdhProvider$1{constructor(){super(...arguments);this.name="ECDH-ES";this.namedCurves=["X25519","X448"]}}class EdDsaProvider$1 extends EllipticProvider{constructor(){super(...arguments);this.name="EdDSA";this.usages={privateKey:["sign"],publicKey:["verify"]};this.namedCurves=["Ed25519","Ed448"]}}let ObjectIdentifier=class e{constructor(e){if(e){this.value=e}}};__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],ObjectIdentifier.prototype,"value",void 0);ObjectIdentifier=__decorate([AsnType({type:AsnTypeTypes.Choice})],ObjectIdentifier);class AlgorithmIdentifier{constructor(e){Object.assign(this,e)}}__decorate([AsnProp({type:AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],AlgorithmIdentifier.prototype,"parameters",void 0);class PrivateKeyInfo{constructor(){this.version=0;this.privateKeyAlgorithm=new AlgorithmIdentifier;this.privateKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0);__decorate([AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],PrivateKeyInfo.prototype,"attributes",void 0);class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier;this.publicKey=new ArrayBuffer(0)}}__decorate([AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0);__decorate([AsnProp({type:AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);const JsonBase64UrlArrayBufferConverter={fromJSON:e=>build.Convert.FromBase64Url(e),toJSON:e=>build.Convert.ToBase64Url(new Uint8Array(e))};const AsnIntegerArrayBufferConverter={fromASN:e=>{const t=e.valueBlock.valueHex;return!new Uint8Array(t)[0]?e.valueBlock.valueHex.slice(1):e.valueBlock.valueHex},toASN:e=>{const t=new Uint8Array(e)[0]>127?build.combine(new Uint8Array([0]).buffer,e):e;return new Integer({valueHex:t})}};class RsaPrivateKey{constructor(){this.version=0;this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0);this.privateExponent=new ArrayBuffer(0);this.prime1=new ArrayBuffer(0);this.prime2=new ArrayBuffer(0);this.exponent1=new ArrayBuffer(0);this.exponent2=new ArrayBuffer(0);this.coefficient=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"publicExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"d",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"privateExponent",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"p",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"q",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"prime2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dp",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent1",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"dq",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"exponent2",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"qi",converter:JsonBase64UrlArrayBufferConverter})],RsaPrivateKey.prototype,"coefficient",void 0);__decorate([AsnProp({type:AsnPropTypes.Any,optional:true})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0);this.publicExponent=new ArrayBuffer(0)}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"n",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"modulus",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerArrayBufferConverter}),JsonProp({name:"e",converter:JsonBase64UrlArrayBufferConverter})],RsaPublicKey.prototype,"publicExponent",void 0);let EcPublicKey=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){let e=new Uint8Array(this.value);if(e[0]!==4){throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point")}e=new Uint8Array(this.value.slice(1));const t=e.length/2;const r=0;const i={x:build.Convert.ToBase64Url(e.buffer.slice(r,r+t)),y:build.Convert.ToBase64Url(e.buffer.slice(r+t,r+t+t))};return i}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}if(!("y"in e)){throw new Error("y: Missing required property")}const t=build.Convert.FromBase64Url(e.x);const r=build.Convert.FromBase64Url(e.y);const i=build.combine(new Uint8Array([4]).buffer,t,r);this.value=new Uint8Array(i).buffer;return this}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPublicKey.prototype,"value",void 0);EcPublicKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],EcPublicKey);class EcPrivateKey{constructor(){this.version=1;this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e)){throw new Error("d: Missing required property")}this.privateKey=build.Convert.FromBase64Url(e.d);if("x"in e){const t=new EcPublicKey;t.fromJSON(e);this.publicKey=AsnSerializer.toASN(t).valueBlock.valueHex}return this}toJSON(){const e={};e.d=build.Convert.ToBase64Url(this.privateKey);if(this.publicKey){Object.assign(e,new EcPublicKey(this.publicKey).toJSON())}return e}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0);__decorate([AsnProp({type:AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0);__decorate([AsnProp({context:0,type:AsnPropTypes.Any,optional:true})],EcPrivateKey.prototype,"parameters",void 0);__decorate([AsnProp({context:1,type:AsnPropTypes.BitString,optional:true})],EcPrivateKey.prototype,"publicKey",void 0);const AsnIntegerWithoutPaddingConverter={fromASN:e=>{const t=new Uint8Array(e.valueBlock.valueHex);return t[0]===0?t.buffer.slice(1):t.buffer},toASN:e=>{const t=new Uint8Array(e);if(t[0]>127){const e=new Uint8Array(t.length+1);e.set(t,1);return new Integer({valueHex:e.buffer})}return new Integer({valueHex:e})}};var index$2=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter});class EcUtils{static decodePoint(e,t){const r=build.BufferSourceConverter.toUint8Array(e);if(r.length===0||r[0]!==4){throw new Error("Only uncompressed point format supported")}const i=(r.length-1)/2;if(i!==Math.ceil(t/8)){throw new Error("Point does not match field size")}const n=r.slice(1,i+1);const s=r.slice(i+1,i+1+i);return{x:n,y:s}}static encodePoint(e,t){const r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r){throw new Error("X,Y coordinates don't match point size criteria")}const i=build.BufferSourceConverter.toUint8Array(e.x);const n=build.BufferSourceConverter.toUint8Array(e.y);const s=new Uint8Array(r*2+1);s[0]=4;s.set(i,1);s.set(n,r+1);return s}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){const r=this.getSize(t);const i=build.BufferSourceConverter.toUint8Array(e.r);const n=build.BufferSourceConverter.toUint8Array(e.s);const s=new Uint8Array(r*2);s.set(this.padStart(i,r));s.set(this.padStart(n,r),r);return s}static decodeSignature(e,t){const r=this.getSize(t);const i=build.BufferSourceConverter.toUint8Array(e);if(i.length!==r*2){throw new Error("Incorrect size of the signature")}const n=i.slice(0,r);const s=i.slice(r);return{r:this.trimStart(n),s:this.trimStart(s)}}static trimStart(e){let t=0;while(t<e.length-1&&e[t]===0){t++}if(t===0){return e}return e.slice(t,e.length)}static padStart(e,t){if(t===e.length){return e}const r=new Uint8Array(t);r.set(e,t-e.length);return r}}class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0);this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){const t=e.byteLength/2;const r=EcUtils.decodeSignature(e,t*8);const i=new EcDsaSignature;i.r=build.BufferSourceConverter.toArrayBuffer(r.r);i.s=build.BufferSourceConverter.toArrayBuffer(r.s);return i}toWebCryptoSignature(e){e!==null&&e!==void 0?e:e=Math.max(this.r.byteLength,this.s.byteLength)*8;const t=EcUtils.encodeSignature(this,e);return t.buffer}}__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"r",void 0);__decorate([AsnProp({type:AsnPropTypes.Integer,converter:AsnIntegerWithoutPaddingConverter})],EcDsaSignature.prototype,"s",void 0);class OneAsymmetricKey extends PrivateKeyInfo{}__decorate([AsnProp({context:1,implicit:true,type:AsnPropTypes.BitString,optional:true})],OneAsymmetricKey.prototype,"publicKey",void 0);let EdPrivateKey$1=class e{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d){throw new Error("d: Missing required property")}this.value=build.Convert.FromBase64Url(e.d);return this}toJSON(){const e={d:build.Convert.ToBase64Url(this.value)};return e}};__decorate([AsnProp({type:AsnPropTypes.OctetString})],EdPrivateKey$1.prototype,"value",void 0);EdPrivateKey$1=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPrivateKey$1);let EdPublicKey$1=class e{constructor(e){this.value=new ArrayBuffer(0);if(e){this.value=e}}toJSON(){const e={x:build.Convert.ToBase64Url(this.value)};return e}fromJSON(e){if(!("x"in e)){throw new Error("x: Missing required property")}this.value=build.Convert.FromBase64Url(e.x);return this}};__decorate([AsnProp({type:AsnPropTypes.BitString})],EdPublicKey$1.prototype,"value",void 0);EdPublicKey$1=__decorate([AsnType({type:AsnTypeTypes.Choice})],EdPublicKey$1);let CurvePrivateKey=class e{};__decorate([AsnProp({type:AsnPropTypes.OctetString}),JsonProp({type:JsonPropTypes.String,converter:JsonBase64UrlArrayBufferConverter})],CurvePrivateKey.prototype,"d",void 0);CurvePrivateKey=__decorate([AsnType({type:AsnTypeTypes.Choice})],CurvePrivateKey);const idSecp256r1="1.2.840.10045.3.1.7";const idEllipticCurve="1.3.132.0";const idSecp384r1=`${idEllipticCurve}.34`;const idSecp521r1=`${idEllipticCurve}.35`;const idSecp256k1=`${idEllipticCurve}.10`;const idVersionOne="1.3.36.3.3.2.8.1.1";const idBrainpoolP160r1=`${idVersionOne}.1`;const idBrainpoolP160t1=`${idVersionOne}.2`;const idBrainpoolP192r1=`${idVersionOne}.3`;const idBrainpoolP192t1=`${idVersionOne}.4`;const idBrainpoolP224r1=`${idVersionOne}.5`;const idBrainpoolP224t1=`${idVersionOne}.6`;const idBrainpoolP256r1=`${idVersionOne}.7`;const idBrainpoolP256t1=`${idVersionOne}.8`;const idBrainpoolP320r1=`${idVersionOne}.9`;const idBrainpoolP320t1=`${idVersionOne}.10`;const idBrainpoolP384r1=`${idVersionOne}.11`;const idBrainpoolP384t1=`${idVersionOne}.12`;const idBrainpoolP512r1=`${idVersionOne}.13`;const idBrainpoolP512t1=`${idVersionOne}.14`;const idX25519="1.3.101.110";const idX448="1.3.101.111";const idEd25519="1.3.101.112";const idEd448="1.3.101.113";var index$1=Object.freeze({__proto__:null,converters:index$2,get ObjectIdentifier(){return ObjectIdentifier},AlgorithmIdentifier,PrivateKeyInfo,PublicKeyInfo,RsaPrivateKey,RsaPublicKey,EcPrivateKey,get EcPublicKey(){return EcPublicKey},EcDsaSignature,OneAsymmetricKey,get EdPrivateKey(){return EdPrivateKey$1},get EdPublicKey(){return EdPublicKey$1},get CurvePrivateKey(){return CurvePrivateKey},idSecp256r1,idEllipticCurve,idSecp384r1,idSecp521r1,idSecp256k1,idVersionOne,idBrainpoolP160r1,idBrainpoolP160t1,idBrainpoolP192r1,idBrainpoolP192t1,idBrainpoolP224r1,idBrainpoolP224t1,idBrainpoolP256r1,idBrainpoolP256t1,idBrainpoolP320r1,idBrainpoolP320t1,idBrainpoolP384r1,idBrainpoolP384t1,idBrainpoolP512r1,idBrainpoolP512t1,idX25519,idX448,idEd25519,idEd448});class EcCurves{constructor(){}static register(e){const t=new ObjectIdentifier;t.value=e.id;const r=AsnConvert.serialize(t);this.items.push({...e,raw:r});this.names.push(e.name)}static find(e){e=e.toUpperCase();for(const t of this.items){if(t.name.toUpperCase()===e||t.id.toUpperCase()===e){return t}}return null}static get(e){const t=this.find(e);if(!t){throw new Error(`Unsupported EC named curve '${e}'`)}return t}}EcCurves.items=[];EcCurves.names=[];EcCurves.register({name:"P-256",id:idSecp256r1,size:256});EcCurves.register({name:"P-384",id:idSecp384r1,size:384});EcCurves.register({name:"P-521",id:idSecp521r1,size:521});EcCurves.register({name:"K-256",id:idSecp256k1,size:256});EcCurves.register({name:"brainpoolP160r1",id:idBrainpoolP160r1,size:160});EcCurves.register({name:"brainpoolP160t1",id:idBrainpoolP160t1,size:160});EcCurves.register({name:"brainpoolP192r1",id:idBrainpoolP192r1,size:192});EcCurves.register({name:"brainpoolP192t1",id:idBrainpoolP192t1,size:192});EcCurves.register({name:"brainpoolP224r1",id:idBrainpoolP224r1,size:224});EcCurves.register({name:"brainpoolP224t1",id:idBrainpoolP224t1,size:224});EcCurves.register({name:"brainpoolP256r1",id:idBrainpoolP256r1,size:256});EcCurves.register({name:"brainpoolP256t1",id:idBrainpoolP256t1,size:256});EcCurves.register({name:"brainpoolP320r1",id:idBrainpoolP320r1,size:320});EcCurves.register({name:"brainpoolP320t1",id:idBrainpoolP320t1,size:320});EcCurves.register({name:"brainpoolP384r1",id:idBrainpoolP384r1,size:384});EcCurves.register({name:"brainpoolP384t1",id:idBrainpoolP384t1,size:384});EcCurves.register({name:"brainpoolP512r1",id:idBrainpoolP512r1,size:512});EcCurves.register({name:"brainpoolP512t1",id:idBrainpoolP512t1,size:512});class HmacProvider$1 extends ProviderCrypto{constructor(){super(...arguments);this.name="HMAC";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw new Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);if("length"in e){if(typeof e.length!=="number"){throw new TypeError("length: Is not a Number")}if(e.length<1){throw new RangeError("length: Number is out of range")}}}checkImportParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class Pbkdf2Provider$1 extends ProviderCrypto{constructor(){super(...arguments);this.name="PBKDF2";this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"];this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash");this.checkHashAlgorithm(e.hash,this.hashAlgorithms);this.checkRequiredProperty(e,"salt");if(!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt))){throw new TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}this.checkRequiredProperty(e,"iterations");if(typeof e.iterations!=="number"){throw new TypeError("iterations: Is not a Number")}if(e.iterations<1){throw new TypeError("iterations: Is less than 1")}}checkImportKey(e,t,r,i,n,...s){super.checkImportKey(e,t,r,i,n);if(i){throw new SyntaxError("extractable: Must be 'false'")}}}class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments);this.usages=[];this.defaultLength=0}digest(...e){e[0]={length:this.defaultLength,...e[0]};return super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);const r=e.length||0;if(typeof r!=="number"){throw new TypeError("length: Is not a Number")}if(r<0){throw new TypeError("length: Is negative")}}}class Shake128Provider$1 extends ShakeProvider{constructor(){super(...arguments);this.name="shake128";this.defaultLength=16}}class Shake256Provider$1 extends ShakeProvider{constructor(){super(...arguments);this.name="shake256";this.defaultLength=32}}class Crypto$1{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){const e=this.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64;e[8]=e[8]&63|128;const t=build.Convert.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16)}`}}class ProviderStorage{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){const t=this.get(e.toLowerCase());if(t){delete this.items[e]}return t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){const e=[];for(const t in this.items){const r=this.items[t];e.push(r.name)}return e.sort()}}class SubtleCrypto$1{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(e){return e&&typeof e==="object"&&"name"in e&&"hash"in e?true:false}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");const[t,r,...i]=e;const n=this.prepareAlgorithm(t);const s=build.BufferSourceConverter.toArrayBuffer(r);const a=this.getProvider(n.name);const o=await a.digest(n,s,...i);return o}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");const[t,r,i,...n]=e;const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.generateKey({...s,name:a.name},r,i,...n);return o}async sign(...e){this.checkRequiredArguments(e,3,"sign");const[t,r,i,...n]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build.BufferSourceConverter.toArrayBuffer(i);const o=this.getProvider(s.name);const f=await o.sign({...s,name:o.name},r,a,...n);return f}async verify(...e){this.checkRequiredArguments(e,4,"verify");const[t,r,i,n,...s]=e;this.checkCryptoKey(r);const a=this.prepareAlgorithm(t);const o=build.BufferSourceConverter.toArrayBuffer(n);const f=build.BufferSourceConverter.toArrayBuffer(i);const c=this.getProvider(a.name);const u=await c.verify({...a,name:c.name},r,f,o,...s);return u}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");const[t,r,i,...n]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build.BufferSourceConverter.toArrayBuffer(i);const o=this.getProvider(s.name);const f=await o.encrypt({...s,name:o.name},r,a,{keyUsage:true},...n);return f}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");const[t,r,i,...n]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=build.BufferSourceConverter.toArrayBuffer(i);const o=this.getProvider(s.name);const f=await o.decrypt({...s,name:o.name},r,a,{keyUsage:true},...n);return f}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");const[t,r,i,...n]=e;this.checkCryptoKey(r);const s=this.prepareAlgorithm(t);const a=this.getProvider(s.name);const o=await a.deriveBits({...s,name:a.name},r,i,{keyUsage:true},...n);return o}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");const[t,r,i,n,s,...a]=e;const o=this.prepareAlgorithm(i);const f=this.getProvider(o.name);f.checkDerivedKeyParams(o);const c=this.prepareAlgorithm(t);const u=this.getProvider(c.name);u.checkCryptoKey(r,"deriveKey");const h=await u.deriveBits({...c,name:u.name},r,i.length||512,{keyUsage:false},...a);return this.importKey("raw",h,i,n,s,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");const[t,r,...i]=e;this.checkCryptoKey(r);const n=this.getProvider(r.algorithm.name);const s=await n.exportKey(t,r,...i);return s}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");const[t,r,i,n,s,...a]=e;const o=this.prepareAlgorithm(i);const f=this.getProvider(o.name);if(["pkcs8","spki","raw"].indexOf(t)!==-1){const e=build.BufferSourceConverter.toArrayBuffer(r);return f.importKey(t,e,{...o,name:f.name},n,s,...a)}else{if(!r.kty){throw new TypeError("keyData: Is not JSON")}}return f.importKey(t,r,{...o,name:f.name},n,s,...a)}async wrapKey(e,t,r,i,...n){let s=await this.exportKey(e,t,...n);if(e==="jwk"){const e=JSON.stringify(s);s=build.Convert.FromUtf8String(e)}const a=this.prepareAlgorithm(i);const o=build.BufferSourceConverter.toArrayBuffer(s);const f=this.getProvider(a.name);return f.encrypt({...a,name:f.name},r,o,{keyUsage:false},...n)}async unwrapKey(e,t,r,i,n,s,a,...o){const f=this.prepareAlgorithm(i);const c=build.BufferSourceConverter.toArrayBuffer(t);const u=this.getProvider(f.name);let h=await u.decrypt({...f,name:u.name},r,c,{keyUsage:false},...o);if(e==="jwk"){try{h=JSON.parse(build.Convert.ToUtf8String(h))}catch(e){const t=new TypeError("wrappedKey: Is not a JSON");t.internal=e;throw t}}return this.importKey(e,h,n,s,a,...o)}checkRequiredArguments(e,t,r){if(e.length<t){throw new TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}}prepareAlgorithm(e){if(typeof e==="string"){return{name:e}}if(SubtleCrypto$1.isHashedAlgorithm(e)){const t={...e};t.hash=this.prepareAlgorithm(e.hash);return t}return{...e}}getProvider(e){const t=this.providers.get(e);if(!t){throw new AlgorithmError("Unrecognized name")}return t}checkCryptoKey(e){if(!(e instanceof CryptoKey$1)){throw new TypeError(`Key is not of type 'CryptoKey'`)}}}function string_to_bytes(e,t=false){var r=e.length,i=new Uint8Array(t?4*r:r);for(var n=0,s=0;n<r;n++){var a=e.charCodeAt(n);if(t&&55296<=a&&a<=56319){if(++n>=r)throw new Error("Malformed string, low surrogate expected at position "+n);a=(a^55296)<<10|65536|e.charCodeAt(n)^56320}else if(!t&&a>>>8){throw new Error("Wide characters are not allowed.")}if(!t||a<=127){i[s++]=a}else if(a<=2047){i[s++]=192|a>>6;i[s++]=128|a&63}else if(a<=65535){i[s++]=224|a>>12;i[s++]=128|a>>6&63;i[s++]=128|a&63}else{i[s++]=240|a>>18;i[s++]=128|a>>12&63;i[s++]=128|a>>6&63;i[s++]=128|a&63}}return i.subarray(0,s)}function is_bytes(e){return e instanceof Uint8Array}function _heap_init(e,t){const r=e?e.byteLength:t||65536;if(r&4095||r<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");e=e||new Uint8Array(new ArrayBuffer(r));return e}function _heap_write(e,t,r,i,n){const s=e.length-t;const a=s<n?s:n;e.set(r.subarray(i,i+a),t);return a}function joinBytes(...e){const t=e.reduce(((e,t)=>e+t.length),0);const r=new Uint8Array(t);let i=0;for(let t=0;t<e.length;t++){r.set(e[t],i);i+=e[t].length}return r}class IllegalStateError extends Error{constructor(...e){super(...e)}}class IllegalArgumentError extends Error{constructor(...e){super(...e)}}class SecurityError extends Error{constructor(...e){super(...e)}}
/**
 * @file {@link http://asmjs.org Asm.js} implementation of the {@link https://en.wikipedia.org/wiki/Advanced_Encryption_Standard Advanced Encryption Standard}.
 * @author Artem S Vybornov <vybornov@gmail.com>
 * @license MIT
 */var AES_asm=function(){var e=false;var t,r;function i(){t=[],r=[];var i=1,n,s;for(n=0;n<255;n++){t[n]=i;s=i&128,i<<=1,i&=255;if(s===128)i^=27;i^=t[n];r[t[n]]=n}t[255]=t[0];r[0]=0;e=true}function n(e,i){var n=t[(r[e]+r[i])%255];if(e===0||i===0)n=0;return n}function s(e){var i=t[255-r[e]];if(e===0)i=0;return i}var a=false;var o;var f;var c;var u;function h(){if(!e)i();function t(e){var t,r,i;r=i=s(e);for(t=0;t<4;t++){r=(r<<1|r>>>7)&255;i^=r}i^=99;return i}o=[],f=[],c=[[],[],[],[]],u=[[],[],[],[]];for(var r=0;r<256;r++){var h=t(r);o[r]=h;f[h]=r;c[0][r]=n(2,h)<<24|h<<16|h<<8|n(3,h);u[0][h]=n(14,r)<<24|n(9,r)<<16|n(13,r)<<8|n(11,r);for(var l=1;l<4;l++){c[l][r]=c[l-1][r]>>>8|c[l-1][r]<<24;u[l][h]=u[l-1][h]>>>8|u[l-1][h]<<24}}a=true}var l=function(e,t){if(!a)h();var r=new Uint32Array(t);r.set(o,2048>>2);r.set(f,3072>>2);for(var i=0;i<4;i++){r.set(c[i],4096+1024*i>>2);r.set(u[i],8192+1024*i>>2)}function n(e,t,i,n,s,a,f,c,h){var d=r.subarray(0,60),p=r.subarray(256,256+60);d.set([t,i,n,s,a,f,c,h]);for(var b=e,m=1;b<4*e+28;b++){var v=d[b-1];if(b%e===0||e===8&&b%e===4){v=o[v>>>24]<<24^o[v>>>16&255]<<16^o[v>>>8&255]<<8^o[v&255]}if(b%e===0){v=v<<8^v>>>24^m<<24;m=m<<1^(m&128?27:0)}d[b]=d[b-e]^v}for(var y=0;y<b;y+=4){for(var w=0;w<4;w++){var v=d[b-(4+y)+(4-w)%4];if(y<4||y>=b-4){p[y+w]=v}else{p[y+w]=u[0][o[v>>>24]]^u[1][o[v>>>16&255]]^u[2][o[v>>>8&255]]^u[3][o[v&255]]}}}l.set_rounds(e+5)}var s={Uint8Array,Uint32Array};var l=function(e,t,r){"use asm";var i=0,n=0,s=0,a=0,o=0,f=0,c=0,u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0;var _=new e.Uint32Array(r),$=new e.Uint8Array(r);function C(e,t,r,o,f,c,u,h){e=e|0;t=t|0;r=r|0;o=o|0;f=f|0;c=c|0;u=u|0;h=h|0;var l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0;l=r|0x400,d=r|0x800,p=r|0xc00;f=f^_[(e|0)>>2],c=c^_[(e|4)>>2],u=u^_[(e|8)>>2],h=h^_[(e|12)>>2];for(w=16;(w|0)<=o<<4;w=w+16|0){b=_[(r|f>>22&1020)>>2]^_[(l|c>>14&1020)>>2]^_[(d|u>>6&1020)>>2]^_[(p|h<<2&1020)>>2]^_[(e|w|0)>>2],m=_[(r|c>>22&1020)>>2]^_[(l|u>>14&1020)>>2]^_[(d|h>>6&1020)>>2]^_[(p|f<<2&1020)>>2]^_[(e|w|4)>>2],v=_[(r|u>>22&1020)>>2]^_[(l|h>>14&1020)>>2]^_[(d|f>>6&1020)>>2]^_[(p|c<<2&1020)>>2]^_[(e|w|8)>>2],y=_[(r|h>>22&1020)>>2]^_[(l|f>>14&1020)>>2]^_[(d|c>>6&1020)>>2]^_[(p|u<<2&1020)>>2]^_[(e|w|12)>>2];f=b,c=m,u=v,h=y}i=_[(t|f>>22&1020)>>2]<<24^_[(t|c>>14&1020)>>2]<<16^_[(t|u>>6&1020)>>2]<<8^_[(t|h<<2&1020)>>2]^_[(e|w|0)>>2],n=_[(t|c>>22&1020)>>2]<<24^_[(t|u>>14&1020)>>2]<<16^_[(t|h>>6&1020)>>2]<<8^_[(t|f<<2&1020)>>2]^_[(e|w|4)>>2],s=_[(t|u>>22&1020)>>2]<<24^_[(t|h>>14&1020)>>2]<<16^_[(t|f>>6&1020)>>2]<<8^_[(t|c<<2&1020)>>2]^_[(e|w|8)>>2],a=_[(t|h>>22&1020)>>2]<<24^_[(t|f>>14&1020)>>2]<<16^_[(t|c>>6&1020)>>2]<<8^_[(t|u<<2&1020)>>2]^_[(e|w|12)>>2]}function P(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;C(0x0000,0x0800,0x1000,E,e,t,r,i)}function T(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var s=0;C(0x0400,0x0c00,0x2000,E,e,i,r,t);s=n,n=a,a=s}function I(e,t,r,h){e=e|0;t=t|0;r=r|0;h=h|0;C(0x0000,0x0800,0x1000,E,o^e,f^t,c^r,u^h);o=i,f=n,c=s,u=a}function x(e,t,r,h){e=e|0;t=t|0;r=r|0;h=h|0;var l=0;C(0x0400,0x0c00,0x2000,E,e,h,r,t);l=n,n=a,a=l;i=i^o,n=n^f,s=s^c,a=a^u;o=e,f=t,c=r,u=h}function N(e,t,r,h){e=e|0;t=t|0;r=r|0;h=h|0;C(0x0000,0x0800,0x1000,E,o,f,c,u);o=i=i^e,f=n=n^t,c=s=s^r,u=a=a^h}function M(e,t,r,h){e=e|0;t=t|0;r=r|0;h=h|0;C(0x0000,0x0800,0x1000,E,o,f,c,u);i=i^e,n=n^t,s=s^r,a=a^h;o=e,f=t,c=r,u=h}function k(e,t,r,h){e=e|0;t=t|0;r=r|0;h=h|0;C(0x0000,0x0800,0x1000,E,o,f,c,u);o=i,f=n,c=s,u=a;i=i^e,n=n^t,s=s^r,a=a^h}function R(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;C(0x0000,0x0800,0x1000,E,h,l,d,p);p=~y&p|y&p+1;d=~v&d|v&d+((p|0)==0);l=~m&l|m&l+((d|0)==0);h=~b&h|b&h+((l|0)==0);i=i^e;n=n^t;s=s^r;a=a^o}function B(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var n=0,s=0,a=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0;e=e^o,t=t^f,r=r^c,i=i^u;n=w|0,s=A|0,a=g|0,h=S|0;for(;(m|0)<128;m=m+1|0){if(n>>>31){l=l^e,d=d^t,p=p^r,b=b^i}n=n<<1|s>>>31,s=s<<1|a>>>31,a=a<<1|h>>>31,h=h<<1;v=i&1;i=i>>>1|r<<31,r=r>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(v)e=e^0xe1000000}o=l,f=d,c=p,u=b}function O(e){e=e|0;E=e}function D(e,t,r,o){e=e|0;t=t|0;r=r|0;o=o|0;i=e,n=t,s=r,a=o}function U(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;o=e,f=t,c=r,u=i}function j(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;h=e,l=t,d=r,p=i}function L(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;b=e,m=t,v=r,y=i}function K(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;p=~y&p|y&i,d=~v&d|v&r,l=~m&l|m&t,h=~b&h|b&e}function V(e){e=e|0;if(e&15)return-1;$[e|0]=i>>>24,$[e|1]=i>>>16&255,$[e|2]=i>>>8&255,$[e|3]=i&255,$[e|4]=n>>>24,$[e|5]=n>>>16&255,$[e|6]=n>>>8&255,$[e|7]=n&255,$[e|8]=s>>>24,$[e|9]=s>>>16&255,$[e|10]=s>>>8&255,$[e|11]=s&255,$[e|12]=a>>>24,$[e|13]=a>>>16&255,$[e|14]=a>>>8&255,$[e|15]=a&255;return 16}function H(e){e=e|0;if(e&15)return-1;$[e|0]=o>>>24,$[e|1]=o>>>16&255,$[e|2]=o>>>8&255,$[e|3]=o&255,$[e|4]=f>>>24,$[e|5]=f>>>16&255,$[e|6]=f>>>8&255,$[e|7]=f&255,$[e|8]=c>>>24,$[e|9]=c>>>16&255,$[e|10]=c>>>8&255,$[e|11]=c&255,$[e|12]=u>>>24,$[e|13]=u>>>16&255,$[e|14]=u>>>8&255,$[e|15]=u&255;return 16}function F(){P(0,0,0,0);w=i,A=n,g=s,S=a}function G(e,t,r){e=e|0;t=t|0;r=r|0;var o=0;if(t&15)return-1;while((r|0)>=16){Y[e&7]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);$[t|0]=i>>>24,$[t|1]=i>>>16&255,$[t|2]=i>>>8&255,$[t|3]=i&255,$[t|4]=n>>>24,$[t|5]=n>>>16&255,$[t|6]=n>>>8&255,$[t|7]=n&255,$[t|8]=s>>>24,$[t|9]=s>>>16&255,$[t|10]=s>>>8&255,$[t|11]=s&255,$[t|12]=a>>>24,$[t|13]=a>>>16&255,$[t|14]=a>>>8&255,$[t|15]=a&255;o=o+16|0,t=t+16|0,r=r-16|0}return o|0}function X(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;if(t&15)return-1;while((r|0)>=16){z[e&1]($[t|0]<<24|$[t|1]<<16|$[t|2]<<8|$[t|3],$[t|4]<<24|$[t|5]<<16|$[t|6]<<8|$[t|7],$[t|8]<<24|$[t|9]<<16|$[t|10]<<8|$[t|11],$[t|12]<<24|$[t|13]<<16|$[t|14]<<8|$[t|15]);i=i+16|0,t=t+16|0,r=r-16|0}return i|0}var Y=[P,T,I,x,N,M,k,R];var z=[I,B];return{set_rounds:O,set_state:D,set_iv:U,set_nonce:j,set_mask:L,set_counter:K,get_state:V,get_iv:H,gcm_init:F,cipher:G,mac:X}}(s,e,t);l.set_key=n;return l};l.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},l.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},l.MAC={CBC:0,GCM:1};l.HEAP_DATA=16384;return l}();class AES{constructor(e,t,r=true,i){this.pos=0;this.len=0;this.mode=i;this.heap=_heap_init().subarray(AES_asm.HEAP_DATA);this.asm=new AES_asm(null,this.heap.buffer);this.pos=0;this.len=0;const n=e.length;if(n!==16&&n!==24&&n!==32)throw new IllegalArgumentError("illegal key size");const s=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(n>>2,s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12),n>16?s.getUint32(16):0,n>16?s.getUint32(20):0,n>24?s.getUint32(24):0,n>24?s.getUint32(28):0);if(t!==undefined){if(t.length!==16)throw new IllegalArgumentError("illegal iv size");let e=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else{this.asm.set_iv(0,0,0,0)}this.padding=r}AES_Encrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let i=AES_asm.ENC[this.mode];let n=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let h=0;let l=new Uint8Array(u);while(f>0){h=_heap_write(r,s+a,e,o,f);a+=h;o+=h;f-=h;h=t.cipher(i,n+s,a);if(h)l.set(r.subarray(s,s+h),c);c+=h;if(h<a){s+=h;a-=h}else{s=0;a=0}}this.pos=s;this.len=a;return l}AES_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.ENC[this.mode];let i=AES_asm.HEAP_DATA;let n=this.pos;let s=this.len;let a=16-s%16;let o=s;if(this.hasOwnProperty("padding")){if(this.padding){for(let e=0;e<a;++e){t[n+s+e]=a}s+=a;o=s}else if(s%16){throw new IllegalArgumentError("data length must be a multiple of the block size")}}else{s+=a}const f=new Uint8Array(o);if(s)e.cipher(r,i+n,s);if(o)f.set(t.subarray(n,n+o));this.pos=0;this.len=0;return f}AES_Decrypt_process(e){if(!is_bytes(e))throw new TypeError("data isn't of expected type");let t=this.asm;let r=this.heap;let i=AES_asm.DEC[this.mode];let n=AES_asm.HEAP_DATA;let s=this.pos;let a=this.len;let o=0;let f=e.length||0;let c=0;let u=a+f&-16;let h=0;let l=0;if(this.padding){h=a+f-u||16;u-=h}const d=new Uint8Array(u);while(f>0){l=_heap_write(r,s+a,e,o,f);a+=l;o+=l;f-=l;l=t.cipher(i,n+s,a-(!f?h:0));if(l)d.set(r.subarray(s,s+l),c);c+=l;if(l<a){s+=l;a-=l}else{s=0;a=0}}this.pos=s;this.len=a;return d}AES_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=AES_asm.DEC[this.mode];let i=AES_asm.HEAP_DATA;let n=this.pos;let s=this.len;let a=s;if(s>0){if(s%16){if(this.hasOwnProperty("padding")){throw new IllegalArgumentError("data length must be a multiple of the block size")}else{s+=16-s%16}}e.cipher(r,i+n,s);if(this.hasOwnProperty("padding")&&this.padding){let e=t[n+a-1];if(e<1||e>16||e>a)throw new SecurityError("bad padding");let r=0;for(let i=e;i>1;i--)r|=e^t[n+a-i];if(r)throw new SecurityError("bad padding");a-=e}}const o=new Uint8Array(a);if(a>0){o.set(t.subarray(n,n+a))}this.pos=0;this.len=0;return o}}class AES_CBC extends AES{static encrypt(e,t,r=true,i){return new AES_CBC(t,i,r).encrypt(e)}static decrypt(e,t,r=true,i){return new AES_CBC(t,i,r).decrypt(e)}constructor(e,t,r=true){super(e,t,r,"CBC")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}class AES_ECB extends AES{static encrypt(e,t,r=false){return new AES_ECB(t,r).encrypt(e)}static decrypt(e,t,r=false){return new AES_ECB(t,r).decrypt(e)}constructor(e,t=false){super(e,undefined,t,"ECB")}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Decrypt_process(e);const r=this.AES_Decrypt_finish();return joinBytes(t,r)}}class AES_CTR extends AES{static encrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}static decrypt(e,t,r){return new AES_CTR(t,r).encrypt(e)}constructor(e,t){super(e,undefined,false,"CTR");delete this.padding;this.AES_CTR_set_options(t)}encrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}decrypt(e){const t=this.AES_Encrypt_process(e);const r=this.AES_Encrypt_finish();return joinBytes(t,r)}AES_CTR_set_options(e,t,r){if(r!==undefined){if(r<8||r>48)throw new IllegalArgumentError("illegal counter size");let e=Math.pow(2,r)-1;this.asm.set_mask(0,0,e/4294967296|0,e|0)}else{r=48;this.asm.set_mask(0,0,65535,4294967295)}if(e!==undefined){let t=e.length;if(!t||t>16)throw new IllegalArgumentError("illegal nonce size");let r=new DataView(new ArrayBuffer(16));new Uint8Array(r.buffer).set(e);this.asm.set_nonce(r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12))}else{throw new Error("nonce is required")}if(t!==undefined){if(t<0||t>=Math.pow(2,r))throw new IllegalArgumentError("illegal counter value");this.asm.set_counter(0,0,t/4294967296|0,t|0)}}}const _AES_GCM_data_maxLength=68719476704;class AES_GCM extends AES{constructor(e,t,r,i=16){super(e,undefined,false,"CTR");this.tagSize=i;this.gamma0=0;this.counter=1;this.asm.gcm_init();if(this.tagSize<4||this.tagSize>16)throw new IllegalArgumentError("illegal tagSize value");const n=t.length||0;const s=new Uint8Array(16);if(n!==12){this._gcm_mac_process(t);this.heap[0]=0;this.heap[1]=0;this.heap[2]=0;this.heap[3]=0;this.heap[4]=0;this.heap[5]=0;this.heap[6]=0;this.heap[7]=0;this.heap[8]=0;this.heap[9]=0;this.heap[10]=0;this.heap[11]=n>>>29;this.heap[12]=n>>>21&255;this.heap[13]=n>>>13&255;this.heap[14]=n>>>5&255;this.heap[15]=n<<3&255;this.asm.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);this.asm.get_iv(AES_asm.HEAP_DATA);this.asm.set_iv(0,0,0,0);s.set(this.heap.subarray(0,16))}else{s.set(t);s[15]=1}const a=new DataView(s.buffer);this.gamma0=a.getUint32(12);this.asm.set_nonce(a.getUint32(0),a.getUint32(4),a.getUint32(8),0);this.asm.set_mask(0,0,0,4294967295);if(r!==undefined){if(r.length>_AES_GCM_data_maxLength)throw new IllegalArgumentError("illegal adata length");if(r.length){this.adata=r;this._gcm_mac_process(r)}else{this.adata=undefined}}else{this.adata=undefined}if(this.counter<1||this.counter>4294967295)throw new RangeError("counter must be a positive 32-bit integer");this.asm.set_counter(0,0,0,this.gamma0+this.counter|0)}static encrypt(e,t,r,i,n){return new AES_GCM(t,r,i,n).encrypt(e)}static decrypt(e,t,r,i,n){return new AES_GCM(t,r,i,n).decrypt(e)}encrypt(e){return this.AES_GCM_encrypt(e)}decrypt(e){return this.AES_GCM_decrypt(e)}AES_GCM_Encrypt_process(e){let t=0;let r=e.length||0;let i=this.asm;let n=this.heap;let s=this.counter;let a=this.pos;let o=this.len;let f=0;let c=o+r&-16;let u=0;if((s-1<<4)+o+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const h=new Uint8Array(c);while(r>0){u=_heap_write(n,a+o,e,t,r);o+=u;t+=u;r-=u;u=i.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+a,o);u=i.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+a,u);if(u)h.set(n.subarray(a,a+u),f);s+=u>>>4;f+=u;if(u<o){a+=u;o-=u}else{a=0;o=0}}this.counter=s;this.pos=a;this.len=o;return h}AES_GCM_Encrypt_finish(){let e=this.asm;let t=this.heap;let r=this.counter;let i=this.tagSize;let n=this.adata;let s=this.pos;let a=this.len;const o=new Uint8Array(a+i);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA+s,a+15&-16);if(a)o.set(t.subarray(s,s+a));let f=a;for(;f&15;f++)t[s+f]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,f);const c=n!==undefined?n.length:0;const u=(r-1<<4)+a;t[0]=0;t[1]=0;t[2]=0;t[3]=c>>>29;t[4]=c>>>21;t[5]=c>>>13&255;t[6]=c>>>5&255;t[7]=c<<3&255;t[8]=t[9]=t[10]=0;t[11]=u>>>29;t[12]=u>>>21&255;t[13]=u>>>13&255;t[14]=u>>>5&255;t[15]=u<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);o.set(t.subarray(0,i),a);this.counter=1;this.pos=0;this.len=0;return o}AES_GCM_Decrypt_process(e){let t=0;let r=e.length||0;let i=this.asm;let n=this.heap;let s=this.counter;let a=this.tagSize;let o=this.pos;let f=this.len;let c=0;let u=f+r>a?f+r-a&-16:0;let h=f+r-u;let l=0;if((s-1<<4)+f+r>_AES_GCM_data_maxLength)throw new RangeError("counter overflow");const d=new Uint8Array(u);while(r>h){l=_heap_write(n,o+f,e,t,r-h);f+=l;t+=l;r-=l;l=i.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+o,l);l=i.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+o,l);if(l)d.set(n.subarray(o,o+l),c);s+=l>>>4;c+=l;o=0;f=0}if(r>0){f+=_heap_write(n,0,e,t,r)}this.counter=s;this.pos=o;this.len=f;return d}AES_GCM_Decrypt_finish(){let e=this.asm;let t=this.heap;let r=this.tagSize;let i=this.adata;let n=this.counter;let s=this.pos;let a=this.len;let o=a-r;if(a<r)throw new IllegalStateError("authentication tag not found");const f=new Uint8Array(o);const c=new Uint8Array(t.subarray(s+o,s+a));let u=o;for(;u&15;u++)t[s+u]=0;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA+s,u);e.cipher(AES_asm.DEC.CTR,AES_asm.HEAP_DATA+s,u);if(o)f.set(t.subarray(s,s+o));const h=i!==undefined?i.length:0;const l=(n-1<<4)+a-r;t[0]=0;t[1]=0;t[2]=0;t[3]=h>>>29;t[4]=h>>>21;t[5]=h>>>13&255;t[6]=h>>>5&255;t[7]=h<<3&255;t[8]=t[9]=t[10]=0;t[11]=l>>>29;t[12]=l>>>21&255;t[13]=l>>>13&255;t[14]=l>>>5&255;t[15]=l<<3&255;e.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,16);e.get_iv(AES_asm.HEAP_DATA);e.set_counter(0,0,0,this.gamma0);e.cipher(AES_asm.ENC.CTR,AES_asm.HEAP_DATA,16);let d=0;for(let e=0;e<r;++e)d|=c[e]^t[e];if(d)throw new SecurityError("data integrity check failed");this.counter=1;this.pos=0;this.len=0;return f}AES_GCM_decrypt(e){const t=this.AES_GCM_Decrypt_process(e);const r=this.AES_GCM_Decrypt_finish();const i=new Uint8Array(t.length+r.length);if(t.length)i.set(t);if(r.length)i.set(r,t.length);return i}AES_GCM_encrypt(e){const t=this.AES_GCM_Encrypt_process(e);const r=this.AES_GCM_Encrypt_finish();const i=new Uint8Array(t.length+r.length);if(t.length)i.set(t);if(r.length)i.set(r,t.length);return i}_gcm_mac_process(e){const t=this.heap;const r=this.asm;let i=0;let n=e.length||0;let s=0;while(n>0){s=_heap_write(t,0,e,i,n);i+=s;n-=s;while(s&15)t[s++]=0;r.mac(AES_asm.MAC.GCM,AES_asm.HEAP_DATA,s)}}}var bigint_asm=function(e,t,r){"use asm";var i=0;var n=new e.Uint32Array(r);var s=e.Math.imul;function a(e){e=e|0;i=e=e+31&-32;return e|0}function o(e){e=e|0;var t=0;t=i;i=t+(e+31&-32)|0;return t|0}function f(e){e=e|0;i=i-(e+31&-32)|0}function c(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;if((t|0)>(r|0)){for(;(i|0)<(e|0);i=i+4|0){n[r+i>>2]=n[t+i>>2]}}else{for(i=e-4|0;(i|0)>=0;i=i-4|0){n[r+i>>2]=n[t+i>>2]}}}function u(e,t,r){e=e|0;t=t|0;r=r|0;var i=0;for(;(i|0)<(e|0);i=i+4|0){n[r+i>>2]=t}}function h(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var s=0,a=0,o=0,f=0,c=0;if((i|0)<=0)i=t;if((i|0)<(t|0))t=i;a=1;for(;(c|0)<(t|0);c=c+4|0){s=~n[e+c>>2];o=(s&0xffff)+a|0;f=(s>>>16)+(o>>>16)|0;n[r+c>>2]=f<<16|o&0xffff;a=f>>>16}for(;(c|0)<(i|0);c=c+4|0){n[r+c>>2]=a-1|0}return a|0}function l(e,t,r,i){e=e|0;t=t|0;r=r|0;i=i|0;var s=0,a=0,o=0;if((t|0)>(i|0)){for(o=t-4|0;(o|0)>=(i|0);o=o-4|0){if(n[e+o>>2]|0)return 1}}else{for(o=i-4|0;(o|0)>=(t|0);o=o-4|0){if(n[r+o>>2]|0)return-1}}for(;(o|0)>=0;o=o-4|0){s=n[e+o>>2]|0,a=n[r+o>>2]|0;if(s>>>0<a>>>0)return-1;if(s>>>0>a>>>0)return 1}return 0}function d(e,t){e=e|0;t=t|0;var r=0;for(r=t-4|0;(r|0)>=0;r=r-4|0){if(n[e+r>>2]|0)return r+4|0}return 0}function p(e,t,r,i,s,a){e=e|0;t=t|0;r=r|0;i=i|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,h=0,l=0;if((t|0)<(i|0)){u=e,e=r,r=u;u=t,t=i,i=u}if((a|0)<=0)a=t+4|0;if((a|0)<(i|0))t=i=a;for(;(l|0)<(i|0);l=l+4|0){o=n[e+l>>2]|0;f=n[r+l>>2]|0;u=((o&0xffff)+(f&0xffff)|0)+c|0;h=((o>>>16)+(f>>>16)|0)+(u>>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>>16}for(;(l|0)<(t|0);l=l+4|0){o=n[e+l>>2]|0;u=(o&0xffff)+c|0;h=(o>>>16)+(u>>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>>16}for(;(l|0)<(a|0);l=l+4|0){n[s+l>>2]=c|0;c=0}return c|0}function b(e,t,r,i,s,a){e=e|0;t=t|0;r=r|0;i=i|0;s=s|0;a=a|0;var o=0,f=0,c=0,u=0,h=0,l=0;if((a|0)<=0)a=(t|0)>(i|0)?t+4|0:i+4|0;if((a|0)<(t|0))t=a;if((a|0)<(i|0))i=a;if((t|0)<(i|0)){for(;(l|0)<(t|0);l=l+4|0){o=n[e+l>>2]|0;f=n[r+l>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;h=((o>>>16)-(f>>>16)|0)+(u>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>16}for(;(l|0)<(i|0);l=l+4|0){f=n[r+l>>2]|0;u=c-(f&0xffff)|0;h=(u>>16)-(f>>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>16}}else{for(;(l|0)<(i|0);l=l+4|0){o=n[e+l>>2]|0;f=n[r+l>>2]|0;u=((o&0xffff)-(f&0xffff)|0)+c|0;h=((o>>>16)-(f>>>16)|0)+(u>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>16}for(;(l|0)<(t|0);l=l+4|0){o=n[e+l>>2]|0;u=(o&0xffff)+c|0;h=(o>>>16)+(u>>16)|0;n[s+l>>2]=u&0xffff|h<<16;c=h>>16}}for(;(l|0)<(a|0);l=l+4|0){n[s+l>>2]=c|0}return c|0}function m(e,t,r,i,a,o){e=e|0;t=t|0;r=r|0;i=i|0;a=a|0;o=o|0;var f=0,c=0,u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0,O=0,D=0,U=0,j=0,L=0,K=0,V=0,H=0,F=0,G=0,X=0,Y=0,z=0,W=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ie=0,ne=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0;if((t|0)>(i|0)){re=e,ie=t;e=r,t=i;r=re,i=ie}se=t+i|0;if((o|0)>(se|0)|(o|0)<=0)o=se;if((o|0)<(t|0))t=o;if((o|0)<(i|0))i=o;for(;(ae|0)<(t|0);ae=ae+32|0){oe=e+ae|0;m=n[(oe|0)>>2]|0,v=n[(oe|4)>>2]|0,y=n[(oe|8)>>2]|0,w=n[(oe|12)>>2]|0,A=n[(oe|16)>>2]|0,g=n[(oe|20)>>2]|0,S=n[(oe|24)>>2]|0,E=n[(oe|28)>>2]|0,f=m&0xffff,c=v&0xffff,u=y&0xffff,h=w&0xffff,l=A&0xffff,d=g&0xffff,p=S&0xffff,b=E&0xffff,m=m>>>16,v=v>>>16,y=y>>>16,w=w>>>16,A=A>>>16,g=g>>>16,S=S>>>16,E=E>>>16;z=W=J=q=Q=Z=ee=te=0;for(fe=0;(fe|0)<(i|0);fe=fe+32|0){ce=r+fe|0;ue=a+(ae+fe|0)|0;M=n[(ce|0)>>2]|0,k=n[(ce|4)>>2]|0,R=n[(ce|8)>>2]|0,B=n[(ce|12)>>2]|0,O=n[(ce|16)>>2]|0,D=n[(ce|20)>>2]|0,U=n[(ce|24)>>2]|0,j=n[(ce|28)>>2]|0,_=M&0xffff,$=k&0xffff,C=R&0xffff,P=B&0xffff,T=O&0xffff,I=D&0xffff,x=U&0xffff,N=j&0xffff,M=M>>>16,k=k>>>16,R=R>>>16,B=B>>>16,O=O>>>16,D=D>>>16,U=U>>>16,j=j>>>16;L=n[(ue|0)>>2]|0,K=n[(ue|4)>>2]|0,V=n[(ue|8)>>2]|0,H=n[(ue|12)>>2]|0,F=n[(ue|16)>>2]|0,G=n[(ue|20)>>2]|0,X=n[(ue|24)>>2]|0,Y=n[(ue|28)>>2]|0;re=((s(f,_)|0)+(z&0xffff)|0)+(L&0xffff)|0;ie=((s(m,_)|0)+(z>>>16)|0)+(L>>>16)|0;ne=((s(f,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;L=ne<<16|re&0xffff;re=((s(f,$)|0)+(se&0xffff)|0)+(K&0xffff)|0;ie=((s(m,$)|0)+(se>>>16)|0)+(K>>>16)|0;ne=((s(f,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;K=ne<<16|re&0xffff;re=((s(f,C)|0)+(se&0xffff)|0)+(V&0xffff)|0;ie=((s(m,C)|0)+(se>>>16)|0)+(V>>>16)|0;ne=((s(f,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;V=ne<<16|re&0xffff;re=((s(f,P)|0)+(se&0xffff)|0)+(H&0xffff)|0;ie=((s(m,P)|0)+(se>>>16)|0)+(H>>>16)|0;ne=((s(f,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;H=ne<<16|re&0xffff;re=((s(f,T)|0)+(se&0xffff)|0)+(F&0xffff)|0;ie=((s(m,T)|0)+(se>>>16)|0)+(F>>>16)|0;ne=((s(f,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;F=ne<<16|re&0xffff;re=((s(f,I)|0)+(se&0xffff)|0)+(G&0xffff)|0;ie=((s(m,I)|0)+(se>>>16)|0)+(G>>>16)|0;ne=((s(f,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(f,x)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(m,x)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(f,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(f,N)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(m,N)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(f,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(m,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;z=se;re=((s(c,_)|0)+(W&0xffff)|0)+(K&0xffff)|0;ie=((s(v,_)|0)+(W>>>16)|0)+(K>>>16)|0;ne=((s(c,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;K=ne<<16|re&0xffff;re=((s(c,$)|0)+(se&0xffff)|0)+(V&0xffff)|0;ie=((s(v,$)|0)+(se>>>16)|0)+(V>>>16)|0;ne=((s(c,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;V=ne<<16|re&0xffff;re=((s(c,C)|0)+(se&0xffff)|0)+(H&0xffff)|0;ie=((s(v,C)|0)+(se>>>16)|0)+(H>>>16)|0;ne=((s(c,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;H=ne<<16|re&0xffff;re=((s(c,P)|0)+(se&0xffff)|0)+(F&0xffff)|0;ie=((s(v,P)|0)+(se>>>16)|0)+(F>>>16)|0;ne=((s(c,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;F=ne<<16|re&0xffff;re=((s(c,T)|0)+(se&0xffff)|0)+(G&0xffff)|0;ie=((s(v,T)|0)+(se>>>16)|0)+(G>>>16)|0;ne=((s(c,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(c,I)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(v,I)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(c,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(c,x)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(v,x)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(c,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(c,N)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(v,N)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(c,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(v,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;W=se;re=((s(u,_)|0)+(J&0xffff)|0)+(V&0xffff)|0;ie=((s(y,_)|0)+(J>>>16)|0)+(V>>>16)|0;ne=((s(u,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;V=ne<<16|re&0xffff;re=((s(u,$)|0)+(se&0xffff)|0)+(H&0xffff)|0;ie=((s(y,$)|0)+(se>>>16)|0)+(H>>>16)|0;ne=((s(u,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;H=ne<<16|re&0xffff;re=((s(u,C)|0)+(se&0xffff)|0)+(F&0xffff)|0;ie=((s(y,C)|0)+(se>>>16)|0)+(F>>>16)|0;ne=((s(u,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;F=ne<<16|re&0xffff;re=((s(u,P)|0)+(se&0xffff)|0)+(G&0xffff)|0;ie=((s(y,P)|0)+(se>>>16)|0)+(G>>>16)|0;ne=((s(u,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(u,T)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(y,T)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(u,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(u,I)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(y,I)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(u,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(u,x)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(y,x)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(u,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(u,N)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(y,N)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(u,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(y,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;J=se;re=((s(h,_)|0)+(q&0xffff)|0)+(H&0xffff)|0;ie=((s(w,_)|0)+(q>>>16)|0)+(H>>>16)|0;ne=((s(h,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;H=ne<<16|re&0xffff;re=((s(h,$)|0)+(se&0xffff)|0)+(F&0xffff)|0;ie=((s(w,$)|0)+(se>>>16)|0)+(F>>>16)|0;ne=((s(h,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;F=ne<<16|re&0xffff;re=((s(h,C)|0)+(se&0xffff)|0)+(G&0xffff)|0;ie=((s(w,C)|0)+(se>>>16)|0)+(G>>>16)|0;ne=((s(h,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(h,P)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(w,P)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(h,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(h,T)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(w,T)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(h,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(h,I)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(w,I)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(h,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(h,x)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(w,x)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(h,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;re=((s(h,N)|0)+(se&0xffff)|0)+(J&0xffff)|0;ie=((s(w,N)|0)+(se>>>16)|0)+(J>>>16)|0;ne=((s(h,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(w,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;J=ne<<16|re&0xffff;q=se;re=((s(l,_)|0)+(Q&0xffff)|0)+(F&0xffff)|0;ie=((s(A,_)|0)+(Q>>>16)|0)+(F>>>16)|0;ne=((s(l,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;F=ne<<16|re&0xffff;re=((s(l,$)|0)+(se&0xffff)|0)+(G&0xffff)|0;ie=((s(A,$)|0)+(se>>>16)|0)+(G>>>16)|0;ne=((s(l,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(l,C)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(A,C)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(l,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(l,P)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(A,P)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(l,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(l,T)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(A,T)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(l,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(l,I)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(A,I)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(l,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;re=((s(l,x)|0)+(se&0xffff)|0)+(J&0xffff)|0;ie=((s(A,x)|0)+(se>>>16)|0)+(J>>>16)|0;ne=((s(l,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;J=ne<<16|re&0xffff;re=((s(l,N)|0)+(se&0xffff)|0)+(q&0xffff)|0;ie=((s(A,N)|0)+(se>>>16)|0)+(q>>>16)|0;ne=((s(l,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(A,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;q=ne<<16|re&0xffff;Q=se;re=((s(d,_)|0)+(Z&0xffff)|0)+(G&0xffff)|0;ie=((s(g,_)|0)+(Z>>>16)|0)+(G>>>16)|0;ne=((s(d,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;G=ne<<16|re&0xffff;re=((s(d,$)|0)+(se&0xffff)|0)+(X&0xffff)|0;ie=((s(g,$)|0)+(se>>>16)|0)+(X>>>16)|0;ne=((s(d,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(d,C)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(g,C)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(d,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(d,P)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(g,P)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(d,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(d,T)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(g,T)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(d,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;re=((s(d,I)|0)+(se&0xffff)|0)+(J&0xffff)|0;ie=((s(g,I)|0)+(se>>>16)|0)+(J>>>16)|0;ne=((s(d,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;J=ne<<16|re&0xffff;re=((s(d,x)|0)+(se&0xffff)|0)+(q&0xffff)|0;ie=((s(g,x)|0)+(se>>>16)|0)+(q>>>16)|0;ne=((s(d,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;q=ne<<16|re&0xffff;re=((s(d,N)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ie=((s(g,N)|0)+(se>>>16)|0)+(Q>>>16)|0;ne=((s(d,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(g,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;Q=ne<<16|re&0xffff;Z=se;re=((s(p,_)|0)+(ee&0xffff)|0)+(X&0xffff)|0;ie=((s(S,_)|0)+(ee>>>16)|0)+(X>>>16)|0;ne=((s(p,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;X=ne<<16|re&0xffff;re=((s(p,$)|0)+(se&0xffff)|0)+(Y&0xffff)|0;ie=((s(S,$)|0)+(se>>>16)|0)+(Y>>>16)|0;ne=((s(p,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(p,C)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(S,C)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(p,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(p,P)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(S,P)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(p,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;re=((s(p,T)|0)+(se&0xffff)|0)+(J&0xffff)|0;ie=((s(S,T)|0)+(se>>>16)|0)+(J>>>16)|0;ne=((s(p,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;J=ne<<16|re&0xffff;re=((s(p,I)|0)+(se&0xffff)|0)+(q&0xffff)|0;ie=((s(S,I)|0)+(se>>>16)|0)+(q>>>16)|0;ne=((s(p,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;q=ne<<16|re&0xffff;re=((s(p,x)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ie=((s(S,x)|0)+(se>>>16)|0)+(Q>>>16)|0;ne=((s(p,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;Q=ne<<16|re&0xffff;re=((s(p,N)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ie=((s(S,N)|0)+(se>>>16)|0)+(Z>>>16)|0;ne=((s(p,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(S,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;Z=ne<<16|re&0xffff;ee=se;re=((s(b,_)|0)+(te&0xffff)|0)+(Y&0xffff)|0;ie=((s(E,_)|0)+(te>>>16)|0)+(Y>>>16)|0;ne=((s(b,M)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,M)|0)+(ie>>>16)|0)+(ne>>>16)|0;Y=ne<<16|re&0xffff;re=((s(b,$)|0)+(se&0xffff)|0)+(z&0xffff)|0;ie=((s(E,$)|0)+(se>>>16)|0)+(z>>>16)|0;ne=((s(b,k)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,k)|0)+(ie>>>16)|0)+(ne>>>16)|0;z=ne<<16|re&0xffff;re=((s(b,C)|0)+(se&0xffff)|0)+(W&0xffff)|0;ie=((s(E,C)|0)+(se>>>16)|0)+(W>>>16)|0;ne=((s(b,R)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,R)|0)+(ie>>>16)|0)+(ne>>>16)|0;W=ne<<16|re&0xffff;re=((s(b,P)|0)+(se&0xffff)|0)+(J&0xffff)|0;ie=((s(E,P)|0)+(se>>>16)|0)+(J>>>16)|0;ne=((s(b,B)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,B)|0)+(ie>>>16)|0)+(ne>>>16)|0;J=ne<<16|re&0xffff;re=((s(b,T)|0)+(se&0xffff)|0)+(q&0xffff)|0;ie=((s(E,T)|0)+(se>>>16)|0)+(q>>>16)|0;ne=((s(b,O)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,O)|0)+(ie>>>16)|0)+(ne>>>16)|0;q=ne<<16|re&0xffff;re=((s(b,I)|0)+(se&0xffff)|0)+(Q&0xffff)|0;ie=((s(E,I)|0)+(se>>>16)|0)+(Q>>>16)|0;ne=((s(b,D)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,D)|0)+(ie>>>16)|0)+(ne>>>16)|0;Q=ne<<16|re&0xffff;re=((s(b,x)|0)+(se&0xffff)|0)+(Z&0xffff)|0;ie=((s(E,x)|0)+(se>>>16)|0)+(Z>>>16)|0;ne=((s(b,U)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,U)|0)+(ie>>>16)|0)+(ne>>>16)|0;Z=ne<<16|re&0xffff;re=((s(b,N)|0)+(se&0xffff)|0)+(ee&0xffff)|0;ie=((s(E,N)|0)+(se>>>16)|0)+(ee>>>16)|0;ne=((s(b,j)|0)+(ie&0xffff)|0)+(re>>>16)|0;se=((s(E,j)|0)+(ie>>>16)|0)+(ne>>>16)|0;ee=ne<<16|re&0xffff;te=se;n[(ue|0)>>2]=L,n[(ue|4)>>2]=K,n[(ue|8)>>2]=V,n[(ue|12)>>2]=H,n[(ue|16)>>2]=F,n[(ue|20)>>2]=G,n[(ue|24)>>2]=X,n[(ue|28)>>2]=Y}ue=a+(ae+fe|0)|0;n[(ue|0)>>2]=z,n[(ue|4)>>2]=W,n[(ue|8)>>2]=J,n[(ue|12)>>2]=q,n[(ue|16)>>2]=Q,n[(ue|20)>>2]=Z,n[(ue|24)>>2]=ee,n[(ue|28)>>2]=te}}function v(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,a=0,o=0,f=0,c=0,u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0,O=0,D=0,U=0,j=0,L=0,K=0,V=0,H=0,F=0,G=0,X=0,Y=0,z=0,W=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ie=0,ne=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,he=0,le=0,de=0,pe=0;for(;(ce|0)<(t|0);ce=ce+4|0){pe=r+(ce<<1)|0;d=n[e+ce>>2]|0,i=d&0xffff,d=d>>>16;Z=s(i,i)|0;ee=(s(i,d)|0)+(Z>>>17)|0;te=(s(d,d)|0)+(ee>>>15)|0;n[pe>>2]=ee<<17|Z&0x1ffff;n[(pe|4)>>2]=te}for(fe=0;(fe|0)<(t|0);fe=fe+8|0){le=e+fe|0,pe=r+(fe<<1)|0;d=n[le>>2]|0,i=d&0xffff,d=d>>>16;I=n[(le|4)>>2]|0,g=I&0xffff,I=I>>>16;Z=s(i,g)|0;ee=(s(i,I)|0)+(Z>>>16)|0;te=(s(d,g)|0)+(ee&0xffff)|0;ne=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;se=n[(pe|4)>>2]|0;Z=(se&0xffff)+((Z&0xffff)<<1)|0;te=((se>>>16)+((te&0xffff)<<1)|0)+(Z>>>16)|0;n[(pe|4)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|8)>>2]|0;Z=((se&0xffff)+((ne&0xffff)<<1)|0)+re|0;te=((se>>>16)+(ne>>>16<<1)|0)+(Z>>>16)|0;n[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;if(re){se=n[(pe|12)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;n[(pe|12)>>2]=te<<16|Z&0xffff}}for(fe=0;(fe|0)<(t|0);fe=fe+16|0){le=e+fe|0,pe=r+(fe<<1)|0;d=n[le>>2]|0,i=d&0xffff,d=d>>>16,p=n[(le|4)>>2]|0,a=p&0xffff,p=p>>>16;I=n[(le|8)>>2]|0,g=I&0xffff,I=I>>>16,x=n[(le|12)>>2]|0,S=x&0xffff,x=x>>>16;Z=s(i,g)|0;ee=s(d,g)|0;te=((s(i,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=(s(i,S)|0)+(ne&0xffff)|0;ee=(s(d,S)|0)+(ne>>>16)|0;te=((s(i,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;j=ne;Z=(s(a,g)|0)+(U&0xffff)|0;ee=(s(p,g)|0)+(U>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,S)|0)+(j&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,S)|0)+(j>>>16)|0)+(ne>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;L=ne;se=n[(pe|8)>>2]|0;Z=(se&0xffff)+((D&0xffff)<<1)|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;n[(pe|8)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|12)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;n[(pe|12)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|16)>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;n[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|20)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;n[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;for(he=24;!!re&(he|0)<32;he=he+4|0){se=n[(pe|he)>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;n[(pe|he)>>2]=te<<16|Z&0xffff;re=te>>>16}}for(fe=0;(fe|0)<(t|0);fe=fe+32|0){le=e+fe|0,pe=r+(fe<<1)|0;d=n[le>>2]|0,i=d&0xffff,d=d>>>16,p=n[(le|4)>>2]|0,a=p&0xffff,p=p>>>16,b=n[(le|8)>>2]|0,o=b&0xffff,b=b>>>16,m=n[(le|12)>>2]|0,f=m&0xffff,m=m>>>16;I=n[(le|16)>>2]|0,g=I&0xffff,I=I>>>16,x=n[(le|20)>>2]|0,S=x&0xffff,x=x>>>16,N=n[(le|24)>>2]|0,E=N&0xffff,N=N>>>16,M=n[(le|28)>>2]|0,_=M&0xffff,M=M>>>16;Z=s(i,g)|0;ee=s(d,g)|0;te=((s(i,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=(s(i,S)|0)+(ne&0xffff)|0;ee=(s(d,S)|0)+(ne>>>16)|0;te=((s(i,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=(s(i,E)|0)+(ne&0xffff)|0;ee=(s(d,E)|0)+(ne>>>16)|0;te=((s(i,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=(s(i,_)|0)+(ne&0xffff)|0;ee=(s(d,_)|0)+(ne>>>16)|0;te=((s(i,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,M)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;K=ne;Z=(s(a,g)|0)+(U&0xffff)|0;ee=(s(p,g)|0)+(U>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,S)|0)+(j&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,S)|0)+(j>>>16)|0)+(ne>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(a,E)|0)+(L&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,E)|0)+(L>>>16)|0)+(ne>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,_)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(a,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,M)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;V=ne;Z=(s(o,g)|0)+(j&0xffff)|0;ee=(s(b,g)|0)+(j>>>16)|0;te=((s(o,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,I)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(o,S)|0)+(L&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,S)|0)+(L>>>16)|0)+(ne>>>16)|0;te=((s(o,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,x)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,E)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,E)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,N)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(o,_)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,_)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(o,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,M)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;H=ne;Z=(s(f,g)|0)+(L&0xffff)|0;ee=(s(m,g)|0)+(L>>>16)|0;te=((s(f,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,I)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(f,S)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,S)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(f,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,x)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(f,E)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,E)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(f,_)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,_)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(f,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,M)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;F=ne;se=n[(pe|16)>>2]|0;Z=(se&0xffff)+((D&0xffff)<<1)|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;n[(pe|16)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|20)>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;n[(pe|20)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|24)>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;n[(pe|24)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[(pe|28)>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;n[(pe|28)>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[pe+32>>2]|0;Z=((se&0xffff)+((K&0xffff)<<1)|0)+re|0;te=((se>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;n[pe+32>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[pe+36>>2]|0;Z=((se&0xffff)+((V&0xffff)<<1)|0)+re|0;te=((se>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;n[pe+36>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[pe+40>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;n[pe+40>>2]=te<<16|Z&0xffff;re=te>>>16;se=n[pe+44>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;n[pe+44>>2]=te<<16|Z&0xffff;re=te>>>16;for(he=48;!!re&(he|0)<64;he=he+4|0){se=n[pe+he>>2]|0;Z=(se&0xffff)+re|0;te=(se>>>16)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16}}for(ae=32;(ae|0)<(t|0);ae=ae<<1){oe=ae<<1;for(fe=0;(fe|0)<(t|0);fe=fe+oe|0){pe=r+(fe<<1)|0;ie=0;for(ce=0;(ce|0)<(ae|0);ce=ce+32|0){le=(e+fe|0)+ce|0;d=n[le>>2]|0,i=d&0xffff,d=d>>>16,p=n[(le|4)>>2]|0,a=p&0xffff,p=p>>>16,b=n[(le|8)>>2]|0,o=b&0xffff,b=b>>>16,m=n[(le|12)>>2]|0,f=m&0xffff,m=m>>>16,v=n[(le|16)>>2]|0,c=v&0xffff,v=v>>>16,y=n[(le|20)>>2]|0,u=y&0xffff,y=y>>>16,w=n[(le|24)>>2]|0,h=w&0xffff,w=w>>>16,A=n[(le|28)>>2]|0,l=A&0xffff,A=A>>>16;G=X=Y=z=W=J=q=Q=re=0;for(ue=0;(ue|0)<(ae|0);ue=ue+32|0){de=((e+fe|0)+ae|0)+ue|0;I=n[de>>2]|0,g=I&0xffff,I=I>>>16,x=n[(de|4)>>2]|0,S=x&0xffff,x=x>>>16,N=n[(de|8)>>2]|0,E=N&0xffff,N=N>>>16,M=n[(de|12)>>2]|0,_=M&0xffff,M=M>>>16,k=n[(de|16)>>2]|0,$=k&0xffff,k=k>>>16,R=n[(de|20)>>2]|0,C=R&0xffff,R=R>>>16,B=n[(de|24)>>2]|0,P=B&0xffff,B=B>>>16,O=n[(de|28)>>2]|0,T=O&0xffff,O=O>>>16;D=U=j=L=K=V=H=F=0;Z=((s(i,g)|0)+(D&0xffff)|0)+(G&0xffff)|0;ee=((s(d,g)|0)+(D>>>16)|0)+(G>>>16)|0;te=((s(i,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,I)|0)+(ee>>>16)|0)+(te>>>16)|0;D=te<<16|Z&0xffff;Z=((s(i,S)|0)+(U&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,S)|0)+(U>>>16)|0)+(ne>>>16)|0;te=((s(i,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,x)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(i,E)|0)+(j&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,E)|0)+(j>>>16)|0)+(ne>>>16)|0;te=((s(i,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,N)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(i,_)|0)+(L&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,_)|0)+(L>>>16)|0)+(ne>>>16)|0;te=((s(i,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,M)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(i,$)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,$)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(i,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,k)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(i,C)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,C)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(i,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,R)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(i,P)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,P)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(i,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,B)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(i,T)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(d,T)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(i,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(d,O)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;G=ne;Z=((s(a,g)|0)+(U&0xffff)|0)+(X&0xffff)|0;ee=((s(p,g)|0)+(U>>>16)|0)+(X>>>16)|0;te=((s(a,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,I)|0)+(ee>>>16)|0)+(te>>>16)|0;U=te<<16|Z&0xffff;Z=((s(a,S)|0)+(j&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,S)|0)+(j>>>16)|0)+(ne>>>16)|0;te=((s(a,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,x)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(a,E)|0)+(L&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,E)|0)+(L>>>16)|0)+(ne>>>16)|0;te=((s(a,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,N)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(a,_)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,_)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(a,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,M)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(a,$)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,$)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(a,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,k)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(a,C)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,C)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(a,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,R)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(a,P)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,P)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(a,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,B)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(a,T)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(p,T)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(a,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(p,O)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;X=ne;Z=((s(o,g)|0)+(j&0xffff)|0)+(Y&0xffff)|0;ee=((s(b,g)|0)+(j>>>16)|0)+(Y>>>16)|0;te=((s(o,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,I)|0)+(ee>>>16)|0)+(te>>>16)|0;j=te<<16|Z&0xffff;Z=((s(o,S)|0)+(L&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,S)|0)+(L>>>16)|0)+(ne>>>16)|0;te=((s(o,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,x)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(o,E)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,E)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(o,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,N)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(o,_)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,_)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(o,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,M)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(o,$)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,$)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(o,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,k)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(o,C)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,C)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(o,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,R)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(o,P)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,P)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(o,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,B)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(o,T)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(b,T)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(o,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(b,O)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Y=ne;Z=((s(f,g)|0)+(L&0xffff)|0)+(z&0xffff)|0;ee=((s(m,g)|0)+(L>>>16)|0)+(z>>>16)|0;te=((s(f,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,I)|0)+(ee>>>16)|0)+(te>>>16)|0;L=te<<16|Z&0xffff;Z=((s(f,S)|0)+(K&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,S)|0)+(K>>>16)|0)+(ne>>>16)|0;te=((s(f,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,x)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(f,E)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,E)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(f,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,N)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(f,_)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,_)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(f,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,M)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(f,$)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,$)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(f,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,k)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(f,C)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,C)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(f,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,R)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(f,P)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,P)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(f,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,B)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(f,T)|0)+(Y&0xffff)|0)+(ne&0xffff)|0;ee=((s(m,T)|0)+(Y>>>16)|0)+(ne>>>16)|0;te=((s(f,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(m,O)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;z=ne;Z=((s(c,g)|0)+(K&0xffff)|0)+(W&0xffff)|0;ee=((s(v,g)|0)+(K>>>16)|0)+(W>>>16)|0;te=((s(c,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,I)|0)+(ee>>>16)|0)+(te>>>16)|0;K=te<<16|Z&0xffff;Z=((s(c,S)|0)+(V&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,S)|0)+(V>>>16)|0)+(ne>>>16)|0;te=((s(c,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,x)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(c,E)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,E)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(c,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,N)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(c,_)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,_)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(c,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,M)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(c,$)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,$)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(c,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,k)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(c,C)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,C)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(c,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,R)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(c,P)|0)+(Y&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,P)|0)+(Y>>>16)|0)+(ne>>>16)|0;te=((s(c,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,B)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(c,T)|0)+(z&0xffff)|0)+(ne&0xffff)|0;ee=((s(v,T)|0)+(z>>>16)|0)+(ne>>>16)|0;te=((s(c,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(v,O)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;W=ne;Z=((s(u,g)|0)+(V&0xffff)|0)+(J&0xffff)|0;ee=((s(y,g)|0)+(V>>>16)|0)+(J>>>16)|0;te=((s(u,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,I)|0)+(ee>>>16)|0)+(te>>>16)|0;V=te<<16|Z&0xffff;Z=((s(u,S)|0)+(H&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,S)|0)+(H>>>16)|0)+(ne>>>16)|0;te=((s(u,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,x)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(u,E)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,E)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(u,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,N)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(u,_)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,_)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(u,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,M)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(u,$)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,$)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(u,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,k)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(u,C)|0)+(Y&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,C)|0)+(Y>>>16)|0)+(ne>>>16)|0;te=((s(u,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,R)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(u,P)|0)+(z&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,P)|0)+(z>>>16)|0)+(ne>>>16)|0;te=((s(u,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,B)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(u,T)|0)+(W&0xffff)|0)+(ne&0xffff)|0;ee=((s(y,T)|0)+(W>>>16)|0)+(ne>>>16)|0;te=((s(u,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(y,O)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;J=ne;Z=((s(h,g)|0)+(H&0xffff)|0)+(q&0xffff)|0;ee=((s(w,g)|0)+(H>>>16)|0)+(q>>>16)|0;te=((s(h,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,I)|0)+(ee>>>16)|0)+(te>>>16)|0;H=te<<16|Z&0xffff;Z=((s(h,S)|0)+(F&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,S)|0)+(F>>>16)|0)+(ne>>>16)|0;te=((s(h,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,x)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(h,E)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,E)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(h,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,N)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(h,_)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,_)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(h,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,M)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(h,$)|0)+(Y&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,$)|0)+(Y>>>16)|0)+(ne>>>16)|0;te=((s(h,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,k)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(h,C)|0)+(z&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,C)|0)+(z>>>16)|0)+(ne>>>16)|0;te=((s(h,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,R)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(h,P)|0)+(W&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,P)|0)+(W>>>16)|0)+(ne>>>16)|0;te=((s(h,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,B)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(h,T)|0)+(J&0xffff)|0)+(ne&0xffff)|0;ee=((s(w,T)|0)+(J>>>16)|0)+(ne>>>16)|0;te=((s(h,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(w,O)|0)+(ee>>>16)|0)+(te>>>16)|0;J=te<<16|Z&0xffff;q=ne;Z=((s(l,g)|0)+(F&0xffff)|0)+(Q&0xffff)|0;ee=((s(A,g)|0)+(F>>>16)|0)+(Q>>>16)|0;te=((s(l,I)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,I)|0)+(ee>>>16)|0)+(te>>>16)|0;F=te<<16|Z&0xffff;Z=((s(l,S)|0)+(G&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,S)|0)+(G>>>16)|0)+(ne>>>16)|0;te=((s(l,x)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,x)|0)+(ee>>>16)|0)+(te>>>16)|0;G=te<<16|Z&0xffff;Z=((s(l,E)|0)+(X&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,E)|0)+(X>>>16)|0)+(ne>>>16)|0;te=((s(l,N)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,N)|0)+(ee>>>16)|0)+(te>>>16)|0;X=te<<16|Z&0xffff;Z=((s(l,_)|0)+(Y&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,_)|0)+(Y>>>16)|0)+(ne>>>16)|0;te=((s(l,M)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,M)|0)+(ee>>>16)|0)+(te>>>16)|0;Y=te<<16|Z&0xffff;Z=((s(l,$)|0)+(z&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,$)|0)+(z>>>16)|0)+(ne>>>16)|0;te=((s(l,k)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,k)|0)+(ee>>>16)|0)+(te>>>16)|0;z=te<<16|Z&0xffff;Z=((s(l,C)|0)+(W&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,C)|0)+(W>>>16)|0)+(ne>>>16)|0;te=((s(l,R)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,R)|0)+(ee>>>16)|0)+(te>>>16)|0;W=te<<16|Z&0xffff;Z=((s(l,P)|0)+(J&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,P)|0)+(J>>>16)|0)+(ne>>>16)|0;te=((s(l,B)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,B)|0)+(ee>>>16)|0)+(te>>>16)|0;J=te<<16|Z&0xffff;Z=((s(l,T)|0)+(q&0xffff)|0)+(ne&0xffff)|0;ee=((s(A,T)|0)+(q>>>16)|0)+(ne>>>16)|0;te=((s(l,O)|0)+(ee&0xffff)|0)+(Z>>>16)|0;ne=((s(A,O)|0)+(ee>>>16)|0)+(te>>>16)|0;q=te<<16|Z&0xffff;Q=ne;he=ae+(ce+ue|0)|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((D&0xffff)<<1)|0)+re|0;te=((se>>>16)+(D>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((U&0xffff)<<1)|0)+re|0;te=((se>>>16)+(U>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((j&0xffff)<<1)|0)+re|0;te=((se>>>16)+(j>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((L&0xffff)<<1)|0)+re|0;te=((se>>>16)+(L>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((K&0xffff)<<1)|0)+re|0;te=((se>>>16)+(K>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((V&0xffff)<<1)|0)+re|0;te=((se>>>16)+(V>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((H&0xffff)<<1)|0)+re|0;te=((se>>>16)+(H>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((F&0xffff)<<1)|0)+re|0;te=((se>>>16)+(F>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16}he=ae+(ce+ue|0)|0;se=n[pe+he>>2]|0;Z=(((se&0xffff)+((G&0xffff)<<1)|0)+re|0)+ie|0;te=((se>>>16)+(G>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((X&0xffff)<<1)|0)+re|0;te=((se>>>16)+(X>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((Y&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Y>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((z&0xffff)<<1)|0)+re|0;te=((se>>>16)+(z>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((W&0xffff)<<1)|0)+re|0;te=((se>>>16)+(W>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((J&0xffff)<<1)|0)+re|0;te=((se>>>16)+(J>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(q>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;re=te>>>16;he=he+4|0;se=n[pe+he>>2]|0;Z=((se&0xffff)+((Q&0xffff)<<1)|0)+re|0;te=((se>>>16)+(Q>>>16<<1)|0)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;ie=te>>>16}for(he=he+4|0;!!ie&(he|0)<oe<<1;he=he+4|0){se=n[pe+he>>2]|0;Z=(se&0xffff)+ie|0;te=(se>>>16)+(Z>>>16)|0;n[pe+he>>2]=te<<16|Z&0xffff;ie=te>>>16}}}}function y(e,t,r,i,a){e=e|0;t=t|0;r=r|0;i=i|0;a=a|0;var o=0,f=0,c=0,u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0;for(E=t-1&-4;(E|0)>=0;E=E-4|0){o=n[e+E>>2]|0;if(o){t=E;break}}for(E=i-1&-4;(E|0)>=0;E=E-4|0){f=n[r+E>>2]|0;if(f){i=E;break}}while((f&0x80000000)==0){f=f<<1;c=c+1|0}h=n[e+t>>2]|0;if(c){u=h>>>(32-c|0);for(E=t-4|0;(E|0)>=0;E=E-4|0){o=n[e+E>>2]|0;n[e+E+4>>2]=h<<c|(c?o>>>(32-c|0):0);h=o}n[e>>2]=h<<c}if(c){l=n[r+i>>2]|0;for(E=i-4|0;(E|0)>=0;E=E-4|0){f=n[r+E>>2]|0;n[r+E+4>>2]=l<<c|f>>>(32-c|0);l=f}n[r>>2]=l<<c}l=n[r+i>>2]|0;d=l>>>16,p=l&0xffff;for(E=t;(E|0)>=(i|0);E=E-4|0){_=E-i|0;h=n[e+E>>2]|0;b=(u>>>0)/(d>>>0)|0,v=(u>>>0)%(d>>>0)|0,w=s(b,p)|0;while((b|0)==0x10000|w>>>0>(v<<16|h>>>16)>>>0){b=b-1|0,v=v+d|0,w=w-p|0;if((v|0)>=0x10000)break}g=0,S=0;for($=0;($|0)<=(i|0);$=$+4|0){f=n[r+$>>2]|0;w=(s(b,f&0xffff)|0)+(g>>>16)|0;A=(s(b,f>>>16)|0)+(w>>>16)|0;f=g&0xffff|w<<16;g=A;o=n[e+_+$>>2]|0;w=((o&0xffff)-(f&0xffff)|0)+S|0;A=((o>>>16)-(f>>>16)|0)+(w>>16)|0;n[e+_+$>>2]=A<<16|w&0xffff;S=A>>16}w=((u&0xffff)-(g&0xffff)|0)+S|0;A=((u>>>16)-(g>>>16)|0)+(w>>16)|0;u=A<<16|w&0xffff;S=A>>16;if(S){b=b-1|0;S=0;for($=0;($|0)<=(i|0);$=$+4|0){f=n[r+$>>2]|0;o=n[e+_+$>>2]|0;w=(o&0xffff)+S|0;A=(o>>>16)+f+(w>>>16)|0;n[e+_+$>>2]=A<<16|w&0xffff;S=A>>>16}u=u+S|0}h=n[e+E>>2]|0;o=u<<16|h>>>16;m=(o>>>0)/(d>>>0)|0,y=(o>>>0)%(d>>>0)|0,w=s(m,p)|0;while((m|0)==0x10000|w>>>0>(y<<16|h&0xffff)>>>0){m=m-1|0,y=y+d|0,w=w-p|0;if((y|0)>=0x10000)break}g=0,S=0;for($=0;($|0)<=(i|0);$=$+4|0){f=n[r+$>>2]|0;w=(s(m,f&0xffff)|0)+(g&0xffff)|0;A=((s(m,f>>>16)|0)+(w>>>16)|0)+(g>>>16)|0;f=w&0xffff|A<<16;g=A>>>16;o=n[e+_+$>>2]|0;w=((o&0xffff)-(f&0xffff)|0)+S|0;A=((o>>>16)-(f>>>16)|0)+(w>>16)|0;S=A>>16;n[e+_+$>>2]=A<<16|w&0xffff}w=((u&0xffff)-(g&0xffff)|0)+S|0;A=((u>>>16)-(g>>>16)|0)+(w>>16)|0;S=A>>16;if(S){m=m-1|0;S=0;for($=0;($|0)<=(i|0);$=$+4|0){f=n[r+$>>2]|0;o=n[e+_+$>>2]|0;w=((o&0xffff)+(f&0xffff)|0)+S|0;A=((o>>>16)+(f>>>16)|0)+(w>>>16)|0;S=A>>>16;n[e+_+$>>2]=w&0xffff|A<<16}}n[a+_>>2]=b<<16|m;u=n[e+E>>2]|0}if(c){h=n[e>>2]|0;for(E=4;(E|0)<=(i|0);E=E+4|0){o=n[e+E>>2]|0;n[e+E-4>>2]=o<<(32-c|0)|h>>>c;h=o}n[e+i>>2]=h>>>c}}function w(e,t,r,i,a,h){e=e|0;t=t|0;r=r|0;i=i|0;a=a|0;h=h|0;var d=0,p=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0;d=o(i<<1)|0;u(i<<1,0,d);c(t,e,d);for($=0;($|0)<(i|0);$=$+4|0){m=n[d+$>>2]|0,v=m&0xffff,m=m>>>16;w=a>>>16,y=a&0xffff;A=s(v,y)|0,g=((s(v,w)|0)+(s(m,y)|0)|0)+(A>>>16)|0;v=A&0xffff,m=g&0xffff;_=0;for(C=0;(C|0)<(i|0);C=C+4|0){P=$+C|0;w=n[r+C>>2]|0,y=w&0xffff,w=w>>>16;E=n[d+P>>2]|0;A=((s(v,y)|0)+(_&0xffff)|0)+(E&0xffff)|0;g=((s(v,w)|0)+(_>>>16)|0)+(E>>>16)|0;S=((s(m,y)|0)+(g&0xffff)|0)+(A>>>16)|0;_=((s(m,w)|0)+(S>>>16)|0)+(g>>>16)|0;E=S<<16|A&0xffff;n[d+P>>2]=E}P=$+C|0;E=n[d+P>>2]|0;A=((E&0xffff)+(_&0xffff)|0)+p|0;g=((E>>>16)+(_>>>16)|0)+(A>>>16)|0;n[d+P>>2]=g<<16|A&0xffff;p=g>>>16}c(i,d+i|0,h);f(i<<1);if(p|(l(r,i,h,i)|0)<=0){b(h,i,r,i,h,i)|0}}return{sreset:a,salloc:o,sfree:f,z:u,tst:d,neg:h,cmp:l,add:p,sub:b,mul:m,sqr:v,div:y,mredc:w}};function Number_extGCD(e,t){var r=e<0?-1:1,i=t<0?-1:1,n=1,s=0,a=0,o=1,f,c,u,h;e*=r;t*=i;h=e<t;if(h){u=e;e=t,t=u;u=r;r=i;i=u}c=Math.floor(e/t),f=e-c*t;while(f){u=n-c*s,n=s,s=u;u=a-c*o,a=o,o=u;e=t,t=f;c=Math.floor(e/t),f=e-c*t}s*=r;o*=i;if(h){u=s;s=o,o=u}return{gcd:t,x:s,y:o}}function BigNumber_extGCD(e,t){let r=e.sign;let i=t.sign;if(r<0)e=e.negate();if(i<0)t=t.negate();const n=e.compare(t);if(n<0){let n=e;e=t,t=n;let s=r;r=i;i=s}var s=BigNumber.ONE,a=BigNumber.ZERO,o=t.bitLength,f=BigNumber.ZERO,c=BigNumber.ONE,u=e.bitLength,h,l,d;h=e.divide(t);while((l=h.remainder)!==BigNumber.ZERO){d=h.quotient;h=s.subtract(d.multiply(a).clamp(o)).clamp(o),s=a,a=h;h=f.subtract(d.multiply(c).clamp(u)).clamp(u),f=c,c=h;e=t,t=l;h=e.divide(t)}if(r<0)a=a.negate();if(i<0)c=c.negate();if(n<0){let e=a;a=c,c=e}return{gcd:t,x:a,y:c}}function getRandomValues(e){if(typeof process!=="undefined"){const t=require("crypto");const r=t.randomBytes(e.length);e.set(r);return}if(window.crypto&&window.crypto.getRandomValues){window.crypto.getRandomValues(e);return}if(self.crypto&&self.crypto.getRandomValues){self.crypto.getRandomValues(e);return}if(window.msCrypto&&window.msCrypto.getRandomValues){window.msCrypto.getRandomValues(e);return}throw new Error("No secure random number generator available.")}const _bigint_stdlib={Uint32Array,Math};const _bigint_heap=new Uint32Array(1048576);let _bigint_asm;function _half_imul(e,t){return e*t|0}if(_bigint_stdlib.Math.imul===undefined){_bigint_stdlib.Math.imul=_half_imul;_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer);delete _bigint_stdlib.Math.imul}else{_bigint_asm=bigint_asm(_bigint_stdlib,null,_bigint_heap.buffer)}const _BigNumber_ZERO_limbs=new Uint32Array(0);class BigNumber{constructor(e){let t=_BigNumber_ZERO_limbs;let r=0;let i=0;if(e===undefined);else{for(var n=0;!e[n];n++);r=(e.length-n)*8;if(!r)return BigNumber.ZERO;t=new Uint32Array(r+31>>5);for(var s=e.length-4;s>=n;s-=4){t[e.length-4-s>>2]=e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]}if(n-s===3){t[t.length-1]=e[n]}else if(n-s===2){t[t.length-1]=e[n]<<8|e[n+1]}else if(n-s===1){t[t.length-1]=e[n]<<16|e[n+1]<<8|e[n+2]}i=1}this.limbs=t;this.bitLength=r;this.sign=i}static fromString(e){const t=string_to_bytes(e);return new BigNumber(t)}static fromNumber(e){let t=_BigNumber_ZERO_limbs;let r=0;let i=0;var n=Math.abs(e);if(n>4294967295){t=new Uint32Array(2);t[0]=n|0;t[1]=n/4294967296|0;r=52}else if(n>0){t=new Uint32Array(1);t[0]=n;r=32}else{t=_BigNumber_ZERO_limbs;r=0}i=e<0?-1:1;return BigNumber.fromConfig({limbs:t,bitLength:r,sign:i})}static fromArrayBuffer(e){return new BigNumber(new Uint8Array(e))}static fromConfig(e){const t=new BigNumber;t.limbs=new Uint32Array(e.limbs);t.bitLength=e.bitLength;t.sign=e.sign;return t}toString(e){e=e||16;const t=this.limbs;const r=this.bitLength;let i="";if(e===16){for(var n=(r+31>>5)-1;n>=0;n--){var s=t[n].toString(16);i+="00000000".substr(s.length);i+=s}i=i.replace(/^0+/,"");if(!i.length)i="0"}else{throw new IllegalArgumentError("bad radix")}if(this.sign<0)i="-"+i;return i}toBytes(){const e=this.bitLength;const t=this.limbs;if(e===0)return new Uint8Array(0);const r=e+7>>3;const i=new Uint8Array(r);for(let e=0;e<r;e++){let n=r-e-1;i[e]=t[n>>2]>>((n&3)<<3)}return i}valueOf(){const e=this.limbs;const t=this.bitLength;const r=this.sign;if(!r)return 0;if(t<=32)return r*(e[0]>>>0);if(t<=52)return r*(4294967296*(e[1]>>>0)+(e[0]>>>0));let i,n,s=0;for(i=e.length-1;i>=0;i--){if((n=e[i])===0)continue;while((n<<s&2147483648)===0)s++;break}if(i===0)return r*(e[0]>>>0);return r*(1048576*((e[i]<<s|(s?e[i-1]>>>32-s:0))>>>0)+((e[i-1]<<s|(s&&i>1?e[i-2]>>>32-s:0))>>>12))*Math.pow(2,32*i-s-52)}clamp(e){const t=this.limbs;const r=this.bitLength;if(e>=r)return this;const i=new BigNumber;let n=e+31>>5;let s=e%32;i.limbs=new Uint32Array(t.subarray(0,n));i.bitLength=e;i.sign=this.sign;if(s)i.limbs[n-1]&=-1>>>32-s;return i}slice(e,t){const r=this.limbs;const i=this.bitLength;if(e<0)throw new RangeError("TODO");if(e>=i)return BigNumber.ZERO;if(t===undefined||t>i-e)t=i-e;const n=new BigNumber;let s=e>>5;let a=e+t+31>>5;let o=t+31>>5;let f=e%32;let c=t%32;const u=new Uint32Array(o);if(f){for(var h=0;h<a-s-1;h++){u[h]=r[s+h]>>>f|r[s+h+1]<<32-f}u[h]=r[s+h]>>>f}else{u.set(r.subarray(s,a))}if(c){u[o-1]&=-1>>>32-c}n.limbs=u;n.bitLength=t;n.sign=this.sign;return n}negate(){const e=new BigNumber;e.limbs=this.limbs;e.bitLength=this.bitLength;e.sign=-1*this.sign;return e}compare(e){var t=this.limbs,r=t.length,i=e.limbs,n=i.length,s=0;if(this.sign<e.sign)return-1;if(this.sign>e.sign)return 1;_bigint_heap.set(t,0);_bigint_heap.set(i,r);s=_bigint_asm.cmp(0,r<<2,r<<2,n<<2);return s*this.sign}add(e){if(!this.sign)return e;if(!e.sign)return this;var t=this.bitLength,r=this.limbs,i=r.length,n=this.sign,s=e.bitLength,a=e.limbs,o=a.length,f=e.sign,c,u,h,l,d=new BigNumber;c=(t>s?t:s)+(n*f>0?1:0);u=c+31>>5;_bigint_asm.sreset();var p=_bigint_asm.salloc(i<<2),b=_bigint_asm.salloc(o<<2),m=_bigint_asm.salloc(u<<2);_bigint_asm.z(m-p+(u<<2),0,p);_bigint_heap.set(r,p>>2);_bigint_heap.set(a,b>>2);if(n*f>0){_bigint_asm.add(p,i<<2,b,o<<2,m,u<<2);h=n}else if(n>f){l=_bigint_asm.sub(p,i<<2,b,o<<2,m,u<<2);h=l?f:n}else{l=_bigint_asm.sub(b,o<<2,p,i<<2,m,u<<2);h=l?n:f}if(l)_bigint_asm.neg(m,u<<2,m,u<<2);if(_bigint_asm.tst(m,u<<2)===0)return BigNumber.ZERO;d.limbs=new Uint32Array(_bigint_heap.subarray(m>>2,(m>>2)+u));d.bitLength=c;d.sign=h;return d}subtract(e){return this.add(e.negate())}square(){if(!this.sign)return BigNumber.ZERO;var e=this.bitLength,t=this.limbs,r=t.length,i,n,s=new BigNumber;i=e<<1;n=i+31>>5;_bigint_asm.sreset();var a=_bigint_asm.salloc(r<<2),o=_bigint_asm.salloc(n<<2);_bigint_asm.z(o-a+(n<<2),0,a);_bigint_heap.set(t,a>>2);_bigint_asm.sqr(a,r<<2,o);s.limbs=new Uint32Array(_bigint_heap.subarray(o>>2,(o>>2)+n));s.bitLength=i;s.sign=1;return s}divide(e){var t=this.bitLength,r=this.limbs,i=r.length,n=e.bitLength,s=e.limbs,a=s.length,o,f,c=BigNumber.ZERO,u=BigNumber.ZERO;_bigint_asm.sreset();var h=_bigint_asm.salloc(i<<2),l=_bigint_asm.salloc(a<<2),d=_bigint_asm.salloc(i<<2);_bigint_asm.z(d-h+(i<<2),0,h);_bigint_heap.set(r,h>>2);_bigint_heap.set(s,l>>2);_bigint_asm.div(h,i<<2,l,a<<2,d);o=_bigint_asm.tst(d,i<<2)>>2;if(o){c=new BigNumber;c.limbs=new Uint32Array(_bigint_heap.subarray(d>>2,(d>>2)+o));c.bitLength=t<o<<5?t:o<<5;c.sign=this.sign*e.sign}f=_bigint_asm.tst(h,a<<2)>>2;if(f){u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(h>>2,(h>>2)+f));u.bitLength=n<f<<5?n:f<<5;u.sign=this.sign}return{quotient:c,remainder:u}}multiply(e){if(!this.sign||!e.sign)return BigNumber.ZERO;var t=this.bitLength,r=this.limbs,i=r.length,n=e.bitLength,s=e.limbs,a=s.length,o,f,c=new BigNumber;o=t+n;f=o+31>>5;_bigint_asm.sreset();var u=_bigint_asm.salloc(i<<2),h=_bigint_asm.salloc(a<<2),l=_bigint_asm.salloc(f<<2);_bigint_asm.z(l-u+(f<<2),0,u);_bigint_heap.set(r,u>>2);_bigint_heap.set(s,h>>2);_bigint_asm.mul(u,i<<2,h,a<<2,l,f<<2);c.limbs=new Uint32Array(_bigint_heap.subarray(l>>2,(l>>2)+f));c.sign=this.sign*e.sign;c.bitLength=o;return c}isMillerRabinProbablePrime(e){var t=BigNumber.fromConfig(this),r=0;t.limbs[0]-=1;while(t.limbs[r>>5]===0)r+=32;while((t.limbs[r>>5]>>(r&31)&1)===0)r++;t=t.slice(r);var i=new Modulus(this),n=this.subtract(BigNumber.ONE),s=BigNumber.fromConfig(this),a=this.limbs.length-1;while(s.limbs[a]===0)a--;while(--e>=0){getRandomValues(s.limbs);if(s.limbs[0]<2)s.limbs[0]+=2;while(s.compare(n)>=0)s.limbs[a]>>>=1;var o=i.power(s,t);if(o.compare(BigNumber.ONE)===0)continue;if(o.compare(n)===0)continue;var f=r;while(--f>0){o=o.square().divide(i).remainder;if(o.compare(BigNumber.ONE)===0)return false;if(o.compare(n)===0)break}if(f===0)return false}return true}isProbablePrime(e=80){var t=this.limbs;var r=0;if((t[0]&1)===0)return false;if(e<=1)return true;var i=0,n=0,s=0;for(r=0;r<t.length;r++){var a=t[r];while(a){i+=a&3;a>>>=2}var o=t[r];while(o){n+=o&3;o>>>=2;n-=o&3;o>>>=2}var f=t[r];while(f){s+=f&15;f>>>=4;s-=f&15;f>>>=4}}if(!(i%3)||!(n%5)||!(s%17))return false;if(e<=2)return true;return this.isMillerRabinProbablePrime(e>>>1)}}BigNumber.extGCD=BigNumber_extGCD;BigNumber.ZERO=BigNumber.fromNumber(0);BigNumber.ONE=BigNumber.fromNumber(1);class Modulus extends BigNumber{constructor(e){super();this.limbs=e.limbs;this.bitLength=e.bitLength;this.sign=e.sign;if(this.valueOf()<1)throw new RangeError;if(this.bitLength<=32)return;let t;if(this.limbs[0]&1){const e=(this.bitLength+31&-32)+1;const r=new Uint32Array(e+31>>5);r[r.length-1]=1;t=new BigNumber;t.sign=1;t.bitLength=e;t.limbs=r;const i=Number_extGCD(4294967296,this.limbs[0]).y;this.coefficient=i<0?-i:4294967296-i}else{return}this.comodulus=t;this.comodulusRemainder=t.divide(this).remainder;this.comodulusRemainderSquare=t.square().divide(this).remainder}reduce(e){if(e.bitLength<=32&&this.bitLength<=32)return BigNumber.fromNumber(e.valueOf()%this.valueOf());if(e.compare(this)<0)return e;return e.divide(this).remainder}inverse(e){e=this.reduce(e);const t=BigNumber_extGCD(this,e);if(t.gcd.valueOf()!==1)throw new Error("GCD is not 1");if(t.y.sign<0)return t.y.add(this).clamp(this.bitLength);return t.y}power(e,t){let r=0;for(let e=0;e<t.limbs.length;e++){let i=t.limbs[e];while(i){if(i&1)r++;i>>>=1}}let i=8;if(t.bitLength<=4536)i=7;if(t.bitLength<=1736)i=6;if(t.bitLength<=630)i=5;if(t.bitLength<=210)i=4;if(t.bitLength<=60)i=3;if(t.bitLength<=12)i=2;if(r<=1<<i-1)i=1;e=Modulus._Montgomery_reduce(this.reduce(e).multiply(this.comodulusRemainderSquare),this);const n=Modulus._Montgomery_reduce(e.square(),this),s=new Array(1<<i-1);s[0]=e;s[1]=Modulus._Montgomery_reduce(e.multiply(n),this);for(let e=2;e<1<<i-1;e++){s[e]=Modulus._Montgomery_reduce(s[e-1].multiply(n),this)}const a=this.comodulusRemainder;let o=a;for(let e=t.limbs.length-1;e>=0;e--){let r=t.limbs[e];for(let e=32;e>0;){if(r&2147483648){let t=r>>>32-i,n=i;while((t&1)===0){t>>>=1;n--}var f=s[t>>>1];while(t){t>>>=1;if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this)}o=o!==a?Modulus._Montgomery_reduce(o.multiply(f),this):f;r<<=n,e-=n}else{if(o!==a)o=Modulus._Montgomery_reduce(o.square(),this);r<<=1,e--}}}return Modulus._Montgomery_reduce(o,this)}static _Montgomery_reduce(e,t){const r=e.limbs;const i=r.length;const n=t.limbs;const s=n.length;const a=t.coefficient;_bigint_asm.sreset();const o=_bigint_asm.salloc(i<<2),f=_bigint_asm.salloc(s<<2),c=_bigint_asm.salloc(s<<2);_bigint_asm.z(c-o+(s<<2),0,o);_bigint_heap.set(r,o>>2);_bigint_heap.set(n,f>>2);_bigint_asm.mredc(o,i<<2,f,s<<2,a,c);const u=new BigNumber;u.limbs=new Uint32Array(_bigint_heap.subarray(c>>2,(c>>2)+s));u.bitLength=t.bitLength;u.sign=1;return u}}var sha1_asm=function(e,t,r){"use asm";var i=0,n=0,s=0,a=0,o=0,f=0,c=0;var u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0;var A=new e.Uint8Array(r);function g(e,t,r,f,c,u,h,l,d,p,b,m,v,y,w,A){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;u=u|0;h=h|0;l=l|0;d=d|0;p=p|0;b=b|0;m=m|0;v=v|0;y=y|0;w=w|0;A=A|0;var g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0,O=0,D=0,U=0,j=0,L=0,K=0,V=0,H=0,F=0,G=0,X=0,Y=0,z=0,W=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ie=0,ne=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,he=0,le=0,de=0,pe=0,be=0,me=0,ve=0,ye=0,we=0,Ae=0,ge=0,Se=0,Ee=0,_e=0,$e=0,Ce=0,Pe=0,Te=0,Ie=0,xe=0,Ne=0,Me=0,ke=0,Re=0,Be=0,Oe=0,De=0;g=i;S=n;E=s;_=a;$=o;P=e+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=t+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=r+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=f+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=c+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=u+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=h+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=l+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=d+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=p+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=b+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=m+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=v+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=y+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=w+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;P=A+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=y^d^r^e;T=C<<1|C>>>31;P=T+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=w^p^f^t;I=C<<1|C>>>31;P=I+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=A^b^c^r;x=C<<1|C>>>31;P=x+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=T^m^u^f;N=C<<1|C>>>31;P=N+(g<<5|g>>>27)+$+(S&E|~S&_)+0x5a827999|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=I^v^h^c;M=C<<1|C>>>31;P=M+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=x^y^l^u;k=C<<1|C>>>31;P=k+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=N^w^d^h;R=C<<1|C>>>31;P=R+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=M^A^p^l;B=C<<1|C>>>31;P=B+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=k^T^b^d;O=C<<1|C>>>31;P=O+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=R^I^m^p;D=C<<1|C>>>31;P=D+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=B^x^v^b;U=C<<1|C>>>31;P=U+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=O^N^y^m;j=C<<1|C>>>31;P=j+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=D^M^w^v;L=C<<1|C>>>31;P=L+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=U^k^A^y;K=C<<1|C>>>31;P=K+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=j^R^T^w;V=C<<1|C>>>31;P=V+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=L^B^I^A;H=C<<1|C>>>31;P=H+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=K^O^x^T;F=C<<1|C>>>31;P=F+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=V^D^N^I;G=C<<1|C>>>31;P=G+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=H^U^M^x;X=C<<1|C>>>31;P=X+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=F^j^k^N;Y=C<<1|C>>>31;P=Y+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=G^L^R^M;z=C<<1|C>>>31;P=z+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=X^K^B^k;W=C<<1|C>>>31;P=W+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Y^V^O^R;J=C<<1|C>>>31;P=J+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=z^H^D^B;q=C<<1|C>>>31;P=q+(g<<5|g>>>27)+$+(S^E^_)+0x6ed9eba1|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=W^F^U^O;Q=C<<1|C>>>31;P=Q+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=J^G^j^D;Z=C<<1|C>>>31;P=Z+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=q^X^L^U;ee=C<<1|C>>>31;P=ee+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Q^Y^K^j;te=C<<1|C>>>31;P=te+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Z^z^V^L;re=C<<1|C>>>31;P=re+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ee^W^H^K;ie=C<<1|C>>>31;P=ie+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=te^J^F^V;ne=C<<1|C>>>31;P=ne+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=re^q^G^H;se=C<<1|C>>>31;P=se+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ie^Q^X^F;ae=C<<1|C>>>31;P=ae+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ne^Z^Y^G;oe=C<<1|C>>>31;P=oe+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=se^ee^z^X;fe=C<<1|C>>>31;P=fe+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ae^te^W^Y;ce=C<<1|C>>>31;P=ce+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=oe^re^J^z;ue=C<<1|C>>>31;P=ue+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=fe^ie^q^W;he=C<<1|C>>>31;P=he+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ce^ne^Q^J;le=C<<1|C>>>31;P=le+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ue^se^Z^q;de=C<<1|C>>>31;P=de+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=he^ae^ee^Q;pe=C<<1|C>>>31;P=pe+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=le^oe^te^Z;be=C<<1|C>>>31;P=be+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=de^fe^re^ee;me=C<<1|C>>>31;P=me+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=pe^ce^ie^te;ve=C<<1|C>>>31;P=ve+(g<<5|g>>>27)+$+(S&E|S&_|E&_)-0x70e44324|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=be^ue^ne^re;ye=C<<1|C>>>31;P=ye+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=me^he^se^ie;we=C<<1|C>>>31;P=we+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ve^le^ae^ne;Ae=C<<1|C>>>31;P=Ae+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ye^de^oe^se;ge=C<<1|C>>>31;P=ge+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=we^pe^fe^ae;Se=C<<1|C>>>31;P=Se+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Ae^be^ce^oe;Ee=C<<1|C>>>31;P=Ee+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ge^me^ue^fe;_e=C<<1|C>>>31;P=_e+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Se^ve^he^ce;$e=C<<1|C>>>31;P=$e+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Ee^ye^le^ue;Ce=C<<1|C>>>31;P=Ce+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=_e^we^de^he;Pe=C<<1|C>>>31;P=Pe+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=$e^Ae^pe^le;Te=C<<1|C>>>31;P=Te+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Ce^ge^be^de;Ie=C<<1|C>>>31;P=Ie+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Pe^Se^me^pe;xe=C<<1|C>>>31;P=xe+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Te^Ee^ve^be;Ne=C<<1|C>>>31;P=Ne+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Ie^_e^ye^me;Me=C<<1|C>>>31;P=Me+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=xe^$e^we^ve;ke=C<<1|C>>>31;P=ke+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Ne^Ce^Ae^ye;Re=C<<1|C>>>31;P=Re+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Me^Pe^ge^we;Be=C<<1|C>>>31;P=Be+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=ke^Te^Se^Ae;Oe=C<<1|C>>>31;P=Oe+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;C=Re^Ie^Ee^ge;De=C<<1|C>>>31;P=De+(g<<5|g>>>27)+$+(S^E^_)-0x359d3e2a|0;$=_;_=E;E=S<<30|S>>>2;S=g;g=P;i=i+g|0;n=n+S|0;s=s+E|0;a=a+_|0;o=o+$|0}function S(e){e=e|0;g(A[e|0]<<24|A[e|1]<<16|A[e|2]<<8|A[e|3],A[e|4]<<24|A[e|5]<<16|A[e|6]<<8|A[e|7],A[e|8]<<24|A[e|9]<<16|A[e|10]<<8|A[e|11],A[e|12]<<24|A[e|13]<<16|A[e|14]<<8|A[e|15],A[e|16]<<24|A[e|17]<<16|A[e|18]<<8|A[e|19],A[e|20]<<24|A[e|21]<<16|A[e|22]<<8|A[e|23],A[e|24]<<24|A[e|25]<<16|A[e|26]<<8|A[e|27],A[e|28]<<24|A[e|29]<<16|A[e|30]<<8|A[e|31],A[e|32]<<24|A[e|33]<<16|A[e|34]<<8|A[e|35],A[e|36]<<24|A[e|37]<<16|A[e|38]<<8|A[e|39],A[e|40]<<24|A[e|41]<<16|A[e|42]<<8|A[e|43],A[e|44]<<24|A[e|45]<<16|A[e|46]<<8|A[e|47],A[e|48]<<24|A[e|49]<<16|A[e|50]<<8|A[e|51],A[e|52]<<24|A[e|53]<<16|A[e|54]<<8|A[e|55],A[e|56]<<24|A[e|57]<<16|A[e|58]<<8|A[e|59],A[e|60]<<24|A[e|61]<<16|A[e|62]<<8|A[e|63])}function E(e){e=e|0;A[e|0]=i>>>24;A[e|1]=i>>>16&255;A[e|2]=i>>>8&255;A[e|3]=i&255;A[e|4]=n>>>24;A[e|5]=n>>>16&255;A[e|6]=n>>>8&255;A[e|7]=n&255;A[e|8]=s>>>24;A[e|9]=s>>>16&255;A[e|10]=s>>>8&255;A[e|11]=s&255;A[e|12]=a>>>24;A[e|13]=a>>>16&255;A[e|14]=a>>>8&255;A[e|15]=a&255;A[e|16]=o>>>24;A[e|17]=o>>>16&255;A[e|18]=o>>>8&255;A[e|19]=o&255}function _(){i=0x67452301;n=0xefcdab89;s=0x98badcfe;a=0x10325476;o=0xc3d2e1f0;f=c=0}function $(e,t,r,u,h,l,d){e=e|0;t=t|0;r=r|0;u=u|0;h=h|0;l=l|0;d=d|0;i=e;n=t;s=r;a=u;o=h;f=l;c=d}function C(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){S(e);e=e+64|0;t=t-64|0;r=r+64|0}f=f+r|0;if(f>>>0<r>>>0)c=c+1|0;return r|0}function P(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){i=C(e,t)|0;if((i|0)==-1)return-1;e=e+i|0;t=t-i|0}i=i+t|0;f=f+t|0;if(f>>>0<t>>>0)c=c+1|0;A[e|t]=0x80;if((t|0)>=56){for(n=t+1|0;(n|0)<64;n=n+1|0)A[e|n]=0x00;S(e);t=0;A[e|0]=0}for(n=t+1|0;(n|0)<59;n=n+1|0)A[e|n]=0;A[e|56]=c>>>21&255;A[e|57]=c>>>13&255;A[e|58]=c>>>5&255;A[e|59]=c<<3&255|f>>>29;A[e|60]=f>>>21&255;A[e|61]=f>>>13&255;A[e|62]=f>>>5&255;A[e|63]=f<<3&255;S(e);if(~r)E(r);return i|0}function T(){i=u;n=h;s=l;a=d;o=p;f=64;c=0}function I(){i=b;n=m;s=v;a=y;o=w;f=64;c=0}function x(e,t,r,A,S,E,$,C,P,T,I,x,N,M,k,R){e=e|0;t=t|0;r=r|0;A=A|0;S=S|0;E=E|0;$=$|0;C=C|0;P=P|0;T=T|0;I=I|0;x=x|0;N=N|0;M=M|0;k=k|0;R=R|0;_();g(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,A^0x5c5c5c5c,S^0x5c5c5c5c,E^0x5c5c5c5c,$^0x5c5c5c5c,C^0x5c5c5c5c,P^0x5c5c5c5c,T^0x5c5c5c5c,I^0x5c5c5c5c,x^0x5c5c5c5c,N^0x5c5c5c5c,M^0x5c5c5c5c,k^0x5c5c5c5c,R^0x5c5c5c5c);b=i;m=n;v=s;y=a;w=o;_();g(e^0x36363636,t^0x36363636,r^0x36363636,A^0x36363636,S^0x36363636,E^0x36363636,$^0x36363636,C^0x36363636,P^0x36363636,T^0x36363636,I^0x36363636,x^0x36363636,N^0x36363636,M^0x36363636,k^0x36363636,R^0x36363636);u=i;h=n;l=s;d=a;p=o;f=64;c=0}function N(e,t,r){e=e|0;t=t|0;r=r|0;var f=0,c=0,u=0,h=0,l=0,d=0;if(e&63)return-1;if(~r)if(r&31)return-1;d=P(e,t,-1)|0;f=i,c=n,u=s,h=a,l=o;I();g(f,c,u,h,l,0x80000000,0,0,0,0,0,0,0,0,0,672);if(~r)E(r);return d|0}function M(e,t,r,f,c){e=e|0;t=t|0;r=r|0;f=f|0;c=c|0;var u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0;if(e&63)return-1;if(~c)if(c&31)return-1;A[e+t|0]=r>>>24;A[e+t+1|0]=r>>>16&255;A[e+t+2|0]=r>>>8&255;A[e+t+3|0]=r&255;N(e,t+4|0,-1)|0;u=b=i,h=m=n,l=v=s,d=y=a,p=w=o;f=f-1|0;while((f|0)>0){T();g(b,m,v,y,w,0x80000000,0,0,0,0,0,0,0,0,0,672);b=i,m=n,v=s,y=a,w=o;I();g(b,m,v,y,w,0x80000000,0,0,0,0,0,0,0,0,0,672);b=i,m=n,v=s,y=a,w=o;u=u^i;h=h^n;l=l^s;d=d^a;p=p^o;f=f-1|0}i=u;n=h;s=l;a=d;o=p;if(~c)E(c);return 0}return{reset:_,init:$,process:C,finish:P,hmac_reset:T,hmac_init:x,hmac_finish:N,pbkdf2_generate_block:M}};class Hash{constructor(){this.pos=0;this.len=0}reset(){this.result=null;this.pos=0;this.len=0;this.asm.reset();return this}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");let t=this.asm;let r=this.heap;let i=this.pos;let n=this.len;let s=0;let a=e.length;let o=0;while(a>0){o=_heap_write(r,i+n,e,s,a);n+=o;s+=o;a-=o;o=t.process(i,n);i+=o;n-=o;if(!n)i=0}this.pos=i;this.len=n;return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.asm.finish(this.pos,this.len,0);this.result=new Uint8Array(this.HASH_SIZE);this.result.set(this.heap.subarray(0,this.HASH_SIZE));this.pos=0;this.len=0;return this}}const _sha1_block_size=64;const _sha1_hash_size=20;class Sha1 extends Hash{constructor(){super();this.NAME="sha1";this.BLOCK_SIZE=_sha1_block_size;this.HASH_SIZE=_sha1_hash_size;this.heap=_heap_init();this.asm=sha1_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha1.NAME="sha1";var sha256_asm=function(e,t,r){"use asm";var i=0,n=0,s=0,a=0,o=0,f=0,c=0,u=0,h=0,l=0;var d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0;var I=new e.Uint8Array(r);function x(e,t,r,h,l,d,p,b,m,v,y,w,A,g,S,E){e=e|0;t=t|0;r=r|0;h=h|0;l=l|0;d=d|0;p=p|0;b=b|0;m=m|0;v=v|0;y=y|0;w=w|0;A=A|0;g=g|0;S=S|0;E=E|0;var _=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0;_=i;$=n;C=s;P=a;T=o;I=f;x=c;N=u;N=e+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0x428a2f98|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;x=t+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0x71374491|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;I=r+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0xb5c0fbcf|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;T=h+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0xe9b5dba5|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;P=l+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x3956c25b|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;C=d+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0x59f111f1|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;$=p+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x923f82a4|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;_=b+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0xab1c5ed5|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;N=m+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0xd807aa98|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;x=v+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0x12835b01|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;I=y+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0x243185be|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;T=w+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0x550c7dc3|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;P=A+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x72be5d74|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;C=g+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0x80deb1fe|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;$=S+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x9bdc06a7|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;_=E+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0xc19bf174|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(S>>>17^S>>>19^S>>>10^S<<15^S<<13)+e+v|0;N=e+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0xe49b69c1|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+y|0;x=t+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0xefbe4786|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;I=r+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0x0fc19dc6|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+h+A|0;T=h+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0x240ca1cc|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+l+g|0;P=l+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x2de92c6f|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+d+S|0;C=d+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0x4a7484aa|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;p=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;$=p+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x5cb0a9dc|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;b=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+b+e|0;_=b+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0x76f988da|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0x983e5152|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;v=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+v+r|0;x=v+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0xa831c66d|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;y=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+y+h|0;I=y+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0xb00327c8|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+w+l|0;T=w+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0xbf597fc7|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;A=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+A+d|0;P=A+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0xc6e00bf3|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;g=(S>>>7^S>>>18^S>>>3^S<<25^S<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;C=g+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0xd5a79147|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;S=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+S+b|0;$=S+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x06ca6351|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+m|0;_=E+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0x14292967|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(S>>>17^S>>>19^S>>>10^S<<15^S<<13)+e+v|0;N=e+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0x27b70a85|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+y|0;x=t+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0x2e1b2138|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;I=r+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0x4d2c6dfc|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+h+A|0;T=h+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0x53380d13|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+l+g|0;P=l+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x650a7354|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+d+S|0;C=d+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0x766a0abb|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;p=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;$=p+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x81c2c92e|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;b=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+b+e|0;_=b+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0x92722c85|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0xa2bfe8a1|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;v=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+v+r|0;x=v+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0xa81a664b|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;y=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+y+h|0;I=y+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0xc24b8b70|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+w+l|0;T=w+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0xc76c51a3|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;A=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+A+d|0;P=A+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0xd192e819|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;g=(S>>>7^S>>>18^S>>>3^S<<25^S<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;C=g+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0xd6990624|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;S=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+S+b|0;$=S+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0xf40e3585|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+m|0;_=E+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0x106aa070|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;e=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(S>>>17^S>>>19^S>>>10^S<<15^S<<13)+e+v|0;N=e+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0x19a4c116|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;t=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+y|0;x=t+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0x1e376c08|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;r=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+r+w|0;I=r+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0x2748774c|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;h=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+h+A|0;T=h+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0x34b0bcb5|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;l=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+l+g|0;P=l+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x391c0cb3|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;d=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+d+S|0;C=d+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0x4ed8aa4a|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;p=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;$=p+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0x5b9cca4f|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;b=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+b+e|0;_=b+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0x682e6ff3|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;m=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+m+t|0;N=m+N+(T>>>6^T>>>11^T>>>25^T<<26^T<<21^T<<7)+(x^T&(I^x))+0x748f82ee|0;P=P+N|0;N=N+(_&$^C&(_^$))+(_>>>2^_>>>13^_>>>22^_<<30^_<<19^_<<10)|0;v=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+v+r|0;x=v+x+(P>>>6^P>>>11^P>>>25^P<<26^P<<21^P<<7)+(I^P&(T^I))+0x78a5636f|0;C=C+x|0;x=x+(N&_^$&(N^_))+(N>>>2^N>>>13^N>>>22^N<<30^N<<19^N<<10)|0;y=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+y+h|0;I=y+I+(C>>>6^C>>>11^C>>>25^C<<26^C<<21^C<<7)+(T^C&(P^T))+0x84c87814|0;$=$+I|0;I=I+(x&N^_&(x^N))+(x>>>2^x>>>13^x>>>22^x<<30^x<<19^x<<10)|0;w=(A>>>7^A>>>18^A>>>3^A<<25^A<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+w+l|0;T=w+T+($>>>6^$>>>11^$>>>25^$<<26^$<<21^$<<7)+(P^$&(C^P))+0x8cc70208|0;_=_+T|0;T=T+(I&x^N&(I^x))+(I>>>2^I>>>13^I>>>22^I<<30^I<<19^I<<10)|0;A=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+A+d|0;P=A+P+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(C^_&($^C))+0x90befffa|0;N=N+P|0;P=P+(T&I^x&(T^I))+(T>>>2^T>>>13^T>>>22^T<<30^T<<19^T<<10)|0;g=(S>>>7^S>>>18^S>>>3^S<<25^S<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;C=g+C+(N>>>6^N>>>11^N>>>25^N<<26^N<<21^N<<7)+($^N&(_^$))+0xa4506ceb|0;x=x+C|0;C=C+(P&T^I&(P^T))+(P>>>2^P>>>13^P>>>22^P<<30^P<<19^P<<10)|0;S=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(A>>>17^A>>>19^A>>>10^A<<15^A<<13)+S+b|0;$=S+$+(x>>>6^x>>>11^x>>>25^x<<26^x<<21^x<<7)+(_^x&(N^_))+0xbef9a3f7|0;I=I+$|0;$=$+(C&P^T&(C^P))+(C>>>2^C>>>13^C>>>22^C<<30^C<<19^C<<10)|0;E=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+m|0;_=E+_+(I>>>6^I>>>11^I>>>25^I<<26^I<<21^I<<7)+(N^I&(x^N))+0xc67178f2|0;T=T+_|0;_=_+($&C^P&($^C))+($>>>2^$>>>13^$>>>22^$<<30^$<<19^$<<10)|0;i=i+_|0;n=n+$|0;s=s+C|0;a=a+P|0;o=o+T|0;f=f+I|0;c=c+x|0;u=u+N|0}function N(e){e=e|0;x(I[e|0]<<24|I[e|1]<<16|I[e|2]<<8|I[e|3],I[e|4]<<24|I[e|5]<<16|I[e|6]<<8|I[e|7],I[e|8]<<24|I[e|9]<<16|I[e|10]<<8|I[e|11],I[e|12]<<24|I[e|13]<<16|I[e|14]<<8|I[e|15],I[e|16]<<24|I[e|17]<<16|I[e|18]<<8|I[e|19],I[e|20]<<24|I[e|21]<<16|I[e|22]<<8|I[e|23],I[e|24]<<24|I[e|25]<<16|I[e|26]<<8|I[e|27],I[e|28]<<24|I[e|29]<<16|I[e|30]<<8|I[e|31],I[e|32]<<24|I[e|33]<<16|I[e|34]<<8|I[e|35],I[e|36]<<24|I[e|37]<<16|I[e|38]<<8|I[e|39],I[e|40]<<24|I[e|41]<<16|I[e|42]<<8|I[e|43],I[e|44]<<24|I[e|45]<<16|I[e|46]<<8|I[e|47],I[e|48]<<24|I[e|49]<<16|I[e|50]<<8|I[e|51],I[e|52]<<24|I[e|53]<<16|I[e|54]<<8|I[e|55],I[e|56]<<24|I[e|57]<<16|I[e|58]<<8|I[e|59],I[e|60]<<24|I[e|61]<<16|I[e|62]<<8|I[e|63])}function M(e){e=e|0;I[e|0]=i>>>24;I[e|1]=i>>>16&255;I[e|2]=i>>>8&255;I[e|3]=i&255;I[e|4]=n>>>24;I[e|5]=n>>>16&255;I[e|6]=n>>>8&255;I[e|7]=n&255;I[e|8]=s>>>24;I[e|9]=s>>>16&255;I[e|10]=s>>>8&255;I[e|11]=s&255;I[e|12]=a>>>24;I[e|13]=a>>>16&255;I[e|14]=a>>>8&255;I[e|15]=a&255;I[e|16]=o>>>24;I[e|17]=o>>>16&255;I[e|18]=o>>>8&255;I[e|19]=o&255;I[e|20]=f>>>24;I[e|21]=f>>>16&255;I[e|22]=f>>>8&255;I[e|23]=f&255;I[e|24]=c>>>24;I[e|25]=c>>>16&255;I[e|26]=c>>>8&255;I[e|27]=c&255;I[e|28]=u>>>24;I[e|29]=u>>>16&255;I[e|30]=u>>>8&255;I[e|31]=u&255}function k(){i=0x6a09e667;n=0xbb67ae85;s=0x3c6ef372;a=0xa54ff53a;o=0x510e527f;f=0x9b05688c;c=0x1f83d9ab;u=0x5be0cd19;h=l=0}function R(e,t,r,d,p,b,m,v,y,w){e=e|0;t=t|0;r=r|0;d=d|0;p=p|0;b=b|0;m=m|0;v=v|0;y=y|0;w=w|0;i=e;n=t;s=r;a=d;o=p;f=b;c=m;u=v;h=y;l=w}function B(e,t){e=e|0;t=t|0;var r=0;if(e&63)return-1;while((t|0)>=64){N(e);e=e+64|0;t=t-64|0;r=r+64|0}h=h+r|0;if(h>>>0<r>>>0)l=l+1|0;return r|0}function O(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0;if(e&63)return-1;if(~r)if(r&31)return-1;if((t|0)>=64){i=B(e,t)|0;if((i|0)==-1)return-1;e=e+i|0;t=t-i|0}i=i+t|0;h=h+t|0;if(h>>>0<t>>>0)l=l+1|0;I[e|t]=0x80;if((t|0)>=56){for(n=t+1|0;(n|0)<64;n=n+1|0)I[e|n]=0x00;N(e);t=0;I[e|0]=0}for(n=t+1|0;(n|0)<59;n=n+1|0)I[e|n]=0;I[e|56]=l>>>21&255;I[e|57]=l>>>13&255;I[e|58]=l>>>5&255;I[e|59]=l<<3&255|h>>>29;I[e|60]=h>>>21&255;I[e|61]=h>>>13&255;I[e|62]=h>>>5&255;I[e|63]=h<<3&255;N(e);if(~r)M(r);return i|0}function D(){i=d;n=p;s=b;a=m;o=v;f=y;c=w;u=A;h=64;l=0}function U(){i=g;n=S;s=E;a=_;o=$;f=C;c=P;u=T;h=64;l=0}function j(e,t,r,I,N,M,R,B,O,D,U,j,L,K,V,H){e=e|0;t=t|0;r=r|0;I=I|0;N=N|0;M=M|0;R=R|0;B=B|0;O=O|0;D=D|0;U=U|0;j=j|0;L=L|0;K=K|0;V=V|0;H=H|0;k();x(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,I^0x5c5c5c5c,N^0x5c5c5c5c,M^0x5c5c5c5c,R^0x5c5c5c5c,B^0x5c5c5c5c,O^0x5c5c5c5c,D^0x5c5c5c5c,U^0x5c5c5c5c,j^0x5c5c5c5c,L^0x5c5c5c5c,K^0x5c5c5c5c,V^0x5c5c5c5c,H^0x5c5c5c5c);g=i;S=n;E=s;_=a;$=o;C=f;P=c;T=u;k();x(e^0x36363636,t^0x36363636,r^0x36363636,I^0x36363636,N^0x36363636,M^0x36363636,R^0x36363636,B^0x36363636,O^0x36363636,D^0x36363636,U^0x36363636,j^0x36363636,L^0x36363636,K^0x36363636,V^0x36363636,H^0x36363636);d=i;p=n;b=s;m=a;v=o;y=f;w=c;A=u;h=64;l=0}function L(e,t,r){e=e|0;t=t|0;r=r|0;var h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0;if(e&63)return-1;if(~r)if(r&31)return-1;w=O(e,t,-1)|0;h=i,l=n,d=s,p=a,b=o,m=f,v=c,y=u;U();x(h,l,d,p,b,m,v,y,0x80000000,0,0,0,0,0,0,768);if(~r)M(r);return w|0}function K(e,t,r,h,l){e=e|0;t=t|0;r=r|0;h=h|0;l=l|0;var d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0;if(e&63)return-1;if(~l)if(l&31)return-1;I[e+t|0]=r>>>24;I[e+t+1|0]=r>>>16&255;I[e+t+2|0]=r>>>8&255;I[e+t+3|0]=r&255;L(e,t+4|0,-1)|0;d=g=i,p=S=n,b=E=s,m=_=a,v=$=o,y=C=f,w=P=c,A=T=u;h=h-1|0;while((h|0)>0){D();x(g,S,E,_,$,C,P,T,0x80000000,0,0,0,0,0,0,768);g=i,S=n,E=s,_=a,$=o,C=f,P=c,T=u;U();x(g,S,E,_,$,C,P,T,0x80000000,0,0,0,0,0,0,768);g=i,S=n,E=s,_=a,$=o,C=f,P=c,T=u;d=d^i;p=p^n;b=b^s;m=m^a;v=v^o;y=y^f;w=w^c;A=A^u;h=h-1|0}i=d;n=p;s=b;a=m;o=v;f=y;c=w;u=A;if(~l)M(l);return 0}return{reset:k,init:R,process:B,finish:O,hmac_reset:D,hmac_init:j,hmac_finish:L,pbkdf2_generate_block:K}};const _sha256_block_size=64;const _sha256_hash_size=32;class Sha256 extends Hash{constructor(){super();this.NAME="sha256";this.BLOCK_SIZE=_sha256_block_size;this.HASH_SIZE=_sha256_hash_size;this.heap=_heap_init();this.asm=sha256_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha256.NAME="sha256";var sha512_asm=function(e,t,r){"use asm";var i=0,n=0,s=0,a=0,o=0,f=0,c=0,u=0,h=0,l=0,d=0,p=0,b=0,m=0,v=0,y=0,w=0,A=0;var g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0,O=0,D=0,U=0,j=0,L=0,K=0,V=0,H=0,F=0,G=0,X=0,Y=0,z=0,W=0,J=0,q=0,Q=0;var Z=new e.Uint8Array(r);function ee(e,t,r,w,A,g,S,E,_,$,C,P,T,I,x,N,M,k,R,B,O,D,U,j,L,K,V,H,F,G,X,Y){e=e|0;t=t|0;r=r|0;w=w|0;A=A|0;g=g|0;S=S|0;E=E|0;_=_|0;$=$|0;C=C|0;P=P|0;T=T|0;I=I|0;x=x|0;N=N|0;M=M|0;k=k|0;R=R|0;B=B|0;O=O|0;D=D|0;U=U|0;j=j|0;L=L|0;K=K|0;V=V|0;H=H|0;F=F|0;G=G|0;X=X|0;Y=Y|0;var z=0,W=0,J=0,q=0,Q=0,Z=0,ee=0,te=0,re=0,ie=0,ne=0,se=0,ae=0,oe=0,fe=0,ce=0,ue=0,he=0,le=0;z=i;W=n;J=s;q=a;Q=o;Z=f;ee=c;te=u;re=h;ie=l;ne=d;se=p;ae=b;oe=m;fe=v;ce=y;he=0xd728ae22+t|0;ue=0x428a2f98+e+(he>>>0<t>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x23ef65cd+w|0;ue=0x71374491+r+(he>>>0<w>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xec4d3b2f+g|0;ue=0xb5c0fbcf+A+(he>>>0<g>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x8189dbbc+E|0;ue=0xe9b5dba5+S+(he>>>0<E>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xf348b538+$|0;ue=0x3956c25b+_+(he>>>0<$>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xb605d019+P|0;ue=0x59f111f1+C+(he>>>0<P>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xaf194f9b+I|0;ue=0x923f82a4+T+(he>>>0<I>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xda6d8118+N|0;ue=0xab1c5ed5+x+(he>>>0<N>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xa3030242+k|0;ue=0xd807aa98+M+(he>>>0<k>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x45706fbe+B|0;ue=0x12835b01+R+(he>>>0<B>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x4ee4b28c+D|0;ue=0x243185be+O+(he>>>0<D>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xd5ffb4e2+j|0;ue=0x550c7dc3+U+(he>>>0<j>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xf27b896f+K|0;ue=0x72be5d74+L+(he>>>0<K>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x3b1696b1+H|0;ue=0x80deb1fe+V+(he>>>0<H>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0x25c71235+G|0;ue=0x9bdc06a7+F+(he>>>0<G>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;he=0xcf692694+Y|0;ue=0xc19bf174+X+(he>>>0<Y>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;t=t+B|0;e=e+R+(t>>>0<B>>>0?1:0)|0;le=(w>>>1|r<<31)^(w>>>8|r<<24)^(w>>>7|r<<25)|0;t=t+le|0;e=e+((r>>>1|w<<31)^(r>>>8|w<<24)^r>>>7)+(t>>>0<le>>>0?1:0)|0;le=(G>>>19|F<<13)^(G<<3|F>>>29)^(G>>>6|F<<26)|0;t=t+le|0;e=e+((F>>>19|G<<13)^(F<<3|G>>>29)^F>>>6)+(t>>>0<le>>>0?1:0)|0;he=0x9ef14ad2+t|0;ue=0xe49b69c1+e+(he>>>0<t>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;w=w+D|0;r=r+O+(w>>>0<D>>>0?1:0)|0;le=(g>>>1|A<<31)^(g>>>8|A<<24)^(g>>>7|A<<25)|0;w=w+le|0;r=r+((A>>>1|g<<31)^(A>>>8|g<<24)^A>>>7)+(w>>>0<le>>>0?1:0)|0;le=(Y>>>19|X<<13)^(Y<<3|X>>>29)^(Y>>>6|X<<26)|0;w=w+le|0;r=r+((X>>>19|Y<<13)^(X<<3|Y>>>29)^X>>>6)+(w>>>0<le>>>0?1:0)|0;he=0x384f25e3+w|0;ue=0xefbe4786+r+(he>>>0<w>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;g=g+j|0;A=A+U+(g>>>0<j>>>0?1:0)|0;le=(E>>>1|S<<31)^(E>>>8|S<<24)^(E>>>7|S<<25)|0;g=g+le|0;A=A+((S>>>1|E<<31)^(S>>>8|E<<24)^S>>>7)+(g>>>0<le>>>0?1:0)|0;le=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;g=g+le|0;A=A+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(g>>>0<le>>>0?1:0)|0;he=0x8b8cd5b5+g|0;ue=0xfc19dc6+A+(he>>>0<g>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;E=E+K|0;S=S+L+(E>>>0<K>>>0?1:0)|0;le=($>>>1|_<<31)^($>>>8|_<<24)^($>>>7|_<<25)|0;E=E+le|0;S=S+((_>>>1|$<<31)^(_>>>8|$<<24)^_>>>7)+(E>>>0<le>>>0?1:0)|0;le=(w>>>19|r<<13)^(w<<3|r>>>29)^(w>>>6|r<<26)|0;E=E+le|0;S=S+((r>>>19|w<<13)^(r<<3|w>>>29)^r>>>6)+(E>>>0<le>>>0?1:0)|0;he=0x77ac9c65+E|0;ue=0x240ca1cc+S+(he>>>0<E>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;$=$+H|0;_=_+V+($>>>0<H>>>0?1:0)|0;le=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;$=$+le|0;_=_+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+($>>>0<le>>>0?1:0)|0;le=(g>>>19|A<<13)^(g<<3|A>>>29)^(g>>>6|A<<26)|0;$=$+le|0;_=_+((A>>>19|g<<13)^(A<<3|g>>>29)^A>>>6)+($>>>0<le>>>0?1:0)|0;he=0x592b0275+$|0;ue=0x2de92c6f+_+(he>>>0<$>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;P=P+G|0;C=C+F+(P>>>0<G>>>0?1:0)|0;le=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;P=P+le|0;C=C+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+(P>>>0<le>>>0?1:0)|0;le=(E>>>19|S<<13)^(E<<3|S>>>29)^(E>>>6|S<<26)|0;P=P+le|0;C=C+((S>>>19|E<<13)^(S<<3|E>>>29)^S>>>6)+(P>>>0<le>>>0?1:0)|0;he=0x6ea6e483+P|0;ue=0x4a7484aa+C+(he>>>0<P>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;I=I+Y|0;T=T+X+(I>>>0<Y>>>0?1:0)|0;le=(N>>>1|x<<31)^(N>>>8|x<<24)^(N>>>7|x<<25)|0;I=I+le|0;T=T+((x>>>1|N<<31)^(x>>>8|N<<24)^x>>>7)+(I>>>0<le>>>0?1:0)|0;le=($>>>19|_<<13)^($<<3|_>>>29)^($>>>6|_<<26)|0;I=I+le|0;T=T+((_>>>19|$<<13)^(_<<3|$>>>29)^_>>>6)+(I>>>0<le>>>0?1:0)|0;he=0xbd41fbd4+I|0;ue=0x5cb0a9dc+T+(he>>>0<I>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;N=N+t|0;x=x+e+(N>>>0<t>>>0?1:0)|0;le=(k>>>1|M<<31)^(k>>>8|M<<24)^(k>>>7|M<<25)|0;N=N+le|0;x=x+((M>>>1|k<<31)^(M>>>8|k<<24)^M>>>7)+(N>>>0<le>>>0?1:0)|0;le=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;N=N+le|0;x=x+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(N>>>0<le>>>0?1:0)|0;he=0x831153b5+N|0;ue=0x76f988da+x+(he>>>0<N>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;k=k+w|0;M=M+r+(k>>>0<w>>>0?1:0)|0;le=(B>>>1|R<<31)^(B>>>8|R<<24)^(B>>>7|R<<25)|0;k=k+le|0;M=M+((R>>>1|B<<31)^(R>>>8|B<<24)^R>>>7)+(k>>>0<le>>>0?1:0)|0;le=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;k=k+le|0;M=M+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(k>>>0<le>>>0?1:0)|0;he=0xee66dfab+k|0;ue=0x983e5152+M+(he>>>0<k>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;B=B+g|0;R=R+A+(B>>>0<g>>>0?1:0)|0;le=(D>>>1|O<<31)^(D>>>8|O<<24)^(D>>>7|O<<25)|0;B=B+le|0;R=R+((O>>>1|D<<31)^(O>>>8|D<<24)^O>>>7)+(B>>>0<le>>>0?1:0)|0;le=(N>>>19|x<<13)^(N<<3|x>>>29)^(N>>>6|x<<26)|0;B=B+le|0;R=R+((x>>>19|N<<13)^(x<<3|N>>>29)^x>>>6)+(B>>>0<le>>>0?1:0)|0;he=0x2db43210+B|0;ue=0xa831c66d+R+(he>>>0<B>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;D=D+E|0;O=O+S+(D>>>0<E>>>0?1:0)|0;le=(j>>>1|U<<31)^(j>>>8|U<<24)^(j>>>7|U<<25)|0;D=D+le|0;O=O+((U>>>1|j<<31)^(U>>>8|j<<24)^U>>>7)+(D>>>0<le>>>0?1:0)|0;le=(k>>>19|M<<13)^(k<<3|M>>>29)^(k>>>6|M<<26)|0;D=D+le|0;O=O+((M>>>19|k<<13)^(M<<3|k>>>29)^M>>>6)+(D>>>0<le>>>0?1:0)|0;he=0x98fb213f+D|0;ue=0xb00327c8+O+(he>>>0<D>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;j=j+$|0;U=U+_+(j>>>0<$>>>0?1:0)|0;le=(K>>>1|L<<31)^(K>>>8|L<<24)^(K>>>7|L<<25)|0;j=j+le|0;U=U+((L>>>1|K<<31)^(L>>>8|K<<24)^L>>>7)+(j>>>0<le>>>0?1:0)|0;le=(B>>>19|R<<13)^(B<<3|R>>>29)^(B>>>6|R<<26)|0;j=j+le|0;U=U+((R>>>19|B<<13)^(R<<3|B>>>29)^R>>>6)+(j>>>0<le>>>0?1:0)|0;he=0xbeef0ee4+j|0;ue=0xbf597fc7+U+(he>>>0<j>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;K=K+P|0;L=L+C+(K>>>0<P>>>0?1:0)|0;le=(H>>>1|V<<31)^(H>>>8|V<<24)^(H>>>7|V<<25)|0;K=K+le|0;L=L+((V>>>1|H<<31)^(V>>>8|H<<24)^V>>>7)+(K>>>0<le>>>0?1:0)|0;le=(D>>>19|O<<13)^(D<<3|O>>>29)^(D>>>6|O<<26)|0;K=K+le|0;L=L+((O>>>19|D<<13)^(O<<3|D>>>29)^O>>>6)+(K>>>0<le>>>0?1:0)|0;he=0x3da88fc2+K|0;ue=0xc6e00bf3+L+(he>>>0<K>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;H=H+I|0;V=V+T+(H>>>0<I>>>0?1:0)|0;le=(G>>>1|F<<31)^(G>>>8|F<<24)^(G>>>7|F<<25)|0;H=H+le|0;V=V+((F>>>1|G<<31)^(F>>>8|G<<24)^F>>>7)+(H>>>0<le>>>0?1:0)|0;le=(j>>>19|U<<13)^(j<<3|U>>>29)^(j>>>6|U<<26)|0;H=H+le|0;V=V+((U>>>19|j<<13)^(U<<3|j>>>29)^U>>>6)+(H>>>0<le>>>0?1:0)|0;he=0x930aa725+H|0;ue=0xd5a79147+V+(he>>>0<H>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;G=G+N|0;F=F+x+(G>>>0<N>>>0?1:0)|0;le=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25)|0;G=G+le|0;F=F+((X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7)+(G>>>0<le>>>0?1:0)|0;le=(K>>>19|L<<13)^(K<<3|L>>>29)^(K>>>6|L<<26)|0;G=G+le|0;F=F+((L>>>19|K<<13)^(L<<3|K>>>29)^L>>>6)+(G>>>0<le>>>0?1:0)|0;he=0xe003826f+G|0;ue=0x6ca6351+F+(he>>>0<G>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;Y=Y+k|0;X=X+M+(Y>>>0<k>>>0?1:0)|0;le=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;Y=Y+le|0;X=X+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(Y>>>0<le>>>0?1:0)|0;le=(H>>>19|V<<13)^(H<<3|V>>>29)^(H>>>6|V<<26)|0;Y=Y+le|0;X=X+((V>>>19|H<<13)^(V<<3|H>>>29)^V>>>6)+(Y>>>0<le>>>0?1:0)|0;he=0xa0e6e70+Y|0;ue=0x14292967+X+(he>>>0<Y>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;t=t+B|0;e=e+R+(t>>>0<B>>>0?1:0)|0;le=(w>>>1|r<<31)^(w>>>8|r<<24)^(w>>>7|r<<25)|0;t=t+le|0;e=e+((r>>>1|w<<31)^(r>>>8|w<<24)^r>>>7)+(t>>>0<le>>>0?1:0)|0;le=(G>>>19|F<<13)^(G<<3|F>>>29)^(G>>>6|F<<26)|0;t=t+le|0;e=e+((F>>>19|G<<13)^(F<<3|G>>>29)^F>>>6)+(t>>>0<le>>>0?1:0)|0;he=0x46d22ffc+t|0;ue=0x27b70a85+e+(he>>>0<t>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;w=w+D|0;r=r+O+(w>>>0<D>>>0?1:0)|0;le=(g>>>1|A<<31)^(g>>>8|A<<24)^(g>>>7|A<<25)|0;w=w+le|0;r=r+((A>>>1|g<<31)^(A>>>8|g<<24)^A>>>7)+(w>>>0<le>>>0?1:0)|0;le=(Y>>>19|X<<13)^(Y<<3|X>>>29)^(Y>>>6|X<<26)|0;w=w+le|0;r=r+((X>>>19|Y<<13)^(X<<3|Y>>>29)^X>>>6)+(w>>>0<le>>>0?1:0)|0;he=0x5c26c926+w|0;ue=0x2e1b2138+r+(he>>>0<w>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;g=g+j|0;A=A+U+(g>>>0<j>>>0?1:0)|0;le=(E>>>1|S<<31)^(E>>>8|S<<24)^(E>>>7|S<<25)|0;g=g+le|0;A=A+((S>>>1|E<<31)^(S>>>8|E<<24)^S>>>7)+(g>>>0<le>>>0?1:0)|0;le=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;g=g+le|0;A=A+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(g>>>0<le>>>0?1:0)|0;he=0x5ac42aed+g|0;ue=0x4d2c6dfc+A+(he>>>0<g>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;E=E+K|0;S=S+L+(E>>>0<K>>>0?1:0)|0;le=($>>>1|_<<31)^($>>>8|_<<24)^($>>>7|_<<25)|0;E=E+le|0;S=S+((_>>>1|$<<31)^(_>>>8|$<<24)^_>>>7)+(E>>>0<le>>>0?1:0)|0;le=(w>>>19|r<<13)^(w<<3|r>>>29)^(w>>>6|r<<26)|0;E=E+le|0;S=S+((r>>>19|w<<13)^(r<<3|w>>>29)^r>>>6)+(E>>>0<le>>>0?1:0)|0;he=0x9d95b3df+E|0;ue=0x53380d13+S+(he>>>0<E>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;$=$+H|0;_=_+V+($>>>0<H>>>0?1:0)|0;le=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;$=$+le|0;_=_+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+($>>>0<le>>>0?1:0)|0;le=(g>>>19|A<<13)^(g<<3|A>>>29)^(g>>>6|A<<26)|0;$=$+le|0;_=_+((A>>>19|g<<13)^(A<<3|g>>>29)^A>>>6)+($>>>0<le>>>0?1:0)|0;he=0x8baf63de+$|0;ue=0x650a7354+_+(he>>>0<$>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;P=P+G|0;C=C+F+(P>>>0<G>>>0?1:0)|0;le=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;P=P+le|0;C=C+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+(P>>>0<le>>>0?1:0)|0;le=(E>>>19|S<<13)^(E<<3|S>>>29)^(E>>>6|S<<26)|0;P=P+le|0;C=C+((S>>>19|E<<13)^(S<<3|E>>>29)^S>>>6)+(P>>>0<le>>>0?1:0)|0;he=0x3c77b2a8+P|0;ue=0x766a0abb+C+(he>>>0<P>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;I=I+Y|0;T=T+X+(I>>>0<Y>>>0?1:0)|0;le=(N>>>1|x<<31)^(N>>>8|x<<24)^(N>>>7|x<<25)|0;I=I+le|0;T=T+((x>>>1|N<<31)^(x>>>8|N<<24)^x>>>7)+(I>>>0<le>>>0?1:0)|0;le=($>>>19|_<<13)^($<<3|_>>>29)^($>>>6|_<<26)|0;I=I+le|0;T=T+((_>>>19|$<<13)^(_<<3|$>>>29)^_>>>6)+(I>>>0<le>>>0?1:0)|0;he=0x47edaee6+I|0;ue=0x81c2c92e+T+(he>>>0<I>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;N=N+t|0;x=x+e+(N>>>0<t>>>0?1:0)|0;le=(k>>>1|M<<31)^(k>>>8|M<<24)^(k>>>7|M<<25)|0;N=N+le|0;x=x+((M>>>1|k<<31)^(M>>>8|k<<24)^M>>>7)+(N>>>0<le>>>0?1:0)|0;le=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;N=N+le|0;x=x+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(N>>>0<le>>>0?1:0)|0;he=0x1482353b+N|0;ue=0x92722c85+x+(he>>>0<N>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;k=k+w|0;M=M+r+(k>>>0<w>>>0?1:0)|0;le=(B>>>1|R<<31)^(B>>>8|R<<24)^(B>>>7|R<<25)|0;k=k+le|0;M=M+((R>>>1|B<<31)^(R>>>8|B<<24)^R>>>7)+(k>>>0<le>>>0?1:0)|0;le=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;k=k+le|0;M=M+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(k>>>0<le>>>0?1:0)|0;he=0x4cf10364+k|0;ue=0xa2bfe8a1+M+(he>>>0<k>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;B=B+g|0;R=R+A+(B>>>0<g>>>0?1:0)|0;le=(D>>>1|O<<31)^(D>>>8|O<<24)^(D>>>7|O<<25)|0;B=B+le|0;R=R+((O>>>1|D<<31)^(O>>>8|D<<24)^O>>>7)+(B>>>0<le>>>0?1:0)|0;le=(N>>>19|x<<13)^(N<<3|x>>>29)^(N>>>6|x<<26)|0;B=B+le|0;R=R+((x>>>19|N<<13)^(x<<3|N>>>29)^x>>>6)+(B>>>0<le>>>0?1:0)|0;he=0xbc423001+B|0;ue=0xa81a664b+R+(he>>>0<B>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;D=D+E|0;O=O+S+(D>>>0<E>>>0?1:0)|0;le=(j>>>1|U<<31)^(j>>>8|U<<24)^(j>>>7|U<<25)|0;D=D+le|0;O=O+((U>>>1|j<<31)^(U>>>8|j<<24)^U>>>7)+(D>>>0<le>>>0?1:0)|0;le=(k>>>19|M<<13)^(k<<3|M>>>29)^(k>>>6|M<<26)|0;D=D+le|0;O=O+((M>>>19|k<<13)^(M<<3|k>>>29)^M>>>6)+(D>>>0<le>>>0?1:0)|0;he=0xd0f89791+D|0;ue=0xc24b8b70+O+(he>>>0<D>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;j=j+$|0;U=U+_+(j>>>0<$>>>0?1:0)|0;le=(K>>>1|L<<31)^(K>>>8|L<<24)^(K>>>7|L<<25)|0;j=j+le|0;U=U+((L>>>1|K<<31)^(L>>>8|K<<24)^L>>>7)+(j>>>0<le>>>0?1:0)|0;le=(B>>>19|R<<13)^(B<<3|R>>>29)^(B>>>6|R<<26)|0;j=j+le|0;U=U+((R>>>19|B<<13)^(R<<3|B>>>29)^R>>>6)+(j>>>0<le>>>0?1:0)|0;he=0x654be30+j|0;ue=0xc76c51a3+U+(he>>>0<j>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;K=K+P|0;L=L+C+(K>>>0<P>>>0?1:0)|0;le=(H>>>1|V<<31)^(H>>>8|V<<24)^(H>>>7|V<<25)|0;K=K+le|0;L=L+((V>>>1|H<<31)^(V>>>8|H<<24)^V>>>7)+(K>>>0<le>>>0?1:0)|0;le=(D>>>19|O<<13)^(D<<3|O>>>29)^(D>>>6|O<<26)|0;K=K+le|0;L=L+((O>>>19|D<<13)^(O<<3|D>>>29)^O>>>6)+(K>>>0<le>>>0?1:0)|0;he=0xd6ef5218+K|0;ue=0xd192e819+L+(he>>>0<K>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;H=H+I|0;V=V+T+(H>>>0<I>>>0?1:0)|0;le=(G>>>1|F<<31)^(G>>>8|F<<24)^(G>>>7|F<<25)|0;H=H+le|0;V=V+((F>>>1|G<<31)^(F>>>8|G<<24)^F>>>7)+(H>>>0<le>>>0?1:0)|0;le=(j>>>19|U<<13)^(j<<3|U>>>29)^(j>>>6|U<<26)|0;H=H+le|0;V=V+((U>>>19|j<<13)^(U<<3|j>>>29)^U>>>6)+(H>>>0<le>>>0?1:0)|0;he=0x5565a910+H|0;ue=0xd6990624+V+(he>>>0<H>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;G=G+N|0;F=F+x+(G>>>0<N>>>0?1:0)|0;le=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25)|0;G=G+le|0;F=F+((X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7)+(G>>>0<le>>>0?1:0)|0;le=(K>>>19|L<<13)^(K<<3|L>>>29)^(K>>>6|L<<26)|0;G=G+le|0;F=F+((L>>>19|K<<13)^(L<<3|K>>>29)^L>>>6)+(G>>>0<le>>>0?1:0)|0;he=0x5771202a+G|0;ue=0xf40e3585+F+(he>>>0<G>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;Y=Y+k|0;X=X+M+(Y>>>0<k>>>0?1:0)|0;le=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;Y=Y+le|0;X=X+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(Y>>>0<le>>>0?1:0)|0;le=(H>>>19|V<<13)^(H<<3|V>>>29)^(H>>>6|V<<26)|0;Y=Y+le|0;X=X+((V>>>19|H<<13)^(V<<3|H>>>29)^V>>>6)+(Y>>>0<le>>>0?1:0)|0;he=0x32bbd1b8+Y|0;ue=0x106aa070+X+(he>>>0<Y>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;t=t+B|0;e=e+R+(t>>>0<B>>>0?1:0)|0;le=(w>>>1|r<<31)^(w>>>8|r<<24)^(w>>>7|r<<25)|0;t=t+le|0;e=e+((r>>>1|w<<31)^(r>>>8|w<<24)^r>>>7)+(t>>>0<le>>>0?1:0)|0;le=(G>>>19|F<<13)^(G<<3|F>>>29)^(G>>>6|F<<26)|0;t=t+le|0;e=e+((F>>>19|G<<13)^(F<<3|G>>>29)^F>>>6)+(t>>>0<le>>>0?1:0)|0;he=0xb8d2d0c8+t|0;ue=0x19a4c116+e+(he>>>0<t>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;w=w+D|0;r=r+O+(w>>>0<D>>>0?1:0)|0;le=(g>>>1|A<<31)^(g>>>8|A<<24)^(g>>>7|A<<25)|0;w=w+le|0;r=r+((A>>>1|g<<31)^(A>>>8|g<<24)^A>>>7)+(w>>>0<le>>>0?1:0)|0;le=(Y>>>19|X<<13)^(Y<<3|X>>>29)^(Y>>>6|X<<26)|0;w=w+le|0;r=r+((X>>>19|Y<<13)^(X<<3|Y>>>29)^X>>>6)+(w>>>0<le>>>0?1:0)|0;he=0x5141ab53+w|0;ue=0x1e376c08+r+(he>>>0<w>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;g=g+j|0;A=A+U+(g>>>0<j>>>0?1:0)|0;le=(E>>>1|S<<31)^(E>>>8|S<<24)^(E>>>7|S<<25)|0;g=g+le|0;A=A+((S>>>1|E<<31)^(S>>>8|E<<24)^S>>>7)+(g>>>0<le>>>0?1:0)|0;le=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;g=g+le|0;A=A+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(g>>>0<le>>>0?1:0)|0;he=0xdf8eeb99+g|0;ue=0x2748774c+A+(he>>>0<g>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;E=E+K|0;S=S+L+(E>>>0<K>>>0?1:0)|0;le=($>>>1|_<<31)^($>>>8|_<<24)^($>>>7|_<<25)|0;E=E+le|0;S=S+((_>>>1|$<<31)^(_>>>8|$<<24)^_>>>7)+(E>>>0<le>>>0?1:0)|0;le=(w>>>19|r<<13)^(w<<3|r>>>29)^(w>>>6|r<<26)|0;E=E+le|0;S=S+((r>>>19|w<<13)^(r<<3|w>>>29)^r>>>6)+(E>>>0<le>>>0?1:0)|0;he=0xe19b48a8+E|0;ue=0x34b0bcb5+S+(he>>>0<E>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;$=$+H|0;_=_+V+($>>>0<H>>>0?1:0)|0;le=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;$=$+le|0;_=_+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+($>>>0<le>>>0?1:0)|0;le=(g>>>19|A<<13)^(g<<3|A>>>29)^(g>>>6|A<<26)|0;$=$+le|0;_=_+((A>>>19|g<<13)^(A<<3|g>>>29)^A>>>6)+($>>>0<le>>>0?1:0)|0;he=0xc5c95a63+$|0;ue=0x391c0cb3+_+(he>>>0<$>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;P=P+G|0;C=C+F+(P>>>0<G>>>0?1:0)|0;le=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;P=P+le|0;C=C+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+(P>>>0<le>>>0?1:0)|0;le=(E>>>19|S<<13)^(E<<3|S>>>29)^(E>>>6|S<<26)|0;P=P+le|0;C=C+((S>>>19|E<<13)^(S<<3|E>>>29)^S>>>6)+(P>>>0<le>>>0?1:0)|0;he=0xe3418acb+P|0;ue=0x4ed8aa4a+C+(he>>>0<P>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;I=I+Y|0;T=T+X+(I>>>0<Y>>>0?1:0)|0;le=(N>>>1|x<<31)^(N>>>8|x<<24)^(N>>>7|x<<25)|0;I=I+le|0;T=T+((x>>>1|N<<31)^(x>>>8|N<<24)^x>>>7)+(I>>>0<le>>>0?1:0)|0;le=($>>>19|_<<13)^($<<3|_>>>29)^($>>>6|_<<26)|0;I=I+le|0;T=T+((_>>>19|$<<13)^(_<<3|$>>>29)^_>>>6)+(I>>>0<le>>>0?1:0)|0;he=0x7763e373+I|0;ue=0x5b9cca4f+T+(he>>>0<I>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;N=N+t|0;x=x+e+(N>>>0<t>>>0?1:0)|0;le=(k>>>1|M<<31)^(k>>>8|M<<24)^(k>>>7|M<<25)|0;N=N+le|0;x=x+((M>>>1|k<<31)^(M>>>8|k<<24)^M>>>7)+(N>>>0<le>>>0?1:0)|0;le=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;N=N+le|0;x=x+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(N>>>0<le>>>0?1:0)|0;he=0xd6b2b8a3+N|0;ue=0x682e6ff3+x+(he>>>0<N>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;k=k+w|0;M=M+r+(k>>>0<w>>>0?1:0)|0;le=(B>>>1|R<<31)^(B>>>8|R<<24)^(B>>>7|R<<25)|0;k=k+le|0;M=M+((R>>>1|B<<31)^(R>>>8|B<<24)^R>>>7)+(k>>>0<le>>>0?1:0)|0;le=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;k=k+le|0;M=M+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(k>>>0<le>>>0?1:0)|0;he=0x5defb2fc+k|0;ue=0x748f82ee+M+(he>>>0<k>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;B=B+g|0;R=R+A+(B>>>0<g>>>0?1:0)|0;le=(D>>>1|O<<31)^(D>>>8|O<<24)^(D>>>7|O<<25)|0;B=B+le|0;R=R+((O>>>1|D<<31)^(O>>>8|D<<24)^O>>>7)+(B>>>0<le>>>0?1:0)|0;le=(N>>>19|x<<13)^(N<<3|x>>>29)^(N>>>6|x<<26)|0;B=B+le|0;R=R+((x>>>19|N<<13)^(x<<3|N>>>29)^x>>>6)+(B>>>0<le>>>0?1:0)|0;he=0x43172f60+B|0;ue=0x78a5636f+R+(he>>>0<B>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;D=D+E|0;O=O+S+(D>>>0<E>>>0?1:0)|0;le=(j>>>1|U<<31)^(j>>>8|U<<24)^(j>>>7|U<<25)|0;D=D+le|0;O=O+((U>>>1|j<<31)^(U>>>8|j<<24)^U>>>7)+(D>>>0<le>>>0?1:0)|0;le=(k>>>19|M<<13)^(k<<3|M>>>29)^(k>>>6|M<<26)|0;D=D+le|0;O=O+((M>>>19|k<<13)^(M<<3|k>>>29)^M>>>6)+(D>>>0<le>>>0?1:0)|0;he=0xa1f0ab72+D|0;ue=0x84c87814+O+(he>>>0<D>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;j=j+$|0;U=U+_+(j>>>0<$>>>0?1:0)|0;le=(K>>>1|L<<31)^(K>>>8|L<<24)^(K>>>7|L<<25)|0;j=j+le|0;U=U+((L>>>1|K<<31)^(L>>>8|K<<24)^L>>>7)+(j>>>0<le>>>0?1:0)|0;le=(B>>>19|R<<13)^(B<<3|R>>>29)^(B>>>6|R<<26)|0;j=j+le|0;U=U+((R>>>19|B<<13)^(R<<3|B>>>29)^R>>>6)+(j>>>0<le>>>0?1:0)|0;he=0x1a6439ec+j|0;ue=0x8cc70208+U+(he>>>0<j>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;K=K+P|0;L=L+C+(K>>>0<P>>>0?1:0)|0;le=(H>>>1|V<<31)^(H>>>8|V<<24)^(H>>>7|V<<25)|0;K=K+le|0;L=L+((V>>>1|H<<31)^(V>>>8|H<<24)^V>>>7)+(K>>>0<le>>>0?1:0)|0;le=(D>>>19|O<<13)^(D<<3|O>>>29)^(D>>>6|O<<26)|0;K=K+le|0;L=L+((O>>>19|D<<13)^(O<<3|D>>>29)^O>>>6)+(K>>>0<le>>>0?1:0)|0;he=0x23631e28+K|0;ue=0x90befffa+L+(he>>>0<K>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;H=H+I|0;V=V+T+(H>>>0<I>>>0?1:0)|0;le=(G>>>1|F<<31)^(G>>>8|F<<24)^(G>>>7|F<<25)|0;H=H+le|0;V=V+((F>>>1|G<<31)^(F>>>8|G<<24)^F>>>7)+(H>>>0<le>>>0?1:0)|0;le=(j>>>19|U<<13)^(j<<3|U>>>29)^(j>>>6|U<<26)|0;H=H+le|0;V=V+((U>>>19|j<<13)^(U<<3|j>>>29)^U>>>6)+(H>>>0<le>>>0?1:0)|0;he=0xde82bde9+H|0;ue=0xa4506ceb+V+(he>>>0<H>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;G=G+N|0;F=F+x+(G>>>0<N>>>0?1:0)|0;le=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25)|0;G=G+le|0;F=F+((X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7)+(G>>>0<le>>>0?1:0)|0;le=(K>>>19|L<<13)^(K<<3|L>>>29)^(K>>>6|L<<26)|0;G=G+le|0;F=F+((L>>>19|K<<13)^(L<<3|K>>>29)^L>>>6)+(G>>>0<le>>>0?1:0)|0;he=0xb2c67915+G|0;ue=0xbef9a3f7+F+(he>>>0<G>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;Y=Y+k|0;X=X+M+(Y>>>0<k>>>0?1:0)|0;le=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;Y=Y+le|0;X=X+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(Y>>>0<le>>>0?1:0)|0;le=(H>>>19|V<<13)^(H<<3|V>>>29)^(H>>>6|V<<26)|0;Y=Y+le|0;X=X+((V>>>19|H<<13)^(V<<3|H>>>29)^V>>>6)+(Y>>>0<le>>>0?1:0)|0;he=0xe372532b+Y|0;ue=0xc67178f2+X+(he>>>0<Y>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;t=t+B|0;e=e+R+(t>>>0<B>>>0?1:0)|0;le=(w>>>1|r<<31)^(w>>>8|r<<24)^(w>>>7|r<<25)|0;t=t+le|0;e=e+((r>>>1|w<<31)^(r>>>8|w<<24)^r>>>7)+(t>>>0<le>>>0?1:0)|0;le=(G>>>19|F<<13)^(G<<3|F>>>29)^(G>>>6|F<<26)|0;t=t+le|0;e=e+((F>>>19|G<<13)^(F<<3|G>>>29)^F>>>6)+(t>>>0<le>>>0?1:0)|0;he=0xea26619c+t|0;ue=0xca273ece+e+(he>>>0<t>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;w=w+D|0;r=r+O+(w>>>0<D>>>0?1:0)|0;le=(g>>>1|A<<31)^(g>>>8|A<<24)^(g>>>7|A<<25)|0;w=w+le|0;r=r+((A>>>1|g<<31)^(A>>>8|g<<24)^A>>>7)+(w>>>0<le>>>0?1:0)|0;le=(Y>>>19|X<<13)^(Y<<3|X>>>29)^(Y>>>6|X<<26)|0;w=w+le|0;r=r+((X>>>19|Y<<13)^(X<<3|Y>>>29)^X>>>6)+(w>>>0<le>>>0?1:0)|0;he=0x21c0c207+w|0;ue=0xd186b8c7+r+(he>>>0<w>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;g=g+j|0;A=A+U+(g>>>0<j>>>0?1:0)|0;le=(E>>>1|S<<31)^(E>>>8|S<<24)^(E>>>7|S<<25)|0;g=g+le|0;A=A+((S>>>1|E<<31)^(S>>>8|E<<24)^S>>>7)+(g>>>0<le>>>0?1:0)|0;le=(t>>>19|e<<13)^(t<<3|e>>>29)^(t>>>6|e<<26)|0;g=g+le|0;A=A+((e>>>19|t<<13)^(e<<3|t>>>29)^e>>>6)+(g>>>0<le>>>0?1:0)|0;he=0xcde0eb1e+g|0;ue=0xeada7dd6+A+(he>>>0<g>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;E=E+K|0;S=S+L+(E>>>0<K>>>0?1:0)|0;le=($>>>1|_<<31)^($>>>8|_<<24)^($>>>7|_<<25)|0;E=E+le|0;S=S+((_>>>1|$<<31)^(_>>>8|$<<24)^_>>>7)+(E>>>0<le>>>0?1:0)|0;le=(w>>>19|r<<13)^(w<<3|r>>>29)^(w>>>6|r<<26)|0;E=E+le|0;S=S+((r>>>19|w<<13)^(r<<3|w>>>29)^r>>>6)+(E>>>0<le>>>0?1:0)|0;he=0xee6ed178+E|0;ue=0xf57d4f7f+S+(he>>>0<E>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;$=$+H|0;_=_+V+($>>>0<H>>>0?1:0)|0;le=(P>>>1|C<<31)^(P>>>8|C<<24)^(P>>>7|C<<25)|0;$=$+le|0;_=_+((C>>>1|P<<31)^(C>>>8|P<<24)^C>>>7)+($>>>0<le>>>0?1:0)|0;le=(g>>>19|A<<13)^(g<<3|A>>>29)^(g>>>6|A<<26)|0;$=$+le|0;_=_+((A>>>19|g<<13)^(A<<3|g>>>29)^A>>>6)+($>>>0<le>>>0?1:0)|0;he=0x72176fba+$|0;ue=0x6f067aa+_+(he>>>0<$>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;P=P+G|0;C=C+F+(P>>>0<G>>>0?1:0)|0;le=(I>>>1|T<<31)^(I>>>8|T<<24)^(I>>>7|T<<25)|0;P=P+le|0;C=C+((T>>>1|I<<31)^(T>>>8|I<<24)^T>>>7)+(P>>>0<le>>>0?1:0)|0;le=(E>>>19|S<<13)^(E<<3|S>>>29)^(E>>>6|S<<26)|0;P=P+le|0;C=C+((S>>>19|E<<13)^(S<<3|E>>>29)^S>>>6)+(P>>>0<le>>>0?1:0)|0;he=0xa2c898a6+P|0;ue=0xa637dc5+C+(he>>>0<P>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;I=I+Y|0;T=T+X+(I>>>0<Y>>>0?1:0)|0;le=(N>>>1|x<<31)^(N>>>8|x<<24)^(N>>>7|x<<25)|0;I=I+le|0;T=T+((x>>>1|N<<31)^(x>>>8|N<<24)^x>>>7)+(I>>>0<le>>>0?1:0)|0;le=($>>>19|_<<13)^($<<3|_>>>29)^($>>>6|_<<26)|0;I=I+le|0;T=T+((_>>>19|$<<13)^(_<<3|$>>>29)^_>>>6)+(I>>>0<le>>>0?1:0)|0;he=0xbef90dae+I|0;ue=0x113f9804+T+(he>>>0<I>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;N=N+t|0;x=x+e+(N>>>0<t>>>0?1:0)|0;le=(k>>>1|M<<31)^(k>>>8|M<<24)^(k>>>7|M<<25)|0;N=N+le|0;x=x+((M>>>1|k<<31)^(M>>>8|k<<24)^M>>>7)+(N>>>0<le>>>0?1:0)|0;le=(P>>>19|C<<13)^(P<<3|C>>>29)^(P>>>6|C<<26)|0;N=N+le|0;x=x+((C>>>19|P<<13)^(C<<3|P>>>29)^C>>>6)+(N>>>0<le>>>0?1:0)|0;he=0x131c471b+N|0;ue=0x1b710b35+x+(he>>>0<N>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;k=k+w|0;M=M+r+(k>>>0<w>>>0?1:0)|0;le=(B>>>1|R<<31)^(B>>>8|R<<24)^(B>>>7|R<<25)|0;k=k+le|0;M=M+((R>>>1|B<<31)^(R>>>8|B<<24)^R>>>7)+(k>>>0<le>>>0?1:0)|0;le=(I>>>19|T<<13)^(I<<3|T>>>29)^(I>>>6|T<<26)|0;k=k+le|0;M=M+((T>>>19|I<<13)^(T<<3|I>>>29)^T>>>6)+(k>>>0<le>>>0?1:0)|0;he=0x23047d84+k|0;ue=0x28db77f5+M+(he>>>0<k>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;B=B+g|0;R=R+A+(B>>>0<g>>>0?1:0)|0;le=(D>>>1|O<<31)^(D>>>8|O<<24)^(D>>>7|O<<25)|0;B=B+le|0;R=R+((O>>>1|D<<31)^(O>>>8|D<<24)^O>>>7)+(B>>>0<le>>>0?1:0)|0;le=(N>>>19|x<<13)^(N<<3|x>>>29)^(N>>>6|x<<26)|0;B=B+le|0;R=R+((x>>>19|N<<13)^(x<<3|N>>>29)^x>>>6)+(B>>>0<le>>>0?1:0)|0;he=0x40c72493+B|0;ue=0x32caab7b+R+(he>>>0<B>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;D=D+E|0;O=O+S+(D>>>0<E>>>0?1:0)|0;le=(j>>>1|U<<31)^(j>>>8|U<<24)^(j>>>7|U<<25)|0;D=D+le|0;O=O+((U>>>1|j<<31)^(U>>>8|j<<24)^U>>>7)+(D>>>0<le>>>0?1:0)|0;le=(k>>>19|M<<13)^(k<<3|M>>>29)^(k>>>6|M<<26)|0;D=D+le|0;O=O+((M>>>19|k<<13)^(M<<3|k>>>29)^M>>>6)+(D>>>0<le>>>0?1:0)|0;he=0x15c9bebc+D|0;ue=0x3c9ebe0a+O+(he>>>0<D>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;j=j+$|0;U=U+_+(j>>>0<$>>>0?1:0)|0;le=(K>>>1|L<<31)^(K>>>8|L<<24)^(K>>>7|L<<25)|0;j=j+le|0;U=U+((L>>>1|K<<31)^(L>>>8|K<<24)^L>>>7)+(j>>>0<le>>>0?1:0)|0;le=(B>>>19|R<<13)^(B<<3|R>>>29)^(B>>>6|R<<26)|0;j=j+le|0;U=U+((R>>>19|B<<13)^(R<<3|B>>>29)^R>>>6)+(j>>>0<le>>>0?1:0)|0;he=0x9c100d4c+j|0;ue=0x431d67c4+U+(he>>>0<j>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;K=K+P|0;L=L+C+(K>>>0<P>>>0?1:0)|0;le=(H>>>1|V<<31)^(H>>>8|V<<24)^(H>>>7|V<<25)|0;K=K+le|0;L=L+((V>>>1|H<<31)^(V>>>8|H<<24)^V>>>7)+(K>>>0<le>>>0?1:0)|0;le=(D>>>19|O<<13)^(D<<3|O>>>29)^(D>>>6|O<<26)|0;K=K+le|0;L=L+((O>>>19|D<<13)^(O<<3|D>>>29)^O>>>6)+(K>>>0<le>>>0?1:0)|0;he=0xcb3e42b6+K|0;ue=0x4cc5d4be+L+(he>>>0<K>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;H=H+I|0;V=V+T+(H>>>0<I>>>0?1:0)|0;le=(G>>>1|F<<31)^(G>>>8|F<<24)^(G>>>7|F<<25)|0;H=H+le|0;V=V+((F>>>1|G<<31)^(F>>>8|G<<24)^F>>>7)+(H>>>0<le>>>0?1:0)|0;le=(j>>>19|U<<13)^(j<<3|U>>>29)^(j>>>6|U<<26)|0;H=H+le|0;V=V+((U>>>19|j<<13)^(U<<3|j>>>29)^U>>>6)+(H>>>0<le>>>0?1:0)|0;he=0xfc657e2a+H|0;ue=0x597f299c+V+(he>>>0<H>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;G=G+N|0;F=F+x+(G>>>0<N>>>0?1:0)|0;le=(Y>>>1|X<<31)^(Y>>>8|X<<24)^(Y>>>7|X<<25)|0;G=G+le|0;F=F+((X>>>1|Y<<31)^(X>>>8|Y<<24)^X>>>7)+(G>>>0<le>>>0?1:0)|0;le=(K>>>19|L<<13)^(K<<3|L>>>29)^(K>>>6|L<<26)|0;G=G+le|0;F=F+((L>>>19|K<<13)^(L<<3|K>>>29)^L>>>6)+(G>>>0<le>>>0?1:0)|0;he=0x3ad6faec+G|0;ue=0x5fcb6fab+F+(he>>>0<G>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;Y=Y+k|0;X=X+M+(Y>>>0<k>>>0?1:0)|0;le=(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)|0;Y=Y+le|0;X=X+((e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7)+(Y>>>0<le>>>0?1:0)|0;le=(H>>>19|V<<13)^(H<<3|V>>>29)^(H>>>6|V<<26)|0;Y=Y+le|0;X=X+((V>>>19|H<<13)^(V<<3|H>>>29)^V>>>6)+(Y>>>0<le>>>0?1:0)|0;he=0x4a475817+Y|0;ue=0x6c44198c+X+(he>>>0<Y>>>0?1:0)|0;he=he+ce|0;ue=ue+fe+(he>>>0<ce>>>0?1:0)|0;le=(ie>>>14|re<<18)^(ie>>>18|re<<14)^(ie<<23|re>>>9)|0;he=he+le|0;ue=ue+((re>>>14|ie<<18)^(re>>>18|ie<<14)^(re<<23|ie>>>9))+(he>>>0<le>>>0?1:0)|0;le=oe^ie&(se^oe)|0;he=he+le|0;ue=ue+(ae^re&(ne^ae))+(he>>>0<le>>>0?1:0)|0;ce=oe;fe=ae;oe=se;ae=ne;se=ie;ne=re;ie=te+he|0;re=ee+ue+(ie>>>0<te>>>0?1:0)|0;te=Z;ee=Q;Z=q;Q=J;q=W;J=z;W=he+(q&Z^te&(q^Z))|0;z=ue+(J&Q^ee&(J^Q))+(W>>>0<he>>>0?1:0)|0;le=(q>>>28|J<<4)^(q<<30|J>>>2)^(q<<25|J>>>7)|0;W=W+le|0;z=z+((J>>>28|q<<4)^(J<<30|q>>>2)^(J<<25|q>>>7))+(W>>>0<le>>>0?1:0)|0;n=n+W|0;i=i+z+(n>>>0<W>>>0?1:0)|0;a=a+q|0;s=s+J+(a>>>0<q>>>0?1:0)|0;f=f+Z|0;o=o+Q+(f>>>0<Z>>>0?1:0)|0;u=u+te|0;c=c+ee+(u>>>0<te>>>0?1:0)|0;l=l+ie|0;h=h+re+(l>>>0<ie>>>0?1:0)|0;p=p+se|0;d=d+ne+(p>>>0<se>>>0?1:0)|0;m=m+oe|0;b=b+ae+(m>>>0<oe>>>0?1:0)|0;y=y+ce|0;v=v+fe+(y>>>0<ce>>>0?1:0)|0}function te(e){e=e|0;ee(Z[e|0]<<24|Z[e|1]<<16|Z[e|2]<<8|Z[e|3],Z[e|4]<<24|Z[e|5]<<16|Z[e|6]<<8|Z[e|7],Z[e|8]<<24|Z[e|9]<<16|Z[e|10]<<8|Z[e|11],Z[e|12]<<24|Z[e|13]<<16|Z[e|14]<<8|Z[e|15],Z[e|16]<<24|Z[e|17]<<16|Z[e|18]<<8|Z[e|19],Z[e|20]<<24|Z[e|21]<<16|Z[e|22]<<8|Z[e|23],Z[e|24]<<24|Z[e|25]<<16|Z[e|26]<<8|Z[e|27],Z[e|28]<<24|Z[e|29]<<16|Z[e|30]<<8|Z[e|31],Z[e|32]<<24|Z[e|33]<<16|Z[e|34]<<8|Z[e|35],Z[e|36]<<24|Z[e|37]<<16|Z[e|38]<<8|Z[e|39],Z[e|40]<<24|Z[e|41]<<16|Z[e|42]<<8|Z[e|43],Z[e|44]<<24|Z[e|45]<<16|Z[e|46]<<8|Z[e|47],Z[e|48]<<24|Z[e|49]<<16|Z[e|50]<<8|Z[e|51],Z[e|52]<<24|Z[e|53]<<16|Z[e|54]<<8|Z[e|55],Z[e|56]<<24|Z[e|57]<<16|Z[e|58]<<8|Z[e|59],Z[e|60]<<24|Z[e|61]<<16|Z[e|62]<<8|Z[e|63],Z[e|64]<<24|Z[e|65]<<16|Z[e|66]<<8|Z[e|67],Z[e|68]<<24|Z[e|69]<<16|Z[e|70]<<8|Z[e|71],Z[e|72]<<24|Z[e|73]<<16|Z[e|74]<<8|Z[e|75],Z[e|76]<<24|Z[e|77]<<16|Z[e|78]<<8|Z[e|79],Z[e|80]<<24|Z[e|81]<<16|Z[e|82]<<8|Z[e|83],Z[e|84]<<24|Z[e|85]<<16|Z[e|86]<<8|Z[e|87],Z[e|88]<<24|Z[e|89]<<16|Z[e|90]<<8|Z[e|91],Z[e|92]<<24|Z[e|93]<<16|Z[e|94]<<8|Z[e|95],Z[e|96]<<24|Z[e|97]<<16|Z[e|98]<<8|Z[e|99],Z[e|100]<<24|Z[e|101]<<16|Z[e|102]<<8|Z[e|103],Z[e|104]<<24|Z[e|105]<<16|Z[e|106]<<8|Z[e|107],Z[e|108]<<24|Z[e|109]<<16|Z[e|110]<<8|Z[e|111],Z[e|112]<<24|Z[e|113]<<16|Z[e|114]<<8|Z[e|115],Z[e|116]<<24|Z[e|117]<<16|Z[e|118]<<8|Z[e|119],Z[e|120]<<24|Z[e|121]<<16|Z[e|122]<<8|Z[e|123],Z[e|124]<<24|Z[e|125]<<16|Z[e|126]<<8|Z[e|127])}function re(e){e=e|0;Z[e|0]=i>>>24;Z[e|1]=i>>>16&255;Z[e|2]=i>>>8&255;Z[e|3]=i&255;Z[e|4]=n>>>24;Z[e|5]=n>>>16&255;Z[e|6]=n>>>8&255;Z[e|7]=n&255;Z[e|8]=s>>>24;Z[e|9]=s>>>16&255;Z[e|10]=s>>>8&255;Z[e|11]=s&255;Z[e|12]=a>>>24;Z[e|13]=a>>>16&255;Z[e|14]=a>>>8&255;Z[e|15]=a&255;Z[e|16]=o>>>24;Z[e|17]=o>>>16&255;Z[e|18]=o>>>8&255;Z[e|19]=o&255;Z[e|20]=f>>>24;Z[e|21]=f>>>16&255;Z[e|22]=f>>>8&255;Z[e|23]=f&255;Z[e|24]=c>>>24;Z[e|25]=c>>>16&255;Z[e|26]=c>>>8&255;Z[e|27]=c&255;Z[e|28]=u>>>24;Z[e|29]=u>>>16&255;Z[e|30]=u>>>8&255;Z[e|31]=u&255;Z[e|32]=h>>>24;Z[e|33]=h>>>16&255;Z[e|34]=h>>>8&255;Z[e|35]=h&255;Z[e|36]=l>>>24;Z[e|37]=l>>>16&255;Z[e|38]=l>>>8&255;Z[e|39]=l&255;Z[e|40]=d>>>24;Z[e|41]=d>>>16&255;Z[e|42]=d>>>8&255;Z[e|43]=d&255;Z[e|44]=p>>>24;Z[e|45]=p>>>16&255;Z[e|46]=p>>>8&255;Z[e|47]=p&255;Z[e|48]=b>>>24;Z[e|49]=b>>>16&255;Z[e|50]=b>>>8&255;Z[e|51]=b&255;Z[e|52]=m>>>24;Z[e|53]=m>>>16&255;Z[e|54]=m>>>8&255;Z[e|55]=m&255;Z[e|56]=v>>>24;Z[e|57]=v>>>16&255;Z[e|58]=v>>>8&255;Z[e|59]=v&255;Z[e|60]=y>>>24;Z[e|61]=y>>>16&255;Z[e|62]=y>>>8&255;Z[e|63]=y&255}function ie(){i=0x6a09e667;n=0xf3bcc908;s=0xbb67ae85;a=0x84caa73b;o=0x3c6ef372;f=0xfe94f82b;c=0xa54ff53a;u=0x5f1d36f1;h=0x510e527f;l=0xade682d1;d=0x9b05688c;p=0x2b3e6c1f;b=0x1f83d9ab;m=0xfb41bd6b;v=0x5be0cd19;y=0x137e2179;w=A=0}function ne(e,t,r,g,S,E,_,$,C,P,T,I,x,N,M,k,R,B){e=e|0;t=t|0;r=r|0;g=g|0;S=S|0;E=E|0;_=_|0;$=$|0;C=C|0;P=P|0;T=T|0;I=I|0;x=x|0;N=N|0;M=M|0;k=k|0;R=R|0;B=B|0;i=e;n=t;s=r;a=g;o=S;f=E;c=_;u=$;h=C;l=P;d=T;p=I;b=x;m=N;v=M;y=k;w=R;A=B}function se(e,t){e=e|0;t=t|0;var r=0;if(e&127)return-1;while((t|0)>=128){te(e);e=e+128|0;t=t-128|0;r=r+128|0}w=w+r|0;if(w>>>0<r>>>0)A=A+1|0;return r|0}function ae(e,t,r){e=e|0;t=t|0;r=r|0;var i=0,n=0;if(e&127)return-1;if(~r)if(r&63)return-1;if((t|0)>=128){i=se(e,t)|0;if((i|0)==-1)return-1;e=e+i|0;t=t-i|0}i=i+t|0;w=w+t|0;if(w>>>0<t>>>0)A=A+1|0;Z[e|t]=0x80;if((t|0)>=112){for(n=t+1|0;(n|0)<128;n=n+1|0)Z[e|n]=0x00;te(e);t=0;Z[e|0]=0}for(n=t+1|0;(n|0)<123;n=n+1|0)Z[e|n]=0;Z[e|120]=A>>>21&255;Z[e|121]=A>>>13&255;Z[e|122]=A>>>5&255;Z[e|123]=A<<3&255|w>>>29;Z[e|124]=w>>>21&255;Z[e|125]=w>>>13&255;Z[e|126]=w>>>5&255;Z[e|127]=w<<3&255;te(e);if(~r)re(r);return i|0}function oe(){i=g;n=S;s=E;a=_;o=$;f=C;c=P;u=T;h=I;l=x;d=N;p=M;b=k;m=R;v=B;y=O;w=128;A=0}function fe(){i=D;n=U;s=j;a=L;o=K;f=V;c=H;u=F;h=G;l=X;d=Y;p=z;b=W;m=J;v=q;y=Q;w=128;A=0}function ce(e,t,r,Z,te,re,ne,se,ae,oe,fe,ce,ue,he,le,de,pe,be,me,ve,ye,we,Ae,ge,Se,Ee,_e,$e,Ce,Pe,Te,Ie){e=e|0;t=t|0;r=r|0;Z=Z|0;te=te|0;re=re|0;ne=ne|0;se=se|0;ae=ae|0;oe=oe|0;fe=fe|0;ce=ce|0;ue=ue|0;he=he|0;le=le|0;de=de|0;pe=pe|0;be=be|0;me=me|0;ve=ve|0;ye=ye|0;we=we|0;Ae=Ae|0;ge=ge|0;Se=Se|0;Ee=Ee|0;_e=_e|0;$e=$e|0;Ce=Ce|0;Pe=Pe|0;Te=Te|0;Ie=Ie|0;ie();ee(e^0x5c5c5c5c,t^0x5c5c5c5c,r^0x5c5c5c5c,Z^0x5c5c5c5c,te^0x5c5c5c5c,re^0x5c5c5c5c,ne^0x5c5c5c5c,se^0x5c5c5c5c,ae^0x5c5c5c5c,oe^0x5c5c5c5c,fe^0x5c5c5c5c,ce^0x5c5c5c5c,ue^0x5c5c5c5c,he^0x5c5c5c5c,le^0x5c5c5c5c,de^0x5c5c5c5c,pe^0x5c5c5c5c,be^0x5c5c5c5c,me^0x5c5c5c5c,ve^0x5c5c5c5c,ye^0x5c5c5c5c,we^0x5c5c5c5c,Ae^0x5c5c5c5c,ge^0x5c5c5c5c,Se^0x5c5c5c5c,Ee^0x5c5c5c5c,_e^0x5c5c5c5c,$e^0x5c5c5c5c,Ce^0x5c5c5c5c,Pe^0x5c5c5c5c,Te^0x5c5c5c5c,Ie^0x5c5c5c5c);D=i;U=n;j=s;L=a;K=o;V=f;H=c;F=u;G=h;X=l;Y=d;z=p;W=b;J=m;q=v;Q=y;ie();ee(e^0x36363636,t^0x36363636,r^0x36363636,Z^0x36363636,te^0x36363636,re^0x36363636,ne^0x36363636,se^0x36363636,ae^0x36363636,oe^0x36363636,fe^0x36363636,ce^0x36363636,ue^0x36363636,he^0x36363636,le^0x36363636,de^0x36363636,pe^0x36363636,be^0x36363636,me^0x36363636,ve^0x36363636,ye^0x36363636,we^0x36363636,Ae^0x36363636,ge^0x36363636,Se^0x36363636,Ee^0x36363636,_e^0x36363636,$e^0x36363636,Ce^0x36363636,Pe^0x36363636,Te^0x36363636,Ie^0x36363636);g=i;S=n;E=s;_=a;$=o;C=f;P=c;T=u;I=h;x=l;N=d;M=p;k=b;R=m;B=v;O=y;w=128;A=0}function ue(e,t,r){e=e|0;t=t|0;r=r|0;var w=0,A=0,g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0;if(e&127)return-1;if(~r)if(r&63)return-1;B=ae(e,t,-1)|0;w=i;A=n;g=s;S=a;E=o;_=f;$=c;C=u;P=h;T=l;I=d;x=p;N=b;M=m;k=v;R=y;fe();ee(w,A,g,S,E,_,$,C,P,T,I,x,N,M,k,R,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);if(~r)re(r);return B|0}function he(e,t,r,w,A){e=e|0;t=t|0;r=r|0;w=w|0;A=A|0;var g=0,S=0,E=0,_=0,$=0,C=0,P=0,T=0,I=0,x=0,N=0,M=0,k=0,R=0,B=0,O=0,D=0,U=0,j=0,L=0,K=0,V=0,H=0,F=0,G=0,X=0,Y=0,z=0,W=0,J=0,q=0,Q=0;if(e&127)return-1;if(~A)if(A&63)return-1;Z[e+t|0]=r>>>24;Z[e+t+1|0]=r>>>16&255;Z[e+t+2|0]=r>>>8&255;Z[e+t+3|0]=r&255;ue(e,t+4|0,-1)|0;g=D=i;S=U=n;E=j=s;_=L=a;$=K=o;C=V=f;P=H=c;T=F=u;I=G=h;x=X=l;N=Y=d;M=z=p;k=W=b;R=J=m;B=q=v;O=Q=y;w=w-1|0;while((w|0)>0){oe();ee(D,U,j,L,K,V,H,F,G,X,Y,z,W,J,q,Q,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);D=i;U=n;j=s;L=a;K=o;V=f;H=c;F=u;G=h;X=l;Y=d;z=p;W=b;J=m;q=v;Q=y;fe();ee(D,U,j,L,K,V,H,F,G,X,Y,z,W,J,q,Q,0x80000000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1536);D=i;U=n;j=s;L=a;K=o;V=f;H=c;F=u;G=h;X=l;Y=d;z=p;W=b;J=m;q=v;Q=y;g=g^i;S=S^n;E=E^s;_=_^a;$=$^o;C=C^f;P=P^c;T=T^u;I=I^h;x=x^l;N=N^d;M=M^p;k=k^b;R=R^m;B=B^v;O=O^y;w=w-1|0}i=g;n=S;s=E;a=_;o=$;f=C;c=P;u=T;h=I;l=x;d=N;p=M;b=k;m=R;v=B;y=O;if(~A)re(A);return 0}return{reset:ie,init:ne,process:se,finish:ae,hmac_reset:oe,hmac_init:ce,hmac_finish:ue,pbkdf2_generate_block:he}};const _sha512_block_size=128;const _sha512_hash_size=64;class Sha512 extends Hash{constructor(){super();this.NAME="sha512";this.BLOCK_SIZE=_sha512_block_size;this.HASH_SIZE=_sha512_hash_size;this.heap=_heap_init();this.asm=sha512_asm({Uint8Array},null,this.heap.buffer);this.reset()}}Sha512.NAME="sha512";class Hmac{constructor(e,t,r){if(!e.HASH_SIZE)throw new SyntaxError("option 'hash' supplied doesn't seem to be a valid hash function");this.hash=e;this.BLOCK_SIZE=this.hash.BLOCK_SIZE;this.HMAC_SIZE=this.hash.HASH_SIZE;this.result=null;this.key=_hmac_key(this.hash,t);const i=new Uint8Array(this.key);for(let e=0;e<i.length;++e)i[e]^=54;this.hash.reset().process(i);if(r!==undefined){this._hmac_init_verify(r)}else{this.verify=null}}process(e){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");this.hash.process(e);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash.finish().result;const t=new Uint8Array(this.key);for(let e=0;e<t.length;++e)t[e]^=92;const r=this.verify;const i=this.hash.reset().process(t).process(e).finish().result;if(r){if(r.length===i.length){let e=0;for(let t=0;t<r.length;t++){e|=r[t]^i[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}this.result=i;return this}_hmac_init_verify(e){if(e.length!==this.HMAC_SIZE)throw new IllegalArgumentError("illegal verification tag size");this.verify=e}}function _hmac_key(e,t){const r=new Uint8Array(e.BLOCK_SIZE);if(t.length>e.BLOCK_SIZE){r.set(e.reset().process(t).finish().result)}else{r.set(t)}return r}class HmacSha1 extends Hmac{constructor(e,t){const r=new Sha1;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){this.result=null;const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const i=this.verify;const n=new Uint8Array(_sha1_hash_size);n.set(r.subarray(0,_sha1_hash_size));if(i){if(i.length===n.length){let e=0;for(let t=0;t<i.length;t++){e|=i[t]^n[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=n}return this}}class HmacSha256 extends Hmac{constructor(e,t){const r=new Sha256;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const i=this.verify;const n=new Uint8Array(_sha256_hash_size);n.set(r.subarray(0,_sha256_hash_size));if(i){if(i.length===n.length){let e=0;for(let t=0;t<i.length;t++){e|=i[t]^n[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=n}return this}}class HmacSha512 extends Hmac{constructor(e,t){const r=new Sha512;super(r,e,t);this.reset();if(t!==undefined){this._hmac_init_verify(t)}else{this.verify=null}return this}reset(){const e=this.key;this.hash.reset().asm.hmac_init(e[0]<<24|e[1]<<16|e[2]<<8|e[3],e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[8]<<24|e[9]<<16|e[10]<<8|e[11],e[12]<<24|e[13]<<16|e[14]<<8|e[15],e[16]<<24|e[17]<<16|e[18]<<8|e[19],e[20]<<24|e[21]<<16|e[22]<<8|e[23],e[24]<<24|e[25]<<16|e[26]<<8|e[27],e[28]<<24|e[29]<<16|e[30]<<8|e[31],e[32]<<24|e[33]<<16|e[34]<<8|e[35],e[36]<<24|e[37]<<16|e[38]<<8|e[39],e[40]<<24|e[41]<<16|e[42]<<8|e[43],e[44]<<24|e[45]<<16|e[46]<<8|e[47],e[48]<<24|e[49]<<16|e[50]<<8|e[51],e[52]<<24|e[53]<<16|e[54]<<8|e[55],e[56]<<24|e[57]<<16|e[58]<<8|e[59],e[60]<<24|e[61]<<16|e[62]<<8|e[63],e[64]<<24|e[65]<<16|e[66]<<8|e[67],e[68]<<24|e[69]<<16|e[70]<<8|e[71],e[72]<<24|e[73]<<16|e[74]<<8|e[75],e[76]<<24|e[77]<<16|e[78]<<8|e[79],e[80]<<24|e[81]<<16|e[82]<<8|e[83],e[84]<<24|e[85]<<16|e[86]<<8|e[87],e[88]<<24|e[89]<<16|e[90]<<8|e[91],e[92]<<24|e[93]<<16|e[94]<<8|e[95],e[96]<<24|e[97]<<16|e[98]<<8|e[99],e[100]<<24|e[101]<<16|e[102]<<8|e[103],e[104]<<24|e[105]<<16|e[106]<<8|e[107],e[108]<<24|e[109]<<16|e[110]<<8|e[111],e[112]<<24|e[113]<<16|e[114]<<8|e[115],e[116]<<24|e[117]<<16|e[118]<<8|e[119],e[120]<<24|e[121]<<16|e[122]<<8|e[123],e[124]<<24|e[125]<<16|e[126]<<8|e[127]);return this}finish(){if(this.key===null)throw new IllegalStateError("no key is associated with the instance");if(this.result!==null)throw new IllegalStateError("state must be reset before processing new data");const e=this.hash;const t=this.hash.asm;const r=this.hash.heap;t.hmac_finish(e.pos,e.len,0);const i=this.verify;const n=new Uint8Array(_sha512_hash_size);n.set(r.subarray(0,_sha512_hash_size));if(i){if(i.length===n.length){let e=0;for(let t=0;t<i.length;t++){e|=i[t]^n[t]}if(e!==0)throw new Error("HMAC verification failed, hash value doesn't match")}else{throw new Error("HMAC verification failed, lengths doesn't match")}}else{this.result=n}return this}}function Pbkdf2HmacSha1(e,t,r,i){const n=new HmacSha1(e);const s=new Uint8Array(i);const a=Math.ceil(i/n.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*n.HMAC_SIZE;const f=(e<a?0:i%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t);n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,e,r,0);s.set(n.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha256(e,t,r,i){const n=new HmacSha256(e);const s=new Uint8Array(i);const a=Math.ceil(i/n.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*n.HMAC_SIZE;const f=(e<a?0:i%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t);n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,e,r,0);s.set(n.hash.heap.subarray(0,f),o)}return s}function Pbkdf2HmacSha512(e,t,r,i){const n=new HmacSha512(e);const s=new Uint8Array(i);const a=Math.ceil(i/n.HMAC_SIZE);for(let e=1;e<=a;++e){const o=(e-1)*n.HMAC_SIZE;const f=(e<a?0:i%n.HMAC_SIZE)||n.HMAC_SIZE;n.reset().process(t);n.hash.asm.pbkdf2_generate_block(n.hash.pos,n.hash.len,e,r,0);s.set(n.hash.heap.subarray(0,f),o)}return s}class RSA{constructor(e){const t=e.length;if(t!==2&&t!==3&&t!==8)throw new SyntaxError("unexpected key type");const r=new Modulus(new BigNumber(e[0]));const i=new BigNumber(e[1]);this.key={0:r,1:i};if(t>2){this.key[2]=new BigNumber(e[2])}if(t>3){this.key[3]=new Modulus(new BigNumber(e[3]));this.key[4]=new Modulus(new BigNumber(e[4]));this.key[5]=new BigNumber(e[5]);this.key[6]=new BigNumber(e[6]);this.key[7]=new BigNumber(e[7])}}encrypt(e){if(!this.key)throw new IllegalStateError("no key is associated with the instance");if(this.key[0].compare(e)<=0)throw new RangeError("data too large");const t=this.key[0];const r=this.key[1];let i=t.power(e,r).toBytes();const n=t.bitLength+7>>3;if(i.length<n){const e=new Uint8Array(n);e.set(i,n-i.length);i=e}this.result=i;return this}decrypt(e){if(this.key[0].compare(e)<=0)throw new RangeError("data too large");let t;let r;if(this.key[3]!==undefined){r=this.key[0];const i=this.key[3];const n=this.key[4];const s=this.key[5];const a=this.key[6];const o=this.key[7];const f=i.power(e,s);const c=n.power(e,a);let u=f.subtract(c);while(u.sign<0)u=u.add(i);const h=i.reduce(o.multiply(u));t=h.multiply(n).add(c).clamp(r.bitLength).toBytes()}else{r=this.key[0];const i=this.key[2];t=r.power(e,i).toBytes()}const i=r.bitLength+7>>3;if(t.length<i){let e=new Uint8Array(i);e.set(t,i-t.length);t=e}this.result=t;return this}}class RSA_OAEP{constructor(e,t,r){this.rsa=new RSA(e);this.hash=t;if(r!==undefined){this.label=r.length>0?r:null}else{this.label=null}}encrypt(e,t){const r=Math.ceil(this.rsa.key[0].bitLength/8);const i=this.hash.HASH_SIZE;const n=e.byteLength||e.length||0;const s=r-n-2*i-2;if(n>r-2*this.hash.HASH_SIZE-2)throw new IllegalArgumentError("data too large");const a=new Uint8Array(r);const o=a.subarray(1,i+1);const f=a.subarray(i+1);f.set(e,i+s+1);f.set(this.hash.process(this.label||new Uint8Array(0)).finish().result,0);f[i+s]=1;if(t!==undefined){if(o.length!==t.length)throw new IllegalArgumentError("random size must equal the hash size");o.set(t)}else{getRandomValues(o)}const c=this.RSA_MGF1_generate(o,f.length);for(let e=0;e<f.length;e++)f[e]^=c[e];const u=this.RSA_MGF1_generate(f,o.length);for(let e=0;e<o.length;e++)o[e]^=u[e];this.rsa.encrypt(new BigNumber(a));return new Uint8Array(this.rsa.result)}decrypt(e){if(!this.rsa.key)throw new IllegalStateError("no key is associated with the instance");const t=Math.ceil(this.rsa.key[0].bitLength/8);const r=this.hash.HASH_SIZE;const i=e.byteLength||e.length||0;if(i!==t)throw new IllegalArgumentError("bad data");this.rsa.decrypt(new BigNumber(e));const n=this.rsa.result[0];const s=this.rsa.result.subarray(1,r+1);const a=this.rsa.result.subarray(r+1);if(n!==0)throw new SecurityError("decryption failed");const o=this.RSA_MGF1_generate(a,s.length);for(let e=0;e<s.length;e++)s[e]^=o[e];const f=this.RSA_MGF1_generate(s,a.length);for(let e=0;e<a.length;e++)a[e]^=f[e];const c=this.hash.reset().process(this.label||new Uint8Array(0)).finish().result;for(let e=0;e<r;e++){if(c[e]!==a[e])throw new SecurityError("decryption failed")}let u=r;for(;u<a.length;u++){const e=a[u];if(e===1)break;if(e!==0)throw new SecurityError("decryption failed")}if(u===a.length)throw new SecurityError("decryption failed");this.rsa.result=a.subarray(u+1);return new Uint8Array(this.rsa.result)}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const i=new Uint8Array(t);const n=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){n[0]=t>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255;const s=i.subarray(t*r);let a=this.hash.reset().process(e).process(n).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return i}}class RSA_PSS{constructor(e,t,r=4){this.rsa=new RSA(e);this.hash=t;this.saltLength=r;if(this.saltLength<0)throw new TypeError("saltLength should be a non-negative number");if(this.rsa.key!==null&&Math.ceil((this.rsa.key[0].bitLength-1)/8)<this.hash.HASH_SIZE+this.saltLength+2)throw new SyntaxError("saltLength is too large")}sign(e,t){const r=this.rsa.key[0].bitLength;const i=this.hash.HASH_SIZE;const n=Math.ceil((r-1)/8);const s=this.saltLength;const a=n-s-i-2;const o=new Uint8Array(n);const f=o.subarray(n-i-1,n-1);const c=o.subarray(0,n-i-1);const u=c.subarray(a+1);const h=new Uint8Array(8+i+s);const l=h.subarray(8,8+i);const d=h.subarray(8+i);l.set(this.hash.process(e).finish().result);if(s>0){if(t!==undefined){if(d.length!==t.length)throw new IllegalArgumentError("random size must equal the salt size");d.set(t)}else{getRandomValues(d)}}c[a]=1;u.set(d);f.set(this.hash.reset().process(h).finish().result);const p=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=p[e];o[n-1]=188;const b=8*n-r+1;if(b%8)o[0]&=255>>>b;this.rsa.decrypt(new BigNumber(o));return this.rsa.result}verify(e,t){const r=this.rsa.key[0].bitLength;const i=this.hash.HASH_SIZE;const n=Math.ceil((r-1)/8);const s=this.saltLength;const a=n-s-i-2;this.rsa.encrypt(new BigNumber(e));const o=this.rsa.result;if(o[n-1]!==188)throw new SecurityError("bad signature");const f=o.subarray(n-i-1,n-1);const c=o.subarray(0,n-i-1);const u=c.subarray(a+1);const h=8*n-r+1;if(h%8&&o[0]>>>8-h)throw new SecurityError("bad signature");const l=this.RSA_MGF1_generate(f,c.length);for(let e=0;e<c.length;e++)c[e]^=l[e];if(h%8)o[0]&=255>>>h;for(let e=0;e<a;e++){if(c[e]!==0)throw new SecurityError("bad signature")}if(c[a]!==1)throw new SecurityError("bad signature");const d=new Uint8Array(8+i+s);const p=d.subarray(8,8+i);const b=d.subarray(8+i);p.set(this.hash.reset().process(t).finish().result);b.set(u);const m=this.hash.reset().process(d).finish().result;for(let e=0;e<i;e++){if(f[e]!==m[e])throw new SecurityError("bad signature")}}RSA_MGF1_generate(e,t=0){const r=this.hash.HASH_SIZE;const i=new Uint8Array(t);const n=new Uint8Array(4);const s=Math.ceil(t/r);for(let t=0;t<s;t++){n[0]=t>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255;const s=i.subarray(t*r);let a=this.hash.reset().process(e).process(n).finish().result;if(a.length>s.length)a=a.subarray(0,s.length);s.set(a)}return i}}class RSA_PKCS1_v1_5{constructor(e,t){this.rsa=new RSA(e);this.hash=t}sign(e){if(!this.rsa.key){throw new IllegalStateError("no key is associated with the instance")}const t=getHashPrefix(this.hash);const r=this.hash.HASH_SIZE;const i=t.length+r;const n=this.rsa.key[0].bitLength+7>>3;if(n<i+11){throw new Error("Message too long")}const s=new Uint8Array(r);s.set(this.hash.process(e).finish().result);const a=new Uint8Array(n);let o=0;a[o++]=0;a[o++]=1;for(o;o<n-i-1;o++){a[o]=255}a[o++]=0;a.set(t,o);a.set(s,a.length-r);this.rsa.decrypt(new BigNumber(a));return this.rsa.result}verify(e,t){const r=getHashPrefix(this.hash);const i=this.hash.HASH_SIZE;const n=r.length+i;const s=this.rsa.key[0].bitLength+7>>3;if(s<n+11){throw new SecurityError("Bad signature")}this.rsa.encrypt(new BigNumber(e));const a=new Uint8Array(i);a.set(this.hash.process(t).finish().result);let o=1;const f=this.rsa.result;let c=0;o&=f[c++]===0?1:0;o&=f[c++]===1?1:0;for(c;c<s-n-1;c++){o&=f[c]===255?1:0}o&=f[c++]===0?1:0;let u=0;let h=c+r.length;for(c;c<h;c++){o&=f[c]===r[u++]?1:0}u=0;h=c+a.length;for(c;c<h;c++){o&=f[c]===a[u++]?1:0}if(!o){throw new SecurityError("Bad signature")}}}const HASH_PREFIXES={sha1:new Uint8Array([48,33,48,9,6,5,43,14,3,2,26,5,0,4,20]),sha256:new Uint8Array([48,49,48,13,6,9,96,134,72,1,101,3,4,2,1,5,0,4,32]),sha384:new Uint8Array([48,65,48,13,6,9,96,134,72,1,101,3,4,2,2,5,0,4,48]),sha512:new Uint8Array([48,81,48,13,6,9,96,134,72,1,101,3,4,2,3,5,0,4,64])};function getHashPrefix(e){const t=HASH_PREFIXES[e.NAME];if(!t){throw new Error("Cannot get hash prefix for hash algorithm '"+e.NAME+"'")}return t}var bn=createCommonjsModule$1((function(e){(function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype;e.prototype=new r;e.prototype.constructor=e}function n(e,t,r){if(n.isBN(e)){return e}this.negative=0;this.words=null;this.length=0;this.red=null;if(e!==null){if(t==="le"||t==="be"){r=t;t=10}this._init(e||0,t||10,r||"be")}}if(typeof e==="object"){e.exports=n}else{t.BN=n}n.BN=n;n.wordSize=26;var s;try{if(typeof window!=="undefined"&&typeof window.Buffer!=="undefined"){s=window.Buffer}else{s=require$$0.Buffer}}catch(e){}n.isBN=function e(t){if(t instanceof n){return true}return t!==null&&typeof t==="object"&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)};n.max=function e(t,r){if(t.cmp(r)>0)return t;return r};n.min=function e(t,r){if(t.cmp(r)<0)return t;return r};n.prototype._init=function e(t,i,n){if(typeof t==="number"){return this._initNumber(t,i,n)}if(typeof t==="object"){return this._initArray(t,i,n)}if(i==="hex"){i=16}r(i===(i|0)&&i>=2&&i<=36);t=t.toString().replace(/\s+/g,"");var s=0;if(t[0]==="-"){s++;this.negative=1}if(s<t.length){if(i===16){this._parseHex(t,s,n)}else{this._parseBase(t,i,s);if(n==="le"){this._initArray(this.toArray(),i,n)}}}};n.prototype._initNumber=function e(t,i,n){if(t<0){this.negative=1;t=-t}if(t<67108864){this.words=[t&67108863];this.length=1}else if(t<4503599627370496){this.words=[t&67108863,t/67108864&67108863];this.length=2}else{r(t<9007199254740992);this.words=[t&67108863,t/67108864&67108863,1];this.length=3}if(n!=="le")return;this._initArray(this.toArray(),i,n)};n.prototype._initArray=function e(t,i,n){r(typeof t.length==="number");if(t.length<=0){this.words=[0];this.length=1;return this}this.length=Math.ceil(t.length/3);this.words=new Array(this.length);for(var s=0;s<this.length;s++){this.words[s]=0}var a,o;var f=0;if(n==="be"){for(s=t.length-1,a=0;s>=0;s-=3){o=t[s]|t[s-1]<<8|t[s-2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}else if(n==="le"){for(s=0,a=0;s<t.length;s+=3){o=t[s]|t[s+1]<<8|t[s+2]<<16;this.words[a]|=o<<f&67108863;this.words[a+1]=o>>>26-f&67108863;f+=24;if(f>=26){f-=26;a++}}}return this.strip()};function a(e,t){var r=e.charCodeAt(t);if(r>=65&&r<=70){return r-55}else if(r>=97&&r<=102){return r-87}else{return r-48&15}}function o(e,t,r){var i=a(e,r);if(r-1>=t){i|=a(e,r-1)<<4}return i}n.prototype._parseHex=function e(t,r,i){this.length=Math.ceil((t.length-r)/6);this.words=new Array(this.length);for(var n=0;n<this.length;n++){this.words[n]=0}var s=0;var a=0;var f;if(i==="be"){for(n=t.length-1;n>=r;n-=2){f=o(t,r,n)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}else{var c=t.length-r;for(n=c%2===0?r+1:r;n<t.length;n+=2){f=o(t,r,n)<<s;this.words[a]|=f&67108863;if(s>=18){s-=18;a+=1;this.words[a]|=f>>>26}else{s+=8}}}this.strip()};function f(e,t,r,i){var n=0;var s=Math.min(e.length,r);for(var a=t;a<s;a++){var o=e.charCodeAt(a)-48;n*=i;if(o>=49){n+=o-49+10}else if(o>=17){n+=o-17+10}else{n+=o}}return n}n.prototype._parseBase=function e(t,r,i){this.words=[0];this.length=1;for(var n=0,s=1;s<=67108863;s*=r){n++}n--;s=s/r|0;var a=t.length-i;var o=a%n;var c=Math.min(a,a-o)+i;var u=0;for(var h=i;h<c;h+=n){u=f(t,h,h+n,r);this.imuln(s);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}if(o!==0){var l=1;u=f(t,h,t.length,r);for(h=0;h<o;h++){l*=r}this.imuln(l);if(this.words[0]+u<67108864){this.words[0]+=u}else{this._iaddn(u)}}this.strip()};n.prototype.copy=function e(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++){t.words[r]=this.words[r]}t.length=this.length;t.negative=this.negative;t.red=this.red};n.prototype.clone=function e(){var t=new n(null);this.copy(t);return t};n.prototype._expand=function e(t){while(this.length<t){this.words[this.length++]=0}return this};n.prototype.strip=function e(){while(this.length>1&&this.words[this.length-1]===0){this.length--}return this._normSign()};n.prototype._normSign=function e(){if(this.length===1&&this.words[0]===0){this.negative=0}return this};n.prototype.inspect=function e(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"];var u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5];var h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function e(t,i){t=t||10;i=i|0||1;var n;if(t===16||t==="hex"){n="";var s=0;var a=0;for(var o=0;o<this.length;o++){var f=this.words[o];var l=((f<<s|a)&16777215).toString(16);a=f>>>24-s&16777215;if(a!==0||o!==this.length-1){n=c[6-l.length]+l+n}else{n=l+n}s+=2;if(s>=26){s-=26;o--}}if(a!==0){n=a.toString(16)+n}while(n.length%i!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}if(t===(t|0)&&t>=2&&t<=36){var d=u[t];var p=h[t];n="";var b=this.clone();b.negative=0;while(!b.isZero()){var m=b.modn(p).toString(t);b=b.idivn(p);if(!b.isZero()){n=c[d-m.length]+m+n}else{n=m+n}}if(this.isZero()){n="0"+n}while(n.length%i!==0){n="0"+n}if(this.negative!==0){n="-"+n}return n}r(false,"Base should be between 2 and 36")};n.prototype.toNumber=function e(){var t=this.words[0];if(this.length===2){t+=this.words[1]*67108864}else if(this.length===3&&this.words[2]===1){t+=4503599627370496+this.words[1]*67108864}else if(this.length>2){r(false,"Number can only safely store up to 53 bits")}return this.negative!==0?-t:t};n.prototype.toJSON=function e(){return this.toString(16)};n.prototype.toBuffer=function e(t,i){r(typeof s!=="undefined");return this.toArrayLike(s,t,i)};n.prototype.toArray=function e(t,r){return this.toArrayLike(Array,t,r)};n.prototype.toArrayLike=function e(t,i,n){var s=this.byteLength();var a=n||Math.max(1,s);r(s<=a,"byte array longer than desired length");r(a>0,"Requested array length <= 0");this.strip();var o=i==="le";var f=new t(a);var c,u;var h=this.clone();if(!o){for(u=0;u<a-s;u++){f[u]=0}for(u=0;!h.isZero();u++){c=h.andln(255);h.iushrn(8);f[a-u-1]=c}}else{for(u=0;!h.isZero();u++){c=h.andln(255);h.iushrn(8);f[u]=c}for(;u<a;u++){f[u]=0}}return f};if(Math.clz32){n.prototype._countBits=function e(t){return 32-Math.clz32(t)}}else{n.prototype._countBits=function e(t){var r=t;var i=0;if(r>=4096){i+=13;r>>>=13}if(r>=64){i+=7;r>>>=7}if(r>=8){i+=4;r>>>=4}if(r>=2){i+=2;r>>>=2}return i+r}}n.prototype._zeroBits=function e(t){if(t===0)return 26;var r=t;var i=0;if((r&8191)===0){i+=13;r>>>=13}if((r&127)===0){i+=7;r>>>=7}if((r&15)===0){i+=4;r>>>=4}if((r&3)===0){i+=2;r>>>=2}if((r&1)===0){i++}return i};n.prototype.bitLength=function e(){var t=this.words[this.length-1];var r=this._countBits(t);return(this.length-1)*26+r};function l(e){var t=new Array(e.bitLength());for(var r=0;r<t.length;r++){var i=r/26|0;var n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}n.prototype.zeroBits=function e(){if(this.isZero())return 0;var t=0;for(var r=0;r<this.length;r++){var i=this._zeroBits(this.words[r]);t+=i;if(i!==26)break}return t};n.prototype.byteLength=function e(){return Math.ceil(this.bitLength()/8)};n.prototype.toTwos=function e(t){if(this.negative!==0){return this.abs().inotn(t).iaddn(1)}return this.clone()};n.prototype.fromTwos=function e(t){if(this.testn(t-1)){return this.notn(t).iaddn(1).ineg()}return this.clone()};n.prototype.isNeg=function e(){return this.negative!==0};n.prototype.neg=function e(){return this.clone().ineg()};n.prototype.ineg=function e(){if(!this.isZero()){this.negative^=1}return this};n.prototype.iuor=function e(t){while(this.length<t.length){this.words[this.length++]=0}for(var r=0;r<t.length;r++){this.words[r]=this.words[r]|t.words[r]}return this.strip()};n.prototype.ior=function e(t){r((this.negative|t.negative)===0);return this.iuor(t)};n.prototype.or=function e(t){if(this.length>t.length)return this.clone().ior(t);return t.clone().ior(this)};n.prototype.uor=function e(t){if(this.length>t.length)return this.clone().iuor(t);return t.clone().iuor(this)};n.prototype.iuand=function e(t){var r;if(this.length>t.length){r=t}else{r=this}for(var i=0;i<r.length;i++){this.words[i]=this.words[i]&t.words[i]}this.length=r.length;return this.strip()};n.prototype.iand=function e(t){r((this.negative|t.negative)===0);return this.iuand(t)};n.prototype.and=function e(t){if(this.length>t.length)return this.clone().iand(t);return t.clone().iand(this)};n.prototype.uand=function e(t){if(this.length>t.length)return this.clone().iuand(t);return t.clone().iuand(this)};n.prototype.iuxor=function e(t){var r;var i;if(this.length>t.length){r=this;i=t}else{r=t;i=this}for(var n=0;n<i.length;n++){this.words[n]=r.words[n]^i.words[n]}if(this!==r){for(;n<r.length;n++){this.words[n]=r.words[n]}}this.length=r.length;return this.strip()};n.prototype.ixor=function e(t){r((this.negative|t.negative)===0);return this.iuxor(t)};n.prototype.xor=function e(t){if(this.length>t.length)return this.clone().ixor(t);return t.clone().ixor(this)};n.prototype.uxor=function e(t){if(this.length>t.length)return this.clone().iuxor(t);return t.clone().iuxor(this)};n.prototype.inotn=function e(t){r(typeof t==="number"&&t>=0);var i=Math.ceil(t/26)|0;var n=t%26;this._expand(i);if(n>0){i--}for(var s=0;s<i;s++){this.words[s]=~this.words[s]&67108863}if(n>0){this.words[s]=~this.words[s]&67108863>>26-n}return this.strip()};n.prototype.notn=function e(t){return this.clone().inotn(t)};n.prototype.setn=function e(t,i){r(typeof t==="number"&&t>=0);var n=t/26|0;var s=t%26;this._expand(n+1);if(i){this.words[n]=this.words[n]|1<<s}else{this.words[n]=this.words[n]&~(1<<s)}return this.strip()};n.prototype.iadd=function e(t){var r;if(this.negative!==0&&t.negative===0){this.negative=0;r=this.isub(t);this.negative^=1;return this._normSign()}else if(this.negative===0&&t.negative!==0){t.negative=0;r=this.isub(t);t.negative=1;return r._normSign()}var i,n;if(this.length>t.length){i=this;n=t}else{i=t;n=this}var s=0;for(var a=0;a<n.length;a++){r=(i.words[a]|0)+(n.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}for(;s!==0&&a<i.length;a++){r=(i.words[a]|0)+s;this.words[a]=r&67108863;s=r>>>26}this.length=i.length;if(s!==0){this.words[this.length]=s;this.length++}else if(i!==this){for(;a<i.length;a++){this.words[a]=i.words[a]}}return this};n.prototype.add=function e(t){var r;if(t.negative!==0&&this.negative===0){t.negative=0;r=this.sub(t);t.negative^=1;return r}else if(t.negative===0&&this.negative!==0){this.negative=0;r=t.sub(this);this.negative=1;return r}if(this.length>t.length)return this.clone().iadd(t);return t.clone().iadd(this)};n.prototype.isub=function e(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);t.negative=1;return r._normSign()}else if(this.negative!==0){this.negative=0;this.iadd(t);this.negative=1;return this._normSign()}var i=this.cmp(t);if(i===0){this.negative=0;this.length=1;this.words[0]=0;return this}var n,s;if(i>0){n=this;s=t}else{n=t;s=this}var a=0;for(var o=0;o<s.length;o++){r=(n.words[o]|0)-(s.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}for(;a!==0&&o<n.length;o++){r=(n.words[o]|0)+a;a=r>>26;this.words[o]=r&67108863}if(a===0&&o<n.length&&n!==this){for(;o<n.length;o++){this.words[o]=n.words[o]}}this.length=Math.max(this.length,o);if(n!==this){this.negative=1}return this.strip()};n.prototype.sub=function e(t){return this.clone().isub(t)};function d(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i;i=i-1|0;var n=e.words[0]|0;var s=t.words[0]|0;var a=n*s;var o=a&67108863;var f=a/67108864|0;r.words[0]=o;for(var c=1;c<i;c++){var u=f>>>26;var h=f&67108863;var l=Math.min(c,t.length-1);for(var d=Math.max(0,c-e.length+1);d<=l;d++){var p=c-d|0;n=e.words[p]|0;s=t.words[d]|0;a=n*s+h;u+=a/67108864|0;h=a&67108863}r.words[c]=h|0;f=u|0}if(f!==0){r.words[c]=f|0}else{r.length--}return r.strip()}var p=function e(t,r,i){var n=t.words;var s=r.words;var a=i.words;var o=0;var f;var c;var u;var h=n[0]|0;var l=h&8191;var d=h>>>13;var p=n[1]|0;var b=p&8191;var m=p>>>13;var v=n[2]|0;var y=v&8191;var w=v>>>13;var A=n[3]|0;var g=A&8191;var S=A>>>13;var E=n[4]|0;var _=E&8191;var $=E>>>13;var C=n[5]|0;var P=C&8191;var T=C>>>13;var I=n[6]|0;var x=I&8191;var N=I>>>13;var M=n[7]|0;var k=M&8191;var R=M>>>13;var B=n[8]|0;var O=B&8191;var D=B>>>13;var U=n[9]|0;var j=U&8191;var L=U>>>13;var K=s[0]|0;var V=K&8191;var H=K>>>13;var F=s[1]|0;var G=F&8191;var X=F>>>13;var Y=s[2]|0;var z=Y&8191;var W=Y>>>13;var J=s[3]|0;var q=J&8191;var Q=J>>>13;var Z=s[4]|0;var ee=Z&8191;var te=Z>>>13;var re=s[5]|0;var ie=re&8191;var ne=re>>>13;var se=s[6]|0;var ae=se&8191;var oe=se>>>13;var fe=s[7]|0;var ce=fe&8191;var ue=fe>>>13;var he=s[8]|0;var le=he&8191;var de=he>>>13;var pe=s[9]|0;var be=pe&8191;var me=pe>>>13;i.negative=t.negative^r.negative;i.length=19;f=Math.imul(l,V);c=Math.imul(l,H);c=c+Math.imul(d,V)|0;u=Math.imul(d,H);var ve=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ve>>>26)|0;ve&=67108863;f=Math.imul(b,V);c=Math.imul(b,H);c=c+Math.imul(m,V)|0;u=Math.imul(m,H);f=f+Math.imul(l,G)|0;c=c+Math.imul(l,X)|0;c=c+Math.imul(d,G)|0;u=u+Math.imul(d,X)|0;var ye=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ye>>>26)|0;ye&=67108863;f=Math.imul(y,V);c=Math.imul(y,H);c=c+Math.imul(w,V)|0;u=Math.imul(w,H);f=f+Math.imul(b,G)|0;c=c+Math.imul(b,X)|0;c=c+Math.imul(m,G)|0;u=u+Math.imul(m,X)|0;f=f+Math.imul(l,z)|0;c=c+Math.imul(l,W)|0;c=c+Math.imul(d,z)|0;u=u+Math.imul(d,W)|0;var we=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(we>>>26)|0;we&=67108863;f=Math.imul(g,V);c=Math.imul(g,H);c=c+Math.imul(S,V)|0;u=Math.imul(S,H);f=f+Math.imul(y,G)|0;c=c+Math.imul(y,X)|0;c=c+Math.imul(w,G)|0;u=u+Math.imul(w,X)|0;f=f+Math.imul(b,z)|0;c=c+Math.imul(b,W)|0;c=c+Math.imul(m,z)|0;u=u+Math.imul(m,W)|0;f=f+Math.imul(l,q)|0;c=c+Math.imul(l,Q)|0;c=c+Math.imul(d,q)|0;u=u+Math.imul(d,Q)|0;var Ae=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ae>>>26)|0;Ae&=67108863;f=Math.imul(_,V);c=Math.imul(_,H);c=c+Math.imul($,V)|0;u=Math.imul($,H);f=f+Math.imul(g,G)|0;c=c+Math.imul(g,X)|0;c=c+Math.imul(S,G)|0;u=u+Math.imul(S,X)|0;f=f+Math.imul(y,z)|0;c=c+Math.imul(y,W)|0;c=c+Math.imul(w,z)|0;u=u+Math.imul(w,W)|0;f=f+Math.imul(b,q)|0;c=c+Math.imul(b,Q)|0;c=c+Math.imul(m,q)|0;u=u+Math.imul(m,Q)|0;f=f+Math.imul(l,ee)|0;c=c+Math.imul(l,te)|0;c=c+Math.imul(d,ee)|0;u=u+Math.imul(d,te)|0;var ge=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ge>>>26)|0;ge&=67108863;f=Math.imul(P,V);c=Math.imul(P,H);c=c+Math.imul(T,V)|0;u=Math.imul(T,H);f=f+Math.imul(_,G)|0;c=c+Math.imul(_,X)|0;c=c+Math.imul($,G)|0;u=u+Math.imul($,X)|0;f=f+Math.imul(g,z)|0;c=c+Math.imul(g,W)|0;c=c+Math.imul(S,z)|0;u=u+Math.imul(S,W)|0;f=f+Math.imul(y,q)|0;c=c+Math.imul(y,Q)|0;c=c+Math.imul(w,q)|0;u=u+Math.imul(w,Q)|0;f=f+Math.imul(b,ee)|0;c=c+Math.imul(b,te)|0;c=c+Math.imul(m,ee)|0;u=u+Math.imul(m,te)|0;f=f+Math.imul(l,ie)|0;c=c+Math.imul(l,ne)|0;c=c+Math.imul(d,ie)|0;u=u+Math.imul(d,ne)|0;var Se=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Se>>>26)|0;Se&=67108863;f=Math.imul(x,V);c=Math.imul(x,H);c=c+Math.imul(N,V)|0;u=Math.imul(N,H);f=f+Math.imul(P,G)|0;c=c+Math.imul(P,X)|0;c=c+Math.imul(T,G)|0;u=u+Math.imul(T,X)|0;f=f+Math.imul(_,z)|0;c=c+Math.imul(_,W)|0;c=c+Math.imul($,z)|0;u=u+Math.imul($,W)|0;f=f+Math.imul(g,q)|0;c=c+Math.imul(g,Q)|0;c=c+Math.imul(S,q)|0;u=u+Math.imul(S,Q)|0;f=f+Math.imul(y,ee)|0;c=c+Math.imul(y,te)|0;c=c+Math.imul(w,ee)|0;u=u+Math.imul(w,te)|0;f=f+Math.imul(b,ie)|0;c=c+Math.imul(b,ne)|0;c=c+Math.imul(m,ie)|0;u=u+Math.imul(m,ne)|0;f=f+Math.imul(l,ae)|0;c=c+Math.imul(l,oe)|0;c=c+Math.imul(d,ae)|0;u=u+Math.imul(d,oe)|0;var Ee=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ee>>>26)|0;Ee&=67108863;f=Math.imul(k,V);c=Math.imul(k,H);c=c+Math.imul(R,V)|0;u=Math.imul(R,H);f=f+Math.imul(x,G)|0;c=c+Math.imul(x,X)|0;c=c+Math.imul(N,G)|0;u=u+Math.imul(N,X)|0;f=f+Math.imul(P,z)|0;c=c+Math.imul(P,W)|0;c=c+Math.imul(T,z)|0;u=u+Math.imul(T,W)|0;f=f+Math.imul(_,q)|0;c=c+Math.imul(_,Q)|0;c=c+Math.imul($,q)|0;u=u+Math.imul($,Q)|0;f=f+Math.imul(g,ee)|0;c=c+Math.imul(g,te)|0;c=c+Math.imul(S,ee)|0;u=u+Math.imul(S,te)|0;f=f+Math.imul(y,ie)|0;c=c+Math.imul(y,ne)|0;c=c+Math.imul(w,ie)|0;u=u+Math.imul(w,ne)|0;f=f+Math.imul(b,ae)|0;c=c+Math.imul(b,oe)|0;c=c+Math.imul(m,ae)|0;u=u+Math.imul(m,oe)|0;f=f+Math.imul(l,ce)|0;c=c+Math.imul(l,ue)|0;c=c+Math.imul(d,ce)|0;u=u+Math.imul(d,ue)|0;var _e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(_e>>>26)|0;_e&=67108863;f=Math.imul(O,V);c=Math.imul(O,H);c=c+Math.imul(D,V)|0;u=Math.imul(D,H);f=f+Math.imul(k,G)|0;c=c+Math.imul(k,X)|0;c=c+Math.imul(R,G)|0;u=u+Math.imul(R,X)|0;f=f+Math.imul(x,z)|0;c=c+Math.imul(x,W)|0;c=c+Math.imul(N,z)|0;u=u+Math.imul(N,W)|0;f=f+Math.imul(P,q)|0;c=c+Math.imul(P,Q)|0;c=c+Math.imul(T,q)|0;u=u+Math.imul(T,Q)|0;f=f+Math.imul(_,ee)|0;c=c+Math.imul(_,te)|0;c=c+Math.imul($,ee)|0;u=u+Math.imul($,te)|0;f=f+Math.imul(g,ie)|0;c=c+Math.imul(g,ne)|0;c=c+Math.imul(S,ie)|0;u=u+Math.imul(S,ne)|0;f=f+Math.imul(y,ae)|0;c=c+Math.imul(y,oe)|0;c=c+Math.imul(w,ae)|0;u=u+Math.imul(w,oe)|0;f=f+Math.imul(b,ce)|0;c=c+Math.imul(b,ue)|0;c=c+Math.imul(m,ce)|0;u=u+Math.imul(m,ue)|0;f=f+Math.imul(l,le)|0;c=c+Math.imul(l,de)|0;c=c+Math.imul(d,le)|0;u=u+Math.imul(d,de)|0;var $e=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+($e>>>26)|0;$e&=67108863;f=Math.imul(j,V);c=Math.imul(j,H);c=c+Math.imul(L,V)|0;u=Math.imul(L,H);f=f+Math.imul(O,G)|0;c=c+Math.imul(O,X)|0;c=c+Math.imul(D,G)|0;u=u+Math.imul(D,X)|0;f=f+Math.imul(k,z)|0;c=c+Math.imul(k,W)|0;c=c+Math.imul(R,z)|0;u=u+Math.imul(R,W)|0;f=f+Math.imul(x,q)|0;c=c+Math.imul(x,Q)|0;c=c+Math.imul(N,q)|0;u=u+Math.imul(N,Q)|0;f=f+Math.imul(P,ee)|0;c=c+Math.imul(P,te)|0;c=c+Math.imul(T,ee)|0;u=u+Math.imul(T,te)|0;f=f+Math.imul(_,ie)|0;c=c+Math.imul(_,ne)|0;c=c+Math.imul($,ie)|0;u=u+Math.imul($,ne)|0;f=f+Math.imul(g,ae)|0;c=c+Math.imul(g,oe)|0;c=c+Math.imul(S,ae)|0;u=u+Math.imul(S,oe)|0;f=f+Math.imul(y,ce)|0;c=c+Math.imul(y,ue)|0;c=c+Math.imul(w,ce)|0;u=u+Math.imul(w,ue)|0;f=f+Math.imul(b,le)|0;c=c+Math.imul(b,de)|0;c=c+Math.imul(m,le)|0;u=u+Math.imul(m,de)|0;f=f+Math.imul(l,be)|0;c=c+Math.imul(l,me)|0;c=c+Math.imul(d,be)|0;u=u+Math.imul(d,me)|0;var Ce=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ce>>>26)|0;Ce&=67108863;f=Math.imul(j,G);c=Math.imul(j,X);c=c+Math.imul(L,G)|0;u=Math.imul(L,X);f=f+Math.imul(O,z)|0;c=c+Math.imul(O,W)|0;c=c+Math.imul(D,z)|0;u=u+Math.imul(D,W)|0;f=f+Math.imul(k,q)|0;c=c+Math.imul(k,Q)|0;c=c+Math.imul(R,q)|0;u=u+Math.imul(R,Q)|0;f=f+Math.imul(x,ee)|0;c=c+Math.imul(x,te)|0;c=c+Math.imul(N,ee)|0;u=u+Math.imul(N,te)|0;f=f+Math.imul(P,ie)|0;c=c+Math.imul(P,ne)|0;c=c+Math.imul(T,ie)|0;u=u+Math.imul(T,ne)|0;f=f+Math.imul(_,ae)|0;c=c+Math.imul(_,oe)|0;c=c+Math.imul($,ae)|0;u=u+Math.imul($,oe)|0;f=f+Math.imul(g,ce)|0;c=c+Math.imul(g,ue)|0;c=c+Math.imul(S,ce)|0;u=u+Math.imul(S,ue)|0;f=f+Math.imul(y,le)|0;c=c+Math.imul(y,de)|0;c=c+Math.imul(w,le)|0;u=u+Math.imul(w,de)|0;f=f+Math.imul(b,be)|0;c=c+Math.imul(b,me)|0;c=c+Math.imul(m,be)|0;u=u+Math.imul(m,me)|0;var Pe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Pe>>>26)|0;Pe&=67108863;f=Math.imul(j,z);c=Math.imul(j,W);c=c+Math.imul(L,z)|0;u=Math.imul(L,W);f=f+Math.imul(O,q)|0;c=c+Math.imul(O,Q)|0;c=c+Math.imul(D,q)|0;u=u+Math.imul(D,Q)|0;f=f+Math.imul(k,ee)|0;c=c+Math.imul(k,te)|0;c=c+Math.imul(R,ee)|0;u=u+Math.imul(R,te)|0;f=f+Math.imul(x,ie)|0;c=c+Math.imul(x,ne)|0;c=c+Math.imul(N,ie)|0;u=u+Math.imul(N,ne)|0;f=f+Math.imul(P,ae)|0;c=c+Math.imul(P,oe)|0;c=c+Math.imul(T,ae)|0;u=u+Math.imul(T,oe)|0;f=f+Math.imul(_,ce)|0;c=c+Math.imul(_,ue)|0;c=c+Math.imul($,ce)|0;u=u+Math.imul($,ue)|0;f=f+Math.imul(g,le)|0;c=c+Math.imul(g,de)|0;c=c+Math.imul(S,le)|0;u=u+Math.imul(S,de)|0;f=f+Math.imul(y,be)|0;c=c+Math.imul(y,me)|0;c=c+Math.imul(w,be)|0;u=u+Math.imul(w,me)|0;var Te=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Te>>>26)|0;Te&=67108863;f=Math.imul(j,q);c=Math.imul(j,Q);c=c+Math.imul(L,q)|0;u=Math.imul(L,Q);f=f+Math.imul(O,ee)|0;c=c+Math.imul(O,te)|0;c=c+Math.imul(D,ee)|0;u=u+Math.imul(D,te)|0;f=f+Math.imul(k,ie)|0;c=c+Math.imul(k,ne)|0;c=c+Math.imul(R,ie)|0;u=u+Math.imul(R,ne)|0;f=f+Math.imul(x,ae)|0;c=c+Math.imul(x,oe)|0;c=c+Math.imul(N,ae)|0;u=u+Math.imul(N,oe)|0;f=f+Math.imul(P,ce)|0;c=c+Math.imul(P,ue)|0;c=c+Math.imul(T,ce)|0;u=u+Math.imul(T,ue)|0;f=f+Math.imul(_,le)|0;c=c+Math.imul(_,de)|0;c=c+Math.imul($,le)|0;u=u+Math.imul($,de)|0;f=f+Math.imul(g,be)|0;c=c+Math.imul(g,me)|0;c=c+Math.imul(S,be)|0;u=u+Math.imul(S,me)|0;var Ie=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ie>>>26)|0;Ie&=67108863;f=Math.imul(j,ee);c=Math.imul(j,te);c=c+Math.imul(L,ee)|0;u=Math.imul(L,te);f=f+Math.imul(O,ie)|0;c=c+Math.imul(O,ne)|0;c=c+Math.imul(D,ie)|0;u=u+Math.imul(D,ne)|0;f=f+Math.imul(k,ae)|0;c=c+Math.imul(k,oe)|0;c=c+Math.imul(R,ae)|0;u=u+Math.imul(R,oe)|0;f=f+Math.imul(x,ce)|0;c=c+Math.imul(x,ue)|0;c=c+Math.imul(N,ce)|0;u=u+Math.imul(N,ue)|0;f=f+Math.imul(P,le)|0;c=c+Math.imul(P,de)|0;c=c+Math.imul(T,le)|0;u=u+Math.imul(T,de)|0;f=f+Math.imul(_,be)|0;c=c+Math.imul(_,me)|0;c=c+Math.imul($,be)|0;u=u+Math.imul($,me)|0;var xe=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(xe>>>26)|0;xe&=67108863;f=Math.imul(j,ie);c=Math.imul(j,ne);c=c+Math.imul(L,ie)|0;u=Math.imul(L,ne);f=f+Math.imul(O,ae)|0;c=c+Math.imul(O,oe)|0;c=c+Math.imul(D,ae)|0;u=u+Math.imul(D,oe)|0;f=f+Math.imul(k,ce)|0;c=c+Math.imul(k,ue)|0;c=c+Math.imul(R,ce)|0;u=u+Math.imul(R,ue)|0;f=f+Math.imul(x,le)|0;c=c+Math.imul(x,de)|0;c=c+Math.imul(N,le)|0;u=u+Math.imul(N,de)|0;f=f+Math.imul(P,be)|0;c=c+Math.imul(P,me)|0;c=c+Math.imul(T,be)|0;u=u+Math.imul(T,me)|0;var Ne=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Ne>>>26)|0;Ne&=67108863;f=Math.imul(j,ae);c=Math.imul(j,oe);c=c+Math.imul(L,ae)|0;u=Math.imul(L,oe);f=f+Math.imul(O,ce)|0;c=c+Math.imul(O,ue)|0;c=c+Math.imul(D,ce)|0;u=u+Math.imul(D,ue)|0;f=f+Math.imul(k,le)|0;c=c+Math.imul(k,de)|0;c=c+Math.imul(R,le)|0;u=u+Math.imul(R,de)|0;f=f+Math.imul(x,be)|0;c=c+Math.imul(x,me)|0;c=c+Math.imul(N,be)|0;u=u+Math.imul(N,me)|0;var Me=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Me>>>26)|0;Me&=67108863;f=Math.imul(j,ce);c=Math.imul(j,ue);c=c+Math.imul(L,ce)|0;u=Math.imul(L,ue);f=f+Math.imul(O,le)|0;c=c+Math.imul(O,de)|0;c=c+Math.imul(D,le)|0;u=u+Math.imul(D,de)|0;f=f+Math.imul(k,be)|0;c=c+Math.imul(k,me)|0;c=c+Math.imul(R,be)|0;u=u+Math.imul(R,me)|0;var ke=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(ke>>>26)|0;ke&=67108863;f=Math.imul(j,le);c=Math.imul(j,de);c=c+Math.imul(L,le)|0;u=Math.imul(L,de);f=f+Math.imul(O,be)|0;c=c+Math.imul(O,me)|0;c=c+Math.imul(D,be)|0;u=u+Math.imul(D,me)|0;var Re=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Re>>>26)|0;Re&=67108863;f=Math.imul(j,be);c=Math.imul(j,me);c=c+Math.imul(L,be)|0;u=Math.imul(L,me);var Be=(o+f|0)+((c&8191)<<13)|0;o=(u+(c>>>13)|0)+(Be>>>26)|0;Be&=67108863;a[0]=ve;a[1]=ye;a[2]=we;a[3]=Ae;a[4]=ge;a[5]=Se;a[6]=Ee;a[7]=_e;a[8]=$e;a[9]=Ce;a[10]=Pe;a[11]=Te;a[12]=Ie;a[13]=xe;a[14]=Ne;a[15]=Me;a[16]=ke;a[17]=Re;a[18]=Be;if(o!==0){a[19]=o;i.length++}return i};if(!Math.imul){p=d}function b(e,t,r){r.negative=t.negative^e.negative;r.length=e.length+t.length;var i=0;var n=0;for(var s=0;s<r.length-1;s++){var a=n;n=0;var o=i&67108863;var f=Math.min(s,t.length-1);for(var c=Math.max(0,s-e.length+1);c<=f;c++){var u=s-c;var h=e.words[u]|0;var l=t.words[c]|0;var d=h*l;var p=d&67108863;a=a+(d/67108864|0)|0;p=p+o|0;o=p&67108863;a=a+(p>>>26)|0;n+=a>>>26;a&=67108863}r.words[s]=o;i=a;a=n}if(i!==0){r.words[s]=i}else{r.length--}return r.strip()}function m(e,t,r){var i=new v;return i.mulp(e,t,r)}n.prototype.mulTo=function e(t,r){var i;var n=this.length+t.length;if(this.length===10&&t.length===10){i=p(this,t,r)}else if(n<63){i=d(this,t,r)}else if(n<1024){i=b(this,t,r)}else{i=m(this,t,r)}return i};function v(e,t){this.x=e;this.y=t}v.prototype.makeRBT=function e(t){var r=new Array(t);var i=n.prototype._countBits(t)-1;for(var s=0;s<t;s++){r[s]=this.revBin(s,i,t)}return r};v.prototype.revBin=function e(t,r,i){if(t===0||t===i-1)return t;var n=0;for(var s=0;s<r;s++){n|=(t&1)<<r-s-1;t>>=1}return n};v.prototype.permute=function e(t,r,i,n,s,a){for(var o=0;o<a;o++){n[o]=r[t[o]];s[o]=i[t[o]]}};v.prototype.transform=function e(t,r,i,n,s,a){this.permute(a,t,r,i,n,s);for(var o=1;o<s;o<<=1){var f=o<<1;var c=Math.cos(2*Math.PI/f);var u=Math.sin(2*Math.PI/f);for(var h=0;h<s;h+=f){var l=c;var d=u;for(var p=0;p<o;p++){var b=i[h+p];var m=n[h+p];var v=i[h+p+o];var y=n[h+p+o];var w=l*v-d*y;y=l*y+d*v;v=w;i[h+p]=b+v;n[h+p]=m+y;i[h+p+o]=b-v;n[h+p+o]=m-y;if(p!==f){w=c*l-u*d;d=c*d+u*l;l=w}}}}};v.prototype.guessLen13b=function e(t,r){var i=Math.max(r,t)|1;var n=i&1;var s=0;for(i=i/2|0;i;i=i>>>1){s++}return 1<<s+1+n};v.prototype.conjugate=function e(t,r,i){if(i<=1)return;for(var n=0;n<i/2;n++){var s=t[n];t[n]=t[i-n-1];t[i-n-1]=s;s=r[n];r[n]=-r[i-n-1];r[i-n-1]=-s}};v.prototype.normalize13b=function e(t,r){var i=0;for(var n=0;n<r/2;n++){var s=Math.round(t[2*n+1]/r)*8192+Math.round(t[2*n]/r)+i;t[n]=s&67108863;if(s<67108864){i=0}else{i=s/67108864|0}}return t};v.prototype.convert13b=function e(t,i,n,s){var a=0;for(var o=0;o<i;o++){a=a+(t[o]|0);n[2*o]=a&8191;a=a>>>13;n[2*o+1]=a&8191;a=a>>>13}for(o=2*i;o<s;++o){n[o]=0}r(a===0);r((a&~8191)===0)};v.prototype.stub=function e(t){var r=new Array(t);for(var i=0;i<t;i++){r[i]=0}return r};v.prototype.mulp=function e(t,r,i){var n=2*this.guessLen13b(t.length,r.length);var s=this.makeRBT(n);var a=this.stub(n);var o=new Array(n);var f=new Array(n);var c=new Array(n);var u=new Array(n);var h=new Array(n);var l=new Array(n);var d=i.words;d.length=n;this.convert13b(t.words,t.length,o,n);this.convert13b(r.words,r.length,u,n);this.transform(o,a,f,c,n,s);this.transform(u,a,h,l,n,s);for(var p=0;p<n;p++){var b=f[p]*h[p]-c[p]*l[p];c[p]=f[p]*l[p]+c[p]*h[p];f[p]=b}this.conjugate(f,c,n);this.transform(f,c,d,a,n,s);this.conjugate(d,a,n);this.normalize13b(d,n);i.negative=t.negative^r.negative;i.length=t.length+r.length;return i.strip()};n.prototype.mul=function e(t){var r=new n(null);r.words=new Array(this.length+t.length);return this.mulTo(t,r)};n.prototype.mulf=function e(t){var r=new n(null);r.words=new Array(this.length+t.length);return m(this,t,r)};n.prototype.imul=function e(t){return this.clone().mulTo(t,this)};n.prototype.imuln=function e(t){r(typeof t==="number");r(t<67108864);var i=0;for(var n=0;n<this.length;n++){var s=(this.words[n]|0)*t;var a=(s&67108863)+(i&67108863);i>>=26;i+=s/67108864|0;i+=a>>>26;this.words[n]=a&67108863}if(i!==0){this.words[n]=i;this.length++}return this};n.prototype.muln=function e(t){return this.clone().imuln(t)};n.prototype.sqr=function e(){return this.mul(this)};n.prototype.isqr=function e(){return this.imul(this.clone())};n.prototype.pow=function e(t){var r=l(t);if(r.length===0)return new n(1);var i=this;for(var s=0;s<r.length;s++,i=i.sqr()){if(r[s]!==0)break}if(++s<r.length){for(var a=i.sqr();s<r.length;s++,a=a.sqr()){if(r[s]===0)continue;i=i.mul(a)}}return i};n.prototype.iushln=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;var s=67108863>>>26-i<<26-i;var a;if(i!==0){var o=0;for(a=0;a<this.length;a++){var f=this.words[a]&s;var c=(this.words[a]|0)-f<<i;this.words[a]=c|o;o=f>>>26-i}if(o){this.words[a]=o;this.length++}}if(n!==0){for(a=this.length-1;a>=0;a--){this.words[a+n]=this.words[a]}for(a=0;a<n;a++){this.words[a]=0}this.length+=n}return this.strip()};n.prototype.ishln=function e(t){r(this.negative===0);return this.iushln(t)};n.prototype.iushrn=function e(t,i,n){r(typeof t==="number"&&t>=0);var s;if(i){s=(i-i%26)/26}else{s=0}var a=t%26;var o=Math.min((t-a)/26,this.length);var f=67108863^67108863>>>a<<a;var c=n;s-=o;s=Math.max(0,s);if(c){for(var u=0;u<o;u++){c.words[u]=this.words[u]}c.length=o}if(o===0);else if(this.length>o){this.length-=o;for(u=0;u<this.length;u++){this.words[u]=this.words[u+o]}}else{this.words[0]=0;this.length=1}var h=0;for(u=this.length-1;u>=0&&(h!==0||u>=s);u--){var l=this.words[u]|0;this.words[u]=h<<26-a|l>>>a;h=l&f}if(c&&h!==0){c.words[c.length++]=h}if(this.length===0){this.words[0]=0;this.length=1}return this.strip()};n.prototype.ishrn=function e(t,i,n){r(this.negative===0);return this.iushrn(t,i,n)};n.prototype.shln=function e(t){return this.clone().ishln(t)};n.prototype.ushln=function e(t){return this.clone().iushln(t)};n.prototype.shrn=function e(t){return this.clone().ishrn(t)};n.prototype.ushrn=function e(t){return this.clone().iushrn(t)};n.prototype.testn=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;var s=1<<i;if(this.length<=n)return false;var a=this.words[n];return!!(a&s)};n.prototype.imaskn=function e(t){r(typeof t==="number"&&t>=0);var i=t%26;var n=(t-i)/26;r(this.negative===0,"imaskn works only with positive numbers");if(this.length<=n){return this}if(i!==0){n++}this.length=Math.min(n,this.length);if(i!==0){var s=67108863^67108863>>>i<<i;this.words[this.length-1]&=s}return this.strip()};n.prototype.maskn=function e(t){return this.clone().imaskn(t)};n.prototype.iaddn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.isubn(-t);if(this.negative!==0){if(this.length===1&&(this.words[0]|0)<t){this.words[0]=t-(this.words[0]|0);this.negative=0;return this}this.negative=0;this.isubn(t);this.negative=1;return this}return this._iaddn(t)};n.prototype._iaddn=function e(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++){this.words[r]-=67108864;if(r===this.length-1){this.words[r+1]=1}else{this.words[r+1]++}}this.length=Math.max(this.length,r+1);return this};n.prototype.isubn=function e(t){r(typeof t==="number");r(t<67108864);if(t<0)return this.iaddn(-t);if(this.negative!==0){this.negative=0;this.iaddn(t);this.negative=1;return this}this.words[0]-=t;if(this.length===1&&this.words[0]<0){this.words[0]=-this.words[0];this.negative=1}else{for(var i=0;i<this.length&&this.words[i]<0;i++){this.words[i]+=67108864;this.words[i+1]-=1}}return this.strip()};n.prototype.addn=function e(t){return this.clone().iaddn(t)};n.prototype.subn=function e(t){return this.clone().isubn(t)};n.prototype.iabs=function e(){this.negative=0;return this};n.prototype.abs=function e(){return this.clone().iabs()};n.prototype._ishlnsubmul=function e(t,i,n){var s=t.length+n;var a;this._expand(s);var o;var f=0;for(a=0;a<t.length;a++){o=(this.words[a+n]|0)+f;var c=(t.words[a]|0)*i;o-=c&67108863;f=(o>>26)-(c/67108864|0);this.words[a+n]=o&67108863}for(;a<this.length-n;a++){o=(this.words[a+n]|0)+f;f=o>>26;this.words[a+n]=o&67108863}if(f===0)return this.strip();r(f===-1);f=0;for(a=0;a<this.length;a++){o=-(this.words[a]|0)+f;f=o>>26;this.words[a]=o&67108863}this.negative=1;return this.strip()};n.prototype._wordDiv=function e(t,r){var i=this.length-t.length;var s=this.clone();var a=t;var o=a.words[a.length-1]|0;var f=this._countBits(o);i=26-f;if(i!==0){a=a.ushln(i);s.iushln(i);o=a.words[a.length-1]|0}var c=s.length-a.length;var u;if(r!=="mod"){u=new n(null);u.length=c+1;u.words=new Array(u.length);for(var h=0;h<u.length;h++){u.words[h]=0}}var l=s.clone()._ishlnsubmul(a,1,c);if(l.negative===0){s=l;if(u){u.words[c]=1}}for(var d=c-1;d>=0;d--){var p=(s.words[a.length+d]|0)*67108864+(s.words[a.length+d-1]|0);p=Math.min(p/o|0,67108863);s._ishlnsubmul(a,p,d);while(s.negative!==0){p--;s.negative=0;s._ishlnsubmul(a,1,d);if(!s.isZero()){s.negative^=1}}if(u){u.words[d]=p}}if(u){u.strip()}s.strip();if(r!=="div"&&i!==0){s.iushrn(i)}return{div:u||null,mod:s}};n.prototype.divmod=function e(t,i,s){r(!t.isZero());if(this.isZero()){return{div:new n(0),mod:new n(0)}}var a,o,f;if(this.negative!==0&&t.negative===0){f=this.neg().divmod(t,i);if(i!=="mod"){a=f.div.neg()}if(i!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.iadd(t)}}return{div:a,mod:o}}if(this.negative===0&&t.negative!==0){f=this.divmod(t.neg(),i);if(i!=="mod"){a=f.div.neg()}return{div:a,mod:f.mod}}if((this.negative&t.negative)!==0){f=this.neg().divmod(t.neg(),i);if(i!=="div"){o=f.mod.neg();if(s&&o.negative!==0){o.isub(t)}}return{div:f.div,mod:o}}if(t.length>this.length||this.cmp(t)<0){return{div:new n(0),mod:this}}if(t.length===1){if(i==="div"){return{div:this.divn(t.words[0]),mod:null}}if(i==="mod"){return{div:null,mod:new n(this.modn(t.words[0]))}}return{div:this.divn(t.words[0]),mod:new n(this.modn(t.words[0]))}}return this._wordDiv(t,i)};n.prototype.div=function e(t){return this.divmod(t,"div",false).div};n.prototype.mod=function e(t){return this.divmod(t,"mod",false).mod};n.prototype.umod=function e(t){return this.divmod(t,"mod",true).mod};n.prototype.divRound=function e(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var i=r.div.negative!==0?r.mod.isub(t):r.mod;var n=t.ushrn(1);var s=t.andln(1);var a=i.cmp(n);if(a<0||s===1&&a===0)return r.div;return r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)};n.prototype.modn=function e(t){r(t<=67108863);var i=(1<<26)%t;var n=0;for(var s=this.length-1;s>=0;s--){n=(i*n+(this.words[s]|0))%t}return n};n.prototype.idivn=function e(t){r(t<=67108863);var i=0;for(var n=this.length-1;n>=0;n--){var s=(this.words[n]|0)+i*67108864;this.words[n]=s/t|0;i=s%t}return this.strip()};n.prototype.divn=function e(t){return this.clone().idivn(t)};n.prototype.egcd=function e(t){r(t.negative===0);r(!t.isZero());var i=this;var s=t.clone();if(i.negative!==0){i=i.umod(t)}else{i=i.clone()}var a=new n(1);var o=new n(0);var f=new n(0);var c=new n(1);var u=0;while(i.isEven()&&s.isEven()){i.iushrn(1);s.iushrn(1);++u}var h=s.clone();var l=i.clone();while(!i.isZero()){for(var d=0,p=1;(i.words[0]&p)===0&&d<26;++d,p<<=1);if(d>0){i.iushrn(d);while(d-- >0){if(a.isOdd()||o.isOdd()){a.iadd(h);o.isub(l)}a.iushrn(1);o.iushrn(1)}}for(var b=0,m=1;(s.words[0]&m)===0&&b<26;++b,m<<=1);if(b>0){s.iushrn(b);while(b-- >0){if(f.isOdd()||c.isOdd()){f.iadd(h);c.isub(l)}f.iushrn(1);c.iushrn(1)}}if(i.cmp(s)>=0){i.isub(s);a.isub(f);o.isub(c)}else{s.isub(i);f.isub(a);c.isub(o)}}return{a:f,b:c,gcd:s.iushln(u)}};n.prototype._invmp=function e(t){r(t.negative===0);r(!t.isZero());var i=this;var s=t.clone();if(i.negative!==0){i=i.umod(t)}else{i=i.clone()}var a=new n(1);var o=new n(0);var f=s.clone();while(i.cmpn(1)>0&&s.cmpn(1)>0){for(var c=0,u=1;(i.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0){i.iushrn(c);while(c-- >0){if(a.isOdd()){a.iadd(f)}a.iushrn(1)}}for(var h=0,l=1;(s.words[0]&l)===0&&h<26;++h,l<<=1);if(h>0){s.iushrn(h);while(h-- >0){if(o.isOdd()){o.iadd(f)}o.iushrn(1)}}if(i.cmp(s)>=0){i.isub(s);a.isub(o)}else{s.isub(i);o.isub(a)}}var d;if(i.cmpn(1)===0){d=a}else{d=o}if(d.cmpn(0)<0){d.iadd(t)}return d};n.prototype.gcd=function e(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone();var i=t.clone();r.negative=0;i.negative=0;for(var n=0;r.isEven()&&i.isEven();n++){r.iushrn(1);i.iushrn(1)}do{while(r.isEven()){r.iushrn(1)}while(i.isEven()){i.iushrn(1)}var s=r.cmp(i);if(s<0){var a=r;r=i;i=a}else if(s===0||i.cmpn(1)===0){break}r.isub(i)}while(true);return i.iushln(n)};n.prototype.invm=function e(t){return this.egcd(t).a.umod(t)};n.prototype.isEven=function e(){return(this.words[0]&1)===0};n.prototype.isOdd=function e(){return(this.words[0]&1)===1};n.prototype.andln=function e(t){return this.words[0]&t};n.prototype.bincn=function e(t){r(typeof t==="number");var i=t%26;var n=(t-i)/26;var s=1<<i;if(this.length<=n){this._expand(n+1);this.words[n]|=s;return this}var a=s;for(var o=n;a!==0&&o<this.length;o++){var f=this.words[o]|0;f+=a;a=f>>>26;f&=67108863;this.words[o]=f}if(a!==0){this.words[o]=a;this.length++}return this};n.prototype.isZero=function e(){return this.length===1&&this.words[0]===0};n.prototype.cmpn=function e(t){var i=t<0;if(this.negative!==0&&!i)return-1;if(this.negative===0&&i)return 1;this.strip();var n;if(this.length>1){n=1}else{if(i){t=-t}r(t<=67108863,"Number is too big");var s=this.words[0]|0;n=s===t?0:s<t?-1:1}if(this.negative!==0)return-n|0;return n};n.prototype.cmp=function e(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);if(this.negative!==0)return-r|0;return r};n.prototype.ucmp=function e(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;var r=0;for(var i=this.length-1;i>=0;i--){var n=this.words[i]|0;var s=t.words[i]|0;if(n===s)continue;if(n<s){r=-1}else if(n>s){r=1}break}return r};n.prototype.gtn=function e(t){return this.cmpn(t)===1};n.prototype.gt=function e(t){return this.cmp(t)===1};n.prototype.gten=function e(t){return this.cmpn(t)>=0};n.prototype.gte=function e(t){return this.cmp(t)>=0};n.prototype.ltn=function e(t){return this.cmpn(t)===-1};n.prototype.lt=function e(t){return this.cmp(t)===-1};n.prototype.lten=function e(t){return this.cmpn(t)<=0};n.prototype.lte=function e(t){return this.cmp(t)<=0};n.prototype.eqn=function e(t){return this.cmpn(t)===0};n.prototype.eq=function e(t){return this.cmp(t)===0};n.red=function e(t){return new _(t)};n.prototype.toRed=function e(t){r(!this.red,"Already a number in reduction context");r(this.negative===0,"red works only with positives");return t.convertTo(this)._forceRed(t)};n.prototype.fromRed=function e(){r(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};n.prototype._forceRed=function e(t){this.red=t;return this};n.prototype.forceRed=function e(t){r(!this.red,"Already a number in reduction context");return this._forceRed(t)};n.prototype.redAdd=function e(t){r(this.red,"redAdd works only with red numbers");return this.red.add(this,t)};n.prototype.redIAdd=function e(t){r(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,t)};n.prototype.redSub=function e(t){r(this.red,"redSub works only with red numbers");return this.red.sub(this,t)};n.prototype.redISub=function e(t){r(this.red,"redISub works only with red numbers");return this.red.isub(this,t)};n.prototype.redShl=function e(t){r(this.red,"redShl works only with red numbers");return this.red.shl(this,t)};n.prototype.redMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.mul(this,t)};n.prototype.redIMul=function e(t){r(this.red,"redMul works only with red numbers");this.red._verify2(this,t);return this.red.imul(this,t)};n.prototype.redSqr=function e(){r(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};n.prototype.redISqr=function e(){r(this.red,"redISqr works only with red numbers");this.red._verify1(this);return this.red.isqr(this)};n.prototype.redSqrt=function e(){r(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};n.prototype.redInvm=function e(){r(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};n.prototype.redNeg=function e(){r(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};n.prototype.redPow=function e(t){r(this.red&&!t.red,"redPow(normalNum)");this.red._verify1(this);return this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e;this.p=new n(t,16);this.n=this.p.bitLength();this.k=new n(1).iushln(this.n).isub(this.p);this.tmp=this._tmp()}w.prototype._tmp=function e(){var t=new n(null);t.words=new Array(Math.ceil(this.n/13));return t};w.prototype.ireduce=function e(t){var r=t;var i;do{this.split(r,this.tmp);r=this.imulK(r);r=r.iadd(this.tmp);i=r.bitLength()}while(i>this.n);var n=i<this.n?-1:r.ucmp(this.p);if(n===0){r.words[0]=0;r.length=1}else if(n>0){r.isub(this.p)}else{if(r.strip!==undefined){r.strip()}else{r._strip()}}return r};w.prototype.split=function e(t,r){t.iushrn(this.n,0,r)};w.prototype.imulK=function e(t){return t.imul(this.k)};function A(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(A,w);A.prototype.split=function e(t,r){var i=4194303;var n=Math.min(t.length,9);for(var s=0;s<n;s++){r.words[s]=t.words[s]}r.length=n;if(t.length<=9){t.words[0]=0;t.length=1;return}var a=t.words[9];r.words[r.length++]=a&i;for(s=10;s<t.length;s++){var o=t.words[s]|0;t.words[s-10]=(o&i)<<4|a>>>22;a=o}a>>>=22;t.words[s-10]=a;if(a===0&&t.length>10){t.length-=10}else{t.length-=9}};A.prototype.imulK=function e(t){t.words[t.length]=0;t.words[t.length+1]=0;t.length+=2;var r=0;for(var i=0;i<t.length;i++){var n=t.words[i]|0;r+=n*977;t.words[i]=r&67108863;r=n*64+(r/67108864|0)}if(t.words[t.length-1]===0){t.length--;if(t.words[t.length-1]===0){t.length--}}return t};function g(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(g,w);function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(S,w);function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(E,w);E.prototype.imulK=function e(t){var r=0;for(var i=0;i<t.length;i++){var n=(t.words[i]|0)*19+r;var s=n&67108863;n>>>=26;t.words[i]=s;r=n}if(r!==0){t.words[t.length++]=r}return t};n._prime=function e(t){if(y[t])return y[t];var e;if(t==="k256"){e=new A}else if(t==="p224"){e=new g}else if(t==="p192"){e=new S}else if(t==="p25519"){e=new E}else{throw new Error("Unknown prime "+t)}y[t]=e;return e};function _(e){if(typeof e==="string"){var t=n._prime(e);this.m=t.p;this.prime=t}else{r(e.gtn(1),"modulus must be greater than 1");this.m=e;this.prime=null}}_.prototype._verify1=function e(t){r(t.negative===0,"red works only with positives");r(t.red,"red works only with red numbers")};_.prototype._verify2=function e(t,i){r((t.negative|i.negative)===0,"red works only with positives");r(t.red&&t.red===i.red,"red works only with red numbers")};_.prototype.imod=function e(t){if(this.prime)return this.prime.ireduce(t)._forceRed(this);return t.umod(this.m)._forceRed(this)};_.prototype.neg=function e(t){if(t.isZero()){return t.clone()}return this.m.sub(t)._forceRed(this)};_.prototype.add=function e(t,r){this._verify2(t,r);var i=t.add(r);if(i.cmp(this.m)>=0){i.isub(this.m)}return i._forceRed(this)};_.prototype.iadd=function e(t,r){this._verify2(t,r);var i=t.iadd(r);if(i.cmp(this.m)>=0){i.isub(this.m)}return i};_.prototype.sub=function e(t,r){this._verify2(t,r);var i=t.sub(r);if(i.cmpn(0)<0){i.iadd(this.m)}return i._forceRed(this)};_.prototype.isub=function e(t,r){this._verify2(t,r);var i=t.isub(r);if(i.cmpn(0)<0){i.iadd(this.m)}return i};_.prototype.shl=function e(t,r){this._verify1(t);return this.imod(t.ushln(r))};_.prototype.imul=function e(t,r){this._verify2(t,r);return this.imod(t.imul(r))};_.prototype.mul=function e(t,r){this._verify2(t,r);return this.imod(t.mul(r))};_.prototype.isqr=function e(t){return this.imul(t,t.clone())};_.prototype.sqr=function e(t){return this.mul(t,t)};_.prototype.sqrt=function e(t){if(t.isZero())return t.clone();var i=this.m.andln(3);r(i%2===1);if(i===3){var s=this.m.add(new n(1)).iushrn(2);return this.pow(t,s)}var a=this.m.subn(1);var o=0;while(!a.isZero()&&a.andln(1)===0){o++;a.iushrn(1)}r(!a.isZero());var f=new n(1).toRed(this);var c=f.redNeg();var u=this.m.subn(1).iushrn(1);var h=this.m.bitLength();h=new n(2*h*h).toRed(this);while(this.pow(h,u).cmp(c)!==0){h.redIAdd(c)}var l=this.pow(h,a);var d=this.pow(t,a.addn(1).iushrn(1));var p=this.pow(t,a);var b=o;while(p.cmp(f)!==0){var m=p;for(var v=0;m.cmp(f)!==0;v++){m=m.redSqr()}r(v<b);var y=this.pow(l,new n(1).iushln(b-v-1));d=d.redMul(y);l=y.redSqr();p=p.redMul(l);b=v}return d};_.prototype.invm=function e(t){var r=t._invmp(this.m);if(r.negative!==0){r.negative=0;return this.imod(r).redNeg()}else{return this.imod(r)}};_.prototype.pow=function e(t,r){if(r.isZero())return new n(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var i=4;var s=new Array(1<<i);s[0]=new n(1).toRed(this);s[1]=t;for(var a=2;a<s.length;a++){s[a]=this.mul(s[a-1],t)}var o=s[0];var f=0;var c=0;var u=r.bitLength()%26;if(u===0){u=26}for(a=r.length-1;a>=0;a--){var h=r.words[a];for(var l=u-1;l>=0;l--){var d=h>>l&1;if(o!==s[0]){o=this.sqr(o)}if(d===0&&f===0){c=0;continue}f<<=1;f|=d;c++;if(c!==i&&(a!==0||l!==0))continue;o=this.mul(o,s[f]);c=0;f=0}u=26}return o};_.prototype.convertTo=function e(t){var r=t.umod(this.m);return r===t?r.clone():r};_.prototype.convertFrom=function e(t){var r=t.clone();r.red=null;return r};n.mont=function e(t){return new $(t)};function $(e){_.call(this,e);this.shift=this.m.bitLength();if(this.shift%26!==0){this.shift+=26-this.shift%26}this.r=new n(1).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}i($,_);$.prototype.convertTo=function e(t){return this.imod(t.ushln(this.shift))};$.prototype.convertFrom=function e(t){var r=this.imod(t.mul(this.rinv));r.red=null;return r};$.prototype.imul=function e(t,r){if(t.isZero()||r.isZero()){t.words[0]=0;t.length=1;return t}var i=t.imul(r);var n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var s=i.isub(n).iushrn(this.shift);var a=s;if(s.cmp(this.m)>=0){a=s.isub(this.m)}else if(s.cmpn(0)<0){a=s.iadd(this.m)}return a._forceRed(this)};$.prototype.mul=function e(t,r){if(t.isZero()||r.isZero())return new n(0)._forceRed(this);var i=t.mul(r);var s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);var a=i.isub(s).iushrn(this.shift);var o=a;if(a.cmp(this.m)>=0){o=a.isub(this.m)}else if(a.cmpn(0)<0){o=a.iadd(this.m)}return o._forceRed(this)};$.prototype.invm=function e(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(e,commonjsGlobal)}));var utils_1$1=createCommonjsModule$1((function(e,t){var r=t;function i(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if(typeof e!=="string"){for(var i=0;i<e.length;i++)r[i]=e[i]|0;return r}if(t==="hex"){e=e.replace(/[^a-z0-9]+/gi,"");if(e.length%2!==0)e="0"+e;for(var i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else{for(var i=0;i<e.length;i++){var n=e.charCodeAt(i);var s=n>>8;var a=n&255;if(s)r.push(s,a);else r.push(a)}}return r}r.toArray=i;function n(e){if(e.length===1)return"0"+e;else return e}r.zero2=n;function s(e){var t="";for(var r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toHex=s;r.encode=function e(t,r){if(r==="hex")return s(t);else return t}}));var utils_1=createCommonjsModule$1((function(e,t){var r=t;r.assert=minimalisticAssert$1;r.toArray=utils_1$1.toArray;r.zero2=utils_1$1.zero2;r.toHex=utils_1$1.toHex;r.encode=utils_1$1.encode;function i(e,t){var r=[];var i=1<<t+1;var n=e.clone();while(n.cmpn(1)>=0){var s;if(n.isOdd()){var a=n.andln(i-1);if(a>(i>>1)-1)s=(i>>1)-a;else s=a;n.isubn(s)}else{s=0}r.push(s);var o=n.cmpn(0)!==0&&n.andln(i-1)===0?t+1:1;for(var f=1;f<o;f++)r.push(0);n.iushrn(o)}return r}r.getNAF=i;function n(e,t){var r=[[],[]];e=e.clone();t=t.clone();var i=0;var n=0;while(e.cmpn(-i)>0||t.cmpn(-n)>0){var s=e.andln(3)+i&3;var a=t.andln(3)+n&3;if(s===3)s=-1;if(a===3)a=-1;var o;if((s&1)===0){o=0}else{var f=e.andln(7)+i&7;if((f===3||f===5)&&a===2)o=-s;else o=s}r[0].push(o);var c;if((a&1)===0){c=0}else{var f=t.andln(7)+n&7;if((f===3||f===5)&&s===2)c=-a;else c=a}r[1].push(c);if(2*i===o+1)i=1-i;if(2*n===c+1)n=1-n;e.iushrn(1);t.iushrn(1)}return r}r.getJSF=n;function s(e,t,r){var i="_"+t;e.prototype[t]=function e(){return this[i]!==undefined?this[i]:this[i]=r.call(this)}}r.cachedProperty=s;function a(e){return typeof e==="string"?r.toArray(e,"hex"):e}r.parseBytes=a;function o(e){return new bn(e,"hex","le")}r.intFromLE=o}));var r;var brorand=function e(t){if(!r)r=new Rand(null);return r.generate(t)};function Rand(e){this.rand=e}var Rand_1=Rand;Rand.prototype.generate=function e(t){return this._rand(t)};Rand.prototype._rand=function e(t){if(this.rand.getBytes)return this.rand.getBytes(t);var r=new Uint8Array(t);for(var i=0;i<r.length;i++)r[i]=this.rand.getByte();return r};if(typeof self==="object"){if(self.crypto&&self.crypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.crypto.getRandomValues(r);return r}}else if(self.msCrypto&&self.msCrypto.getRandomValues){Rand.prototype._rand=function e(t){var r=new Uint8Array(t);self.msCrypto.getRandomValues(r);return r}}else if(typeof window==="object"){Rand.prototype._rand=function(){throw new Error("Not implemented yet")}}}else{try{var crypto$4=require$$0;if(typeof crypto$4.randomBytes!=="function")throw new Error("Not supported");Rand.prototype._rand=function e(t){return crypto$4.randomBytes(t)}}catch(e){}}brorand.Rand=Rand_1;var getNAF=utils_1.getNAF;var getJSF=utils_1.getJSF;var assert$8=utils_1.assert;function BaseCurve(e,t){this.type=e;this.p=new bn(t.p,16);this.red=t.prime?bn.red(t.prime):bn.mont(this.p);this.zero=new bn(0).toRed(this.red);this.one=new bn(1).toRed(this.red);this.two=new bn(2).toRed(this.red);this.n=t.n&&new bn(t.n,16);this.g=t.g&&this.pointFromJSON(t.g,t.gRed);this._wnafT1=new Array(4);this._wnafT2=new Array(4);this._wnafT3=new Array(4);this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);if(!r||r.cmpn(100)>0){this.redN=null}else{this._maxwellTrick=true;this.redN=this.n.toRed(this.red)}}var base$e=BaseCurve;BaseCurve.prototype.point=function e(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function e(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function e(t,r){assert$8(t.precomputed);var i=t._getDoubles();var n=getNAF(r,1);var s=(1<<i.step+1)-(i.step%2===0?2:1);s/=3;var a=[];for(var o=0;o<n.length;o+=i.step){var f=0;for(var r=o+i.step-1;r>=o;r--)f=(f<<1)+n[r];a.push(f)}var c=this.jpoint(null,null,null);var u=this.jpoint(null,null,null);for(var h=s;h>0;h--){for(var o=0;o<a.length;o++){var f=a[o];if(f===h)u=u.mixedAdd(i.points[o]);else if(f===-h)u=u.mixedAdd(i.points[o].neg())}c=c.add(u)}return c.toP()};BaseCurve.prototype._wnafMul=function e(t,r){var i=4;var n=t._getNAFPoints(i);i=n.wnd;var s=n.points;var a=getNAF(r,i);var o=this.jpoint(null,null,null);for(var f=a.length-1;f>=0;f--){for(var r=0;f>=0&&a[f]===0;f--)r++;if(f>=0)r++;o=o.dblp(r);if(f<0)break;var c=a[f];assert$8(c!==0);if(t.type==="affine"){if(c>0)o=o.mixedAdd(s[c-1>>1]);else o=o.mixedAdd(s[-c-1>>1].neg())}else{if(c>0)o=o.add(s[c-1>>1]);else o=o.add(s[-c-1>>1].neg())}}return t.type==="affine"?o.toP():o};BaseCurve.prototype._wnafMulAdd=function e(t,r,i,n,s){var a=this._wnafT1;var o=this._wnafT2;var f=this._wnafT3;var c=0;for(var u=0;u<n;u++){var h=r[u];var l=h._getNAFPoints(t);a[u]=l.wnd;o[u]=l.points}for(var u=n-1;u>=1;u-=2){var d=u-1;var p=u;if(a[d]!==1||a[p]!==1){f[d]=getNAF(i[d],a[d]);f[p]=getNAF(i[p],a[p]);c=Math.max(f[d].length,c);c=Math.max(f[p].length,c);continue}var b=[r[d],null,null,r[p]];if(r[d].y.cmp(r[p].y)===0){b[1]=r[d].add(r[p]);b[2]=r[d].toJ().mixedAdd(r[p].neg())}else if(r[d].y.cmp(r[p].y.redNeg())===0){b[1]=r[d].toJ().mixedAdd(r[p]);b[2]=r[d].add(r[p].neg())}else{b[1]=r[d].toJ().mixedAdd(r[p]);b[2]=r[d].toJ().mixedAdd(r[p].neg())}var m=[-3,-1,-5,-7,0,7,5,1,3];var v=getJSF(i[d],i[p]);c=Math.max(v[0].length,c);f[d]=new Array(c);f[p]=new Array(c);for(var y=0;y<c;y++){var w=v[0][y]|0;var A=v[1][y]|0;f[d][y]=m[(w+1)*3+(A+1)];f[p][y]=0;o[d]=b}}var g=this.jpoint(null,null,null);var S=this._wnafT4;for(var u=c;u>=0;u--){var E=0;while(u>=0){var _=true;for(var y=0;y<n;y++){S[y]=f[y][u]|0;if(S[y]!==0)_=false}if(!_)break;E++;u--}if(u>=0)E++;g=g.dblp(E);if(u<0)break;for(var y=0;y<n;y++){var $=S[y];var h;if($===0)continue;else if($>0)h=o[y][$-1>>1];else if($<0)h=o[y][-$-1>>1].neg();if(h.type==="affine")g=g.mixedAdd(h);else g=g.add(h)}}for(var u=0;u<n;u++)o[u]=null;if(s)return g;else return g.toP()};function BasePoint(e,t){this.curve=e;this.type=t;this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function e(){throw new Error("Not implemented")};BasePoint.prototype.validate=function e(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function e(t,r){t=utils_1.toArray(t,r);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){if(t[0]===6)assert$8(t[t.length-1]%2===0);else if(t[0]===7)assert$8(t[t.length-1]%2===1);var n=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return n}else if((t[0]===2||t[0]===3)&&t.length-1===i){return this.pointFromX(t.slice(1,1+i),t[0]===3)}throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function e(t){return this.encode(t,true)};BasePoint.prototype._encode=function e(t){var r=this.curve.p.byteLength();var i=this.getX().toArray("be",r);if(t)return[this.getY().isEven()?2:3].concat(i);return[4].concat(i,this.getY().toArray("be",r))};BasePoint.prototype.encode=function e(t,r){return utils_1.encode(this._encode(r),t)};BasePoint.prototype.precompute=function e(t){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};r.naf=this._getNAFPoints(8);r.doubles=this._getDoubles(4,t);r.beta=this._getBeta();this.precomputed=r;return this};BasePoint.prototype._hasDoubles=function e(t){if(!this.precomputed)return false;var r=this.precomputed.doubles;if(!r)return false;return r.points.length>=Math.ceil((t.bitLength()+1)/r.step)};BasePoint.prototype._getDoubles=function e(t,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;var i=[this];var n=this;for(var s=0;s<r;s+=t){for(var a=0;a<t;a++)n=n.dbl();i.push(n)}return{step:t,points:i}};BasePoint.prototype._getNAFPoints=function e(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;var r=[this];var i=(1<<t)-1;var n=i===1?null:this.dbl();for(var s=1;s<i;s++)r[s]=r[s-1].add(n);return{wnd:t,points:r}};BasePoint.prototype._getBeta=function e(){return null};BasePoint.prototype.dblp=function e(t){var r=this;for(var i=0;i<t;i++)r=r.dbl();return r};var assert$7=utils_1.assert;function ShortCurve(e){base$e.call(this,"short",e);this.a=new bn(e.a,16).toRed(this.red);this.b=new bn(e.b,16).toRed(this.red);this.tinv=this.two.redInvm();this.zeroA=this.a.fromRed().cmpn(0)===0;this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0;this.endo=this._getEndomorphism(e);this._endoWnafT1=new Array(4);this._endoWnafT2=new Array(4)}inherits_browser$1(ShortCurve,base$e);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function e(t){if(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)return;var r;var i;if(t.beta){r=new bn(t.beta,16).toRed(this.red)}else{var n=this._getEndoRoots(this.p);r=n[0].cmp(n[1])<0?n[0]:n[1];r=r.toRed(this.red)}if(t.lambda){i=new bn(t.lambda,16)}else{var s=this._getEndoRoots(this.n);if(this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0){i=s[0]}else{i=s[1];assert$7(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0)}}var a;if(t.basis){a=t.basis.map((function(e){return{a:new bn(e.a,16),b:new bn(e.b,16)}}))}else{a=this._getEndoBasis(i)}return{beta:r,lambda:i,basis:a}};ShortCurve.prototype._getEndoRoots=function e(t){var r=t===this.p?this.red:bn.mont(t);var i=new bn(2).toRed(r).redInvm();var n=i.redNeg();var s=new bn(3).toRed(r).redNeg().redSqrt().redMul(i);var a=n.redAdd(s).fromRed();var o=n.redSub(s).fromRed();return[a,o]};ShortCurve.prototype._getEndoBasis=function e(t){var r=this.n.ushrn(Math.floor(this.n.bitLength()/2));var i=t;var n=this.n.clone();var s=new bn(1);var a=new bn(0);var o=new bn(0);var f=new bn(1);var c;var u;var h;var l;var d;var p;var b;var m=0;var v;var y;while(i.cmpn(0)!==0){var w=n.div(i);v=n.sub(w.mul(i));y=o.sub(w.mul(s));var A=f.sub(w.mul(a));if(!h&&v.cmp(r)<0){c=b.neg();u=s;h=v.neg();l=y}else if(h&&++m===2){break}b=v;n=i;i=v;o=s;s=y;f=a;a=A}d=v.neg();p=y;var g=h.sqr().add(l.sqr());var S=d.sqr().add(p.sqr());if(S.cmp(g)>=0){d=c;p=u}if(h.negative){h=h.neg();l=l.neg()}if(d.negative){d=d.neg();p=p.neg()}return[{a:h,b:l},{a:d,b:p}]};ShortCurve.prototype._endoSplit=function e(t){var r=this.endo.basis;var i=r[0];var n=r[1];var s=n.b.mul(t).divRound(this.n);var a=i.b.neg().mul(t).divRound(this.n);var o=s.mul(i.a);var f=a.mul(n.a);var c=s.mul(i.b);var u=a.mul(n.b);var h=t.sub(o).sub(f);var l=c.add(u).neg();return{k1:h,k2:l}};ShortCurve.prototype.pointFromX=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);var n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var s=n.fromRed().isOdd();if(r&&!s||!r&&s)n=n.redNeg();return this.point(t,n)};ShortCurve.prototype.validate=function e(t){if(t.inf)return true;var r=t.x;var i=t.y;var n=this.a.redMul(r);var s=r.redSqr().redMul(r).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(s).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function e(t,r,i){var n=this._endoWnafT1;var s=this._endoWnafT2;for(var a=0;a<t.length;a++){var o=this._endoSplit(r[a]);var f=t[a];var c=f._getBeta();if(o.k1.negative){o.k1.ineg();f=f.neg(true)}if(o.k2.negative){o.k2.ineg();c=c.neg(true)}n[a*2]=f;n[a*2+1]=c;s[a*2]=o.k1;s[a*2+1]=o.k2}var u=this._wnafMulAdd(1,n,s,a*2,i);for(var h=0;h<a*2;h++){n[h]=null;s[h]=null}return u};function Point$2(e,t,r,i){base$e.BasePoint.call(this,e,"affine");if(t===null&&r===null){this.x=null;this.y=null;this.inf=true}else{this.x=new bn(t,16);this.y=new bn(r,16);if(i){this.x.forceRed(this.curve.red);this.y.forceRed(this.curve.red)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);this.inf=false}}inherits_browser$1(Point$2,base$e.BasePoint);ShortCurve.prototype.point=function e(t,r,i){return new Point$2(this,t,r,i)};ShortCurve.prototype.pointFromJSON=function e(t,r){return Point$2.fromJSON(this,t,r)};Point$2.prototype._getBeta=function e(){if(!this.curve.endo)return;var t=this.precomputed;if(t&&t.beta)return t.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve;var n=function(e){return i.point(e.x.redMul(i.endo.beta),e.y)};t.beta=r;r.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return r};Point$2.prototype.toJSON=function e(){if(!this.precomputed)return[this.x,this.y];return[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]};Point$2.fromJSON=function e(t,r,i){if(typeof r==="string")r=JSON.parse(r);var n=t.point(r[0],r[1],i);if(!r[2])return n;function s(e){return t.point(e[0],e[1],i)}var a=r[2];n.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[n].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[n].concat(a.naf.points.map(s))}};return n};Point$2.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function e(){return this.inf};Point$2.prototype.add=function e(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var r=this.y.redSub(t.y);if(r.cmpn(0)!==0)r=r.redMul(this.x.redSub(t.x).redInvm());var i=r.redSqr().redISub(this.x).redISub(t.x);var n=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)};Point$2.prototype.dbl=function e(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a;var i=this.x.redSqr();var n=t.redInvm();var s=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(n);var a=s.redSqr().redISub(this.x.redAdd(this.x));var o=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$2.prototype.getX=function e(){return this.x.fromRed()};Point$2.prototype.getY=function e(){return this.y.fromRed()};Point$2.prototype.mul=function e(t){t=new bn(t,16);if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else if(this.curve.endo)return this.curve._endoWnafMulAdd([this],[t]);else return this.curve._wnafMul(this,t)};Point$2.prototype.mulAdd=function e(t,r,i){var n=[this,r];var s=[t,i];if(this.curve.endo)return this.curve._endoWnafMulAdd(n,s);else return this.curve._wnafMulAdd(1,n,s,2)};Point$2.prototype.jmulAdd=function e(t,r,i){var n=[this,r];var s=[t,i];if(this.curve.endo)return this.curve._endoWnafMulAdd(n,s,true);else return this.curve._wnafMulAdd(1,n,s,2,true)};Point$2.prototype.eq=function e(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Point$2.prototype.neg=function e(t){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed;var n=function(e){return e.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return r};Point$2.prototype.toJ=function e(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function JPoint(e,t,r,i){base$e.BasePoint.call(this,e,"jacobian");if(t===null&&r===null&&i===null){this.x=this.curve.one;this.y=this.curve.one;this.z=new bn(0)}else{this.x=new bn(t,16);this.y=new bn(r,16);this.z=new bn(i,16)}if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);this.zOne=this.z===this.curve.one}inherits_browser$1(JPoint,base$e.BasePoint);ShortCurve.prototype.jpoint=function e(t,r,i){return new JPoint(this,t,r,i)};JPoint.prototype.toP=function e(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm();var r=t.redSqr();var i=this.x.redMul(r);var n=this.y.redMul(r).redMul(t);return this.curve.point(i,n)};JPoint.prototype.neg=function e(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var r=t.z.redSqr();var i=this.z.redSqr();var n=this.x.redMul(r);var s=t.x.redMul(i);var a=this.y.redMul(r.redMul(t.z));var o=t.y.redMul(i.redMul(this.z));var f=n.redSub(s);var c=a.redSub(o);if(f.cmpn(0)===0){if(c.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var u=f.redSqr();var h=u.redMul(f);var l=n.redMul(u);var d=c.redSqr().redIAdd(h).redISub(l).redISub(l);var p=c.redMul(l.redISub(d)).redISub(a.redMul(h));var b=this.z.redMul(t.z).redMul(f);return this.curve.jpoint(d,p,b)};JPoint.prototype.mixedAdd=function e(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var r=this.z.redSqr();var i=this.x;var n=t.x.redMul(r);var s=this.y;var a=t.y.redMul(r).redMul(this.z);var o=i.redSub(n);var f=s.redSub(a);if(o.cmpn(0)===0){if(f.cmpn(0)!==0)return this.curve.jpoint(null,null,null);else return this.dbl()}var c=o.redSqr();var u=c.redMul(o);var h=i.redMul(c);var l=f.redSqr().redIAdd(u).redISub(h).redISub(h);var d=f.redMul(h.redISub(l)).redISub(s.redMul(u));var p=this.z.redMul(o);return this.curve.jpoint(l,d,p)};JPoint.prototype.dblp=function e(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var r=this;for(var i=0;i<t;i++)r=r.dbl();return r}var n=this.curve.a;var s=this.curve.tinv;var a=this.x;var o=this.y;var f=this.z;var c=f.redSqr().redSqr();var u=o.redAdd(o);for(var i=0;i<t;i++){var h=a.redSqr();var l=u.redSqr();var d=l.redSqr();var p=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(c));var b=a.redMul(l);var m=p.redSqr().redISub(b.redAdd(b));var v=b.redISub(m);var y=p.redMul(v);y=y.redIAdd(y).redISub(d);var w=u.redMul(f);if(i+1<t)c=c.redMul(d);a=m;f=w;u=y}return this.curve.jpoint(a,u.redMul(s),f)};JPoint.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.zeroA)return this._zeroDbl();else if(this.curve.threeA)return this._threeDbl();else return this._dbl()};JPoint.prototype._zeroDbl=function e(){var t;var r;var i;if(this.zOne){var n=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n);var c=f.redSqr().redISub(o).redISub(o);var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);t=c;r=f.redMul(o.redISub(c)).redISub(u);i=this.y.redAdd(this.y)}else{var h=this.x.redSqr();var l=this.y.redSqr();var d=l.redSqr();var p=this.x.redAdd(l).redSqr().redISub(h).redISub(d);p=p.redIAdd(p);var b=h.redAdd(h).redIAdd(h);var m=b.redSqr();var v=d.redIAdd(d);v=v.redIAdd(v);v=v.redIAdd(v);t=m.redISub(p).redISub(p);r=b.redMul(p.redISub(t)).redISub(v);i=this.y.redMul(this.z);i=i.redIAdd(i)}return this.curve.jpoint(t,r,i)};JPoint.prototype._threeDbl=function e(){var t;var r;var i;if(this.zOne){var n=this.x.redSqr();var s=this.y.redSqr();var a=s.redSqr();var o=this.x.redAdd(s).redSqr().redISub(n).redISub(a);o=o.redIAdd(o);var f=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a);var c=f.redSqr().redISub(o).redISub(o);t=c;var u=a.redIAdd(a);u=u.redIAdd(u);u=u.redIAdd(u);r=f.redMul(o.redISub(c)).redISub(u);i=this.y.redAdd(this.y)}else{var h=this.z.redSqr();var l=this.y.redSqr();var d=this.x.redMul(l);var p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var b=d.redIAdd(d);b=b.redIAdd(b);var m=b.redAdd(b);t=p.redSqr().redISub(m);i=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var v=l.redSqr();v=v.redIAdd(v);v=v.redIAdd(v);v=v.redIAdd(v);r=p.redMul(b.redISub(t)).redISub(v)}return this.curve.jpoint(t,r,i)};JPoint.prototype._dbl=function e(){var t=this.curve.a;var r=this.x;var i=this.y;var n=this.z;var s=n.redSqr().redSqr();var a=r.redSqr();var o=i.redSqr();var f=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s));var c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(o);var h=f.redSqr().redISub(u.redAdd(u));var l=u.redISub(h);var d=o.redSqr();d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=f.redMul(l).redISub(d);var b=i.redAdd(i).redMul(n);return this.curve.jpoint(h,p,b)};JPoint.prototype.trpl=function e(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr();var r=this.y.redSqr();var i=this.z.redSqr();var n=r.redSqr();var s=t.redAdd(t).redIAdd(t);var a=s.redSqr();var o=this.x.redAdd(r).redSqr().redISub(t).redISub(n);o=o.redIAdd(o);o=o.redAdd(o).redIAdd(o);o=o.redISub(a);var f=o.redSqr();var c=n.redIAdd(n);c=c.redIAdd(c);c=c.redIAdd(c);c=c.redIAdd(c);var u=s.redIAdd(o).redSqr().redISub(a).redISub(f).redISub(c);var h=r.redMul(u);h=h.redIAdd(h);h=h.redIAdd(h);var l=this.x.redMul(f).redISub(h);l=l.redIAdd(l);l=l.redIAdd(l);var d=this.y.redMul(u.redMul(c.redISub(u)).redISub(o.redMul(f)));d=d.redIAdd(d);d=d.redIAdd(d);d=d.redIAdd(d);var p=this.z.redAdd(o).redSqr().redISub(i).redISub(f);return this.curve.jpoint(l,d,p)};JPoint.prototype.mul=function e(t,r){t=new bn(t,r);return this.curve._wnafMul(this,t)};JPoint.prototype.eq=function e(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return true;var r=this.z.redSqr();var i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(r)).cmpn(0)!==0)return false;var n=r.redMul(this.z);var s=i.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(n)).cmpn(0)===0};JPoint.prototype.eqXToP=function e(t){var r=this.z.redSqr();var i=t.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return true;var n=t.clone();var s=this.curve.redN.redMul(r);for(;;){n.iadd(this.curve.n);if(n.cmp(this.curve.p)>=0)return false;i.redIAdd(s);if(this.x.cmp(i)===0)return true}};JPoint.prototype.inspect=function e(){if(this.isInfinity())return"<EC JPoint Infinity>";return"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};function MontCurve(e){base$e.call(this,"mont",e);this.a=new bn(e.a,16).toRed(this.red);this.b=new bn(e.b,16).toRed(this.red);this.i4=new bn(4).toRed(this.red).redInvm();this.two=new bn(2).toRed(this.red);this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits_browser$1(MontCurve,base$e);var mont=MontCurve;MontCurve.prototype.validate=function e(t){var r=t.normalize().x;var i=r.redSqr();var n=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r);var s=n.redSqrt();return s.redSqr().cmp(n)===0};function Point$1(e,t,r){base$e.BasePoint.call(this,e,"projective");if(t===null&&r===null){this.x=this.curve.one;this.z=this.curve.zero}else{this.x=new bn(t,16);this.z=new bn(r,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red)}}inherits_browser$1(Point$1,base$e.BasePoint);MontCurve.prototype.decodePoint=function e(t,r){var t=utils_1.toArray(t,r);if(t.length===33&&t[0]===64)t=t.slice(1,33).reverse();if(t.length!==32)throw new Error("Unknown point compression format");return this.point(t,1)};MontCurve.prototype.point=function e(t,r){return new Point$1(this,t,r)};MontCurve.prototype.pointFromJSON=function e(t){return Point$1.fromJSON(this,t)};Point$1.prototype.precompute=function e(){};Point$1.prototype._encode=function e(t){var r=this.curve.p.byteLength();if(t){return[64].concat(this.getX().toArray("le",r))}else{return this.getX().toArray("be",r)}};Point$1.fromJSON=function e(t,r){return new Point$1(t,r[0],r[1]||t.one)};Point$1.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function e(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function e(){var t=this.x.redAdd(this.z);var r=t.redSqr();var i=this.x.redSub(this.z);var n=i.redSqr();var s=r.redSub(n);var a=r.redMul(n);var o=s.redMul(n.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,o)};Point$1.prototype.add=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function e(t,r){var i=this.x.redAdd(this.z);var n=this.x.redSub(this.z);var s=t.x.redAdd(t.z);var a=t.x.redSub(t.z);var o=a.redMul(i);var f=s.redMul(n);var c=r.z.redMul(o.redAdd(f).redSqr());var u=r.x.redMul(o.redISub(f).redSqr());return this.curve.point(c,u)};Point$1.prototype.mul=function e(t){t=new bn(t,16);var r=t.clone();var i=this;var n=this.curve.point(null,null);var s=this;for(var a=[];r.cmpn(0)!==0;r.iushrn(1))a.push(r.andln(1));for(var o=a.length-1;o>=0;o--){if(a[o]===0){i=i.diffAdd(n,s);n=n.dbl()}else{n=i.diffAdd(n,s);i=i.dbl()}}return n};Point$1.prototype.mulAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function e(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function e(t){return this.getX().cmp(t.getX())===0};Point$1.prototype.normalize=function e(){this.x=this.x.redMul(this.z.redInvm());this.z=this.curve.one;return this};Point$1.prototype.getX=function e(){this.normalize();return this.x.fromRed()};var assert$6=utils_1.assert;function EdwardsCurve(e){this.twisted=(e.a|0)!==1;this.mOneA=this.twisted&&(e.a|0)===-1;this.extended=this.mOneA;base$e.call(this,"edwards",e);this.a=new bn(e.a,16).umod(this.red.m);this.a=this.a.toRed(this.red);this.c=new bn(e.c,16).toRed(this.red);this.c2=this.c.redSqr();this.d=new bn(e.d,16).toRed(this.red);this.dd=this.d.redAdd(this.d);assert$6(!this.twisted||this.c.fromRed().cmpn(1)===0);this.oneC=(e.c|0)===1}inherits_browser$1(EdwardsCurve,base$e);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function e(t){if(this.mOneA)return t.redNeg();else return this.a.redMul(t)};EdwardsCurve.prototype._mulC=function e(t){if(this.oneC)return t;else return this.c.redMul(t)};EdwardsCurve.prototype.jpoint=function e(t,r,i,n){return this.point(t,r,i,n)};EdwardsCurve.prototype.pointFromX=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var i=t.redSqr();var n=this.c2.redSub(this.a.redMul(i));var s=this.one.redSub(this.c2.redMul(this.d).redMul(i));var a=n.redMul(s.redInvm());var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var f=o.fromRed().isOdd();if(r&&!f||!r&&f)o=o.redNeg();return this.point(t,o)};EdwardsCurve.prototype.pointFromY=function e(t,r){t=new bn(t,16);if(!t.red)t=t.toRed(this.red);var i=t.redSqr();var n=i.redSub(this.c2);var s=i.redMul(this.d).redMul(this.c2).redSub(this.a);var a=n.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(r)throw new Error("invalid point");else return this.point(this.zero,t)}var o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");if(o.fromRed().isOdd()!==r)o=o.redNeg();return this.point(o,t)};EdwardsCurve.prototype.validate=function e(t){if(t.isInfinity())return true;t.normalize();var r=t.x.redSqr();var i=t.y.redSqr();var n=r.redMul(this.a).redAdd(i);var s=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return n.cmp(s)===0};function Point(e,t,r,i,n){base$e.BasePoint.call(this,e,"projective");if(t===null&&r===null&&i===null){this.x=this.curve.zero;this.y=this.curve.one;this.z=this.curve.one;this.t=this.curve.zero;this.zOne=true}else{this.x=new bn(t,16);this.y=new bn(r,16);this.z=i?new bn(i,16):this.curve.one;this.t=n&&new bn(n,16);if(!this.x.red)this.x=this.x.toRed(this.curve.red);if(!this.y.red)this.y=this.y.toRed(this.curve.red);if(!this.z.red)this.z=this.z.toRed(this.curve.red);if(this.t&&!this.t.red)this.t=this.t.toRed(this.curve.red);this.zOne=this.z===this.curve.one;if(this.curve.extended&&!this.t){this.t=this.x.redMul(this.y);if(!this.zOne)this.t=this.t.redMul(this.z.redInvm())}}}inherits_browser$1(Point,base$e.BasePoint);EdwardsCurve.prototype.pointFromJSON=function e(t){return Point.fromJSON(this,t)};EdwardsCurve.prototype.point=function e(t,r,i,n){return new Point(this,t,r,i,n)};Point.fromJSON=function e(t,r){return new Point(t,r[0],r[1],r[2])};Point.prototype.inspect=function e(){if(this.isInfinity())return"<EC Point Infinity>";return"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function e(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function e(){var t=this.x.redSqr();var r=this.y.redSqr();var i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(t);var s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(r);var a=n.redAdd(r);var o=a.redSub(i);var f=n.redSub(r);var c=s.redMul(o);var u=a.redMul(f);var h=s.redMul(f);var l=o.redMul(a);return this.curve.point(c,u,l,h)};Point.prototype._projDbl=function e(){var t=this.x.redAdd(this.y).redSqr();var r=this.x.redSqr();var i=this.y.redSqr();var n;var s;var a;if(this.curve.twisted){var o=this.curve._mulA(r);var f=o.redAdd(i);if(this.zOne){n=t.redSub(r).redSub(i).redMul(f.redSub(this.curve.two));s=f.redMul(o.redSub(i));a=f.redSqr().redSub(f).redSub(f)}else{var c=this.z.redSqr();var u=f.redSub(c).redISub(c);n=t.redSub(r).redISub(i).redMul(u);s=f.redMul(o.redSub(i));a=f.redMul(u)}}else{var o=r.redAdd(i);var c=this.curve._mulC(this.z).redSqr();var u=o.redSub(c).redSub(c);n=this.curve._mulC(t.redISub(o)).redMul(u);s=this.curve._mulC(o).redMul(r.redISub(i));a=o.redMul(u)}return this.curve.point(n,s,a)};Point.prototype.dbl=function e(){if(this.isInfinity())return this;if(this.curve.extended)return this._extDbl();else return this._projDbl()};Point.prototype._extAdd=function e(t){var r=this.y.redSub(this.x).redMul(t.y.redSub(t.x));var i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x));var n=this.t.redMul(this.curve.dd).redMul(t.t);var s=this.z.redMul(t.z.redAdd(t.z));var a=i.redSub(r);var o=s.redSub(n);var f=s.redAdd(n);var c=i.redAdd(r);var u=a.redMul(o);var h=f.redMul(c);var l=a.redMul(c);var d=o.redMul(f);return this.curve.point(u,h,d,l)};Point.prototype._projAdd=function e(t){var r=this.z.redMul(t.z);var i=r.redSqr();var n=this.x.redMul(t.x);var s=this.y.redMul(t.y);var a=this.curve.d.redMul(n).redMul(s);var o=i.redSub(a);var f=i.redAdd(a);var c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(n).redISub(s);var u=r.redMul(o).redMul(c);var h;var l;if(this.curve.twisted){h=r.redMul(f).redMul(s.redSub(this.curve._mulA(n)));l=o.redMul(f)}else{h=r.redMul(f).redMul(s.redSub(n));l=this.curve._mulC(o).redMul(f)}return this.curve.point(u,h,l)};Point.prototype.add=function e(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.curve.extended)return this._extAdd(t);else return this._projAdd(t)};Point.prototype.mul=function e(t){if(this._hasDoubles(t))return this.curve._fixedNafMul(this,t);else return this.curve._wnafMul(this,t)};Point.prototype.mulAdd=function e(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,false)};Point.prototype.jmulAdd=function e(t,r,i){return this.curve._wnafMulAdd(1,[this,r],[t,i],2,true)};Point.prototype.normalize=function e(){if(this.zOne)return this;var t=this.z.redInvm();this.x=this.x.redMul(t);this.y=this.y.redMul(t);if(this.t)this.t=this.t.redMul(t);this.z=this.curve.one;this.zOne=true;return this};Point.prototype.neg=function e(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function e(){this.normalize();return this.x.fromRed()};Point.prototype.getY=function e(){this.normalize();return this.y.fromRed()};Point.prototype.eq=function e(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};Point.prototype.eqXToP=function e(t){var r=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return true;var i=t.clone();var n=this.curve.redN.redMul(this.z);for(;;){i.iadd(this.curve.n);if(i.cmp(this.curve.p)>=0)return false;r.redIAdd(n);if(this.x.cmp(r)===0)return true}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;var curve_1=createCommonjsModule$1((function(e,t){var r=t;r.base=base$e;r.short=short_1;r.mont=mont;r.edwards=edwards}));var secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}};var curves_1=createCommonjsModule$1((function(e,t){var r=t;var i=utils_1.assert;function n(e){if(e.type==="short")this.curve=new curve_1.short(e);else if(e.type==="edwards")this.curve=new curve_1.edwards(e);else if(e.type==="mont")this.curve=new curve_1.mont(e);else throw new Error("Unknown curve type.");this.g=this.curve.g;this.n=this.curve.n;this.hash=e.hash;i(this.g.validate(),"Invalid curve");i(this.g.mul(this.n).isInfinity(),"Invalid curve, n*G != O")}r.PresetCurve=n;function s(e,t){Object.defineProperty(r,e,{configurable:true,enumerable:true,get:function(){var i=new n(t);Object.defineProperty(r,e,{configurable:true,enumerable:true,value:i});return i}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash_1.sha256,gRed:false,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash_1.sha256,gRed:false,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash_1.sha256,gRed:false,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f "+"5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 "+"f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash_1.sha384,gRed:false,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 "+"5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 "+"0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b "+"99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd "+"3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff "+"ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 "+"f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash_1.sha512,gRed:false,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 "+"053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 "+"a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 "+"579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 "+"3fad0761 353c7086 a272c240 88be9476 9fd16650"]});s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:hash_1.sha256,gRed:false,g:["9"]});s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",cofactor:"8",hash:hash_1.sha256,gRed:false,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});s("brainpoolP256r1",{type:"short",prime:null,p:"A9FB57DB A1EEA9BC 3E660A90 9D838D72 6E3BF623 D5262028 2013481D 1F6E5377",a:"7D5A0975 FC2C3057 EEF67530 417AFFE7 FB8055C1 26DC5C6C E94A4B44 F330B5D9",b:"26DC5C6C E94A4B44 F330B5D9 BBD77CBF 95841629 5CF7E1CE 6BCCDC18 FF8C07B6",n:"A9FB57DB A1EEA9BC 3E660A90 9D838D71 8C397AA3 B561A6F7 901E0E82 974856A7",hash:hash_1.sha256,gRed:false,g:["8BD2AEB9CB7E57CB2C4B482FFC81B7AFB9DE27E1E3BD23C23A4453BD9ACE3262","547EF835C3DAC4FD97F8461A14611DC9C27745132DED8E545C1D54C72F046997"]});s("brainpoolP384r1",{type:"short",prime:null,p:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B4 12B1DA19 7FB71123"+"ACD3A729 901D1A71 87470013 3107EC53",a:"7BC382C6 3D8C150C 3C72080A CE05AFA0 C2BEA28E 4FB22787 139165EF BA91F90F"+"8AA5814A 503AD4EB 04A8C7DD 22CE2826",b:"04A8C7DD 22CE2826 8B39B554 16F0447C 2FB77DE1 07DCD2A6 2E880EA5 3EEB62D5"+"7CB43902 95DBC994 3AB78696 FA504C11",n:"8CB91E82 A3386D28 0F5D6F7E 50E641DF 152F7109 ED5456B3 1F166E6C AC0425A7"+"CF3AB6AF 6B7FC310 3B883202 E9046565",hash:hash_1.sha384,gRed:false,g:["1D1C64F068CF45FFA2A63A81B7C13F6B8847A3E77EF14FE3DB7FCAFE0CBD10"+"E8E826E03436D646AAEF87B2E247D4AF1E","8ABE1D7520F9C2A45CB1EB8E95CFD55262B70B29FEEC5864E19C054FF99129"+"280E4646217791811142820341263C5315"]});s("brainpoolP512r1",{type:"short",prime:null,p:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330871"+"7D4D9B00 9BC66842 AECDA12A E6A380E6 2881FF2F 2D82C685 28AA6056 583A48F3",a:"7830A331 8B603B89 E2327145 AC234CC5 94CBDD8D 3DF91610 A83441CA EA9863BC"+"2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7 2BF2C7B9 E7C1AC4D 77FC94CA",b:"3DF91610 A83441CA EA9863BC 2DED5D5A A8253AA1 0A2EF1C9 8B9AC8B5 7F1117A7"+"2BF2C7B9 E7C1AC4D 77FC94CA DC083E67 984050B7 5EBAE5DD 2809BD63 8016F723",n:"AADD9DB8 DBE9C48B 3FD4E6AE 33C9FC07 CB308DB3 B3C9D20E D6639CCA 70330870"+"553E5C41 4CA92619 41866119 7FAC1047 1DB1D381 085DDADD B5879682 9CA90069",hash:hash_1.sha512,gRed:false,g:["81AEE4BDD82ED9645A21322E9C4C6A9385ED9F70B5D916C1B43B62EEF4D009"+"8EFF3B1F78E2D0D48D50D1687B93B97D5F7C6D5047406A5E688B352209BCB9F822","7DDE385D566332ECC0EABFA9CF7822FDF209F70024A57B1AA000C55B881F81"+"11B2DCDE494A5F485E5BCA4BD88A2763AED1CA2B2FA8F0540678CD1E0F3AD80892"]});var a;try{a=secp256k1}catch(e){a=undefined}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash_1.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:false,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})}));function HmacDRBG(e){if(!(this instanceof HmacDRBG))return new HmacDRBG(e);this.hash=e.hash;this.predResist=!!e.predResist;this.outLen=this.hash.outSize;this.minEntropy=e.minEntropy||this.hash.hmacStrength;this._reseed=null;this.reseedInterval=null;this.K=null;this.V=null;var t=utils_1$1.toArray(e.entropy,e.entropyEnc||"hex");var r=utils_1$1.toArray(e.nonce,e.nonceEnc||"hex");var i=utils_1$1.toArray(e.pers,e.persEnc||"hex");minimalisticAssert$1(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._init(t,r,i)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function e(t,r,i){var n=t.concat(r).concat(i);this.K=new Array(this.outLen/8);this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++){this.K[s]=0;this.V[s]=1}this._update(n);this._reseed=1;this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function e(){return new hash_1.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function e(t){var r=this._hmac().update(this.V).update([0]);if(t)r=r.update(t);this.K=r.digest();this.V=this._hmac().update(this.V).digest();if(!t)return;this.K=this._hmac().update(this.V).update([1]).update(t).digest();this.V=this._hmac().update(this.V).digest()};HmacDRBG.prototype.reseed=function e(t,r,i,n){if(typeof r!=="string"){n=i;i=r;r=null}t=utils_1$1.toArray(t,r);i=utils_1$1.toArray(i,n);minimalisticAssert$1(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits");this._update(t.concat(i||[]));this._reseed=1};HmacDRBG.prototype.generate=function e(t,r,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");if(typeof r!=="string"){n=i;i=r;r=null}if(i){i=utils_1$1.toArray(i,n||"hex");this._update(i)}var s=[];while(s.length<t){this.V=this._hmac().update(this.V).digest();s=s.concat(this.V)}var a=s.slice(0,t);this._update(i);this._reseed++;return utils_1$1.encode(a,r)};var assert$5=utils_1.assert;function KeyPair$1(e,t){this.ec=e;this.priv=null;this.pub=null;if(t.priv)this._importPrivate(t.priv,t.privEnc);if(t.pub)this._importPublic(t.pub,t.pubEnc)}var key$1=KeyPair$1;KeyPair$1.fromPublic=function e(t,r,i){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{pub:r,pubEnc:i})};KeyPair$1.fromPrivate=function e(t,r,i){if(r instanceof KeyPair$1)return r;return new KeyPair$1(t,{priv:r,privEnc:i})};KeyPair$1.prototype.validate=function e(){var t=this.getPublic();if(t.isInfinity())return{result:false,reason:"Invalid public key"};if(!t.validate())return{result:false,reason:"Public key is not a point"};if(!t.mul(this.ec.curve.n).isInfinity())return{result:false,reason:"Public key * N != O"};return{result:true,reason:null}};KeyPair$1.prototype.getPublic=function e(t,r){if(!this.pub)this.pub=this.ec.g.mul(this.priv);if(!t)return this.pub;return this.pub.encode(t,r)};KeyPair$1.prototype.getPrivate=function e(t){if(t==="hex")return this.priv.toString(16,2);else return this.priv};KeyPair$1.prototype._importPrivate=function e(t,r){this.priv=new bn(t,r||16);if(this.ec.curve.type==="mont"){var i=this.ec.curve.one;var n=i.ushln(255-3).sub(i).ushln(3);this.priv=this.priv.or(i.ushln(255-1));this.priv=this.priv.and(n)}else this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$1.prototype._importPublic=function e(t,r){if(t.x||t.y){if(this.ec.curve.type==="mont"){assert$5(t.x,"Need x coordinate")}else if(this.ec.curve.type==="short"||this.ec.curve.type==="edwards"){assert$5(t.x&&t.y,"Need both x and y coordinate")}this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,r)};KeyPair$1.prototype.derive=function e(t){return t.mul(this.priv).getX()};KeyPair$1.prototype.sign=function e(t,r,i){return this.ec.sign(t,this,r,i)};KeyPair$1.prototype.verify=function e(t,r){return this.ec.verify(t,r,this)};KeyPair$1.prototype.inspect=function e(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1.assert;function Signature$1(e,t){if(e instanceof Signature$1)return e;if(this._importDER(e,t))return;assert$4(e.r&&e.s,"Signature without r or s");this.r=new bn(e.r,16);this.s=new bn(e.s,16);if(e.recoveryParam===undefined)this.recoveryParam=null;else this.recoveryParam=e.recoveryParam}var signature$1=Signature$1;function Position(){this.place=0}function getLength(e,t){var r=e[t.place++];if(!(r&128)){return r}var i=r&15;var n=0;for(var s=0,a=t.place;s<i;s++,a++){n<<=8;n|=e[a]}t.place=a;return n}function rmPadding(e){var t=0;var r=e.length-1;while(!e[t]&&!(e[t+1]&128)&&t<r){t++}if(t===0){return e}return e.slice(t)}Signature$1.prototype._importDER=function e(t,r){t=utils_1.toArray(t,r);var i=new Position;if(t[i.place++]!==48){return false}var n=getLength(t,i);if(n+i.place!==t.length){return false}if(t[i.place++]!==2){return false}var s=getLength(t,i);var a=t.slice(i.place,s+i.place);i.place+=s;if(t[i.place++]!==2){return false}var o=getLength(t,i);if(t.length!==o+i.place){return false}var f=t.slice(i.place,o+i.place);if(a[0]===0&&a[1]&128){a=a.slice(1)}if(f[0]===0&&f[1]&128){f=f.slice(1)}this.r=new bn(a);this.s=new bn(f);this.recoveryParam=null;return true};function constructLength(e,t){if(t<128){e.push(t);return}var r=1+(Math.log(t)/Math.LN2>>>3);e.push(r|128);while(--r){e.push(t>>>(r<<3)&255)}e.push(t)}Signature$1.prototype.toDER=function e(t){var r=this.r.toArray();var i=this.s.toArray();if(r[0]&128)r=[0].concat(r);if(i[0]&128)i=[0].concat(i);r=rmPadding(r);i=rmPadding(i);while(!i[0]&&!(i[1]&128)){i=i.slice(1)}var n=[2];constructLength(n,r.length);n=n.concat(r);n.push(2);constructLength(n,i.length);var s=n.concat(i);var a=[48];constructLength(a,s.length);a=a.concat(s);return utils_1.encode(a,t)};var assert$3=utils_1.assert;function EC(e){if(!(this instanceof EC))return new EC(e);if(typeof e==="string"){assert$3(curves_1.hasOwnProperty(e),"Unknown curve "+e);e=curves_1[e]}if(e instanceof curves_1.PresetCurve)e={curve:e};this.curve=e.curve.curve;this.n=this.curve.n;this.nh=this.n.ushrn(1);this.g=this.curve.g;this.g=e.curve.g;this.g.precompute(e.curve.n.bitLength()+1);this.hash=e.hash||e.curve.hash}var ec=EC;EC.prototype.keyPair=function e(t){return new key$1(this,t)};EC.prototype.keyFromPrivate=function e(t,r){return key$1.fromPrivate(this,t,r)};EC.prototype.keyFromPublic=function e(t,r){return key$1.fromPublic(this,t,r)};EC.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||brorand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()});if(this.curve.type==="mont"){var i=new bn(r.generate(32));return this.keyFromPrivate(i)}var n=this.n.byteLength();var s=this.n.sub(new bn(2));do{var i=new bn(r.generate(n));if(i.cmp(s)>0)continue;i.iaddn(1);return this.keyFromPrivate(i)}while(true)};EC.prototype._truncateToN=function e(t,r){var i=t.byteLength()*8-this.n.bitLength();if(i>0)t=t.ushrn(i);if(!r&&t.cmp(this.n)>=0)return t.sub(this.n);else return t};EC.prototype.sign=function e(t,r,i,n){if(typeof i==="object"){n=i;i=null}if(!n)n={};r=this.keyFromPrivate(r,i);t=this._truncateToN(new bn(t,16));var s=this.n.byteLength();var a=r.getPrivate().toArray("be",s);var o=t.toArray("be",s);var f=new hmacDrbg({hash:this.hash,entropy:a,nonce:o,pers:n.pers,persEnc:n.persEnc||"utf8"});var c=this.n.sub(new bn(1));for(var u=0;true;u++){var h=n.k?n.k(u):new bn(f.generate(this.n.byteLength()));h=this._truncateToN(h,true);if(h.cmpn(1)<=0||h.cmp(c)>=0)continue;var l=this.g.mul(h);if(l.isInfinity())continue;var d=l.getX();var p=d.umod(this.n);if(p.cmpn(0)===0)continue;var b=h.invm(this.n).mul(p.mul(r.getPrivate()).iadd(t));b=b.umod(this.n);if(b.cmpn(0)===0)continue;var m=(l.getY().isOdd()?1:0)|(d.cmp(p)!==0?2:0);if(n.canonical&&b.cmp(this.nh)>0){b=this.n.sub(b);m^=1}return new signature$1({r:p,s:b,recoveryParam:m})}};EC.prototype.verify=function e(t,r,i,n){t=this._truncateToN(new bn(t,16));i=this.keyFromPublic(i,n);r=new signature$1(r,"hex");var s=r.r;var a=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return false;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return false;var o=a.invm(this.n);var f=o.mul(t).umod(this.n);var c=o.mul(s).umod(this.n);if(!this.curve._maxwellTrick){var u=this.g.mulAdd(f,i.getPublic(),c);if(u.isInfinity())return false;return u.getX().umod(this.n).cmp(s)===0}var u=this.g.jmulAdd(f,i.getPublic(),c);if(u.isInfinity())return false;return u.eqXToP(s)};EC.prototype.recoverPubKey=function(e,t,r,i){assert$3((3&r)===r,"The recovery param is more than two bits");t=new signature$1(t,i);var n=this.n;var s=new bn(e);var a=t.r;var o=t.s;var f=r&1;var c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");if(c)a=this.curve.pointFromX(a.add(this.curve.n),f);else a=this.curve.pointFromX(a,f);var u=t.r.invm(n);var h=n.sub(s).mul(u).umod(n);var l=o.mul(u).umod(n);return this.g.mulAdd(h,a,l)};EC.prototype.getKeyRecoveryParam=function(e,t,r,i){t=new signature$1(t,i);if(t.recoveryParam!==null)return t.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(e,t,n)}catch(e){continue}if(s.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var assert$2=utils_1.assert;var parseBytes$2=utils_1.parseBytes;var cachedProperty$1=utils_1.cachedProperty;function KeyPair(e,t){this.eddsa=e;if(t.hasOwnProperty("secret"))this._secret=parseBytes$2(t.secret);if(e.isPoint(t.pub))this._pub=t.pub;else{this._pubBytes=parseBytes$2(t.pub);if(this._pubBytes&&this._pubBytes.length===33&&this._pubBytes[0]===64){this._pubBytes=this._pubBytes.slice(1,33)}if(this._pubBytes&&this._pubBytes.length!==32)throw new Error("Unknown point compression format")}}KeyPair.fromPublic=function e(t,r){if(r instanceof KeyPair)return r;return new KeyPair(t,{pub:r})};KeyPair.fromSecret=function e(t,r){if(r instanceof KeyPair)return r;return new KeyPair(t,{secret:r})};KeyPair.prototype.secret=function e(){return this._secret};cachedProperty$1(KeyPair,"pubBytes",(function e(){return this.eddsa.encodePoint(this.pub())}));cachedProperty$1(KeyPair,"pub",(function e(){if(this._pubBytes)return this.eddsa.decodePoint(this._pubBytes);return this.eddsa.g.mul(this.priv())}));cachedProperty$1(KeyPair,"privBytes",(function e(){var t=this.eddsa;var r=this.hash();var i=t.encodingLength-1;var n=r.slice(0,t.encodingLength);n[0]&=248;n[i]&=127;n[i]|=64;return n}));cachedProperty$1(KeyPair,"priv",(function e(){return this.eddsa.decodeInt(this.privBytes())}));cachedProperty$1(KeyPair,"hash",(function e(){return this.eddsa.hash().update(this.secret()).digest()}));cachedProperty$1(KeyPair,"messagePrefix",(function e(){return this.hash().slice(this.eddsa.encodingLength)}));KeyPair.prototype.sign=function e(t){assert$2(this._secret,"KeyPair can only verify");return this.eddsa.sign(t,this)};KeyPair.prototype.verify=function e(t,r){return this.eddsa.verify(t,r,this)};KeyPair.prototype.getSecret=function e(t){assert$2(this._secret,"KeyPair is public only");return utils_1.encode(this.secret(),t)};KeyPair.prototype.getPublic=function e(t,r){return utils_1.encode((r?[64]:[]).concat(this.pubBytes()),t)};var key=KeyPair;var assert$1=utils_1.assert;var cachedProperty=utils_1.cachedProperty;var parseBytes$1=utils_1.parseBytes;function Signature(e,t){this.eddsa=e;if(typeof t!=="object")t=parseBytes$1(t);if(Array.isArray(t)){t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}}assert$1(t.R&&t.S,"Signature without R or S");if(e.isPoint(t.R))this._R=t.R;if(t.S instanceof bn)this._S=t.S;this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded;this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}cachedProperty(Signature,"S",(function e(){return this.eddsa.decodeInt(this.Sencoded())}));cachedProperty(Signature,"R",(function e(){return this.eddsa.decodePoint(this.Rencoded())}));cachedProperty(Signature,"Rencoded",(function e(){return this.eddsa.encodePoint(this.R())}));cachedProperty(Signature,"Sencoded",(function e(){return this.eddsa.encodeInt(this.S())}));Signature.prototype.toBytes=function e(){return this.Rencoded().concat(this.Sencoded())};Signature.prototype.toHex=function e(){return utils_1.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature;var assert=utils_1.assert;var parseBytes=utils_1.parseBytes;function EDDSA(e){assert(e==="ed25519","only tested with ed25519 so far");if(!(this instanceof EDDSA))return new EDDSA(e);var e=curves_1[e].curve;this.curve=e;this.g=e.g;this.g.precompute(e.n.bitLength()+1);this.pointClass=e.point().constructor;this.encodingLength=Math.ceil(e.n.bitLength()/8);this.hash=hash_1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function e(t,r){t=parseBytes(t);var i=this.keyFromSecret(r);var n=this.hashInt(i.messagePrefix(),t);var s=this.g.mul(n);var a=this.encodePoint(s);var o=this.hashInt(a,i.pubBytes(),t).mul(i.priv());var f=n.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:f,Rencoded:a})};EDDSA.prototype.verify=function e(t,r,i){t=parseBytes(t);r=this.makeSignature(r);var n=this.keyFromPublic(i);var s=this.hashInt(r.Rencoded(),n.pubBytes(),t);var a=this.g.mul(r.S());var o=r.R().add(n.pub().mul(s));return o.eq(a)};EDDSA.prototype.hashInt=function e(){var t=this.hash();for(var r=0;r<arguments.length;r++)t.update(arguments[r]);return utils_1.intFromLE(t.digest()).umod(this.curve.n)};EDDSA.prototype.keyPair=function e(t){return new key(this,t)};EDDSA.prototype.keyFromPublic=function e(t){return key.fromPublic(this,t)};EDDSA.prototype.keyFromSecret=function e(t){return key.fromSecret(this,t)};EDDSA.prototype.genKeyPair=function e(t){if(!t)t={};var r=new hmacDrbg({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||elliptic_1.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.curve.n.toArray()});return this.keyFromSecret(r.generate(this.hash.outSize>>3))};EDDSA.prototype.makeSignature=function e(t){if(t instanceof signature)return t;return new signature(this,t)};EDDSA.prototype.encodePoint=function e(t){var r=t.getY().toArray("le",this.encodingLength);r[this.encodingLength-1]|=t.getX().isOdd()?128:0;return r};EDDSA.prototype.decodePoint=function e(t){t=utils_1.parseBytes(t);var r=t.length-1;var i=t.slice(0,r).concat(t[r]&~128);var n=(t[r]&128)!==0;var s=utils_1.intFromLE(i);return this.curve.pointFromY(s,n)};EDDSA.prototype.encodeInt=function e(t){return t.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function e(t){return utils_1.intFromLE(t)};EDDSA.prototype.isPoint=function e(t){return t instanceof this.pointClass};var elliptic_1=createCommonjsModule$1((function(e,t){var r=t;r.utils=utils_1;r.rand=brorand;r.curve=curve_1;r.curves=curves_1;r.ec=ec;r.eddsa=eddsa}));const elliptic=Object.freeze(Object.assign(Object.create(null),elliptic_1,{default:elliptic_1}));var int_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){var r=e>>>16&65535,i=e&65535;var n=t>>>16&65535,s=t&65535;return i*s+(r*s+i*n<<16>>>0)|0}t.mul=Math.imul||r;function i(e,t){return e+t|0}t.add=i;function n(e,t){return e-t|0}t.sub=n;function s(e,t){return e<<t|e>>>32-t}t.rotl=s;function a(e,t){return e<<32-t|e>>>t}t.rotr=a;function o(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}t.isInteger=Number.isInteger||o;t.MAX_SAFE_INTEGER=9007199254740991;t.isSafeInteger=function(e){return t.isInteger(e)&&(e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER)}}));var binary=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])<<16>>16}t.readInt16BE=r;function i(e,t){if(t===void 0){t=0}return(e[t+0]<<8|e[t+1])>>>0}t.readUint16BE=i;function n(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])<<16>>16}t.readInt16LE=n;function s(e,t){if(t===void 0){t=0}return(e[t+1]<<8|e[t])>>>0}t.readUint16LE=s;function a(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>8;t[r+1]=e>>>0;return t}t.writeUint16BE=a;t.writeInt16BE=a;function o(e,t,r){if(t===void 0){t=new Uint8Array(2)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;return t}t.writeUint16LE=o;t.writeInt16LE=o;function f(e,t){if(t===void 0){t=0}return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}t.readInt32BE=f;function c(e,t){if(t===void 0){t=0}return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.readUint32BE=c;function u(e,t){if(t===void 0){t=0}return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}t.readInt32LE=u;function h(e,t){if(t===void 0){t=0}return(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}t.readUint32LE=h;function l(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>24;t[r+1]=e>>>16;t[r+2]=e>>>8;t[r+3]=e>>>0;return t}t.writeUint32BE=l;t.writeInt32BE=l;function d(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}t[r+0]=e>>>0;t[r+1]=e>>>8;t[r+2]=e>>>16;t[r+3]=e>>>24;return t}t.writeUint32LE=d;t.writeInt32LE=d;function p(e,t){if(t===void 0){t=0}var r=f(e,t);var i=f(e,t+4);return r*4294967296+i-(i>>31)*4294967296}t.readInt64BE=p;function b(e,t){if(t===void 0){t=0}var r=c(e,t);var i=c(e,t+4);return r*4294967296+i}t.readUint64BE=b;function m(e,t){if(t===void 0){t=0}var r=u(e,t);var i=u(e,t+4);return i*4294967296+r-(r>>31)*4294967296}t.readInt64LE=m;function v(e,t){if(t===void 0){t=0}var r=h(e,t);var i=h(e,t+4);return i*4294967296+r}t.readUint64LE=v;function y(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}l(e/4294967296>>>0,t,r);l(e>>>0,t,r+4);return t}t.writeUint64BE=y;t.writeInt64BE=y;function w(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}d(e>>>0,t,r);d(e/4294967296>>>0,t,r+4);return t}t.writeUint64LE=w;t.writeInt64LE=w;function A(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintBE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintBE: array is too short for the given bitLength")}var i=0;var n=1;for(var s=e/8+r-1;s>=r;s--){i+=t[s]*n;n*=256}return i}t.readUintBE=A;function g(e,t,r){if(r===void 0){r=0}if(e%8!==0){throw new Error("readUintLE supports only bitLengths divisible by 8")}if(e/8>t.length-r){throw new Error("readUintLE: array is too short for the given bitLength")}var i=0;var n=1;for(var s=r;s<r+e/8;s++){i+=t[s]*n;n*=256}return i}t.readUintLE=g;function S(e,t,r,i){if(r===void 0){r=new Uint8Array(e/8)}if(i===void 0){i=0}if(e%8!==0){throw new Error("writeUintBE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintBE value must be an integer")}var n=1;for(var s=e/8+i-1;s>=i;s--){r[s]=t/n&255;n*=256}return r}t.writeUintBE=S;function E(e,t,r,i){if(r===void 0){r=new Uint8Array(e/8)}if(i===void 0){i=0}if(e%8!==0){throw new Error("writeUintLE supports only bitLengths divisible by 8")}if(!int_1.isSafeInteger(t)){throw new Error("writeUintLE value must be an integer")}var n=1;for(var s=i;s<i+e/8;s++){r[s]=t/n&255;n*=256}return r}t.writeUintLE=E;function _(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}t.readFloat32BE=_;function $(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,true)}t.readFloat32LE=$;function C(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}t.readFloat64BE=C;function P(e,t){if(t===void 0){t=0}var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,true)}t.readFloat64LE=P;function T(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);i.setFloat32(r,e);return t}t.writeFloat32BE=T;function I(e,t,r){if(t===void 0){t=new Uint8Array(4)}if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);i.setFloat32(r,e,true);return t}t.writeFloat32LE=I;function x(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);i.setFloat64(r,e);return t}t.writeFloat64BE=x;function N(e,t,r){if(t===void 0){t=new Uint8Array(8)}if(r===void 0){r=0}var i=new DataView(t.buffer,t.byteOffset,t.byteLength);i.setFloat64(r,e,true);return t}t.writeFloat64LE=N}));var wipe_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){for(var t=0;t<e.length;t++){e[t]=0}return e}t.wipe=r}));var sha3=createCommonjsModule$1((function(e,t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,r){e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return e(t,r)};return function(t,r){e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:true});var i=function(){function e(e){if(e===void 0){e=32}this.capacity=e;this._sh=new Int32Array(25);this._sl=new Int32Array(25);this._state=new Uint8Array(200);this._pos=0;this._finished=false;this.clean=this.reset;if(e<=0||e>128){throw new Error("SHA3: incorrect capacity")}this.blockSize=200-e}e.prototype.reset=function(){wipe_1.wipe(this._sh);wipe_1.wipe(this._sl);wipe_1.wipe(this._state);this._pos=0;this._finished=false;return this};e.prototype.update=function(e){if(this._finished){throw new Error("SHA3: can't update because hash was finished")}for(var t=0;t<e.length;t++){this._state[this._pos++]^=e[t];if(this._pos>=this.blockSize){b(this._sh,this._sl,this._state);this._pos=0}}return this};e.prototype._padAndPermute=function(e){this._state[this._pos]^=e;this._state[this.blockSize-1]^=128;b(this._sh,this._sl,this._state);this._finished=true;this._pos=0};e.prototype._squeeze=function(e){if(!this._finished){throw new Error("SHA3: squeezing before padAndPermute")}for(var t=0;t<e.length;t++){if(this._pos===this.blockSize){b(this._sh,this._sl,this._state);this._pos=0}e[t]=this._state[this._pos++]}};return e}();t.Keccak=i;var n=function(e){r(t,e);function t(t){if(t===void 0){t=32}var r=e.call(this,t*2)||this;r.digestLength=t;return r}t.prototype.finish=function(e){if(!this._finished){this._padAndPermute(6)}else{this._pos=0}this._squeeze(e);return this};t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);this.finish(e);return e};t.prototype.saveState=function(){if(this._finished){throw new Error("SHA3: cannot save finished state")}return new Uint8Array(this._state.subarray(0,this._pos))};t.prototype.restoreState=function(e){this._state.set(e);this._pos=e.length;this._finished=false;return this};t.prototype.cleanSavedState=function(e){wipe_1.wipe(e)};return t}(i);t.SHA3=n;var s=function(e){r(t,e);function t(){return e.call(this,224/8)||this}return t}(n);t.SHA3224=s;var a=function(e){r(t,e);function t(){return e.call(this,256/8)||this}return t}(n);t.SHA3256=a;var o=function(e){r(t,e);function t(){return e.call(this,384/8)||this}return t}(n);t.SHA3384=o;var f=function(e){r(t,e);function t(){return e.call(this,512/8)||this}return t}(n);t.SHA3512=f;function c(e,t){var r=new n(e);r.update(t);var i=r.digest();r.clean();return i}t.hash=c;t.hash224=function(e){return c(224/8,e)};t.hash256=function(e){return c(256/8,e)};t.hash384=function(e){return c(384/8,e)};t.hash512=function(e){return c(512/8,e)};var u=function(e){r(t,e);function t(t){var r=e.call(this,t/8*2)||this;r.bitSize=t;return r}t.prototype.stream=function(e){if(!this._finished){this._padAndPermute(31)}this._squeeze(e)};return t}(i);t.SHAKE=u;var h=function(e){r(t,e);function t(){return e.call(this,128)||this}return t}(u);t.SHAKE128=h;var l=function(e){r(t,e);function t(){return e.call(this,256)||this}return t}(u);t.SHAKE256=l;var d=new Int32Array([0,0,2147483648,2147483648,0,0,2147483648,2147483648,0,0,0,0,0,2147483648,2147483648,2147483648,2147483648,2147483648,0,2147483648,2147483648,2147483648,0,2147483648]);var p=new Int32Array([1,32898,32906,2147516416,32907,2147483649,2147516545,32777,138,136,2147516425,2147483658,2147516555,139,32905,32771,32770,128,32778,2147483658,2147516545,32896,2147483649,2147516424]);function b(e,t,r){var i,n,s,a,o;var f,c,u,h,l;var b,m;for(var v=0;v<25;v++){t[v]=binary.readUint32LE(r,v*8);e[v]=binary.readUint32LE(r,v*8+4)}for(var y=0;y<24;y++){i=e[0]^e[5]^e[10]^e[15]^e[20];n=e[1]^e[6]^e[11]^e[16]^e[21];s=e[2]^e[7]^e[12]^e[17]^e[22];a=e[3]^e[8]^e[13]^e[18]^e[23];o=e[4]^e[9]^e[14]^e[19]^e[24];f=t[0]^t[5]^t[10]^t[15]^t[20];c=t[1]^t[6]^t[11]^t[16]^t[21];u=t[2]^t[7]^t[12]^t[17]^t[22];h=t[3]^t[8]^t[13]^t[18]^t[23];l=t[4]^t[9]^t[14]^t[19]^t[24];b=o^(n<<1|c>>>32-1);m=l^(c<<1|n>>>32-1);e[0]^=b;e[5]^=b;e[10]^=b;e[15]^=b;e[20]^=b;t[0]^=m;t[5]^=m;t[10]^=m;t[15]^=m;t[20]^=m;b=i^(s<<1|u>>>32-1);m=f^(u<<1|s>>>32-1);e[1]^=b;e[6]^=b;e[11]^=b;e[16]^=b;e[21]^=b;t[1]^=m;t[6]^=m;t[11]^=m;t[16]^=m;t[21]^=m;b=n^(a<<1|h>>>32-1);m=c^(h<<1|a>>>32-1);e[2]^=b;e[7]^=b;e[12]^=b;e[17]^=b;e[22]^=b;t[2]^=m;t[7]^=m;t[12]^=m;t[17]^=m;t[22]^=m;b=s^(o<<1|l>>>32-1);m=u^(l<<1|o>>>32-1);e[3]^=b;t[3]^=m;e[8]^=b;t[8]^=m;e[13]^=b;t[13]^=m;e[18]^=b;t[18]^=m;e[23]^=b;t[23]^=m;b=a^(i<<1|f>>>32-1);m=h^(f<<1|i>>>32-1);e[4]^=b;e[9]^=b;e[14]^=b;e[19]^=b;e[24]^=b;t[4]^=m;t[9]^=m;t[14]^=m;t[19]^=m;t[24]^=m;b=e[1];m=t[1];i=e[10];f=t[10];e[10]=b<<1|m>>>32-1;t[10]=m<<1|b>>>32-1;b=i;m=f;i=e[7];f=t[7];e[7]=b<<3|m>>>32-3;t[7]=m<<3|b>>>32-3;b=i;m=f;i=e[11];f=t[11];e[11]=b<<6|m>>>32-6;t[11]=m<<6|b>>>32-6;b=i;m=f;i=e[17];f=t[17];e[17]=b<<10|m>>>32-10;t[17]=m<<10|b>>>32-10;b=i;m=f;i=e[18];f=t[18];e[18]=b<<15|m>>>32-15;t[18]=m<<15|b>>>32-15;b=i;m=f;i=e[3];f=t[3];e[3]=b<<21|m>>>32-21;t[3]=m<<21|b>>>32-21;b=i;m=f;i=e[5];f=t[5];e[5]=b<<28|m>>>32-28;t[5]=m<<28|b>>>32-28;b=i;m=f;i=e[16];f=t[16];e[16]=m<<4|b>>>32-4;t[16]=b<<4|m>>>32-4;b=i;m=f;i=e[8];f=t[8];e[8]=m<<13|b>>>32-13;t[8]=b<<13|m>>>32-13;b=i;m=f;i=e[21];f=t[21];e[21]=m<<23|b>>>32-23;t[21]=b<<23|m>>>32-23;b=i;m=f;i=e[24];f=t[24];e[24]=b<<2|m>>>32-2;t[24]=m<<2|b>>>32-2;b=i;m=f;i=e[4];f=t[4];e[4]=b<<14|m>>>32-14;t[4]=m<<14|b>>>32-14;b=i;m=f;i=e[15];f=t[15];e[15]=b<<27|m>>>32-27;t[15]=m<<27|b>>>32-27;b=i;m=f;i=e[23];f=t[23];e[23]=m<<9|b>>>32-9;t[23]=b<<9|m>>>32-9;b=i;m=f;i=e[19];f=t[19];e[19]=m<<24|b>>>32-24;t[19]=b<<24|m>>>32-24;b=i;m=f;i=e[13];f=t[13];e[13]=b<<8|m>>>32-8;t[13]=m<<8|b>>>32-8;b=i;m=f;i=e[12];f=t[12];e[12]=b<<25|m>>>32-25;t[12]=m<<25|b>>>32-25;b=i;m=f;i=e[2];f=t[2];e[2]=m<<11|b>>>32-11;t[2]=b<<11|m>>>32-11;b=i;m=f;i=e[20];f=t[20];e[20]=m<<30|b>>>32-30;t[20]=b<<30|m>>>32-30;b=i;m=f;i=e[14];f=t[14];e[14]=b<<18|m>>>32-18;t[14]=m<<18|b>>>32-18;b=i;m=f;i=e[22];f=t[22];e[22]=m<<7|b>>>32-7;t[22]=b<<7|m>>>32-7;b=i;m=f;i=e[9];f=t[9];e[9]=m<<29|b>>>32-29;t[9]=b<<29|m>>>32-29;b=i;m=f;i=e[6];f=t[6];e[6]=b<<20|m>>>32-20;t[6]=m<<20|b>>>32-20;b=i;m=f;i=e[1];f=t[1];e[1]=m<<12|b>>>32-12;t[1]=b<<12|m>>>32-12;b=i;m=f;i=e[0];n=e[1];s=e[2];a=e[3];o=e[4];e[0]^=~n&s;e[1]^=~s&a;e[2]^=~a&o;e[3]^=~o&i;e[4]^=~i&n;f=t[0];c=t[1];u=t[2];h=t[3];l=t[4];t[0]^=~c&u;t[1]^=~u&h;t[2]^=~h&l;t[3]^=~l&f;t[4]^=~f&c;i=e[5];n=e[6];s=e[7];a=e[8];o=e[9];e[5]^=~n&s;e[6]^=~s&a;e[7]^=~a&o;e[8]^=~o&i;e[9]^=~i&n;f=t[5];c=t[6];u=t[7];h=t[8];l=t[9];t[5]^=~c&u;t[6]^=~u&h;t[7]^=~h&l;t[8]^=~l&f;t[9]^=~f&c;i=e[10];n=e[11];s=e[12];a=e[13];o=e[14];e[10]^=~n&s;e[11]^=~s&a;e[12]^=~a&o;e[13]^=~o&i;e[14]^=~i&n;f=t[10];c=t[11];u=t[12];h=t[13];l=t[14];t[10]^=~c&u;t[11]^=~u&h;t[12]^=~h&l;t[13]^=~l&f;t[14]^=~f&c;i=e[15];n=e[16];s=e[17];a=e[18];o=e[19];e[15]^=~n&s;e[16]^=~s&a;e[17]^=~a&o;e[18]^=~o&i;e[19]^=~i&n;f=t[15];c=t[16];u=t[17];h=t[18];l=t[19];t[15]^=~c&u;t[16]^=~u&h;t[17]^=~h&l;t[18]^=~l&f;t[19]^=~f&c;i=e[20];n=e[21];s=e[22];a=e[23];o=e[24];e[20]^=~n&s;e[21]^=~s&a;e[22]^=~a&o;e[23]^=~o&i;e[24]^=~i&n;f=t[20];c=t[21];u=t[22];h=t[23];l=t[24];t[20]^=~c&u;t[21]^=~u&h;t[22]^=~h&l;t[23]^=~l&f;t[24]^=~f&c;e[0]^=d[y];t[0]^=p[y]}for(var v=0;v<25;v++){binary.writeUint32LE(t[v],r,v*8);binary.writeUint32LE(e[v],r,v*8+4)}}}));var readUInt32BE=function e(t,r){var i=t[0+r]<<24|t[1+r]<<16|t[2+r]<<8|t[3+r];return i>>>0};var writeUInt32BE=function e(t,r,i){t[0+i]=r>>>24;t[1+i]=r>>>16&255;t[2+i]=r>>>8&255;t[3+i]=r&255};var ip=function e(t,r,i,n){var s=0;var a=0;for(var o=6;o>=0;o-=2){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>>f+o&1}}for(var o=6;o>=0;o-=2){for(var f=1;f<=25;f+=8){a<<=1;a|=r>>>f+o&1}for(var f=1;f<=25;f+=8){a<<=1;a|=t>>>f+o&1}}i[n+0]=s>>>0;i[n+1]=a>>>0};var rip=function e(t,r,i,n){var s=0;var a=0;for(var o=0;o<4;o++){for(var f=24;f>=0;f-=8){s<<=1;s|=r>>>f+o&1;s<<=1;s|=t>>>f+o&1}}for(var o=4;o<8;o++){for(var f=24;f>=0;f-=8){a<<=1;a|=r>>>f+o&1;a<<=1;a|=t>>>f+o&1}}i[n+0]=s>>>0;i[n+1]=a>>>0};var pc1=function e(t,r,i,n){var s=0;var a=0;for(var o=7;o>=5;o--){for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var f=0;f<=24;f+=8){s<<=1;s|=t>>f+o&1}}for(var f=0;f<=24;f+=8){s<<=1;s|=r>>f+o&1}for(var o=1;o<=3;o++){for(var f=0;f<=24;f+=8){a<<=1;a|=r>>f+o&1}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}}for(var f=0;f<=24;f+=8){a<<=1;a|=t>>f+o&1}i[n+0]=s>>>0;i[n+1]=a>>>0};var r28shl=function e(t,r){return t<<r&268435455|t>>>28-r};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];var pc2=function e(t,r,i,n){var s=0;var a=0;var o=pc2table.length>>>1;for(var f=0;f<o;f++){s<<=1;s|=t>>>pc2table[f]&1}for(var f=o;f<pc2table.length;f++){a<<=1;a|=r>>>pc2table[f]&1}i[n+0]=s>>>0;i[n+1]=a>>>0};var expand=function e(t,r,i){var n=0;var s=0;n=(t&1)<<5|t>>>27;for(var a=23;a>=15;a-=4){n<<=6;n|=t>>>a&63}for(var a=11;a>=3;a-=4){s|=t>>>a&63;s<<=6}s|=(t&31)<<1|t>>>31;r[i+0]=n>>>0;r[i+1]=s>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];var substitute=function e(t,r){var i=0;for(var n=0;n<4;n++){var s=t>>>18-n*6&63;var a=sTable[n*64+s];i<<=4;i|=a}for(var n=0;n<4;n++){var s=r>>>18-n*6&63;var a=sTable[4*64+n*64+s];i<<=4;i|=a}return i>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];var permute=function e(t){var r=0;for(var i=0;i<permuteTable.length;i++){r<<=1;r|=t>>>permuteTable[i]&1}return r>>>0};var padSplit=function e(t,r,i){var n=t.toString(2);while(n.length<r)n="0"+n;var s=[];for(var a=0;a<r;a+=i)s.push(n.slice(a,a+i));return s.join(" ")};var utils$2={readUInt32BE,writeUInt32BE,ip,rip,pc1,r28shl,pc2,expand,substitute,permute,padSplit};function Cipher$1(e){this.options=e;this.type=this.options.type;this.blockSize=8;this._init();this.buffer=new Array(this.blockSize);this.bufferOff=0}var cipher=Cipher$1;Cipher$1.prototype._init=function e(){};Cipher$1.prototype.update=function e(t){if(t.length===0)return[];if(this.type==="decrypt")return this._updateDecrypt(t);else return this._updateEncrypt(t)};Cipher$1.prototype._buffer=function e(t,r){var i=Math.min(this.buffer.length-this.bufferOff,t.length-r);for(var n=0;n<i;n++)this.buffer[this.bufferOff+n]=t[r+n];this.bufferOff+=i;return i};Cipher$1.prototype._flushBuffer=function e(t,r){this._update(this.buffer,0,t,r);this.bufferOff=0;return this.blockSize};Cipher$1.prototype._updateEncrypt=function e(t){var r=0;var i=0;var n=(this.bufferOff+t.length)/this.blockSize|0;var s=new Array(n*this.blockSize);if(this.bufferOff!==0){r+=this._buffer(t,r);if(this.bufferOff===this.buffer.length)i+=this._flushBuffer(s,i)}var a=t.length-(t.length-r)%this.blockSize;for(;r<a;r+=this.blockSize){this._update(t,r,s,i);i+=this.blockSize}for(;r<t.length;r++,this.bufferOff++)this.buffer[this.bufferOff]=t[r];return s};Cipher$1.prototype._updateDecrypt=function e(t){var r=0;var i=0;var n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1;var s=new Array(n*this.blockSize);for(;n>0;n--){r+=this._buffer(t,r);i+=this._flushBuffer(s,i)}r+=this._buffer(t,r);return s};Cipher$1.prototype.final=function e(t){var r;if(t)r=this.update(t);var i;if(this.type==="encrypt")i=this._finalEncrypt();else i=this._finalDecrypt();if(r)return r.concat(i);else return i};Cipher$1.prototype._pad=function e(t,r){if(r===0)return false;while(r<t.length)t[r++]=0;return true};Cipher$1.prototype._finalEncrypt=function e(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);this._update(this.buffer,0,t,0);return t};Cipher$1.prototype._unpad=function e(t){return t};Cipher$1.prototype._finalDecrypt=function e(){minimalisticAssert$1.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);this._flushBuffer(t,0);return this._unpad(t)};function DESState(){this.tmp=new Array(2);this.keys=null}function DES$1(e){cipher.call(this,e);var t=new DESState;this._desState=t;this.deriveKeys(t,e.key)}inherits_browser$1(DES$1,cipher);var des$2=DES$1;DES$1.create=function e(t){return new DES$1(t)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$1.prototype.deriveKeys=function e(t,r){t.keys=new Array(16*2);minimalisticAssert$1.equal(r.length,this.blockSize,"Invalid key length");var i=utils$2.readUInt32BE(r,0);var n=utils$2.readUInt32BE(r,4);utils$2.pc1(i,n,t.tmp,0);i=t.tmp[0];n=t.tmp[1];for(var s=0;s<t.keys.length;s+=2){var a=shiftTable[s>>>1];i=utils$2.r28shl(i,a);n=utils$2.r28shl(n,a);utils$2.pc2(i,n,t.keys,s)}};DES$1.prototype._update=function e(t,r,i,n){var s=this._desState;var a=utils$2.readUInt32BE(t,r);var o=utils$2.readUInt32BE(t,r+4);utils$2.ip(a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];if(this.type==="encrypt")this._encrypt(s,a,o,s.tmp,0);else this._decrypt(s,a,o,s.tmp,0);a=s.tmp[0];o=s.tmp[1];utils$2.writeUInt32BE(i,a,n);utils$2.writeUInt32BE(i,o,n+4)};DES$1.prototype._pad=function e(t,r){var i=t.length-r;for(var n=r;n<t.length;n++)t[n]=i;return true};DES$1.prototype._unpad=function e(t){var r=t[t.length-1];for(var i=t.length-r;i<t.length;i++)minimalisticAssert$1.equal(t[i],r);return t.slice(0,t.length-r)};DES$1.prototype._encrypt=function e(t,r,i,n,s){var a=r;var o=i;for(var f=0;f<t.keys.length;f+=2){var c=t.keys[f];var u=t.keys[f+1];utils$2.expand(o,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var h=utils$2.substitute(c,u);var l=utils$2.permute(h);var d=o;o=(a^l)>>>0;a=d}utils$2.rip(o,a,n,s)};DES$1.prototype._decrypt=function e(t,r,i,n,s){var a=i;var o=r;for(var f=t.keys.length-2;f>=0;f-=2){var c=t.keys[f];var u=t.keys[f+1];utils$2.expand(a,t.tmp,0);c^=t.tmp[0];u^=t.tmp[1];var h=utils$2.substitute(c,u);var l=utils$2.permute(h);var d=a;a=(o^l)>>>0;o=d}utils$2.rip(a,o,n,s)};var proto={};function CBCState(e){minimalisticAssert$1.equal(e.length,8,"Invalid IV length");this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}function instantiate$2(e){function t(t){e.call(this,t);this._cbcInit()}inherits_browser$1(t,e);var r=Object.keys(proto);for(var i=0;i<r.length;i++){var n=r[i];t.prototype[n]=proto[n]}t.create=function e(r){return new t(r)};return t}var instantiate_1$1=instantiate$2;proto._cbcInit=function e(){var t=new CBCState(this.options.iv);this._cbcState=t};proto._update=function e(t,r,i,n){var s=this._cbcState;var a=this.constructor.super_.prototype;var o=s.iv;if(this.type==="encrypt"){for(var f=0;f<this.blockSize;f++)o[f]^=t[r+f];a._update.call(this,o,0,i,n);for(var f=0;f<this.blockSize;f++)o[f]=i[n+f]}else{a._update.call(this,t,r,i,n);for(var f=0;f<this.blockSize;f++)i[n+f]^=o[f];for(var f=0;f<this.blockSize;f++)o[f]=t[r+f]}};var cbc={instantiate:instantiate_1$1};function EDEState(e,t){minimalisticAssert$1.equal(t.length,24,"Invalid key length");var r=t.slice(0,8);var i=t.slice(8,16);var n=t.slice(16,24);if(e==="encrypt"){this.ciphers=[des$2.create({type:"encrypt",key:r}),des$2.create({type:"decrypt",key:i}),des$2.create({type:"encrypt",key:n})]}else{this.ciphers=[des$2.create({type:"decrypt",key:n}),des$2.create({type:"encrypt",key:i}),des$2.create({type:"decrypt",key:r})]}}function EDE$1(e){cipher.call(this,e);var t=new EDEState(this.type,this.options.key);this._edeState=t}inherits_browser$1(EDE$1,cipher);var ede=EDE$1;EDE$1.create=function e(t){return new EDE$1(t)};EDE$1.prototype._update=function e(t,r,i,n){var s=this._edeState;s.ciphers[0]._update(t,r,i,n);s.ciphers[1]._update(i,n,i,n);s.ciphers[2]._update(i,n,i,n)};EDE$1.prototype._pad=des$2.prototype._pad;EDE$1.prototype._unpad=des$2.prototype._unpad;var utils$1=utils$2;var Cipher=cipher;var DES=des$2;var CBC=cbc;var EDE=ede;var des={utils:utils$1,Cipher,DES,CBC,EDE};const des$1=Object.freeze(Object.assign(Object.create(null),des,{default:des,utils:utils$1,Cipher,DES,CBC,EDE}));let window$1={};if(typeof self!=="undefined"){window$1=self}let nativeCrypto=window$1["msCrypto"]||window$1.crypto||{};let nativeSubtle=null;try{nativeSubtle=(nativeCrypto===null||nativeCrypto===void 0?void 0:nativeCrypto.subtle)||(nativeCrypto===null||nativeCrypto===void 0?void 0:nativeCrypto["webkitSubtle"])||null}catch(e){console.warn("Cannot get subtle from crypto",e)}class Debug{static get enabled(){return typeof self!=="undefined"&&self.PV_WEBCRYPTO_LINER_LOG}static log(...e){if(this.enabled){console.log.apply(console,e)}}static error(...e){if(this.enabled){console.error.apply(console,e)}}static info(...e){if(this.enabled){console.info.apply(console,e)}}static warn(...e){if(this.enabled){console.warn.apply(console,e)}}static trace(...e){if(this.enabled){console.trace.apply(console,e)}}}var Browser;(function(e){e["Unknown"]="Unknown";e["IE"]="Internet Explorer";e["Safari"]="Safari";e["Edge"]="Edge";e["Chrome"]="Chrome";e["Firefox"]="Firefox Mozilla";e["Mobile"]="Mobile"})(Browser||(Browser={}));function BrowserInfo(){const e={name:Browser.Unknown,version:"0"};if(typeof self==="undefined"){return e}const t=self.navigator.userAgent;let r;if(r=/edge\/([\d\.]+)/i.exec(t)){e.name=Browser.Edge;e.version=r[1]}else if(/msie/i.test(t)){e.name=Browser.IE;e.version=/msie ([\d\.]+)/i.exec(t)[1]}else if(/Trident/i.test(t)){e.name=Browser.IE;e.version=/rv:([\d\.]+)/i.exec(t)[1]}else if(/chrome/i.test(t)){e.name=Browser.Chrome;e.version=/chrome\/([\d\.]+)/i.exec(t)[1]}else if(/firefox/i.test(t)){e.name=Browser.Firefox;e.version=/firefox\/([\d\.]+)/i.exec(t)[1]}else if(/mobile/i.test(t)){e.name=Browser.Mobile;e.version=/mobile\/([\w]+)/i.exec(t)[1]}else if(/safari/i.test(t)){e.name=Browser.Safari;e.version=/version\/([\d\.]+)/i.exec(t)[1]}return e}function concat$1(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,i)=>{for(let i=0;i<e.length;i++){t[r+i]=e[i]}r+=e.length}));return t}class CryptoKey extends CryptoKey$1{constructor(e,t,r,i){super();this.extractable=t;this.type=r;this.usages=i;this.algorithm=Object.assign({},e)}}function isAlgorithm(e,t){return e.name.toUpperCase()===t.toUpperCase()}class AesCryptoKey extends CryptoKey{constructor(e,t,r,i){super(e,t,"secret",r);this.raw=i}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:build.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new AlgorithmError("Unsupported algorithm name")}}}class AesCrypto{static checkCryptoKey(e){if(!(e instanceof AesCryptoKey)){throw new TypeError("key: Is not AesCryptoKey")}}static generateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=nativeCrypto.getRandomValues(new Uint8Array(e.length/8));return new AesCryptoKey(e,t,r,i)}))}static encrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,build.BufferSourceConverter.toUint8Array(r),true)}))}static decrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,build.BufferSourceConverter.toUint8Array(r),false)}))}static exportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){let e;if(isJWK(t)){e=build.Convert.FromBase64Url(t.k)}else{e=build.BufferSourceConverter.toArrayBuffer(t)}switch(e.byteLength<<3){case 128:case 192:case 256:break;default:throw new OperationError("keyData: Is wrong key length")}const s=new AesCryptoKey({name:r.name,length:e.byteLength<<3},i,n,new Uint8Array(e));return s}))}static cipher(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){const n=i?"encrypt":"decrypt";let s;if(isAlgorithm(e,AesCrypto.AesCBC)){const i=build.BufferSourceConverter.toUint8Array(e.iv);s=AES_CBC[n](r,t.raw,undefined,i)}else if(isAlgorithm(e,AesCrypto.AesGCM)){const i=build.BufferSourceConverter.toUint8Array(e.iv);let a;if(e.additionalData){a=build.BufferSourceConverter.toArrayBuffer(e.additionalData)}const o=(e.tagLength||128)/8;s=AES_GCM[n](r,t.raw,i,a,o)}else if(isAlgorithm(e,AesCrypto.AesECB)){s=AES_ECB[n](r,t.raw,true)}else{throw new OperationError(`algorithm: Is not recognized`)}return build.BufferSourceConverter.toArrayBuffer(s)}))}}AesCrypto.AesCBC="AES-CBC";AesCrypto.AesECB="AES-ECB";AesCrypto.AesGCM="AES-GCM";class AesCbcProvider extends AesCbcProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.generateKey(e,t,r)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.encrypt(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.decrypt(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.importKey(e,t,r,i,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);AesCrypto.checkCryptoKey(e)}}class AesEcbProvider extends AesEcbProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.generateKey(e,t,r)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.encrypt(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.decrypt(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.importKey(e,t,r,i,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);AesCrypto.checkCryptoKey(e)}}class AesGcmProvider extends AesGcmProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.generateKey(e,t,r)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.encrypt(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.decrypt(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.importKey(e,t,r,i,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);AesCrypto.checkCryptoKey(e)}}class AesCtrProvider extends AesCtrProvider$1{onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=new AES_CTR(t.raw,build.BufferSourceConverter.toUint8Array(e.counter)).encrypt(build.BufferSourceConverter.toUint8Array(r));return build.BufferSourceConverter.toArrayBuffer(i)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=new AES_CTR(t.raw,build.BufferSourceConverter.toUint8Array(e.counter)).decrypt(build.BufferSourceConverter.toUint8Array(r));return build.BufferSourceConverter.toArrayBuffer(i)}))}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return AesCrypto.importKey(e,t,r,i,n)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);AesCrypto.checkCryptoKey(e)}}class AesKwProvider extends AesKwProvider$1{onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){throw new Error("Method not implemented.")}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);AesCrypto.checkCryptoKey(e)}}class RsaCryptoKey extends CryptoKey{constructor(e,t,r,i,n){super(e,t,r,i);this.data=n}}class RsaCrypto{static checkCryptoKey(e){if(!(e instanceof RsaCryptoKey)){throw new TypeError("key: Is not RsaCryptoKey")}}static generateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i={name:"RSA-PSS",hash:"SHA-256",publicExponent:e.publicExponent,modulusLength:e.modulusLength};const n=yield nativeSubtle.generateKey(i,true,["sign","verify"]);const s=new Crypto;const a=yield s.subtle.exportKey("pkcs8",n.privateKey);const o=yield s.subtle.importKey("pkcs8",a,e,t,r.filter((e=>this.privateUsages.includes(e))));const f=yield s.subtle.exportKey("spki",n.publicKey);const c=yield s.subtle.importKey("spki",f,e,true,r.filter((e=>this.publicUsages.includes(e))));return{privateKey:o,publicKey:c}}))}static exportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);default:throw new OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){let s;switch(e){case"pkcs8":s=this.importPkcs8Key(t);break;case"spki":s=this.importSpkiKey(t);break;case"jwk":s=this.importJwkKey(t);break;default:throw new OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}const a=new RsaCryptoKey(Object.assign({publicExponent:s[1][1]===1?s[1].slice(1):s[1].slice(3),modulusLength:s[0].byteLength<<3},r),i,s.length===2?"public":"private",n,s);return a}))}static randomNonZeroValues(e){e=nativeCrypto.getRandomValues(e);return e.map((e=>{while(!e){e=nativeCrypto.getRandomValues(new Uint8Array(1))[0]}return e}))}static exportPkcs8Key(e){const t=new index$1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";t.privateKeyAlgorithm.parameters=null;t.privateKey=AsnConvert.serialize(this.exportAsmKey(e.data));return AsnConvert.serialize(t)}static importPkcs8Key(e){const t=AsnConvert.parse(e,index$1.PrivateKeyInfo);const r=AsnConvert.parse(t.privateKey,index$1.RsaPrivateKey);return this.importAsmKey(r)}static importSpkiKey(e){const t=AsnConvert.parse(e,index$1.PublicKeyInfo);const r=AsnConvert.parse(t.publicKey,index$1.RsaPublicKey);return this.importAsmKey(r)}static exportSpkiKey(e){const t=new index$1.RsaPublicKey;t.modulus=e.data[0].buffer;t.publicExponent=e.data[1][1]===1?e.data[1].buffer.slice(1):e.data[1].buffer.slice(3);const r=new index$1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1";r.publicKeyAlgorithm.parameters=null;r.publicKey=AsnConvert.serialize(t);return AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=JsonParser.fromJSON(e,{targetSchema:index$1.RsaPrivateKey})}else{t=JsonParser.fromJSON(e,{targetSchema:index$1.RsaPublicKey})}return this.importAsmKey(t)}static exportJwkKey(e){const t=this.exportAsmKey(e.data);const r=JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.kty="RSA";r.alg=this.getJwkAlgorithm(e.algorithm);return r}static getJwkAlgorithm(e){switch(e.name.toUpperCase()){case"RSA-OAEP":const t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${t!=="1"?`-${t}`:""}`;case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSAES-PKCS1-V1_5":return`PS1`;default:throw new OperationError("algorithm: Is not recognized")}}static exportAsmKey(e){let t;if(e.length>2){const r=new index$1.RsaPrivateKey;r.privateExponent=e[2].buffer;r.prime1=e[3].buffer;r.prime2=e[4].buffer;r.exponent1=e[5].buffer;r.exponent2=e[6].buffer;r.coefficient=e[7].buffer;t=r}else{t=new index$1.RsaPublicKey}t.modulus=e[0].buffer;t.publicExponent=e[1][1]===1?e[1].buffer.slice(1):e[1].buffer.slice(3);return t}static importAsmKey(e){const t=new Uint8Array(4-e.publicExponent.byteLength);const r=[new Uint8Array(e.modulus),concat$1(t,new Uint8Array(e.publicExponent))];if(e instanceof index$1.RsaPrivateKey){r.push(new Uint8Array(e.privateExponent));r.push(new Uint8Array(e.prime1));r.push(new Uint8Array(e.prime2));r.push(new Uint8Array(e.exponent1));r.push(new Uint8Array(e.exponent2));r.push(new Uint8Array(e.coefficient))}return r}}RsaCrypto.RsaSsa="RSASSA-PKCS1-v1_5";RsaCrypto.RsaPss="RSA-PSS";RsaCrypto.RsaOaep="RSA-OAEP";RsaCrypto.privateUsages=["sign","decrypt","unwrapKey"];RsaCrypto.publicUsages=["verify","encrypt","wrapKey"];class ShaCrypto{static getDigest(e){switch(e){case"SHA-1":return new Sha1;case"SHA-256":return new Sha256;case"SHA-512":return new Sha512;default:throw new AlgorithmError("keyAlgorithm.hash: Is not recognized")}}static digest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){const r=this.getDigest(e.name);const i=r.process(build.BufferSourceConverter.toUint8Array(t)).finish().result;return build.BufferSourceConverter.toArrayBuffer(i)}))}}class RsaOaepProvider extends RsaOaepProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.importKey(e,t,r,i,n)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);RsaCrypto.checkCryptoKey(e)}cipher(e,t,r){const i=ShaCrypto.getDigest(t.algorithm.hash.name);let n;if(e.label){n=build.BufferSourceConverter.toUint8Array(e.label)}const s=new RSA_OAEP(t.data,i,n);let a;const o=build.BufferSourceConverter.toUint8Array(r);if(t.type==="public"){a=s.encrypt(o)}else{a=s.decrypt(o)}return build.BufferSourceConverter.toArrayBuffer(a)}}class RsaPssProvider extends RsaPssProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.importKey(e,t,r,i,n)}))}onSign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=new RSA_PSS(t.data,ShaCrypto.getDigest(t.algorithm.hash.name),e.saltLength);const n=i.sign(build.BufferSourceConverter.toUint8Array(r));return build.BufferSourceConverter.toArrayBuffer(n)}))}onVerify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){const n=new RSA_PSS(t.data,ShaCrypto.getDigest(t.algorithm.hash.name),e.saltLength);try{n.verify(build.BufferSourceConverter.toUint8Array(r),build.BufferSourceConverter.toUint8Array(i))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);RsaCrypto.checkCryptoKey(e)}}class RsaSsaProvider extends RsaSsaProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.importKey(e,t,r,i,n)}))}onSign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const e=new RSA_PKCS1_v1_5(t.data,ShaCrypto.getDigest(t.algorithm.hash.name));const i=e.sign(build.BufferSourceConverter.toUint8Array(r));return build.BufferSourceConverter.toArrayBuffer(i)}))}onVerify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){const e=new RSA_PKCS1_v1_5(t.data,ShaCrypto.getDigest(t.algorithm.hash.name));try{e.verify(build.BufferSourceConverter.toUint8Array(r),build.BufferSourceConverter.toUint8Array(i))}catch(e){return false}return true}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);RsaCrypto.checkCryptoKey(e)}}class RsaEsProvider extends ProviderCrypto{constructor(){super(...arguments);this.name="RSAES-PKCS1-v1_5";this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]};this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.generateKey(e,t,r)}))}checkGenerateKeyParams(e){this.checkRequiredProperty(e,"publicExponent");if(!(e.publicExponent&&e.publicExponent instanceof Uint8Array)){throw new TypeError("publicExponent: Missing or not a Uint8Array")}const t=build.Convert.ToBase64(e.publicExponent);if(!(t==="Aw=="||t==="AQAB")){throw new TypeError("publicExponent: Must be [3] or [1,0,1]")}this.checkRequiredProperty(e,"modulusLength");switch(e.modulusLength){case 1024:case 2048:case 4096:break;default:throw new TypeError("modulusLength: Must be 1024, 2048, or 4096")}}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const e=new RSA(t.data).decrypt(new BigNumber(build.BufferSourceConverter.toUint8Array(r))).result;const i=t.algorithm.modulusLength>>3;if(r.byteLength!==i){throw new CryptoError("Decryption error. Encrypted message size doesn't match to key length")}let n=0;if(e[n++]||e[n++]!==2){throw new CryptoError("Decryption error")}do{if(e[n++]===0){break}}while(n<e.length);if(n<11){throw new CryptoError("Decryption error. PS is less than 8 octets.")}if(n===e.length){throw new CryptoError("Decryption error. There is no octet with hexadecimal value 0x00 to separate PS from M")}return e.buffer.slice(n)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const e=t.algorithm.modulusLength>>3;if(r.byteLength>e-11){throw new CryptoError("Message too long")}const i=e-r.byteLength-3;const n=RsaCrypto.randomNonZeroValues(new Uint8Array(i));const s=new Uint8Array(e);s[0]=0;s[1]=2;s.set(n,2);s[2+i]=0;s.set(new Uint8Array(r),3+i);const a=new RSA(t.data).encrypt(new BigNumber(s)).result;return build.BufferSourceConverter.toArrayBuffer(a)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return RsaCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){const s=yield RsaCrypto.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),i,n);return s}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);RsaCrypto.checkCryptoKey(e)}prepareSignData(e,t){return __awaiter$1(this,void 0,void 0,(function*(){const r=new Crypto;return r.subtle.digest(e.hash,t)}))}}const namedOIDs={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13"};function getOidByNamedCurve$1(e){const t=namedOIDs[e];if(!t){throw new OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class EcCryptoKey extends CryptoKey{constructor(e,t,r,i,n){super(e,t,r,i);this.data=n}}class EcCrypto{static checkLib(){if(typeof elliptic==="undefined"){throw new OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static generateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const i=this.initEcKey(e.namedCurve);const n=i.genKeyPair();n.getPublic();const s=new EcCryptoKey(Object.assign({},e),t,"private",r.filter((e=>~this.privateUsages.indexOf(e))),n);const a=new EcCryptoKey(Object.assign({},e),true,"public",r.filter((e=>~this.publicUsages.indexOf(e))),n);return{privateKey:s,publicKey:a}}))}static checkCryptoKey(e){if(!(e instanceof EcCryptoKey)){throw new TypeError("key: Is not EcCryptoKey")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,i)=>{for(let i=0;i<e.length;i++){t[r+i]=e[i]}r+=e.length}));return t}static exportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"pkcs8":return this.exportPkcs8Key(t);case"spki":return this.exportSpkiKey(t);case"jwk":return this.exportJwkKey(t);case"raw":return new Uint8Array(t.data.getPublic("der")).buffer;default:throw new OperationError("format: Must be 'jwk', 'raw, 'pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();let s;switch(e){case"pkcs8":s=this.importPkcs8Key(t,r.namedCurve);break;case"spki":s=this.importSpkiKey(t,r.namedCurve);break;case"raw":s=this.importEcKey(new index$1.EcPublicKey(t),r.namedCurve);break;case"jwk":s=this.importJwkKey(t);break;default:throw new OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}const a=new EcCryptoKey(Object.assign({},r),i,s.priv?"private":"public",n,s);return a}))}static getNamedCurve(e){const t=e.toUpperCase();let r="";if(["P-256","P-384","P-521"].indexOf(t)>-1){r=t.replace("-","").toLowerCase()}else if(t==="K-256"){r="secp256k1"}else if(["brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"].includes(e)){r=e}else{throw new OperationError(`Unsupported named curve '${e}'`)}return r}static initEcKey(e){return elliptic_1.ec(this.getNamedCurve(e))}static exportPkcs8Key(e){const t=new index$1.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=this.ASN_ALGORITHM;t.privateKeyAlgorithm.parameters=AsnConvert.serialize(new index$1.ObjectIdentifier(getOidByNamedCurve$1(e.algorithm.namedCurve)));t.privateKey=AsnConvert.serialize(this.exportEcKey(e));return AsnConvert.serialize(t)}static importPkcs8Key(e,t){const r=AsnConvert.parse(e,index$1.PrivateKeyInfo);const i=AsnConvert.parse(r.privateKey,index$1.EcPrivateKey);return this.importEcKey(i,t)}static importSpkiKey(e,t){const r=AsnConvert.parse(e,index$1.PublicKeyInfo);const i=new index$1.EcPublicKey(r.publicKey);return this.importEcKey(i,t)}static exportSpkiKey(e){const t=new index$1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer);const r=new index$1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=this.ASN_ALGORITHM;r.publicKeyAlgorithm.parameters=AsnConvert.serialize(new index$1.ObjectIdentifier(getOidByNamedCurve$1(e.algorithm.namedCurve)));r.publicKey=t.value;return AsnConvert.serialize(r)}static importJwkKey(e){let t;if(e.d){t=JsonParser.fromJSON(e,{targetSchema:index$1.EcPrivateKey})}else{t=JsonParser.fromJSON(e,{targetSchema:index$1.EcPublicKey})}return this.importEcKey(t,e.crv)}static exportJwkKey(e){const t=this.exportEcKey(e);const r=JsonSerializer.toJSON(t);r.ext=true;r.key_ops=e.usages;r.crv=e.algorithm.namedCurve;r.kty="EC";return r}static exportEcKey(e){if(e.type==="private"){const t=new index$1.EcPrivateKey;const r=new Uint8Array(e.data.getPrivate("der").toArray());const i=new Uint8Array(this.getPointSize(e.algorithm.namedCurve)-r.length);t.privateKey=concat$1(i,r);t.publicKey=new Uint8Array(e.data.getPublic("der"));return t}else if(e.data.pub){return new index$1.EcPublicKey(new Uint8Array(e.data.getPublic("der")).buffer)}else{throw new Error("Cannot get private or public key")}}static importEcKey(e,t){const r=this.initEcKey(t);if(e instanceof index$1.EcPublicKey){return r.keyFromPublic(new Uint8Array(e.value))}return r.keyFromPrivate(new Uint8Array(e.privateKey))}static getPointSize(e){switch(e){case"P-256":case"K-256":return 32;case"P-384":return 48;case"P-521":return 66}throw new Error("namedCurve: Is not recognized")}}EcCrypto.privateUsages=["sign","deriveKey","deriveBits"];EcCrypto.publicUsages=["verify"];EcCrypto.ASN_ALGORITHM="1.2.840.10045.2.1";class EcdhProvider extends EcdhProvider$1{constructor(){super(...arguments);this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.importKey(e,t,r,i,n)}))}onDeriveBits(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){EcCrypto.checkLib();const i=t.data.derive(e.public.data.getPublic());let n=new Uint8Array(i.toArray());let s=n.length;s=s>32?s>48?66:48:32;if(n.length<s){n=EcCrypto.concat(new Uint8Array(s-n.length),n)}const a=n.slice(0,r/8).buffer;return a}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);EcCrypto.checkCryptoKey(e)}}function b2a(e){const t=new Uint8Array(e);const r=[];for(let e=0;e<t.length;e++){r.push(t[e])}return r}class EcdsaProvider extends EcdsaProvider$1{constructor(){super(...arguments);this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","SHA3-256","SHA3-384","SHA3-512"];this.namedCurves=["P-256","P-384","P-521","K-256","brainpoolP256r1","brainpoolP384r1","brainpoolP512r1"]}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return EcCrypto.importKey(e,t,r,i,n)}))}onSign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){EcCrypto.checkLib();const i=new Crypto;let n;const s=yield i.subtle.digest(e.hash,r);n=b2a(s);const a=yield t.data.sign(n);const o=new index$1.EcDsaSignature;o.r=new Uint8Array(a.r.toArray()).buffer;o.s=new Uint8Array(a.s.toArray()).buffer;return o.toWebCryptoSignature()}))}onVerify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){EcCrypto.checkLib();const n=new Crypto;const s={r:new Uint8Array(r.slice(0,r.byteLength/2)),s:new Uint8Array(r.slice(r.byteLength/2))};const a=yield n.subtle.digest(e.hash,i);const o=b2a(a);return t.data.verify(o,s)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);EcCrypto.checkCryptoKey(e)}}const edOIDs={[index$1.idEd448]:"Ed448",ed448:index$1.idEd448,[index$1.idX448]:"X448",x448:index$1.idX448,[index$1.idEd25519]:"Ed25519",ed25519:index$1.idEd25519,[index$1.idX25519]:"X25519",x25519:index$1.idX25519};function getOidByNamedCurve(e){const t=edOIDs[e.toLowerCase()];if(!t){throw new OperationError(`Cannot convert WebCrypto named curve '${e}' to OID`)}return t}class EdPrivateKey extends CryptoKey{constructor(e,t,r,i){super(e,t,"private",r);this.data=i}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{d:build.Convert.ToBase64Url(build.Convert.FromHex(/^ed/i.test(e.crv)?this.data.getSecret("hex"):this.data.getPrivate("hex")))})}fromJSON(e){if(!e.d){throw new OperationError(`Cannot get private data from JWK. Property 'd' is required`)}if(!e.crv){throw new OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}const t=build.Convert.ToHex(build.Convert.FromBase64Url(e.d));{const e=new elliptic_1.eddsa("ed25519");this.data=e.keyFromSecret(t)}return this}}class EdPublicKey extends CryptoKey{constructor(e,t,r,i){super(e,t,"public",r);this.data=i}toJSON(){const e={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(e,{x:build.Convert.ToBase64Url(build.Convert.FromHex(this.data.getPublic("hex")))})}fromJSON(e){if(!e.crv){throw new OperationError(`Cannot get named curve from JWK. Property 'crv' is required`)}if(!e.x){throw new OperationError(`Cannot get property from JWK. Property 'x' is required`)}const t=build.Convert.ToHex(build.Convert.FromBase64Url(e.x));if(/^ed/i.test(e.crv)){const r=new elliptic_1.eddsa(e.crv.toLowerCase());this.data=r.keyFromPublic(t,"hex")}else{const r=elliptic_1.ec(e.crv.replace(/^x/i,"curve"));this.data=r.keyFromPublic(t,"hex")}return this}}class EdCrypto{static checkLib(){if(typeof elliptic==="undefined"){throw new OperationError("Cannot implement EC mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/elliptic.js' script to your project")}}static concat(...e){const t=new Uint8Array(e.map((e=>e.length)).reduce(((e,t)=>e+t)));let r=0;e.forEach(((e,i)=>{for(let i=0;i<e.length;i++){t[r+i]=e[i]}r+=e.length}));return t}static generateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const i="ed25519";let n;{const e=nativeCrypto.getRandomValues(new Uint8Array(32));const t=new elliptic_1.eddsa(i);n=t.keyFromSecret(e)}const s=new EdPrivateKey(e,t,r.filter((e=>this.privateKeyUsages.indexOf(e)!==-1)),n);const a=new EdPublicKey(e,true,r.filter((e=>this.publicKeyUsages.indexOf(e)!==-1)),n);return{privateKey:s,publicKey:a}}))}static sign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const e=b2a(r);const i=t.data.sign(e).toHex();return build.Convert.FromHex(i)}))}static verify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const e=b2a(i);const n=t.data.verify(e,build.Convert.ToHex(r));return n}))}static deriveBits(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const i=new Uint8Array(build.Convert.FromHex(t.data.getSecret("hex")));const n=new elliptic_1.ec("curve25519");const s=n.keyFromPrivate(build.Convert.ToHex(i),"hex");const a=e.public.data.getPublic("hex");new Uint8Array(build.Convert.FromHex(a));const o=e.public.data.getPublic();const f=s.derive(o);let c=new Uint8Array(f.toArray());let u=c.length;u=u>32?u>48?66:48:32;if(c.length<u){c=EdCrypto.concat(new Uint8Array(u-c.length),c)}const h=c.slice(0,r/8).buffer;return h}))}static exportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":return JsonSerializer.toJSON(t);case"pkcs8":{const e=build.Convert.FromHex(t.data.getSecret("hex"));const r=new index$1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=getOidByNamedCurve(t.algorithm.namedCurve);r.privateKey=AsnConvert.serialize(new OctetString(e));return AsnConvert.serialize(r)}case"spki":{const e=build.Convert.FromHex(t.data.getPublic("hex"));const r=new index$1.PublicKeyInfo;r.publicKeyAlgorithm.algorithm=getOidByNamedCurve(t.algorithm.namedCurve);r.publicKey=e;return AsnConvert.serialize(r)}case"raw":{return build.Convert.FromHex(t.data.getPublic("hex"))}default:throw new OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}))}static importKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();switch(e.toLowerCase()){case"jwk":{const e=t;if(e.d){const e=JsonParser.fromJSON(t,{targetSchema:index$1.CurvePrivateKey});return this.importPrivateKey(e,r,i,n)}else{if(!e.x){throw new TypeError("keyData: Cannot get required 'x' field")}return this.importPublicKey(build.Convert.FromBase64Url(e.x),r,i,n)}}case"raw":{return this.importPublicKey(t,r,i,n)}case"spki":{const e=AsnConvert.parse(new Uint8Array(t),index$1.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,i,n)}case"pkcs8":{const e=AsnConvert.parse(new Uint8Array(t),index$1.PrivateKeyInfo);const s=AsnConvert.parse(e.privateKey,index$1.CurvePrivateKey);return this.importPrivateKey(s,r,i,n)}default:throw new OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}))}static importPrivateKey(e,t,r,i){const n=new EdPrivateKey(Object.assign({},t),r,i,null);n.fromJSON({crv:t.namedCurve,d:build.Convert.ToBase64Url(e.d)});return n}static importPublicKey(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){const n=new EdPublicKey(Object.assign({},t),r,i,null);n.fromJSON({crv:t.namedCurve,x:build.Convert.ToBase64Url(e)});return n}))}}EdCrypto.publicKeyUsages=["verify"];EdCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];class EdDsaProvider extends EdDsaProvider$1{constructor(){super(...arguments);this.namedCurves=["Ed25519"]}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=yield EdCrypto.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return i}))}onSign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return EdCrypto.sign(e,t,new Uint8Array(r))}))}onVerify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){return EdCrypto.verify(e,t,new Uint8Array(r),new Uint8Array(i))}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return EdCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){const s=yield EdCrypto.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),i,n);return s}))}}class EcdhEsProvider extends EcdhEsProvider$1{constructor(){super(...arguments);this.namedCurves=["X25519"]}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=yield EdCrypto.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^x/i,"X")},t,r);return i}))}onDeriveBits(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=yield EdCrypto.deriveBits(Object.assign(Object.assign({},e),{public:e.public}),t,r);return i}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return EdCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){const s=yield EdCrypto.importKey(e,t,Object.assign(Object.assign({},r),{name:this.name}),i,n);return s}))}}class Sha1Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="SHA-1";this.usages=[]}onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return ShaCrypto.digest(e,t)}))}}class Sha256Provider extends Sha1Provider{constructor(){super(...arguments);this.name="SHA-256"}}class Sha512Provider extends Sha1Provider{constructor(){super(...arguments);this.name="SHA-512"}}class Sha3256Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-256";this.usages=[]}onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return sha3.hash256(new Uint8Array(t)).buffer}))}}class Sha3384Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-384";this.usages=[]}onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return sha3.hash384(new Uint8Array(t)).buffer}))}}class Sha3512Provider extends ProviderCrypto{constructor(){super(...arguments);this.name="SHA3-512";this.usages=[]}onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return sha3.hash512(new Uint8Array(t)).buffer}))}}class Shake128Provider extends Shake128Provider$1{onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new sha3.SHAKE128).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class Shake256Provider extends Shake256Provider$1{onDigest(e,t){return __awaiter$1(this,void 0,void 0,(function*(){const r=new Uint8Array(e.length);(new sha3.SHAKE256).update(new Uint8Array(t)).stream(r);return r.buffer}))}}class PbkdfCryptoKey extends CryptoKey{constructor(e,t,r,i){super(e,t,"secret",r);this.raw=i}}class Pbkdf2Provider extends Pbkdf2Provider$1{onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return new PbkdfCryptoKey(r,i,n,build.BufferSourceConverter.toUint8Array(t))}))}onDeriveBits(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){let i;const n=build.BufferSourceConverter.toUint8Array(e.salt);const s=t.raw;switch(e.hash.name.toUpperCase()){case"SHA-1":i=Pbkdf2HmacSha1(s,n,e.iterations,r>>3);break;case"SHA-256":i=Pbkdf2HmacSha256(s,n,e.iterations,r>>3);break;case"SHA-512":i=Pbkdf2HmacSha512(s,n,e.iterations,r>>3);break;default:throw new OperationError(`algorithm.hash: '${e.hash.name}' hash algorithm is not supported`)}return build.BufferSourceConverter.toArrayBuffer(i)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof PbkdfCryptoKey)){throw new TypeError("key: Is not PbkdfCryptoKey")}}}class DesCryptoKey extends CryptoKey{constructor(e,t,r,i){super(e,t,"secret",r);this.raw=i}toJSON(){const e={kty:"oct",alg:this.getJwkAlgorithm(),k:build.Convert.ToBase64Url(this.raw),ext:this.extractable,key_ops:this.usages};return e}getJwkAlgorithm(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return`DES-CBC`;case"DES-EDE3-CBC":return`3DES-CBC`;default:throw new AlgorithmError("Unsupported algorithm name")}}}class DesCrypto{static checkLib(){if(typeof des$1==="undefined"){throw new OperationError("Cannot implement DES mechanism. Add 'https://peculiarventures.github.io/pv-webcrypto-tests/src/des.js' script to your project")}}static checkCryptoKey(e){if(!(e instanceof DesCryptoKey)){throw new TypeError("key: Is not DesCryptoKey")}}static generateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const i=nativeCrypto.getRandomValues(new Uint8Array(e.length/8));return new DesCryptoKey(e,t,r,i)}))}static exportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();switch(e){case"jwk":return t.toJSON();case"raw":return t.raw.buffer;default:throw new OperationError("format: Must be 'jwk' or 'raw'")}}))}static importKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();let e;if(isJWK(t)){e=build.Convert.FromBase64Url(t.k)}else{e=build.BufferSourceConverter.toArrayBuffer(t)}if(r.name==="DES-CBC"&&e.byteLength!==8||r.name==="DES-EDE3-CBC"&&e.byteLength!==24){throw new OperationError("keyData: Is wrong key length")}const s=new DesCryptoKey({name:r.name,length:e.byteLength<<3},i,n,new Uint8Array(e));return s}))}static encrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,r,true)}))}static decrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return this.cipher(e,t,r,false)}))}static cipher(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){this.checkLib();const n=i?"encrypt":"decrypt";let s;const a=build.BufferSourceConverter.toUint8Array(e.iv);switch(e.name.toUpperCase()){case"DES-CBC":s=CBC.instantiate(DES).create({key:t.raw,type:n,iv:a});break;case"DES-EDE3-CBC":s=CBC.instantiate(EDE).create({key:t.raw,type:n,iv:a});break;default:throw new OperationError("algorithm: Is not recognized")}const o=s.update(new Uint8Array(r)).concat(s.final());return new Uint8Array(o).buffer}))}}class DesCbcProvider extends DesProvider{constructor(){super(...arguments);this.keySizeBits=64;this.ivSize=8;this.name="DES-CBC"}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.importKey(e,t,r,i,n)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.encrypt(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);DesCrypto.checkCryptoKey(e)}}class DesEde3CbcProvider extends DesProvider{constructor(){super(...arguments);this.keySizeBits=192;this.ivSize=8;this.name="DES-EDE3-CBC"}onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.generateKey(e,t,r)}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.exportKey(e,t)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.importKey(e,t,r,i,n)}))}onEncrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.encrypt(e,t,r)}))}onDecrypt(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){return DesCrypto.decrypt(e,t,r)}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);DesCrypto.checkCryptoKey(e)}}const JsonBase64UrlConverter={fromJSON:e=>Buffer.from(build.Convert.FromBase64Url(e)),toJSON:e=>build.Convert.ToBase64Url(e)};class HmacCryptoKey extends CryptoKey{constructor(e={name:"HMAC"},t=false,r=[],i=new Uint8Array(0)){super(e,t,"secret",r);this.kty="oct";this.data=i}get alg(){const e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}__decorate([JsonProp({name:"ext",type:JsonPropTypes.Boolean,optional:true})],HmacCryptoKey.prototype,"extractable",void 0);__decorate([JsonProp({name:"key_ops",type:JsonPropTypes.String,repeated:true,optional:true})],HmacCryptoKey.prototype,"usages",void 0);__decorate([JsonProp({name:"k",converter:JsonBase64UrlConverter})],HmacCryptoKey.prototype,"data",void 0);__decorate([JsonProp({type:JsonPropTypes.String})],HmacCryptoKey.prototype,"kty",void 0);__decorate([JsonProp({type:JsonPropTypes.String})],HmacCryptoKey.prototype,"alg",null);class HmacProvider extends HmacProvider$1{onGenerateKey(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){const i=e.length||this.getDefaultLength(e.hash.name);const n=nativeCrypto.getRandomValues(new Uint8Array(i>>3));const s=new HmacCryptoKey(e,t,r,n);return s}))}onSign(e,t,r){return __awaiter$1(this,void 0,void 0,(function*(){let e;switch(t.algorithm.hash.name.toUpperCase()){case"SHA-1":e=HmacSha1;break;case"SHA-256":e=HmacSha256;break;case"SHA-512":e=HmacSha512;break;default:throw new OperationError("key.algorithm.hash: Is not recognized")}const i=new e(t.data).process(build.BufferSourceConverter.toUint8Array(r)).finish().result;return build.BufferSourceConverter.toArrayBuffer(i)}))}onVerify(e,t,r,i){return __awaiter$1(this,void 0,void 0,(function*(){const n=yield this.onSign(e,t,i);return build.Convert.ToHex(n)===build.Convert.ToHex(r)}))}onImportKey(e,t,r,i,n){return __awaiter$1(this,void 0,void 0,(function*(){let s;switch(e.toLowerCase()){case"jwk":s=JsonParser.fromJSON(t,{targetSchema:HmacCryptoKey});break;case"raw":if(!build.BufferSourceConverter.isBufferSource(t)){throw new TypeError("keyData: Is not ArrayBuffer or ArrayBufferView")}s=new HmacCryptoKey(r,i,n,build.BufferSourceConverter.toUint8Array(t));break;default:throw new OperationError("format: Must be 'jwk' or 'raw'")}s.algorithm={hash:{name:r.hash.name},name:this.name,length:s.data.length<<3};s.extractable=i;s.usages=n;return s}))}onExportKey(e,t){return __awaiter$1(this,void 0,void 0,(function*(){switch(e.toLowerCase()){case"jwk":const e=JsonSerializer.toJSON(t);return e;case"raw":return new Uint8Array(t.data).buffer;default:throw new OperationError("format: Must be 'jwk' or 'raw'")}}))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);if(!(e instanceof HmacCryptoKey)){throw new TypeError("key: Is not HMAC CryptoKey")}}}var _WrappedNativeCryptoKey_nativeKey;class WrappedNativeCryptoKey extends CryptoKey{constructor(e,t,r,i,n){super(e,t,r,i);_WrappedNativeCryptoKey_nativeKey.set(this,void 0);__classPrivateFieldSet(this,_WrappedNativeCryptoKey_nativeKey,n,"f")}getNative(){return __classPrivateFieldGet(this,_WrappedNativeCryptoKey_nativeKey,"f")}}_WrappedNativeCryptoKey_nativeKey=new WeakMap;class SubtleCrypto extends SubtleCrypto$1{constructor(){super();this.browserInfo=BrowserInfo();this.providers.set(new AesCbcProvider);this.providers.set(new AesCtrProvider);this.providers.set(new AesEcbProvider);this.providers.set(new AesGcmProvider);this.providers.set(new AesKwProvider);this.providers.set(new DesCbcProvider);this.providers.set(new DesEde3CbcProvider);this.providers.set(new RsaSsaProvider);this.providers.set(new RsaPssProvider);this.providers.set(new RsaOaepProvider);this.providers.set(new RsaEsProvider);this.providers.set(new EcdsaProvider);this.providers.set(new EcdhProvider);this.providers.set(new Sha1Provider);this.providers.set(new Sha256Provider);this.providers.set(new Sha512Provider);this.providers.set(new Pbkdf2Provider);this.providers.set(new HmacProvider);this.providers.set(new EdDsaProvider);this.providers.set(new EcdhEsProvider);this.providers.set(new Sha3256Provider);this.providers.set(new Sha3384Provider);this.providers.set(new Sha3512Provider);this.providers.set(new Shake128Provider);this.providers.set(new Shake256Provider)}static isAnotherKey(e){if(typeof e==="object"&&typeof e.type==="string"&&typeof e.extractable==="boolean"&&typeof e.algorithm==="object"){return!(e instanceof CryptoKey)}return false}digest(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("digest",...e)}))}importKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){this.fixFirefoxEcImportPkcs8(e);return this.wrapNative("importKey",...e)}))}exportKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){return(yield this.fixFirefoxEcExportPkcs8(e))||(yield this.wrapNative("exportKey",...e))}))}generateKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("generateKey",...e)}))}sign(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("sign",...e)}))}verify(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("verify",...e)}))}encrypt(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("encrypt",...e)}))}decrypt(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("decrypt",...e)}))}wrapKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("wrapKey",...e)}))}unwrapKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("unwrapKey",...e)}))}deriveBits(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("deriveBits",...e)}))}deriveKey(...e){return __awaiter$1(this,void 0,void 0,(function*(){return this.wrapNative("deriveKey",...e)}))}wrapNative(e,...t){const r=e=>super[e];return __awaiter$1(this,void 0,void 0,(function*(){if(~["generateKey","unwrapKey","deriveKey","importKey"].indexOf(e)){this.fixAlgorithmName(t)}try{if(e!=="digest"||!t.some((e=>e instanceof CryptoKey))){const r=this.fixNativeArguments(e,t);Debug.info(`Call native '${e}' method`,r);const i=yield nativeSubtle[e].apply(nativeSubtle,r);return this.fixNativeResult(e,t,i)}}catch(t){Debug.warn(`Error on native '${e}' calling. ${t.message}`,t)}if(e==="wrapKey"){try{Debug.info(`Trying to wrap key by using native functions`,t);const e=yield this.exportKey(t[0],t[1]);const r=t[0]==="jwk"?build.Convert.FromUtf8String(JSON.stringify(e)):e;const i=yield this.encrypt(t[3],t[2],r);return i}catch(e){Debug.warn(`Cannot wrap key by native functions. ${e.message}`,e)}}if(e==="unwrapKey"){try{Debug.info(`Trying to unwrap key by using native functions`,t);const e=yield this.decrypt(t[3],t[2],t[1]);const r=t[0]==="jwk"?JSON.parse(build.Convert.ToUtf8String(e)):e;const i=yield this.importKey(t[0],r,t[4],t[5],t[6]);return i}catch(e){Debug.warn(`Cannot unwrap key by native functions. ${e.message}`,e)}}if(e==="deriveKey"){try{Debug.info(`Trying to derive key by using native functions`,t);const e=yield this.deriveBits(t[0],t[1],t[2].length);const r=yield this.importKey("raw",e,t[2],t[3],t[4]);return r}catch(e){Debug.warn(`Cannot derive key by native functions. ${e.message}`,e)}}if(e==="deriveBits"||e==="deriveKey"){for(const e of t){if(typeof e==="object"&&e.public&&SubtleCrypto.isAnotherKey(e.public)){e.public=yield this.castKey(e.public)}}}for(let e=0;e<t.length;e++){const r=t[e];if(SubtleCrypto.isAnotherKey(r)){t[e]=yield this.castKey(r)}}const i=r(e);if(typeof i==="function"){return i.apply(this,t)}throw new Error("Incorrect type of 'method'. Must be 'function'.")}))}fixNativeArguments(e,t){var r,i,n,s,a,o,f,c;const u=[...t];if(e==="importKey"){if(this.browserInfo.name===Browser.IE&&((i=(r=u[0])===null||r===void 0?void 0:r.toLowerCase)===null||i===void 0?void 0:i.call(r))==="jwk"&&!build.BufferSourceConverter.isBufferSource(u[1])){u[1]=build.Convert.FromUtf8String(JSON.stringify(u[1]))}}if(this.browserInfo.name===Browser.IE&&t[1]instanceof WrappedNativeCryptoKey){switch(e){case"sign":case"verify":case"encrypt":case"decrypt":u[0]=Object.assign(Object.assign({},this.prepareAlgorithm(u[0])),{hash:(a=(s=(n=u[1])===null||n===void 0?void 0:n.algorithm)===null||s===void 0?void 0:s.hash)===null||a===void 0?void 0:a.name});break;case"wrapKey":case"unwrapKey":u[4]=Object.assign(Object.assign({},this.prepareAlgorithm(u[4])),{hash:(c=(f=(o=u[3])===null||o===void 0?void 0:o.algorithm)===null||f===void 0?void 0:f.hash)===null||c===void 0?void 0:c.name});break}}for(let e=0;e<u.length;e++){const t=u[e];if(t instanceof WrappedNativeCryptoKey){u[e]=t.getNative()}}return u}fixNativeResult(e,t,r){var i,n;if(this.browserInfo.name===Browser.IE){if(e==="exportKey"){if(((n=(i=t[0])===null||i===void 0?void 0:i.toLowerCase)===null||n===void 0?void 0:n.call(i))==="jwk"&&r instanceof ArrayBuffer){return JSON.parse(build.Convert.ToUtf8String(r))}}if("privateKey"in r){const e=["sign","decrypt","unwrapKey","deriveKey","deriveBits"];const i=["verify","encrypt","wrapKey"];return{privateKey:this.wrapNativeKey(r.privateKey,t[0],t[1],t[2].filter((t=>e.includes(t)))),publicKey:this.wrapNativeKey(r.publicKey,t[0],t[1],t[2].filter((e=>i.includes(e))))}}else if("extractable"in r){let i;let n;switch(e){case"importKey":i=t[2];n=t[4];break;case"unwrapKey":i=t[4];n=t[6];break;case"generateKey":i=t[0];n=t[2];break;default:throw new OperationError("Cannot wrap native key. Unsupported method in use")}return this.wrapNativeKey(r,i,r.extractable,n)}}return r}wrapNativeKey(e,t,r,i){if(this.browserInfo.name===Browser.IE){const n=["RSASSA-PKCS1-v1_5","RSA-PSS","RSA-OAEP","AES-CBC","AES-CTR","AES-KW","HMAC"];const s=n.map((e=>e.toLowerCase())).indexOf(e.algorithm.name.toLowerCase());if(s!==-1){const a=this.prepareAlgorithm(t);const o=Object.assign(Object.assign({},e.algorithm),{name:n[s]});if(SubtleCrypto$1.isHashedAlgorithm(a)){o.hash={name:a.hash.name.toUpperCase()}}Debug.info(`Wrapping ${n[s]} crypto key to WrappedNativeCryptoKey`);return new WrappedNativeCryptoKey(o,r,e.type,i,e)}}return e}castKey(e){return __awaiter$1(this,void 0,void 0,(function*(){Debug.info("Cast native CryptoKey to linter key.",e);if(!e.extractable){throw new Error("Cannot cast unextractable crypto key")}const t=this.getProvider(e.algorithm.name);const r=yield this.exportKey("jwk",e);return t.importKey("jwk",r,e.algorithm,true,e.usages)}))}fixAlgorithmName(e){if(this.browserInfo.name===Browser.Edge){for(let t=0;t<e.length;t++){const r=e[0];if(typeof r==="string"){for(const i of this.providers.algorithms){if(i.toLowerCase()===r.toLowerCase()){e[t]=i;break}}}else if(typeof r==="object"&&typeof r.name==="string"){for(const e of this.providers.algorithms){if(e.toLowerCase()===r.name.toLowerCase()){r.name=e}if(typeof r.hash==="string"&&e.toLowerCase()===r.hash.toLowerCase()||typeof r.hash==="object"&&typeof r.hash.name==="string"&&e.toLowerCase()===r.hash.name.toLowerCase()){r.hash={name:e}}}}}}}fixFirefoxEcImportPkcs8(e){const t=this.prepareAlgorithm(e[2]);const r=t.name.toUpperCase();if(this.browserInfo.name===Browser.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(r)&&~["P-256","P-384","P-521"].indexOf(t.namedCurve)){if(!build.BufferSourceConverter.isBufferSource(e[1])){throw new TypeError("data: Is not ArrayBuffer or ArrayBufferView")}const r=build.BufferSourceConverter.toArrayBuffer(e[1]);const i=AsnConvert.parse(r,index$1.PrivateKeyInfo);const n=AsnConvert.parse(i.privateKey,index$1.EcPrivateKey);const s=JsonSerializer.toJSON(n);s.ext=true;s.key_ops=e[4];s.crv=t.namedCurve;s.kty="EC";e[0]="jwk";e[1]=s}}fixFirefoxEcExportPkcs8(e){return __awaiter$1(this,void 0,void 0,(function*(){try{if(this.browserInfo.name===Browser.Firefox&&e[0]==="pkcs8"&&~["ECDSA","ECDH"].indexOf(e[1].algorithm.name)&&~["P-256","P-384","P-521"].indexOf(e[1].algorithm.namedCurve)){const t=yield this.exportKey("jwk",e[1]);const r=JsonParser.fromJSON(t,{targetSchema:index$1.EcPrivateKey});const i=new index$1.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm=EcCrypto.ASN_ALGORITHM;i.privateKeyAlgorithm.parameters=AsnConvert.serialize(new index$1.ObjectIdentifier(getOidByNamedCurve$1(e[1].algorithm.namedCurve)));i.privateKey=AsnConvert.serialize(r);return AsnConvert.serialize(i)}}catch(e){Debug.error(e);return null}}))}}SubtleCrypto.methods=["digest","importKey","exportKey","sign","verify","generateKey","encrypt","decrypt","deriveBits","deriveKey","wrapKey","unwrapKey"];class Crypto extends Crypto$1{constructor(){super(...arguments);this.subtle=new SubtleCrypto}get nativeCrypto(){return nativeCrypto}getRandomValues(e){return nativeCrypto.getRandomValues(e)}}function WrapFunction(e,t){const r=e[t];e[t]=function(){const i=arguments;return new Promise(((n,s)=>{const a=r.apply(e,i);a.oncomplete=e=>{n(e.target.result)};a.onerror=e=>{s(`Error on running '${t}' function`)}}))}}if(typeof self!=="undefined"&&self["msCrypto"]){WrapFunction(nativeSubtle,"generateKey");WrapFunction(nativeSubtle,"digest");WrapFunction(nativeSubtle,"sign");WrapFunction(nativeSubtle,"verify");WrapFunction(nativeSubtle,"encrypt");WrapFunction(nativeSubtle,"decrypt");WrapFunction(nativeSubtle,"importKey");WrapFunction(nativeSubtle,"exportKey");WrapFunction(nativeSubtle,"wrapKey");WrapFunction(nativeSubtle,"unwrapKey");WrapFunction(nativeSubtle,"deriveKey");WrapFunction(nativeSubtle,"deriveBits")}if(!Math.imul){Math.imul=function e(t,r){const i=t>>>16&65535;const n=t&65535;const s=r>>>16&65535;const a=r&65535;return n*a+(i*a+n*s<<16>>>0)|0}}if(nativeCrypto){Object.freeze(nativeCrypto.getRandomValues)}new Crypto;const crypto$3=new Crypto;Application.setEngine("WebCryptoLiner",crypto$3);cryptoProvider.set(crypto$3);class DSigValidator{constructor(){this.validationResult={auth:AuthenticationType.XML_DSIG,integrity:IntegrityType.XML_DSIG,status:SecurityStatus.INVALID}}async validate(e,t,r){let i=Parse(r);let n=i.getElementsByTagNameNS("http://www.w3.org/2000/09/xmldsig#","Signature");console.log(n);if(!n.length){console.log("No DSIG detected, skipping signature validation");return false}try{await this.validateXmlSignature(i,n[0])}catch(e){console.error(e);this.validationResult.integrityText=e.message;this.validationResult.statusText="TokenScript authenticity and integrity cannot be established";return this.validationResult}this.validationResult.integrityText="XML DSIG successfully validated";try{await this.validateAuthorityPublicKey(e)}catch(e){console.error(e);this.validationResult.authText=e.message;this.validationResult.statusText="TokenScript authenticity for the smart contract cannot be established";return this.validationResult}this.validationResult.status=SecurityStatus.VALID;this.validationResult.authText="Authenticity verified via contract owner key";return this.validationResult}async validateXmlSignature(e,t){const r=new SignedXml(e);r.LoadXml(t);let i=await r.Verify();if(i){console.log("TSML signature successfully verified!");const e=await r.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyValue)).exportKey();const t=r.XmlSignature.KeyInfo.GetIterator().find((e=>e instanceof KeyInfoX509Data));if(t&&t.Certificates.length>0){const r=await this.keyToHex(e);if(t.Certificates.length>1){this.dsigMasterPubKey=await this.verifyCertificateChain(t.Certificates,r)}else{const e=new X509Certificate(t.Certificates[0].GetRaw());const i=await this.getSignerPublicKeyFromCertificate(e);if(!await e.verify({publicKey:i}))throw new Error("x509 certificate verification failed!");const n=await this.keyToHex(await e.publicKey.export());if(n!=r)throw new Error("Certificate subject public key does not match XML signing key");this.dsigMasterPubKey=i}}else{this.dsigMasterPubKey=e}return true}else{throw new Error("DSIG verification failed!")}}async validateAuthorityPublicKey(e){const t=await this.dsigMasterPubKey;const r=new Uint8Array(await crypto$3.subtle.exportKey(t.algorithm.name==="ECDSA"?"raw":"spki",t));console.log("Raw public key: ",uint8tohex(r));const i=new PubkeyResolver(e);const n=await i.resolvePublicKey();console.log("contract owner or key: ",n.valueType+":"+n.value);const s=n.valueType==="ethAddress"?computeAddress(r):uint8tohex(r);console.log("Transformed master pubKey: ",s);if(s.toLowerCase()!==n.value.toLowerCase())throw new Error("Authoritive DSIG public key ("+s+") does not match resolved public key: "+n.value)}async keyToHex(e){return uint8tohex(new Uint8Array(await crypto$3.subtle.exportKey(e.algorithm.name==="ECDSA"?"raw":"spki",e)))}async verifyCertificateChain(e,t){for(let[r,i]of e.entries()){if(t===await this.keyToHex(await i.exportKey())){e=e.splice(r);const t=new X509ChainBuilder({certificates:e.map((e=>new X509Certificate(e.GetRaw())))});const n=await t.build(new X509Certificate(i.GetRaw()));return this.getSignerPublicKeyFromCertificate(n[n.length-1])}}throw new Error("The x509 certificate corresponding to the public key was not found")}async getSignerPublicKeyFromCertificate(e){const t=e.getExtension("2.5.29.18");if(!t)throw new Error("Root certificate does not contain issuerAltName extension");return await crypto$3.subtle.importKey("raw",new Uint8Array(t.value),{name:"ECDSA",namedCurve:"K-256"},true,["verify"])}}function uint8tohex(e){if(!e||!e.length)return"";return Array.from(e).map((e=>("0"+e.toString(16)).slice(-2))).join("")}async function*batch(e,t=1){let r=[];if(t<1){t=1}for await(const i of e){r.push(i);while(r.length>=t){yield r.slice(0,t);r=r.slice(t)}}while(r.length){yield r.slice(0,t);r=r.slice(t)}}var itBatch=batch;async function*parallelBatch(e,t=1){for await(const r of itBatch(e,t)){const e=r.map((e=>e().then((e=>({ok:true,value:e})),(e=>({ok:false,err:e})))));for(let t=0;t<e.length;t++){const r=await e[t];if(r.ok){yield r.value}else{throw r.err}}}}var itParallelBatch=parallelBatch;var isPlainObj=e=>{if(Object.prototype.toString.call(e)!=="[object Object]"){return false}const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype};const{hasOwnProperty}=Object.prototype;const{propertyIsEnumerable}=Object;const defineProperty=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:true,enumerable:true,configurable:true});const globalThis$1=commonjsGlobal;const defaultMergeOptions={concatArrays:false,ignoreUndefined:false};const getEnumerableOwnPropertyKeys=e=>{const t=[];for(const r in e){if(hasOwnProperty.call(e,r)){t.push(r)}}if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const i of r){if(propertyIsEnumerable.call(e,i)){t.push(i)}}}return t};function clone(e){if(Array.isArray(e)){return cloneArray(e)}if(isPlainObj(e)){return cloneOptionObject(e)}return e}function cloneArray(e){const t=e.slice(0,0);getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}function cloneOptionObject(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};getEnumerableOwnPropertyKeys(e).forEach((r=>{defineProperty(t,r,clone(e[r]))}));return t}const mergeKeys=(e,t,r,i)=>{r.forEach((r=>{if(typeof t[r]==="undefined"&&i.ignoreUndefined){return}if(r in e&&e[r]!==Object.getPrototypeOf(e)){defineProperty(e,r,merge(e[r],t[r],i))}else{defineProperty(e,r,clone(t[r]))}}));return e};const concatArrays=(e,t,r)=>{let i=e.slice(0,0);let n=0;[e,t].forEach((t=>{const s=[];for(let r=0;r<t.length;r++){if(!hasOwnProperty.call(t,r)){continue}s.push(String(r));if(t===e){defineProperty(i,n++,t[r])}else{defineProperty(i,n++,clone(t[r]))}}i=mergeKeys(i,t,getEnumerableOwnPropertyKeys(t).filter((e=>!s.includes(e))),r)}));return i};function merge(e,t,r){if(r.concatArrays&&Array.isArray(e)&&Array.isArray(t)){return concatArrays(e,t,r)}if(!isPlainObj(t)||!isPlainObj(e)){return clone(t)}return mergeKeys(e,t,getEnumerableOwnPropertyKeys(t),r)}var mergeOptions$1=function(...e){const t=merge(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let r={_:{}};for(const i of e){if(i===undefined){continue}if(!isPlainObj(i)){throw new TypeError("`"+i+"` is not an Option Object")}r=merge(r,{_:i},t)}return r._};function assign(e,t){for(const r in t){Object.defineProperty(e,r,{value:t[r],enumerable:true,configurable:true})}return e}function createError(e,t,r){if(!e||typeof e==="string"){throw new TypeError("Please pass an Error to err-code")}if(!r){r={}}if(typeof t==="object"){r=t;t=""}if(t){r.code=t}try{return assign(e,r)}catch(t){r.message=e.message;r.stack=e.stack;const i=function(){};i.prototype=Object.create(Object.getPrototypeOf(e));const n=assign(new i,r);return n}}var errCode=createError;function base$d(e){if(e.length>=255){throw new TypeError("Alphabet too long")}var t=new Uint8Array(256);for(var r=0;r<t.length;r++){t[r]=255}for(var i=0;i<e.length;i++){var n=e.charAt(i);var s=n.charCodeAt(0);if(t[s]!==255){throw new TypeError(n+" is ambiguous")}t[s]=i}var a=e.length;var o=e.charAt(0);var f=Math.log(a)/Math.log(256);var c=Math.log(256)/Math.log(a);function u(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var f=(s-n)*c+1>>>0;var u=new Uint8Array(f);while(n!==s){var h=t[n];var l=0;for(var d=f-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*u[d]>>>0;u[d]=h%a>>>0;h=h/a>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=f-i;while(p!==f&&u[p]===0){p++}var b=o.repeat(r);for(;p<f;++p){b+=e.charAt(u[p])}return b}function h(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var r=0;if(e[r]===" "){return}var i=0;var n=0;while(e[r]===o){i++;r++}var s=(e.length-r)*f+1>>>0;var c=new Uint8Array(s);while(e[r]){var u=t[e.charCodeAt(r)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=a*c[l]>>>0;c[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;r++}if(e[r]===" "){return}var d=s-n;while(d!==s&&c[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=c[d++]}return p}function l(e){var t=h(e);if(t){return t}throw new Error("Non-base"+a+" character")}return{encode:u,decodeUnsafe:h,decode:l}}var src$g=base$d;const textDecoder=new TextDecoder;const decodeText$1=e=>textDecoder.decode(e);const textEncoder=new TextEncoder;const encodeText$2=e=>textEncoder.encode(e);function concat(e,t){const r=new Uint8Array(t);let i=0;for(const t of e){r.set(t,i);i+=t.length}return r}var util$4={decodeText:decodeText$1,encodeText:encodeText$2,concat};const{encodeText:encodeText$1}=util$4;class Base{constructor(e,t,r,i){this.name=e;this.code=t;this.codeBuf=encodeText$1(this.code);this.alphabet=i;this.codec=r(i)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e){if(this.alphabet&&this.alphabet.indexOf(t)<0){throw new Error(`invalid character '${t}' in '${e}'`)}}return this.codec.decode(e)}}var base$c=Base;const decode$9=(e,t,r)=>{const i={};for(let e=0;e<t.length;++e){i[t[e]]=e}let n=e.length;while(e[n-1]==="="){--n}const s=new Uint8Array(n*r/8|0);let a=0;let o=0;let f=0;for(let t=0;t<n;++t){const n=i[e[t]];if(n===undefined){throw new SyntaxError("Invalid character "+e[t])}o=o<<r|n;a+=r;if(a>=8){a-=8;s[f++]=255&o>>a}}if(a>=r||255&o<<8-a){throw new SyntaxError("Unexpected end of data")}return s};const encode$a=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const rfc4648$1=e=>t=>({encode(r){return encode$a(r,t,e)},decode(r){return decode$9(r,t,e)}});var rfc4648_1={rfc4648:rfc4648$1};const{rfc4648}=rfc4648_1;const{decodeText,encodeText}=util$4;const identity$1=()=>({encode:decodeText,decode:encodeText});const constants$1=[["identity","\0",identity$1,""],["base2","0",rfc4648(1),"01"],["base8","7",rfc4648(3),"01234567"],["base10","9",src$g,"0123456789"],["base16","f",rfc4648(4),"0123456789abcdef"],["base16upper","F",rfc4648(4),"0123456789ABCDEF"],["base32hex","v",rfc4648(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",src$g,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",src$g,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",src$g,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",src$g,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]];const names$2=constants$1.reduce(((e,t)=>{e[t[0]]=new base$c(t[0],t[1],t[2],t[3]);return e}),{});const codes$1=constants$1.reduce(((e,t)=>{e[t[1]]=names$2[t[0]];return e}),{});var constants_1={names:names$2,codes:codes$1};var src$f=createCommonjsModule$1((function(e,t){const{encodeText:r,decodeText:i,concat:n}=util$4;function s(e,t){if(!t){throw new Error("requires an encoded Uint8Array")}const{name:r,codeBuf:i}=u(e);c(r,t);return n([i,t],i.length+t.length)}function a(e,t){const i=u(e);const s=r(i.encode(t));return n([i.codeBuf,s],i.codeBuf.length+s.length)}function o(e){if(e instanceof Uint8Array){e=i(e)}const t=e[0];if(["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)){e=e.toLowerCase()}const r=u(e[0]);return r.decode(e.substring(1))}function f(e){if(e instanceof Uint8Array){e=i(e)}if(Object.prototype.toString.call(e)!=="[object String]"){return false}try{const t=u(e[0]);return t.name}catch(e){return false}}function c(e,t){const r=u(e);r.decode(i(t))}function u(e){if(Object.prototype.hasOwnProperty.call(constants_1.names,e)){return constants_1.names[e]}else if(Object.prototype.hasOwnProperty.call(constants_1.codes,e)){return constants_1.codes[e]}else{throw new Error(`Unsupported encoding: ${e}`)}}function h(e){if(e instanceof Uint8Array){e=i(e)}return u(e[0])}t=e.exports=s;t.encode=a;t.decode=o;t.isEncoded=f;t.encoding=u;t.encodingFromData=h;const l=Object.freeze(constants_1.names);const d=Object.freeze(constants_1.codes);t.names=l;t.codes=d}));var encode_1$7=encode$9;var MSB$a=128,REST$a=127,MSBALL$7=~REST$a,INT$7=Math.pow(2,31);function encode$9(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$7){t[r++]=e&255|MSB$a;e/=128}while(e&MSBALL$7){t[r++]=e&255|MSB$a;e>>>=7}t[r]=e|0;encode$9.bytes=r-i+1;return t}var decode$8=read$8;var MSB$9=128,REST$9=127;function read$8(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$8.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$9)<<i:(s&REST$9)*Math.pow(2,i);i+=7}while(s>=MSB$9);read$8.bytes=n-t;return r}var N1$7=Math.pow(2,7);var N2$7=Math.pow(2,14);var N3$7=Math.pow(2,21);var N4$7=Math.pow(2,28);var N5$7=Math.pow(2,35);var N6$7=Math.pow(2,42);var N7$7=Math.pow(2,49);var N8$7=Math.pow(2,56);var N9$7=Math.pow(2,63);var length$7=function(e){return e<N1$7?1:e<N2$7?2:e<N3$7?3:e<N4$7?4:e<N5$7?5:e<N6$7?6:e<N7$7?7:e<N8$7?8:e<N9$7?9:10};var varint$d={encode:encode_1$7,decode:decode$8,encodingLength:length$7};const names$1=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants={names:names$1};function base$b(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$e=base$b;var _brrp__multiformats_scope_baseX$5=src$e;var baseX$5=_brrp__multiformats_scope_baseX$5;var bytes$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base$a=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX$5(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes$5.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$b=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.from({prefix:"\0",name:"identity",encode:e=>bytes$5.toString(e),decode:e=>bytes$5.fromString(e)});t.identity=r}));var base2_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base$a.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base$a.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base$a.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base$a.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base$a.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base$a.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base$a.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base$a.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base$a.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base$a.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base$a.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$a.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base$a.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base$a.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base$a.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base$a.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$6=encode$8;var MSB$8=128,REST$8=127,MSBALL$6=~REST$8,INT$6=Math.pow(2,31);function encode$8(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$6){t[r++]=e&255|MSB$8;e/=128}while(e&MSBALL$6){t[r++]=e&255|MSB$8;e>>>=7}t[r]=e|0;encode$8.bytes=r-i+1;return t}var decode$7=read$7;var MSB$1$5=128,REST$1$5=127;function read$7(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$7.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1$5)<<i:(s&REST$1$5)*Math.pow(2,i);i+=7}while(s>=MSB$1$5);read$7.bytes=n-t;return r}var N1$6=Math.pow(2,7);var N2$6=Math.pow(2,14);var N3$6=Math.pow(2,21);var N4$6=Math.pow(2,28);var N5$6=Math.pow(2,35);var N6$6=Math.pow(2,42);var N7$6=Math.pow(2,49);var N8$6=Math.pow(2,56);var N9$6=Math.pow(2,63);var length$6=function(e){return e<N1$6?1:e<N2$6?2:e<N3$6?3:e<N4$6?4:e<N5$6?5:e<N6$6?6:e<N7$6?7:e<N8$6?8:e<N9$6?9:10};var varint$c={encode:encode_1$6,decode:decode$7,encodingLength:length$6};var _brrp_varint$5=varint$c;var varint$1$6=_brrp_varint$5;var varint_1$5=varint$1$6;var varint$b=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1$5.decode(e,t);return[r,varint_1$5.decode.bytes]};const i=(e,t,r=0)=>{varint_1$5.encode(e,t,r);return t};const n=e=>varint_1$5.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint$b.encodingLength(e);const n=i+varint$b.encodingLength(r);const a=new Uint8Array(n+r);varint$b.encodeTo(e,a,0);varint$b.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes$5.coerce(e);const[r,i]=varint$b.decode(t);const[n,a]=varint$b.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$5.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$6.create(this.code,t):t.then((e=>digest$6.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher$5.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher$5.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1$a=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes$5.coerce;const s=e=>digest$6.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes$5.coerce(e);const s=e=>bytes$5.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid$7=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest$6.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$6.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58$5.base58btc.encoder);default:return s(t,i,e||base32_1$5.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest$6.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes$5.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest$6.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint$b.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$5.base58btc;return[base58$5.base58btc.prefix,r.decode(`${base58$5.base58btc.prefix}${e}`)]}case base58$5.base58btc.prefix:{const r=t||base58$5.base58btc;return[base58$5.base58btc.prefix,r.decode(e)]}case base32_1$5.base32.prefix:{const r=t||base32_1$5.base32;return[base32_1$5.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58$5.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint$b.encodingLength(e);const n=i+varint$b.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint$b.encodeTo(e,s,0);varint$b.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$7.CID;t.varint=varint$b;t.bytes=bytes$5;t.hasher=hasher$5;t.digest=digest$6}));var basics$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$b,...base2_1$5,...base8_1$5,...base10_1$5,...base16_1$5,...base32_1$5,...base36_1$5,...base58$5,...base64_1$6,...base256emoji_1$5};const i={...sha2Browser$5,...identity_1$a};const n={raw:raw$5,json:json$5};t.CID=cid$7.CID;t.hasher=hasher$5;t.digest=digest$6;t.varint=varint$b;t.bytes=bytes$5;t.bases=r;t.codecs=n;t.hashes=i}));var asUint8array$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function i(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=i}));function createCodec$5(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string$5=createCodec$5("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$5=createCodec$5("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$4.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$5={utf8:string$5,"utf-8":string$5,hex:basics$5.bases.base16,latin1:ascii$5,ascii:ascii$5,binary:ascii$5,...basics$5.bases};var bases$5=BASES$5;var toString_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$5[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var fromString_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$5[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$4.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));var concat_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$4.allocUnsafe(t);let i=0;for(const t of e){r.set(t,i);i+=t.length}return asUint8array$4.asUint8Array(r)}t.concat=r}));const{names}=constants;const{toString:uint8ArrayToString$2}=toString_1$3;const{fromString:uint8ArrayFromString$3}=fromString_1$4;const{concat:uint8ArrayConcat$3}=concat_1$3;const codes={};for(const e in names){const t=e;codes[names[t]]=t}Object.freeze(codes);function toHexString(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$2(e,"base16")}function fromHexString(e){return uint8ArrayFromString$3(e,"base16")}function toB58String(e){if(!(e instanceof Uint8Array)){throw new Error("must be passed a Uint8Array")}return uint8ArrayToString$2(src$f.encode("base58btc",e)).slice(1)}function fromB58String(e){const t=e instanceof Uint8Array?uint8ArrayToString$2(e):e;return src$f.decode("z"+t)}function decode$6(e){if(!(e instanceof Uint8Array)){throw new Error("multihash must be a Uint8Array")}if(e.length<2){throw new Error("multihash too short. must be > 2 bytes.")}const t=varint$d.decode(e);if(!isValidCode(t)){throw new Error(`multihash unknown function code: 0x${t.toString(16)}`)}e=e.slice(varint$d.decode.bytes);const r=varint$d.decode(e);if(r<0){throw new Error(`multihash invalid length: ${r}`)}e=e.slice(varint$d.decode.bytes);if(e.length!==r){throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString$2(e,"base16")}`)}return{code:t,name:codes[t],length:r,digest:e}}function encode$7(e,t,r){if(!e||t===undefined){throw new Error("multihash encode requires at least two args: digest, code")}const i=coerceCode(t);if(!(e instanceof Uint8Array)){throw new Error("digest should be a Uint8Array")}if(r==null){r=e.length}if(r&&e.length!==r){throw new Error("digest length should be equal to specified length.")}const n=varint$d.encode(i);const s=varint$d.encode(r);return uint8ArrayConcat$3([n,s,e],n.length+s.length+e.length)}function coerceCode(e){let t=e;if(typeof e==="string"){if(names[e]===undefined){throw new Error(`Unrecognized hash function named: ${e}`)}t=names[e]}if(typeof t!=="number"){throw new Error(`Hash function code should be a number. Got: ${t}`)}if(codes[t]===undefined&&!isAppCode(t)){throw new Error(`Unrecognized function code: ${t}`)}return t}function isAppCode(e){return e>0&&e<16}function isValidCode(e){if(isAppCode(e)){return true}if(codes[e]){return true}return false}function validate(e){decode$6(e)}function prefix(e){validate(e);return e.subarray(0,2)}var src$d={names,codes,toHexString,fromHexString,toB58String,fromB58String,decode:decode$6,encode:encode$7,coerceCode,isAppCode,validate,prefix,isValidCode};var murmurHash3js=createCommonjsModule$1((function(e,t){(function(r,i){var n={version:"3.0.0",x86:{},x64:{},inputValidation:true};function s(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e)){return false}for(var t=0;t<e.length;t++){if(!Number.isInteger(e[t])||e[t]<0||e[t]>255){return false}}return true}function a(e,t){return(e&65535)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function f(e){e^=e>>>16;e=a(e,2246822507);e^=e>>>13;e=a(e,3266489909);e^=e>>>16;return e}function c(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]+t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]+t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]+t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]+t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function u(e,t){e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];t=[t[0]>>>16,t[0]&65535,t[1]>>>16,t[1]&65535];var r=[0,0,0,0];r[3]+=e[3]*t[3];r[2]+=r[3]>>>16;r[3]&=65535;r[2]+=e[2]*t[3];r[1]+=r[2]>>>16;r[2]&=65535;r[2]+=e[3]*t[2];r[1]+=r[2]>>>16;r[2]&=65535;r[1]+=e[1]*t[3];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[2]*t[2];r[0]+=r[1]>>>16;r[1]&=65535;r[1]+=e[3]*t[1];r[0]+=r[1]>>>16;r[1]&=65535;r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0];r[0]&=65535;return[r[0]<<16|r[1],r[2]<<16|r[3]]}function h(e,t){t%=64;if(t===32){return[e[1],e[0]]}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]}else{t-=32;return[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t]}}function l(e,t){t%=64;if(t===0){return e}else if(t<32){return[e[0]<<t|e[1]>>>32-t,e[1]<<t]}else{return[e[1]<<t-32,0]}}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){e=d(e,[0,e[0]>>>1]);e=u(e,[4283543511,3981806797]);e=d(e,[0,e[0]>>>1]);e=u(e,[3301882366,444984403]);e=d(e,[0,e[0]>>>1]);return e}n.x86.hash32=function(e,t){if(n.inputValidation&&!s(e)){return i}t=t||0;var r=e.length%4;var c=e.length-r;var u=t;var h=0;var l=3432918353;var d=461845907;for(var p=0;p<c;p=p+4){h=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24;h=a(h,l);h=o(h,15);h=a(h,d);u^=h;u=o(u,13);u=a(u,5)+3864292196}h=0;switch(r){case 3:h^=e[p+2]<<16;case 2:h^=e[p+1]<<8;case 1:h^=e[p];h=a(h,l);h=o(h,15);h=a(h,d);u^=h}u^=e.length;u=f(u);return u>>>0};n.x86.hash128=function(e,t){if(n.inputValidation&&!s(e)){return i}t=t||0;var r=e.length%16;var c=e.length-r;var u=t;var h=t;var l=t;var d=t;var p=0;var b=0;var m=0;var v=0;var y=597399067;var w=2869860233;var A=951274213;var g=2716044179;for(var S=0;S<c;S=S+16){p=e[S]|e[S+1]<<8|e[S+2]<<16|e[S+3]<<24;b=e[S+4]|e[S+5]<<8|e[S+6]<<16|e[S+7]<<24;m=e[S+8]|e[S+9]<<8|e[S+10]<<16|e[S+11]<<24;v=e[S+12]|e[S+13]<<8|e[S+14]<<16|e[S+15]<<24;p=a(p,y);p=o(p,15);p=a(p,w);u^=p;u=o(u,19);u+=h;u=a(u,5)+1444728091;b=a(b,w);b=o(b,16);b=a(b,A);h^=b;h=o(h,17);h+=l;h=a(h,5)+197830471;m=a(m,A);m=o(m,17);m=a(m,g);l^=m;l=o(l,15);l+=d;l=a(l,5)+2530024501;v=a(v,g);v=o(v,18);v=a(v,y);d^=v;d=o(d,13);d+=u;d=a(d,5)+850148119}p=0;b=0;m=0;v=0;switch(r){case 15:v^=e[S+14]<<16;case 14:v^=e[S+13]<<8;case 13:v^=e[S+12];v=a(v,g);v=o(v,18);v=a(v,y);d^=v;case 12:m^=e[S+11]<<24;case 11:m^=e[S+10]<<16;case 10:m^=e[S+9]<<8;case 9:m^=e[S+8];m=a(m,A);m=o(m,17);m=a(m,g);l^=m;case 8:b^=e[S+7]<<24;case 7:b^=e[S+6]<<16;case 6:b^=e[S+5]<<8;case 5:b^=e[S+4];b=a(b,w);b=o(b,16);b=a(b,A);h^=b;case 4:p^=e[S+3]<<24;case 3:p^=e[S+2]<<16;case 2:p^=e[S+1]<<8;case 1:p^=e[S];p=a(p,y);p=o(p,15);p=a(p,w);u^=p}u^=e.length;h^=e.length;l^=e.length;d^=e.length;u+=h;u+=l;u+=d;h+=u;l+=u;d+=u;u=f(u);h=f(h);l=f(l);d=f(d);u+=h;u+=l;u+=d;h+=u;l+=u;d+=u;return("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)};n.x64.hash128=function(e,t){if(n.inputValidation&&!s(e)){return i}t=t||0;var r=e.length%16;var a=e.length-r;var o=[0,t];var f=[0,t];var b=[0,0];var m=[0,0];var v=[2277735313,289559509];var y=[1291169091,658871167];for(var w=0;w<a;w=w+16){b=[e[w+4]|e[w+5]<<8|e[w+6]<<16|e[w+7]<<24,e[w]|e[w+1]<<8|e[w+2]<<16|e[w+3]<<24];m=[e[w+12]|e[w+13]<<8|e[w+14]<<16|e[w+15]<<24,e[w+8]|e[w+9]<<8|e[w+10]<<16|e[w+11]<<24];b=u(b,v);b=h(b,31);b=u(b,y);o=d(o,b);o=h(o,27);o=c(o,f);o=c(u(o,[0,5]),[0,1390208809]);m=u(m,y);m=h(m,33);m=u(m,v);f=d(f,m);f=h(f,31);f=c(f,o);f=c(u(f,[0,5]),[0,944331445])}b=[0,0];m=[0,0];switch(r){case 15:m=d(m,l([0,e[w+14]],48));case 14:m=d(m,l([0,e[w+13]],40));case 13:m=d(m,l([0,e[w+12]],32));case 12:m=d(m,l([0,e[w+11]],24));case 11:m=d(m,l([0,e[w+10]],16));case 10:m=d(m,l([0,e[w+9]],8));case 9:m=d(m,[0,e[w+8]]);m=u(m,y);m=h(m,33);m=u(m,v);f=d(f,m);case 8:b=d(b,l([0,e[w+7]],56));case 7:b=d(b,l([0,e[w+6]],48));case 6:b=d(b,l([0,e[w+5]],40));case 5:b=d(b,l([0,e[w+4]],32));case 4:b=d(b,l([0,e[w+3]],24));case 3:b=d(b,l([0,e[w+2]],16));case 2:b=d(b,l([0,e[w+1]],8));case 1:b=d(b,[0,e[w]]);b=u(b,v);b=h(b,31);b=u(b,y);o=d(o,b)}o=d(o,[0,e.length]);f=d(f,[0,e.length]);o=c(o,f);f=c(f,o);o=p(o);f=p(f);o=c(o,f);f=c(f,o);return("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)};{if(e.exports){t=e.exports=n}t.murmurHash3=n}})()}));var murmurhash3jsRevisited=murmurHash3js;const crypto$2=self.crypto||self.msCrypto;const digest$5=async(e,t)=>{if(typeof self==="undefined"||!crypto$2){throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context")}switch(t){case"sha1":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await crypto$2.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await crypto$2.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var sha_browser={factory:e=>async t=>digest$5(t,e),digest:digest$5,multihashing:async(e,t,r)=>{const i=await digest$5(e,t);return src$d.encode(i,t,r)}};const fromNumberTo32BitBuf$1=e=>{const t=new Uint8Array(4);for(let r=0;r<4;r++){t[r]=e&255;e=e>>8}return t};var utils={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1};function base$9(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$c=base$9;var _brrp__multiformats_scope_baseX$4=src$c;var baseX$4=_brrp__multiformats_scope_baseX$4;var bytes$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base$8=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX$4(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes$4.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$9=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.from({prefix:"\0",name:"identity",encode:e=>bytes$4.toString(e),decode:e=>bytes$4.fromString(e)});t.identity=r}));var base2_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base$8.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base$8.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base$8.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base$8.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base$8.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base$8.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base$8.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base$8.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base$8.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base$8.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base$8.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$8.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base$8.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base$8.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base$8.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base$8.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$5=encode$6;var MSB$7=128,REST$7=127,MSBALL$5=~REST$7,INT$5=Math.pow(2,31);function encode$6(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$5){t[r++]=e&255|MSB$7;e/=128}while(e&MSBALL$5){t[r++]=e&255|MSB$7;e>>>=7}t[r]=e|0;encode$6.bytes=r-i+1;return t}var decode$5=read$6;var MSB$1$4=128,REST$1$4=127;function read$6(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$6.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1$4)<<i:(s&REST$1$4)*Math.pow(2,i);i+=7}while(s>=MSB$1$4);read$6.bytes=n-t;return r}var N1$5=Math.pow(2,7);var N2$5=Math.pow(2,14);var N3$5=Math.pow(2,21);var N4$5=Math.pow(2,28);var N5$5=Math.pow(2,35);var N6$5=Math.pow(2,42);var N7$5=Math.pow(2,49);var N8$5=Math.pow(2,56);var N9$5=Math.pow(2,63);var length$5=function(e){return e<N1$5?1:e<N2$5?2:e<N3$5?3:e<N4$5?4:e<N5$5?5:e<N6$5?6:e<N7$5?7:e<N8$5?8:e<N9$5?9:10};var varint$a={encode:encode_1$5,decode:decode$5,encodingLength:length$5};var _brrp_varint$4=varint$a;var varint$1$5=_brrp_varint$4;var varint_1$4=varint$1$5;var varint$9=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1$4.decode(e,t);return[r,varint_1$4.decode.bytes]};const i=(e,t,r=0)=>{varint_1$4.encode(e,t,r);return t};const n=e=>varint_1$4.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint$9.encodingLength(e);const n=i+varint$9.encodingLength(r);const a=new Uint8Array(n+r);varint$9.encodeTo(e,a,0);varint$9.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes$4.coerce(e);const[r,i]=varint$9.decode(t);const[n,a]=varint$9.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$4.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$4.create(this.code,t):t.then((e=>digest$4.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher$4.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher$4.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1$8=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes$4.coerce;const s=e=>digest$4.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes$4.coerce(e);const s=e=>bytes$4.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest$4.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$4.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58$4.base58btc.encoder);default:return s(t,i,e||base32_1$4.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest$4.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes$4.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest$4.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint$9.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$4.base58btc;return[base58$4.base58btc.prefix,r.decode(`${base58$4.base58btc.prefix}${e}`)]}case base58$4.base58btc.prefix:{const r=t||base58$4.base58btc;return[base58$4.base58btc.prefix,r.decode(e)]}case base32_1$4.base32.prefix:{const r=t||base32_1$4.base32;return[base32_1$4.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58$4.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint$9.encodingLength(e);const n=i+varint$9.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint$9.encodeTo(e,s,0);varint$9.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$6.CID;t.varint=varint$9;t.bytes=bytes$4;t.hasher=hasher$4;t.digest=digest$4}));var basics$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$9,...base2_1$4,...base8_1$4,...base10_1$4,...base16_1$4,...base32_1$4,...base36_1$4,...base58$4,...base64_1$5,...base256emoji_1$4};const i={...sha2Browser$4,...identity_1$8};const n={raw:raw$4,json:json$4};t.CID=cid$6.CID;t.hasher=hasher$4;t.digest=digest$4;t.varint=varint$9;t.bytes=bytes$4;t.bases=r;t.codecs=n;t.hashes=i}));var asUint8array$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function i(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=i}));function createCodec$4(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string$4=createCodec$4("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$4=createCodec$4("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$3.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$4={utf8:string$4,"utf-8":string$4,hex:basics$4.bases.base16,latin1:ascii$4,ascii:ascii$4,binary:ascii$4,...basics$4.bases};var bases$4=BASES$4;var fromString_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$4[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$3.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(e){let t;if(e instanceof Uint8Array){t=e}else if(typeof e==="string"){const r=new TextEncoder;t=r.encode(e)}else{throw new Error(ERROR_MSG_INPUT)}return t}function toHex(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")}function uint32ToHex(e){return(4294967296+e).toString(16).substring(1)}function debugPrint(e,t,r){let i="\n"+e+" = ";for(let n=0;n<t.length;n+=2){if(r===32){i+=uint32ToHex(t[n]).toUpperCase();i+=" ";i+=uint32ToHex(t[n+1]).toUpperCase()}else if(r===64){i+=uint32ToHex(t[n+1]).toUpperCase();i+=uint32ToHex(t[n]).toUpperCase()}else throw new Error("Invalid size "+r);if(n%6===4){i+="\n"+new Array(e.length+4).join(" ")}else if(n<t.length-2){i+=" "}}console.log(i)}function testSpeed(e,t,r){let i=(new Date).getTime();const n=new Uint8Array(t);for(let e=0;e<t;e++){n[e]=e%256}const s=(new Date).getTime();console.log("Generated random input in "+(s-i)+"ms");i=s;for(let s=0;s<r;s++){const r=e(n);const s=(new Date).getTime();const a=s-i;i=s;console.log("Hashed in "+a+"ms: "+r.substring(0,20)+"...");console.log(Math.round(t/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}var util$3={normalizeInput,toHex,debugPrint,testSpeed};function ADD64AA(e,t,r){const i=e[t]+e[r];let n=e[t+1]+e[r+1];if(i>=4294967296){n++}e[t]=i;e[t+1]=n}function ADD64AC(e,t,r,i){let n=e[t]+r;if(r<0){n+=4294967296}let s=e[t+1]+i;if(n>=4294967296){s++}e[t]=n;e[t+1]=s}function B2B_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2B_G(e,t,r,i,n,s){const a=m$1[n];const o=m$1[n+1];const f=m$1[s];const c=m$1[s+1];ADD64AA(v$1,e,t);ADD64AC(v$1,e,a,o);let u=v$1[i]^v$1[e];let h=v$1[i+1]^v$1[e+1];v$1[i]=h;v$1[i+1]=u;ADD64AA(v$1,r,i);u=v$1[t]^v$1[r];h=v$1[t+1]^v$1[r+1];v$1[t]=u>>>24^h<<8;v$1[t+1]=h>>>24^u<<8;ADD64AA(v$1,e,t);ADD64AC(v$1,e,f,c);u=v$1[i]^v$1[e];h=v$1[i+1]^v$1[e+1];v$1[i]=u>>>16^h<<16;v$1[i+1]=h>>>16^u<<16;ADD64AA(v$1,r,i);u=v$1[t]^v$1[r];h=v$1[t+1]^v$1[r+1];v$1[t]=h>>>31^u<<1;v$1[t+1]=u>>>31^h<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]);const SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3];const SIGMA82=new Uint8Array(SIGMA8.map((function(e){return e*2})));const v$1=new Uint32Array(32);const m$1=new Uint32Array(32);function blake2bCompress(e,t){let r=0;for(r=0;r<16;r++){v$1[r]=e.h[r];v$1[r+16]=BLAKE2B_IV32[r]}v$1[24]=v$1[24]^e.t;v$1[25]=v$1[25]^e.t/4294967296;if(t){v$1[28]=~v$1[28];v$1[29]=~v$1[29]}for(r=0;r<32;r++){m$1[r]=B2B_GET32(e.b,4*r)}for(r=0;r<12;r++){B2B_G(0,8,16,24,SIGMA82[r*16+0],SIGMA82[r*16+1]);B2B_G(2,10,18,26,SIGMA82[r*16+2],SIGMA82[r*16+3]);B2B_G(4,12,20,28,SIGMA82[r*16+4],SIGMA82[r*16+5]);B2B_G(6,14,22,30,SIGMA82[r*16+6],SIGMA82[r*16+7]);B2B_G(0,10,20,30,SIGMA82[r*16+8],SIGMA82[r*16+9]);B2B_G(2,12,22,24,SIGMA82[r*16+10],SIGMA82[r*16+11]);B2B_G(4,14,16,26,SIGMA82[r*16+12],SIGMA82[r*16+13]);B2B_G(6,8,18,28,SIGMA82[r*16+14],SIGMA82[r*16+15])}for(r=0;r<16;r++){e.h[r]=e.h[r]^v$1[r]^v$1[r+16]}}const parameterBlock=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function blake2bInit(e,t,r,i){if(e===0||e>64){throw new Error("Illegal output length, expected 0 < length <= 64")}if(t&&t.length>64){throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64")}if(r&&r.length!==16){throw new Error("Illegal salt, expected Uint8Array with length is 16")}if(i&&i.length!==16){throw new Error("Illegal personal, expected Uint8Array with length is 16")}const n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};parameterBlock.fill(0);parameterBlock[0]=e;if(t)parameterBlock[1]=t.length;parameterBlock[2]=1;parameterBlock[3]=1;if(r)parameterBlock.set(r,32);if(i)parameterBlock.set(i,48);for(let e=0;e<16;e++){n.h[e]=BLAKE2B_IV32[e]^B2B_GET32(parameterBlock,e*4)}if(t){blake2bUpdate(n,t);n.c=128}return n}function blake2bUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===128){e.t+=e.c;blake2bCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2bFinal(e){e.t+=e.c;while(e.c<128){e.b[e.c++]=0}blake2bCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)}return t}function blake2b$1(e,t,r,i,n){r=r||64;e=util$3.normalizeInput(e);if(i){i=util$3.normalizeInput(i)}if(n){n=util$3.normalizeInput(n)}const s=blake2bInit(r,t,i,n);blake2bUpdate(s,e);return blake2bFinal(s)}function blake2bHex(e,t,r,i,n){const s=blake2b$1(e,t,r,i,n);return util$3.toHex(s)}var blake2b_1={blake2b:blake2b$1,blake2bHex,blake2bInit,blake2bUpdate,blake2bFinal};function B2S_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2S_G(e,t,r,i,n,s){v[e]=v[e]+v[t]+n;v[i]=ROTR32(v[i]^v[e],16);v[r]=v[r]+v[i];v[t]=ROTR32(v[t]^v[r],12);v[e]=v[e]+v[t]+s;v[i]=ROTR32(v[i]^v[e],8);v[r]=v[r]+v[i];v[t]=ROTR32(v[t]^v[r],7)}function ROTR32(e,t){return e>>>t^e<<32-t}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);const SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]);const v=new Uint32Array(16);const m=new Uint32Array(16);function blake2sCompress(e,t){let r=0;for(r=0;r<8;r++){v[r]=e.h[r];v[r+8]=BLAKE2S_IV[r]}v[12]^=e.t;v[13]^=e.t/4294967296;if(t){v[14]=~v[14]}for(r=0;r<16;r++){m[r]=B2S_GET32(e.b,4*r)}for(r=0;r<10;r++){B2S_G(0,4,8,12,m[SIGMA[r*16+0]],m[SIGMA[r*16+1]]);B2S_G(1,5,9,13,m[SIGMA[r*16+2]],m[SIGMA[r*16+3]]);B2S_G(2,6,10,14,m[SIGMA[r*16+4]],m[SIGMA[r*16+5]]);B2S_G(3,7,11,15,m[SIGMA[r*16+6]],m[SIGMA[r*16+7]]);B2S_G(0,5,10,15,m[SIGMA[r*16+8]],m[SIGMA[r*16+9]]);B2S_G(1,6,11,12,m[SIGMA[r*16+10]],m[SIGMA[r*16+11]]);B2S_G(2,7,8,13,m[SIGMA[r*16+12]],m[SIGMA[r*16+13]]);B2S_G(3,4,9,14,m[SIGMA[r*16+14]],m[SIGMA[r*16+15]])}for(r=0;r<8;r++){e.h[r]^=v[r]^v[r+8]}}function blake2sInit(e,t){if(!(e>0&&e<=32)){throw new Error("Incorrect output length, should be in [1, 32]")}const r=t?t.length:0;if(t&&!(r>0&&r<=32)){throw new Error("Incorrect key length, should be in [1, 32]")}const i={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:e};i.h[0]^=16842752^r<<8^e;if(r>0){blake2sUpdate(i,t);i.c=64}return i}function blake2sUpdate(e,t){for(let r=0;r<t.length;r++){if(e.c===64){e.t+=e.c;blake2sCompress(e,false);e.c=0}e.b[e.c++]=t[r]}}function blake2sFinal(e){e.t+=e.c;while(e.c<64){e.b[e.c++]=0}blake2sCompress(e,true);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++){t[r]=e.h[r>>2]>>8*(r&3)&255}return t}function blake2s$1(e,t,r){r=r||32;e=util$3.normalizeInput(e);const i=blake2sInit(r,t);blake2sUpdate(i,e);return blake2sFinal(i)}function blake2sHex(e,t,r){const i=blake2s$1(e,t,r);return util$3.toHex(i)}var blake2s_1={blake2s:blake2s$1,blake2sHex,blake2sInit,blake2sUpdate,blake2sFinal};var blakejs={blake2b:blake2b_1.blake2b,blake2bHex:blake2b_1.blake2bHex,blake2bInit:blake2b_1.blake2bInit,blake2bUpdate:blake2b_1.blake2bUpdate,blake2bFinal:blake2b_1.blake2bFinal,blake2s:blake2s_1.blake2s,blake2sHex:blake2s_1.blake2sHex,blake2sInit:blake2s_1.blake2sInit,blake2sUpdate:blake2s_1.blake2sUpdate,blake2sFinal:blake2s_1.blake2sFinal};const minB=45569;const minS=45633;const blake2b={init:blakejs.blake2bInit,update:blakejs.blake2bUpdate,digest:blakejs.blake2bFinal};const blake2s={init:blakejs.blake2sInit,update:blakejs.blake2sUpdate,digest:blakejs.blake2sFinal};const makeB2Hash=(e,t)=>async r=>{const i=t.init(e,null);t.update(i,r);return t.digest(i)};var blake_1=e=>{for(let t=0;t<64;t++){e[minB+t]=makeB2Hash(t+1,blake2b)}for(let t=0;t<32;t++){e[minS+t]=makeB2Hash(t+1,blake2s)}};const{factory:sha}=sha_browser;const{fromNumberTo32BitBuf}=utils;const{fromString:uint8ArrayFromString$2}=fromString_1$3;const hash=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(sha3$1.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(sha3$1.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(sha3$1.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(sha3$1.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(sha3$1.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(sha3$1.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(sha3$1.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(sha3$1.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(sha3$1.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(sha3$1.keccak512.arrayBuffer(t));case"murmur3-128":return uint8ArrayFromString$2(murmurhash3jsRevisited.x64.hash128(t),"base16");case"murmur3-32":return fromNumberTo32BitBuf(murmurhash3jsRevisited.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}};const identity=e=>e;var crypto$1={identity,sha1:sha("sha1"),sha2256:sha("sha2-256"),sha2512:sha("sha2-512"),dblSha2256:sha("dbl-sha2-256"),sha3224:hash("sha3-224"),sha3256:hash("sha3-256"),sha3384:hash("sha3-384"),sha3512:hash("sha3-512"),shake128:hash("shake-128"),shake256:hash("shake-256"),keccak224:hash("keccak-224"),keccak256:hash("keccak-256"),keccak384:hash("keccak-384"),keccak512:hash("keccak-512"),murmur3128:hash("murmur3-128"),murmur332:hash("murmur3-32"),addBlake:blake_1};var equals_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}t.equals=r}));const{equals:equals$1}=equals_1$2;async function Multihashing(e,t,r){const i=await Multihashing.digest(e,t,r);return src$d.encode(i,t,r)}Multihashing.multihash=src$d;Multihashing.digest=async(e,t,r)=>{const i=Multihashing.createHash(t);const n=await i(e);return r?n.slice(0,r):n};Multihashing.createHash=function(e){if(!e){const e=errCode(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED");throw e}const t=src$d.coerceCode(e);if(!Multihashing.functions[t]){throw errCode(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED")}return Multihashing.functions[t]};Multihashing.functions={0:crypto$1.identity,17:crypto$1.sha1,18:crypto$1.sha2256,19:crypto$1.sha2512,20:crypto$1.sha3512,21:crypto$1.sha3384,22:crypto$1.sha3256,23:crypto$1.sha3224,24:crypto$1.shake128,25:crypto$1.shake256,26:crypto$1.keccak224,27:crypto$1.keccak256,28:crypto$1.keccak384,29:crypto$1.keccak512,34:crypto$1.murmur3128,35:crypto$1.murmur332,86:crypto$1.dblSha2256};crypto$1.addBlake(Multihashing.functions);Multihashing.validate=async(e,t)=>{const r=await Multihashing(e,src$d.decode(t).name);return equals$1(t,r)};var src$b=Multihashing;const mergeOptions=mergeOptions$1.bind({ignoreUndefined:true});async function hamtHashFn(e){const t=await src$b(e,"murmur3-128");const r=t.slice(2,10);const i=r.length;const n=new Uint8Array(i);for(let e=0;e<i;e++){n[i-e-1]=r[e]}return n}const defaultOptions={chunker:"fixed",strategy:"balanced",rawLeaves:false,onlyHash:false,reduceSingleLeafToSelf:true,hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:false,pin:false,recursive:false,hidden:false,preload:false,timeout:undefined,hamtHashFn,hamtHashCode:34,hamtBucketBits:8};var options=function(e={}){return mergeOptions(defaultOptions,e)};var aspromise=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),i=0,n=2,s=true;while(n<arguments.length)r[i++]=arguments[n++];return new Promise((function n(a,o){r[i]=function e(t){if(s){s=false;if(t)o(t);else{var r=new Array(arguments.length-1),i=0;while(i<r.length)r[i++]=arguments[i];a.apply(null,r)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}var base64_1$4=createCommonjsModule$1((function(e,t){var r=t;r.length=function e(t){var r=t.length;if(!r)return 0;var i=0;while(--r%4>1&&t.charAt(r)==="=")++i;return Math.ceil(t.length*3)/4-i};var i=new Array(64);var n=new Array(123);for(var s=0;s<64;)n[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function e(t,r,n){var s=null,a=[];var o=0,f=0,c;while(r<n){var u=t[r++];switch(f){case 0:a[o++]=i[u>>2];c=(u&3)<<4;f=1;break;case 1:a[o++]=i[c|u>>4];c=(u&15)<<2;f=2;break;case 2:a[o++]=i[c|u>>6];a[o++]=i[u&63];f=0;break}if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(f){a[o++]=i[c];a[o++]=61;if(f===1)a[o++]=61}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function e(t,r,i){var s=i;var o=0,f;for(var c=0;c<t.length;){var u=t.charCodeAt(c++);if(u===61&&o>1)break;if((u=n[u])===undefined)throw Error(a);switch(o){case 0:f=u;o=1;break;case 1:r[i++]=f<<2|(u&48)>>4;f=u;o=2;break;case 2:r[i++]=(f&15)<<4|(u&60)>>2;f=u;o=3;break;case 3:r[i++]=(f&3)<<6|u;o=0;break}}if(o===1)throw Error(a);return i-s};r.test=function e(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}));var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function e(t,r,i){(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:i||this});return this};EventEmitter.prototype.off=function e(t,r){if(t===undefined)this._listeners={};else{if(r===undefined)this._listeners[t]=[];else{var i=this._listeners[t];for(var n=0;n<i.length;)if(i[n].fn===r)i.splice(n,1);else++n}}return this};EventEmitter.prototype.emit=function e(t){var r=this._listeners[t];if(r){var i=[],n=1;for(;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this};var float_1=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=r[3]===128;function n(e,i,n){t[0]=e;i[n]=r[0];i[n+1]=r[1];i[n+2]=r[2];i[n+3]=r[3]}function s(e,i,n){t[0]=e;i[n]=r[3];i[n+1]=r[2];i[n+2]=r[1];i[n+3]=r[0]}e.writeFloatLE=i?n:s;e.writeFloatBE=i?s:n;function a(e,i){r[0]=e[i];r[1]=e[i+1];r[2]=e[i+2];r[3]=e[i+3];return t[0]}function o(e,i){r[3]=e[i];r[2]=e[i+1];r[1]=e[i+2];r[0]=e[i+3];return t[0]}e.readFloatLE=i?a:o;e.readFloatBE=i?o:a})();else(function(){function t(e,t,r,i){var n=t<0?1:0;if(n)t=-t;if(t===0)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,i);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,i);else{var s=Math.floor(Math.log(t)/Math.LN2),a=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((n<<31|s+127<<23|a)>>>0,r,i)}}e.writeFloatLE=t.bind(null,writeUintLE);e.writeFloatBE=t.bind(null,writeUintBE);function r(e,t,r){var i=e(t,r),n=(i>>31)*2+1,s=i>>>23&255,a=i&8388607;return s===255?a?NaN:n*Infinity:s===0?n*1401298464324817e-60*a:n*Math.pow(2,s-150)*(a+8388608)}e.readFloatLE=r.bind(null,readUintLE);e.readFloatBE=r.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=r[7]===128;function n(e,i,n){t[0]=e;i[n]=r[0];i[n+1]=r[1];i[n+2]=r[2];i[n+3]=r[3];i[n+4]=r[4];i[n+5]=r[5];i[n+6]=r[6];i[n+7]=r[7]}function s(e,i,n){t[0]=e;i[n]=r[7];i[n+1]=r[6];i[n+2]=r[5];i[n+3]=r[4];i[n+4]=r[3];i[n+5]=r[2];i[n+6]=r[1];i[n+7]=r[0]}e.writeDoubleLE=i?n:s;e.writeDoubleBE=i?s:n;function a(e,i){r[0]=e[i];r[1]=e[i+1];r[2]=e[i+2];r[3]=e[i+3];r[4]=e[i+4];r[5]=e[i+5];r[6]=e[i+6];r[7]=e[i+7];return t[0]}function o(e,i){r[7]=e[i];r[6]=e[i+1];r[5]=e[i+2];r[4]=e[i+3];r[3]=e[i+4];r[2]=e[i+5];r[1]=e[i+6];r[0]=e[i+7];return t[0]}e.readDoubleLE=i?a:o;e.readDoubleBE=i?o:a})();else(function(){function t(e,t,r,i,n,s){var a=i<0?1:0;if(a)i=-i;if(i===0){e(0,n,s+t);e(1/i>0?0:2147483648,n,s+r)}else if(isNaN(i)){e(0,n,s+t);e(2146959360,n,s+r)}else if(i>17976931348623157e292){e(0,n,s+t);e((a<<31|2146435072)>>>0,n,s+r)}else{var o;if(i<22250738585072014e-324){o=i/5e-324;e(o>>>0,n,s+t);e((a<<31|o/4294967296)>>>0,n,s+r)}else{var f=Math.floor(Math.log(i)/Math.LN2);if(f===1024)f=1023;o=i*Math.pow(2,-f);e(o*4503599627370496>>>0,n,s+t);e((a<<31|f+1023<<20|o*1048576&1048575)>>>0,n,s+r)}}}e.writeDoubleLE=t.bind(null,writeUintLE,0,4);e.writeDoubleBE=t.bind(null,writeUintBE,4,0);function r(e,t,r,i,n){var s=e(i,n+t),a=e(i,n+r);var o=(a>>31)*2+1,f=a>>>20&2047,c=4294967296*(a&1048575)+s;return f===2047?c?NaN:o*Infinity:f===0?o*5e-324*c:o*Math.pow(2,f-1075)*(c+4503599627370496)}e.readDoubleLE=r.bind(null,readUintLE,0,4);e.readDoubleBE=r.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8_1=createCommonjsModule$1((function(e,t){var r=t;r.length=function e(t){var r=0,i=0;for(var n=0;n<t.length;++n){i=t.charCodeAt(n);if(i<128)r+=1;else if(i<2048)r+=2;else if((i&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){++n;r+=4}else r+=3}return r};r.read=function e(t,r,i){var n=i-r;if(n<1)return"";var s=null,a=[],o=0,f;while(r<i){f=t[r++];if(f<128)a[o++]=f;else if(f>191&&f<224)a[o++]=(f&31)<<6|t[r++]&63;else if(f>239&&f<365){f=((f&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536;a[o++]=55296+(f>>10);a[o++]=56320+(f&1023)}else a[o++]=(f&15)<<12|(t[r++]&63)<<6|t[r++]&63;if(o>8191){(s||(s=[])).push(String.fromCharCode.apply(String,a));o=0}}if(s){if(o)s.push(String.fromCharCode.apply(String,a.slice(0,o)));return s.join("")}return String.fromCharCode.apply(String,a.slice(0,o))};r.write=function e(t,r,i){var n=i,s,a;for(var o=0;o<t.length;++o){s=t.charCodeAt(o);if(s<128){r[i++]=s}else if(s<2048){r[i++]=s>>6|192;r[i++]=s&63|128}else if((s&64512)===55296&&((a=t.charCodeAt(o+1))&64512)===56320){s=65536+((s&1023)<<10)+(a&1023);++o;r[i++]=s>>18|240;r[i++]=s>>12&63|128;r[i++]=s>>6&63|128;r[i++]=s&63|128}else{r[i++]=s>>12|224;r[i++]=s>>6&63|128;r[i++]=s&63|128}}return i-n}}));var pool_1=pool;function pool(e,t,r){var i=r||8192;var n=i>>>1;var s=null;var a=i;return function r(o){if(o<1||o>n)return e(o);if(a+o>i){s=e(i);a=0}var f=t.call(s,a,a+=o);if(a&7)a=(a|7)+1;return f}}var longbits=LongBits$2;function LongBits$2(e,t){this.lo=e>>>0;this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function e(t){if(t===0)return zero;var r=t<0;if(r)t=-t;var i=t>>>0,n=(t-i)/4294967296>>>0;if(r){n=~n>>>0;i=~i>>>0;if(++i>4294967295){i=0;if(++n>4294967295)n=0}}return new LongBits$2(i,n)};LongBits$2.from=function e(t){if(typeof t==="number")return LongBits$2.fromNumber(t);if(minimal$1.isString(t)){if(minimal$1.Long)t=minimal$1.Long.fromString(t);else return LongBits$2.fromNumber(parseInt(t,10))}return t.low||t.high?new LongBits$2(t.low>>>0,t.high>>>0):zero};LongBits$2.prototype.toNumber=function e(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,i=~this.hi>>>0;if(!r)i=i+1>>>0;return-(r+i*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function e(t){return minimal$1.Long?new minimal$1.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function e(t){if(t===zeroHash)return zero;return new LongBits$2((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)};LongBits$2.prototype.toHash=function e(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function e(){var t=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0;this.lo=(this.lo<<1^t)>>>0;return this};LongBits$2.prototype.zzDecode=function e(){var t=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0;this.hi=(this.hi>>>1^t)>>>0;return this};LongBits$2.prototype.length=function e(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10};var minimal$1=createCommonjsModule$1((function(e,t){var r=t;r.asPromise=aspromise;r.base64=base64_1$4;r.EventEmitter=eventemitter;r.float=float_1;r.inquire=inquire_1;r.utf8=utf8_1;r.pool=pool_1;r.LongBits=longbits;r.isNode=Boolean(typeof commonjsGlobal!=="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node);r.global=r.isNode&&commonjsGlobal||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||commonjsGlobal;r.emptyArray=Object.freeze?Object.freeze([]):[];r.emptyObject=Object.freeze?Object.freeze({}):{};r.isInteger=Number.isInteger||function e(t){return typeof t==="number"&&isFinite(t)&&Math.floor(t)===t};r.isString=function e(t){return typeof t==="string"||t instanceof String};r.isObject=function e(t){return t&&typeof t==="object"};r.isset=r.isSet=function e(t,r){var i=t[r];if(i!=null&&t.hasOwnProperty(r))return typeof i!=="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0;return false};r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();r._Buffer_from=null;r._Buffer_allocUnsafe=null;r.newBuffer=function e(t){return typeof t==="number"?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):typeof Uint8Array==="undefined"?t:new Uint8Array(t)};r.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long");r.key2Re=/^true|false|0|1$/;r.key32Re=/^-?(?:0|[1-9][0-9]*)$/;r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;r.longToHash=function e(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash};r.longFromHash=function e(t,i){var n=r.LongBits.fromHash(t);if(r.Long)return r.Long.fromBits(n.lo,n.hi,i);return n.toNumber(Boolean(i))};function i(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)if(e[i[n]]===undefined||!r)e[i[n]]=t[i[n]];return e}r.merge=i;r.lcFirst=function e(t){return t.charAt(0).toLowerCase()+t.substring(1)};function n(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,t);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(r)i(this,r)}(t.prototype=Object.create(Error.prototype)).constructor=t;Object.defineProperty(t.prototype,"name",{get:function(){return e}});t.prototype.toString=function e(){return this.name+": "+this.message};return t}r.newError=n;r.ProtocolError=n("ProtocolError");r.oneOfGetter=function e(t){var r={};for(var i=0;i<t.length;++i)r[t[i]]=1;return function(){for(var e=Object.keys(this),t=e.length-1;t>-1;--t)if(r[e[t]]===1&&this[e[t]]!==undefined&&this[e[t]]!==null)return e[t]}};r.oneOfSetter=function e(t){return function(e){for(var r=0;r<t.length;++r)if(t[r]!==e)delete this[t[r]]}};r.toJSONOptions={longs:String,enums:String,bytes:String,json:true};r._configure=function(){var e=r.Buffer;if(!e){r._Buffer_from=r._Buffer_allocUnsafe=null;return}r._Buffer_from=e.from!==Uint8Array.from&&e.from||function t(r,i){return new e(r,i)};r._Buffer_allocUnsafe=e.allocUnsafe||function t(r){return new e(r)}}}));var writer=Writer;var BufferWriter$1;var LongBits$1=minimal$1.LongBits,base64=minimal$1.base64,utf8$1=minimal$1.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var create$3=function e(){return minimal$1.Buffer?function e(){return(Writer.create=function e(){return new BufferWriter$1})()}:function e(){return new Writer}};Writer.create=create$3();Writer.alloc=function e(t){return new minimal$1.Array(t)};if(minimal$1.Array!==Array)Writer.alloc=minimal$1.pool(Writer.alloc,minimal$1.Array.prototype.subarray);Writer.prototype._push=function e(t,r,i){this.tail=this.tail.next=new Op(t,r,i);this.len+=r;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function e(t){this.len+=(this.tail=this.tail.next=new VarintOp((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len;return this};Writer.prototype.int32=function e(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)};Writer.prototype.sint32=function e(t){return this.uint32((t<<1^t>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function e(t){var r=LongBits$1.from(t);return this._push(writeVarint64,r.length(),r)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function e(t){var r=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer.prototype.bool=function e(t){return this._push(writeByte,1,t?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function e(t){return this._push(writeFixed32,4,t>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function e(t){var r=LongBits$1.from(t);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function e(t){return this._push(minimal$1.float.writeFloatLE,4,t)};Writer.prototype.double=function e(t){return this._push(minimal$1.float.writeDoubleLE,8,t)};var writeBytes=minimal$1.Array.prototype.set?function e(t,r,i){r.set(t,i)}:function e(t,r,i){for(var n=0;n<t.length;++n)r[i+n]=t[n]};Writer.prototype.bytes=function e(t){var r=t.length>>>0;if(!r)return this._push(writeByte,1,0);if(minimal$1.isString(t)){var i=Writer.alloc(r=base64.length(t));base64.decode(t,i,0);t=i}return this.uint32(r)._push(writeBytes,r,t)};Writer.prototype.string=function e(t){var r=utf8$1.length(t);return r?this.uint32(r)._push(utf8$1.write,r,t):this._push(writeByte,1,0)};Writer.prototype.fork=function e(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function e(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function e(){var t=this.head,r=this.tail,i=this.len;this.reset().uint32(i);if(i){this.tail.next=t.next;this.tail=r;this.len+=i}return this};Writer.prototype.finish=function e(){var t=this.head.next,r=this.constructor.alloc(this.len),i=0;while(t){t.fn(t.val,r,i);i+=t.len;t=t.next}return r};Writer._configure=function(e){BufferWriter$1=e;Writer.create=create$3();BufferWriter$1._configure()};var writer_buffer=BufferWriter;(BufferWriter.prototype=Object.create(writer.prototype)).constructor=BufferWriter;function BufferWriter(){writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=minimal$1._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=minimal$1.Buffer&&minimal$1.Buffer.prototype instanceof Uint8Array&&minimal$1.Buffer.prototype.set.name==="set"?function e(t,r,i){r.set(t,i)}:function e(t,r,i){if(t.copy)t.copy(r,i,0,t.length);else for(var n=0;n<t.length;)r[i++]=t[n++]}};BufferWriter.prototype.bytes=function e(t){if(minimal$1.isString(t))t=minimal$1._Buffer_from(t,"base64");var r=t.length>>>0;this.uint32(r);if(r)this._push(BufferWriter.writeBytesBuffer,r,t);return this};function writeStringBuffer(e,t,r){if(e.length<40)minimal$1.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function e(t){var r=minimal$1.Buffer.byteLength(t);this.uint32(r);if(r)this._push(writeStringBuffer,r,t);return this};BufferWriter._configure();var reader=Reader;var BufferReader$1;var LongBits=minimal$1.LongBits,utf8=minimal$1.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var create_array=typeof Uint8Array!=="undefined"?function e(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function e(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")};var create$2=function e(){return minimal$1.Buffer?function e(t){return(Reader.create=function e(t){return minimal$1.Buffer.isBuffer(t)?new BufferReader$1(t):create_array(t)})(t)}:create_array};Reader.create=create$2();Reader.prototype._slice=minimal$1.Array.prototype.subarray||minimal$1.Array.prototype.slice;Reader.prototype.uint32=function e(){var t=4294967295;return function e(){t=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return t;t=(t|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return t}}();Reader.prototype.int32=function e(){return this.uint32()|0};Reader.prototype.sint32=function e(){var t=this.uint32();return t>>>1^-(t&1)|0};function readLongVarint(){var e=new LongBits(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function e(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function e(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readFloatLE(this.buf,this.pos);this.pos+=4;return t};Reader.prototype.double=function e(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal$1.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return t};Reader.prototype.bytes=function e(){var t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw indexOutOfRange(this,t);this.pos+=t;if(Array.isArray(this.buf))return this.buf.slice(r,i);return r===i?new this.buf.constructor(0):this._slice.call(this.buf,r,i)};Reader.prototype.string=function e(){var t=this.bytes();return utf8.read(t,0,t.length)};Reader.prototype.skip=function e(t){if(typeof t==="number"){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){BufferReader$1=e;Reader.create=create$2();BufferReader$1._configure();var t=minimal$1.Long?"toLong":"toNumber";minimal$1.merge(Reader.prototype,{int64:function e(){return readLongVarint.call(this)[t](false)},uint64:function e(){return readLongVarint.call(this)[t](true)},sint64:function e(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function e(){return readFixed64.call(this)[t](true)},sfixed64:function e(){return readFixed64.call(this)[t](false)}})};var reader_buffer=BufferReader;(BufferReader.prototype=Object.create(reader.prototype)).constructor=BufferReader;function BufferReader(e){reader.call(this,e)}BufferReader._configure=function(){if(minimal$1.Buffer)BufferReader.prototype._slice=minimal$1.Buffer.prototype.slice};BufferReader.prototype.string=function e(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};BufferReader._configure();var service=Service;(Service.prototype=Object.create(minimal$1.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");minimal$1.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function e(t,r,i,n,s){if(!n)throw TypeError("request must be specified");var a=this;if(!s)return minimal$1.asPromise(e,a,t,r,i,n);if(!a.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](n).finish(),(function e(r,n){if(r){a.emit("error",r,t);return s(r)}if(n===null){a.end(true);return undefined}if(!(n instanceof i)){try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(r){a.emit("error",r,t);return s(r)}}a.emit("data",n,t);return s(null,n)}))}catch(e){a.emit("error",e,t);setTimeout((function(){s(e)}),0);return undefined}};Service.prototype.end=function e(t){if(this.rpcImpl){if(!t)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this};var rpc_1=createCommonjsModule$1((function(e,t){var r=t;r.Service=service}));var roots={};var indexMinimal=createCommonjsModule$1((function(e,t){var r=t;r.build="minimal";r.Writer=writer;r.BufferWriter=writer_buffer;r.Reader=reader;r.BufferReader=reader_buffer;r.util=minimal$1;r.rpc=rpc_1;r.roots=roots;r.configure=i;function i(){r.util._configure();r.Writer._configure(r.BufferWriter);r.Reader._configure(r.BufferReader)}i()}));var minimal=indexMinimal;var $Reader$1=minimal.Reader,$Writer$1=minimal.Writer,$util$1=minimal.util;var $root$1=minimal.roots["ipfs-unixfs"]||(minimal.roots["ipfs-unixfs"]={});$root$1.Data=function(){function e(e){this.blocksizes=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Type=0;e.prototype.Data=$util$1.newBuffer([]);e.prototype.filesize=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.blocksizes=$util$1.emptyArray;e.prototype.hashType=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.fanout=$util$1.Long?$util$1.Long.fromBits(0,0,true):0;e.prototype.mode=0;e.prototype.mtime=null;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int32(t.Type);if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(18).bytes(t.Data);if(t.filesize!=null&&Object.hasOwnProperty.call(t,"filesize"))r.uint32(24).uint64(t.filesize);if(t.blocksizes!=null&&t.blocksizes.length){for(var i=0;i<t.blocksizes.length;++i)r.uint32(32).uint64(t.blocksizes[i])}if(t.hashType!=null&&Object.hasOwnProperty.call(t,"hashType"))r.uint32(40).uint64(t.hashType);if(t.fanout!=null&&Object.hasOwnProperty.call(t,"fanout"))r.uint32(48).uint64(t.fanout);if(t.mode!=null&&Object.hasOwnProperty.call(t,"mode"))r.uint32(56).uint32(t.mode);if(t.mtime!=null&&Object.hasOwnProperty.call(t,"mtime"))$root$1.UnixTime.encode(t.mtime,r.uint32(66).fork()).ldelim();return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var i=r===undefined?t.len:t.pos+r,n=new $root$1.Data;while(t.pos<i){var s=t.uint32();switch(s>>>3){case 1:n.Type=t.int32();break;case 2:n.Data=t.bytes();break;case 3:n.filesize=t.uint64();break;case 4:if(!(n.blocksizes&&n.blocksizes.length))n.blocksizes=[];if((s&7)===2){var a=t.uint32()+t.pos;while(t.pos<a)n.blocksizes.push(t.uint64())}else n.blocksizes.push(t.uint64());break;case 5:n.hashType=t.uint64();break;case 6:n.fanout=t.uint64();break;case 7:n.mode=t.uint32();break;case 8:n.mtime=$root$1.UnixTime.decode(t,t.uint32());break;default:t.skipType(s&7);break}}if(!n.hasOwnProperty("Type"))throw $util$1.ProtocolError("missing required 'Type'",{instance:n});return n};e.fromObject=function e(t){if(t instanceof $root$1.Data)return t;var r=new $root$1.Data;switch(t.Type){case"Raw":case 0:r.Type=0;break;case"Directory":case 1:r.Type=1;break;case"File":case 2:r.Type=2;break;case"Metadata":case 3:r.Type=3;break;case"Symlink":case 4:r.Type=4;break;case"HAMTShard":case 5:r.Type=5;break}if(t.Data!=null){if(typeof t.Data==="string")$util$1.base64.decode(t.Data,r.Data=$util$1.newBuffer($util$1.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}if(t.filesize!=null){if($util$1.Long)(r.filesize=$util$1.Long.fromValue(t.filesize)).unsigned=true;else if(typeof t.filesize==="string")r.filesize=parseInt(t.filesize,10);else if(typeof t.filesize==="number")r.filesize=t.filesize;else if(typeof t.filesize==="object")r.filesize=new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true)}if(t.blocksizes){if(!Array.isArray(t.blocksizes))throw TypeError(".Data.blocksizes: array expected");r.blocksizes=[];for(var i=0;i<t.blocksizes.length;++i){if($util$1.Long)(r.blocksizes[i]=$util$1.Long.fromValue(t.blocksizes[i])).unsigned=true;else if(typeof t.blocksizes[i]==="string")r.blocksizes[i]=parseInt(t.blocksizes[i],10);else if(typeof t.blocksizes[i]==="number")r.blocksizes[i]=t.blocksizes[i];else if(typeof t.blocksizes[i]==="object")r.blocksizes[i]=new $util$1.LongBits(t.blocksizes[i].low>>>0,t.blocksizes[i].high>>>0).toNumber(true)}}if(t.hashType!=null){if($util$1.Long)(r.hashType=$util$1.Long.fromValue(t.hashType)).unsigned=true;else if(typeof t.hashType==="string")r.hashType=parseInt(t.hashType,10);else if(typeof t.hashType==="number")r.hashType=t.hashType;else if(typeof t.hashType==="object")r.hashType=new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true)}if(t.fanout!=null){if($util$1.Long)(r.fanout=$util$1.Long.fromValue(t.fanout)).unsigned=true;else if(typeof t.fanout==="string")r.fanout=parseInt(t.fanout,10);else if(typeof t.fanout==="number")r.fanout=t.fanout;else if(typeof t.fanout==="object")r.fanout=new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true)}if(t.mode!=null){r.mode=t.mode>>>0}if(t.mtime!=null){if(typeof t.mtime!=="object")throw TypeError(".Data.mtime: object expected");r.mtime=$root$1.UnixTime.fromObject(t.mtime)}return r};e.toObject=function e(t,r){if(!r)r={};var i={};if(r.arrays||r.defaults){i.blocksizes=[]}if(r.defaults){i.Type=r.enums===String?"Raw":0;if(r.bytes===String)i.Data="";else{i.Data=[];if(r.bytes!==Array)i.Data=$util$1.newBuffer(i.Data)}if($util$1.Long){var n=new $util$1.Long(0,0,true);i.filesize=r.longs===String?n.toString():r.longs===Number?n.toNumber():n}else i.filesize=r.longs===String?"0":0;if($util$1.Long){var n=new $util$1.Long(0,0,true);i.hashType=r.longs===String?n.toString():r.longs===Number?n.toNumber():n}else i.hashType=r.longs===String?"0":0;if($util$1.Long){var n=new $util$1.Long(0,0,true);i.fanout=r.longs===String?n.toString():r.longs===Number?n.toNumber():n}else i.fanout=r.longs===String?"0":0;i.mode=0;i.mtime=null}if(t.Type!=null&&t.hasOwnProperty("Type")){i.Type=r.enums===String?$root$1.Data.DataType[t.Type]:t.Type}if(t.Data!=null&&t.hasOwnProperty("Data")){i.Data=r.bytes===String?$util$1.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.filesize!=null&&t.hasOwnProperty("filesize")){if(typeof t.filesize==="number")i.filesize=r.longs===String?String(t.filesize):t.filesize;else i.filesize=r.longs===String?$util$1.Long.prototype.toString.call(t.filesize):r.longs===Number?new $util$1.LongBits(t.filesize.low>>>0,t.filesize.high>>>0).toNumber(true):t.filesize}if(t.blocksizes&&t.blocksizes.length){i.blocksizes=[];for(var s=0;s<t.blocksizes.length;++s){if(typeof t.blocksizes[s]==="number")i.blocksizes[s]=r.longs===String?String(t.blocksizes[s]):t.blocksizes[s];else i.blocksizes[s]=r.longs===String?$util$1.Long.prototype.toString.call(t.blocksizes[s]):r.longs===Number?new $util$1.LongBits(t.blocksizes[s].low>>>0,t.blocksizes[s].high>>>0).toNumber(true):t.blocksizes[s]}}if(t.hashType!=null&&t.hasOwnProperty("hashType")){if(typeof t.hashType==="number")i.hashType=r.longs===String?String(t.hashType):t.hashType;else i.hashType=r.longs===String?$util$1.Long.prototype.toString.call(t.hashType):r.longs===Number?new $util$1.LongBits(t.hashType.low>>>0,t.hashType.high>>>0).toNumber(true):t.hashType}if(t.fanout!=null&&t.hasOwnProperty("fanout")){if(typeof t.fanout==="number")i.fanout=r.longs===String?String(t.fanout):t.fanout;else i.fanout=r.longs===String?$util$1.Long.prototype.toString.call(t.fanout):r.longs===Number?new $util$1.LongBits(t.fanout.low>>>0,t.fanout.high>>>0).toNumber(true):t.fanout}if(t.mode!=null&&t.hasOwnProperty("mode")){i.mode=t.mode}if(t.mtime!=null&&t.hasOwnProperty("mtime")){i.mtime=$root$1.UnixTime.toObject(t.mtime,r)}return i};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};e.DataType=function(){var e={},t=Object.create(e);t[e[0]="Raw"]=0;t[e[1]="Directory"]=1;t[e[2]="File"]=2;t[e[3]="Metadata"]=3;t[e[4]="Symlink"]=4;t[e[5]="HAMTShard"]=5;return t}();return e}();$root$1.UnixTime=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Seconds=$util$1.Long?$util$1.Long.fromBits(0,0,false):0;e.prototype.FractionalNanoseconds=0;e.encode=function e(t,r){if(!r)r=$Writer$1.create();r.uint32(8).int64(t.Seconds);if(t.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(t,"FractionalNanoseconds"))r.uint32(21).fixed32(t.FractionalNanoseconds);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var i=r===undefined?t.len:t.pos+r,n=new $root$1.UnixTime;while(t.pos<i){var s=t.uint32();switch(s>>>3){case 1:n.Seconds=t.int64();break;case 2:n.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}if(!n.hasOwnProperty("Seconds"))throw $util$1.ProtocolError("missing required 'Seconds'",{instance:n});return n};e.fromObject=function e(t){if(t instanceof $root$1.UnixTime)return t;var r=new $root$1.UnixTime;if(t.Seconds!=null){if($util$1.Long)(r.Seconds=$util$1.Long.fromValue(t.Seconds)).unsigned=false;else if(typeof t.Seconds==="string")r.Seconds=parseInt(t.Seconds,10);else if(typeof t.Seconds==="number")r.Seconds=t.Seconds;else if(typeof t.Seconds==="object")r.Seconds=new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber()}if(t.FractionalNanoseconds!=null){r.FractionalNanoseconds=t.FractionalNanoseconds>>>0}return r};e.toObject=function e(t,r){if(!r)r={};var i={};if(r.defaults){if($util$1.Long){var n=new $util$1.Long(0,0,false);i.Seconds=r.longs===String?n.toString():r.longs===Number?n.toNumber():n}else i.Seconds=r.longs===String?"0":0;i.FractionalNanoseconds=0}if(t.Seconds!=null&&t.hasOwnProperty("Seconds")){if(typeof t.Seconds==="number")i.Seconds=r.longs===String?String(t.Seconds):t.Seconds;else i.Seconds=r.longs===String?$util$1.Long.prototype.toString.call(t.Seconds):r.longs===Number?new $util$1.LongBits(t.Seconds.low>>>0,t.Seconds.high>>>0).toNumber():t.Seconds}if(t.FractionalNanoseconds!=null&&t.hasOwnProperty("FractionalNanoseconds")){i.FractionalNanoseconds=t.FractionalNanoseconds}return i};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();$root$1.Metadata=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.MimeType="";e.encode=function e(t,r){if(!r)r=$Writer$1.create();if(t.MimeType!=null&&Object.hasOwnProperty.call(t,"MimeType"))r.uint32(10).string(t.MimeType);return r};e.decode=function e(t,r){if(!(t instanceof $Reader$1))t=$Reader$1.create(t);var i=r===undefined?t.len:t.pos+r,n=new $root$1.Metadata;while(t.pos<i){var s=t.uint32();switch(s>>>3){case 1:n.MimeType=t.string();break;default:t.skipType(s&7);break}}return n};e.fromObject=function e(t){if(t instanceof $root$1.Metadata)return t;var r=new $root$1.Metadata;if(t.MimeType!=null){r.MimeType=String(t.MimeType)}return r};e.toObject=function e(t,r){if(!r)r={};var i={};if(r.defaults){i.MimeType=""}if(t.MimeType!=null&&t.hasOwnProperty("MimeType")){i.MimeType=t.MimeType}return i};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();var unixfs=$root$1;const{Data:PBData}=unixfs;const types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"];const dirTypes=["directory","hamt-sharded-directory"];const DEFAULT_FILE_MODE=parseInt("0644",8);const DEFAULT_DIRECTORY_MODE=parseInt("0755",8);function parseMode(e){if(e==null){return undefined}if(typeof e==="number"){return e&4095}e=e.toString();if(e.substring(0,1)==="0"){return parseInt(e,8)&4095}return parseInt(e,10)&4095}function parseMtime(e){if(e==null){return undefined}let t;if(e.secs!=null){t={secs:e.secs,nsecs:e.nsecs}}if(e.Seconds!=null){t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}}if(Array.isArray(e)){t={secs:e[0],nsecs:e[1]}}if(e instanceof Date){const r=e.getTime();const i=Math.floor(r/1e3);t={secs:i,nsecs:(r-i*1e3)*1e3}}if(!Object.prototype.hasOwnProperty.call(t,"secs")){return undefined}if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999)){throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS")}return t}class Data{static unmarshal(e){const t=PBData.decode(e);const r=PBData.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const i=new Data({type:types[r.Type],data:r.Data,blockSizes:r.blocksizes,mode:r.mode,mtime:r.mtime?{secs:r.mtime.Seconds,nsecs:r.mtime.FractionalNanoseconds}:undefined});i._originalMode=r.mode||0;return i}constructor(e={type:"file"}){const{type:t,data:r,blockSizes:i,hashType:n,fanout:s,mtime:a,mode:o}=e;if(t&&!types.includes(t)){throw errCode(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE")}this.type=t||"file";this.data=r;this.hashType=n;this.fanout=s;this.blockSizes=i||[];this._originalMode=0;this.mode=parseMode(o);if(a){this.mtime=parseMtime(a);if(this.mtime&&!this.mtime.nsecs){this.mtime.nsecs=0}}}set mode(e){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const t=parseMode(e);if(t!==undefined){this._mode=t}}get mode(){return this._mode}isDirectory(){return Boolean(this.type&&dirTypes.includes(this.type))}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory()){return 0}let e=0;this.blockSizes.forEach((t=>{e+=t}));if(this.data){e+=this.data.length}return e}marshal(){let e;switch(this.type){case"raw":e=PBData.DataType.Raw;break;case"directory":e=PBData.DataType.Directory;break;case"file":e=PBData.DataType.File;break;case"metadata":e=PBData.DataType.Metadata;break;case"symlink":e=PBData.DataType.Symlink;break;case"hamt-sharded-directory":e=PBData.DataType.HAMTShard;break;default:throw errCode(new Error("Type: "+e+" is not valid"),"ERR_INVALID_TYPE")}let t=this.data;if(!this.data||!this.data.length){t=undefined}let r;if(this.mode!=null){r=this._originalMode&4294963200|(parseMode(this.mode)||0);if(r===DEFAULT_FILE_MODE&&!this.isDirectory()){r=undefined}if(r===DEFAULT_DIRECTORY_MODE&&this.isDirectory()){r=undefined}}let i;if(this.mtime!=null){const e=parseMtime(this.mtime);if(e){i={Seconds:e.secs,FractionalNanoseconds:e.nsecs};if(i.FractionalNanoseconds===0){delete i.FractionalNanoseconds}}}const n={Type:e,Data:t,filesize:this.isDirectory()?undefined:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:r,mtime:i};return PBData.encode(n).finish()}}var src$a={UnixFS:Data,parseMode,parseMtime};var encode_1$4=encode$5;var MSB$6=128,REST$6=127,MSBALL$4=~REST$6,INT$4=Math.pow(2,31);function encode$5(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER){encode$5.bytes=0;throw new RangeError("Could not encode varint")}t=t||[];r=r||0;var i=r;while(e>=INT$4){t[r++]=e&255|MSB$6;e/=128}while(e&MSBALL$4){t[r++]=e&255|MSB$6;e>>>=7}t[r]=e|0;encode$5.bytes=r-i+1;return t}var decode$4=read$5;var MSB$5=128,REST$5=127;function read$5(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a||i>49){read$5.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$5)<<i:(s&REST$5)*Math.pow(2,i);i+=7}while(s>=MSB$5);read$5.bytes=n-t;return r}var N1$4=Math.pow(2,7);var N2$4=Math.pow(2,14);var N3$4=Math.pow(2,21);var N4$4=Math.pow(2,28);var N5$4=Math.pow(2,35);var N6$4=Math.pow(2,42);var N7$4=Math.pow(2,49);var N8$4=Math.pow(2,56);var N9$4=Math.pow(2,63);var length$4=function(e){return e<N1$4?1:e<N2$4?2:e<N3$4?3:e<N4$4?4:e<N5$4?5:e<N6$4?6:e<N7$4?7:e<N8$4?8:e<N9$4?9:10};var varint$8={encode:encode_1$4,decode:decode$4,encodingLength:length$4};var asUint8array$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function i(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=i}));var concat_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$2.allocUnsafe(t);let i=0;for(const t of e){r.set(t,i);i+=t.length}return asUint8array$2.asUint8Array(r)}t.concat=r}));function base$7(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$9=base$7;var _brrp__multiformats_scope_baseX$3=src$9;var baseX$3=_brrp__multiformats_scope_baseX$3;var bytes$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX$3(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes$3.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$7=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.from({prefix:"\0",name:"identity",encode:e=>bytes$3.toString(e),decode:e=>bytes$3.fromString(e)});t.identity=r}));var base2_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base$6.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base$6.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base$6.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base$6.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base$6.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base$6.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base$6.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base$6.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base$6.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base$6.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base$6.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$6.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base$6.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base$6.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base$6.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base$6.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$3=encode$4;var MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$4(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$3){t[r++]=e&255|MSB$4;e/=128}while(e&MSBALL$3){t[r++]=e&255|MSB$4;e>>>=7}t[r]=e|0;encode$4.bytes=r-i+1;return t}var decode$3=read$4;var MSB$1$3=128,REST$1$3=127;function read$4(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$4.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1$3)<<i:(s&REST$1$3)*Math.pow(2,i);i+=7}while(s>=MSB$1$3);read$4.bytes=n-t;return r}var N1$3=Math.pow(2,7);var N2$3=Math.pow(2,14);var N3$3=Math.pow(2,21);var N4$3=Math.pow(2,28);var N5$3=Math.pow(2,35);var N6$3=Math.pow(2,42);var N7$3=Math.pow(2,49);var N8$3=Math.pow(2,56);var N9$3=Math.pow(2,63);var length$3=function(e){return e<N1$3?1:e<N2$3?2:e<N3$3?3:e<N4$3?4:e<N5$3?5:e<N6$3?6:e<N7$3?7:e<N8$3?8:e<N9$3?9:10};var varint$7={encode:encode_1$3,decode:decode$3,encodingLength:length$3};var _brrp_varint$3=varint$7;var varint$1$4=_brrp_varint$3;var varint_1$3=varint$1$4;var varint$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1$3.decode(e,t);return[r,varint_1$3.decode.bytes]};const i=(e,t,r=0)=>{varint_1$3.encode(e,t,r);return t};const n=e=>varint_1$3.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint$6.encodingLength(e);const n=i+varint$6.encodingLength(r);const a=new Uint8Array(n+r);varint$6.encodeTo(e,a,0);varint$6.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes$3.coerce(e);const[r,i]=varint$6.decode(t);const[n,a]=varint$6.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$3.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$3.create(this.code,t):t.then((e=>digest$3.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher$3.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher$3.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1$6=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes$3.coerce;const s=e=>digest$3.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes$3.coerce(e);const s=e=>bytes$3.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest$3.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$3.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58$3.base58btc.encoder);default:return s(t,i,e||base32_1$3.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest$3.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes$3.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest$3.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint$6.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$3.base58btc;return[base58$3.base58btc.prefix,r.decode(`${base58$3.base58btc.prefix}${e}`)]}case base58$3.base58btc.prefix:{const r=t||base58$3.base58btc;return[base58$3.base58btc.prefix,r.decode(e)]}case base32_1$3.base32.prefix:{const r=t||base32_1$3.base32;return[base32_1$3.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58$3.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint$6.encodingLength(e);const n=i+varint$6.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint$6.encodeTo(e,s,0);varint$6.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$5.CID;t.varint=varint$6;t.bytes=bytes$3;t.hasher=hasher$3;t.digest=digest$3}));var basics$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$7,...base2_1$3,...base8_1$3,...base10_1$3,...base16_1$3,...base32_1$3,...base36_1$3,...base58$3,...base64_1$3,...base256emoji_1$3};const i={...sha2Browser$3,...identity_1$6};const n={raw:raw$3,json:json$3};t.CID=cid$5.CID;t.hasher=hasher$3;t.digest=digest$3;t.varint=varint$6;t.bytes=bytes$3;t.bases=r;t.codecs=n;t.hashes=i}));function createCodec$3(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string$3=createCodec$3("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$3=createCodec$3("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$2.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$3={utf8:string$3,"utf-8":string$3,hex:basics$3.bases.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3,...basics$3.bases};var bases$3=BASES$3;var toString_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$3[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var fromString_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$3[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array$2.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const{toString:uint8ArrayToString$1}=toString_1$2;const{fromString:uint8ArrayFromString$1}=fromString_1$2;var util$2={numberToUint8Array,uint8ArrayToNumber,varintUint8ArrayEncode,varintEncode:varintEncode$1};function uint8ArrayToNumber(e){return parseInt(uint8ArrayToString$1(e,"base16"),16)}function numberToUint8Array(e){let t=e.toString(16);if(t.length%2===1){t="0"+t}return uint8ArrayFromString$1(t,"base16")}function varintUint8ArrayEncode(e){return Uint8Array.from(varint$8.encode(uint8ArrayToNumber(e)))}function varintEncode$1(e){return Uint8Array.from(varint$8.encode(e))}const baseTable$1=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"eth-receipt-log-trie":153,"eth-reciept-log":154,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"caip-50":202,streamid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,noise:454,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,"swhid-1-snp":496,json:512,messagepack:513,"libp2p-peer-record":769,"libp2p-relay-rsvp":770,"car-index-sorted":1024,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,"secp256k1-priv":4865,"x25519-priv":4866,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056,"arweave-ns":11704592});var generatedTable={baseTable:baseTable$1};const{baseTable}=generatedTable;const varintEncode=util$2.varintEncode;const nameToVarint$1={};const constantToCode$1={};const codeToName$1={};for(const e in baseTable){const t=e;const r=baseTable[t];nameToVarint$1[t]=varintEncode(r);const i=t.toUpperCase().replace(/-/g,"_");constantToCode$1[i]=r;if(!codeToName$1[r]){codeToName$1[r]=t}}Object.freeze(nameToVarint$1);Object.freeze(constantToCode$1);Object.freeze(codeToName$1);const nameToCode$1=Object.freeze(baseTable);var maps={nameToVarint:nameToVarint$1,constantToCode:constantToCode$1,nameToCode:nameToCode$1,codeToName:codeToName$1};const{concat:uint8ArrayConcat$2}=concat_1$2;const{nameToVarint,constantToCode,nameToCode,codeToName}=maps;function addPrefix(e,t){let r;if(e instanceof Uint8Array){r=util$2.varintUint8ArrayEncode(e)}else{if(nameToVarint[e]){r=nameToVarint[e]}else{throw new Error("multicodec not recognized")}}return uint8ArrayConcat$2([r,t],r.length+t.length)}function rmPrefix(e){varint$8.decode(e);return e.slice(varint$8.decode.bytes)}function getNameFromData(e){const t=varint$8.decode(e);const r=codeToName[t];if(r===undefined){throw new Error(`Code "${t}" not found`)}return r}function getNameFromCode(e){return codeToName[e]}function getCodeFromName(e){const t=nameToCode[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getCodeFromData(e){return varint$8.decode(e)}function getVarintFromName(e){const t=nameToVarint[e];if(t===undefined){throw new Error(`Codec "${e}" not found`)}return t}function getVarintFromCode(e){return util$2.varintEncode(e)}function getCodec(e){return getNameFromData(e)}function getName(e){return getNameFromCode(e)}function getNumber(e){return getCodeFromName(e)}function getCode(e){return getCodeFromData(e)}function getCodeVarint(e){return getVarintFromName(e)}function getVarint(e){return Array.from(getVarintFromCode(e))}var src$8={addPrefix,rmPrefix,getNameFromData,getNameFromCode,getCodeFromName,getCodeFromData,getVarintFromName,getVarintFromCode,getCodec,getName,getNumber,getCode,getCodeVarint,getVarint,...constantToCode,nameToVarint,nameToCode,codeToName};const CIDUtil={checkCIDComponents:function(e){if(e==null){return"null values are not valid CIDs"}if(!(e.version===0||e.version===1)){return"Invalid version, must be a number equal to 1 or 0"}if(typeof e.codec!=="string"){return"codec must be string"}if(e.version===0){if(e.codec!=="dag-pb"){return"codec must be 'dag-pb' for CIDv0"}if(e.multibaseName!=="base58btc"){return"multibaseName must be 'base58btc' for CIDv0"}}if(!(e.multihash instanceof Uint8Array)){return"multihash must be a Uint8Array"}try{src$d.validate(e.multihash)}catch(e){let t=e.message;if(!t){t="Multihash validation failed"}return t}}};var cidUtil=CIDUtil;var asUint8array$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array$1.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function i(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array$1.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=i}));var concat_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1$1.allocUnsafe(t);let i=0;for(const t of e){r.set(t,i);i+=t.length}return asUint8array$1.asUint8Array(r)}t.concat=r}));function base$5(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$7=base$5;var _brrp__multiformats_scope_baseX$2=src$7;var baseX$2=_brrp__multiformats_scope_baseX$2;var bytes$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX$2(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes$2.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$5=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.from({prefix:"\0",name:"identity",encode:e=>bytes$2.toString(e),decode:e=>bytes$2.fromString(e)});t.identity=r}));var base2_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base$4.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base$4.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base$4.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base$4.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base$4.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base$4.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base$4.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base$4.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base$4.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base$4.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base$4.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$4.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base$4.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base$4.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base$4.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base$4.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$2=encode$3;var MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$3(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$2){t[r++]=e&255|MSB$3;e/=128}while(e&MSBALL$2){t[r++]=e&255|MSB$3;e>>>=7}t[r]=e|0;encode$3.bytes=r-i+1;return t}var decode$2=read$3;var MSB$1$2=128,REST$1$2=127;function read$3(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$3.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1$2)<<i:(s&REST$1$2)*Math.pow(2,i);i+=7}while(s>=MSB$1$2);read$3.bytes=n-t;return r}var N1$2=Math.pow(2,7);var N2$2=Math.pow(2,14);var N3$2=Math.pow(2,21);var N4$2=Math.pow(2,28);var N5$2=Math.pow(2,35);var N6$2=Math.pow(2,42);var N7$2=Math.pow(2,49);var N8$2=Math.pow(2,56);var N9$2=Math.pow(2,63);var length$2=function(e){return e<N1$2?1:e<N2$2?2:e<N3$2?3:e<N4$2?4:e<N5$2?5:e<N6$2?6:e<N7$2?7:e<N8$2?8:e<N9$2?9:10};var varint$5={encode:encode_1$2,decode:decode$2,encodingLength:length$2};var _brrp_varint$2=varint$5;var varint$1$3=_brrp_varint$2;var varint_1$2=varint$1$3;var varint$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1$2.decode(e,t);return[r,varint_1$2.decode.bytes]};const i=(e,t,r=0)=>{varint_1$2.encode(e,t,r);return t};const n=e=>varint_1$2.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint$4.encodingLength(e);const n=i+varint$4.encodingLength(r);const a=new Uint8Array(n+r);varint$4.encodeTo(e,a,0);varint$4.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes$2.coerce(e);const[r,i]=varint$4.decode(t);const[n,a]=varint$4.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$2.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$2.create(this.code,t):t.then((e=>digest$2.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher$2.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher$2.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes$2.coerce;const s=e=>digest$2.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes$2.coerce(e);const s=e=>bytes$2.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid$4=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest$2.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$2.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58$2.base58btc.encoder);default:return s(t,i,e||base32_1$2.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest$2.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes$2.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest$2.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint$4.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$2.base58btc;return[base58$2.base58btc.prefix,r.decode(`${base58$2.base58btc.prefix}${e}`)]}case base58$2.base58btc.prefix:{const r=t||base58$2.base58btc;return[base58$2.base58btc.prefix,r.decode(e)]}case base32_1$2.base32.prefix:{const r=t||base32_1$2.base32;return[base32_1$2.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58$2.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint$4.encodingLength(e);const n=i+varint$4.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint$4.encodeTo(e,s,0);varint$4.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$4.CID;t.varint=varint$4;t.bytes=bytes$2;t.hasher=hasher$2;t.digest=digest$2}));var basics$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$5,...base2_1$2,...base8_1$2,...base10_1$2,...base16_1$2,...base32_1$2,...base36_1$2,...base58$2,...base64_1$2,...base256emoji_1$2};const i={...sha2Browser$2,...identity_1$4};const n={raw:raw$2,json:json$2};t.CID=cid$4.CID;t.hasher=hasher$2;t.digest=digest$2;t.varint=varint$4;t.bytes=bytes$2;t.bases=r;t.codecs=n;t.hashes=i}));function createCodec$2(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string$2=createCodec$2("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$2=createCodec$2("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1$1.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$2={utf8:string$2,"utf-8":string$2,hex:basics$2.bases.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...basics$2.bases};var bases$2=BASES$2;var toString_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases$2[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}return r.encoder.encode(e).substring(1)}t.toString=r}));var equals_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}t.equals=r}));const{concat:uint8ArrayConcat$1}=concat_1$1;const{toString:uint8ArrayToString}=toString_1$1;const{equals:uint8ArrayEquals}=equals_1$1;const codecs=src$8.nameToCode;const codecInts=Object.keys(codecs).reduce(((e,t)=>{e[codecs[t]]=t;return e}),{});const symbol$1=Symbol.for("@ipld/js-cid/CID");class CID{constructor(e,t,r,i){Object.defineProperty(this,symbol$1,{value:true});if(CID.isCID(e)){const t=e;this.version=t.version;this.codec=t.codec;this.multihash=t.multihash;this.multibaseName=t.multibaseName||(t.version===0?"base58btc":"base32");return}if(typeof e==="string"){const t=src$f.isEncoded(e);if(t){const r=src$f.decode(e);this.version=parseInt(r[0].toString(),16);this.codec=src$8.getCodec(r.slice(1));this.multihash=src$8.rmPrefix(r.slice(1));this.multibaseName=t}else{this.version=0;this.codec="dag-pb";this.multihash=src$d.fromB58String(e);this.multibaseName="base58btc"}CID.validateCID(this);Object.defineProperty(this,"string",{value:e});return}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(t===1){const r=e;this.version=t;this.codec=src$8.getCodec(r.slice(1));this.multihash=src$8.rmPrefix(r.slice(1));this.multibaseName="base32"}else{this.version=0;this.codec="dag-pb";this.multihash=e;this.multibaseName="base58btc"}CID.validateCID(this);return}this.version=e;if(typeof t==="number"){t=codecInts[t]}this.codec=t;this.multihash=r;this.multibaseName=i||(e===0?"base58btc":"base32");CID.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(this.version===0){e=this.multihash}else if(this.version===1){const t=src$8.getCodeVarint(this.codec);e=uint8ArrayConcat$1([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}else{throw new Error("unsupported version")}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=src$8.getCodeVarint(this.codec);const t=src$d.prefix(this.multihash);const r=uint8ArrayConcat$1([[this.version],e,t],1+e.byteLength+t.byteLength);return r}get code(){return codecs[this.codec]}toV0(){if(this.codec!=="dag-pb"){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}const{name:e,length:t}=src$d.decode(this.multihash);if(e!=="sha2-256"){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}if(t!==32){throw new Error("Cannot convert non 32 byte multihash CID to CIDv0")}return new CID(0,this.codec,this.multihash)}toV1(){return new CID(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&this.string.length!==0&&e===this.multibaseName){return this.string}let t;if(this.version===0){if(e!=="base58btc"){throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()")}t=src$d.toB58String(this.multihash)}else if(this.version===1){t=uint8ArrayToString(src$f.encode(e,this.bytes))}else{throw new Error("unsupported version")}if(e===this.multibaseName){Object.defineProperty(this,"string",{value:t})}return t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&uint8ArrayEquals(this.multihash,e.multihash)}static validateCID(e){const t=cidUtil.checkCIDComponents(e);if(t){throw new Error(t)}}static isCID(e){return e instanceof CID||Boolean(e&&e[symbol$1])}}CID.codecs=codecs;var src$6=CID;const persist=async(e,t,r)=>{if(!r.codec){r.codec="dag-pb"}if(!r.cidVersion){r.cidVersion=0}if(!r.hashAlg){r.hashAlg="sha2-256"}if(r.hashAlg!=="sha2-256"){r.cidVersion=1}const i=await src$b(e,r.hashAlg);const n=new src$6(r.cidVersion,r.codec,i);if(!r.onlyHash){await t.put(e,{pin:r.pin,preload:r.preload,timeout:r.timeout,cid:n})}return n};var persist_1=persist;var $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util;var $root=minimal.roots["default"]||(minimal.roots["default"]={});$root.PBLink=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Hash=$util.newBuffer([]);e.prototype.Name="";e.prototype.Tsize=$util.Long?$util.Long.fromBits(0,0,true):0;e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Hash!=null&&Object.hasOwnProperty.call(t,"Hash"))r.uint32(10).bytes(t.Hash);if(t.Name!=null&&Object.hasOwnProperty.call(t,"Name"))r.uint32(18).string(t.Name);if(t.Tsize!=null&&Object.hasOwnProperty.call(t,"Tsize"))r.uint32(24).uint64(t.Tsize);return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var i=r===undefined?t.len:t.pos+r,n=new $root.PBLink;while(t.pos<i){var s=t.uint32();switch(s>>>3){case 1:n.Hash=t.bytes();break;case 2:n.Name=t.string();break;case 3:n.Tsize=t.uint64();break;default:t.skipType(s&7);break}}return n};e.fromObject=function e(t){if(t instanceof $root.PBLink)return t;var r=new $root.PBLink;if(t.Hash!=null){if(typeof t.Hash==="string")$util.base64.decode(t.Hash,r.Hash=$util.newBuffer($util.base64.length(t.Hash)),0);else if(t.Hash.length)r.Hash=t.Hash}if(t.Name!=null){r.Name=String(t.Name)}if(t.Tsize!=null){if($util.Long)(r.Tsize=$util.Long.fromValue(t.Tsize)).unsigned=true;else if(typeof t.Tsize==="string")r.Tsize=parseInt(t.Tsize,10);else if(typeof t.Tsize==="number")r.Tsize=t.Tsize;else if(typeof t.Tsize==="object")r.Tsize=new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true)}return r};e.toObject=function e(t,r){if(!r)r={};var i={};if(r.defaults){if(r.bytes===String)i.Hash="";else{i.Hash=[];if(r.bytes!==Array)i.Hash=$util.newBuffer(i.Hash)}i.Name="";if($util.Long){var n=new $util.Long(0,0,true);i.Tsize=r.longs===String?n.toString():r.longs===Number?n.toNumber():n}else i.Tsize=r.longs===String?"0":0}if(t.Hash!=null&&t.hasOwnProperty("Hash")){i.Hash=r.bytes===String?$util.base64.encode(t.Hash,0,t.Hash.length):r.bytes===Array?Array.prototype.slice.call(t.Hash):t.Hash}if(t.Name!=null&&t.hasOwnProperty("Name")){i.Name=t.Name}if(t.Tsize!=null&&t.hasOwnProperty("Tsize")){if(typeof t.Tsize==="number")i.Tsize=r.longs===String?String(t.Tsize):t.Tsize;else i.Tsize=r.longs===String?$util.Long.prototype.toString.call(t.Tsize):r.longs===Number?new $util.LongBits(t.Tsize.low>>>0,t.Tsize.high>>>0).toNumber(true):t.Tsize}return i};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();$root.PBNode=function(){function e(e){this.Links=[];if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)if(e[t[r]]!=null)this[t[r]]=e[t[r]]}e.prototype.Links=$util.emptyArray;e.prototype.Data=$util.newBuffer([]);e.encode=function e(t,r){if(!r)r=$Writer.create();if(t.Data!=null&&Object.hasOwnProperty.call(t,"Data"))r.uint32(10).bytes(t.Data);if(t.Links!=null&&t.Links.length){for(var i=0;i<t.Links.length;++i)$root.PBLink.encode(t.Links[i],r.uint32(18).fork()).ldelim()}return r};e.decode=function e(t,r){if(!(t instanceof $Reader))t=$Reader.create(t);var i=r===undefined?t.len:t.pos+r,n=new $root.PBNode;while(t.pos<i){var s=t.uint32();switch(s>>>3){case 2:if(!(n.Links&&n.Links.length))n.Links=[];n.Links.push($root.PBLink.decode(t,t.uint32()));break;case 1:n.Data=t.bytes();break;default:t.skipType(s&7);break}}return n};e.fromObject=function e(t){if(t instanceof $root.PBNode)return t;var r=new $root.PBNode;if(t.Links){if(!Array.isArray(t.Links))throw TypeError(".PBNode.Links: array expected");r.Links=[];for(var i=0;i<t.Links.length;++i){if(typeof t.Links[i]!=="object")throw TypeError(".PBNode.Links: object expected");r.Links[i]=$root.PBLink.fromObject(t.Links[i])}}if(t.Data!=null){if(typeof t.Data==="string")$util.base64.decode(t.Data,r.Data=$util.newBuffer($util.base64.length(t.Data)),0);else if(t.Data.length)r.Data=t.Data}return r};e.toObject=function e(t,r){if(!r)r={};var i={};if(r.arrays||r.defaults){i.Links=[]}if(r.defaults){if(r.bytes===String)i.Data="";else{i.Data=[];if(r.bytes!==Array)i.Data=$util.newBuffer(i.Data)}}if(t.Data!=null&&t.hasOwnProperty("Data")){i.Data=r.bytes===String?$util.base64.encode(t.Data,0,t.Data.length):r.bytes===Array?Array.prototype.slice.call(t.Data):t.Data}if(t.Links&&t.Links.length){i.Links=[];for(var n=0;n<t.Links.length;++n){i.Links[n]=$root.PBLink.toObject(t.Links[n],r)}}return i};e.prototype.toJSON=function e(){return this.constructor.toObject(this,minimal.util.toJSONOptions)};return e}();var dag=$root;function base$3(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$5=base$3;var _brrp__multiformats_scope_baseX$1=src$5;var baseX$1=_brrp__multiformats_scope_baseX$1;var bytes$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX$1(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes$1.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.from({prefix:"\0",name:"identity",encode:e=>bytes$1.toString(e),decode:e=>bytes$1.fromString(e)});t.identity=r}));var base2_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base$2.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base$2.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base$2.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base$2.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base$2.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base$2.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base$2.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base$2.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base$2.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base$2.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base$2.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base$2.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base$2.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base$2.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base$2.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base$2.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1$1=encode$2;var MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$2(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT$1){t[r++]=e&255|MSB$2;e/=128}while(e&MSBALL$1){t[r++]=e&255|MSB$2;e>>>=7}t[r]=e|0;encode$2.bytes=r-i+1;return t}var decode$1=read$2;var MSB$1$1=128,REST$1$1=127;function read$2(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read$2.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1$1)<<i:(s&REST$1$1)*Math.pow(2,i);i+=7}while(s>=MSB$1$1);read$2.bytes=n-t;return r}var N1$1=Math.pow(2,7);var N2$1=Math.pow(2,14);var N3$1=Math.pow(2,21);var N4$1=Math.pow(2,28);var N5$1=Math.pow(2,35);var N6$1=Math.pow(2,42);var N7$1=Math.pow(2,49);var N8$1=Math.pow(2,56);var N9$1=Math.pow(2,63);var length$1=function(e){return e<N1$1?1:e<N2$1?2:e<N3$1?3:e<N4$1?4:e<N5$1?5:e<N6$1?6:e<N7$1?7:e<N8$1?8:e<N9$1?9:10};var varint$3={encode:encode_1$1,decode:decode$1,encodingLength:length$1};var _brrp_varint$1=varint$3;var varint$1$2=_brrp_varint$1;var varint_1$1=varint$1$2;var varint$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1$1.decode(e,t);return[r,varint_1$1.decode.bytes]};const i=(e,t,r=0)=>{varint_1$1.encode(e,t,r);return t};const n=e=>varint_1$1.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint$2.encodingLength(e);const n=i+varint$2.encodingLength(r);const a=new Uint8Array(n+r);varint$2.encodeTo(e,a,0);varint$2.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes$1.coerce(e);const[r,i]=varint$2.decode(t);const[n,a]=varint$2.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes$1.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest$1.create(this.code,t):t.then((e=>digest$1.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher$1.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher$1.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1$2=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes$1.coerce;const s=e=>digest$1.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes$1.coerce(e);const s=e=>bytes$1.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid$3=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest$1.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest$1.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58$1.base58btc.encoder);default:return s(t,i,e||base32_1$1.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest$1.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes$1.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest$1.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint$2.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58$1.base58btc;return[base58$1.base58btc.prefix,r.decode(`${base58$1.base58btc.prefix}${e}`)]}case base58$1.base58btc.prefix:{const r=t||base58$1.base58btc;return[base58$1.base58btc.prefix,r.decode(e)]}case base32_1$1.base32.prefix:{const r=t||base32_1$1.base32;return[base32_1$1.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58$1.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint$2.encodingLength(e);const n=i+varint$2.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint$2.encodeTo(e,s,0);varint$2.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid$3.CID;t.varint=varint$2;t.bytes=bytes$1;t.hasher=hasher$1;t.digest=digest$1}));var basics$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$3,...base2_1$1,...base8_1$1,...base10_1$1,...base16_1$1,...base32_1$1,...base36_1$1,...base58$1,...base64_1$1,...base256emoji_1$1};const i={...sha2Browser$1,...identity_1$2};const n={raw:raw$1,json:json$1};t.CID=cid$3.CID;t.hasher=hasher$1;t.digest=digest$1;t.varint=varint$2;t.bytes=bytes$1;t.bases=r;t.codecs=n;t.hashes=i}));const{bases:bases$1}=basics$1;function createCodec$1(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string$1=createCodec$1("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii$1=createCodec$1("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};var bases_1=BASES$1;function fromString(e,t="utf8"){const r=bases_1[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.decoder.decode(`${r.prefix}${e}`)}var fromString_1$1=fromString;class DAGLink$3{constructor(e,t,r){if(!r){throw new Error("A link requires a cid to point to")}this.Name=e||"";this.Tsize=t;this.Hash=new src$6(r);Object.defineProperties(this,{_nameBuf:{value:null,writable:true,enumerable:false}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){if(!this._json){this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})}return Object.assign({},this._json)}get nameAsBuffer(){if(this._nameBuf!=null){return this._nameBuf}this._nameBuf=fromString_1$1(this.Name);return this._nameBuf}}var dagLink=DAGLink$3;var stable=createCommonjsModule$1((function(e,t){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
(function(t,r){e.exports=r()})(commonjsGlobal,(function(){var e=function(e,r){return t(e.slice(),r)};e.inplace=function(e,i){var n=t(e,i);if(n!==e){r(n,null,e.length,e)}return e};function t(e,t){if(typeof t!=="function"){t=function(e,t){return String(e).localeCompare(t)}}var i=e.length;if(i<=1){return e}var n=new Array(i);for(var s=1;s<i;s*=2){r(e,t,s,n);var a=e;e=n;n=a}return e}var r=function(e,t,r,i){var n=e.length;var s=0;var a=r*2;var o,f,c;var u,h;for(o=0;o<n;o+=a){f=o+r;c=f+r;if(f>n)f=n;if(c>n)c=n;u=o;h=f;while(true){if(u<f&&h<c){if(t(e[u],e[h])<=0){i[s++]=e[u++]}else{i[s++]=e[h++]}}else if(u<f){i[s++]=e[u++]}else if(h<c){i[s++]=e[h++]}else{break}}}};return e}))}));function compare(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r]){return-1}if(e[r]>t[r]){return 1}}if(e.byteLength>t.byteLength){return 1}if(e.byteLength<t.byteLength){return-1}return 0}var compare_1=compare;const linkSort=(e,t)=>{const r=e.nameAsBuffer;const i=t.nameAsBuffer;return compare_1(r,i)};const sortLinks=e=>{stable.inplace(e,linkSort)};var sortLinks_1=sortLinks;function createDagLinkFromB58EncodedHash$2(e){return new dagLink(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}var util$1={createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$2};const{PBLink}=dag;const{createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$1}=util$1;const toProtoBuf=e=>{const t={};if(e.Data&&e.Data.byteLength>0){t.Data=e.Data}else{t.Data=null}if(e.Links&&e.Links.length>0){t.Links=e.Links.map((e=>({Hash:e.Hash.bytes,Name:e.Name,Tsize:e.Tsize})))}else{t.Links=null}return t};const serializeDAGNode$2=e=>encode$1(toProtoBuf(e));const serializeDAGNodeLike$1=(e,t=[])=>{const r={Data:e,Links:t.map((e=>createDagLinkFromB58EncodedHash$1(e)))};return encode$1(toProtoBuf(r))};var serialize$1={serializeDAGNode:serializeDAGNode$2,serializeDAGNodeLike:serializeDAGNodeLike$1};function encode$1(e){const t=minimal.Writer.create();if(e.Links!=null){for(let r=0;r<e.Links.length;r++){PBLink.encode(e.Links[r],t.uint32(18).fork()).ldelim()}}if(e.Data!=null){t.uint32(10).bytes(e.Data)}return t.finish()}const{multihash}=src$b;const codec=src$8.DAG_PB;const defaultHashAlg=multihash.names["sha2-256"];const cid$2=async(e,t={})=>{const r={cidVersion:t.cidVersion==null?1:t.cidVersion,hashAlg:t.hashAlg==null?defaultHashAlg:t.hashAlg};const i=multihash.codes[r.hashAlg];const n=await src$b(e,i);const s=src$8.getNameFromCode(codec);const a=new src$6(r.cidVersion,s,n);return a};var genCid={codec,defaultHashAlg,cid:cid$2};const toDAGLink=async(e,t={})=>{const r=e.serialize();const i=await genCid.cid(r,t);return new dagLink(t.name||"",e.size,i)};var toDagLink=toDAGLink;const asDAGLink=e=>{if(e instanceof dagLink){return e}if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e)){throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.")}return new dagLink(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)};const addLink=(e,t)=>{const r=asDAGLink(t);e.Links.push(r);sortLinks_1(e.Links)};var addLink_1=addLink;function equals(e,t){if(e===t){return true}if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true}var equals_1=equals;const rmLink=(e,t)=>{let r=null;if(typeof t==="string"){r=e=>e.Name===t}else if(t instanceof Uint8Array){r=e=>equals_1(e.Hash.bytes,t)}else if(src$6.isCID(t)){r=e=>equals_1(e.Hash.bytes,t.bytes)}if(r){const t=e.Links;let i=0;while(i<t.length){const e=t[i];if(r(e)){t.splice(i,1)}else{i++}}}else{throw new Error("second arg needs to be a name or CID")}};var rmLink_1=rmLink;function toString(e,t="utf8"){const r=bases_1[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}return r.encoder.encode(e).substring(1)}var toString_1=toString;const{createDagLinkFromB58EncodedHash}=util$1;const{serializeDAGNode:serializeDAGNode$1}=serialize$1;class DAGNode$5{constructor(e,t=[],r=null){if(!e){e=new Uint8Array(0)}if(typeof e==="string"){e=fromString_1$1(e)}if(!(e instanceof Uint8Array)){throw new Error("Passed 'data' is not a Uint8Array or a String!")}if(r!==null&&typeof r!=="number"){throw new Error("Passed 'serializedSize' must be a number!")}const i=t.map((e=>e instanceof dagLink?e:createDagLinkFromB58EncodedHash(e)));sortLinks_1(i);this.Data=e;this.Links=i;Object.defineProperties(this,{_serializedSize:{value:r,writable:true,enumerable:false},_size:{value:null,writable:true,enumerable:false}})}toJSON(){if(!this._json){this._json=Object.freeze({data:this.Data,links:this.Links.map((e=>e.toJSON())),size:this.size})}return Object.assign({},this._json)}toString(){return`DAGNode <data: "${toString_1(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null;this._size=null}addLink(e){this._invalidateCached();return addLink_1(this,e)}rmLink(e){this._invalidateCached();return rmLink_1(this,e)}toDAGLink(e){return toDagLink(this,e)}serialize(){const e=serializeDAGNode$1(this);this._serializedSize=e.length;return e}get size(){if(this._size==null){let e;if(e==null){this._serializedSize=this.serialize().length;e=this._serializedSize}this._size=this.Links.reduce(((e,t)=>e+t.Tsize),e)}return this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}}var dagNode=DAGNode$5;const{PBNode}=dag;const{serializeDAGNode,serializeDAGNodeLike}=serialize$1;const cid$1=(e,t)=>genCid.cid(e,t);const serialize=e=>{if(e instanceof dagNode){return serializeDAGNode(e)}else{return serializeDAGNodeLike(e.Data,e.Links)}};const deserialize=e=>{const t=PBNode.decode(e);const r=PBNode.toObject(t,{defaults:false,arrays:true,longs:Number,objects:false});const i=r.Links.map((e=>new dagLink(e.Name,e.Tsize,e.Hash)));const n=r.Data==null?new Uint8Array(0):r.Data;return new dagNode(n,i,e.byteLength)};var util={codec:genCid.codec,defaultHashAlg:genCid.defaultHashAlg,serialize,deserialize,cid:cid$1};var resolve=(e,t="/")=>{let r=util.deserialize(e);const i=t.split("/").filter(Boolean);while(i.length){const e=i.shift();if(r[e]===undefined){for(const t of r.Links){if(t.Name===e){return{value:t.Hash,remainderPath:i.join("/")}}}throw new Error(`Object has no property '${e}'`)}r=r[e];if(src$6.isCID(r)){return{value:r,remainderPath:i.join("/")}}}return{value:r,remainderPath:""}};var tree=function*(e){const t=util.deserialize(e);yield"Data";yield"Links";for(let e=0;e<t.Links.length;e++){yield`Links/${e}`;yield`Links/${e}/Name`;yield`Links/${e}/Tsize`;yield`Links/${e}/Hash`}};var resolver={resolve,tree};const format={DAGNode:dagNode,DAGLink:dagLink,resolver,util,codec:util.codec,defaultHashAlg:util.defaultHashAlg};var src$4=format;const{UnixFS:UnixFS$4}=src$a;const{DAGNode:DAGNode$4}=src$4;const dirBuilder=async(e,t,r)=>{const i=new UnixFS$4({type:"directory",mtime:e.mtime,mode:e.mode});const n=new DAGNode$4(i.marshal()).serialize();const s=await persist_1(n,t,r);const a=e.path;return{cid:s,path:a,unixfs:i,size:n.length}};var dir$1=dirBuilder;const all=async e=>{const t=[];for await(const r of e){t.push(r)}return t};var itAll=all;var flat=async function(e,t){return t(await itAll(e))};function balanced(e,t,r){return reduceToParents(e,t,r)}async function reduceToParents(e,t,r){const i=[];for await(const n of itBatch(e,r.maxChildrenPerNode)){i.push(await t(n))}if(i.length>1){return reduceToParents(i,t,r)}return i[0]}var balanced_1=balanced;var trickle=async function e(t,r,i){const n=new Root(i.layerRepeat);let s=0;let a=1;let o=n;for await(const e of itBatch(t,i.maxChildrenPerNode)){if(o.isFull()){if(o!==n){n.addChild(await o.reduce(r))}if(s&&s%i.layerRepeat===0){a++}o=new SubTree(a,i.layerRepeat,s);s++}o.append(e)}if(o&&o!==n){n.addChild(await o.reduce(r))}return n.reduce(r)};class SubTree{constructor(e,t,r=0){this.maxDepth=e;this.layerRepeat=t;this.currentDepth=1;this.iteration=r;this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:e,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data){return false}if(this.currentDepth<this.maxDepth&&this.node.maxChildren){this._addNextNodeToParent(this.node);return false}const e=this._findParent(this.node,this.currentDepth);if(e){this._addNextNodeToParent(e);return false}return true}_addNextNodeToParent(e){this.parent=e;const t={children:[],depth:e.depth+1,parent:e,maxDepth:this.maxDepth,maxChildren:Math.floor(e.children.length/this.layerRepeat)*this.layerRepeat};e.children.push(t);this.currentDepth=t.depth;this.node=t}append(e){this.node.data=e}reduce(e){return this._reduce(this.root,e)}async _reduce(e,t){let r=[];if(e.children.length){r=await Promise.all(e.children.filter((e=>e.data)).map((e=>this._reduce(e,t))))}return t((e.data||[]).concat(r))}_findParent(e,t){const r=e.parent;if(!r||r.depth===0){return}if(r.children.length===r.maxChildren||!r.maxChildren){return this._findParent(r,t)}return r}}class Root extends SubTree{constructor(e){super(0,e);this.root.depth=0;this.currentDepth=1}addChild(e){this.root.children.push(e)}reduce(e){return e((this.root.data||[]).concat(this.root.children))}}const{UnixFS:UnixFS$3}=src$a;const{DAGNode:DAGNode$3}=src$4;async function*bufferImporter(e,t,r){for await(let i of e.content){yield async()=>{r.progress(i.length,e.path);let n;const s={codec:"dag-pb",cidVersion:r.cidVersion,hashAlg:r.hashAlg,onlyHash:r.onlyHash};if(r.rawLeaves){s.codec="raw";s.cidVersion=1}else{n=new UnixFS$3({type:r.leafType,data:i,mtime:e.mtime,mode:e.mode});i=new DAGNode$3(n.marshal()).serialize()}return{cid:await persist_1(i,t,s),unixfs:n,size:i.length}}}}var bufferImporter_1=bufferImporter;const{UnixFS:UnixFS$2}=src$a;const{DAGNode:DAGNode$2,DAGLink:DAGLink$2}=src$4;const mh=src$b.multihash;const dagBuilders={flat,balanced:balanced_1,trickle};async function*buildFileBatch(e,t,r){let i=-1;let n;let s;if(typeof r.bufferImporter==="function"){s=r.bufferImporter}else{s=bufferImporter_1}for await(const a of itParallelBatch(s(e,t,r),r.blockWriteConcurrency)){i++;if(i===0){n=a;continue}else if(i===1&&n){yield n;n=null}yield a}if(n){n.single=true;yield n}}const reduce=(e,t,r)=>{async function i(i){if(i.length===1&&i[0].single&&r.reduceSingleLeafToSelf){const n=i[0];if(n.cid.codec==="raw"&&(e.mtime!==undefined||e.mode!==undefined)){let{data:i}=await t.get(n.cid,r);n.unixfs=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode,data:i});const s=mh.decode(n.cid.multihash);i=new DAGNode$2(n.unixfs.marshal()).serialize();n.cid=await persist_1(i,t,{...r,codec:"dag-pb",hashAlg:s.name,cidVersion:r.cidVersion});n.size=i.length}return{cid:n.cid,path:e.path,unixfs:n.unixfs,size:n.size}}const n=new UnixFS$2({type:"file",mtime:e.mtime,mode:e.mode});const s=i.filter((e=>{if(e.cid.codec==="raw"&&e.size){return true}if(e.unixfs&&!e.unixfs.data&&e.unixfs.fileSize()){return true}return Boolean(e.unixfs&&e.unixfs.data&&e.unixfs.data.length)})).map((e=>{if(e.cid.codec==="raw"){n.addBlockSize(e.size);return new DAGLink$2("",e.size,e.cid)}if(!e.unixfs||!e.unixfs.data){n.addBlockSize(e.unixfs&&e.unixfs.fileSize()||0)}else{n.addBlockSize(e.unixfs.data.length)}return new DAGLink$2("",e.size,e.cid)}));const a=new DAGNode$2(n.marshal(),s);const o=a.serialize();const f=await persist_1(o,t,r);return{cid:f,path:e.path,unixfs:n,size:o.length+a.Links.reduce(((e,t)=>e+t.Tsize),0)}}return i};function fileBuilder(e,t,r){const i=dagBuilders[r.strategy];if(!i){throw errCode(new Error(`Unknown importer build strategy name: ${r.strategy}`),"ERR_BAD_STRATEGY")}return i(buildFileBatch(e,t,r),reduce(e,t,r),r)}var file=fileBuilder;var byteLength_1=byteLength;var toByteArray_1=toByteArray;var fromByteArray_1=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(e){var t=e.length;if(t%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var r=e.indexOf("=");if(r===-1)r=t;var i=r===t?0:4-r%4;return[r,i]}function byteLength(e){var t=getLens(e);var r=t[0];var i=t[1];return(r+i)*3/4-i}function _byteLength(e,t,r){return(t+r)*3/4-r}function toByteArray(e){var t;var r=getLens(e);var i=r[0];var n=r[1];var s=new Arr(_byteLength(e,i,n));var a=0;var o=n>0?i-4:i;var f;for(f=0;f<o;f+=4){t=revLookup[e.charCodeAt(f)]<<18|revLookup[e.charCodeAt(f+1)]<<12|revLookup[e.charCodeAt(f+2)]<<6|revLookup[e.charCodeAt(f+3)];s[a++]=t>>16&255;s[a++]=t>>8&255;s[a++]=t&255}if(n===2){t=revLookup[e.charCodeAt(f)]<<2|revLookup[e.charCodeAt(f+1)]>>4;s[a++]=t&255}if(n===1){t=revLookup[e.charCodeAt(f)]<<10|revLookup[e.charCodeAt(f+1)]<<4|revLookup[e.charCodeAt(f+2)]>>2;s[a++]=t>>8&255;s[a++]=t&255}return s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){var i;var n=[];for(var s=t;s<r;s+=3){i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255);n.push(tripletToBase64(i))}return n.join("")}function fromByteArray(e){var t;var r=e.length;var i=r%3;var n=[];var s=16383;for(var a=0,o=r-i;a<o;a+=s){n.push(encodeChunk(e,a,a+s>o?o:a+s))}if(i===1){t=e[r-1];n.push(lookup[t>>2]+lookup[t<<4&63]+"==")}else if(i===2){t=(e[r-2]<<8)+e[r-1];n.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")}return n.join("")}var base64Js={byteLength:byteLength_1,toByteArray:toByteArray_1,fromByteArray:fromByteArray_1};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var read$1=function(e,t,r,i,n){var s,a;var o=n*8-i-1;var f=(1<<o)-1;var c=f>>1;var u=-7;var h=r?n-1:0;var l=r?-1:1;var d=e[t+h];h+=l;s=d&(1<<-u)-1;d>>=-u;u+=o;for(;u>0;s=s*256+e[t+h],h+=l,u-=8){}a=s&(1<<-u)-1;s>>=-u;u+=i;for(;u>0;a=a*256+e[t+h],h+=l,u-=8){}if(s===0){s=1-c}else if(s===f){return a?NaN:(d?-1:1)*Infinity}else{a=a+Math.pow(2,i);s=s-c}return(d?-1:1)*a*Math.pow(2,s-i)};var write=function(e,t,r,i,n,s){var a,o,f;var c=s*8-n-1;var u=(1<<c)-1;var h=u>>1;var l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var d=i?0:s-1;var p=i?1:-1;var b=t<0||t===0&&1/t<0?1:0;t=Math.abs(t);if(isNaN(t)||t===Infinity){o=isNaN(t)?1:0;a=u}else{a=Math.floor(Math.log(t)/Math.LN2);if(t*(f=Math.pow(2,-a))<1){a--;f*=2}if(a+h>=1){t+=l/f}else{t+=l*Math.pow(2,1-h)}if(t*f>=2){a++;f/=2}if(a+h>=u){o=0;a=u}else if(a+h>=1){o=(t*f-1)*Math.pow(2,n);a=a+h}else{o=t*Math.pow(2,h-1)*Math.pow(2,n);a=0}}for(;n>=8;e[r+d]=o&255,d+=p,o/=256,n-=8){}a=a<<n|o;c+=n;for(;c>0;e[r+d]=a&255,d+=p,a/=256,c-=8){}e[r+d-p]|=b*128};var ieee754={read:read$1,write};var buffer=createCommonjsModule$1((function(e,t){const r=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;t.Buffer=a;t.SlowBuffer=v;t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i;a.TYPED_ARRAY_SUPPORT=n();if(!a.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function n(){try{const e=new Uint8Array(1);const t={foo:function(){return 42}};Object.setPrototypeOf(t,Uint8Array.prototype);Object.setPrototypeOf(e,t);return e.foo()===42}catch(e){return false}}Object.defineProperty(a.prototype,"parent",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(a.prototype,"offset",{enumerable:true,get:function(){if(!a.isBuffer(this))return undefined;return this.byteOffset}});function s(e){if(e>i){throw new RangeError('The value "'+e+'" is invalid for option "size"')}const t=new Uint8Array(e);Object.setPrototypeOf(t,a.prototype);return t}function a(e,t,r){if(typeof e==="number"){if(typeof t==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return u(e)}return o(e,t,r)}a.poolSize=8192;function o(e,t,r){if(typeof e==="string"){return h(e,t)}if(ArrayBuffer.isView(e)){return d(e)}if(e==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}if(ie(e,ArrayBuffer)||e&&ie(e.buffer,ArrayBuffer)){return p(e,t,r)}if(typeof SharedArrayBuffer!=="undefined"&&(ie(e,SharedArrayBuffer)||e&&ie(e.buffer,SharedArrayBuffer))){return p(e,t,r)}if(typeof e==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}const i=e.valueOf&&e.valueOf();if(i!=null&&i!==e){return a.from(i,t,r)}const n=b(e);if(n)return n;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]==="function"){return a.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof e)}a.from=function(e,t,r){return o(e,t,r)};Object.setPrototypeOf(a.prototype,Uint8Array.prototype);Object.setPrototypeOf(a,Uint8Array);function f(e){if(typeof e!=="number"){throw new TypeError('"size" argument must be of type number')}else if(e<0){throw new RangeError('The value "'+e+'" is invalid for option "size"')}}function c(e,t,r){f(e);if(e<=0){return s(e)}if(t!==undefined){return typeof r==="string"?s(e).fill(t,r):s(e).fill(t)}return s(e)}a.alloc=function(e,t,r){return c(e,t,r)};function u(e){f(e);return s(e<0?0:m(e)|0)}a.allocUnsafe=function(e){return u(e)};a.allocUnsafeSlow=function(e){return u(e)};function h(e,t){if(typeof t!=="string"||t===""){t="utf8"}if(!a.isEncoding(t)){throw new TypeError("Unknown encoding: "+t)}const r=y(e,t)|0;let i=s(r);const n=i.write(e,t);if(n!==r){i=i.slice(0,n)}return i}function l(e){const t=e.length<0?0:m(e.length)|0;const r=s(t);for(let i=0;i<t;i+=1){r[i]=e[i]&255}return r}function d(e){if(ie(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return l(e)}function p(e,t,r){if(t<0||e.byteLength<t){throw new RangeError('"offset" is outside of buffer bounds')}if(e.byteLength<t+(r||0)){throw new RangeError('"length" is outside of buffer bounds')}let i;if(t===undefined&&r===undefined){i=new Uint8Array(e)}else if(r===undefined){i=new Uint8Array(e,t)}else{i=new Uint8Array(e,t,r)}Object.setPrototypeOf(i,a.prototype);return i}function b(e){if(a.isBuffer(e)){const t=m(e.length)|0;const r=s(t);if(r.length===0){return r}e.copy(r,0,0,t);return r}if(e.length!==undefined){if(typeof e.length!=="number"||ne(e.length)){return s(0)}return l(e)}if(e.type==="Buffer"&&Array.isArray(e.data)){return l(e.data)}}function m(e){if(e>=i){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+i.toString(16)+" bytes")}return e|0}function v(e){if(+e!=e){e=0}return a.alloc(+e)}a.isBuffer=function e(t){return t!=null&&t._isBuffer===true&&t!==a.prototype};a.compare=function e(t,r){if(ie(t,Uint8Array))t=a.from(t,t.offset,t.byteLength);if(ie(r,Uint8Array))r=a.from(r,r.offset,r.byteLength);if(!a.isBuffer(t)||!a.isBuffer(r)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(t===r)return 0;let i=t.length;let n=r.length;for(let e=0,s=Math.min(i,n);e<s;++e){if(t[e]!==r[e]){i=t[e];n=r[e];break}}if(i<n)return-1;if(n<i)return 1;return 0};a.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};a.concat=function e(t,r){if(!Array.isArray(t)){throw new TypeError('"list" argument must be an Array of Buffers')}if(t.length===0){return a.alloc(0)}let i;if(r===undefined){r=0;for(i=0;i<t.length;++i){r+=t[i].length}}const n=a.allocUnsafe(r);let s=0;for(i=0;i<t.length;++i){let e=t[i];if(ie(e,Uint8Array)){if(s+e.length>n.length){if(!a.isBuffer(e))e=a.from(e);e.copy(n,s)}else{Uint8Array.prototype.set.call(n,e,s)}}else if(!a.isBuffer(e)){throw new TypeError('"list" argument must be an Array of Buffers')}else{e.copy(n,s)}s+=e.length}return n};function y(e,t){if(a.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||ie(e,ArrayBuffer)){return e.byteLength}if(typeof e!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof e)}const r=e.length;const i=arguments.length>2&&arguments[2]===true;if(!i&&r===0)return 0;let n=false;for(;;){switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return te(e).length;default:if(n){return i?-1:Q(e).length}t=(""+t).toLowerCase();n=true}}}a.byteLength=y;function w(e,t,r){let i=false;if(t===undefined||t<0){t=0}if(t>this.length){return""}if(r===undefined||r>this.length){r=this.length}if(r<=0){return""}r>>>=0;t>>>=0;if(r<=t){return""}if(!e)e="utf8";while(true){switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return M(this,t,r);case"latin1":case"binary":return k(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase();i=true}}}a.prototype._isBuffer=true;function A(e,t,r){const i=e[t];e[t]=e[r];e[r]=i}a.prototype.swap16=function e(){const t=this.length;if(t%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(let e=0;e<t;e+=2){A(this,e,e+1)}return this};a.prototype.swap32=function e(){const t=this.length;if(t%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(let e=0;e<t;e+=4){A(this,e,e+3);A(this,e+1,e+2)}return this};a.prototype.swap64=function e(){const t=this.length;if(t%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(let e=0;e<t;e+=8){A(this,e,e+7);A(this,e+1,e+6);A(this,e+2,e+5);A(this,e+3,e+4)}return this};a.prototype.toString=function e(){const t=this.length;if(t===0)return"";if(arguments.length===0)return I(this,0,t);return w.apply(this,arguments)};a.prototype.toLocaleString=a.prototype.toString;a.prototype.equals=function e(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(this===t)return true;return a.compare(this,t)===0};a.prototype.inspect=function e(){let r="";const i=t.INSPECT_MAX_BYTES;r=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim();if(this.length>i)r+=" ... ";return"<Buffer "+r+">"};if(r){a.prototype[r]=a.prototype.inspect}a.prototype.compare=function e(t,r,i,n,s){if(ie(t,Uint8Array)){t=a.from(t,t.offset,t.byteLength)}if(!a.isBuffer(t)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof t)}if(r===undefined){r=0}if(i===undefined){i=t?t.length:0}if(n===undefined){n=0}if(s===undefined){s=this.length}if(r<0||i>t.length||n<0||s>this.length){throw new RangeError("out of range index")}if(n>=s&&r>=i){return 0}if(n>=s){return-1}if(r>=i){return 1}r>>>=0;i>>>=0;n>>>=0;s>>>=0;if(this===t)return 0;let o=s-n;let f=i-r;const c=Math.min(o,f);const u=this.slice(n,s);const h=t.slice(r,i);for(let e=0;e<c;++e){if(u[e]!==h[e]){o=u[e];f=h[e];break}}if(o<f)return-1;if(f<o)return 1;return 0};function g(e,t,r,i,n){if(e.length===0)return-1;if(typeof r==="string"){i=r;r=0}else if(r>2147483647){r=2147483647}else if(r<-2147483648){r=-2147483648}r=+r;if(ne(r)){r=n?0:e.length-1}if(r<0)r=e.length+r;if(r>=e.length){if(n)return-1;else r=e.length-1}else if(r<0){if(n)r=0;else return-1}if(typeof t==="string"){t=a.from(t,i)}if(a.isBuffer(t)){if(t.length===0){return-1}return S(e,t,r,i,n)}else if(typeof t==="number"){t=t&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(n){return Uint8Array.prototype.indexOf.call(e,t,r)}else{return Uint8Array.prototype.lastIndexOf.call(e,t,r)}}return S(e,[t],r,i,n)}throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,i,n){let s=1;let a=e.length;let o=t.length;if(i!==undefined){i=String(i).toLowerCase();if(i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le"){if(e.length<2||t.length<2){return-1}s=2;a/=2;o/=2;r/=2}}function f(e,t){if(s===1){return e[t]}else{return e.readUInt16BE(t*s)}}let c;if(n){let i=-1;for(c=r;c<a;c++){if(f(e,c)===f(t,i===-1?0:c-i)){if(i===-1)i=c;if(c-i+1===o)return i*s}else{if(i!==-1)c-=c-i;i=-1}}}else{if(r+o>a)r=a-o;for(c=r;c>=0;c--){let r=true;for(let i=0;i<o;i++){if(f(e,c+i)!==f(t,i)){r=false;break}}if(r)return c}}return-1}a.prototype.includes=function e(t,r,i){return this.indexOf(t,r,i)!==-1};a.prototype.indexOf=function e(t,r,i){return g(this,t,r,i,true)};a.prototype.lastIndexOf=function e(t,r,i){return g(this,t,r,i,false)};function E(e,t,r,i){r=Number(r)||0;const n=e.length-r;if(!i){i=n}else{i=Number(i);if(i>n){i=n}}const s=t.length;if(i>s/2){i=s/2}let a;for(a=0;a<i;++a){const i=parseInt(t.substr(a*2,2),16);if(ne(i))return a;e[r+a]=i}return a}function _(e,t,r,i){return re(Q(t,e.length-r),e,r,i)}function $(e,t,r,i){return re(Z(t),e,r,i)}function C(e,t,r,i){return re(te(t),e,r,i)}function P(e,t,r,i){return re(ee(t,e.length-r),e,r,i)}a.prototype.write=function e(t,r,i,n){if(r===undefined){n="utf8";i=this.length;r=0}else if(i===undefined&&typeof r==="string"){n=r;i=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(i)){i=i>>>0;if(n===undefined)n="utf8"}else{n=i;i=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}const s=this.length-r;if(i===undefined||i>s)i=s;if(t.length>0&&(i<0||r<0)||r>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!n)n="utf8";let a=false;for(;;){switch(n){case"hex":return E(this,t,r,i);case"utf8":case"utf-8":return _(this,t,r,i);case"ascii":case"latin1":case"binary":return $(this,t,r,i);case"base64":return C(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase();a=true}}};a.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,r){if(t===0&&r===e.length){return base64Js.fromByteArray(e)}else{return base64Js.fromByteArray(e.slice(t,r))}}function I(e,t,r){r=Math.min(e.length,r);const i=[];let n=t;while(n<r){const t=e[n];let s=null;let a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,o,f;switch(a){case 1:if(t<128){s=t}break;case 2:r=e[n+1];if((r&192)===128){f=(t&31)<<6|r&63;if(f>127){s=f}}break;case 3:r=e[n+1];i=e[n+2];if((r&192)===128&&(i&192)===128){f=(t&15)<<12|(r&63)<<6|i&63;if(f>2047&&(f<55296||f>57343)){s=f}}break;case 4:r=e[n+1];i=e[n+2];o=e[n+3];if((r&192)===128&&(i&192)===128&&(o&192)===128){f=(t&15)<<18|(r&63)<<12|(i&63)<<6|o&63;if(f>65535&&f<1114112){s=f}}}}if(s===null){s=65533;a=1}else if(s>65535){s-=65536;i.push(s>>>10&1023|55296);s=56320|s&1023}i.push(s);n+=a}return N(i)}const x=4096;function N(e){const t=e.length;if(t<=x){return String.fromCharCode.apply(String,e)}let r="";let i=0;while(i<t){r+=String.fromCharCode.apply(String,e.slice(i,i+=x))}return r}function M(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n){i+=String.fromCharCode(e[n]&127)}return i}function k(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n){i+=String.fromCharCode(e[n])}return i}function R(e,t,r){const i=e.length;if(!t||t<0)t=0;if(!r||r<0||r>i)r=i;let n="";for(let i=t;i<r;++i){n+=se[e[i]]}return n}function B(e,t,r){const i=e.slice(t,r);let n="";for(let e=0;e<i.length-1;e+=2){n+=String.fromCharCode(i[e]+i[e+1]*256)}return n}a.prototype.slice=function e(t,r){const i=this.length;t=~~t;r=r===undefined?i:~~r;if(t<0){t+=i;if(t<0)t=0}else if(t>i){t=i}if(r<0){r+=i;if(r<0)r=0}else if(r>i){r=i}if(r<t)r=t;const n=this.subarray(t,r);Object.setPrototypeOf(n,a.prototype);return n};function O(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function e(t,r,i){t=t>>>0;r=r>>>0;if(!i)O(t,r,this.length);let n=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){n+=this[t+a]*s}return n};a.prototype.readUintBE=a.prototype.readUIntBE=function e(t,r,i){t=t>>>0;r=r>>>0;if(!i){O(t,r,this.length)}let n=this[t+--r];let s=1;while(r>0&&(s*=256)){n+=this[t+--r]*s}return n};a.prototype.readUint8=a.prototype.readUInt8=function e(t,r){t=t>>>0;if(!r)O(t,1,this.length);return this[t]};a.prototype.readUint16LE=a.prototype.readUInt16LE=function e(t,r){t=t>>>0;if(!r)O(t,2,this.length);return this[t]|this[t+1]<<8};a.prototype.readUint16BE=a.prototype.readUInt16BE=function e(t,r){t=t>>>0;if(!r)O(t,2,this.length);return this[t]<<8|this[t+1]};a.prototype.readUint32LE=a.prototype.readUInt32LE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};a.prototype.readUint32BE=a.prototype.readUInt32BE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};a.prototype.readBigUInt64LE=ae((function e(t){t=t>>>0;z(t,"offset");const r=this[t];const i=this[t+7];if(r===undefined||i===undefined){W(t,this.length-8)}const n=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24;const s=this[++t]+this[++t]*2**8+this[++t]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))}));a.prototype.readBigUInt64BE=ae((function e(t){t=t>>>0;z(t,"offset");const r=this[t];const i=this[t+7];if(r===undefined||i===undefined){W(t,this.length-8)}const n=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t];const s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)}));a.prototype.readIntLE=function e(t,r,i){t=t>>>0;r=r>>>0;if(!i)O(t,r,this.length);let n=this[t];let s=1;let a=0;while(++a<r&&(s*=256)){n+=this[t+a]*s}s*=128;if(n>=s)n-=Math.pow(2,8*r);return n};a.prototype.readIntBE=function e(t,r,i){t=t>>>0;r=r>>>0;if(!i)O(t,r,this.length);let n=r;let s=1;let a=this[t+--n];while(n>0&&(s*=256)){a+=this[t+--n]*s}s*=128;if(a>=s)a-=Math.pow(2,8*r);return a};a.prototype.readInt8=function e(t,r){t=t>>>0;if(!r)O(t,1,this.length);if(!(this[t]&128))return this[t];return(255-this[t]+1)*-1};a.prototype.readInt16LE=function e(t,r){t=t>>>0;if(!r)O(t,2,this.length);const i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};a.prototype.readInt16BE=function e(t,r){t=t>>>0;if(!r)O(t,2,this.length);const i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};a.prototype.readInt32LE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};a.prototype.readInt32BE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};a.prototype.readBigInt64LE=ae((function e(t){t=t>>>0;z(t,"offset");const r=this[t];const i=this[t+7];if(r===undefined||i===undefined){W(t,this.length-8)}const n=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}));a.prototype.readBigInt64BE=ae((function e(t){t=t>>>0;z(t,"offset");const r=this[t];const i=this[t+7];if(r===undefined||i===undefined){W(t,this.length-8)}const n=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+i)}));a.prototype.readFloatLE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return ieee754.read(this,t,true,23,4)};a.prototype.readFloatBE=function e(t,r){t=t>>>0;if(!r)O(t,4,this.length);return ieee754.read(this,t,false,23,4)};a.prototype.readDoubleLE=function e(t,r){t=t>>>0;if(!r)O(t,8,this.length);return ieee754.read(this,t,true,52,8)};a.prototype.readDoubleBE=function e(t,r){t=t>>>0;if(!r)O(t,8,this.length);return ieee754.read(this,t,false,52,8)};function D(e,t,r,i,n,s){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function e(t,r,i,n){t=+t;r=r>>>0;i=i>>>0;if(!n){const e=Math.pow(2,8*i)-1;D(this,t,r,i,e,0)}let s=1;let a=0;this[r]=t&255;while(++a<i&&(s*=256)){this[r+a]=t/s&255}return r+i};a.prototype.writeUintBE=a.prototype.writeUIntBE=function e(t,r,i,n){t=+t;r=r>>>0;i=i>>>0;if(!n){const e=Math.pow(2,8*i)-1;D(this,t,r,i,e,0)}let s=i-1;let a=1;this[r+s]=t&255;while(--s>=0&&(a*=256)){this[r+s]=t/a&255}return r+i};a.prototype.writeUint8=a.prototype.writeUInt8=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,1,255,0);this[r]=t&255;return r+1};a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,2,65535,0);this[r]=t&255;this[r+1]=t>>>8;return r+2};a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,2,65535,0);this[r]=t>>>8;this[r+1]=t&255;return r+2};a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,4,4294967295,0);this[r+3]=t>>>24;this[r+2]=t>>>16;this[r+1]=t>>>8;this[r]=t&255;return r+4};a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,4,4294967295,0);this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};function U(e,t,r,i,n){Y(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;s=s>>8;e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;a=a>>8;e[r++]=a;return r}function j(e,t,r,i,n){Y(t,i,n,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s;s=s>>8;e[r+6]=s;s=s>>8;e[r+5]=s;s=s>>8;e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));e[r+3]=a;a=a>>8;e[r+2]=a;a=a>>8;e[r+1]=a;a=a>>8;e[r]=a;return r+8}a.prototype.writeBigUInt64LE=ae((function e(t,r=0){return U(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeBigUInt64BE=ae((function e(t,r=0){return j(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}));a.prototype.writeIntLE=function e(t,r,i,n){t=+t;r=r>>>0;if(!n){const e=Math.pow(2,8*i-1);D(this,t,r,i,e-1,-e)}let s=0;let a=1;let o=0;this[r]=t&255;while(++s<i&&(a*=256)){if(t<0&&o===0&&this[r+s-1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+i};a.prototype.writeIntBE=function e(t,r,i,n){t=+t;r=r>>>0;if(!n){const e=Math.pow(2,8*i-1);D(this,t,r,i,e-1,-e)}let s=i-1;let a=1;let o=0;this[r+s]=t&255;while(--s>=0&&(a*=256)){if(t<0&&o===0&&this[r+s+1]!==0){o=1}this[r+s]=(t/a>>0)-o&255}return r+i};a.prototype.writeInt8=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,1,127,-128);if(t<0)t=255+t+1;this[r]=t&255;return r+1};a.prototype.writeInt16LE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,2,32767,-32768);this[r]=t&255;this[r+1]=t>>>8;return r+2};a.prototype.writeInt16BE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,2,32767,-32768);this[r]=t>>>8;this[r+1]=t&255;return r+2};a.prototype.writeInt32LE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,4,2147483647,-2147483648);this[r]=t&255;this[r+1]=t>>>8;this[r+2]=t>>>16;this[r+3]=t>>>24;return r+4};a.prototype.writeInt32BE=function e(t,r,i){t=+t;r=r>>>0;if(!i)D(this,t,r,4,2147483647,-2147483648);if(t<0)t=4294967295+t+1;this[r]=t>>>24;this[r+1]=t>>>16;this[r+2]=t>>>8;this[r+3]=t&255;return r+4};a.prototype.writeBigInt64LE=ae((function e(t,r=0){return U(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));a.prototype.writeBigInt64BE=ae((function e(t,r=0){return j(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}));function L(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(e,t,r,i,n){t=+t;r=r>>>0;if(!n){L(e,t,r,4)}ieee754.write(e,t,r,i,23,4);return r+4}a.prototype.writeFloatLE=function e(t,r,i){return K(this,t,r,true,i)};a.prototype.writeFloatBE=function e(t,r,i){return K(this,t,r,false,i)};function V(e,t,r,i,n){t=+t;r=r>>>0;if(!n){L(e,t,r,8)}ieee754.write(e,t,r,i,52,8);return r+8}a.prototype.writeDoubleLE=function e(t,r,i){return V(this,t,r,true,i)};a.prototype.writeDoubleBE=function e(t,r,i){return V(this,t,r,false,i)};a.prototype.copy=function e(t,r,i,n){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(!i)i=0;if(!n&&n!==0)n=this.length;if(r>=t.length)r=t.length;if(!r)r=0;if(n>0&&n<i)n=i;if(n===i)return 0;if(t.length===0||this.length===0)return 0;if(r<0){throw new RangeError("targetStart out of bounds")}if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");if(n>this.length)n=this.length;if(t.length-r<n-i){n=t.length-r+i}const s=n-i;if(this===t&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(r,i,n)}else{Uint8Array.prototype.set.call(t,this.subarray(i,n),r)}return s};a.prototype.fill=function e(t,r,i,n){if(typeof t==="string"){if(typeof r==="string"){n=r;r=0;i=this.length}else if(typeof i==="string"){n=i;i=this.length}if(n!==undefined&&typeof n!=="string"){throw new TypeError("encoding must be a string")}if(typeof n==="string"&&!a.isEncoding(n)){throw new TypeError("Unknown encoding: "+n)}if(t.length===1){const e=t.charCodeAt(0);if(n==="utf8"&&e<128||n==="latin1"){t=e}}}else if(typeof t==="number"){t=t&255}else if(typeof t==="boolean"){t=Number(t)}if(r<0||this.length<r||this.length<i){throw new RangeError("Out of range index")}if(i<=r){return this}r=r>>>0;i=i===undefined?this.length:i>>>0;if(!t)t=0;let s;if(typeof t==="number"){for(s=r;s<i;++s){this[s]=t}}else{const e=a.isBuffer(t)?t:a.from(t,n);const o=e.length;if(o===0){throw new TypeError('The value "'+t+'" is invalid for argument "value"')}for(s=0;s<i-r;++s){this[s+r]=e[s%o]}}return this};const H={};function F(e,t,r){H[e]=class i extends r{constructor(){super();Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:true,configurable:true});this.name=`${this.name} [${e}]`;delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:e,writable:true})}toString(){return`${this.name} [${e}]: ${this.message}`}}}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){if(e){return`${e} is outside of buffer bounds`}return"Attempt to access memory outside buffer bounds"}),RangeError);F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError);F("ERR_OUT_OF_RANGE",(function(e,t,r){let i=`The value of "${e}" is out of range.`;let n=r;if(Number.isInteger(r)&&Math.abs(r)>2**32){n=G(String(r))}else if(typeof r==="bigint"){n=String(r);if(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32))){n=G(n)}n+="n"}i+=` It must be ${t}. Received ${n}`;return i}),RangeError);function G(e){let t="";let r=e.length;const i=e[0]==="-"?1:0;for(;r>=i+4;r-=3){t=`_${e.slice(r-3,r)}${t}`}return`${e.slice(0,r)}${t}`}function X(e,t,r){z(t,"offset");if(e[t]===undefined||e[t+r]===undefined){W(t,e.length-(r+1))}}function Y(e,t,r,i,n,s){if(e>r||e<t){const i=typeof t==="bigint"?"n":"";let n;if(s>3){if(t===0||t===BigInt(0)){n=`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`}else{n=`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** `+`${(s+1)*8-1}${i}`}}else{n=`>= ${t}${i} and <= ${r}${i}`}throw new H.ERR_OUT_OF_RANGE("value",n,e)}X(i,n,s)}function z(e,t){if(typeof e!=="number"){throw new H.ERR_INVALID_ARG_TYPE(t,"number",e)}}function W(e,t,r){if(Math.floor(e)!==e){z(e,r);throw new H.ERR_OUT_OF_RANGE(r||"offset","an integer",e)}if(t<0){throw new H.ERR_BUFFER_OUT_OF_BOUNDS}throw new H.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}const J=/[^+/0-9A-Za-z-_]/g;function q(e){e=e.split("=")[0];e=e.trim().replace(J,"");if(e.length<2)return"";while(e.length%4!==0){e=e+"="}return e}function Q(e,t){t=t||Infinity;let r;const i=e.length;let n=null;const s=[];for(let a=0;a<i;++a){r=e.charCodeAt(a);if(r>55295&&r<57344){if(!n){if(r>56319){if((t-=3)>-1)s.push(239,191,189);continue}else if(a+1===i){if((t-=3)>-1)s.push(239,191,189);continue}n=r;continue}if(r<56320){if((t-=3)>-1)s.push(239,191,189);n=r;continue}r=(n-55296<<10|r-56320)+65536}else if(n){if((t-=3)>-1)s.push(239,191,189)}n=null;if(r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else{throw new Error("Invalid code point")}}return s}function Z(e){const t=[];for(let r=0;r<e.length;++r){t.push(e.charCodeAt(r)&255)}return t}function ee(e,t){let r,i,n;const s=[];for(let a=0;a<e.length;++a){if((t-=2)<0)break;r=e.charCodeAt(a);i=r>>8;n=r%256;s.push(n);s.push(i)}return s}function te(e){return base64Js.toByteArray(q(e))}function re(e,t,r,i){let n;for(n=0;n<i;++n){if(n+r>=t.length||n>=e.length)break;t[n+r]=e[n]}return n}function ie(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function ne(e){return e!==e}const se=function(){const e="0123456789abcdef";const t=new Array(256);for(let r=0;r<16;++r){const i=r*16;for(let n=0;n<16;++n){t[i+n]=e[r]+e[n]}}return t}();function ae(e){return typeof BigInt==="undefined"?oe:e}function oe(){throw new Error("BigInt not supported")}}));const{Buffer:Buffer$1}=buffer;const symbol=Symbol.for("BufferList");function BufferList(e){if(!(this instanceof BufferList)){return new BufferList(e)}BufferList._init.call(this,e)}BufferList._init=function e(t){Object.defineProperty(this,symbol,{value:true});this._bufs=[];this.length=0;if(t){this.append(t)}};BufferList.prototype._new=function e(t){return new BufferList(t)};BufferList.prototype._offset=function e(t){if(t===0){return[0,0]}let r=0;for(let e=0;e<this._bufs.length;e++){const i=r+this._bufs[e].length;if(t<i||e===this._bufs.length-1){return[e,t-r]}r=i}};BufferList.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++){r+=this._bufs[e].length}return r};BufferList.prototype.get=function e(t){if(t>this.length||t<0){return undefined}const r=this._offset(t);return this._bufs[r[0]][r[1]]};BufferList.prototype.slice=function e(t,r){if(typeof t==="number"&&t<0){t+=this.length}if(typeof r==="number"&&r<0){r+=this.length}return this.copy(null,0,t,r)};BufferList.prototype.copy=function e(t,r,i,n){if(typeof i!=="number"||i<0){i=0}if(typeof n!=="number"||n>this.length){n=this.length}if(i>=this.length){return t||Buffer$1.alloc(0)}if(n<=0){return t||Buffer$1.alloc(0)}const e=!!t;const s=this._offset(i);const a=n-i;let o=a;let f=e&&r||0;let c=s[1];if(i===0&&n===this.length){if(!e){return this._bufs.length===1?this._bufs[0]:Buffer$1.concat(this._bufs,this.length)}for(let e=0;e<this._bufs.length;e++){this._bufs[e].copy(t,f);f+=this._bufs[e].length}return t}if(o<=this._bufs[s[0]].length-c){return e?this._bufs[s[0]].copy(t,r,c,c+o):this._bufs[s[0]].slice(c,c+o)}if(!e){t=Buffer$1.allocUnsafe(a)}for(let e=s[0];e<this._bufs.length;e++){const r=this._bufs[e].length-c;if(o>r){this._bufs[e].copy(t,f,c);f+=r}else{this._bufs[e].copy(t,f,c,c+o);f+=r;break}o-=r;if(c){c=0}}if(t.length>f)return t.slice(0,f);return t};BufferList.prototype.shallowSlice=function e(t,r){t=t||0;r=typeof r!=="number"?this.length:r;if(t<0){t+=this.length}if(r<0){r+=this.length}if(t===r){return this._new()}const i=this._offset(t);const n=this._offset(r);const s=this._bufs.slice(i[0],n[0]+1);if(n[1]===0){s.pop()}else{s[s.length-1]=s[s.length-1].slice(0,n[1])}if(i[1]!==0){s[0]=s[0].slice(i[1])}return this._new(s)};BufferList.prototype.toString=function e(t,r,i){return this.slice(r,i).toString(t)};BufferList.prototype.consume=function e(t){t=Math.trunc(t);if(Number.isNaN(t)||t<=0)return this;while(this._bufs.length){if(t>=this._bufs[0].length){t-=this._bufs[0].length;this.length-=this._bufs[0].length;this._bufs.shift()}else{this._bufs[0]=this._bufs[0].slice(t);this.length-=t;break}}return this};BufferList.prototype.duplicate=function e(){const t=this._new();for(let e=0;e<this._bufs.length;e++){t.append(this._bufs[e])}return t};BufferList.prototype.append=function e(t){if(t==null){return this}if(t.buffer){this._appendBuffer(Buffer$1.from(t.buffer,t.byteOffset,t.byteLength))}else if(Array.isArray(t)){for(let e=0;e<t.length;e++){this.append(t[e])}}else if(this._isBufferList(t)){for(let e=0;e<t._bufs.length;e++){this.append(t._bufs[e])}}else{if(typeof t==="number"){t=t.toString()}this._appendBuffer(Buffer$1.from(t))}return this};BufferList.prototype._appendBuffer=function e(t){this._bufs.push(t);this.length+=t.length};BufferList.prototype.indexOf=function(e,t,r){if(r===undefined&&typeof t==="string"){r=t;t=undefined}if(typeof e==="function"||Array.isArray(e)){throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.')}else if(typeof e==="number"){e=Buffer$1.from([e])}else if(typeof e==="string"){e=Buffer$1.from(e,r)}else if(this._isBufferList(e)){e=e.slice()}else if(Array.isArray(e.buffer)){e=Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)}else if(!Buffer$1.isBuffer(e)){e=Buffer$1.from(e)}t=Number(t||0);if(isNaN(t)){t=0}if(t<0){t=this.length+t}if(t<0){t=0}if(e.length===0){return t>this.length?this.length:t}const i=this._offset(t);let n=i[0];let s=i[1];for(;n<this._bufs.length;n++){const t=this._bufs[n];while(s<t.length){const r=t.length-s;if(r>=e.length){const r=t.indexOf(e,s);if(r!==-1){return this._reverseOffset([n,r])}s=t.length-e.length+1}else{const t=this._reverseOffset([n,s]);if(this._match(t,e)){return t}s++}}s=0}return-1};BufferList.prototype._match=function(e,t){if(this.length-e<t.length){return false}for(let r=0;r<t.length;r++){if(this.get(e+r)!==t[r]){return false}}return true};(function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e){(function(t){if(e[t]===null){BufferList.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}}else{BufferList.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}})(t)}})();BufferList.prototype._isBufferList=function e(t){return t instanceof BufferList||BufferList.isBufferList(t)};BufferList.isBufferList=function e(t){return t!=null&&t[symbol]};var BufferList_1=BufferList;class Rabin{constructor(e,t=12,r=8*1024,i=32*1024,n=64,s){this.bits=t;this.min=r;this.max=i;this.asModule=e;this.rabin=new e.Rabin(t,r,i,n,s);this.polynomial=s}fingerprint(e){const{__retain:t,__release:r,__allocArray:i,__getInt32Array:n,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule;const o=new Int32Array(Math.ceil(e.length/this.min));const f=t(i(s,o));const c=t(i(a,e));const u=this.rabin.fingerprint(c,f);const h=n(u);r(c);r(f);const l=h.indexOf(0);return l>=0?h.subarray(0,l):h}}var rabin$1=Rabin;const ID_OFFSET=-8;const SIZE_OFFSET=-4;const ARRAYBUFFER_ID=0;const STRING_ID=1;const ARRAYBUFFERVIEW=1<<0;const ARRAY=1<<1;const VAL_ALIGN_OFFSET=5;const VAL_SIGNED=1<<10;const VAL_FLOAT=1<<11;const VAL_MANAGED=1<<13;const ARRAYBUFFERVIEW_BUFFER_OFFSET=0;const ARRAYBUFFERVIEW_DATASTART_OFFSET=4;const ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8;const ARRAYBUFFERVIEW_SIZE=12;const ARRAY_LENGTH_OFFSET=12;const ARRAY_SIZE=16;const BIGINT=typeof BigUint64Array!=="undefined";const THIS=Symbol();const CHUNKSIZE=1024;function getStringImpl(e,t){const r=new Uint32Array(e);const i=new Uint16Array(e);var n=r[t+SIZE_OFFSET>>>2]>>>1;var s=t>>>1;if(n<=CHUNKSIZE)return String.fromCharCode.apply(String,i.subarray(s,s+n));const a=[];do{const e=i[s+CHUNKSIZE-1];const t=e>=55296&&e<56320?CHUNKSIZE-1:CHUNKSIZE;a.push(String.fromCharCode.apply(String,i.subarray(s,s+=t)));n-=t}while(n>CHUNKSIZE);return a.join("")+String.fromCharCode.apply(String,i.subarray(s,s+n))}function preInstantiate(e){const t={};function r(e,t){if(!e)return"<yet unknown>";return getStringImpl(e.buffer,t)}const i=e.env=e.env||{};i.abort=i.abort||function e(n,s,a,o){const f=t.memory||i.memory;throw Error("abort: "+r(f,n)+" at "+r(f,s)+":"+a+":"+o)};i.trace=i.trace||function e(n,s){const a=t.memory||i.memory;console.log("trace: "+r(a,n)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))};e.Math=e.Math||Math;e.Date=e.Date||Date;return t}function postInstantiate(e,t){const r=t.exports;const i=r.memory;const n=r.table;const s=r["__alloc"];const a=r["__retain"];const o=r["__rtti_base"]||~0;function f(e){const t=new Uint32Array(i.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2]}function c(e){const t=new Uint32Array(i.buffer);const r=t[o>>>2];if((e>>>=0)>=r)throw Error("invalid id: "+e);return t[(o+4>>>2)+e*2+1]}function u(e){return 31-Math.clz32(e>>>VAL_ALIGN_OFFSET&31)}function h(e){const t=e.length;const r=s(t<<1,STRING_ID);const n=new Uint16Array(i.buffer);for(var a=0,o=r>>>1;a<t;++a)n[o+a]=e.charCodeAt(a);return r}e.__allocString=h;function l(e){const t=i.buffer;const r=new Uint32Array(t)[e+ID_OFFSET>>>2];if(r!==STRING_ID)throw Error("not a string: "+e);return getStringImpl(t,e)}e.__getString=l;function d(e,t,r){const n=i.buffer;if(r){switch(e){case 2:return new Float32Array(n);case 3:return new Float64Array(n)}}else{switch(e){case 0:return new(t?Int8Array:Uint8Array)(n);case 1:return new(t?Int16Array:Uint16Array)(n);case 2:return new(t?Int32Array:Uint32Array)(n);case 3:return new(t?BigInt64Array:BigUint64Array)(n)}}throw Error("unsupported align: "+e)}function p(e,t){const r=f(e);if(!(r&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+e+" @ "+r);const n=u(r);const o=t.length;const c=s(o<<n,ARRAYBUFFER_ID);const h=s(r&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,e);const l=new Uint32Array(i.buffer);l[h+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=a(c);l[h+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=c;l[h+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=o<<n;if(r&ARRAY)l[h+ARRAY_LENGTH_OFFSET>>>2]=o;const p=d(n,r&VAL_SIGNED,r&VAL_FLOAT);if(r&VAL_MANAGED){for(let e=0;e<o;++e)p[(c>>>n)+e]=a(t[e])}else{p.set(t,c>>>n)}return h}e.__allocArray=p;function b(e){const t=new Uint32Array(i.buffer);const r=t[e+ID_OFFSET>>>2];const n=f(r);if(!(n&ARRAYBUFFERVIEW))throw Error("not an array: "+r);const s=u(n);var a=t[e+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const o=n&ARRAY?t[e+ARRAY_LENGTH_OFFSET>>>2]:t[a+SIZE_OFFSET>>>2]>>>s;return d(s,n&VAL_SIGNED,n&VAL_FLOAT).subarray(a>>>=s,a+o)}e.__getArrayView=b;function m(e){const t=b(e);const r=t.length;const i=new Array(r);for(let e=0;e<r;e++)i[e]=t[e];return i}e.__getArray=m;function v(e){const t=i.buffer;const r=new Uint32Array(t)[e+SIZE_OFFSET>>>2];return t.slice(e,e+r)}e.__getArrayBuffer=v;function y(e,t,r){return new e(w(e,t,r))}function w(e,t,r){const n=i.buffer;const s=new Uint32Array(n);const a=s[r+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new e(n,a,s[a+SIZE_OFFSET>>>2]>>>t)}e.__getInt8Array=y.bind(null,Int8Array,0);e.__getInt8ArrayView=w.bind(null,Int8Array,0);e.__getUint8Array=y.bind(null,Uint8Array,0);e.__getUint8ArrayView=w.bind(null,Uint8Array,0);e.__getUint8ClampedArray=y.bind(null,Uint8ClampedArray,0);e.__getUint8ClampedArrayView=w.bind(null,Uint8ClampedArray,0);e.__getInt16Array=y.bind(null,Int16Array,1);e.__getInt16ArrayView=w.bind(null,Int16Array,1);e.__getUint16Array=y.bind(null,Uint16Array,1);e.__getUint16ArrayView=w.bind(null,Uint16Array,1);e.__getInt32Array=y.bind(null,Int32Array,2);e.__getInt32ArrayView=w.bind(null,Int32Array,2);e.__getUint32Array=y.bind(null,Uint32Array,2);e.__getUint32ArrayView=w.bind(null,Uint32Array,2);if(BIGINT){e.__getInt64Array=y.bind(null,BigInt64Array,3);e.__getInt64ArrayView=w.bind(null,BigInt64Array,3);e.__getUint64Array=y.bind(null,BigUint64Array,3);e.__getUint64ArrayView=w.bind(null,BigUint64Array,3)}e.__getFloat32Array=y.bind(null,Float32Array,2);e.__getFloat32ArrayView=w.bind(null,Float32Array,2);e.__getFloat64Array=y.bind(null,Float64Array,3);e.__getFloat64ArrayView=w.bind(null,Float64Array,3);function A(e,t){const r=new Uint32Array(i.buffer);var n=r[e+ID_OFFSET>>>2];if(n<=r[o>>>2]){do{if(n==t)return true}while(n=c(n))}return false}e.__instanceof=A;e.memory=e.memory||i;e.table=e.table||n;return demangle(r,e)}function isResponse(e){return typeof Response!=="undefined"&&e instanceof Response}async function instantiate$1(e,t){if(isResponse(e=await e))return instantiateStreaming(e,t);return postInstantiate(preInstantiate(t||(t={})),await WebAssembly.instantiate(e instanceof WebAssembly.Module?e:await WebAssembly.compile(e),t))}var instantiate_1=instantiate$1;function instantiateSync(e,t){return postInstantiate(preInstantiate(t||(t={})),new WebAssembly.Instance(e instanceof WebAssembly.Module?e:new WebAssembly.Module(e),t))}var instantiateSync_1=instantiateSync;async function instantiateStreaming(e,t){if(!WebAssembly.instantiateStreaming){return instantiate$1(isResponse(e=await e)?e.arrayBuffer():e,t)}return postInstantiate(preInstantiate(t||(t={})),(await WebAssembly.instantiateStreaming(e,t)).instance)}var instantiateStreaming_1=instantiateStreaming;function demangle(e,t){var r=t?Object.create(t):{};var i=e["__argumentsLength"]?function(t){e["__argumentsLength"].value=t}:e["__setArgumentsLength"]||e["__setargc"]||function(){};for(let t in e){if(!Object.prototype.hasOwnProperty.call(e,t))continue;const n=e[t];let s=t.split(".");let a=r;while(s.length>1){let e=s.shift();if(!Object.prototype.hasOwnProperty.call(a,e))a[e]={};a=a[e]}let o=s[0];let f=o.indexOf("#");if(f>=0){let r=o.substring(0,f);let s=a[r];if(typeof s==="undefined"||!s.prototype){let e=function(...t){return e.wrap(e.prototype.constructor(0,...t))};e.prototype={valueOf:function e(){return this[THIS]}};e.wrap=function(t){return Object.create(e.prototype,{[THIS]:{value:t,writable:false}})};if(s)Object.getOwnPropertyNames(s).forEach((t=>Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))));a[r]=e}o=o.substring(f+1);a=a[r].prototype;if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){let r=e[t.replace("set:","get:")];let i=e[t.replace("get:","set:")];Object.defineProperty(a,o,{get:function(){return r(this[THIS])},set:function(e){i(this[THIS],e)},enumerable:true})}}else{if(o==="constructor"){(a[o]=(...e)=>{i(e.length);return n(...e)}).original=n}else{(a[o]=function(...e){i(e.length);return n(this[THIS],...e)}).original=n}}}else{if(/^(get|set):/.test(o)){if(!Object.prototype.hasOwnProperty.call(a,o=o.substring(4))){Object.defineProperty(a,o,{get:e[t.replace("set:","get:")],set:e[t.replace("get:","set:")],enumerable:true})}}else if(typeof n==="function"&&n!==i){(a[o]=(...e)=>{i(e.length);return n(...e)}).original=n}else{a[o]=n}}}return r}var demangle_1=demangle;var loader={instantiate:instantiate_1,instantiateSync:instantiateSync_1,instantiateStreaming:instantiateStreaming_1,demangle:demangle_1};const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly!=="undefined";function loadWebAssembly(e={}){if(!loadWebAssembly.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([t],{type:"application/wasm"})),e)}var rabinWasm=loadWebAssembly;const create$1=async(e,t,r,i,n)=>{const s=await rabinWasm();return new rabin$1(s,e,t,r,i,n)};var src$3={Rabin:rabin$1,create:create$1};const{create}=src$3;var rabin_1=async function*e(t,r){let i,n,s;if(r.minChunkSize&&r.maxChunkSize&&r.avgChunkSize){s=r.avgChunkSize;i=r.minChunkSize;n=r.maxChunkSize}else if(!r.avgChunkSize){throw errCode(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE")}else{s=r.avgChunkSize;i=s/3;n=s+s/2}if(i<16){throw errCode(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE")}if(n<i){n=i}if(s<i){s=i}const a=Math.floor(Math.log2(s));for await(const e of rabin(t,{min:i,max:n,bits:a,window:r.window,polynomial:r.polynomial})){yield e}};async function*rabin(e,t){const r=await create(t.bits,t.min,t.max,t.window);const i=new BufferList_1;for await(const t of e){i.append(t);const e=r.fingerprint(t);for(let t=0;t<e.length;t++){const r=e[t];const n=i.slice(0,r);i.consume(r);yield n}}if(i.length){yield i.slice(0)}}var fixedSize=async function*e(t,r){let i=new BufferList_1;let n=0;let s=false;const a=r.maxChunkSize;for await(const e of t){i.append(e);n+=e.length;while(n>=a){yield i.slice(0,a);s=true;if(a===i.length){i=new BufferList_1;n=0}else{const e=new BufferList_1;e.append(i.shallowSlice(a));i=e;n-=a}}}if(!s||n){yield i.slice(0,n)}};async function*validateChunks(e){for await(const t of e){if(t.length===undefined){throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}if(typeof t==="string"||t instanceof String){yield fromString_1$1(t.toString())}else if(Array.isArray(t)){yield Uint8Array.from(t)}else if(t instanceof Uint8Array){yield t}else{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}}var validateChunks_1=validateChunks;function isIterable(e){return Symbol.iterator in e}function isAsyncIterable(e){return Symbol.asyncIterator in e}function contentAsAsyncIterable(e){try{if(e instanceof Uint8Array){return async function*(){yield e}()}else if(isIterable(e)){return async function*(){yield*e}()}else if(isAsyncIterable(e)){return e}}catch{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(e,t,r){for await(const i of e){if(i.path){if(i.path.substring(0,2)==="./"){r.wrapWithDirectory=true}i.path=i.path.split("/").filter((e=>e&&e!==".")).join("/")}if(i.content){let e;if(typeof r.chunker==="function"){e=r.chunker}else if(r.chunker==="rabin"){e=rabin_1}else{e=fixedSize}let n;if(typeof r.chunkValidator==="function"){n=r.chunkValidator}else{n=validateChunks_1}const s={path:i.path,mtime:i.mtime,mode:i.mode,content:e(n(contentAsAsyncIterable(i.content),r),r)};yield()=>file(s,t,r)}else if(i.path){const e={path:i.path,mtime:i.mtime,mode:i.mode};yield()=>dir$1(e,t,r)}else{throw new Error("Import candidate must have content or path or both")}}}var dagBuilder_1=dagBuilder;class Dir{constructor(e,t){this.options=t||{};this.root=e.root;this.dir=e.dir;this.path=e.path;this.dirty=e.dirty;this.flat=e.flat;this.parent=e.parent;this.parentKey=e.parentKey;this.unixfs=e.unixfs;this.mode=e.mode;this.mtime=e.mtime;this.cid=undefined;this.size=undefined}async put(e,t){}get(e){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(e){}}var dir=Dir;const{DAGLink:DAGLink$1,DAGNode:DAGNode$1}=src$4;const{UnixFS:UnixFS$1}=src$a;class DirFlat extends dir{constructor(e,t){super(e,t);this._children={}}async put(e,t){this.cid=undefined;this.size=undefined;this._children[e]=t}get(e){return Promise.resolve(this._children[e])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const e=Object.keys(this._children);for(let t=0;t<e.length;t++){const r=e[t];yield{key:r,child:this._children[r]}}}async*flush(e){const t=Object.keys(this._children);const r=[];for(let i=0;i<t.length;i++){let n=this._children[t[i]];if(n instanceof dir){for await(const t of n.flush(e)){n=t;yield n}}if(n.size!=null&&n.cid){r.push(new DAGLink$1(t[i],n.size,n.cid))}}const i=new UnixFS$1({type:"directory",mtime:this.mtime,mode:this.mode});const n=new DAGNode$1(i.marshal(),r);const s=n.serialize();const a=await persist_1(s,e,this.options);const o=s.length+n.Links.reduce(((e,t)=>e+t.Tsize),0);this.cid=a;this.size=o;yield{cid:a,unixfs:i,path:this.path,size:o}}}var dirFlat=DirFlat;const BITS_PER_BYTE=7;var sparseArray=class e{constructor(){this._bitArrays=[];this._data=[];this._length=0;this._changedLength=false;this._changedData=false}set(e,t){let r=this._internalPositionFor(e,false);if(t===undefined){if(r!==-1){this._unsetInternalPos(r);this._unsetBit(e);this._changedLength=true;this._changedData=true}}else{let i=false;if(r===-1){r=this._data.length;this._setBit(e);this._changedData=true}else{i=true}this._setInternalPos(r,e,t,i);this._changedLength=true}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,true);if(t===-1){return undefined}return this._data[t][1]}push(e){this.set(this.length,e);return this.length}get length(){this._sortData();if(this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0;this._changedLength=false}return this._length}forEach(e){let t=0;while(t<this.length){e(this.get(t),t,this);t++}}map(e){let t=0;let r=new Array(this.length);while(t<this.length){r[t]=e(this.get(t),t,this);t++}return r}reduce(e,t){let r=0;let i=t;while(r<this.length){const t=this.get(r);i=e(i,t,r);r++}return i}find(e){let t=0,r,i;while(t<this.length&&!r){i=this.get(t);r=e(i);t++}return r?i:undefined}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length){return-1}const i=this._bitArrays[r];const n=e-r*BITS_PER_BYTE;const s=(i&1<<n)>0;if(!s){return-1}const a=this._bitArrays.slice(0,r).reduce(popCountReduce,0);const o=~(4294967295<<n+1);const f=popCount(i&o);const c=a+f-1;return c}_bytePosFor(e,t){const r=Math.floor(e/BITS_PER_BYTE);const i=r+1;while(!t&&this._bitArrays.length<i){this._bitArrays.push(0)}return r}_setBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]|=1<<e-t*BITS_PER_BYTE}_unsetBit(e){const t=this._bytePosFor(e,false);this._bitArrays[t]&=~(1<<e-t*BITS_PER_BYTE)}_setInternalPos(e,t,r,i){const n=this._data;const s=[t,r];if(i){this._sortData();n[e]=s}else{if(n.length){if(n[n.length-1][0]>=t){n.push(s)}else if(n[0][0]<=t){n.unshift(s)}else{const e=Math.round(n.length/2);this._data=n.slice(0,e).concat(s).concat(n.slice(e))}}else{this._data.push(s)}this._changedData=true;this._changedLength=true}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){if(this._changedData){this._data.sort(sortInternal)}this._changedData=false}bitField(){const e=[];let t=8;let r=0;let i=0;let n;const s=this._bitArrays.slice();while(s.length||r){if(r===0){n=s.shift();r=7}const a=Math.min(r,t);const o=~(255<<a);const f=n&o;i|=f<<8-t;n=n>>>a;r-=a;t-=a;if(!t||!r&&!s.length){e.push(i);i=0;t=8}}for(var a=e.length-1;a>0;a--){const t=e[a];if(t===0){e.pop()}else{break}}return e}compactArray(){this._sortData();return this._data.map(valueOnly)}};function popCountReduce(e,t){return e+popCount(t)}function popCount(e){let t=e;t=t-(t>>1&1431655765);t=(t&858993459)+(t>>2&858993459);return(t+(t>>4)&252645135)*16843009>>24}function sortInternal(e,t){return e[0]-t[0]}function valueOnly(e){return e[1]}function base$1(e,t){if(e.length>=255){throw new TypeError("Alphabet too long")}var r=new Uint8Array(256);for(var i=0;i<r.length;i++){r[i]=255}for(var n=0;n<e.length;n++){var s=e.charAt(n);var a=s.charCodeAt(0);if(r[a]!==255){throw new TypeError(s+" is ambiguous")}r[a]=n}var o=e.length;var f=e.charAt(0);var c=Math.log(o)/Math.log(256);var u=Math.log(256)/Math.log(o);function h(t){if(t instanceof Uint8Array);else if(ArrayBuffer.isView(t)){t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}else if(Array.isArray(t)){t=Uint8Array.from(t)}if(!(t instanceof Uint8Array)){throw new TypeError("Expected Uint8Array")}if(t.length===0){return""}var r=0;var i=0;var n=0;var s=t.length;while(n!==s&&t[n]===0){n++;r++}var a=(s-n)*u+1>>>0;var c=new Uint8Array(a);while(n!==s){var h=t[n];var l=0;for(var d=a-1;(h!==0||l<i)&&d!==-1;d--,l++){h+=256*c[d]>>>0;c[d]=h%o>>>0;h=h/o>>>0}if(h!==0){throw new Error("Non-zero carry")}i=l;n++}var p=a-i;while(p!==a&&c[p]===0){p++}var b=f.repeat(r);for(;p<a;++p){b+=e.charAt(c[p])}return b}function l(e){if(typeof e!=="string"){throw new TypeError("Expected String")}if(e.length===0){return new Uint8Array}var t=0;if(e[t]===" "){return}var i=0;var n=0;while(e[t]===f){i++;t++}var s=(e.length-t)*c+1>>>0;var a=new Uint8Array(s);while(e[t]){var u=r[e.charCodeAt(t)];if(u===255){return}var h=0;for(var l=s-1;(u!==0||h<n)&&l!==-1;l--,h++){u+=o*a[l]>>>0;a[l]=u%256>>>0;u=u/256>>>0}if(u!==0){throw new Error("Non-zero carry")}n=h;t++}if(e[t]===" "){return}var d=s-n;while(d!==s&&a[d]===0){d++}var p=new Uint8Array(i+(s-d));var b=i;while(d!==s){p[b++]=a[d++]}return p}function d(e){var r=l(e);if(r){return r}throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var src$2=base$1;var _brrp__multiformats_scope_baseX=src$2;var baseX=_brrp__multiformats_scope_baseX;var bytes=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new Uint8Array(0);const i=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"");const n=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):r};const s=(e,t)=>{if(e===t)return true;if(e.byteLength!==t.byteLength){return false}for(let r=0;r<e.byteLength;r++){if(e[r]!==t[r]){return false}}return true};const a=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}throw new Error("Unknown type, must be binary type")};const o=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e);const f=e=>(new TextEncoder).encode(e);const c=e=>(new TextDecoder).decode(e);t.coerce=a;t.empty=r;t.equals=s;t.fromHex=n;t.fromString=f;t.isBinary=o;t.toHex=i;t.toString=c}));var base=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r){this.name=e;this.prefix=t;this.baseEncode=r}encode(e){if(e instanceof Uint8Array){return`${this.prefix}${this.baseEncode(e)}`}else{throw Error("Unknown type, must be binary type")}}}class i{constructor(e,t,r){this.name=e;this.prefix=t;if(t.codePointAt(0)===undefined){throw new Error("Invalid prefix character")}this.prefixCodePoint=t.codePointAt(0);this.baseDecode=r}decode(e){if(typeof e==="string"){if(e.codePointAt(0)!==this.prefixCodePoint){throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}return this.baseDecode(e.slice(this.prefix.length))}else{throw Error("Can only multibase decode strings")}}or(e){return s(this,e)}}class n{constructor(e){this.decoders=e}or(e){return s(this,e)}decode(e){const t=e[0];const r=this.decoders[t];if(r){return r.decode(e)}else{throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}}const s=(e,t)=>new n({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class a{constructor(e,t,n,s){this.name=e;this.prefix=t;this.baseEncode=n;this.baseDecode=s;this.encoder=new r(e,t,n);this.decoder=new i(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const o=({name:e,prefix:t,encode:r,decode:i})=>new a(e,t,r,i);const f=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:n}=baseX(r,t);return o({prefix:e,name:t,encode:i,decode:e=>bytes.coerce(n(e))})};const c=(e,t,r,i)=>{const n={};for(let e=0;e<t.length;++e){n[t[e]]=e}let s=e.length;while(e[s-1]==="="){--s}const a=new Uint8Array(s*r/8|0);let o=0;let f=0;let c=0;for(let t=0;t<s;++t){const s=n[e[t]];if(s===undefined){throw new SyntaxError(`Non-${i} character`)}f=f<<r|s;o+=r;if(o>=8){o-=8;a[c++]=255&f>>o}}if(o>=r||255&f<<8-o){throw new SyntaxError("Unexpected end of data")}return a};const u=(e,t,r)=>{const i=t[t.length-1]==="=";const n=(1<<r)-1;let s="";let a=0;let o=0;for(let i=0;i<e.length;++i){o=o<<8|e[i];a+=8;while(a>r){a-=r;s+=t[n&o>>a]}}if(a){s+=t[n&o<<r-a]}if(i){while(s.length*r&7){s+="="}}return s};const h=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>o({prefix:t,name:e,encode(e){return u(e,i,r)},decode(t){return c(t,i,r,e)}});t.Codec=a;t.baseX=f;t.from=o;t.or=s;t.rfc4648=h}));var identity_1$1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.from({prefix:"\0",name:"identity",encode:e=>bytes.toString(e),decode:e=>bytes.fromString(e)});t.identity=r}));var base2_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});t.base2=r}));var base8_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});t.base8=r}));var base10_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});t.base10=r}));var base16_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4});const i=base.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});t.base16=r;t.base16upper=i}));var base32_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});const i=base.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});const n=base.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});const s=base.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});const a=base.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});const o=base.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});const f=base.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});const c=base.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});const u=base.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});t.base32=r;t.base32hex=a;t.base32hexpad=f;t.base32hexpadupper=c;t.base32hexupper=o;t.base32pad=n;t.base32padupper=s;t.base32upper=i;t.base32z=u}));var base36_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});const i=base.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});t.base36=r;t.base36upper=i}));var base58=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});const i=base.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});t.base58btc=r;t.base58flickr=i}));var base64_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=base.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});const i=base.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});const n=base.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});const s=base.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});t.base64=r;t.base64pad=i;t.base64url=n;t.base64urlpad=s}));var base256emoji_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=Array.from("");const i=r.reduce(((e,t,r)=>{e[r]=t;return e}),[]);const n=r.reduce(((e,t,r)=>{e[t.codePointAt(0)]=r;return e}),[]);function s(e){return e.reduce(((e,t)=>{e+=i[t];return e}),"")}function a(e){const t=[];for(const r of e){const e=n[r.codePointAt(0)];if(e===undefined){throw new Error(`Non-base256emoji character: ${r}`)}t.push(e)}return new Uint8Array(t)}const o=base.from({prefix:"",name:"base256emoji",encode:s,decode:a});t.base256emoji=o}));var encode_1=encode;var MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode(e,t,r){t=t||[];r=r||0;var i=r;while(e>=INT){t[r++]=e&255|MSB;e/=128}while(e&MSBALL){t[r++]=e&255|MSB;e>>>=7}t[r]=e|0;encode.bytes=r-i+1;return t}var decode=read;var MSB$1=128,REST$1=127;function read(e,t){var r=0,t=t||0,i=0,n=t,s,a=e.length;do{if(n>=a){read.bytes=0;throw new RangeError("Could not decode varint")}s=e[n++];r+=i<28?(s&REST$1)<<i:(s&REST$1)*Math.pow(2,i);i+=7}while(s>=MSB$1);read.bytes=n-t;return r}var N1=Math.pow(2,7);var N2=Math.pow(2,14);var N3=Math.pow(2,21);var N4=Math.pow(2,28);var N5=Math.pow(2,35);var N6=Math.pow(2,42);var N7=Math.pow(2,49);var N8=Math.pow(2,56);var N9=Math.pow(2,63);var length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10};var varint$1={encode:encode_1,decode,encodingLength:length};var _brrp_varint=varint$1;var varint$1$1=_brrp_varint;var varint_1=varint$1$1;var varint=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t=0)=>{const r=varint_1.decode(e,t);return[r,varint_1.decode.bytes]};const i=(e,t,r=0)=>{varint_1.encode(e,t,r);return t};const n=e=>varint_1.encodingLength(e);t.decode=r;t.encodeTo=i;t.encodingLength=n}));var digest=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=(e,t)=>{const r=t.byteLength;const i=varint.encodingLength(e);const n=i+varint.encodingLength(r);const a=new Uint8Array(n+r);varint.encodeTo(e,a,0);varint.encodeTo(r,a,i);a.set(t,n);return new s(e,r,t,a)};const i=e=>{const t=bytes.coerce(e);const[r,i]=varint.decode(t);const[n,a]=varint.decode(t.subarray(i));const o=t.subarray(i+a);if(o.byteLength!==n){throw new Error("Incorrect length")}return new s(r,n,o,t)};const n=(e,t)=>{if(e===t){return true}else{return e.code===t.code&&e.size===t.size&&bytes.equals(e.bytes,t.bytes)}};class s{constructor(e,t,r,i){this.code=e;this.size=t;this.digest=r;this.bytes=i}}t.Digest=s;t.create=r;t.decode=i;t.equals=n}));var hasher=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=({name:e,code:t,encode:r})=>new i(e,t,r);class i{constructor(e,t,r){this.name=e;this.code=t;this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?digest.create(this.code,t):t.then((e=>digest.create(this.code,e)))}else{throw Error("Unknown type, must be binary type")}}}t.Hasher=i;t.from=r}));var sha2Browser=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));const i=hasher.from({name:"sha2-256",code:18,encode:r("SHA-256")});const n=hasher.from({name:"sha2-512",code:19,encode:r("SHA-512")});t.sha256=i;t.sha512=n}));var identity_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=0;const i="identity";const n=bytes.coerce;const s=e=>digest.create(r,n(e));const a={code:r,name:i,encode:n,digest:s};t.identity=a}));var raw=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r="raw";const i=85;const n=e=>bytes.coerce(e);const s=e=>bytes.coerce(e);t.code=i;t.decode=s;t.encode=n;t.name=r}));var json=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r=new TextEncoder;const i=new TextDecoder;const n="json";const s=512;const a=e=>r.encode(JSON.stringify(e));const o=e=>JSON.parse(i.decode(e));t.code=s;t.decode=o;t.encode=a;t.name=n}));var cid=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});class r{constructor(e,t,r,i){this.code=t;this.version=e;this.multihash=r;this.bytes=i;this.byteOffset=i.byteOffset;this.byteLength=i.byteLength;this.asCID=this;this._baseCache=new Map;Object.defineProperties(this,{byteOffset:h,byteLength:h,code:u,version:u,multihash:u,bytes:u,_baseCache:h,asCID:h})}toV0(){switch(this.version){case 0:{return this}default:{const{code:e,multihash:t}=this;if(e!==a){throw new Error("Cannot convert a non dag-pb CID to CIDv0")}if(t.code!==o){throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0")}return r.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash;const i=digest.create(e,t);return r.createV1(this.code,i)}case 1:{return this}default:{throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}}equals(e){return e&&this.code===e.code&&this.version===e.version&&digest.equals(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:i}=this;switch(r){case 0:return n(t,i,e||base58.base58btc.encoder);default:return s(t,i,e||base32_1.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){d(/^0\.0/,p);return!!(e&&(e[c]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof r){return e}else if(e!=null&&e.asCID===e){const{version:t,code:i,multihash:n,bytes:s}=e;return new r(t,i,n,s||f(t,i,n.bytes))}else if(e!=null&&e[c]===true){const{version:t,multihash:i,code:n}=e;const s=digest.decode(i);return r.create(t,n,s)}else{return null}}static create(e,t,i){if(typeof t!=="number"){throw new Error("String codecs are no longer supported")}switch(e){case 0:{if(t!==a){throw new Error(`Version 0 CID must use dag-pb (code: ${a}) block encoding`)}else{return new r(e,t,i,i.bytes)}}case 1:{const n=f(e,t,i.bytes);return new r(e,t,i,n)}default:{throw new Error("Invalid version")}}}static createV0(e){return r.create(0,a,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){const[t,i]=r.decodeFirst(e);if(i.length){throw new Error("Incorrect length")}return t}static decodeFirst(e){const t=r.inspectBytes(e);const i=t.size-t.multihashSize;const n=bytes.coerce(e.subarray(i,i+t.multihashSize));if(n.byteLength!==t.multihashSize){throw new Error("Incorrect length")}const s=n.subarray(t.multihashSize-t.digestSize);const a=new digest.Digest(t.multihashCode,t.digestSize,s,n);const o=t.version===0?r.createV0(a):r.createV1(t.codec,a);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,i]=varint.decode(e.subarray(t));t+=i;return r};let i=r();let n=a;if(i===18){i=0;t=0}else if(i===1){n=r()}if(i!==0&&i!==1){throw new RangeError(`Invalid CID version ${i}`)}const s=t;const o=r();const f=r();const c=t+f;const u=c-s;return{version:i,codec:n,multihashCode:o,digestSize:f,multihashSize:u,size:c}}static parse(e,t){const[n,s]=i(e,t);const a=r.decode(s);a._baseCache.set(n,e);return a}}const i=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58.base58btc;return[base58.base58btc.prefix,r.decode(`${base58.base58btc.prefix}${e}`)]}case base58.base58btc.prefix:{const r=t||base58.base58btc;return[base58.base58btc.prefix,r.decode(e)]}case base32_1.base32.prefix:{const r=t||base32_1.base32;return[base32_1.base32.prefix,r.decode(e)]}default:{if(t==null){throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided")}return[e[0],t.decode(e)]}}};const n=(e,t,r)=>{const{prefix:i}=r;if(i!==base58.base58btc.prefix){throw Error(`Cannot string encode V0 in ${r.name} encoding`)}const n=t.get(i);if(n==null){const n=r.encode(e).slice(1);t.set(i,n);return n}else{return n}};const s=(e,t,r)=>{const{prefix:i}=r;const n=t.get(i);if(n==null){const n=r.encode(e);t.set(i,n);return n}else{return n}};const a=112;const o=18;const f=(e,t,r)=>{const i=varint.encodingLength(e);const n=i+varint.encodingLength(t);const s=new Uint8Array(n+r.byteLength);varint.encodeTo(e,s,0);varint.encodeTo(t,s,i);s.set(r,n);return s};const c=Symbol.for("@ipld/js-cid/CID");const u={writable:false,configurable:false,enumerable:true};const h={writable:false,enumerable:false,configurable:false};const l="0.0.0-dev";const d=(e,t)=>{if(e.test(l)){console.warn(t)}else{throw new Error(t)}};const p=`CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n`;t.CID=r}));createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});t.CID=cid.CID;t.varint=varint;t.bytes=bytes;t.hasher=hasher;t.digest=digest}));var basics=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});const r={...identity_1$1,...base2_1,...base8_1,...base10_1,...base16_1,...base32_1,...base36_1,...base58,...base64_1,...base256emoji_1};const i={...sha2Browser,...identity_1};const n={raw,json};t.CID=cid.CID;t.hasher=hasher;t.digest=digest;t.varint=varint;t.bytes=bytes;t.bases=r;t.codecs=n;t.hashes=i}));var asUint8array=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e){if(globalThis.Buffer!=null){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}return e}t.asUint8Array=r}));var alloc_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null){return asUint8array.asUint8Array(globalThis.Buffer.alloc(e))}return new Uint8Array(e)}function i(e=0){if(globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null){return asUint8array.asUint8Array(globalThis.Buffer.allocUnsafe(e))}return new Uint8Array(e)}t.alloc=r;t.allocUnsafe=i}));function createCodec(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const string=createCodec("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))}));const ascii=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++){t+=String.fromCharCode(e[r])}return t}),(e=>{e=e.substring(1);const t=alloc_1.allocUnsafe(e.length);for(let r=0;r<e.length;r++){t[r]=e.charCodeAt(r)}return t}));const BASES={utf8:string,"utf-8":string,hex:basics.bases.base16,latin1:ascii,ascii,binary:ascii,...basics.bases};var bases=BASES;var fromString_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t="utf8"){const r=bases[t];if(!r){throw new Error(`Unsupported encoding "${t}"`)}if((t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null){return asUint8array.asUint8Array(globalThis.Buffer.from(e,"utf-8"))}return r.decoder.decode(`${r.prefix}${e}`)}t.fromString=r}));const{fromString:uint8ArrayFromString}=fromString_1;class Bucket$1{constructor(e,t,r=0){this._options=e;this._popCount=0;this._parent=t;this._posAtParent=r;this._children=new sparseArray;this.key=null}async put(e,t){const r=await this._findNewBucketAndPos(e);await r.bucket._putAt(r,e,t)}async get(e){const t=await this._findChild(e);if(t){return t.value}}async del(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r&&r.key===e){t.bucket._delAt(t.pos)}}leafCount(){const e=this._children.compactArray();return e.reduce(((e,t)=>{if(t instanceof Bucket$1){return e+t.leafCount()}return e+1}),0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const t of e){if(t instanceof Bucket$1){yield*t.eachLeafSeries()}else{yield t}}return[]}serialize(e,t){const r=[];return t(this._children.reduce(((r,i,n)=>{if(i){if(i instanceof Bucket$1){r.push(i.serialize(e,t))}else{r.push(e(i,n))}}return r}),r))}asyncTransform(e,t){return asyncTransformBucket(this,e,t)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const t=await this._findPlace(e);const r=t.bucket._at(t.pos);if(r instanceof Bucket$1){return undefined}if(r&&r.key===e){return r}}async _findPlace(e){const t=this._options.hash(typeof e==="string"?uint8ArrayFromString(e):e);const r=await t.take(this._options.bits);const i=this._children.get(r);if(i instanceof Bucket$1){return i._findPlace(t)}return{bucket:this,pos:r,hash:t,existingChild:i}}async _findNewBucketAndPos(e){const t=await this._findPlace(e);if(t.existingChild&&t.existingChild.key!==e){const e=new Bucket$1(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,e);const r=await e._findPlace(t.existingChild.hash);r.bucket._putAt(r,t.existingChild.key,t.existingChild.value);return e._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,r){this._putObjectAt(e.pos,{key:t,value:r,hash:e.hash})}_putObjectAt(e,t){if(!this._children.get(e)){this._popCount++}this._children.set(e,t)}_delAt(e){if(e===-1){throw new Error("Invalid position")}if(this._children.get(e)){this._popCount--}this._children.unset(e);this._level()}_level(){if(this._parent&&this._popCount<=1){if(this._popCount===1){const e=this._children.find(exists);if(e&&!(e instanceof Bucket$1)){const t=e.hash;t.untake(this._options.bits);const r={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(r,e.key,e.value)}}else{this._parent._delAt(this._posAtParent)}}}_at(e){return this._children.get(e)}}function exists(e){return Boolean(e)}function mapNode(e,t){return e.key}function reduceNodes(e){return e}async function asyncTransformBucket(e,t,r){const i=[];for(const n of e._children.compactArray()){if(n instanceof Bucket$1){await asyncTransformBucket(n,t,r)}else{const r=await t(n);i.push({bitField:e._children.bitField(),children:r})}}return r(i)}var bucket=Bucket$1;const START_MASKS=[255,254,252,248,240,224,192,128];const STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class e{constructor(e){this._value=e;this._currentBytePos=e.length-1;this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e;let r=0;while(t&&this._haveBits()){const e=this._value[this._currentBytePos];const i=this._currentBitPos+1;const n=Math.min(i,t);const s=byteBitsToInt(e,i-n,n);r=(r<<n)+s;t-=n;this._currentBitPos-=n;if(this._currentBitPos<0){this._currentBitPos=7;this._currentBytePos--}}return r}untake(e){this._currentBitPos+=e;while(this._currentBitPos>7){this._currentBitPos-=8;this._currentBytePos+=1}}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(e,t,r){const i=maskFor(t,r);return(e&i)>>>t}function maskFor(e,t){return START_MASKS[e]&STOP_MASKS[Math.min(t+e-1,7)]}var concat_1=createCommonjsModule$1((function(e,t){Object.defineProperty(t,"__esModule",{value:true});function r(e,t){if(!t){t=e.reduce(((e,t)=>e+t.length),0)}const r=alloc_1.allocUnsafe(t);let i=0;for(const t of e){r.set(t,i);i+=t.length}return asUint8array.asUint8Array(r)}t.concat=r}));const{concat:uint8ArrayConcat}=concat_1;function wrapHash(e){function t(t){if(t instanceof InfiniteHash){return t}else{return new InfiniteHash(t,e)}}return t}class InfiniteHash{constructor(e,t){if(!(e instanceof Uint8Array)){throw new Error("can only hash Uint8Arrays")}this._value=e;this._hashFn=t;this._depth=-1;this._availableBits=0;this._currentBufferIndex=0;this._buffers=[]}async take(e){let t=e;while(this._availableBits<t){await this._produceMoreBits()}let r=0;while(t>0){const e=this._buffers[this._currentBufferIndex];const i=Math.min(e.availableBits(),t);const n=e.take(i);r=(r<<i)+n;t-=i;this._availableBits-=i;if(e.availableBits()===0){this._currentBufferIndex++}}return r}untake(e){let t=e;while(t>0){const e=this._buffers[this._currentBufferIndex];const r=Math.min(e.totalBits()-e.availableBits(),t);e.untake(r);t-=r;this._availableBits+=r;if(this._currentBufferIndex>0&&e.totalBits()===e.availableBits()){this._depth--;this._currentBufferIndex--}}}async _produceMoreBits(){this._depth++;const e=this._depth?uint8ArrayConcat([this._value,Uint8Array.from([this._depth])]):this._value;const t=await this._hashFn(e);const r=new consumableBuffer(t);this._buffers.push(r);this._availableBits+=r.availableBits()}}var consumableHash=wrapHash;var InfiniteHash_1=InfiniteHash;consumableHash.InfiniteHash=InfiniteHash_1;function createHAMT$1(e){if(!e||!e.hashFn){throw new Error("please define an options.hashFn")}const t={bits:e.bits||8,hash:consumableHash(e.hashFn)};return new bucket(t)}var src$1={createHAMT:createHAMT$1,Bucket:bucket};const{DAGLink,DAGNode}=src$4;const{UnixFS}=src$a;const{createHAMT,Bucket}=src$1;class DirSharded extends dir{constructor(e,t){super(e,t);this._bucket=createHAMT({hashFn:t.hamtHashFn,bits:t.hamtBucketBits})}async put(e,t){await this._bucket.put(e,t)}get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:e,value:t}of this._bucket.eachLeafSeries()){yield{key:e,child:t}}}async*flush(e){for await(const t of flush(this._bucket,e,this,this.options)){yield{...t,path:this.path}}}}var dirSharded=DirSharded;async function*flush(e,t,r,i){const n=e._children;const s=[];let a=0;for(let e=0;e<n.length;e++){const r=n.get(e);if(!r){continue}const o=e.toString(16).toUpperCase().padStart(2,"0");if(r instanceof Bucket){let e;for await(const n of await flush(r,t,null,i)){e=n}if(!e){throw new Error("Could not flush sharded directory, no subshard found")}s.push(new DAGLink(o,e.size,e.cid));a+=e.size}else if(typeof r.value.flush==="function"){const e=r.value;let i;for await(const r of e.flush(t)){i=r;yield i}const n=o+r.key;s.push(new DAGLink(n,i.size,i.cid));a+=i.size}else{const e=r.value;if(!e.cid){continue}const t=o+r.key;const i=e.size;s.push(new DAGLink(t,i,e.cid));a+=i}}const o=Uint8Array.from(n.bitField().reverse());const f=new UnixFS({type:"hamt-sharded-directory",data:o,fanout:e.tableSize(),hashType:i.hamtHashCode,mtime:r&&r.mtime,mode:r&&r.mode});const c=new DAGNode(f.marshal(),s);const u=c.serialize();const h=await persist_1(u,t,i);const l=u.length+a;yield{cid:h,unixfs:f,size:l}}var flatToShard=async function e(t,r,i,n){let s=r;if(r instanceof dirFlat&&r.directChildrenCount()>=i){s=await convertToShard(r,n)}const a=s.parent;if(a){if(s!==r){if(t){t.parent=s}if(!s.parentKey){throw new Error("No parent key found")}await a.put(s.parentKey,s)}return e(s,a,i,n)}return s};async function convertToShard(e,t){const r=new dirSharded({root:e.root,dir:true,parent:e.parent,parentKey:e.parentKey,path:e.path,dirty:e.dirty,flat:false,mtime:e.mtime,mode:e.mode},t);for await(const{key:t,child:i}of e.eachChildSeries()){await r.put(t,i)}return r}const toPathComponents=(e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean);var toPathComponents_1=toPathComponents;async function addToTree(e,t,r){const i=toPathComponents_1(e.path||"");const n=i.length-1;let s=t;let a="";for(let o=0;o<i.length;o++){const f=i[o];a+=`${a?"/":""}${f}`;const c=o===n;s.dirty=true;s.cid=undefined;s.size=undefined;if(c){await s.put(f,e);t=await flatToShard(null,s,r.shardSplitThreshold,r)}else{let e=await s.get(f);if(!e||!(e instanceof dir)){e=new dirFlat({root:false,dir:true,parent:s,parentKey:f,path:a,dirty:true,flat:true,mtime:e&&e.unixfs&&e.unixfs.mtime,mode:e&&e.unixfs&&e.unixfs.mode},r)}await s.put(f,e);s=e}}return t}async function*flushAndYield(e,t){if(!(e instanceof dir)){if(e&&e.unixfs&&e.unixfs.isDirectory()){yield e}return}yield*e.flush(t)}async function*treeBuilder(e,t,r){let i=new dirFlat({root:true,dir:true,path:"",dirty:true,flat:true},r);for await(const t of e){if(!t){continue}i=await addToTree(t,i,r);if(!t.unixfs||!t.unixfs.isDirectory()){yield t}}if(r.wrapWithDirectory){yield*flushAndYield(i,t)}else{for await(const e of i.eachChildSeries()){if(!e){continue}yield*flushAndYield(e.child,t)}}}var treeBuilder_1=treeBuilder;async function*importer$1(e,t,r={}){const i=options(r);let n;if(typeof r.dagBuilder==="function"){n=r.dagBuilder}else{n=dagBuilder_1}let s;if(typeof r.treeBuilder==="function"){s=r.treeBuilder}else{s=treeBuilder_1}let a;if(Symbol.asyncIterator in e||Symbol.iterator in e){a=e}else{a=[e]}for await(const e of s(itParallelBatch(n(a,t,i),i.fileImportConcurrency),t,i)){yield{cid:e.cid,path:e.path,unixfs:e.unixfs,size:e.size}}}var src={importer:importer$1};const{importer}=src;const block={get:async e=>{throw new Error(`unexpected block API get for ${e}`)},put:async()=>{throw new Error("unexpected block API put")}};var of=async(e,t)=>{t=t||{};t.onlyHash=true;if(typeof e==="string"){e=(new TextEncoder).encode(e)}let r;for await(const{cid:i}of importer([{content:e}],block,t)){r=i}return`${r}`};class IpfsCidValidator{constructor(){this.validationResult={auth:AuthenticationType.SCRIPT_URI,authText:"Authenticity verified via contract ScriptUri",integrity:IntegrityType.URL_HASH,status:SecurityStatus.INVALID}}async validate(e,t,r){const i=t.match(/^.*[\/=]?([a-zA-z1-9]{46})[\/?&.]?.*$/);if(!i)return false;const n=await of(r,null);if(n===i[1]){this.validationResult.integrityText="IPFS CID/hash successfully validated";this.validationResult.status=SecurityStatus.VALID}else{this.validationResult.integrityText="IPFS CID in url ("+i[0]+") does not match calculated CID ("+n+")";this.validationResult.statusText="TokenScript file integrity cannot be established"}return this.validationResult}}var IntegrityType;(function(e){e["NONE"]="none";e["URL_HASH"]="urlHash";e["XML_DSIG"]="dsig"})(IntegrityType||(IntegrityType={}));var AuthenticationType;(function(e){e["NONE"]="none";e["SCRIPT_URI"]="scriptUri";e["XML_DSIG"]="dsig"})(AuthenticationType||(AuthenticationType={}));var SecurityStatus;(function(e){e["VALID"]="valid";e["WARNING"]="warn";e["INVALID"]="invalid"})(SecurityStatus||(SecurityStatus={}));class SecurityInfo{constructor(e,t,r,i,n){this.tokenScript=e;this.xml=t;this.xmlStr=r;this.source=i;this.sourceUrl=n}async getInfo(){if(!this.securityInfo){await this.verify();if(!this.securityInfo.statusText){if(this.securityInfo.status===SecurityStatus.VALID){this.securityInfo.statusText="TokenScript authenticity & integrity successfully validated"}else{this.securityInfo.statusText="TokenScript authenticity and integrity cannot be established"}}console.log("TokenScript security info result: ",this.securityInfo)}return this.securityInfo}async verify(){const e=await(new DSigValidator).validate(this.tokenScript,this.sourceUrl,this.xmlStr);if(e!==false){this.securityInfo=e;return}if(this.source===ScriptSourceType.SCRIPT_URI){const e=await(new IpfsCidValidator).validate(this.tokenScript,this.sourceUrl,this.xmlStr);if(e!==false){this.securityInfo=e;return}}this.securityInfo={};this.securityInfo.auth=AuthenticationType.NONE;this.securityInfo.authText="Could not verify contract/script authenticity";this.securityInfo.integrity=IntegrityType.NONE;this.securityInfo.integrityText="Could not validated TokenScript file integrity"}}class SelectionFilter{constructor(e,t){this.tokenScript=e;const r=t.match(/([a-zA-Z0-9]*)([=<>]*)([a-zA-Z0-9]*)/);if(r.length<4)throw new Error("Malformed selection filter");this.attributeName=r[1];this.conditionOperator=r[2];this.conditionValue=r[3]}async getAttributeValue(e){const t=this.tokenScript.getAttributes();if(!t.hasAttribute(this.attributeName))throw new Error("Selection filter references an undefined attribute, "+this.attributeName);return t.getAttribute(this.attributeName).getValue(false,false,false,e)}async satisfiesFilter(e){const t=await this.getAttributeValue(e);const r=this.sanitiseConditionValue();switch(this.conditionOperator){case"=":return t==r;case"<":return t<r;case">":return t>r;default:throw new Error("Filter condition "+this.conditionOperator+" is not implemented.")}}sanitiseConditionValue(){switch(this.conditionValue){case"TRUE":return true;case"FALSE":return false;default:if(this.isNumeric(this.conditionValue))return BigInt(this.conditionValue)}return this.conditionValue}isNumeric(e){return/^-?\d+$/.test(e)}}class Selection{constructor(e,t){this.tokenScript=e;this.selectionDef=t}getName(){return this.selectionDef.getAttribute("name")}getLabel(){var e;if(!this.label)this.label=new Label(this.selectionDef);return(e=this.label.getValue())!==null&&e!==void 0?e:this.getName()}getFilter(){if(!this.filter)this.filter=new SelectionFilter(this.tokenScript,this.selectionDef.getAttribute("filter"));return this.filter}isInSelection(e){return this.getFilter().satisfiesFilter(e)}}class Selections{constructor(e,t){this.tokenScript=e;this.parentElem=t}getSelections(){if(!this.selections){this.selections={};const e=Array.prototype.slice.call(this.parentElem.children).filter((e=>e.tagName==="ts:selection"));if(e.length>0){for(let t in e){const r=new Selection(this.tokenScript,e[t]);this.selections[r.getName()]=r}}}return this.selections}getSelection(e){if(!this.selections)this.getSelections();if(!this.selections[e])throw new Error("Could not find selection '"+e+"'");return this.selections[e]}[Symbol.iterator](){return Object.values(this.getSelections()).values()}}class TokenScript{constructor(e,t,r,i,n,s){this.engine=e;this.tokenDef=t;this.xmlStr=r;this.source=i;this.sourceUrl=n;this.viewBinding=s;this.eventHandlers={};console.log("TokenScript object constructed");this.securityInfo=new SecurityInfo(this,this.tokenDef,this.xmlStr,this.source,this.sourceUrl)}emitEvent(e,t){if(this.eventHandlers[e])this.eventHandlers[e](t)}on(e,t){this.eventHandlers[e]=t}getEngine(){return this.engine}async getSecurityInfo(){return await this.securityInfo.getInfo()}hasViewBinding(){return!!this.viewBinding}setViewBinding(e){this.viewBinding=e;this.viewController=null}getViewBinding(){return this.viewBinding}getViewController(){if(!this.viewController){if(!this.viewBinding)throw new Error("View binding has not been provided");this.viewController=new ViewController(this,this.viewBinding)}return this.viewController}async showTokenCard(e){await this.getViewController().showCard(e)}getName(){return this.tokenDef.documentElement.getAttribute("name")}getLabel(){var e,t;if(!this.label)this.label=new Label(this.tokenDef.documentElement);return(t=(e=this.label.getValue())!==null&&e!==void 0?e:this.getName())!==null&&t!==void 0?t:"Unnamed TokenScript"}getCards(){if(!this.cards){let e=this.tokenDef.documentElement.getElementsByTagName("ts:card");this.cards=[];for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Card(this,e[t]);this.cards.push(r)}}return this.cards}loadContracts(){if(!this.contracts){let e=this.tokenDef.documentElement.getElementsByTagName("ts:contract");this.contracts={};for(let t in e){if(!e.hasOwnProperty(t))continue;const r=new Contract(e[t]);this.contracts[r.getName()]=r}}}getContracts(e=false){this.loadContracts();if(e){const e=this.tokenDef.documentElement.getElementsByTagName("ts:origins");const t={};for(let r in e[0].children){const i=e[0].children[r];if(!i.tagName)continue;if(i.tagName=="ts:ethereum"){const e=i.getAttribute("contract");if(this.contracts[e]){t[e]=this.contracts[e]}else{console.warn("Contract with name "+e+" could not be found.")}}else{console.warn("Token origin with tag "+i.tagName+" is not supported")}}return t}return this.contracts}getContractByName(e){var t;this.loadContracts();return(t=this.contracts)===null||t===void 0?void 0:t[e]}getViewContent(e){const t=this.tokenDef.documentElement.getElementsByTagName("ts:viewContent");for(let r in t){if(t[r].getAttribute("name")===e){return t[r].children}}return null}async getTokenMetadata(e=false){if(!this.tokenMetadata||e){const e=await this.resolveTokenMetadata();this.tokenMetadata={};for(let t of e){this.tokenMetadata[t.id]=t}this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}return this.tokenMetadata}setTokenMetadata(e){const t={};for(let r of e){t[r.id]=r}this.tokenMetadata=t;this.emitEvent("TOKENS_UPDATED",{tokens:this.tokenMetadata})}async resolveTokenMetadata(){var e;const t=(e=this.tokenDiscoveryAdapter)!==null&&e!==void 0?e:await this.engine.getTokenDiscoveryAdapter();const r=this.buildTokenDiscoveryData();return await t.getTokens(r)}buildTokenDiscoveryData(e=true){const t=this.getContracts(e);const r=[];for(let e in t){const i=t[e];const n=i.getAddresses();for(let t in n){r.push({id:e,blockChain:"eth",tokenType:i.getInterface(),chainId:n[t].chain,collectionId:n[t].address})}}return r}setTokenDiscoveryAdapter(e){this.tokenDiscoveryAdapter=e}setCurrentTokenContext(e,t=null){var r;if(!this.tokenMetadata[e]){throw new Error("Cannot set token context: contractName was not found")}if(t==null){this.tokenContext=this.tokenMetadata[e];return}if(!((r=this.tokenMetadata[e].nftDetails)===null||r===void 0?void 0:r[t])){throw new Error("Cannot set token context: contractName was not found")}this.tokenContext=this.tokenMetadata[e];this.tokenContext.selectedNftIndex=t;this.tokenContext.selectedNftId=this.tokenMetadata[e].nftDetails[t].tokenId;if(this.hasViewBinding()){const e=this.getViewController().getCurrentCard();if(e){this.getViewController().updateCardData()}}}getCurrentTokenContext(){return this.tokenContext}getAttributes(){if(!this.attributes){this.attributes=new Attributes$2(this,this.tokenDef.documentElement)}return this.attributes}getSelections(){if(!this.selections){this.selections=new Selections(this,this.tokenDef.documentElement)}return this.selections}getAsnModuleDefinition(e){const t=this.tokenDef.getElementsByTagName("asnx:module")[0];return t.querySelector("[name="+e+"]")}async executeTransaction(e,t,r=true){var i,n,s;const a=await this.engine.getWalletAdapter();const o=e.getTransactionInfo();const f=(n=(i=this.getCurrentTokenContext())===null||i===void 0?void 0:i.chainId)!==null&&n!==void 0?n:await a.getChain();const c=o.contract.getAddressByChain(f,true);const u=[];for(let e in o.args){u.push({name:e.toString(),type:o.args[e].type,internalType:o.args[e].type,value:await o.args[e].getValue(this.getCurrentTokenContext())})}const h=o.value?await((s=o===null||o===void 0?void 0:o.value)===null||s===void 0?void 0:s.getValue(this.getCurrentTokenContext())):null;try{await a.sendTransaction(c.chain,c.address,o.function,u,[],h,r,t)}catch(e){console.error(e);const t=e.message.match(/reason="([^"]*)"/);if((t===null||t===void 0?void 0:t.length)>1)throw new Error(t[1]);if(e.message.indexOf("ACTION_REJECTED")>-1)throw new Error("Transaction rejected");throw e}}}const DEFAULT_CONFIG={ipfsGateway:"https://ipfs.io/ipfs/"};var ScriptSourceType;(function(e){e["SCRIPT_URI"]="scriptUri";e["URL"]="url";e["UNKNOWN"]="unknown"})(ScriptSourceType||(ScriptSourceType={}));class TokenScriptEngine{constructor(e,t,r){this.getWalletAdapter=e;this.getTokenDiscoveryAdapter=t;this.config=r;this.repo=new Repo(this);if(this.config){this.config=Object.assign(Object.assign({},DEFAULT_CONFIG),this.config)}else{this.config=DEFAULT_CONFIG}}async getTokenScript(e,t,r){const i=await this.repo.getTokenScript(e,r);return this.initializeTokenScriptObject(i.xml,ScriptSourceType.SCRIPT_URI,i.sourceUrl,t)}async getTokenScriptFromUrl(e,t){const r=await fetch(e);if(r.status<200||r.status>399){throw new Error("Failed to load URL: "+r.statusText)}return this.initializeTokenScriptObject(await r.text(),ScriptSourceType.URL,e,t)}async loadTokenScript(e,t){return this.initializeTokenScriptObject(e,ScriptSourceType.UNKNOWN,null,t)}initializeTokenScriptObject(e,t,r,i){try{let n=new DOMParser;let s=n.parseFromString(e,"text/xml");return new TokenScript(this,s,e,t,r,i)}catch(e){throw new Error("Failed to parse tokenscript definition: "+e.message)}}async signPersonalMessage(e){try{return await(await this.getWalletAdapter()).signPersonalMessage(e)}catch(e){throw new Error("Signing failed: "+e.message)}}}export{BigNumber$1 as B,Description as D,Logger as L,MaxUint256 as M,NegativeOne as N,One as O,SecurityStatus as S,TokenScriptEngine as T,Zero as Z,arrayify as a,hexlify as b,concat$3 as c,defineReadOnly as d,hexZeroPad as e,deepCopy as f,getAddress as g,hexConcat as h,isHexString as i,getStatic as j,keccak256 as k,hexDataSlice as l,accessListify as m,getContractAddress as n,hash_1 as o,isBytesLike as p,hexValue as q,resolveProperties as r,shallowCopy as s,hexDataLength as t,parse as u,checkProperties as v};
//# sourceMappingURL=p-098d6cfd.js.map