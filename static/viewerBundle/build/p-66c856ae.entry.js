import{r as t,h as o}from"./p-f0f1815c.js";const r='/*! tailwindcss v3.1.8 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body,button{line-height:inherit;margin:0}button{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;padding:0;text-transform:none}[type=button],button{-webkit-appearance:button;background-color:transparent;background-image:none}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}p{margin:0}button{cursor:pointer}object,svg{display:block;vertical-align:middle}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scroll-snap-strictness:proximity;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;}.top{left:0;margin-left:auto;margin-right:auto;right:0;top:.5rem}.top-right{right:.5rem;top:.5rem}.successBgColor{--tw-bg-opacity:1;background-color:rgb(16 185 129/var(--tw-bg-opacity))}.infoBgColor{--tw-bg-opacity:1;background-color:rgb(59 130 246/var(--tw-bg-opacity))}.warningBgColor{--tw-bg-opacity:1;background-color:rgb(234 179 8/var(--tw-bg-opacity))}.errorBgColor{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.successTextColor{--tw-text-opacity:1;color:rgb(16 185 129/var(--tw-text-opacity))}.infoTextColor{--tw-text-opacity:1;color:rgb(59 130 246/var(--tw-text-opacity))}.warningTextColor{--tw-text-opacity:1;color:rgb(234 179 8/var(--tw-text-opacity))}.errorTextColor{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.fixed{position:fixed}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.-mx-3{margin-left:-.75rem;margin-right:-.75rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.mt-4{margin-top:1rem}.box-border{box-sizing:border-box}.flex{display:flex}.h-6{height:1.5rem}.w-80{width:20rem}.w-full{width:100%}.w-12{width:3rem}.w-6{width:1.5rem}.w-72{width:18rem}.max-w-sm{max-width:24rem}.flex-grow{flex-grow:1}.grow-0{flex-grow:0}.cursor-pointer{cursor:pointer}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.overflow-hidden{overflow:hidden}.rounded-lg{border-radius:.5rem}.bg-green-700{--tw-bg-opacity:1;background-color:rgb(21 128 61/var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgb(29 78 216/var(--tw-bg-opacity))}.bg-yellow-700{--tw-bg-opacity:1;background-color:rgb(161 98 7/var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity:1;background-color:rgb(185 28 28/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.fill-current{fill:currentColor}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity))}.opacity-100{opacity:1}.opacity-0{opacity:0}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-700{transition-duration:.7s}.ease-in{transition-timing-function:cubic-bezier(.4,0,1,1)}';const e=class{constructor(o){t(this,o);this.timeOut=3e3;this.position="top-right"}async Toast(t){if(t.timeOut!==undefined&&t.timeOut!==""){this.timeOut=t["timeOut"]}if(t.position!==undefined&&t.position!==""){this.position=t["position"]}let o=document.createElement("cb-toastcontent");this.rootElement.append(o);o.setParams({title:t["title"],description:t["description"],type:t["type"]});setTimeout((()=>{let t=o.firstElementChild;t.classList.remove("opacity-100");t.classList.add("opacity-0");setTimeout((()=>{o.remove()}),500)}),this.timeOut)}render(){return o("div",{class:this.position+" fixed w-80  max-w-sm box-border",ref:t=>this.rootElement=t})}};e.style=r;const i=".tokens-grid{display:flex;flex-wrap:wrap;padding:15px}";const n=class{constructor(o){t(this,o);this.walletChangeListener=async t=>{if(t.detail.provider)return;this.currentTokens=null;this.currentTokensFlat=null;console.log("Token Grid: TN wallet disconnect")};this.tokenScript=undefined;this.showToast=undefined;this.currentTokensFlat=undefined}async componentDidLoad(){await this.populateTokens(await this.tokenScript.getTokenMetadata());this.tokenScript.on("TOKENS_UPDATED",(t=>{this.populateTokens(t.tokens)}))}connectedCallback(){window.addEventListener("tn-wallet-change",this.walletChangeListener)}disconnectedCallback(){window.removeEventListener("tn-wallet-change",this.walletChangeListener)}async populateTokens(t){this.currentTokens=t;this.currentTokensFlat=Object.keys(this.currentTokens).reduce(((t,o)=>{if(this.currentTokens[o].nftDetails){const r=this.currentTokens[o].nftDetails.map(((t,r)=>Object.assign(Object.assign({},t),{contextId:o+"-"+r})));t.push(...r)}else{const r=Object.assign(Object.assign({},this.currentTokens[o]),{contextId:o});t.push(r)}return t}),[]);this.invokeUrlAction()}async invokeUrlAction(){const t=new URLSearchParams(document.location.hash.substring(1));if(!t.has("card"))return;const o=t.get("card");const r=this.findCardByUrlParam(o);if(!r){this.showToast("error","Card not found","The card '"+o+"' cannot be found.");return}for(let t of this.currentTokensFlat){const o={chainId:"chainId"in t?t.chainId:t.collectionDetails.chainId,selectedNftId:"tokenId"in t?t.tokenId:undefined};if(await r.card.isEnabledOrReason(o)===true){this.showCard(r.card,t,r.index);return}}this.showToast("error","No supported tokens","None of your tokens support the "+o+" action.")}findCardByUrlParam(t){const o=this.tokenScript.getCards();for(let[r,e]of o.entries()){if(e.name==t)return{card:e,index:r}}const r=parseInt(t);if(!isNaN(r)&&o[r])return{card:o[r],index:r};return null}showCard(t,o,r){var e;const i=o.contextId.split("-");this.tokenScript.setCurrentTokenContext(i[0],i.length>1?parseInt(i[1]):null);console.log("Token context set");this.tokenScript.showTokenCard(t);document.location.hash="#card="+((e=t.name)!==null&&e!==void 0?e:r)}render(){var t;return o("div",{class:"tokens-grid"},((t=this.currentTokensFlat)===null||t===void 0?void 0:t.length)?this.currentTokensFlat.map(((t,r)=>o("tokens-grid-item",{tokenScript:this.tokenScript,token:t,showCard:this.showCard}))):o("h3",null,this.currentTokensFlat?"You don't have any tokens associated with this TokenScript":"Connect wallet to load tokens"))}static get watchers(){return{tokenScript:["componentDidLoad"]}}};n.style=i;export{e as cb_toast,n as tokens_grid};
//# sourceMappingURL=p-66c856ae.entry.js.map